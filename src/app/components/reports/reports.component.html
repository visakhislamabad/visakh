<div class="reports-container">
  <h1>Reports & Accounts</h1>

  <!-- Date Range Filter -->
  <div class="filter-section">
    <div class="date-filters">
      <div class="form-group">
        <label>Start Date:</label>
        <input type="date" [value]="startDate" (input)="startDate = $any($event.target).value" />
      </div>
      <div class="form-group">
        <label>End Date:</label>
        <input type="date" [value]="endDate" (input)="endDate = $any($event.target).value" />
      </div>
      <button class="btn btn-primary" (click)="loadReports()">Apply Filter</button>
      <button class="btn btn-export" (click)="exportToPDF()">ğŸ“„ Export to PDF</button>
      <button class="btn btn-danger" (click)="clearRecords()">ğŸ—‘ï¸ Clear Records</button>
    </div>
  </div>

  <!-- Summary Cards -->
  <div class="summary-cards">
    <div class="summary-card revenue">
      <div class="card-icon">ğŸ’°</div>
      <div class="card-content">
        <h3>Total Revenue</h3>
        <p class="card-value">{{ totalRevenue.toFixed(0) }}</p>
        <small>{{ totalOrdersCount }} orders</small>
      </div>
    </div>
    <div class="summary-card expenses">
      <div class="card-icon">ğŸ“Š</div>
      <div class="card-content">
        <h3>Total Expenses</h3>
        <p class="card-value">{{ totalExpenses.toFixed(0) }}</p>
        <small>{{ expenses.length }} purchases</small>
      </div>
    </div>
    <div class="summary-card profit" [class.negative]="profit < 0">
      <div class="card-icon">{{ profit >= 0 ? 'ğŸ“ˆ' : 'ğŸ“‰' }}</div>
      <div class="card-content">
        <h3>Profit/Loss</h3>
        <p class="card-value">{{ profit.toFixed(0) }}</p>
        <small>Revenue - Expenses</small>
      </div>
    </div>
  </div>

  <!-- Tabs -->
  <div class="tabs">
    <button [class.active]="activeTab === 'sales'" (click)="switchTab('sales')">Sales Report</button>
    <button [class.active]="activeTab === 'expenses'" (click)="switchTab('expenses')">Expense Report</button>
    <button [class.active]="activeTab === 'items'" (click)="switchTab('items')">Item Performance</button>
  </div>

  <!-- Sales Report Tab -->
  <div *ngIf="activeTab === 'sales'" class="tab-content">
    <h2>Sales Details</h2>
    <table class="data-table">
      <thead>
        <tr>
          <th>Order #</th>
          <th>Date</th>
          <th>Table/Type</th>
          <th>Items</th>
          <th>Amount</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let order of salesOrders">
          <td>{{ order.orderNumber }}</td>
          <td>{{ formatDate(order.createdAt) }}</td>
          <td>{{ order.isTakeaway ? 'Takeaway' : 'Table ' + order.tableNumber }}</td>
          <td>{{ order.items.length }} items</td>
          <td>{{ order.totalAmount.toFixed(0) }}</td>
        </tr>
        <tr *ngIf="salesOrders.length === 0">
          <td colspan="5" class="no-data">No sales in this period</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Expense Report Tab -->
  <div *ngIf="activeTab === 'expenses'" class="tab-content">
    <h2>Expense Details</h2>
    <table class="data-table">
      <thead>
        <tr>
          <th>Date</th>
          <th>Supplier</th>
          <th>Item</th>
          <th>Quantity</th>
          <th>Cost</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let expense of expenses">
          <td>{{ expense.date | date:'short' }}</td>
          <td>{{ expense.supplierName }}</td>
          <td>{{ expense.inventoryItemName }}</td>
          <td>{{ expense.quantity }} {{ expense.unit }}</td>
          <td>{{ expense.totalCost.toFixed(0) }}</td>
        </tr>
        <tr *ngIf="expenses.length === 0">
          <td colspan="5" class="no-data">No expenses in this period</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Item Performance Tab -->
  <div *ngIf="activeTab === 'items'" class="tab-content">
    <h2>Best Selling Items</h2>
    <table class="data-table">
      <thead>
        <tr>
          <th>Rank</th>
          <th>Item Name</th>
          <th>Quantity Sold</th>
          <th>Total Revenue</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of itemPerformance; let i = index">
          <td>{{ i + 1 }}</td>
          <td>{{ item.name }}</td>
          <td>{{ item.sold }}</td>
          <td>{{ item.revenue.toFixed(0) }}</td>
        </tr>
        <tr *ngIf="itemPerformance.length === 0">
          <td colspan="4" class="no-data">No sales data available</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
