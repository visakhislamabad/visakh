import{a as Wn}from"./chunk-FK6H3RFT.js";import{a as Pe,b as bt,e as Bl,f as B}from"./chunk-YYD2Q6U2.js";var Pb;function ev(){return Pb}function Fa(n){let e=Pb;return Pb=n,e}var e5=Symbol("NotFound");function Ah(n){return n===e5||n?.name==="\u0275NotFound"}var Vi=null,tv=!1,Nb=1,tj=null,ji=Symbol("SIGNAL");function cn(n){let e=Vi;return Vi=n,e}function ov(){return Vi}var Mh={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Ph(n){if(tv)throw new Error("");if(Vi===null)return;Vi.consumerOnSignalRead(n);let e=Vi.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=Vi.recomputing;if(r&&(t=e!==void 0?e.nextProducer:Vi.producers,t!==void 0&&t.producer===n)){Vi.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===Vi&&(!r||rj(i,Vi)))return;let o=kh(Vi),s={producer:n,consumer:Vi,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};Vi.producersTail=s,e!==void 0?e.nextProducer=s:Vi.producers=s,o&&i5(n,s)}function t5(){Nb++}function sv(n){if(!(kh(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Nb)){if(!n.producerMustRecompute(n)&&!Zp(n)){iv(n);return}n.producerRecomputeValue(n),iv(n)}}function kb(n){if(n.consumers===void 0)return;let e=tv;tv=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||nj(r)}}finally{tv=e}}function Rb(){return Vi?.consumerAllowSignalWrites!==!1}function nj(n){n.dirty=!0,kb(n),n.consumerMarkedDirty?.(n)}function iv(n){n.dirty=!1,n.lastCleanEpoch=Nb}function Nh(n){return n&&n5(n),cn(n)}function n5(n){n.producersTail=void 0,n.recomputing=!0}function Qp(n,e){cn(e),n&&r5(n)}function r5(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(kh(n))do t=Ob(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function Zp(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(sv(t),r!==t.version))return!0}return!1}function Jp(n){if(kh(n)){let e=n.producers;for(;e!==void 0;)e=Ob(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function i5(n,e){let t=n.consumersTail,r=kh(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)i5(i.producer,i)}function Ob(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!kh(e)){let o=e.producers;for(;o!==void 0;)o=Ob(o)}return t}function kh(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function av(n){tj?.(n)}function rj(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function cv(n,e){return Object.is(n,e)}function lv(n,e){let t=Object.create(ij);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(sv(t),Ph(t),t.value===Yp)throw t.error;return t.value};return r[ji]=t,av(t),r}var nv=Symbol("UNSET"),rv=Symbol("COMPUTING"),Yp=Symbol("ERRORED"),ij=bt(Pe({},Mh),{value:nv,dirty:!0,error:null,equal:cv,kind:"computed",producerMustRecompute(n){return n.value===nv||n.value===rv},producerRecomputeValue(n){if(n.value===rv)throw new Error("");let e=n.value;n.value=rv;let t=Nh(n),r,i=!1;try{r=n.computation(),cn(null),i=e!==nv&&e!==Yp&&r!==Yp&&n.equal(e,r)}catch(o){r=Yp,n.error=o}finally{Qp(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function oj(){throw new Error}var o5=oj;function s5(n){o5(n)}function Lb(n){o5=n}var sj=null;function Fb(n,e){let t=Object.create(uv);t.value=n,e!==void 0&&(t.equal=e);let r=()=>a5(t);return r[ji]=t,av(t),[r,s=>Rh(t,s),s=>Vb(t,s)]}function a5(n){return Ph(n),n.value}function Rh(n,e){Rb()||s5(n),n.equal(n.value,e)||(n.value=e,aj(n))}function Vb(n,e){Rb()||s5(n),Rh(n,e(n.value))}var uv=bt(Pe({},Mh),{equal:cv,value:void 0,kind:"signal"});function aj(n){n.version++,t5(),kb(n),sj?.(n)}function Xt(n){return typeof n=="function"}function Oh(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var dv=Oh(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function td(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Sr=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Xt(r))try{r()}catch(o){e=o instanceof dv?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{c5(o)}catch(s){e=e??[],s instanceof dv?e=[...e,...s.errors]:e.push(s)}}if(e)throw new dv(e)}}add(e){var t;if(e&&e!==this)if(this.closed)c5(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&td(t,e)}remove(e){let{_finalizers:t}=this;t&&td(t,e),e instanceof n&&e._removeParent(this)}};Sr.EMPTY=(()=>{let n=new Sr;return n.closed=!0,n})();var jb=Sr.EMPTY;function hv(n){return n instanceof Sr||n&&"closed"in n&&Xt(n.remove)&&Xt(n.add)&&Xt(n.unsubscribe)}function c5(n){Xt(n)?n():n.unsubscribe()}var ea={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Lh={setTimeout(n,e,...t){let{delegate:r}=Lh;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Lh;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function fv(n){Lh.setTimeout(()=>{let{onUnhandledError:e}=ea;if(e)e(n);else throw n})}function Xp(){}var l5=Bb("C",void 0,void 0);function u5(n){return Bb("E",void 0,n)}function d5(n){return Bb("N",n,void 0)}function Bb(n,e,t){return{kind:n,value:e,error:t}}var nd=null;function Fh(n){if(ea.useDeprecatedSynchronousErrorHandling){let e=!nd;if(e&&(nd={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=nd;if(nd=null,t)throw r}}else n()}function h5(n){ea.useDeprecatedSynchronousErrorHandling&&nd&&(nd.errorThrown=!0,nd.error=n)}var rd=class extends Sr{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,hv(e)&&e.add(this)):this.destination=uj}static create(e,t,r){return new Ul(e,t,r)}next(e){this.isStopped?zb(d5(e),this):this._next(e)}error(e){this.isStopped?zb(u5(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?zb(l5,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},cj=Function.prototype.bind;function Ub(n,e){return cj.call(n,e)}var qb=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){pv(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){pv(r)}else pv(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){pv(t)}}},Ul=class extends rd{constructor(e,t,r){super();let i;if(Xt(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&ea.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Ub(e.next,o),error:e.error&&Ub(e.error,o),complete:e.complete&&Ub(e.complete,o)}):i=e}this.destination=new qb(i)}};function pv(n){ea.useDeprecatedSynchronousErrorHandling?h5(n):fv(n)}function lj(n){throw n}function zb(n,e){let{onStoppedNotification:t}=ea;t&&Lh.setTimeout(()=>t(n,e))}var uj={closed:!0,next:Xp,error:lj,complete:Xp};var Vh=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ts(n){return n}function Hb(...n){return $b(n)}function $b(n){return n.length===0?ts:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var rn=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=hj(t)?t:new Ul(t,r,i);return Fh(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=f5(r),new r((i,o)=>{let s=new Ul({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Vh](){return this}pipe(...t){return $b(t)(this)}toPromise(t){return t=f5(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function f5(n){var e;return(e=n??ea.Promise)!==null&&e!==void 0?e:Promise}function dj(n){return n&&Xt(n.next)&&Xt(n.error)&&Xt(n.complete)}function hj(n){return n&&n instanceof rd||dj(n)&&hv(n)}function Wb(n){return Xt(n?.lift)}function En(n){return e=>{if(Wb(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function gn(n,e,t,r,i){return new Gb(n,e,t,r,i)}var Gb=class extends rd{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function jh(){return En((n,e)=>{let t=null;n._refCount++;let r=gn(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Bh=class extends rn{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Wb(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Sr;let t=this.getSubject();e.add(this.source.subscribe(gn(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Sr.EMPTY)}return e}refCount(){return jh()(this)}};var p5=Oh(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var $r=(()=>{class n extends rn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new gv(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new p5}next(t){Fh(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Fh(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Fh(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?jb:(this.currentObservers=null,o.push(t),new Sr(()=>{this.currentObservers=null,td(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new rn;return t.source=this,t}}return n.create=(e,t)=>new gv(e,t),n})(),gv=class extends $r{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:jb}};var Di=class extends $r{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Kb={now(){return(Kb.delegate||Date).now()},delegate:void 0};var mv=class extends Sr{constructor(e,t){super()}schedule(e,t=0){return this}};var eg={setInterval(n,e,...t){let{delegate:r}=eg;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=eg;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Uh=class extends mv{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return eg.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&eg.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,td(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var zh=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};zh.now=Kb.now;var qh=class extends zh{constructor(e,t=zh.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Yb=new qh(Uh);var vv=class extends Uh{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var yv=class extends qh{};var Qb=new yv(vv);var xo=new rn(n=>n.complete());function g5(n){return n&&Xt(n.schedule)}function m5(n){return n[n.length-1]}function _v(n){return Xt(m5(n))?n.pop():void 0}function zl(n){return g5(m5(n))?n.pop():void 0}function Zb(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function y5(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(g){s(g)}}function c(u){try{l(r.throw(u))}catch(g){s(g)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function v5(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function id(n){return this instanceof id?(this.v=n,this):new id(n)}function _5(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(p){return function(S){return Promise.resolve(S).then(p,g)}}function a(p,S){r[p]&&(i[p]=function(k){return new Promise(function(L,R){o.push([p,k,L,R])>1||c(p,k)})},S&&(i[p]=S(i[p])))}function c(p,S){try{l(r[p](S))}catch(k){v(o[0][3],k)}}function l(p){p.value instanceof id?Promise.resolve(p.value.v).then(u,g):v(o[0][2],p)}function u(p){c("next",p)}function g(p){c("throw",p)}function v(p,S){p(S),o.shift(),o.length&&c(o[0][0],o[0][1])}}function w5(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof v5=="function"?v5(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,c){s=n[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var wv=n=>n&&typeof n.length=="number"&&typeof n!="function";function bv(n){return Xt(n?.then)}function Iv(n){return Xt(n[Vh])}function Ev(n){return Symbol.asyncIterator&&Xt(n?.[Symbol.asyncIterator])}function Cv(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function fj(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var xv=fj();function Sv(n){return Xt(n?.[xv])}function Dv(n){return _5(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield id(t.read());if(i)return yield id(void 0);yield yield id(r)}}finally{t.releaseLock()}})}function Tv(n){return Xt(n?.getReader)}function Wr(n){if(n instanceof rn)return n;if(n!=null){if(Iv(n))return pj(n);if(wv(n))return gj(n);if(bv(n))return mj(n);if(Ev(n))return b5(n);if(Sv(n))return vj(n);if(Tv(n))return yj(n)}throw Cv(n)}function pj(n){return new rn(e=>{let t=n[Vh]();if(Xt(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function gj(n){return new rn(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function mj(n){return new rn(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,fv)})}function vj(n){return new rn(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function b5(n){return new rn(e=>{_j(n,e).catch(t=>e.error(t))})}function yj(n){return b5(Dv(n))}function _j(n,e){var t,r,i,o;return y5(this,void 0,void 0,function*(){try{for(t=w5(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function So(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function ql(n,e=0){return En((t,r)=>{t.subscribe(gn(r,i=>So(r,n,()=>r.next(i),e),()=>So(r,n,()=>r.complete(),e),i=>So(r,n,()=>r.error(i),e)))})}function Hl(n,e=0){return En((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function I5(n,e){return Wr(n).pipe(Hl(e),ql(e))}function E5(n,e){return Wr(n).pipe(Hl(e),ql(e))}function C5(n,e){return new rn(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function x5(n,e){return new rn(t=>{let r;return So(t,e,()=>{r=n[xv](),So(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>Xt(r?.return)&&r.return()})}function Av(n,e){if(!n)throw new Error("Iterable cannot be null");return new rn(t=>{So(t,e,()=>{let r=n[Symbol.asyncIterator]();So(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function S5(n,e){return Av(Dv(n),e)}function D5(n,e){if(n!=null){if(Iv(n))return I5(n,e);if(wv(n))return C5(n,e);if(bv(n))return E5(n,e);if(Ev(n))return Av(n,e);if(Sv(n))return x5(n,e);if(Tv(n))return S5(n,e)}throw Cv(n)}function _r(n,e){return e?D5(n,e):Wr(n)}function qt(...n){let e=zl(n);return _r(n,e)}function Hh(n,e){let t=Xt(n)?n:()=>n,r=i=>i.error(t());return new rn(e?i=>e.schedule(r,0,i):r)}function Jb(n){return!!n&&(n instanceof rn||Xt(n.lift)&&Xt(n.subscribe))}var ta=Oh(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Mv(n,e){let t=typeof e=="object";return new Promise((r,i)=>{let o=new Ul({next:s=>{r(s),o.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new ta)}});n.subscribe(o)})}function mn(n,e){return En((t,r)=>{let i=0;t.subscribe(gn(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:wj}=Array;function bj(n,e){return wj(e)?n(...e):n(e)}function Pv(n){return mn(e=>bj(n,e))}var{isArray:Ij}=Array,{getPrototypeOf:Ej,prototype:Cj,keys:xj}=Object;function Nv(n){if(n.length===1){let e=n[0];if(Ij(e))return{args:e,keys:null};if(Sj(e)){let t=xj(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function Sj(n){return n&&typeof n=="object"&&Ej(n)===Cj}function kv(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Rv(...n){let e=zl(n),t=_v(n),{args:r,keys:i}=Nv(n);if(r.length===0)return _r([],e);let o=new rn(Dj(r,e,i?s=>kv(i,s):ts));return t?o.pipe(Pv(t)):o}function Dj(n,e,t=ts){return r=>{T5(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)T5(e,()=>{let l=_r(n[c],e),u=!1;l.subscribe(gn(r,g=>{o[c]=g,u||(u=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function T5(n,e,t){n?So(t,n,e):e()}function A5(n,e,t,r,i,o,s,a){let c=[],l=0,u=0,g=!1,v=()=>{g&&!c.length&&!l&&e.complete()},p=k=>l<r?S(k):c.push(k),S=k=>{o&&e.next(k),l++;let L=!1;Wr(t(k,u++)).subscribe(gn(e,R=>{i?.(R),o?p(R):e.next(R)},()=>{L=!0},void 0,()=>{if(L)try{for(l--;c.length&&l<r;){let R=c.shift();s?So(e,s,()=>S(R)):S(R)}v()}catch(R){e.error(R)}}))};return n.subscribe(gn(e,p,()=>{g=!0,v()})),()=>{a?.()}}function ci(n,e,t=1/0){return Xt(e)?ci((r,i)=>mn((o,s)=>e(r,o,i,s))(Wr(n(r,i))),t):(typeof e=="number"&&(t=e),En((r,i)=>A5(r,i,n,t)))}function M5(n=1/0){return ci(ts,n)}function P5(){return M5(1)}function $h(...n){return P5()(_r(n,zl(n)))}function tg(n){return new rn(e=>{Wr(n()).subscribe(e)})}function Xb(...n){let e=_v(n),{args:t,keys:r}=Nv(n),i=new rn(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let u=0;u<s;u++){let g=!1;Wr(t[u]).subscribe(gn(o,v=>{g||(g=!0,l--),a[u]=v},()=>c--,void 0,()=>{(!c||!g)&&(l||o.next(r?kv(r,a):a),o.complete())}))}});return e?i.pipe(Pv(e)):i}function Ts(n,e){return En((t,r)=>{let i=0;t.subscribe(gn(r,o=>n.call(e,o,i++)&&r.next(o)))})}function $l(n){return En((e,t)=>{let r=null,i=!1,o;r=e.subscribe(gn(t,void 0,void 0,s=>{o=Wr(n(s,$l(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function N5(n,e,t,r,i){return(o,s)=>{let a=t,c=e,l=0;o.subscribe(gn(s,u=>{let g=l++;c=a?n(c,u,g):(a=!0,u),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function Wh(n,e){return Xt(e)?ci(n,e,1):ci(n,1)}function Wl(n){return En((e,t)=>{let r=!1;e.subscribe(gn(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function As(n){return n<=0?()=>xo:En((e,t)=>{let r=0;e.subscribe(gn(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Ov(n=Tj){return En((e,t)=>{let r=!1;e.subscribe(gn(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Tj(){return new ta}function ng(n){return En((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Rc(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Ts((i,o)=>n(i,o,r)):ts,As(1),t?Wl(e):Ov(()=>new ta))}function Gh(n){return n<=0?()=>xo:En((e,t)=>{let r=[];e.subscribe(gn(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function e2(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Ts((i,o)=>n(i,o,r)):ts,Gh(1),t?Wl(e):Ov(()=>new ta))}function t2(n,e){return En(N5(n,e,arguments.length>=2,!0))}function n2(...n){let e=zl(n);return En((t,r)=>{(e?$h(n,t,e):$h(n,t)).subscribe(r)})}function Do(n,e){return En((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(gn(r,c=>{i?.unsubscribe();let l=0,u=o++;Wr(n(c,u)).subscribe(i=gn(r,g=>r.next(e?e(c,g,u,l++):g),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Lv(n){return En((e,t)=>{Wr(n).subscribe(gn(t,()=>t.complete(),Xp)),!t.closed&&e.subscribe(t)})}function hi(n,e,t){let r=Xt(n)||e||t?{next:n,error:e,complete:t}:n;return r?En((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(gn(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):ts}function k5(n){let e=cn(null);try{return n()}finally{cn(e)}}var sd=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},g2=new sd("20.3.15");var Bv="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",et=class extends Error{code;constructor(e,t){super(Yh(e,t)),this.code=e}};function Aj(n){return`NG0${Math.abs(n)}`}function Yh(n,e){return`${Aj(n)}${e?": "+e:""}`}var Vc=globalThis;function kn(n){for(let e in n)if(n[e]===kn)return e;throw Error("")}function L5(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Lc(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Lc).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function m2(n,e){return n?e?`${n} ${e}`:n:e||""}var Mj=kn({__forward_ref__:kn});function Bi(n){return n.__forward_ref__=Bi,n.toString=function(){return Lc(this())},n}function Ti(n){return v2(n)?n():n}function v2(n){return typeof n=="function"&&n.hasOwnProperty(Mj)&&n.__forward_ref__===Bi}function yt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Va(n){return{providers:n.providers||[],imports:n.imports||[]}}function sg(n){return Pj(n,Uv)}function y2(n){return sg(n)!==null}function Pj(n,e){return n.hasOwnProperty(e)&&n[e]||null}function Nj(n){let e=n?.[Uv]??null;return e||null}function i2(n){return n&&n.hasOwnProperty(Vv)?n[Vv]:null}var Uv=kn({\u0275prov:kn}),Vv=kn({\u0275inj:kn}),ct=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=yt({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function _2(n){return n&&!!n.\u0275providers}var w2=kn({\u0275cmp:kn}),b2=kn({\u0275dir:kn}),I2=kn({\u0275pipe:kn}),E2=kn({\u0275mod:kn}),ig=kn({\u0275fac:kn}),ud=kn({__NG_ELEMENT_ID__:kn}),R5=kn({__NG_ENV_ID__:kn});function To(n){return typeof n=="string"?n:n==null?"":String(n)}function F5(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():To(n)}var V5=kn({ngErrorCode:kn}),kj=kn({ngErrorMessage:kn}),Rj=kn({ngTokenPath:kn});function C2(n,e){return j5("",-200,e)}function zv(n,e){throw new et(-201,!1)}function j5(n,e,t){let r=new et(e,n);return r[V5]=e,r[kj]=n,t&&(r[Rj]=t),r}function Oj(n){return n[V5]}var o2;function B5(){return o2}function ao(n){let e=o2;return o2=n,e}function x2(n,e,t){let r=sg(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;zv(n,"Injector")}var Lj={},od=Lj,s2="__NG_DI_FLAG__",a2=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=ad(t)||0;try{return this.injector.get(e,r&8?null:od,r)}catch(i){if(Ah(i))return i;throw i}}};function Fj(n,e=0){let t=ev();if(t===void 0)throw new et(-203,!1);if(t===null)return x2(n,void 0,e);{let r=Vj(e),i=t.retrieve(n,r);if(Ah(i)){if(r.optional)return null;throw i}return i}}function Pt(n,e=0){return(B5()||Fj)(Ti(n),e)}function Oe(n,e){return Pt(n,ad(e))}function ad(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Vj(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function c2(n){let e=[];for(let t=0;t<n.length;t++){let r=Ti(n[t]);if(Array.isArray(r)){if(r.length===0)throw new et(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],c=jj(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(Pt(i,o))}else e.push(Pt(r))}return e}function U5(n,e){return n[s2]=e,n.prototype[s2]=e,n}function jj(n){return n[s2]}function Gl(n,e){let t=n.hasOwnProperty(ig);return t?n[ig]:null}function qv(n,e){n.forEach(t=>Array.isArray(t)?qv(t,e):e(t))}function S2(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function ag(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function z5(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function q5(n,e,t){let r=Qh(n,e);return r>=0?n[r|1]=t:(r=~r,z5(n,r,e,t)),r}function Hv(n,e){let t=Qh(n,e);if(t>=0)return n[t|1]}function Qh(n,e){return Bj(n,e,1)}function Bj(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Yl={},ns=[],jc=new ct(""),D2=new ct("",-1),T2=new ct(""),og=class{get(e,t=od){if(t===od){let i=j5("",-201);throw i.name="\u0275NotFound",i}return t}};function A2(n){return n[E2]||null}function Ql(n){return n[w2]||null}function M2(n){return n[b2]||null}function H5(n){return n[I2]||null}function rs(n){return{\u0275providers:n}}function $5(n){return rs([{provide:jc,multi:!0,useValue:n}])}function W5(...n){return{\u0275providers:P2(!0,n),\u0275fromNgModule:!0}}function P2(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return qv(e,s=>{let a=s;jv(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&G5(i,o),t}function G5(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];N2(i,o=>{e(o,r)})}}function jv(n,e,t,r){if(n=Ti(n),!n)return!1;let i=null,o=i2(n),s=!o&&Ql(n);if(!o&&!s){let c=n.ngModule;if(o=i2(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)jv(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{qv(o.imports,u=>{jv(u,e,t,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&G5(l,e)}if(!a){let l=Gl(i)||(()=>new i);e({provide:i,useFactory:l,deps:ns},i),e({provide:T2,useValue:i,multi:!0},i),e({provide:jc,useValue:()=>Pt(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=n;N2(c,u=>{e(u,l)})}}else return!1;return i!==n&&n.providers!==void 0}function N2(n,e){for(let t of n)_2(t)&&(t=t.\u0275providers),Array.isArray(t)?N2(t,e):e(t)}var Uj=kn({provide:String,useValue:kn});function K5(n){return n!==null&&typeof n=="object"&&Uj in n}function zj(n){return!!(n&&n.useExisting)}function qj(n){return!!(n&&n.useFactory)}function cd(n){return typeof n=="function"}function Y5(n){return!!n.useClass}var cg=new ct(""),Fv={},O5={},r2;function lg(){return r2===void 0&&(r2=new og),r2}var cr=class{},ld=class extends cr{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,u2(e,s=>this.processProvider(s)),this.records.set(D2,Kh(void 0,this)),i.has("environment")&&this.records.set(cr,Kh(void 0,this));let o=this.records.get(cg);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(T2,ns,{self:!0}))}retrieve(e,t){let r=ad(t)||0;try{return this.get(e,od,r)}catch(i){if(Ah(i))return i;throw i}}destroy(){rg(this),this._destroyed=!0;let e=cn(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),cn(e)}}onDestroy(e){return rg(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){rg(this);let t=Fa(this),r=ao(void 0),i;try{return e()}finally{Fa(t),ao(r)}}get(e,t=od,r){if(rg(this),e.hasOwnProperty(R5))return e[R5](this);let i=ad(r),o,s=Fa(this),a=ao(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let u=Kj(e)&&sg(e);u&&this.injectableDefInScope(u)?l=Kh(l2(e),Fv):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let c=i&2?lg():this.parent;return t=i&8&&t===od?null:t,c.get(e,t)}catch(c){let l=Oj(c);throw l===-200||l===-201?new et(l,null):c}finally{ao(a),Fa(s)}}resolveInjectorInitializers(){let e=cn(null),t=Fa(this),r=ao(void 0),i;try{let o=this.get(jc,ns,{self:!0});for(let s of o)s()}finally{Fa(t),ao(r),cn(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Lc(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Ti(e);let t=cd(e)?e:Ti(e&&e.provide),r=$j(e);if(!cd(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Kh(void 0,Fv,!0),i.factory=()=>c2(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=cn(null);try{if(t.value===O5)throw C2(Lc(e));return t.value===Fv&&(t.value=O5,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&Gj(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{cn(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Ti(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function l2(n){let e=sg(n),t=e!==null?e.factory:Gl(n);if(t!==null)return t;if(n instanceof ct)throw new et(204,!1);if(n instanceof Function)return Hj(n);throw new et(204,!1)}function Hj(n){if(n.length>0)throw new et(204,!1);let t=Nj(n);return t!==null?()=>t.factory(n):()=>new n}function $j(n){if(K5(n))return Kh(void 0,n.useValue);{let e=k2(n);return Kh(e,Fv)}}function k2(n,e,t){let r;if(cd(n)){let i=Ti(n);return Gl(i)||l2(i)}else if(K5(n))r=()=>Ti(n.useValue);else if(qj(n))r=()=>n.useFactory(...c2(n.deps||[]));else if(zj(n))r=(i,o)=>Pt(Ti(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=Ti(n&&(n.useClass||n.provide));if(Wj(n))r=()=>new i(...c2(n.deps));else return Gl(i)||l2(i)}return r}function rg(n){if(n.destroyed)throw new et(205,!1)}function Kh(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Wj(n){return!!n.deps}function Gj(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function Kj(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function u2(n,e){for(let t of n)Array.isArray(t)?u2(t,e):t&&_2(t)?u2(t.\u0275providers,e):e(t)}function wr(n,e){let t;n instanceof ld?(rg(n),t=n):t=new a2(n);let r,i=Fa(t),o=ao(void 0);try{return e()}finally{Fa(i),ao(o)}}function Q5(){return B5()!==void 0||ev()!=null}var ra=0,Gt=1,Wt=2,Ai=3,Ms=4,Ps=5,ug=6,Zh=7,Ui=8,Zl=9,ja=10,br=11,Jh=12,R2=13,dd=14,Ns=15,hd=16,fd=17,pd=18,dg=19,O2=20,Oc=21,$v=22,hg=23,is=24,gd=25,fg=26,Mi=27,Z5=1;var Jl=7,pg=8,gg=9,Ao=10;function Ba(n){return Array.isArray(n)&&typeof n[Z5]=="object"}function ia(n){return Array.isArray(n)&&n[Z5]===!0}function L2(n){return(n.flags&4)!==0}function Xl(n){return n.componentOffset>-1}function Xh(n){return(n.flags&1)===1}function Ua(n){return!!n.template}function ef(n){return(n[Wt]&512)!==0}function md(n){return(n[Wt]&256)===256}var J5="svg",X5="math";function ks(n){for(;Array.isArray(n);)n=n[ra];return n}function F2(n,e){return ks(e[n])}function oa(n,e){return ks(e[n.index])}function Wv(n,e){return n.data[e]}function V2(n,e){return n[e]}function j2(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Rs(n,e){let t=e[n];return Ba(t)?t:t[ra]}function Gv(n){return(n[Wt]&128)===128}function eM(n){return ia(n[Ai])}function mg(n,e){return e==null?null:n[e]}function B2(n){n[fd]=0}function U2(n){n[Wt]&1024||(n[Wt]|=1024,Gv(n)&&tf(n))}function tM(n,e){for(;n>0;)e=e[dd],n--;return e}function vg(n){return!!(n[Wt]&9216||n[is]?.dirty)}function Kv(n){n[ja].changeDetectionScheduler?.notify(8),n[Wt]&64&&(n[Wt]|=1024),vg(n)&&tf(n)}function tf(n){n[ja].changeDetectionScheduler?.notify(0);let e=Kl(n);for(;e!==null&&!(e[Wt]&8192||(e[Wt]|=8192,!Gv(e)));)e=Kl(e)}function z2(n,e){if(md(n))throw new et(911,!1);n[Oc]===null&&(n[Oc]=[]),n[Oc].push(e)}function nM(n,e){if(n[Oc]===null)return;let t=n[Oc].indexOf(e);t!==-1&&n[Oc].splice(t,1)}function Kl(n){let e=n[Ai];return ia(e)?e[Ai]:e}function rM(n){return n[Zh]??=[]}function iM(n){return n.cleanup??=[]}var dn={lFrame:bM(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var d2=!1;function oM(){return dn.lFrame.elementDepthCount}function sM(){dn.lFrame.elementDepthCount++}function aM(){dn.lFrame.elementDepthCount--}function Yv(){return dn.bindingsEnabled}function cM(){return dn.skipHydrationRootTNode!==null}function lM(n){return dn.skipHydrationRootTNode===n}function uM(){dn.skipHydrationRootTNode=null}function Dn(){return dn.lFrame.lView}function co(){return dn.lFrame.tView}function _e(n){return dn.lFrame.contextLView=n,n[Ui]}function we(n){return dn.lFrame.contextLView=null,n}function Pi(){let n=q2();for(;n!==null&&n.type===64;)n=n.parent;return n}function q2(){return dn.lFrame.currentTNode}function dM(){let n=dn.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function nf(n,e){let t=dn.lFrame;t.currentTNode=n,t.isParent=e}function H2(){return dn.lFrame.isParent}function hM(){dn.lFrame.isParent=!1}function fM(){return dn.lFrame.contextLView}function $2(){return d2}function W2(n){let e=d2;return d2=n,e}function pM(){let n=dn.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Qv(){return dn.lFrame.bindingIndex}function gM(n){return dn.lFrame.bindingIndex=n}function yg(){return dn.lFrame.bindingIndex++}function _g(n){let e=dn.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function mM(){return dn.lFrame.inI18n}function vM(n,e){let t=dn.lFrame;t.bindingIndex=t.bindingRootIndex=n,Zv(e)}function yM(){return dn.lFrame.currentDirectiveIndex}function Zv(n){dn.lFrame.currentDirectiveIndex=n}function _M(n){let e=dn.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function G2(n){dn.lFrame.currentQueryIndex=n}function Yj(n){let e=n[Gt];return e.type===2?e.declTNode:e.type===1?n[Ps]:null}function K2(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=Yj(o),i===null||(o=o[dd],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=dn.lFrame=wM();return r.currentTNode=e,r.lView=n,!0}function Jv(n){let e=wM(),t=n[Gt];dn.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function wM(){let n=dn.lFrame,e=n===null?null:n.child;return e===null?bM(n):e}function bM(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function IM(){let n=dn.lFrame;return dn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Y2=IM;function Xv(){let n=IM();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function EM(n){return(dn.lFrame.contextLView=tM(n,dn.lFrame.contextLView))[Ui]}function za(){return dn.lFrame.selectedIndex}function eu(n){dn.lFrame.selectedIndex=n}function ey(){let n=dn.lFrame;return Wv(n.tView,n.selectedIndex)}function CM(){return dn.lFrame.currentNamespace}var xM=!0;function ty(){return xM}function wg(n){xM=n}function h2(n,e=null,t=null,r){let i=Q2(n,e,t,r);return i.resolveInjectorInitializers(),i}function Q2(n,e=null,t=null,r,i=new Set){let o=[t||ns,W5(n)];return r=r||(typeof n=="object"?void 0:Lc(n)),new ld(o,e||lg(),r||null,i)}var Gr=class n{static THROW_IF_NOT_FOUND=od;static NULL=new og;static create(e,t){if(Array.isArray(e))return h2({name:""},t,e,"");{let r=e.name??"";return h2({name:r},e.parent,e.providers,r)}}static \u0275prov=yt({token:n,providedIn:"any",factory:()=>Pt(D2)});static __NG_ELEMENT_ID__=-1},fi=new ct(""),sa=(()=>{class n{static __NG_ELEMENT_ID__=Qj;static __NG_ENV_ID__=t=>t}return n})(),f2=class extends sa{_lView;constructor(e){super(),this._lView=e}get destroyed(){return md(this._lView)}onDestroy(e){let t=this._lView;return z2(t,e),()=>nM(t,e)}};function Qj(){return new f2(Dn())}var na=class{_console=console;handleError(e){this._console.error("ERROR",e)}},lo=new ct("",{providedIn:"root",factory:()=>{let n=Oe(cr),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(na),e.handleError(t))}}}),SM={provide:jc,useValue:()=>void Oe(na),multi:!0},Zj=new ct("",{providedIn:"root",factory:()=>{let n=Oe(fi).defaultView;if(!n)return;let e=Oe(lo),t=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),Oe(sa).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",t)})}});function Z2(){return rs([$5(()=>void Oe(Zj))])}function J2(n){return typeof n=="function"&&n[ji]!==void 0}function Os(n,e){let[t,r,i]=Fb(n,e?.equal),o=t,s=o[ji];return o.set=r,o.update=i,o.asReadonly=DM.bind(o),o}function DM(){let n=this[ji];if(n.readonlyFn===void 0){let e=()=>this();e[ji]=n,n.readonlyFn=e}return n.readonlyFn}function X2(n){return J2(n)&&typeof n.set=="function"}var ny=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=Jj}return n})();function Jj(){return new ny(Dn(),Pi())}var Fc=class{},bg=new ct("",{providedIn:"root",factory:()=>!1});var eI=new ct(""),tI=new ct(""),qa=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Di(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new rn(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=yt({token:n,providedIn:"root",factory:()=>new n})}return n})(),rf=(()=>{class n{internalPendingTasks=Oe(qa);scheduler=Oe(Fc);errorHandler=Oe(lo);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=yt({token:n,providedIn:"root",factory:()=>new n})}return n})();function Ig(...n){}var nI=(()=>{class n{static \u0275prov=yt({token:n,providedIn:"root",factory:()=>new p2})}return n})(),p2=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function df(n){return{toString:n}.toString()}var ry="__parameters__";function s7(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function a7(n,e,t){return df(()=>{let r=s7(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,u){let g=c.hasOwnProperty(ry)?c[ry]:Object.defineProperty(c,ry,{value:[]})[ry];for(;g.length<=u;)g.push(null);return(g[u]=g[u]||[]).push(s),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var os=U5(a7("Optional"),8);function c7(n){return typeof n=="function"}var uy=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function sP(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Uc=(()=>{let n=()=>aP;return n.ngInherit=!0,n})();function aP(n){return n.type.prototype.ngOnChanges&&(n.setInput=u7),l7}function l7(){let n=lP(this),e=n?.current;if(e){let t=n.previous;if(t===Yl)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function u7(n,e,t,r,i){let o=this.declaredInputs[r],s=lP(n)||d7(n,{previous:Yl,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new uy(l&&l.currentValue,t,c===Yl),sP(n,e,i,t)}var cP="__ngSimpleChanges__";function lP(n){return n[cP]||null}function d7(n,e){return n[cP]=e}var TM=[];var jn=function(n,e=null,t){for(let r=0;r<TM.length;r++){let i=TM[r];i(n,e,t)}};function h7(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=aP(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function uP(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function ay(n,e,t){dP(n,e,3,t)}function cy(n,e,t,r){(n[Wt]&3)===t&&dP(n,e,t,r)}function rI(n,e){let t=n[Wt];(t&3)===e&&(t&=16383,t+=1,n[Wt]=t)}function dP(n,e,t,r){let i=r!==void 0?n[fd]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[fd]+=65536),(a<o||o==-1)&&(f7(n,t,e,c),n[fd]=(n[fd]&4294901760)+c+2),c++}function AM(n,e){jn(4,n,e);let t=cn(null);try{e.call(n)}finally{cn(t),jn(5,n,e)}}function f7(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[Wt]>>14<n[fd]>>16&&(n[Wt]&3)===e&&(n[Wt]+=16384,AM(a,o)):AM(a,o)}var sf=-1,yd=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function p7(n){return(n.flags&8)!==0}function g7(n){return(n.flags&16)!==0}function m7(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];v7(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function hP(n){return n===3||n===4||n===6}function v7(n){return n.charCodeAt(0)===64}function xg(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?MM(n,t,i,null,e[++r]):MM(n,t,i,null,null))}}return n}function MM(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function fP(n){return n!==sf}function dy(n){return n&32767}function y7(n){return n>>16}function hy(n,e){let t=y7(n),r=e;for(;t>0;)r=r[dd],t--;return r}var pI=!0;function fy(n){let e=pI;return pI=n,e}var _7=256,pP=_7-1,gP=5,w7=0,Ha={};function b7(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(ud)&&(r=t[ud]),r==null&&(r=t[ud]=w7++);let i=r&pP,o=1<<i;e.data[n+(i>>gP)]|=o}function py(n,e){let t=mP(n,e);if(t!==-1)return t;let r=e[Gt];r.firstCreatePass&&(n.injectorIndex=e.length,iI(r.data,n),iI(e,null),iI(r.blueprint,null));let i=kI(n,e),o=n.injectorIndex;if(fP(i)){let s=dy(i),a=hy(i,e),c=a[Gt].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function iI(n,e){n.push(0,0,0,0,0,0,0,0,e)}function mP(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function kI(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=bP(i),r===null)return sf;if(t++,i=i[dd],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return sf}function gI(n,e,t){b7(n,e,t)}function I7(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(hP(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function vP(n,e,t){if(t&8||n!==void 0)return n;zv(e,"NodeInjector")}function yP(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[Zl],o=ao(void 0);try{return i?i.get(e,r,t&8):x2(e,r,t&8)}finally{ao(o)}}return vP(r,e,t)}function _P(n,e,t,r=0,i){if(n!==null){if(e[Wt]&2048&&!(r&2)){let s=D7(n,e,t,r,Ha);if(s!==Ha)return s}let o=wP(n,e,t,r,Ha);if(o!==Ha)return o}return yP(e,t,r,i)}function wP(n,e,t,r,i){let o=x7(t);if(typeof o=="function"){if(!K2(e,n,r))return r&1?vP(i,t,r):yP(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))zv(t);else return s}finally{Y2()}}else if(typeof o=="number"){let s=null,a=mP(n,e),c=sf,l=r&1?e[Ns][Ps]:null;for((a===-1||r&4)&&(c=a===-1?kI(n,e):e[a+8],c===sf||!NM(r,!1)?a=-1:(s=e[Gt],a=dy(c),e=hy(c,e)));a!==-1;){let u=e[Gt];if(PM(o,a,u.data)){let g=E7(a,e,t,s,r,l);if(g!==Ha)return g}c=e[a+8],c!==sf&&NM(r,e[Gt].data[a+8]===l)&&PM(o,a,e)?(s=u,a=dy(c),e=hy(c,e)):a=-1}}return i}function E7(n,e,t,r,i,o){let s=e[Gt],a=s.data[n+8],c=r==null?Xl(a)&&pI:r!=s&&(a.type&3)!==0,l=i&1&&o===a,u=C7(a,s,t,c,l);return u!==null?gy(e,s,u,a,i):Ha}function C7(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,l=n.directiveEnd,u=o>>20,g=r?a:a+u,v=i?a+u:l;for(let p=g;p<v;p++){let S=s[p];if(p<c&&t===S||p>=c&&S.type===t)return p}if(i){let p=s[c];if(p&&Ua(p)&&p.type===t)return c}return null}function gy(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof yd){let a=o;if(a.resolving){let p=F5(s[t]);throw C2(p)}let c=fy(a.canSeeViewProviders);a.resolving=!0;let l=s[t].type||s[t],u,g=a.injectImpl?ao(a.injectImpl):null,v=K2(n,r,0);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&h7(t,s[t],e)}finally{g!==null&&ao(g),fy(c),a.resolving=!1,Y2()}}return o}function x7(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(ud)?n[ud]:void 0;return typeof e=="number"?e>=0?e&pP:S7:e}function PM(n,e,t){let r=1<<n;return!!(t[e+(n>>gP)]&r)}function NM(n,e){return!(n&2)&&!(n&1&&e)}var vd=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return _P(this._tNode,this._lView,e,ad(r),t)}};function S7(){return new vd(Pi(),Dn())}function Mo(n){return df(()=>{let e=n.prototype.constructor,t=e[ig]||mI(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[ig]||mI(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function mI(n){return v2(n)?()=>{let e=mI(Ti(n));return e&&e()}:Gl(n)}function D7(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[Wt]&2048&&!ef(s);){let a=wP(o,s,t,r|2,Ha);if(a!==Ha)return a;let c=o.parent;if(!c){let l=s[O2];if(l){let u=l.get(t,Ha,r);if(u!==Ha)return u}c=bP(s),s=s[dd]}o=c}return i}function bP(n){let e=n[Gt],t=e.type;return t===2?e.declTNode:t===1?n[Ps]:null}function Mg(n){return I7(Pi(),n)}function T7(){return Dy(Pi(),Dn())}function Dy(n,e){return new Wa(oa(n,e))}var Wa=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=T7}return n})();function IP(n){return(n.flags&128)===128}var RI=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(RI||{}),EP=new Map,A7=0;function M7(){return A7++}function P7(n){EP.set(n[dg],n)}function vI(n){EP.delete(n[dg])}var kM="__ngContext__";function af(n,e){Ba(e)?(n[kM]=e[dg],P7(e)):n[kM]=e}function CP(n){return SP(n[Jh])}function xP(n){return SP(n[Ms])}function SP(n){for(;n!==null&&!ia(n);)n=n[Ms];return n}var yI;function OI(n){yI=n}function DP(){if(yI!==void 0)return yI;if(typeof document<"u")return document;throw new et(210,!1)}var Ty=new ct("",{providedIn:"root",factory:()=>N7}),N7="ng",Ay=new ct(""),Id=new ct("",{providedIn:"platform",factory:()=>"unknown"});var My=new ct("",{providedIn:"root",factory:()=>DP().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var k7="h",R7="b";var TP=!1,AP=new ct("",{providedIn:"root",factory:()=>TP});var O7=(n,e,t,r)=>{};function L7(n,e,t,r){O7(n,e,t,r)}function LI(n){return(n.flags&32)===32}var F7=()=>null;function MP(n,e,t=!1){return F7(n,e,t)}function PP(n,e){let t=n.contentQueries;if(t!==null){let r=cn(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];G2(o),a.contentQueries(2,e[s],s)}}}finally{cn(r)}}}function _I(n,e,t){G2(0);let r=cn(null);try{e(n,t)}finally{cn(r)}}function FI(n,e,t){if(L2(e)){let r=cn(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{cn(r)}}}var Bc=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(Bc||{});var iy;function V7(){if(iy===void 0&&(iy=null,Vc.trustedTypes))try{iy=Vc.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return iy}function RM(n){return V7()?.createScriptURL(n)||n}var my=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Bv})`}};function Py(n){return n instanceof my?n.changingThisBreaksApplicationSecurity:n}function VI(n,e){let t=NP(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Bv})`)}return t===e}function NP(n){return n instanceof my&&n.getTypeName()||null}var j7=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function kP(n){return n=String(n),n.match(j7)?n:"unsafe:"+n}var B7=/^>|^->|<!--|-->|--!>|<!-$/g,U7=/(<|>)/g,z7="\u200B$1\u200B";function q7(n){return n.replace(B7,e=>e.replace(U7,z7))}function H7(n,e){return n.createText(e)}function $7(n,e,t){n.setValue(e,t)}function W7(n,e){return n.createComment(q7(e))}function RP(n,e,t){return n.createElement(e,t)}function vy(n,e,t,r,i){n.insertBefore(e,t,r,i)}function OP(n,e,t){n.appendChild(e,t)}function OM(n,e,t,r,i){r!==null?vy(n,e,t,r,i):OP(n,e,t)}function G7(n,e,t,r){n.removeChild(null,e,t,r)}function K7(n,e,t){n.setAttribute(e,"style",t)}function Y7(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function LP(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&m7(n,e,r),i!==null&&Y7(n,e,i),o!==null&&K7(n,e,o)}var Ny=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(Ny||{});function FP(n){let e=jP();return e?e.sanitize(Ny.URL,n)||"":VI(n,"URL")?Py(n):kP(To(n))}function VP(n){let e=jP();if(e)return RM(e.sanitize(Ny.RESOURCE_URL,n)||"");if(VI(n,"ResourceURL"))return RM(Py(n));throw new et(904,!1)}function Q7(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?VP:FP}function jI(n,e,t){return Q7(e,t)(n)}function jP(){let n=Dn();return n&&n[ja].sanitizer}function BP(n){return n instanceof Function?n():n}function Z7(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var UP="ng-template";function J7(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Z7(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(BI(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function BI(n){return n.type===4&&n.value!==UP}function X7(n,e,t){let r=n.type===4&&!t?UP:n.value;return e===r}function eB(n,e,t){let r=4,i=n.attrs,o=i!==null?rB(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!aa(r)&&!aa(c))return!1;if(s&&aa(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!X7(n,c,t)||c===""&&e.length===1){if(aa(r))return!1;s=!0}}else if(r&8){if(i===null||!J7(n,i,c,t)){if(aa(r))return!1;s=!0}}else{let l=e[++a],u=tB(c,i,BI(n),t);if(u===-1){if(aa(r))return!1;s=!0;continue}if(l!==""){let g;if(u>o?g="":g=i[u+1].toLowerCase(),r&2&&l!==g){if(aa(r))return!1;s=!0}}}}return aa(r)||s}function aa(n){return(n&1)===0}function tB(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return iB(e,n)}function nB(n,e,t=!1){for(let r=0;r<e.length;r++)if(eB(n,e[r],t))return!0;return!1}function rB(n){for(let e=0;e<n.length;e++){let t=n[e];if(hP(t))return e}return n.length}function iB(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function LM(n,e){return n?":not("+e.trim()+")":e}function oB(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!aa(s)&&(e+=LM(o,i),i=""),r=s,o=o||!aa(r);t++}return i!==""&&(e+=LM(o,i)),e}function sB(n){return n.map(oB).join(",")}function aB(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!aa(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var uo={};function UI(n,e,t,r,i,o,s,a,c,l,u){let g=Mi+r,v=g+i,p=cB(g,v),S=typeof l=="function"?l():l;return p[Gt]={type:n,blueprint:p,template:t,queries:null,viewQuery:a,declTNode:e,data:p.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:v,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:S,incompleteFirstPass:!1,ssrId:u}}function cB(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:uo);return t}function lB(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=UI(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function zI(n,e,t,r,i,o,s,a,c,l,u){let g=e.blueprint.slice();return g[ra]=i,g[Wt]=r|4|128|8|64|1024,(l!==null||n&&n[Wt]&2048)&&(g[Wt]|=2048),B2(g),g[Ai]=g[dd]=n,g[Ui]=t,g[ja]=s||n&&n[ja],g[br]=a||n&&n[br],g[Zl]=c||n&&n[Zl]||null,g[Ps]=o,g[dg]=M7(),g[ug]=u,g[O2]=l,g[Ns]=e.type==2?n[Ns]:g,g}function uB(n,e,t){let r=oa(e,n),i=lB(t),o=n[ja].rendererFactory,s=qI(n,zI(n,i,null,zP(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function zP(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function qP(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function qI(n,e){return n[Jh]?n[R2][Ms]=e:n[Jh]=e,n[R2]=e,e}function O(n=1){HP(co(),Dn(),za()+n,!1)}function HP(n,e,t,r){if(!r)if((e[Wt]&3)===3){let o=n.preOrderCheckHooks;o!==null&&ay(e,o,t)}else{let o=n.preOrderHooks;o!==null&&cy(e,o,0,t)}eu(t)}var ky=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(ky||{});function wI(n,e,t,r){let i=cn(null);try{let[o,s,a]=n.inputs[t],c=null;(s&ky.SignalBased)!==0&&(c=e[o][ji]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,o):sP(e,c,o,r)}finally{cn(i)}}var $a=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})($a||{}),dB;function HI(n,e){return dB(n,e)}var cf=new Set,Ry=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Ry||{}),Ed=new ct(""),FM=new Set;function Pg(n){FM.has(n)||(FM.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var $P=!1,bI=class extends $r{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,Q5()&&(this.destroyRef=Oe(sa,{optional:!0})??void 0,this.pendingTasks=Oe(qa,{optional:!0})??void 0)}emit(e){let t=cn(null);try{super.next(e)}finally{cn(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Sr&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Kr=bI;function WP(n){let e,t;function r(){n=Ig;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function VM(n){return queueMicrotask(()=>n()),()=>{n=Ig}}var $I="isAngularZone",yy=$I+"_ID",hB=0,Rn=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Kr(!1);onMicrotaskEmpty=new Kr(!1);onStable=new Kr(!1);onError=new Kr(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=$P}=e;if(typeof Zone>"u")throw new et(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,gB(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get($I)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new et(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new et(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,fB,Ig,Ig);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},fB={};function WI(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function pB(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){WP(()=>{n.callbackScheduled=!1,II(n),n.isCheckStableRunning=!0,WI(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),II(n)}function gB(n){let e=()=>{pB(n)},t=hB++;n._inner=n._inner.fork({name:"angular",properties:{[$I]:!0,[yy]:t,[yy+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(mB(c))return r.invokeTask(o,s,a,c);try{return jM(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),BM(n)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return jM(n),r.invoke(o,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!vB(c)&&e(),BM(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,II(n),WI(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function II(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function jM(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function BM(n){n._nesting--,WI(n)}var _y=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Kr;onMicrotaskEmpty=new Kr;onStable=new Kr;onError=new Kr;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function mB(n){return GP(n,"__ignore_ng_zone__")}function vB(n){return GP(n,"__scheduler_tick__")}function GP(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var GI=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=yt({token:n,providedIn:"root",factory:()=>new n})}return n})(),KP=[0,1,2,3],YP=(()=>{class n{ngZone=Oe(Rn);scheduler=Oe(Fc);errorHandler=Oe(na,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){Oe(Ed,{optional:!0})}execute(){let t=this.sequences.size>0;t&&jn(16),this.executing=!0;for(let r of KP)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&jn(17)}register(t){let{view:r}=t;r!==void 0?((r[gd]??=[]).push(t),tf(r),r[Wt]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Ry.AFTER_NEXT_RENDER,t):t()}static \u0275prov=yt({token:n,providedIn:"root",factory:()=>new n})}return n})(),wy=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[gd];e&&(this.view[gd]=e.filter(t=>t!==this))}};function Oy(n,e){let t=e?.injector??Oe(Gr);return Pg("NgAfterNextRender"),_B(n,t,e,!0)}function yB(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function _B(n,e,t,r){let i=e.get(GI);i.impl??=e.get(YP);let o=e.get(Ed,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(sa):null,a=e.get(ny,null,{optional:!0}),c=new wy(i.impl,yB(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(c),c}var wB=new ct("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function QP(n,e,t){let r=n.get(wB);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function bB(n,e){for(let[t,r]of e)QP(n,r.animateFns)}function UM(n,e,t,r){let i=n?.[fg]?.enter;e!==null&&i&&i.has(t.index)&&bB(r,i)}function of(n,e,t,r,i,o,s,a){if(i!=null){let c,l=!1;ia(i)?c=i:Ba(i)&&(l=!0,i=i[ra]);let u=ks(i);n===0&&r!==null?(UM(a,r,o,t),s==null?OP(e,r,u):vy(e,r,u,s||null,!0)):n===1&&r!==null?(UM(a,r,o,t),vy(e,r,u,s||null,!0)):n===2?zM(a,o,t,g=>{G7(e,u,l,g)}):n===3&&zM(a,o,t,()=>{e.destroyNode(u)}),c!=null&&RB(e,n,t,c,o,r,s)}}function IB(n,e){ZP(n,e),e[ra]=null,e[Ps]=null}function EB(n,e,t,r,i,o){r[ra]=i,r[Ps]=e,Ly(n,r,t,1,i,o)}function ZP(n,e){e[ja].changeDetectionScheduler?.notify(9),Ly(n,e,e[br],2,null,null)}function CB(n){let e=n[Jh];if(!e)return oI(n[Gt],n);for(;e;){let t=null;if(Ba(e))t=e[Jh];else{let r=e[Ao];r&&(t=r)}if(!t){for(;e&&!e[Ms]&&e!==n;)Ba(e)&&oI(e[Gt],e),e=e[Ai];e===null&&(e=n),Ba(e)&&oI(e[Gt],e),t=e&&e[Ms]}e=t}}function KI(n,e){let t=n[gg],r=t.indexOf(e);t.splice(r,1)}function JP(n,e){if(md(e))return;let t=e[br];t.destroyNode&&Ly(n,e,t,3,null,null),CB(e)}function oI(n,e){if(md(e))return;let t=cn(null);try{e[Wt]&=-129,e[Wt]|=256,e[is]&&Jp(e[is]),DB(n,e),SB(n,e),e[Gt].type===1&&e[br].destroy();let r=e[hd];if(r!==null&&ia(e[Ai])){r!==e[Ai]&&KI(r,e);let i=e[pd];i!==null&&i.detachView(n)}vI(e)}finally{cn(t)}}function zM(n,e,t,r){let i=n?.[fg];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&cf.add(n),QP(t,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let c=0;c<s.animateFns.length;c++){let l=s.animateFns[c],{promise:u}=l();a.push(u)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),xB(n,r)}else n&&cf.delete(n),r(!1)},i)}function xB(n,e){let t=n[fg]?.running;if(t){t.then(()=>{n[fg].running=void 0,cf.delete(n),e(!0)});return}e(!1)}function SB(n,e){let t=n.cleanup,r=e[Zh];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[Zh]=null);let i=e[Oc];if(i!==null){e[Oc]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[hg];if(o!==null){e[hg]=null;for(let s of o)s.destroy()}}function DB(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof yd)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];jn(4,a,c);try{c.call(a)}finally{jn(5,a,c)}}else{jn(4,i,o);try{o.call(i)}finally{jn(5,i,o)}}}}}function TB(n,e,t){return AB(n,e.parent,t)}function AB(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[ra];if(Xl(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Bc.None||i===Bc.Emulated)return null}return oa(r,t)}function MB(n,e,t){return NB(n,e,t)}function PB(n,e,t){return n.type&40?oa(n,t):null}var NB=PB,qM;function YI(n,e,t,r){let i=TB(n,r,e),o=e[br],s=r.parent||e[Ps],a=MB(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)OM(o,i,t[c],a,!1);else OM(o,i,t,a,!1);qM!==void 0&&qM(o,r,e,t,i)}function Eg(n,e){if(e!==null){let t=e.type;if(t&3)return oa(e,n);if(t&4)return EI(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Eg(n,r);{let i=n[e.index];return ia(i)?EI(-1,i):ks(i)}}else{if(t&128)return Eg(n,e.next);if(t&32)return HI(e,n)()||ks(n[e.index]);{let r=XP(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Kl(n[Ns]);return Eg(i,r)}else return Eg(n,e.next)}}}return null}function XP(n,e){if(e!==null){let r=n[Ns][Ps],i=e.projection;return r.projection[i]}return null}function EI(n,e){let t=Ao+n+1;if(t<e.length){let r=e[t],i=r[Gt].firstChild;if(i!==null)return Eg(r,i)}return e[Jl]}function QI(n,e,t,r,i,o,s){for(;t!=null;){let a=r[Zl];if(t.type===128){t=t.next;continue}let c=r[t.index],l=t.type;if(s&&e===0&&(c&&af(ks(c),r),t.flags|=2),!LI(t))if(l&8)QI(n,e,t.child,r,i,o,!1),of(e,n,a,i,c,t,o,r);else if(l&32){let u=HI(t,r),g;for(;g=u();)of(e,n,a,i,g,t,o,r);of(e,n,a,i,c,t,o,r)}else l&16?kB(n,e,r,t,i,o):of(e,n,a,i,c,t,o,r);t=s?t.projectionNext:t.next}}function Ly(n,e,t,r,i,o){QI(t,r,n.firstChild,e,i,o,!1)}function kB(n,e,t,r,i,o){let s=t[Ns],c=s[Ps].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];of(e,n,t[Zl],i,u,r,o,t)}else{let l=c,u=s[Ai];IP(r)&&(l.flags|=128),QI(n,e,l,u,i,o,!0)}}function RB(n,e,t,r,i,o,s){let a=r[Jl],c=ks(r);a!==c&&of(e,n,t,o,a,i,s);for(let l=Ao;l<r.length;l++){let u=r[l];Ly(u[Gt],u,n,e,o,a)}}function OB(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:$a.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=$a.Important),n.setStyle(t,r,i,o))}}function eN(n,e,t,r,i){let o=za(),s=r&2;try{eu(-1),s&&e.length>Mi&&HP(n,e,Mi,!1),jn(s?2:0,i,t),t(r,i)}finally{eu(o),jn(s?3:1,i,t)}}function Fy(n,e,t){zB(n,e,t),(t.flags&64)===64&&qB(n,e,t)}function ZI(n,e,t=oa){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function LB(n,e,t,r){let o=r.get(AP,TP)||t===Bc.ShadowDom,s=n.selectRootElement(e,o);return FB(s),s}function FB(n){VB(n)}var VB=()=>null;function jB(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function tN(n,e,t,r,i,o){let s=e[Gt];if(XI(n,s,e,t,r)){Xl(n)&&UB(e,n.index);return}n.type&3&&(t=jB(t)),BB(n,e,t,r,i,o)}function BB(n,e,t,r,i,o){if(n.type&3){let s=oa(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function UB(n,e){let t=Rs(e,n);t[Wt]&16||(t[Wt]|=64)}function zB(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Xl(t)&&uB(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||py(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],c=gy(e,n,s,t);if(af(c,e),o!==null&&GB(e,s-r,c,a,t,o),Ua(a)){let l=Rs(t.index,e);l[Ui]=gy(e,n,s,t)}}}function qB(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=yM();try{eu(o);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];Zv(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&HB(c,l)}}finally{eu(-1),Zv(s)}}function HB(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function JI(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];nB(e,o.selectors,!1)&&(r??=[],Ua(o)?r.unshift(o):r.push(o))}return r}function $B(n,e,t,r,i,o){let s=oa(n,e);WB(e[br],s,o,n.value,t,r,i)}function WB(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?To(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function GB(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],l=s[a+1];wI(r,t,c,l)}}function nN(n,e,t,r,i){let o=Mi+t,s=e[Gt],a=i(s,e,n,r,t);e[o]=a,nf(n,!0);let c=n.type===2;return c?(LP(e[br],a,n),(oM()===0||Xh(n))&&af(a,e),sM()):af(a,e),ty()&&(!c||!LI(n))&&YI(s,e,a,n),n}function rN(n){let e=n;return H2()?hM():(e=e.parent,nf(e,!1)),e}function KB(n,e){let t=n[Zl];if(!t)return;let r;try{r=t.get(lo,null)}catch{r=null}r?.(e)}function XI(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let l=s[c],u=s[c+1],g=e.data[l];wI(g,t[l],u,i),a=!0}if(o)for(let c of o){let l=t[c],u=e.data[c];wI(u,l,r,i),a=!0}return a}function YB(n,e){let t=Rs(e,n),r=t[Gt];QB(r,t);let i=t[ra];i!==null&&t[ug]===null&&(t[ug]=MP(i,t[Zl])),jn(18),eE(r,t,t[Ui]),jn(19,t[Ui])}function QB(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function eE(n,e,t){Jv(e);try{let r=n.viewQuery;r!==null&&_I(1,r,t);let i=n.template;i!==null&&eN(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[pd]?.finishViewCreation(n),n.staticContentQueries&&PP(n,e),n.staticViewQueries&&_I(2,n.viewQuery,t);let o=n.components;o!==null&&ZB(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Wt]&=-5,Xv()}}function ZB(n,e){for(let t=0;t<e.length;t++)YB(n,e[t])}function JB(n,e,t,r){let i=cn(null);try{let o=e.tView,a=n[Wt]&4096?4096:16,c=zI(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[hd]=l;let u=n[pd];return u!==null&&(c[pd]=u.createEmbeddedView(o)),eE(o,c,t),c}finally{cn(i)}}function HM(n,e){return!e||e.firstChild===null||IP(n)}function Sg(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(ks(o)),ia(o)&&iN(o,r);let s=t.type;if(s&8)Sg(n,e,t.child,r);else if(s&32){let a=HI(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=XP(e,t);if(Array.isArray(a))r.push(...a);else{let c=Kl(e[Ns]);Sg(c[Gt],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function iN(n,e){for(let t=Ao;t<n.length;t++){let r=n[t],i=r[Gt].firstChild;i!==null&&Sg(r[Gt],r,i,e)}n[Jl]!==n[ra]&&e.push(n[Jl])}function oN(n){if(n[gd]!==null){for(let e of n[gd])e.impl.addSequence(e);n[gd].length=0}}var sN=[];function XB(n){return n[is]??eU(n)}function eU(n){let e=sN.pop()??Object.create(nU);return e.lView=n,e}function tU(n){n.lView[is]!==n&&(n.lView=null,sN.push(n))}var nU=bt(Pe({},Mh),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{tf(n.lView)},consumerOnSignalRead(){this.lView[is]=this}});function rU(n){let e=n[is]??Object.create(iU);return e.lView=n,e}var iU=bt(Pe({},Mh),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Kl(n.lView);for(;e&&!aN(e[Gt]);)e=Kl(e);e&&U2(e)},consumerOnSignalRead(){this.lView[is]=this}});function aN(n){return n.type!==2}function cN(n){if(n[hg]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[hg])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[Wt]&8192)}}var oU=100;function lN(n,e=0){let r=n[ja].rendererFactory,i=!1;i||r.begin?.();try{sU(n,e)}finally{i||r.end?.()}}function sU(n,e){let t=$2();try{W2(!0),CI(n,e);let r=0;for(;vg(n);){if(r===oU)throw new et(103,!1);r++,CI(n,1)}}finally{W2(t)}}function aU(n,e,t,r){if(md(e))return;let i=e[Wt],o=!1,s=!1;Jv(e);let a=!0,c=null,l=null;o||(aN(n)?(l=XB(e),c=Nh(l)):ov()===null?(a=!1,l=rU(e),c=Nh(l)):e[is]&&(Jp(e[is]),e[is]=null));try{B2(e),gM(n.bindingStartIndex),t!==null&&eN(n,e,t,2,r);let u=(i&3)===3;if(!o)if(u){let p=n.preOrderCheckHooks;p!==null&&ay(e,p,null)}else{let p=n.preOrderHooks;p!==null&&cy(e,p,0,null),rI(e,0)}if(s||cU(e),cN(e),uN(e,0),n.contentQueries!==null&&PP(n,e),!o)if(u){let p=n.contentCheckHooks;p!==null&&ay(e,p)}else{let p=n.contentHooks;p!==null&&cy(e,p,1),rI(e,1)}uU(n,e);let g=n.components;g!==null&&hN(e,g,0);let v=n.viewQuery;if(v!==null&&_I(2,v,r),!o)if(u){let p=n.viewCheckHooks;p!==null&&ay(e,p)}else{let p=n.viewHooks;p!==null&&cy(e,p,2),rI(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[$v]){for(let p of e[$v])p();e[$v]=null}o||(oN(e),e[Wt]&=-73)}catch(u){throw o||tf(e),u}finally{l!==null&&(Qp(l,c),a&&tU(l)),Xv()}}function uN(n,e){for(let t=CP(n);t!==null;t=xP(t))for(let r=Ao;r<t.length;r++){let i=t[r];dN(i,e)}}function cU(n){for(let e=CP(n);e!==null;e=xP(e)){if(!(e[Wt]&2))continue;let t=e[gg];for(let r=0;r<t.length;r++){let i=t[r];U2(i)}}}function lU(n,e,t){jn(18);let r=Rs(e,n);dN(r,t),jn(19,r[Ui])}function dN(n,e){Gv(n)&&CI(n,e)}function CI(n,e){let r=n[Gt],i=n[Wt],o=n[is],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Zp(o)),s||=!1,o&&(o.dirty=!1),n[Wt]&=-9217,s)aU(r,n,r.template,n[Ui]);else if(i&8192){let a=cn(null);try{cN(n),uN(n,1);let c=r.components;c!==null&&hN(n,c,1),oN(n)}finally{cn(a)}}}function hN(n,e,t){for(let r=0;r<e.length;r++)lU(n,e[r],t)}function uU(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)eu(~i);else{let o=i,s=t[++r],a=t[++r];vM(s,o);let c=e[o];jn(24,c),a(2,c),jn(25,c)}}}finally{eu(-1)}}function tE(n,e){let t=$2()?64:1088;for(n[ja].changeDetectionScheduler?.notify(e);n;){n[Wt]|=t;let r=Kl(n);if(ef(n)&&!r)return n;n=r}return null}function fN(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function dU(n,e,t,r=!0){let i=e[Gt];if(hU(i,e,n,t),r){let s=EI(t,n),a=e[br],c=a.parentNode(n[Jl]);c!==null&&EB(i,n[Ps],a,e,c,s)}let o=e[ug];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function xI(n,e){if(n.length<=Ao)return;let t=Ao+e,r=n[t];if(r){let i=r[hd];i!==null&&i!==n&&KI(i,r),e>0&&(n[t-1][Ms]=r[Ms]);let o=ag(n,Ao+e);IB(r[Gt],r);let s=o[pd];s!==null&&s.detachView(o[Gt]),r[Ai]=null,r[Ms]=null,r[Wt]&=-129}return r}function hU(n,e,t,r){let i=Ao+r,o=t.length;r>0&&(t[i-1][Ms]=e),r<o-Ao?(e[Ms]=t[i],S2(t,Ao+r,e)):(t.push(e),e[Ms]=null),e[Ai]=t;let s=e[hd];s!==null&&t!==s&&pN(s,e);let a=e[pd];a!==null&&a.insertView(n),Kv(e),e[Wt]|=128}function pN(n,e){let t=n[gg],r=e[Ai];if(Ba(r))n[Wt]|=2;else{let i=r[Ai][Ns];e[Ns]!==i&&(n[Wt]|=2)}t===null?n[gg]=[e]:t.push(e)}var tu=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[Gt];return Sg(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Ui]}set context(e){this._lView[Ui]=e}get destroyed(){return md(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ai];if(ia(e)){let t=e[pg],r=t?t.indexOf(this):-1;r>-1&&(xI(e,r),ag(t,r))}this._attachedToViewContainer=!1}JP(this._lView[Gt],this._lView)}onDestroy(e){z2(this._lView,e)}markForCheck(){tE(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Wt]&=-129}reattach(){Kv(this._lView),this._lView[Wt]|=128}detectChanges(){this._lView[Wt]|=1024,lN(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new et(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ef(this._lView),t=this._lView[hd];t!==null&&!e&&KI(t,this._lView),ZP(this._lView[Gt],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new et(902,!1);this._appRef=e;let t=ef(this._lView),r=this._lView[hd];r!==null&&!t&&pN(r,this._lView),Kv(this._lView)}};var Ng=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=fU;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=JB(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new tu(o)}}return n})();function fU(){return gN(Pi(),Dn())}function gN(n,e){return n.type&4?new Ng(e,n,Dy(n,e)):null}function nE(n,e,t,r,i){let o=n.data[e];if(o===null)o=pU(n,e,t,r,i),mM()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=dM();o.injectorIndex=s===null?-1:s.injectorIndex}return nf(o,!0),o}function pU(n,e,t,r,i){let o=q2(),s=H2(),a=s?o:o&&o.parent,c=n.data[e]=mU(n,a,t,e,r,i);return gU(n,c,o,s),c}function gU(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function mU(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return cM()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var Zhe=new RegExp(`^(\\d+)*(${R7}|${k7})*(.*)`);var vU=()=>null;function $M(n,e){return vU(n,e)}var mN=class{},Vy=class{},SI=class{resolveComponentFactory(e){throw new et(917,!1)}},kg=class{static NULL=new SI},_d=class{},zc=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>yU()}return n})();function yU(){let n=Dn(),e=Pi(),t=Rs(e.index,n);return(Ba(t)?t:n)[br]}var vN=(()=>{class n{static \u0275prov=yt({token:n,providedIn:"root",factory:()=>null})}return n})();var ly={},DI=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,ly,r);return i!==ly||t===ly?i:this.parentInjector.get(e,t,r)}};function WM(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=m2(i,a);else if(o==2){let c=a,l=e[++s];r=m2(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Xe(n,e=0){let t=Dn();if(t===null)return Pt(n,e);let r=Pi();return _P(r,t,Ti(n),e)}function yN(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,c=null,l=null;for(let u of s)if(u.resolveHostDirectives!==null){[a,c,l]=u.resolveHostDirectives(s);break}bU(n,e,t,a,o,c,l)}o!==null&&r!==null&&_U(t,r,o)}function _U(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new et(-301,!1);r.push(e[i],o)}}function wU(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function bU(n,e,t,r,i,o,s){let a=r.length,c=!1;for(let v=0;v<a;v++){let p=r[v];!c&&Ua(p)&&(c=!0,wU(n,t,v)),gI(py(t,e),n,p.type)}DU(t,n.data.length,a);for(let v=0;v<a;v++){let p=r[v];p.providersResolver&&p.providersResolver(p)}let l=!1,u=!1,g=qP(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let v=0;v<a;v++){let p=r[v];if(t.mergedAttrs=xg(t.mergedAttrs,p.hostAttrs),EU(n,t,e,g,p),SU(g,p,i),s!==null&&s.has(p)){let[k,L]=s.get(p);t.directiveToIndex.set(p.type,[g,k+t.directiveStart,L+t.directiveStart])}else(o===null||!o.has(p))&&t.directiveToIndex.set(p.type,g);p.contentQueries!==null&&(t.flags|=4),(p.hostBindings!==null||p.hostAttrs!==null||p.hostVars!==0)&&(t.flags|=64);let S=p.type.prototype;!l&&(S.ngOnChanges||S.ngOnInit||S.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!u&&(S.ngOnChanges||S.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),u=!0),g++}IU(n,t,o)}function IU(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))GM(0,e,i,r),GM(1,e,i,r),YM(e,r,!1);else{let o=t.get(i);KM(0,e,o,r),KM(1,e,o,r),YM(e,r,!0)}}}function GM(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),_N(e,o)}}function KM(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),_N(e,s)}}function _N(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function YM(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||BI(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let l=i[c];for(let u of l)if(u===e){s??=[],s.push(c,r[a+1]);break}}else if(t&&o.hasOwnProperty(c)){let l=o[c];for(let u=0;u<l.length;u+=2)if(l[u]===e){s??=[],s.push(l[u+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function EU(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Gl(i.type,!0)),s=new yd(o,Ua(i),Xe,null);n.blueprint[r]=s,t[r]=s,CU(n,e,r,qP(n,t,i.hostVars,uo),i)}function CU(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;xU(s)!=a&&s.push(a),s.push(t,r,o)}}function xU(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function SU(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Ua(e)&&(t[""]=n)}}function DU(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function rE(n,e,t,r,i,o,s,a){let c=e[Gt],l=c.consts,u=mg(l,s),g=nE(c,n,t,r,u);return o&&yN(c,e,g,mg(l,a),i),g.mergedAttrs=xg(g.mergedAttrs,g.attrs),g.attrs!==null&&WM(g,g.attrs,!1),g.mergedAttrs!==null&&WM(g,g.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,g),g}function iE(n,e){uP(n,e),L2(e)&&n.queries.elementEnd(e)}function oE(n){return bN(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function wN(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function bN(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function TU(n,e,t){return n[e]=t}function nu(n,e,t){if(t===uo)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Dg(n,e,t,r){let i=nu(n,e,t);return nu(n,e+1,r)||i}function AU(n,e,t,r,i){let o=Dg(n,e,t,r);return nu(n,e+2,i)||o}function MU(n,e,t,r,i,o){let s=Dg(n,e,t,r);return Dg(n,e+2,i,o)||s}function sI(n,e,t){return function r(i){let o=Xl(n)?Rs(n.index,e):e;tE(o,5);let s=e[Ui],a=QM(e,s,t,i),c=r.__ngNextListenerFn__;for(;c;)a=QM(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function QM(n,e,t,r){let i=cn(null);try{return jn(6,e,t),t(r)!==!1}catch(o){return KB(n,o),!1}finally{jn(7,e,t),cn(i)}}function PU(n,e,t,r,i,o,s,a){let c=Xh(n),l=!1,u=null;if(!r&&c&&(u=kU(e,t,o,n.index)),u!==null){let g=u.__ngLastListenerFn__||u;g.__ngNextListenerFn__=s,u.__ngLastListenerFn__=s,l=!0}else{let g=oa(n,t),v=r?r(g):g;L7(t,v,o,a);let p=i.listen(v,o,a);if(!NU(o)){let S=r?k=>r(ks(k[n.index])):n.index;IN(S,e,t,o,a,p,!1)}}return l}function NU(n){return n.startsWith("animation")||n.startsWith("transition")}function kU(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Zh],c=i[o+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function IN(n,e,t,r,i,o,s){let a=e.firstCreatePass?iM(e):null,c=rM(t),l=c.length;c.push(i,o),a&&a.push(r,n,l,(l+1)*(s?-1:1))}function ZM(n,e,t,r,i,o){let s=e[t],a=e[Gt],l=a.data[t].outputs[r],g=s[l].subscribe(o);IN(n.index,a,e,i,o,g,!0)}var TI=Symbol("BINDING");var by=class extends kg{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Ql(e);return new lf(t,this.ngModule)}};function RU(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&ky.SignalBased)!==0};return i&&(o.transform=i),o})}function OU(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function LU(n,e,t){let r=e instanceof cr?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new DI(t,r):t}function FU(n){let e=n.get(_d,null);if(e===null)throw new et(407,!1);let t=n.get(vN,null),r=n.get(Fc,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function VU(n,e){let t=EN(n);return RP(e,t,t==="svg"?J5:t==="math"?X5:null)}function EN(n){return(n.selectors[0][0]||"div").toLowerCase()}var lf=class extends Vy{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=RU(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=OU(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=sB(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){jn(22);let a=cn(null);try{let c=this.componentDef,l=jU(r,c,s,o),u=LU(c,i||this.ngModule,e),g=FU(u),v=g.rendererFactory.createRenderer(null,c),p=r?LB(v,r,c.encapsulation,u):VU(c,v),S=s?.some(JM)||o?.some(R=>typeof R!="function"&&R.bindings.some(JM)),k=zI(null,l,null,512|zP(c),null,null,g,v,u,null,MP(p,u,!0));k[Mi]=p,Jv(k);let L=null;try{let R=rE(Mi,k,2,"#host",()=>l.directiveRegistry,!0,0);LP(v,p,R),af(p,k),Fy(l,k,R),FI(l,R,k),iE(l,R),t!==void 0&&UU(R,this.ngContentSelectors,t),L=Rs(R.index,k),k[Ui]=L[Ui],eE(l,k,null)}catch(R){throw L!==null&&vI(L),vI(k),R}finally{jn(23),Xv()}return new Iy(this.componentType,k,!!S)}finally{cn(a)}}};function jU(n,e,t,r){let i=n?["ng-version","20.3.15"]:aB(e.selectors[0]),o=null,s=null,a=0;if(t)for(let u of t)a+=u[TI].requiredVars,u.create&&(u.targetIdx=0,(o??=[]).push(u)),u.update&&(u.targetIdx=0,(s??=[]).push(u));if(r)for(let u=0;u<r.length;u++){let g=r[u];if(typeof g!="function")for(let v of g.bindings){a+=v[TI].requiredVars;let p=u+1;v.create&&(v.targetIdx=p,(o??=[]).push(v)),v.update&&(v.targetIdx=p,(s??=[]).push(v))}}let c=[e];if(r)for(let u of r){let g=typeof u=="function"?u:u.type,v=M2(g);c.push(v)}return UI(0,null,BU(o,s),1,a,c,null,null,null,[i],null)}function BU(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function JM(n){let e=n[TI].kind;return e==="input"||e==="twoWay"}var Iy=class extends mN{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=Wv(t[Gt],Mi),this.location=Dy(this._tNode,t),this.instance=Rs(this._tNode.index,t)[Ui],this.hostView=this.changeDetectorRef=new tu(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=XI(r,i[Gt],i,e,t);this.previousInputValues.set(e,t);let s=Rs(r.index,i);tE(s,1)}get injector(){return new vd(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function UU(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Cd=(()=>{class n{static __NG_ELEMENT_ID__=zU}return n})();function zU(){let n=Pi();return HU(n,Dn())}var qU=Cd,CN=class extends qU{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Dy(this._hostTNode,this._hostLView)}get injector(){return new vd(this._hostTNode,this._hostLView)}get parentInjector(){let e=kI(this._hostTNode,this._hostLView);if(fP(e)){let t=hy(e,this._hostLView),r=dy(e),i=t[Gt].data[r+8];return new vd(i,t)}else return new vd(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=XM(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Ao}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=$M(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,HM(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let c=e&&!c7(e),l;if(c)l=t;else{let L=t||{};l=L.index,r=L.injector,i=L.projectableNodes,o=L.environmentInjector||L.ngModuleRef,s=L.directives,a=L.bindings}let u=c?e:new lf(Ql(e)),g=r||this.parentInjector;if(!o&&u.ngModule==null){let R=(c?g:this.parentInjector).get(cr,null);R&&(o=R)}let v=Ql(u.componentType??{}),p=$M(this._lContainer,v?.id??null),S=p?.firstChild??null,k=u.create(g,i,S,o,s,a);return this.insertImpl(k.hostView,l,HM(this._hostTNode,p)),k}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(eM(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Ai],l=new CN(c,c[Ps],c[Ai]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return dU(s,i,o,r),e.attachToViewContainerRef(),S2(aI(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=XM(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=xI(this._lContainer,t);r&&(ag(aI(this._lContainer),t),JP(r[Gt],r))}detach(e){let t=this._adjustIndex(e,-1),r=xI(this._lContainer,t);return r&&ag(aI(this._lContainer),t)!=null?new tu(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function XM(n){return n[pg]}function aI(n){return n[pg]||(n[pg]=[])}function HU(n,e){let t,r=e[n.index];return ia(r)?t=r:(t=fN(r,e,null,n),e[n.index]=t,qI(e,t)),WU(t,e,n,r),new CN(t,n,e)}function $U(n,e){let t=n[br],r=t.createComment(""),i=oa(e,n),o=t.parentNode(i);return vy(t,o,r,t.nextSibling(i),!1),r}var WU=YU,GU=()=>!1;function KU(n,e,t){return GU(n,e,t)}function YU(n,e,t,r){if(n[Jl])return;let i;t.type&8?i=ks(r):i=$U(e,t),n[Jl]=i}var wd=class{},jy=class{};var Ey=class extends wd{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new by(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=A2(e);this._bootstrapComponents=BP(o.bootstrap),this._r3Injector=Q2(e,t,[{provide:wd,useValue:this},{provide:kg,useValue:this.componentFactoryResolver},...r],Lc(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Cy=class extends jy{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Ey(this.moduleType,e,[])}};var Tg=class extends wd{injector;componentFactoryResolver=new by(this);instance=null;constructor(e){super();let t=new ld([...e.providers,{provide:wd,useValue:this},{provide:kg,useValue:this.componentFactoryResolver}],e.parent||lg(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Rg(n,e,t=null){return new Tg({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var QU=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=P2(!1,t.type),i=r.length>0?Rg([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=yt({token:n,providedIn:"environment",factory:()=>new n(Pt(cr))})}return n})();function sr(n){return df(()=>{let e=xN(n),t=bt(Pe({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===RI.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(QU).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Bc.Emulated,styles:n.styles||ns,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Pg("NgStandalone"),SN(t);let r=n.dependencies;return t.directiveDefs=eP(r,ZU),t.pipeDefs=eP(r,H5),t.id=e9(t),t})}function ZU(n){return Ql(n)||M2(n)}function qc(n){return df(()=>({type:n.type,bootstrap:n.bootstrap||ns,declarations:n.declarations||ns,imports:n.imports||ns,exports:n.exports||ns,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function JU(n,e){if(n==null)return Yl;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=ky.None,c=null),t[o]=[r,a,c],e[o]=s}return t}function XU(n){if(n==null)return Yl;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Gn(n){return df(()=>{let e=xN(n);return SN(e),e})}function sE(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function xN(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Yl,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||ns,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:JU(n.inputs,e),outputs:XU(n.outputs),debugInfo:null}}function SN(n){n.features?.forEach(e=>e(n))}function eP(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function e9(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function t9(n){return Object.getPrototypeOf(n.prototype).constructor}function Ni(n){let e=t9(n.type),t=!0,r=[n];for(;e;){let i;if(Ua(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new et(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=cI(n.inputs),s.declaredInputs=cI(n.declaredInputs),s.outputs=cI(n.outputs);let a=i.hostBindings;a&&s9(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&i9(n,c),l&&o9(n,l),n9(n,i),L5(n.outputs,i.outputs),Ua(i)&&i.data.animation){let u=n.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Ni&&(t=!1)}}e=Object.getPrototypeOf(e)}r9(r)}function n9(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function r9(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=xg(i.hostAttrs,t=xg(t,i.hostAttrs))}}function cI(n){return n===Yl?{}:n===ns?[]:n}function i9(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function o9(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function s9(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function a9(n,e,t,r,i,o,s,a){if(t.firstCreatePass){n.mergedAttrs=xg(n.mergedAttrs,n.attrs);let u=n.tView=UI(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),u.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),nf(n,!1);let c=l9(t,e,n,r);ty()&&YI(t,e,c,n),af(c,e);let l=fN(c,e,c,n);e[r+Mi]=l,qI(e,l),KU(l,n,e)}function c9(n,e,t,r,i,o,s,a,c,l,u){let g=t+Mi,v;return e.firstCreatePass?(v=nE(e,g,4,s||null,a||null),Yv()&&yN(e,n,v,mg(e.consts,l),JI),uP(e,v)):v=e.data[g],a9(v,n,e,t,r,i,o,c),Xh(v)&&Fy(e,n,v),l!=null&&ZI(n,v,u),v}function He(n,e,t,r,i,o,s,a){let c=Dn(),l=co(),u=mg(l.consts,o);return c9(c,l,n,e,t,r,i,u,void 0,s,a),He}var l9=u9;function u9(n,e,t,r){return wg(!0),e[br].createComment("")}var aE=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var cE=new ct("");function ru(n){return!!n&&typeof n.then=="function"}function lE(n){return!!n&&typeof n.subscribe=="function"}var DN=new ct("");var uE=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=Oe(DN,{optional:!0})??[];injector=Oe(Gr);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=wr(this.injector,i);if(ru(o))t.push(o);else if(lE(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),By=new ct("");function TN(){Lb(()=>{let n="";throw new et(600,n)})}function AN(n){return n.isBoundToModule}var d9=10;var Hc=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=Oe(lo);afterRenderManager=Oe(GI);zonelessEnabled=Oe(bg);rootEffectScheduler=Oe(nI);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new $r;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=Oe(qa);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(mn(t=>!t))}constructor(){Oe(Ed,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=Oe(cr);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Gr.NULL){return this._injector.get(Rn).run(()=>{jn(10);let s=t instanceof Vy;if(!this._injector.get(uE).done){let S="";throw new et(405,S)}let c;s?c=t:c=this._injector.get(kg).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let l=AN(c)?void 0:this._injector.get(wd),u=r||c.selector,g=c.create(i,[],u,l),v=g.location.nativeElement,p=g.injector.get(cE,null);return p?.registerApplication(v),g.onDestroy(()=>{this.detachView(g.hostView),Cg(this.components,g),p?.unregisterApplication(v)}),this._loadComponent(g),jn(11,g),g})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){jn(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Ry.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new et(101,!1);let t=cn(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,cn(t),this.afterTick.next(),jn(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(_d,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<d9;)jn(14),this.synchronizeOnce(),jn(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!vg(i))continue;let o=r&&!this.zonelessEnabled?0:1;lN(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>vg(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Cg(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(By,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Cg(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new et(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Cg(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function $c(n,e,t,r){let i=Dn(),o=yg();if(nu(i,o,e)){let s=co(),a=ey();$B(a,i,n,e,t,r)}return $c}var ife=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function he(n,e,t){let r=Dn(),i=yg();if(nu(r,i,e)){let o=co(),s=ey();tN(s,r,n,e,r[br],t)}return he}function tP(n,e,t,r,i){XI(e,n,t,i?"class":"style",r)}function b(n,e,t,r){let i=Dn(),o=i[Gt],s=n+Mi,a=o.firstCreatePass?rE(s,i,2,e,JI,Yv(),t,r):o.data[s];if(nN(a,i,n,e,h9),Xh(a)){let c=i[Gt];Fy(c,i,a),FI(c,a,i)}return r!=null&&ZI(i,a),b}function w(){let n=co(),e=Pi(),t=rN(e);return n.firstCreatePass&&iE(n,t),lM(t)&&uM(),aM(),t.classesWithoutHost!=null&&p7(t)&&tP(n,t,Dn(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&g7(t)&&tP(n,t,Dn(),t.stylesWithoutHost,!1),w}function Po(n,e,t,r){return b(n,e,t,r),w(),Po}var h9=(n,e,t,r,i)=>(wg(!0),RP(e[br],r,CM()));function Uy(n,e,t){let r=Dn(),i=r[Gt],o=n+Mi,s=i.firstCreatePass?rE(o,r,8,"ng-container",JI,Yv(),e,t):i.data[o];if(nN(s,r,n,"ng-container",f9),Xh(s)){let a=r[Gt];Fy(a,r,s),FI(a,s,r)}return t!=null&&ZI(r,s),Uy}function zy(){let n=co(),e=Pi(),t=rN(e);return n.firstCreatePass&&iE(n,t),zy}var f9=(n,e,t,r,i)=>(wg(!0),W7(e[br],""));function Rt(){return Dn()}var oy=void 0;function p9(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var g9=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],oy,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],oy,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",oy,"{1} 'at' {0}",oy],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",p9],lI={};function ss(n){let e=m9(n),t=nP(e);if(t)return t;let r=e.split("-")[0];if(t=nP(r),t)return t;if(r==="en")return g9;throw new et(701,!1)}function nP(n){return n in lI||(lI[n]=Vc.ng&&Vc.ng.common&&Vc.ng.common.locales&&Vc.ng.common.locales[n]),lI[n]}var Fr=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(Fr||{});function m9(n){return n.toLowerCase().replace(/_/g,"-")}var Og="en-US";var v9=Og;function MN(n){typeof n=="string"&&(v9=n.toLowerCase().replace(/_/g,"-"))}function xe(n,e,t){let r=Dn(),i=co(),o=Pi();return PN(i,r,r[br],o,n,e,t),xe}function PN(n,e,t,r,i,o,s){let a=!0,c=null;if((r.type&3||s)&&(c??=sI(r,e,o),PU(r,n,e,s,t,i,o,c)&&(a=!1)),a){let l=r.outputs?.[i],u=r.hostDirectiveOutputs?.[i];if(u&&u.length)for(let g=0;g<u.length;g+=2){let v=u[g],p=u[g+1];c??=sI(r,e,o),ZM(r,e,v,p,i,c)}if(l&&l.length)for(let g of l)c??=sI(r,e,o),ZM(r,e,g,i,i,c)}}function oe(n=1){return EM(n)}function dE(n){let e=fM();return V2(e,Mi+n)}function sy(n,e){return n<<17|e<<2}function bd(n){return n>>17&32767}function y9(n){return(n&2)==2}function _9(n,e){return n&131071|e<<17}function AI(n){return n|2}function uf(n){return(n&131068)>>2}function uI(n,e){return n&-131069|e<<2}function w9(n){return(n&1)===1}function MI(n){return n|1}function b9(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=bd(s),c=uf(s);n[r]=t;let l=!1,u;if(Array.isArray(t)){let g=t;u=g[1],(u===null||Qh(g,u)>0)&&(l=!0)}else u=t;if(i)if(c!==0){let v=bd(n[a+1]);n[r+1]=sy(v,a),v!==0&&(n[v+1]=uI(n[v+1],r)),n[a+1]=_9(n[a+1],r)}else n[r+1]=sy(a,0),a!==0&&(n[a+1]=uI(n[a+1],r)),a=r;else n[r+1]=sy(c,0),a===0?a=r:n[c+1]=uI(n[c+1],r),c=r;l&&(n[r+1]=AI(n[r+1])),rP(n,u,r,!0),rP(n,u,r,!1),I9(e,u,n,r,o),s=sy(a,c),o?e.classBindings=s:e.styleBindings=s}function I9(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Qh(o,e)>=0&&(t[r+1]=MI(t[r+1]))}function rP(n,e,t,r){let i=n[t+1],o=e===null,s=r?bd(i):uf(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],l=n[s+1];E9(c,e)&&(a=!0,n[s+1]=r?MI(l):AI(l)),s=r?bd(l):uf(l)}a&&(n[t+1]=r?AI(i):MI(i))}function E9(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Qh(n,e)>=0:!1}function xd(n,e,t){return NN(n,e,t,!1),xd}function on(n,e){return NN(n,e,null,!0),on}function NN(n,e,t,r){let i=Dn(),o=co(),s=_g(2);if(o.firstUpdatePass&&x9(o,n,s,r),e!==uo&&nu(i,s,e)){let a=o.data[za()];M9(o,a,i,i[br],n,i[s+1]=P9(e,t),r,s)}}function C9(n,e){return e>=n.expandoStartIndex}function x9(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[za()],s=C9(n,t);N9(o,r)&&e===null&&!s&&(e=!1),e=S9(i,o,e,r),b9(i,o,e,t,s,r)}}function S9(n,e,t,r){let i=_M(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=dI(null,n,e,t,r),t=Ag(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=dI(i,n,e,t,r),o===null){let c=D9(n,e,r);c!==void 0&&Array.isArray(c)&&(c=dI(null,n,e,c[1],r),c=Ag(c,e.attrs,r),T9(n,e,r,c))}else o=A9(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function D9(n,e,t){let r=t?e.classBindings:e.styleBindings;if(uf(r)!==0)return n[bd(r)]}function T9(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[bd(i)]=r}function A9(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Ag(r,s,t)}return Ag(r,e.attrs,t)}function dI(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Ag(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Ag(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),q5(n,s,t?!0:e[++o]))}return n===void 0?null:n}function M9(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],u=w9(l)?iP(c,e,t,i,uf(l),s):void 0;if(!xy(u)){xy(o)||y9(l)&&(o=iP(c,null,t,i,a,s));let g=F2(za(),t);OB(r,s,g,i,o)}}function iP(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),u=l?c[1]:c,g=u===null,v=t[i+1];v===uo&&(v=g?ns:void 0);let p=g?Hv(v,r):u===r?v:void 0;if(l&&!xy(p)&&(p=Hv(c,r)),xy(p)&&(a=p,s))return a;let S=n[i+1];i=s?bd(S):uf(S)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=Hv(c,r))}return a}function xy(n){return n!==void 0}function P9(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Lc(Py(n)))),n}function N9(n,e){return(n.flags&(e?8:16))!==0}function C(n,e=""){let t=Dn(),r=co(),i=n+Mi,o=r.firstCreatePass?nE(r,i,1,e,null):r.data[i],s=k9(r,t,o,e,n);t[i]=s,ty()&&YI(r,t,s,o),nf(o,!1)}var k9=(n,e,t,r,i)=>(wg(!0),H7(e[br],r));function R9(n,e,t,r=""){return nu(n,yg(),t)?e+To(t)+r:uo}function O9(n,e,t,r,i,o=""){let s=Qv(),a=Dg(n,s,t,i);return _g(2),a?e+To(t)+r+To(i)+o:uo}function L9(n,e,t,r,i,o,s,a=""){let c=Qv(),l=AU(n,c,t,i,s);return _g(3),l?e+To(t)+r+To(i)+o+To(s)+a:uo}function F9(n,e,t,r,i,o,s,a,c,l=""){let u=Qv(),g=MU(n,u,t,i,s,c);return _g(4),g?e+To(t)+r+To(i)+o+To(s)+a+To(c)+l:uo}function Ue(n){return Ge("",n),Ue}function Ge(n,e,t){let r=Dn(),i=R9(r,n,e,t);return i!==uo&&Hy(r,za(),i),Ge}function No(n,e,t,r,i){let o=Dn(),s=O9(o,n,e,t,r,i);return s!==uo&&Hy(o,za(),s),No}function Sd(n,e,t,r,i,o,s){let a=Dn(),c=L9(a,n,e,t,r,i,o,s);return c!==uo&&Hy(a,za(),c),Sd}function qy(n,e,t,r,i,o,s,a,c){let l=Dn(),u=F9(l,n,e,t,r,i,o,s,a,c);return u!==uo&&Hy(l,za(),u),qy}function Hy(n,e,t){let r=F2(e,n);$7(n[br],r,t)}function dt(n,e,t){X2(e)&&(e=e());let r=Dn(),i=yg();if(nu(r,i,e)){let o=co(),s=ey();tN(s,r,n,e,r[br],t)}return dt}function pt(n,e){let t=X2(n);return t&&n.set(e),t}function ht(n,e){let t=Dn(),r=co(),i=Pi();return PN(r,t,t[br],i,n,e),ht}function V9(n,e,t){let r=co();if(r.firstCreatePass){let i=Ua(n);PI(t,r.data,r.blueprint,i,!0),PI(e,r.data,r.blueprint,i,!1)}}function PI(n,e,t,r,i){if(n=Ti(n),Array.isArray(n))for(let o=0;o<n.length;o++)PI(n[o],e,t,r,i);else{let o=co(),s=Dn(),a=Pi(),c=cd(n)?n:Ti(n.provide),l=k2(n),u=a.providerIndexes&1048575,g=a.directiveStart,v=a.providerIndexes>>20;if(cd(n)||!n.multi){let p=new yd(l,i,Xe,null),S=fI(c,e,i?u:u+v,g);S===-1?(gI(py(a,s),o,c),hI(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(p),s.push(p)):(t[S]=p,s[S]=p)}else{let p=fI(c,e,u+v,g),S=fI(c,e,u,u+v),k=p>=0&&t[p],L=S>=0&&t[S];if(i&&!L||!i&&!k){gI(py(a,s),o,c);let R=U9(i?B9:j9,t.length,i,r,l,n);!i&&L&&(t[S].providerFactory=R),hI(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(R),s.push(R)}else{let R=kN(t[i?S:p],l,!i&&r);hI(o,n,p>-1?p:S,R)}!i&&r&&L&&t[S].componentProviders++}}}function hI(n,e,t,r){let i=cd(e),o=Y5(e);if(i||o){let c=(o?Ti(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let u=l.indexOf(t);u===-1?l.push(t,[r,c]):l[u+1].push(r,c)}else l.push(t,c)}}}function kN(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function fI(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function j9(n,e,t,r,i){return NI(this.multi,[])}function B9(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=gy(r,r[Gt],this.providerFactory.index,i);s=c.slice(0,a),NI(o,s);for(let l=a;l<c.length;l++)s.push(c[l])}else s=[],NI(o,s);return s}function NI(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function U9(n,e,t,r,i,o){let s=new yd(n,t,Xe,null);return s.multi=[],s.index=e,s.componentProviders=0,kN(s,i,r&&!t),s}function as(n,e=[]){return t=>{t.providersResolver=(r,i)=>V9(r,i?i(n):n,e)}}function z9(n,e){let t=n[e];return t===uo?void 0:t}function q9(n,e,t,r,i,o,s){let a=e+t;return Dg(n,a,i,o)?TU(n,a+2,s?r.call(s,i,o):r(i,o)):z9(n,a+2)}function iu(n,e){let t=co(),r,i=n+Mi;t.firstCreatePass?(r=H9(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Gl(r.type,!0)),s,a=ao(Xe);try{let c=fy(!1),l=o();return fy(c),j2(t,Dn(),i,l),l}finally{ao(a)}}function H9(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function ou(n,e,t,r){let i=n+Mi,o=Dn(),s=V2(o,i);return $9(o,i)?q9(o,pM(),e,s.transform,t,r,s):s.transform(t,r)}function $9(n,e){return n[Gt].data[e].pure}function hE(n,e){return gN(n,e)}var Sy=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},fE=(()=>{class n{compileModuleSync(t){return new Cy(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=A2(t),o=BP(i.declarations).reduce((s,a)=>{let c=Ql(a);return c&&s.push(new lf(c)),s},[]);return new Sy(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var W9=(()=>{class n{zone=Oe(Rn);changeDetectionScheduler=Oe(Fc);applicationRef=Oe(Hc);applicationErrorHandler=Oe(lo);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),RN=new ct("",{factory:()=>!1});function pE({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Rn(bt(Pe({},mE()),{scheduleInRootZone:t})),[{provide:Rn,useFactory:n},{provide:jc,multi:!0,useFactory:()=>{let r=Oe(W9,{optional:!0});return()=>r.initialize()}},{provide:jc,multi:!0,useFactory:()=>{let r=Oe(G9);return()=>{r.initialize()}}},e===!0?{provide:eI,useValue:!0}:[],{provide:tI,useValue:t??$P},{provide:lo,useFactory:()=>{let r=Oe(Rn),i=Oe(cr),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(na),o.handleError(s))})}}}]}function gE(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=pE({ngZoneFactory:()=>{let i=mE(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Pg("NgZone_CoalesceEvent"),new Rn(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return rs([{provide:RN,useValue:!0},{provide:bg,useValue:!1},r])}function mE(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var G9=(()=>{class n{subscription=new Sr;initialized=!1;zone=Oe(Rn);pendingTasks=Oe(qa);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Rn.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Rn.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ON=(()=>{class n{applicationErrorHandler=Oe(lo);appRef=Oe(Hc);taskService=Oe(qa);ngZone=Oe(Rn);zonelessEnabled=Oe(bg);tracing=Oe(Ed,{optional:!0});disableScheduling=Oe(eI,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Sr;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(yy):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(Oe(tI,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof _y||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?VM:WP;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(yy+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,VM(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function K9(){return typeof $localize<"u"&&$localize.locale||Og}var Lg=new ct("",{providedIn:"root",factory:()=>Oe(Lg,{optional:!0,skipSelf:!0})||K9()});function pi(n){return k5(n)}function hf(n,e){return lv(n,e?.equal)}var LN=class{[ji];constructor(e){this[ji]=e}destroy(){this[ji].destroy()}};var BN=Symbol("InputSignalNode#UNSET"),dz=bt(Pe({},uv),{transformFn:void 0,applyValueToInputSignal(n,e){Rh(n,e)}});function UN(n,e){let t=Object.create(dz);t.value=n,t.transformFn=e?.transform;function r(){if(Ph(t),t.value===BN){let i=null;throw new et(-950,i)}return t.value}return r[ji]=t,r}var Wy=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Mg(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},hz=new ct("");hz.__NG_ELEMENT_ID__=n=>{let e=Pi();if(e===null)throw new et(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new et(204,!1)};function FN(n,e){return UN(n,e)}function fz(n){return UN(BN,n)}var zN=(FN.required=fz,FN);var vE=new ct(""),pz=new ct("");function Fg(n){return!n.moduleRef}function gz(n){let e=Fg(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Rn);return t.run(()=>{Fg(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(lo),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Fg(n)){let o=()=>e.destroy(),s=n.platformInjector.get(vE);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(vE);s.add(o),n.moduleRef.onDestroy(()=>{Cg(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return vz(r,t,()=>{let o=e.get(qa),s=o.add(),a=e.get(uE);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(Lg,Og);if(MN(c||Og),!e.get(pz,!0))return Fg(n)?e.get(Hc):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Fg(n)){let u=e.get(Hc);return n.rootComponent!==void 0&&u.bootstrap(n.rootComponent),u}else return mz?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var mz;function vz(n,e,t){try{let r=t();return ru(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var $y=null;function yz(n=[],e){return Gr.create({name:e,providers:[{provide:cg,useValue:"platform"},{provide:vE,useValue:new Set([()=>$y=null])},...n]})}function _z(n=[]){if($y)return $y;let e=yz(n);return $y=e,TN(),wz(e),e}function wz(n){let e=n.get(Ay,null);wr(n,()=>{e?.forEach(t=>t())})}function IE(){return!1}var Dd=(()=>{class n{static __NG_ELEMENT_ID__=bz}return n})();function bz(n){return Iz(Pi(),Dn(),(n&16)===16)}function Iz(n,e,t){if(Xl(n)&&!t){let r=Rs(n.index,e);return new tu(r,r)}else if(n.type&175){let r=e[Ns];return new tu(r,e)}return null}var yE=class{constructor(){}supports(e){return oE(e)}create(e){return new _E(e)}},Ez=(n,e)=>e,_E=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||Ez}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<VN(r,i,o)?t:r,a=VN(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,u=c-i;if(l!=u){for(let v=0;v<l;v++){let p=v<o.length?o[v]:o[v]=0,S=p+v;u<=S&&S<l&&(o[v]=p+1)}let g=s.previousIndex;o[g]=u-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!oE(e))throw new et(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,wN(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new wE(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Gy),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Gy),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},wE=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},bE=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Gy=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new bE,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function VN(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function jN(){return new EE([new yE])}var EE=(()=>{class n{factories;static \u0275prov=yt({token:n,providedIn:"root",factory:jN});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=Oe(n,{optional:!0,skipSelf:!0});return n.create(t,r||jN())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new et(901,!1)}}return n})();function qN(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;jn(8);try{let o=i?.injector??_z(r),s=[pE({}),{provide:Fc,useExisting:ON},SM,...t||[]],a=new Tg({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return gz({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{jn(9)}}function Td(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var WN=null;function Ls(){return WN}function CE(n){WN??=n}var Vg=class{},xE=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:()=>Oe(GN),providedIn:"platform"})}return n})();var GN=(()=>{class n extends xE{_location;_history;_doc=Oe(fi);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ls().getBaseHref(this._doc)}onPopState(t){let r=Ls().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Ls().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function KN(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function HN(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function su(n){return n&&n[0]!=="?"?`?${n}`:n}var ff=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:()=>Oe(QN),providedIn:"root"})}return n})(),YN=new ct(""),QN=(()=>{class n extends ff{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Oe(fi).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return KN(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+su(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+su(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+su(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(Pt(xE),Pt(YN,8))};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pf=(()=>{class n{_subject=new $r;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=Sz(HN($N(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+su(r))}normalize(t){return n.stripTrailingSlash(xz(this._basePath,$N(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+su(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+su(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=su;static joinWithSlash=KN;static stripTrailingSlash=HN;static \u0275fac=function(r){return new(r||n)(Pt(ff))};static \u0275prov=yt({token:n,factory:()=>Cz(),providedIn:"root"})}return n})();function Cz(){return new pf(Pt(ff))}function xz(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function $N(n){return n.replace(/\/index.html$/,"")}function Sz(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var zi=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})(zi||{}),Kn=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(Kn||{}),ko=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})(ko||{}),Gc={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function ek(n){return ss(n)[Fr.LocaleId]}function tk(n,e,t){let r=ss(n),i=[r[Fr.DayPeriodsFormat],r[Fr.DayPeriodsStandalone]],o=Fs(i,e);return Fs(o,t)}function nk(n,e,t){let r=ss(n),i=[r[Fr.DaysFormat],r[Fr.DaysStandalone]],o=Fs(i,e);return Fs(o,t)}function rk(n,e,t){let r=ss(n),i=[r[Fr.MonthsFormat],r[Fr.MonthsStandalone]],o=Fs(i,e);return Fs(o,t)}function ik(n,e){let r=ss(n)[Fr.Eras];return Fs(r,e)}function jg(n,e){let t=ss(n);return Fs(t[Fr.DateFormat],e)}function Bg(n,e){let t=ss(n);return Fs(t[Fr.TimeFormat],e)}function Ug(n,e){let r=ss(n)[Fr.DateTimeFormat];return Fs(r,e)}function zg(n,e){let t=ss(n),r=t[Fr.NumberSymbols][e];if(typeof r>"u"){if(e===Gc.CurrencyDecimal)return t[Fr.NumberSymbols][Gc.Decimal];if(e===Gc.CurrencyGroup)return t[Fr.NumberSymbols][Gc.Group]}return r}function ok(n){if(!n[Fr.ExtraData])throw new et(2303,!1)}function sk(n){let e=ss(n);return ok(e),(e[Fr.ExtraData][2]||[]).map(r=>typeof r=="string"?SE(r):[SE(r[0]),SE(r[1])])}function ak(n,e,t){let r=ss(n);ok(r);let i=[r[Fr.ExtraData][0],r[Fr.ExtraData][1]],o=Fs(i,e)||[];return Fs(o,t)||[]}function Fs(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new et(2304,!1)}function SE(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var Dz=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Ky={},Tz=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function ck(n,e,t,r){let i=Fz(n);e=Wc(t,e)||e;let s=[],a;for(;e;)if(a=Tz.exec(e),a){s=s.concat(a.slice(1));let u=s.pop();if(!u)break;e=u}else{s.push(e);break}let c=i.getTimezoneOffset();r&&(c=uk(r,c),i=Lz(i,r));let l="";return s.forEach(u=>{let g=Rz(u);l+=g?g(i,t,c):u==="''"?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Xy(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Wc(n,e){let t=ek(n);if(Ky[t]??={},Ky[t][e])return Ky[t][e];let r="";switch(e){case"shortDate":r=jg(n,ko.Short);break;case"mediumDate":r=jg(n,ko.Medium);break;case"longDate":r=jg(n,ko.Long);break;case"fullDate":r=jg(n,ko.Full);break;case"shortTime":r=Bg(n,ko.Short);break;case"mediumTime":r=Bg(n,ko.Medium);break;case"longTime":r=Bg(n,ko.Long);break;case"fullTime":r=Bg(n,ko.Full);break;case"short":let i=Wc(n,"shortTime"),o=Wc(n,"shortDate");r=Yy(Ug(n,ko.Short),[i,o]);break;case"medium":let s=Wc(n,"mediumTime"),a=Wc(n,"mediumDate");r=Yy(Ug(n,ko.Medium),[s,a]);break;case"long":let c=Wc(n,"longTime"),l=Wc(n,"longDate");r=Yy(Ug(n,ko.Long),[c,l]);break;case"full":let u=Wc(n,"fullTime"),g=Wc(n,"fullDate");r=Yy(Ug(n,ko.Full),[u,g]);break}return r&&(Ky[t][e]=r),r}function Yy(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function la(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function Az(n,e){return la(n,3).substring(0,e)}function Yr(n,e,t=0,r=!1,i=!1){return function(o,s){let a=Mz(n,o);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return Az(a,e);let c=zg(s,Gc.MinusSign);return la(a,e,c,r,i)}}function Mz(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new et(2301,!1)}}function nr(n,e,t=zi.Format,r=!1){return function(i,o){return Pz(i,o,n,e,t,r)}}function Pz(n,e,t,r,i,o){switch(t){case 2:return rk(e,i,r)[n.getMonth()];case 1:return nk(e,i,r)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(o){let l=sk(e),u=ak(e,i,r),g=l.findIndex(v=>{if(Array.isArray(v)){let[p,S]=v,k=s>=p.hours&&a>=p.minutes,L=s<S.hours||s===S.hours&&a<S.minutes;if(p.hours<S.hours){if(k&&L)return!0}else if(k||L)return!0}else if(v.hours===s&&v.minutes===a)return!0;return!1});if(g!==-1)return u[g]}return tk(e,i,r)[s<12?0:1];case 3:return ik(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new et(2302,!1)}}function Qy(n){return function(e,t,r){let i=-1*r,o=zg(t,Gc.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+la(s,2,o)+la(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+la(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+la(s,2,o)+":"+la(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+la(s,2,o)+":"+la(Math.abs(i%60),2,o);default:throw new et(2310,!1)}}}var Nz=0,Jy=4;function kz(n){let e=Xy(n,Nz,1).getDay();return Xy(n,0,1+(e<=Jy?Jy:Jy+7)-e)}function lk(n){let e=n.getDay(),t=e===0?-3:Jy-e;return Xy(n.getFullYear(),n.getMonth(),n.getDate()+t)}function DE(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=lk(t),s=kz(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return la(i,n,zg(r,Gc.MinusSign))}}function Zy(n,e=!1){return function(t,r){let o=lk(t).getFullYear();return la(o,n,zg(r,Gc.MinusSign),e)}}var TE={};function Rz(n){if(TE[n])return TE[n];let e;switch(n){case"G":case"GG":case"GGG":e=nr(3,Kn.Abbreviated);break;case"GGGG":e=nr(3,Kn.Wide);break;case"GGGGG":e=nr(3,Kn.Narrow);break;case"y":e=Yr(0,1,0,!1,!0);break;case"yy":e=Yr(0,2,0,!0,!0);break;case"yyy":e=Yr(0,3,0,!1,!0);break;case"yyyy":e=Yr(0,4,0,!1,!0);break;case"Y":e=Zy(1);break;case"YY":e=Zy(2,!0);break;case"YYY":e=Zy(3);break;case"YYYY":e=Zy(4);break;case"M":case"L":e=Yr(1,1,1);break;case"MM":case"LL":e=Yr(1,2,1);break;case"MMM":e=nr(2,Kn.Abbreviated);break;case"MMMM":e=nr(2,Kn.Wide);break;case"MMMMM":e=nr(2,Kn.Narrow);break;case"LLL":e=nr(2,Kn.Abbreviated,zi.Standalone);break;case"LLLL":e=nr(2,Kn.Wide,zi.Standalone);break;case"LLLLL":e=nr(2,Kn.Narrow,zi.Standalone);break;case"w":e=DE(1);break;case"ww":e=DE(2);break;case"W":e=DE(1,!0);break;case"d":e=Yr(2,1);break;case"dd":e=Yr(2,2);break;case"c":case"cc":e=Yr(7,1);break;case"ccc":e=nr(1,Kn.Abbreviated,zi.Standalone);break;case"cccc":e=nr(1,Kn.Wide,zi.Standalone);break;case"ccccc":e=nr(1,Kn.Narrow,zi.Standalone);break;case"cccccc":e=nr(1,Kn.Short,zi.Standalone);break;case"E":case"EE":case"EEE":e=nr(1,Kn.Abbreviated);break;case"EEEE":e=nr(1,Kn.Wide);break;case"EEEEE":e=nr(1,Kn.Narrow);break;case"EEEEEE":e=nr(1,Kn.Short);break;case"a":case"aa":case"aaa":e=nr(0,Kn.Abbreviated);break;case"aaaa":e=nr(0,Kn.Wide);break;case"aaaaa":e=nr(0,Kn.Narrow);break;case"b":case"bb":case"bbb":e=nr(0,Kn.Abbreviated,zi.Standalone,!0);break;case"bbbb":e=nr(0,Kn.Wide,zi.Standalone,!0);break;case"bbbbb":e=nr(0,Kn.Narrow,zi.Standalone,!0);break;case"B":case"BB":case"BBB":e=nr(0,Kn.Abbreviated,zi.Format,!0);break;case"BBBB":e=nr(0,Kn.Wide,zi.Format,!0);break;case"BBBBB":e=nr(0,Kn.Narrow,zi.Format,!0);break;case"h":e=Yr(3,1,-12);break;case"hh":e=Yr(3,2,-12);break;case"H":e=Yr(3,1);break;case"HH":e=Yr(3,2);break;case"m":e=Yr(4,1);break;case"mm":e=Yr(4,2);break;case"s":e=Yr(5,1);break;case"ss":e=Yr(5,2);break;case"S":e=Yr(6,1);break;case"SS":e=Yr(6,2);break;case"SSS":e=Yr(6,3);break;case"Z":case"ZZ":case"ZZZ":e=Qy(0);break;case"ZZZZZ":e=Qy(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Qy(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=Qy(2);break;default:return null}return TE[n]=e,e}function uk(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function Oz(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function Lz(n,e,t){let i=n.getTimezoneOffset(),o=uk(e,i);return Oz(n,-1*(o-i))}function Fz(n){if(ZN(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return Xy(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(Dz))return Vz(r)}let e=new Date(n);if(!ZN(e))throw new et(2311,!1);return e}function Vz(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),l=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,c,l),e}function ZN(n){return n instanceof Date&&!isNaN(n.valueOf())}var e_=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Qr=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new e_(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),JN(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);JN(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(Xe(Cd),Xe(Ng),Xe(EE))};static \u0275dir=Gn({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function JN(n,e){n.context.$implicit=e.item}var Ir=(()=>{class n{_viewContainer;_context=new t_;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){XN(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){XN(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(Xe(Cd),Xe(Ng))};static \u0275dir=Gn({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),t_=class{$implicit=null;ngIf=null};function XN(n,e){if(n&&!n.createEmbeddedView)throw new et(2020,!1)}function jz(n,e){return new et(2100,!1)}var Bz="mediumDate",dk=new ct(""),hk=new ct(""),Ad=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??Bz,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return ck(t,s,o||this.locale,a)}catch(s){throw jz(n,s.message)}}static \u0275fac=function(r){return new(r||n)(Xe(Lg,16),Xe(dk,24),Xe(hk,24))};static \u0275pipe=sE({name:"date",type:n,pure:!0})}return n})();var lr=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=qc({type:n});static \u0275inj=Va({})}return n})();function AE(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var qg=class{};var fk="browser";var Hg=class{_doc;constructor(e){this._doc=e}manager},n_=(()=>{class n extends Hg{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(Pt(fi))};static \u0275prov=yt({token:n,factory:n.\u0275fac})}return n})(),i_=new ct(""),RE=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(s=>{s.manager=this});let i=t.filter(s=>!(s instanceof n_));this._plugins=i.slice().reverse();let o=t.find(s=>s instanceof n_);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new et(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(Pt(i_),Pt(Rn))};static \u0275prov=yt({token:n,factory:n.\u0275fac})}return n})(),ME="ng-app-id";function pk(n){for(let e of n)e.remove()}function gk(n,e){let t=e.createElement("style");return t.textContent=n,t}function Uz(n,e,t,r){let i=n.head?.querySelectorAll(`style[${ME}="${e}"],link[${ME}="${e}"]`);if(i)for(let o of i)o.removeAttribute(ME),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function NE(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var OE=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,Uz(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,gk);r?.forEach(i=>this.addUsage(i,this.external,NE))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(pk(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])pk(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,gk(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,NE(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(Pt(fi),Pt(Ty),Pt(My,8),Pt(Id))};static \u0275prov=yt({token:n,factory:n.\u0275fac})}return n})(),PE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},LE=/%COMP%/g;var vk="%COMP%",zz=`_nghost-${vk}`,qz=`_ngcontent-${vk}`,Hz=!0,$z=new ct("",{providedIn:"root",factory:()=>Hz});function Wz(n){return qz.replace(LE,n)}function Gz(n){return zz.replace(LE,n)}function yk(n,e){return e.map(t=>t.replace(LE,n))}var FE=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,c=null,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=c,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new $g(t,s,a,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof r_?i.applyToHost(t):i instanceof Wg&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,g=this.platformIsServer,v=this.tracingService;switch(r.encapsulation){case Bc.Emulated:o=new r_(c,l,r,this.appId,u,s,a,g,v);break;case Bc.ShadowDom:return new kE(c,l,t,r,s,a,this.nonce,g,v);default:o=new Wg(c,l,r,u,s,a,g,v);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(Pt(RE),Pt(OE),Pt(Ty),Pt($z),Pt(fi),Pt(Rn),Pt(My),Pt(Ed,8))};static \u0275prov=yt({token:n,factory:n.\u0275fac})}return n})(),$g=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(PE[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(mk(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(mk(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new et(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=PE[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=PE[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&($a.DashCase|$a.Important)?e.style.setProperty(t,r,i&$a.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&$a.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Ls().getGlobalEventTarget(this.doc,e),!e))throw new et(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function mk(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var kE=class extends $g{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,c,l){super(e,o,s,c,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=i.styles;u=yk(i.id,u);for(let v of u){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=v,this.shadowRoot.appendChild(p)}let g=i.getExternalStyles?.();if(g)for(let v of g){let p=NE(v,o);a&&p.setAttribute("nonce",a),this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Wg=class extends $g{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,c,l){super(e,o,s,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let u=r.styles;this.styles=l?yk(l,u):u,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&cf.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},r_=class extends Wg{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,c,l){let u=i+"-"+r.id;super(e,t,r,o,s,a,c,l,u),this.contentAttr=Wz(u),this.hostAttr=Gz(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var o_=class n extends Vg{supportsDOMEvents=!0;static makeCurrent(){CE(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=Kz();return t==null?null:Yz(t)}resetBaseElement(){Gg=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return AE(document.cookie,e)}},Gg=null;function Kz(){return Gg=Gg||document.head.querySelector("base"),Gg?Gg.getAttribute("href"):null}function Yz(n){return new URL(n,document.baseURI).pathname}var Qz=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac})}return n})(),_k=["alt","control","meta","shift"],Zz={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Jz={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},wk=(()=>{class n extends Hg{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ls().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),_k.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=Zz[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),_k.forEach(s=>{if(s!==i){let a=Jz[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(Pt(fi))};static \u0275prov=yt({token:n,factory:n.\u0275fac})}return n})();function VE(n,e,t){let r=Pe({rootComponent:n,platformRef:t?.platformRef},Xz(e));return qN(r)}function Xz(n){return{appProviders:[...iq,...n?.providers??[]],platformProviders:rq}}function eq(){o_.makeCurrent()}function tq(){return new na}function nq(){return OI(document),document}var rq=[{provide:Id,useValue:fk},{provide:Ay,useValue:eq,multi:!0},{provide:fi,useFactory:nq}];var iq=[{provide:cg,useValue:"root"},{provide:na,useFactory:tq},{provide:i_,useClass:n_,multi:!0,deps:[fi]},{provide:i_,useClass:wk,multi:!0,deps:[fi]},FE,OE,RE,{provide:_d,useExisting:FE},{provide:qg,useClass:Qz},[]];var bk=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(Pt(fi))};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Kt="primary",cm=Symbol("RouteTitle"),qE=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Nd(n){return new qE(n)}function Ak(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function sq(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ga(n[t],e[t]))return!1;return!0}function Ga(n,e){let t=n?HE(n):void 0,r=e?HE(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!Mk(n[i],e[i]))return!1;return!0}function HE(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Mk(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function Pk(n){return n.length>0?n[n.length-1]:null}function Qc(n){return Jb(n)?n:ru(n)?_r(Promise.resolve(n)):qt(n)}var aq={exact:kk,subset:Rk},Nk={exact:cq,subset:lq,ignored:()=>!0};function Ik(n,e,t){return aq[t.paths](n.root,e.root,t.matrixParams)&&Nk[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function cq(n,e){return Ga(n,e)}function kk(n,e,t){if(!Md(n.segments,e.segments)||!c_(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!kk(n.children[r],e.children[r],t))return!1;return!0}function lq(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Mk(n[t],e[t]))}function Rk(n,e,t){return Ok(n,e,e.segments,t)}function Ok(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Md(i,t)||e.hasChildren()||!c_(i,t,r))}else if(n.segments.length===t.length){if(!Md(n.segments,t)||!c_(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!Rk(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Md(n.segments,i)||!c_(n.segments,i,r)||!n.children[Kt]?!1:Ok(n.children[Kt],e,o,r)}}function c_(n,e,t){return e.every((r,i)=>Nk[t](n[i].parameters,r.parameters))}var Ya=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Tn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Nd(this.queryParams),this._queryParamMap}toString(){return hq.serialize(this)}},Tn=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return l_(this)}},au=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Nd(this.parameters),this._parameterMap}toString(){return Fk(this)}};function uq(n,e){return Md(n,e)&&n.every((t,r)=>Ga(t.parameters,e[r].parameters))}function Md(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function dq(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Kt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Kt&&(t=t.concat(e(i,r)))}),t}var lm=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:()=>new kd,providedIn:"root"})}return n})(),kd=class{parse(e){let t=new WE(e);return new Ya(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Kg(e.root,!0)}`,r=gq(e.queryParams),i=typeof e.fragment=="string"?`#${fq(e.fragment)}`:"";return`${t}${r}${i}`}},hq=new kd;function l_(n){return n.segments.map(e=>Fk(e)).join("/")}function Kg(n,e){if(!n.hasChildren())return l_(n);if(e){let t=n.children[Kt]?Kg(n.children[Kt],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==Kt&&r.push(`${i}:${Kg(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=dq(n,(r,i)=>i===Kt?[Kg(n.children[Kt],!1)]:[`${i}:${Kg(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Kt]!=null?`${l_(n)}/${t[0]}`:`${l_(n)}/(${t.join("//")})`}}function Lk(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function s_(n){return Lk(n).replace(/%3B/gi,";")}function fq(n){return encodeURI(n)}function $E(n){return Lk(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function u_(n){return decodeURIComponent(n)}function Ek(n){return u_(n.replace(/\+/g,"%20"))}function Fk(n){return`${$E(n.path)}${pq(n.parameters)}`}function pq(n){return Object.entries(n).map(([e,t])=>`;${$E(e)}=${$E(t)}`).join("")}function gq(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${s_(t)}=${s_(i)}`).join("&"):`${s_(t)}=${s_(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var mq=/^[^\/()?;#]+/;function jE(n){let e=n.match(mq);return e?e[0]:""}var vq=/^[^\/()?;=#]+/;function yq(n){let e=n.match(vq);return e?e[0]:""}var _q=/^[^=?&#]+/;function wq(n){let e=n.match(_q);return e?e[0]:""}var bq=/^[^&#]+/;function Iq(n){let e=n.match(bq);return e?e[0]:""}var WE=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Tn([],{}):new Tn([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Kt]=new Tn(e,t)),r}parseSegment(){let e=jE(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new et(4009,!1);return this.capture(e),new au(u_(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=yq(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=jE(this.remaining);i&&(r=i,this.capture(r))}e[u_(t)]=u_(r)}parseQueryParam(e){let t=wq(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=Iq(this.remaining);s&&(r=s,this.capture(r))}let i=Ek(t),o=Ek(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=jE(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new et(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Kt);let s=this.parseChildren();t[o??Kt]=Object.keys(s).length===1&&s[Kt]?s[Kt]:new Tn([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new et(4011,!1)}};function Vk(n){return n.segments.length>0?new Tn([],{[Kt]:n}):n}function jk(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=jk(i);if(r===Kt&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Tn(n.segments,e);return Eq(t)}function Eq(n){if(n.numberOfChildren===1&&n.children[Kt]){let e=n.children[Kt];return new Tn(n.segments.concat(e.segments),e.children)}return n}function cu(n){return n instanceof Ya}function Bk(n,e,t=null,r=null){let i=Uk(n);return zk(i,e,t,r)}function Uk(n){let e;function t(o){let s={};for(let c of o.children){let l=t(c);s[c.outlet]=l}let a=new Tn(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=Vk(r);return e??i}function zk(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return BE(i,i,i,t,r);let o=Cq(e);if(o.toRoot())return BE(i,i,new Tn([],{}),t,r);let s=xq(o,i,n),a=s.processChildren?Qg(s.segmentGroup,s.index,o.commands):Hk(s.segmentGroup,s.index,o.commands);return BE(i,s.segmentGroup,a,t,r)}function d_(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Xg(n){return typeof n=="object"&&n!=null&&n.outlets}function BE(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let s;n===e?s=t:s=qk(n,e,t);let a=Vk(jk(s));return new Ya(a,o,i)}function qk(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=qk(o,e,t)}),new Tn(n.segments,r)}var h_=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&d_(r[0]))throw new et(4003,!1);let i=r.find(Xg);if(i&&i!==Pk(r))throw new et(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Cq(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new h_(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new h_(t,e,r)}var vf=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function xq(n,e,t){if(n.isAbsolute)return new vf(e,!0,0);if(!t)return new vf(e,!1,NaN);if(t.parent===null)return new vf(t,!0,0);let r=d_(n.commands[0])?0:1,i=t.segments.length-1+r;return Sq(t,i,n.numberOfDoubleDots)}function Sq(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new et(4005,!1);i=r.segments.length}return new vf(r,!1,i-o)}function Dq(n){return Xg(n[0])?n[0].outlets:{[Kt]:n}}function Hk(n,e,t){if(n??=new Tn([],{}),n.segments.length===0&&n.hasChildren())return Qg(n,e,t);let r=Tq(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Tn(n.segments.slice(0,r.pathIndex),{});return o.children[Kt]=new Tn(n.segments.slice(r.pathIndex),n.children),Qg(o,0,i)}else return r.match&&i.length===0?new Tn(n.segments,{}):r.match&&!n.hasChildren()?GE(n,e,t):r.match?Qg(n,0,i):GE(n,e,t)}function Qg(n,e,t){if(t.length===0)return new Tn(n.segments,{});{let r=Dq(t),i={};if(Object.keys(r).some(o=>o!==Kt)&&n.children[Kt]&&n.numberOfChildren===1&&n.children[Kt].segments.length===0){let o=Qg(n.children[Kt],e,t);return new Tn(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=Hk(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Tn(n.segments,i)}}function Tq(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Xg(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!xk(c,l,s))return o;r+=2}else{if(!xk(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function GE(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Xg(o)){let c=Aq(o.outlets);return new Tn(r,c)}if(i===0&&d_(t[0])){let c=n.segments[e];r.push(new au(c.path,Ck(t[0]))),i++;continue}let s=Xg(o)?o.outlets[Kt]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&d_(a)?(r.push(new au(s,Ck(a))),i+=2):(r.push(new au(s,{})),i++)}return new Tn(r,{})}function Aq(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=GE(new Tn([],{}),0,r))}),e}function Ck(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function xk(n,e,t){return n==t.path&&Ga(e,t.parameters)}var Zg="imperative",gi=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(gi||{}),ls=class{id;url;constructor(e,t){this.id=e,this.url=t}},Rd=class extends ls{type=gi.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Qa=class extends ls{urlAfterRedirects;type=gi.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ho=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(ho||{}),em=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(em||{}),Ka=class extends ls{reason;code;type=gi.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Kc=class extends ls{reason;code;type=gi.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},_f=class extends ls{error;target;type=gi.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},tm=class extends ls{urlAfterRedirects;state;type=gi.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},f_=class extends ls{urlAfterRedirects;state;type=gi.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},p_=class extends ls{urlAfterRedirects;state;shouldActivate;type=gi.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},g_=class extends ls{urlAfterRedirects;state;type=gi.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},m_=class extends ls{urlAfterRedirects;state;type=gi.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},v_=class{route;type=gi.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},y_=class{route;type=gi.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},__=class{snapshot;type=gi.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},w_=class{snapshot;type=gi.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},b_=class{snapshot;type=gi.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},I_=class{snapshot;type=gi.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var nm=class{},wf=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function Mq(n){return!(n instanceof nm)&&!(n instanceof wf)}function Pq(n,e){return n.providers&&!n._injector&&(n._injector=Rg(n.providers,e,`Route: ${n.path}`)),n._injector??e}function ua(n){return n.outlet||Kt}function Nq(n,e){let t=n.filter(r=>ua(r)===e);return t.push(...n.filter(r=>ua(r)!==e)),t}function Ef(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var E_=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Ef(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Cf(this.rootInjector)}},Cf=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new E_(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(Pt(cr))};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),C_=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=KE(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=KE(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=YE(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return YE(e,this._root).map(t=>t.value)}};function KE(n,e){if(n===e.value)return e;for(let t of e.children){let r=KE(n,t);if(r)return r}return null}function YE(n,e){if(n===e.value)return[e];for(let t of e.children){let r=YE(n,t);if(r.length)return r.unshift(e),r}return[]}var cs=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function mf(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var rm=class extends C_{snapshot;constructor(e,t){super(e),this.snapshot=t,rC(this,e)}toString(){return this.snapshot.toString()}};function $k(n){let e=kq(n),t=new Di([new au("",{})]),r=new Di({}),i=new Di({}),o=new Di({}),s=new Di(""),a=new Yc(t,r,o,s,i,Kt,n,e.root);return a.snapshot=e.root,new rm(new cs(a,[]),e)}function kq(n){let e={},t={},r={},o=new Pd([],e,r,"",t,Kt,n,null,{});return new im("",new cs(o,[]))}var Yc=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(mn(l=>l[cm]))??qt(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(mn(e=>Nd(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(mn(e=>Nd(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function x_(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:Pe(Pe({},e.params),n.params),data:Pe(Pe({},e.data),n.data),resolve:Pe(Pe(Pe(Pe({},n.data),e.data),i?.data),n._resolvedData)}:r={params:Pe({},n.params),data:Pe({},n.data),resolve:Pe(Pe({},n.data),n._resolvedData??{})},i&&Gk(i)&&(r.resolve[cm]=i.title),r}var Pd=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[cm]}constructor(e,t,r,i,o,s,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Nd(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Nd(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},im=class extends C_{url;constructor(e,t){super(t),this.url=e,rC(this,t)}toString(){return Wk(this._root)}};function rC(n,e){e.value._routerState=n,e.children.forEach(t=>rC(n,t))}function Wk(n){let e=n.children.length>0?` { ${n.children.map(Wk).join(", ")} } `:"";return`${n.value}${e}`}function UE(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ga(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Ga(e.params,t.params)||n.paramsSubject.next(t.params),sq(e.url,t.url)||n.urlSubject.next(t.url),Ga(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function QE(n,e){let t=Ga(n.params,e.params)&&uq(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||QE(n.parent,e.parent))}function Gk(n){return typeof n.title=="string"||n.title===null}var Kk=new ct(""),um=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Kt;activateEvents=new Kr;deactivateEvents=new Kr;attachEvents=new Kr;detachEvents=new Kr;routerOutletData=zN();parentContexts=Oe(Cf);location=Oe(Cd);changeDetector=Oe(Dd);inputBinder=Oe(A_,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new et(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new et(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new et(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new et(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new ZE(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Gn({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Uc]})}return n})(),ZE=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Yc?this.route:e===Cf?this.childContexts:e===Kk?this.outletData:this.parent.get(e,t)}},A_=new ct("");var iC=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=sr({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Po(0,"router-outlet")},dependencies:[um],encapsulation:2})}return n})();function oC(n){let e=n.children&&n.children.map(oC),t=e?bt(Pe({},n),{children:e}):Pe({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Kt&&(t.component=iC),t}function Rq(n,e,t){let r=om(n,e._root,t?t._root:void 0);return new rm(r,e)}function om(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=Oq(n,e,t);return new cs(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>om(n,a)),s}}let r=Lq(e.value),i=e.children.map(o=>om(n,o));return new cs(r,i)}}function Oq(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return om(n,r,i);return om(n,r)})}function Lq(n){return new Yc(new Di(n.url),new Di(n.params),new Di(n.queryParams),new Di(n.fragment),new Di(n.data),n.outlet,n.component,n)}var bf=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},Yk="ngNavigationCancelingError";function S_(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=cu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Qk(!1,ho.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function Qk(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[Yk]=!0,t.cancellationCode=e,t}function Fq(n){return Zk(n)&&cu(n.url)}function Zk(n){return!!n&&n[Yk]}var Vq=(n,e,t,r)=>mn(i=>(new JE(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),JE=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),UE(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=mf(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=mf(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=mf(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=mf(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new I_(o.value.snapshot))}),e.children.length&&this.forwardEvent(new w_(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(UE(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),UE(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},D_=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},yf=class{component;route;constructor(e,t){this.component=e,this.route=t}};function jq(n,e,t){let r=n._root,i=e?e._root:null;return Yg(r,i,t,[r.value])}function Bq(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function xf(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!y2(n)?n:e.get(n):r}function Yg(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=mf(e);return n.children.forEach(s=>{Uq(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Jg(a,t.getContext(s),i)),i}function Uq(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=zq(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new D_(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Yg(n,e,a?a.children:null,r,i):Yg(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new yf(a.outlet.component,s))}else s&&Jg(e,a,i),i.canActivateChecks.push(new D_(r)),o.component?Yg(n,null,a?a.children:null,r,i):Yg(n,null,t,r,i);return i}function zq(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Md(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Md(n.url,e.url)||!Ga(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!QE(n,e)||!Ga(n.queryParams,e.queryParams);case"paramsChange":default:return!QE(n,e)}}function Jg(n,e,t){let r=mf(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Jg(s,e.children.getContext(o),t):Jg(s,null,t):Jg(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new yf(e.outlet.component,i)):t.canDeactivateChecks.push(new yf(null,i)):t.canDeactivateChecks.push(new yf(null,i))}function dm(n){return typeof n=="function"}function qq(n){return typeof n=="boolean"}function Hq(n){return n&&dm(n.canLoad)}function $q(n){return n&&dm(n.canActivate)}function Wq(n){return n&&dm(n.canActivateChild)}function Gq(n){return n&&dm(n.canDeactivate)}function Kq(n){return n&&dm(n.canMatch)}function Jk(n){return n instanceof ta||n?.name==="EmptyError"}var a_=Symbol("INITIAL_VALUE");function If(){return Do(n=>Rv(n.map(e=>e.pipe(As(1),n2(a_)))).pipe(mn(e=>{for(let t of e)if(t!==!0){if(t===a_)return a_;if(t===!1||Yq(t))return t}return!0}),Ts(e=>e!==a_),As(1)))}function Yq(n){return cu(n)||n instanceof bf}function Qq(n,e){return ci(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?qt(bt(Pe({},t),{guardsResult:!0})):Zq(s,r,i,n).pipe(ci(a=>a&&qq(a)?Jq(r,o,n,e):qt(a)),mn(a=>bt(Pe({},t),{guardsResult:a})))})}function Zq(n,e,t,r){return _r(n).pipe(ci(i=>rH(i.component,i.route,t,e,r)),Rc(i=>i!==!0,!0))}function Jq(n,e,t,r){return _r(e).pipe(Wh(i=>$h(eH(i.route.parent,r),Xq(i.route,r),nH(n,i.path,t),tH(n,i.route,t))),Rc(i=>i!==!0,!0))}function Xq(n,e){return n!==null&&e&&e(new b_(n)),qt(!0)}function eH(n,e){return n!==null&&e&&e(new __(n)),qt(!0)}function tH(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return qt(!0);let i=r.map(o=>tg(()=>{let s=Ef(e)??t,a=xf(o,s),c=$q(a)?a.canActivate(e,n):wr(s,()=>a(e,n));return Qc(c).pipe(Rc())}));return qt(i).pipe(If())}function nH(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>Bq(s)).filter(s=>s!==null).map(s=>tg(()=>{let a=s.guards.map(c=>{let l=Ef(s.node)??t,u=xf(c,l),g=Wq(u)?u.canActivateChild(r,n):wr(l,()=>u(r,n));return Qc(g).pipe(Rc())});return qt(a).pipe(If())}));return qt(o).pipe(If())}function rH(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return qt(!0);let s=o.map(a=>{let c=Ef(e)??i,l=xf(a,c),u=Gq(l)?l.canDeactivate(n,e,t,r):wr(c,()=>l(n,e,t,r));return Qc(u).pipe(Rc())});return qt(s).pipe(If())}function iH(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return qt(!0);let o=i.map(s=>{let a=xf(s,n),c=Hq(a)?a.canLoad(e,t):wr(n,()=>a(e,t));return Qc(c)});return qt(o).pipe(If(),Xk(r))}function Xk(n){return Hb(hi(e=>{if(typeof e!="boolean")throw S_(n,e)}),mn(e=>e===!0))}function oH(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return qt(!0);let o=i.map(s=>{let a=xf(s,n),c=Kq(a)?a.canMatch(e,t):wr(n,()=>a(e,t));return Qc(c)});return qt(o).pipe(If(),Xk(r))}var sm=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},am=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function gf(n){return Hh(new sm(n))}function sH(n){return Hh(new et(4e3,!1))}function aH(n){return Hh(Qk(!1,ho.GuardRejected))}var XE=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return qt(r);if(i.numberOfChildren>1||!i.children[Kt])return sH(`${e.redirectTo}`);i=i.children[Kt]}}applyRedirectCommands(e,t,r,i,o){return cH(t,i,o).pipe(mn(s=>{if(s instanceof Ya)throw new am(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new am(a);return a}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Ya(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new Tn(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new et(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function cH(n,e,t){if(typeof n=="string")return qt(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:l,data:u,title:g}=e;return Qc(wr(t,()=>r({params:l,data:u,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:g})))}var eC={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function lH(n,e,t,r,i){let o=eR(n,e,t);return o.matched?(r=Pq(e,r),oH(r,e,t,i).pipe(mn(s=>s===!0?o:Pe({},eC)))):qt(o)}function eR(n,e,t){if(e.path==="**")return uH(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?Pe({},eC):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Ak)(t,n,e);if(!i)return Pe({},eC);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?Pe(Pe({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function uH(n){return{matched:!0,parameters:n.length>0?Pk(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function Sk(n,e,t,r){return t.length>0&&fH(n,t,r)?{segmentGroup:new Tn(e,hH(r,new Tn(t,n.children))),slicedSegments:[]}:t.length===0&&pH(n,t,r)?{segmentGroup:new Tn(n.segments,dH(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Tn(n.segments,n.children),slicedSegments:t}}function dH(n,e,t,r){let i={};for(let o of t)if(M_(n,e,o)&&!r[ua(o)]){let s=new Tn([],{});i[ua(o)]=s}return Pe(Pe({},r),i)}function hH(n,e){let t={};t[Kt]=e;for(let r of n)if(r.path===""&&ua(r)!==Kt){let i=new Tn([],{});t[ua(r)]=i}return t}function fH(n,e,t){return t.some(r=>M_(n,e,r)&&ua(r)!==Kt)}function pH(n,e,t){return t.some(r=>M_(n,e,r))}function M_(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function gH(n,e,t){return e.length===0&&!n.children[t]}var tC=class{};function mH(n,e,t,r,i,o,s="emptyOnly"){return new nC(n,e,t,r,i,s,o).recognize()}var vH=31,nC=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new XE(this.urlSerializer,this.urlTree)}noMatchError(e){return new et(4002,`'${e.segmentGroup}'`)}recognize(){let e=Sk(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(mn(({children:t,rootSnapshot:r})=>{let i=new cs(r,t),o=new im("",i),s=Bk(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Pd([],Object.freeze({}),Object.freeze(Pe({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Kt,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Kt,t).pipe(mn(r=>({children:r,rootSnapshot:t})),$l(r=>{if(r instanceof am)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof sm?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(mn(s=>s instanceof cs?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return _r(o).pipe(Wh(s=>{let a=r.children[s],c=Nq(t,s);return this.processSegmentGroup(e,c,a,s,i)}),t2((s,a)=>(s.push(...a),s)),Wl(null),e2(),ci(s=>{if(s===null)return gf(r);let a=tR(s);return yH(a),qt(a)}))}processSegment(e,t,r,i,o,s,a){return _r(t).pipe(Wh(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe($l(l=>{if(l instanceof sm)return qt(null);throw l}))),Rc(c=>!!c),$l(c=>{if(Jk(c))return gH(r,i,o)?qt(new tC):gf(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return ua(r)!==s&&(s===Kt||!M_(i,o,r))?gf(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):gf(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:g,remainingSegments:v}=eR(t,i,o);if(!c)return gf(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>vH&&(this.allowRedirects=!1));let p=new Pd(o,l,Object.freeze(Pe({},this.urlTree.queryParams)),this.urlTree.fragment,Dk(i),ua(i),i.component??i._loadedComponent??null,i,Tk(i)),S=x_(p,a,this.paramsInheritanceStrategy);return p.params=Object.freeze(S.params),p.data=Object.freeze(S.data),this.applyRedirects.applyRedirectCommands(u,i.redirectTo,g,p,e).pipe(Do(L=>this.applyRedirects.lineralizeSegments(i,L)),ci(L=>this.processSegment(e,r,t,L.concat(v),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=lH(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Do(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Do(({routes:l})=>{let u=r._loadedInjector??e,{parameters:g,consumedSegments:v,remainingSegments:p}=c,S=new Pd(v,g,Object.freeze(Pe({},this.urlTree.queryParams)),this.urlTree.fragment,Dk(r),ua(r),r.component??r._loadedComponent??null,r,Tk(r)),k=x_(S,s,this.paramsInheritanceStrategy);S.params=Object.freeze(k.params),S.data=Object.freeze(k.data);let{segmentGroup:L,slicedSegments:R}=Sk(t,v,p,l);if(R.length===0&&L.hasChildren())return this.processChildren(u,l,L,S).pipe(mn(X=>new cs(S,X)));if(l.length===0&&R.length===0)return qt(new cs(S,[]));let J=ua(r)===o;return this.processSegment(u,l,L,R,J?Kt:o,!0,S).pipe(mn(X=>new cs(S,X instanceof cs?[X]:[])))}))):gf(t)))}getChildConfig(e,t,r){return t.children?qt({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?qt({routes:t._loadedRoutes,injector:t._loadedInjector}):iH(e,t,r,this.urlSerializer).pipe(ci(i=>i?this.configLoader.loadChildren(e,t).pipe(hi(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):aH(t))):qt({routes:[],injector:e})}};function yH(n){n.sort((e,t)=>e.value.outlet===Kt?-1:t.value.outlet===Kt?1:e.value.outlet.localeCompare(t.value.outlet))}function _H(n){let e=n.value.routeConfig;return e&&e.path===""}function tR(n){let e=[],t=new Set;for(let r of n){if(!_H(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=tR(r.children);e.push(new cs(r.value,i))}return e.filter(r=>!t.has(r))}function Dk(n){return n.data||{}}function Tk(n){return n.resolve||{}}function wH(n,e,t,r,i,o){return ci(s=>mH(n,e,t,r,s.extractedUrl,i,o).pipe(mn(({state:a,tree:c})=>bt(Pe({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function bH(n,e){return ci(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return qt(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of nR(c))s.add(l);let a=0;return _r(s).pipe(Wh(c=>o.has(c)?IH(c,r,n,e):(c.data=x_(c,c.parent,n).resolve,qt(void 0))),hi(()=>a++),Gh(1),ci(c=>a===s.size?qt(t):xo))})}function nR(n){let e=n.children.map(t=>nR(t)).flat();return[n,...e]}function IH(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!Gk(i)&&(o[cm]=i.title),tg(()=>(n.data=x_(n,n.parent,t).resolve,EH(o,n,e,r).pipe(mn(s=>(n._resolvedData=s,n.data=Pe(Pe({},n.data),s),null)))))}function EH(n,e,t,r){let i=HE(n);if(i.length===0)return qt({});let o={};return _r(i).pipe(ci(s=>CH(n[s],e,t,r).pipe(Rc(),hi(a=>{if(a instanceof bf)throw S_(new kd,a);o[s]=a}))),Gh(1),mn(()=>o),$l(s=>Jk(s)?xo:Hh(s)))}function CH(n,e,t,r){let i=Ef(e)??r,o=xf(n,i),s=o.resolve?o.resolve(e,t):wr(i,()=>o(e,t));return Qc(s)}function zE(n){return Do(e=>{let t=n(e);return t?_r(t).pipe(mn(()=>e)):qt(e)})}var sC=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Kt);return r}getResolvedTitleForRoute(t){return t.data[cm]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:()=>Oe(rR),providedIn:"root"})}return n})(),rR=(()=>{class n extends sC{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(Pt(bk))};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Sf=new ct("",{providedIn:"root",factory:()=>({})}),hm=new ct(""),iR=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=Oe(fE);loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return qt(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Qc(wr(t,()=>r.loadComponent())).pipe(mn(sR),Do(aR),hi(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),ng(()=>{this.componentLoaders.delete(r)})),o=new Bh(i,()=>new $r).pipe(jh());return this.componentLoaders.set(r,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return qt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=oR(r,this.compiler,t,this.onLoadEndListener).pipe(ng(()=>{this.childrenLoaders.delete(r)})),s=new Bh(o,()=>new $r).pipe(jh());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function oR(n,e,t,r){return Qc(wr(t,()=>n.loadChildren())).pipe(mn(sR),Do(aR),ci(i=>i instanceof jy||Array.isArray(i)?qt(i):_r(e.compileModuleAsync(i))),mn(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(hm,[],{optional:!0,self:!0}).flat()),{routes:s.map(oC),injector:o}}))}function xH(n){return n&&typeof n=="object"&&"default"in n}function sR(n){return xH(n)?n.default:n}function aR(n){return qt(n)}var P_=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:()=>Oe(SH),providedIn:"root"})}return n})(),SH=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),cR=new ct("");var lR=new ct(""),uR=(()=>{class n{currentNavigation=Os(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new $r;transitionAbortWithErrorSubject=new $r;configLoader=Oe(iR);environmentInjector=Oe(cr);destroyRef=Oe(sa);urlSerializer=Oe(lm);rootContexts=Oe(Cf);location=Oe(pf);inputBindingEnabled=Oe(A_,{optional:!0})!==null;titleStrategy=Oe(sC);options=Oe(Sf,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=Oe(P_);createViewTransition=Oe(cR,{optional:!0});navigationErrorHandler=Oe(lR,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>qt(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new v_(i)),r=i=>this.events.next(new y_(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;pi(()=>{this.transitions?.next(bt(Pe({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(t){return this.transitions=new Di(null),this.transitions.pipe(Ts(r=>r!==null),Do(r=>{let i=!1;return qt(r).pipe(Do(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",ho.SupersededByNewNavigation),xo;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?bt(Pe({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new Kc(o.id,this.urlSerializer.serialize(o.rawUrl),"",em.IgnoredSameUrlNavigation)),o.resolve(!1),xo;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return qt(o).pipe(Do(c=>(this.events.next(new Rd(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?xo:Promise.resolve(c))),wH(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),hi(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation.update(u=>(u.finalUrl=c.urlAfterRedirects,u));let l=new tm(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:c,extractedUrl:l,source:u,restoredState:g,extras:v}=o,p=new Rd(c,this.urlSerializer.serialize(l),u,g);this.events.next(p);let S=$k(this.rootComponentType).snapshot;return this.currentTransition=r=bt(Pe({},o),{targetSnapshot:S,urlAfterRedirects:l,extras:bt(Pe({},v),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(k=>(k.finalUrl=l,k)),qt(r)}else return this.events.next(new Kc(o.id,this.urlSerializer.serialize(o.extractedUrl),"",em.IgnoredByUrlHandlingStrategy)),o.resolve(!1),xo}),hi(o=>{let s=new f_(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),mn(o=>(this.currentTransition=r=bt(Pe({},o),{guards:jq(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),Qq(this.environmentInjector,o=>this.events.next(o)),hi(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw S_(this.urlSerializer,o.guardsResult);let s=new p_(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),Ts(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",ho.GuardRejected),!1)),zE(o=>{if(o.guards.canActivateChecks.length!==0)return qt(o).pipe(hi(s=>{let a=new g_(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Do(s=>{let a=!1;return qt(s).pipe(bH(this.paramsInheritanceStrategy,this.environmentInjector),hi({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",ho.NoDataFromResolver)}}))}),hi(s=>{let a=new m_(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),zE(o=>{let s=a=>{let c=[];if(a.routeConfig?.loadComponent){let l=Ef(a)??this.environmentInjector;c.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(hi(u=>{a.component=u}),mn(()=>{})))}for(let l of a.children)c.push(...s(l));return c};return Rv(s(o.targetSnapshot.root)).pipe(Wl(null),As(1))}),zE(()=>this.afterPreactivation()),Do(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?_r(a).pipe(mn(()=>r)):qt(r)}),mn(o=>{let s=Rq(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=bt(Pe({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),hi(()=>{this.events.next(new nm)}),Vq(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),As(1),Lv(new rn(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(Ts(()=>!i&&!r.targetRouterState),hi(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",ho.Aborted)}))),hi({next:o=>{i=!0,this.lastSuccessfulNavigation=pi(this.currentNavigation),this.events.next(new Qa(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Lv(this.transitionAbortWithErrorSubject.pipe(hi(o=>{throw o}))),ng(()=>{i||this.cancelNavigationTransition(r,"",ho.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),$l(o=>{if(this.destroyed)return r.resolve(!1),xo;if(i=!0,Zk(o))this.events.next(new Ka(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),Fq(o)?this.events.next(new wf(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new _f(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=wr(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof bf){let{message:c,cancellationCode:l}=S_(this.urlSerializer,a);this.events.next(new Ka(r.id,this.urlSerializer.serialize(r.extractedUrl),c,l)),this.events.next(new wf(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return xo}))}))}cancelNavigationTransition(t,r,i){let o=new Ka(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=pi(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function DH(n){return n!==Zg}var dR=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:()=>Oe(TH),providedIn:"root"})}return n})(),T_=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},TH=(()=>{class n extends T_{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Mo(n)))(i||n)}})();static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),hR=(()=>{class n{urlSerializer=Oe(lm);options=Oe(Sf,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=Oe(pf);urlHandlingStrategy=Oe(P_);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Ya;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof Ya?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=$k(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:()=>Oe(AH),providedIn:"root"})}return n})(),AH=(()=>{class n extends hR{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Rd?this.updateStateMemento():t instanceof Kc?this.commitTransition(r):t instanceof tm?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof nm?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Ka&&t.code!==ho.SupersededByNewNavigation&&t.code!==ho.Redirect?this.restoreHistory(r):t instanceof _f?this.restoreHistory(r,!0):t instanceof Qa&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,c=Pe(Pe({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=Pe(Pe({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Mo(n)))(i||n)}})();static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function aC(n,e){n.events.pipe(Ts(t=>t instanceof Qa||t instanceof Ka||t instanceof _f||t instanceof Kc),mn(t=>t instanceof Qa||t instanceof Kc?0:(t instanceof Ka?t.code===ho.Redirect||t.code===ho.SupersededByNewNavigation:!1)?2:1),Ts(t=>t!==2),As(1)).subscribe(()=>{e()})}var MH={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},PH={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},js=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=Oe(aE);stateManager=Oe(hR);options=Oe(Sf,{optional:!0})||{};pendingTasks=Oe(qa);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=Oe(uR);urlSerializer=Oe(lm);location=Oe(pf);urlHandlingStrategy=Oe(P_);injector=Oe(cr);_events=new $r;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=Oe(dR);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=Oe(hm,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!Oe(A_,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Sr;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=pi(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Ka&&r.code!==ho.Redirect&&r.code!==ho.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Qa)this.navigated=!0;else if(r instanceof wf){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=Pe({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||DH(i.source)},s);this.scheduleNavigation(a,Zg,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}Mq(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Zg,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=Pe({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get(lo)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return pi(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(oC),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=Pe(Pe({},this.currentUrlTree.queryParams),o);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}u!==null&&(u=this.removeEmptyProps(u));let g;try{let v=i?i.snapshot:this.routerState.snapshot.root;g=Uk(v)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),g=this.currentUrlTree.root}return zk(g,t,u,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=cu(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Zg,null,r)}navigate(t,r={skipLocationChange:!1}){return NH(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(Yh(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=Pe({},MH):r===!1?i=Pe({},PH):i=r,cu(t))return Ik(this.currentUrlTree,t,i);let o=this.parseUrl(t);return Ik(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((g,v)=>{a=g,c=v});let u=this.pendingTasks.add();return aC(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(g=>Promise.reject(g))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function NH(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new et(4008,!1)}var N_=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Os(null);get href(){return pi(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new $r;applicationErrorHandler=Oe(lo);options=Oe(Sf,{optional:!0});constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(Oe(new Wy("href"),{optional:!0}));let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Qa&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(cu(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:cu(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(Xe(js),Xe(Yc),Mg("tabindex"),Xe(zc),Xe(Wa),Xe(ff))};static \u0275dir=Gn({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&xe("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&$c("href",i.reactiveHref(),jI)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Td],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Td],replaceUrl:[2,"replaceUrl","replaceUrl",Td],routerLink:"routerLink"},features:[Uc]})}return n})();var RH=new ct("");function cC(n,...e){return rs([{provide:hm,multi:!0,useValue:n},[],{provide:Yc,useFactory:OH,deps:[js]},{provide:By,multi:!0,useFactory:LH},e.map(t=>t.\u0275providers)])}function OH(n){return n.routerState.root}function LH(){let n=Oe(Gr);return e=>{let t=n.get(Hc);if(e!==t.components[0])return;let r=n.get(js),i=n.get(FH);n.get(VH)===1&&r.initialNavigation(),n.get(jH,null,{optional:!0})?.setUpPreloading(),n.get(RH,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var FH=new ct("",{factory:()=>new $r}),VH=new ct("",{providedIn:"root",factory:()=>1});var jH=new ct("");var pR=()=>{};var vR=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},BH=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},k_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,c=i+2<n.length,l=c?n[i+2]:0,u=o>>2,g=(o&3)<<4|a>>4,v=(a&15)<<2|l>>6,p=l&63;c||(p=64,s||(v=64)),r.push(t[u],t[g],t[v],t[p])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(vR(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):BH(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let g=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||g==null)throw new uC;let v=o<<2|a>>4;if(r.push(v),l!==64){let p=a<<4&240|l>>2;if(r.push(p),g!==64){let S=l<<6&192|g;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},uC=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},UH=function(n){let e=vR(n);return k_.encodeByteArray(e,!0)},pm=function(n){return UH(n).replace(/\./g,"")},R_=function(n){try{return k_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function hC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var zH=()=>hC().__FIREBASE_DEFAULTS__,qH=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},HH=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&R_(n[1]);return e&&JSON.parse(e)},O_=()=>{try{return pR()||zH()||qH()||HH()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},fC=n=>{var e,t;return(t=(e=O_())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},yR=n=>{let e=fC(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},pC=()=>{var n;return(n=O_())===null||n===void 0?void 0:n.config},gC=n=>{var e;return(e=O_())===null||e===void 0?void 0:e[`_${n}`]};var Od=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function lu(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function L_(n){return B(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function _R(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[pm(JSON.stringify(t)),pm(JSON.stringify(s)),""].join(".")}var fm={};function $H(){let n={prod:[],emulator:[]};for(let e of Object.keys(fm))fm[e]?n.emulator.push(e):n.prod.push(e);return n}function WH(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var gR=!1;function F_(n,e){if(typeof window>"u"||typeof document>"u"||!lu(window.location.host)||fm[n]===e||fm[n]||gR)return;fm[n]=e;function t(v){return`__firebase__banner__${v}`}let r="__firebase__banner",o=$H().prod.length>0;function s(){let v=document.getElementById(r);v&&v.remove()}function a(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function c(v,p){v.setAttribute("width","24"),v.setAttribute("id",p),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function l(){let v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{gR=!0,s()},v}function u(v,p){v.setAttribute("id",p),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function g(){let v=WH(r),p=t("text"),S=document.getElementById(p)||document.createElement("span"),k=t("learnmore"),L=document.getElementById(k)||document.createElement("a"),R=t("preprendIcon"),J=document.getElementById(R)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){let X=v.element;a(X),u(L,k);let Z=l();c(J,R),X.append(J,S,L,Z),document.body.appendChild(X)}o?(S.innerText="Preview backend disconnected.",J.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(J.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}function mi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mi())}function GH(){var n;let e=(n=O_())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function IR(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function ER(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function CR(){let n=mi();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function xR(){return!GH()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gm(){try{return typeof indexedDB=="object"}catch{return!1}}function SR(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var KH="FirebaseError",us=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=KH,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,da.prototype.create)}},da=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?YH(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new us(i,a,r)}};function YH(n,e){return n.replace(QH,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var QH=/\{\$([^}]+)}/g;function DR(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Za(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(mR(o)&&mR(s)){if(!Za(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function mR(n){return n!==null&&typeof n=="object"}function mm(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Df(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Tf(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function TR(n,e){let t=new dC(n,e);return t.subscribe.bind(t)}var dC=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");ZH(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=lC),i.error===void 0&&(i.error=lC),i.complete===void 0&&(i.complete=lC);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function ZH(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function lC(){}var mwe=14400*1e3;function Vr(n){return n&&n._delegate?n._delegate:n}var fo=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ld="[DEFAULT]";var mC=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Od;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(XH(e))try{this.getOrInitializeService({instanceIdentifier:Ld})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Ld){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return B(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Ld){return this.instances.has(e)}getOptions(e=Ld){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:JH(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ld){return this.component?this.component.multipleInstances?e:Ld:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function JH(n){return n===Ld?void 0:n}function XH(n){return n.instantiationMode==="EAGER"}var V_=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new mC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var e$=[],fn=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(fn||{}),t$={debug:fn.DEBUG,verbose:fn.VERBOSE,info:fn.INFO,warn:fn.WARN,error:fn.ERROR,silent:fn.SILENT},n$=fn.INFO,r$={[fn.DEBUG]:"log",[fn.VERBOSE]:"log",[fn.INFO]:"info",[fn.WARN]:"warn",[fn.ERROR]:"error"},i$=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=r$[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Ja=class{constructor(e){this.name=e,this._logLevel=n$,this._logHandler=i$,this._userLogHandler=null,e$.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in fn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?t$[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,fn.DEBUG,...e),this._logHandler(this,fn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,fn.VERBOSE,...e),this._logHandler(this,fn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,fn.INFO,...e),this._logHandler(this,fn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,fn.WARN,...e),this._logHandler(this,fn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,fn.ERROR,...e),this._logHandler(this,fn.ERROR,...e)}};var o$=(n,e)=>e.some(t=>n instanceof t),AR,MR;function s$(){return AR||(AR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function a$(){return MR||(MR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var PR=new WeakMap,yC=new WeakMap,NR=new WeakMap,vC=new WeakMap,wC=new WeakMap;function c$(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(Xa(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&PR.set(t,n)}).catch(()=>{}),wC.set(e,n),e}function l$(n){if(yC.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});yC.set(n,e)}var _C={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return yC.get(n);if(e==="objectStoreNames")return n.objectStoreNames||NR.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Xa(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function kR(n){_C=n(_C)}function u$(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(j_(this),e,...t);return NR.set(r,e.sort?e.sort():[e]),Xa(r)}:a$().includes(n)?function(...e){return n.apply(j_(this),e),Xa(PR.get(this))}:function(...e){return Xa(n.apply(j_(this),e))}}function d$(n){return typeof n=="function"?u$(n):(n instanceof IDBTransaction&&l$(n),o$(n,s$())?new Proxy(n,_C):n)}function Xa(n){if(n instanceof IDBRequest)return c$(n);if(vC.has(n))return vC.get(n);let e=d$(n);return e!==n&&(vC.set(n,e),wC.set(e,n)),e}var j_=n=>wC.get(n);function OR(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=Xa(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Xa(s.result),c.oldVersion,c.newVersion,Xa(s.transaction),c)}),t&&s.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var h$=["get","getKey","getAll","getAllKeys","count"],f$=["put","add","delete","clear"],bC=new Map;function RR(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(bC.get(e))return bC.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=f$.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||h$.includes(t)))return;let o=function(s,...a){return B(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&c.done]))[0]})};return bC.set(e,o),o}kR(n=>bt(Pe({},n),{get:(e,t,r)=>RR(e,t)||n.get(e,t,r),has:(e,t)=>!!RR(e,t)||n.has(e,t)}));var EC=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(p$(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function p$(n){let e=n.getComponent();return e?.type==="VERSION"}var CC="@firebase/app",LR="0.13.2";var Zc=new Ja("@firebase/app"),g$="@firebase/app-compat",m$="@firebase/analytics-compat",v$="@firebase/analytics",y$="@firebase/app-check-compat",_$="@firebase/app-check",w$="@firebase/auth",b$="@firebase/auth-compat",I$="@firebase/database",E$="@firebase/data-connect",C$="@firebase/database-compat",x$="@firebase/functions",S$="@firebase/functions-compat",D$="@firebase/installations",T$="@firebase/installations-compat",A$="@firebase/messaging",M$="@firebase/messaging-compat",P$="@firebase/performance",N$="@firebase/performance-compat",k$="@firebase/remote-config",R$="@firebase/remote-config-compat",O$="@firebase/storage",L$="@firebase/storage-compat",F$="@firebase/firestore",V$="@firebase/ai",j$="@firebase/firestore-compat",B$="firebase",U$="11.10.0";var xC="[DEFAULT]",z$={[CC]:"fire-core",[g$]:"fire-core-compat",[v$]:"fire-analytics",[m$]:"fire-analytics-compat",[_$]:"fire-app-check",[y$]:"fire-app-check-compat",[w$]:"fire-auth",[b$]:"fire-auth-compat",[I$]:"fire-rtdb",[E$]:"fire-data-connect",[C$]:"fire-rtdb-compat",[x$]:"fire-fn",[S$]:"fire-fn-compat",[D$]:"fire-iid",[T$]:"fire-iid-compat",[A$]:"fire-fcm",[M$]:"fire-fcm-compat",[P$]:"fire-perf",[N$]:"fire-perf-compat",[k$]:"fire-rc",[R$]:"fire-rc-compat",[O$]:"fire-gcs",[L$]:"fire-gcs-compat",[F$]:"fire-fst",[j$]:"fire-fst-compat",[V$]:"fire-vertex","fire-js":"fire-js",[B$]:"fire-js-all"};var vm=new Map,q$=new Map,SC=new Map;function FR(n,e){try{n.container.addComponent(e)}catch(t){Zc.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ha(n){let e=n.name;if(SC.has(e))return Zc.debug(`There were multiple attempts to register component ${e}.`),!1;SC.set(e,n);for(let t of vm.values())FR(t,n);for(let t of q$.values())FR(t,n);return!0}function Af(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Ro(n){return n==null?!1:n.settings!==void 0}var H$={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},uu=new da("app","Firebase",H$);var DC=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new fo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw uu.create("app-deleted",{appName:this._name})}};var du=U$;function MC(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:xC,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw uu.create("bad-app-name",{appName:String(i)});if(t||(t=pC()),!t)throw uu.create("no-options");let o=vm.get(i);if(o){if(Za(t,o.options)&&Za(r,o.config))return o;throw uu.create("duplicate-app",{appName:i})}let s=new V_(i);for(let c of SC.values())s.addComponent(c);let a=new DC(t,r,s);return vm.set(i,a),a}function Fd(n=xC){let e=vm.get(n);if(!e&&n===xC&&pC())return MC();if(!e)throw uu.create("no-app",{appName:n});return e}function B_(){return Array.from(vm.values())}function Tr(n,e,t){var r;let i=(r=z$[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zc.warn(a.join(" "));return}ha(new fo(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var $$="firebase-heartbeat-database",W$=1,ym="firebase-heartbeat-store",IC=null;function UR(){return IC||(IC=OR($$,W$,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ym)}catch(t){console.warn(t)}}}}).catch(n=>{throw uu.create("idb-open",{originalErrorMessage:n.message})})),IC}function G$(n){return B(this,null,function*(){try{let t=(yield UR()).transaction(ym),r=yield t.objectStore(ym).get(zR(n));return yield t.done,r}catch(e){if(e instanceof us)Zc.warn(e.message);else{let t=uu.create("idb-get",{originalErrorMessage:e?.message});Zc.warn(t.message)}}})}function VR(n,e){return B(this,null,function*(){try{let r=(yield UR()).transaction(ym,"readwrite");yield r.objectStore(ym).put(e,zR(n)),yield r.done}catch(t){if(t instanceof us)Zc.warn(t.message);else{let r=uu.create("idb-set",{originalErrorMessage:t?.message});Zc.warn(r.message)}}})}function zR(n){return`${n.name}!${n.options.appId}`}var K$=1024,Y$=30,TC=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new AC(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return B(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=jR();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>Y$){let s=Z$(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Zc.warn(r)}})}getHeartbeatsHeader(){return B(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=jR(),{heartbeatsToSend:r,unsentEntries:i}=Q$(this._heartbeatsCache.heartbeats),o=pm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Zc.warn(t),""}})}};function jR(){return new Date().toISOString().substring(0,10)}function Q$(n,e=K$){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),BR(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),BR(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var AC=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return B(this,null,function*(){return gm()?SR().then(()=>!0).catch(()=>!1):!1})}read(){return B(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield G$(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return B(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return VR(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return B(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return VR(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function BR(n){return pm(JSON.stringify({version:2,heartbeats:n})).length}function Z$(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function J$(n){ha(new fo("platform-logger",e=>new EC(e),"PRIVATE")),ha(new fo("heartbeat",e=>new TC(e),"PRIVATE")),Tr(CC,LR,n),Tr(CC,LR,"esm2017"),Tr("fire-js","")}J$("");var X$="firebase",eW="11.10.0";Tr(X$,eW,"app");function qR(n){n===void 0&&(n=Oe(Gr));let e=n.get(rf);return t=>new rn(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:c=>{r.next(c),s()},complete:()=>{r.complete(),s()},error:c=>{r.error(c),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var hu=new sd("ANGULARFIRE2_VERSION");function _m(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Pf=(n,e)=>{let t=e?[e]:B_(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Mf=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(Mf||{}),HR=IE()&&typeof Zone<"u"?Mf.WARN:Mf.SILENT;var U_=class{zone;delegate;constructor(e,t=Qb){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},fu=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=Oe(Rn);this.outsideAngular=t.runOutsideAngular(()=>new U_(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new U_(typeof Zone>"u"?void 0:Zone.current,Yb))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$R=!1;function tW(n,e){!$R&&(HR>Mf.SILENT||IE())&&($R=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),HR>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function nW(n){let e=Oe(Rn,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Vd(n){let e=Oe(Rn,{optional:!0});return e?e.run(()=>n()):n()}var rW=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),wr(t,()=>Vd(()=>n.apply(void 0,r)))),ur=(n,e,t)=>(t||=e?Mf.WARN:Mf.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=Oe(fu),s=Oe(rf),a=Oe(cr)}catch{return tW(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=Vd(()=>s.add())),i[l]=rW(i[l],r,a));let c=nW(()=>n.apply(this,i));return e?c instanceof rn?c.pipe(Hl(o.outsideAngular),ql(o.insideAngular),qR(a)):c instanceof Promise?Vd(()=>{let l=s.add();return new Promise((u,g)=>{c.then(v=>wr(a,()=>Vd(()=>u(v))),v=>wr(a,()=>Vd(()=>g(v)))).finally(l)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:Vd(()=>c):c instanceof rn?c.pipe(Hl(o.outsideAngular),ql(o.insideAngular)):Vd(()=>c)});var Jc=class{constructor(e){return e}},jd=class{constructor(){return B_()}};function iW(n){return n&&n.length===1?n[0]:new Jc(Fd())}var PC=new ct("angularfire2._apps"),oW={provide:Jc,useFactory:iW,deps:[[new os,PC]]},sW={provide:jd,deps:[[new os,PC]]};function aW(n){return(e,t)=>{let r=t.get(Id);Tr("angularfire",hu.full,"core"),Tr("angularfire",hu.full,"app"),Tr("angular",g2.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Jc(i)}}function WR(n,...e){return rs([oW,sW,{provide:PC,useFactory:aW(n),multi:!0,deps:[Rn,Gr,fu,...e]}])}var GR=ur(MC,!0);var cW=new Map,lW={activated:!1,tokenObservers:[]},uW={initialized:!1,enabled:!1};function fa(n){return cW.get(n)||Object.assign({},lW)}function ZR(){return uW}var dW="https://content-firebaseappcheck.googleapis.com/v1";var hW="exchangeDebugToken",KR={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},_be=1440*60*1e3;var RC=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return B(this,null,function*(){this.stop();try{this.pending=new Od,this.pending.promise.catch(t=>{}),yield fW(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Od,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function fW(n){return new Promise(e=>{setTimeout(e,n)})}var pW={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},pu=new da("appCheck","AppCheck",pW);function JR(n){if(!fa(n).activated)throw pu.create("use-before-activation",{appName:n.name})}function XR(r,i){return B(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let p=yield s.getHeartbeatsHeader();p&&(o["X-Firebase-Client"]=p)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(p){throw pu.create("fetch-network-error",{originalErrorMessage:p?.message})}if(c.status!==200)throw pu.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(p){throw pu.create("fetch-parse-error",{originalErrorMessage:p?.message})}let u=l.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw pu.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let g=Number(u[1])*1e3,v=Date.now();return{token:l.token,expireTimeMillis:v+g,issuedAtTimeMillis:v}})}function eO(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${dW}/projects/${t}/apps/${r}:${hW}?key=${i}`,body:{debug_token:e}}}var gW="firebase-app-check-database",mW=1,OC="firebase-app-check-store";var z_=null;function vW(){return z_||(z_=new Promise((n,e)=>{try{let t=indexedDB.open(gW,mW);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(pu.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(OC,{keyPath:"compositeKey"})}}}catch(t){e(pu.create("storage-open",{originalErrorMessage:t?.message}))}}),z_)}function yW(n,e){return _W(wW(n),e)}function _W(n,e){return B(this,null,function*(){let r=(yield vW()).transaction(OC,"readwrite"),o=r.objectStore(OC).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(pu.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function wW(n){return`${n.options.appId}-${n.name}`}var wm=new Ja("@firebase/app-check");function NC(n,e){return gm()?yW(n,e).catch(t=>{wm.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function tO(){return ZR().enabled}function nO(){return B(this,null,function*(){let n=ZR();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var bW={error:"UNKNOWN_ERROR"};function IW(n){return k_.encodeString(JSON.stringify(n),!1)}function LC(n,e=!1,t=!1){return B(this,null,function*(){let r=n.app;JR(r);let i=fa(r),o=i.token,s;if(o&&!bm(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(bm(l)?o=l:yield NC(r,void 0))}if(!e&&o&&bm(o))return{token:o.token};let a=!1;if(tO())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=XR(eO(r,yield nO()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield NC(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?wm.warn(l.message):t&&wm.error(l),kC(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield fa(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?wm.warn(l.message):t&&wm.error(l),s=l}let c;return o?s?bm(o)?c={token:o.token,internalError:s}:c=kC(s):(c={token:o.token},i.token=o,yield NC(r,o)):c=kC(s),a&&SW(r,c),c})}function EW(n){return B(this,null,function*(){let e=n.app;JR(e);let{provider:t}=fa(e);if(tO()){let r=yield nO(),{token:i}=yield XR(eO(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function CW(n,e,t,r){let{app:i}=n,o=fa(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&bm(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),YR(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>YR(n))}function rO(n,e){let t=fa(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function YR(n){let{app:e}=n,t=fa(e),r=t.tokenRefresher;r||(r=xW(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function xW(n){let{app:e}=n;return new RC(()=>B(null,null,function*(){let t=fa(e),r;if(t.token?r=yield LC(n,!0):r=yield LC(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=fa(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},KR.RETRIAL_MIN_WAIT,KR.RETRIAL_MAX_WAIT)}function SW(n,e){let t=fa(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function bm(n){return n.expireTimeMillis-Date.now()>0}function kC(n){return{token:IW(bW),error:n}}var FC=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=fa(this.app);for(let t of e)rO(this.app,t.next);return Promise.resolve()}};function DW(n,e){return new FC(n,e)}function TW(n){return{getToken:e=>LC(n,e),getLimitedUseToken:()=>EW(n),addTokenListener:e=>CW(n,"INTERNAL",e),removeTokenListener:e=>rO(n.app,e)}}var AW="@firebase/app-check",MW="0.10.1";var PW="app-check",QR="app-check-internal";function NW(){ha(new fo(PW,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return DW(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(QR).initialize()})),ha(new fo(QR,n=>{let e=n.getProvider("app-check").getImmediate();return TW(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Tr(AW,MW)}NW();var kW="app-check";var Nf=class{constructor(){return Pf(kW)}};var RW=["localhost","0.0.0.0","127.0.0.1"],Nbe=typeof window<"u"&&RW.includes(window.location.hostname);function _O(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var wO=_O,bO=new da("auth","Firebase",_O());var K_=new Ja("@firebase/auth");function OW(n,...e){K_.logLevel<=fn.WARN&&K_.warn(`Auth (${du}): ${n}`,...e)}function H_(n,...e){K_.logLevel<=fn.ERROR&&K_.error(`Auth (${du}): ${n}`,...e)}function tc(n,...e){throw cx(n,...e)}function Bd(n,...e){return cx(n,...e)}function IO(n,e,t){let r=Object.assign(Object.assign({},wO()),{[e]:t});return new da("auth","Firebase",r).create(e,{appName:n.name})}function tl(n){return IO(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cx(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return bO.create(n,...e)}function Ft(n,e,...t){if(!n)throw cx(e,...t)}function Xc(n){let e="INTERNAL ASSERTION FAILED: "+n;throw H_(e),new Error(e)}function vu(n,e){n||Xc(e)}function UC(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function LW(){return iO()==="http:"||iO()==="https:"}function iO(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function FW(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(LW()||IR()||"connection"in navigator)?navigator.onLine:!0}function VW(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Ud=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,vu(t>e,"Short delay should be less than long delay!"),this.isMobile=wR()||ER()}get(){return FW()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function lx(n,e){vu(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Y_=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xc("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xc("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xc("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var jW={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var BW=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],UW=new Ud(3e4,6e4);function yu(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function _u(o,s,a,c){return B(this,arguments,function*(n,e,t,r,i={}){return EO(n,i,()=>B(null,null,function*(){let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});let g=mm(Object.assign({key:n.config.apiKey},u)).slice(1),v=yield n._getAdditionalHeaders();v["Content-Type"]="application/json",n.languageCode&&(v["X-Firebase-Locale"]=n.languageCode);let p=Object.assign({method:e,headers:v},l);return bR()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&lu(n.emulatorConfig.host)&&(p.credentials="include"),Y_.fetch()(yield CO(n,n.config.apiHost,t,g),p)}))})}function EO(n,e,t){return B(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},jW),e);try{let i=new zC(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw q_(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw q_(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw q_(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw q_(n,"user-disabled",s);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw IO(n,u,l);tc(n,u)}}catch(i){if(i instanceof us)throw i;tc(n,"network-request-failed",{message:String(i)})}})}function Mm(o,s,a,c){return B(this,arguments,function*(n,e,t,r,i={}){let l=yield _u(n,e,t,r,i);return"mfaPendingCredential"in l&&tc(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function CO(n,e,t,r){return B(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?lx(n.config,i):`${n.config.apiScheme}://${i}`;return BW.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function zW(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var zC=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Bd(this.auth,"network-request-failed")),UW.get())})}};function q_(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Bd(n,e,r);return i.customData._tokenResponse=t,i}function oO(n){return n!==void 0&&n.enterprise!==void 0}var qC=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return zW(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function qW(n,e){return B(this,null,function*(){return _u(n,"GET","/v2/recaptchaConfig",yu(n,e))})}function HW(n,e){return B(this,null,function*(){return _u(n,"POST","/v1/accounts:delete",e)})}function Q_(n,e){return B(this,null,function*(){return _u(n,"POST","/v1/accounts:lookup",e)})}function Em(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function ux(n,e=!1){return B(this,null,function*(){let t=Vr(n),r=yield t.getIdToken(e),i=dx(r);Ft(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Em(VC(i.auth_time)),issuedAtTime:Em(VC(i.iat)),expirationTime:Em(VC(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function VC(n){return Number(n)*1e3}function dx(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return H_("JWT malformed, contained fewer than 3 sections"),null;try{let i=R_(t);return i?JSON.parse(i):(H_("Failed to decode base64 JWT payload"),null)}catch(i){return H_("Caught error parsing JWT payload as JSON",i?.toString()),null}}function sO(n){let e=dx(n);return Ft(e,"internal-error"),Ft(typeof e.exp<"u","internal-error"),Ft(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function xm(n,e,t=!1){return B(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof us&&$W(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function $W({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var HC=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>B(this,null,function*(){yield this.iteration()}),t)}iteration(){return B(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Sm=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Em(this.lastLoginAt),this.creationTime=Em(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Z_(n){return B(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield xm(n,Q_(t,{idToken:r}));Ft(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?xO(o.providerUserInfo):[],a=WW(n.providerData,s),c=n.isAnonymous,l=!(n.email&&o.passwordHash)&&!a?.length,u=c?l:!1,g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Sm(o.createdAt,o.lastLoginAt),isAnonymous:u};Object.assign(n,g)})}function hx(n){return B(this,null,function*(){let e=Vr(n);yield Z_(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function WW(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function xO(n){return n.map(e=>{var{providerId:t}=e,r=Zb(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function GW(n,e){return B(this,null,function*(){let t=yield EO(n,{},()=>B(null,null,function*(){let r=mm({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield CO(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&lu(n.emulatorConfig.host)&&(c.credentials="include"),Y_.fetch()(s,c)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function KW(n,e){return B(this,null,function*(){return _u(n,"POST","/v2/accounts:revokeToken",yu(n,e))})}var Cm=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ft(e.idToken,"internal-error"),Ft(typeof e.idToken<"u","internal-error"),Ft(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):sO(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ft(e.length!==0,"internal-error");let t=sO(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return B(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ft(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return B(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield GW(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(Ft(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(Ft(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(Ft(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Xc("not implemented")}};function gu(n,e){Ft(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var mu=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Zb(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new HC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Sm(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return B(this,null,function*(){let t=yield xm(this,this.stsTokenManager.getToken(this.auth,e));return Ft(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return ux(this,e)}reload(){return hx(this)}_assign(e){this!==e&&(Ft(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ft(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return B(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Z_(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return B(this,null,function*(){if(Ro(this.auth.app))return Promise.reject(tl(this.auth));let e=yield this.getIdToken();return yield xm(this,HW(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,c,l,u;let g=(r=t.displayName)!==null&&r!==void 0?r:void 0,v=(i=t.email)!==null&&i!==void 0?i:void 0,p=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,S=(s=t.photoURL)!==null&&s!==void 0?s:void 0,k=(a=t.tenantId)!==null&&a!==void 0?a:void 0,L=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,R=(l=t.createdAt)!==null&&l!==void 0?l:void 0,J=(u=t.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:X,emailVerified:Z,isAnonymous:me,providerData:be,stsTokenManager:$}=t;Ft(X&&$,e,"internal-error");let P=Cm.fromJSON(this.name,$);Ft(typeof X=="string",e,"internal-error"),gu(g,e.name),gu(v,e.name),Ft(typeof Z=="boolean",e,"internal-error"),Ft(typeof me=="boolean",e,"internal-error"),gu(p,e.name),gu(S,e.name),gu(k,e.name),gu(L,e.name),gu(R,e.name),gu(J,e.name);let D=new n({uid:X,auth:e,email:v,emailVerified:Z,displayName:g,isAnonymous:me,photoURL:S,phoneNumber:p,tenantId:k,stsTokenManager:P,createdAt:R,lastLoginAt:J});return be&&Array.isArray(be)&&(D.providerData=be.map(U=>Object.assign({},U))),L&&(D._redirectEventId=L),D}static _fromIdTokenResponse(e,t,r=!1){return B(this,null,function*(){let i=new Cm;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Z_(o),o})}static _fromGetAccountInfoResponse(e,t,r){return B(this,null,function*(){let i=t.users[0];Ft(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?xO(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Cm;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Sm(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,l),c})}};var aO=new Map;function el(n){vu(n instanceof Function,"Expected a class definition");let e=aO.get(n);return e?(vu(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,aO.set(n,e),e)}var YW=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return B(this,null,function*(){return!0})}_set(t,r){return B(this,null,function*(){this.storage[t]=r})}_get(t){return B(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return B(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),$C=YW;function $_(n,e,t){return`firebase:${n}:${e}:${t}`}var J_=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=$_(this.userKey,i.apiKey,o),this.fullPersistenceKey=$_("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return B(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield Q_(this.auth,{idToken:e}).catch(()=>{});return t?mu._fromGetAccountInfoResponse(this.auth,t,e):null}return mu._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return B(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return B(this,null,function*(){if(!t.length)return new n(el($C),e,r);let i=(yield Promise.all(t.map(l=>B(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||el($C),s=$_(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let u=yield l._get(s);if(u){let g;if(typeof u=="string"){let v=yield Q_(e,{idToken:u}).catch(()=>{});if(!v)break;g=yield mu._fromGetAccountInfoResponse(e,v,u)}else g=mu._fromJSON(e,u);l!==o&&(a=g),o=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new n(o,e,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(l=>B(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new n(o,e,r))})}};function cO(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(AO(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(SO(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(PO(e))return"Blackberry";if(NO(e))return"Webos";if(DO(e))return"Safari";if((e.includes("chrome/")||TO(e))&&!e.includes("edge/"))return"Chrome";if(MO(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function SO(n=mi()){return/firefox\//i.test(n)}function DO(n=mi()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function TO(n=mi()){return/crios\//i.test(n)}function AO(n=mi()){return/iemobile/i.test(n)}function MO(n=mi()){return/android/i.test(n)}function PO(n=mi()){return/blackberry/i.test(n)}function NO(n=mi()){return/webos/i.test(n)}function fx(n=mi()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function QW(n=mi()){var e;return fx(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function ZW(){return CR()&&document.documentMode===10}function kO(n=mi()){return fx(n)||MO(n)||NO(n)||PO(n)||/windows phone/i.test(n)||AO(n)}function RO(n,e=[]){let t;switch(n){case"Browser":t=cO(mi());break;case"Worker":t=`${cO(mi())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${du}/${r}`}var WC=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return B(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function JW(t){return B(this,arguments,function*(n,e={}){return _u(n,"GET","/v2/passwordPolicy",yu(n,e))})}var XW=6,GC=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:XW,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var KC=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new X_(this),this.idTokenSubscription=new X_(this),this.beforeStateQueue=new WC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bO,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=el(t)),this._initializationPromise=this.queue(()=>B(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield J_.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return B(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return B(this,null,function*(){try{let t=yield Q_(this,{idToken:e}),r=yield mu._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return B(this,null,function*(){var t;if(Ro(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ft(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return B(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return B(this,null,function*(){try{yield Z_(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=VW()}_delete(){return B(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return B(this,null,function*(){if(Ro(this.app))return Promise.reject(tl(this));let t=e?Vr(e):null;return t&&Ft(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return B(this,null,function*(){if(!this._deleted)return e&&Ft(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>B(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return B(this,null,function*(){return Ro(this.app)?Promise.reject(tl(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Ro(this.app)?Promise.reject(tl(this)):this.queue(()=>B(this,null,function*(){yield this.assertedPersistence.setPersistence(el(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return B(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return B(this,null,function*(){let e=yield JW(this),t=new GC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new da("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return B(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield KW(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return B(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return B(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&el(e)||this._popupRedirectResolver;Ft(t,this,"argument-error"),this.redirectPersistenceManager=yield J_.create(this,[el(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return B(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>B(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return B(this,null,function*(){if(e===this.currentUser)return this.queue(()=>B(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ft(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(t);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return B(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ft(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=RO(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return B(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return B(this,null,function*(){var e;if(Ro(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&OW(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function qd(n){return Vr(n)}var X_=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=TR(t=>this.observer=t)}get next(){return Ft(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var s1={loadJS(){return B(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function eG(n){s1=n}function OO(n){return s1.loadJS(n)}function tG(){return s1.recaptchaEnterpriseScript}function nG(){return s1.gapiScript}function LO(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var YC=class{constructor(){this.enterprise=new QC}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},QC=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var rG="recaptcha-enterprise",FO="NO_RECAPTCHA",ZC=class{constructor(e){this.type=rG,this.auth=qd(e)}verify(e="verify",t=!1){return B(this,null,function*(){function r(o){return B(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>B(null,null,function*(){qW(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new qC(c);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(c=>{a(c)})}))})}function i(o,s,a){let c=window.grecaptcha;oO(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(FO)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new YC().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&oO(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=tG();c.length!==0&&(c+=a),OO(c).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})})}};function Im(n,e,t,r=!1,i=!1){return B(this,null,function*(){let o=new ZC(n),s;if(i)s=FO;else try{s=yield o.verify(t)}catch{s=yield o.verify(t,!0)}let a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let c=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function JC(n,e,t,r,i){return B(this,null,function*(){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield Im(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(a=>B(null,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let c=yield Im(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=yield Im(n,e,t);return r(n,a).catch(c=>B(null,null,function*(){var l;if(((l=n._getRecaptchaConfig())===null||l===void 0?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let u=yield Im(n,e,t,!1,!0);return r(n,u)}return Promise.reject(c)}))}else{let a=yield Im(n,e,t,!1,!0);return r(n,a)}else return Promise.reject(i+" provider is not supported.")})}function px(n,e){let t=Af(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(Za(o,e??{}))return i;tc(i,"already-initialized")}return t.initialize({options:e})}function iG(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(el);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function gx(n,e,t){let r=qd(n);Ft(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=VO(e),{host:s,port:a}=oG(e),c=a===null?"":`:${a}`,l={url:`${o}//${s}${c}/`},u=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Ft(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ft(Za(l,r.config.emulator)&&Za(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,lu(s)?(L_(`${o}//${s}${c}`),F_("Auth",!0)):i||sG()}function VO(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function oG(n){let e=VO(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:lO(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:lO(s)}}}function lO(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function sG(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Dm=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Xc("not implemented")}_getIdTokenResponse(e){return Xc("not implemented")}_linkToIdToken(e,t){return Xc("not implemented")}_getReauthenticationResolver(e){return Xc("not implemented")}};function aG(n,e){return B(this,null,function*(){return _u(n,"POST","/v1/accounts:signUp",e)})}function cG(n,e){return B(this,null,function*(){return Mm(n,"POST","/v1/accounts:signInWithPassword",yu(n,e))})}function lG(n,e){return B(this,null,function*(){return Mm(n,"POST","/v1/accounts:signInWithEmailLink",yu(n,e))})}function uG(n,e){return B(this,null,function*(){return Mm(n,"POST","/v1/accounts:signInWithEmailLink",yu(n,e))})}var Tm=class n extends Dm{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return B(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return JC(e,t,"signInWithPassword",cG,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return lG(e,{email:this._email,oobCode:this._password});default:tc(e,"internal-error")}})}_linkToIdToken(e,t){return B(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return JC(e,r,"signUpPassword",aG,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return uG(e,{idToken:t,email:this._email,oobCode:this._password});default:tc(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function jC(n,e){return B(this,null,function*(){return Mm(n,"POST","/v1/accounts:signInWithIdp",yu(n,e))})}function dG(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function hG(n){let e=Df(Tf(n)).link,t=e?Df(Tf(e)).deep_link_id:null,r=Df(Tf(n)).deep_link_id;return(r?Df(Tf(r)).link:null)||r||t||e||n}var e1=class n{constructor(e){var t,r,i,o,s,a;let c=Df(Tf(e)),l=(t=c.apiKey)!==null&&t!==void 0?t:null,u=(r=c.oobCode)!==null&&r!==void 0?r:null,g=dG((i=c.mode)!==null&&i!==void 0?i:null);Ft(l&&u&&g,"argument-error"),this.apiKey=l,this.operation=g,this.code=u,this.continueUrl=(o=c.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=c.lang)!==null&&s!==void 0?s:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=hG(e);try{return new n(t)}catch{return null}}};var jO=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Tm._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=e1.parseLink(r);return Ft(i,"argument-error"),Tm._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),t1=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var XC=class extends t1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function fG(n,e){return B(this,null,function*(){return Mm(n,"POST","/v1/accounts:signUp",yu(n,e))})}var kf=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return B(this,null,function*(){let o=yield mu._fromIdTokenResponse(e,r,i),s=uO(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return B(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=uO(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function uO(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var ex=class n extends us{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function BO(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?ex._fromErrorAndOperation(n,o,e,r):o})}function pG(n,e,t=!1){return B(this,null,function*(){let r=yield xm(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return kf._forOperation(n,"link",r)})}function gG(n,e,t=!1){return B(this,null,function*(){let{auth:r}=n;if(Ro(r.app))return Promise.reject(tl(r));let i="reauthenticate";try{let o=yield xm(n,BO(r,i,e,n),t);Ft(o.idToken,r,"internal-error");let s=dx(o.idToken);Ft(s,r,"internal-error");let{sub:a}=s;return Ft(n.uid===a,r,"user-mismatch"),kf._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&tc(r,"user-mismatch"),o}})}function UO(n,e,t=!1){return B(this,null,function*(){if(Ro(n.app))return Promise.reject(tl(n));let r="signIn",i=yield BO(n,r,e),o=yield kf._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function mx(n,e){return B(this,null,function*(){return UO(qd(n),e)})}function zO(n){return B(this,null,function*(){let e=qd(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function vx(n,e,t){return B(this,null,function*(){if(Ro(n.app))return Promise.reject(tl(n));let r=qd(n),s=yield JC(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",fG,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&zO(n),c}),a=yield kf._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function yx(n,e,t){return Ro(n.app)?Promise.reject(tl(n)):mx(Vr(n),jO.credential(e,t)).catch(r=>B(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&zO(n),r}))}function _x(n,e){return Vr(n).setPersistence(e)}function Pm(n,e,t,r){return Vr(n).onIdTokenChanged(e,t,r)}function wx(n,e,t){return Vr(n).beforeAuthStateChanged(e,t)}function bx(n){return Vr(n).signOut()}var n1="__sak";var r1=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(n1,"1"),this.storage.removeItem(n1),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var mG=1e3,vG=10,yG=(()=>{class n extends r1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kO(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);ZW()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,vG):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},mG)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return B(this,null,function*(){yield Bl(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return B(this,null,function*(){let r=yield Bl(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return B(this,null,function*(){yield Bl(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),a1=yG;var _G=(()=>{class n extends r1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),Ix=_G;function wG(n){return Promise.all(n.map(e=>B(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var bG=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return B(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(u=>B(this,null,function*(){return u(r.origin,s)})),l=yield wG(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function qO(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var tx=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return B(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let l=qO("",20);i.port1.start();let u=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(g){let v=g;if(v.data.eventId===l)switch(v.data.status){case"ack":clearTimeout(u),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(v.data.response);break;default:clearTimeout(u),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function ec(){return window}function IG(n){ec().location.href=n}function HO(){return typeof ec().WorkerGlobalScope<"u"&&typeof ec().importScripts=="function"}function EG(){return B(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function CG(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function xG(){return HO()?self:null}var $O="firebaseLocalStorageDb",SG=1,i1="firebaseLocalStorage",WO="fbase_key",zd=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function c1(n,e){return n.transaction([i1],e?"readwrite":"readonly").objectStore(i1)}function DG(){let n=indexedDB.deleteDatabase($O);return new zd(n).toPromise()}function nx(){let n=indexedDB.open($O,SG);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(i1,{keyPath:WO})}catch(i){t(i)}}),n.addEventListener("success",()=>B(null,null,function*(){let r=n.result;r.objectStoreNames.contains(i1)?e(r):(r.close(),yield DG(),e(yield nx()))}))})}function dO(n,e,t){return B(this,null,function*(){let r=c1(n,!0).put({[WO]:e,value:t});return new zd(r).toPromise()})}function TG(n,e){return B(this,null,function*(){let t=c1(n,!1).get(e),r=yield new zd(t).toPromise();return r===void 0?null:r.value})}function hO(n,e){let t=c1(n,!0).delete(e);return new zd(t).toPromise()}var AG=800,MG=3,PG=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return B(this,null,function*(){return this.db?this.db:(this.db=yield nx(),this.db)})}_withRetries(t){return B(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>MG)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return B(this,null,function*(){return HO()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return B(this,null,function*(){this.receiver=bG._getInstance(xG()),this.receiver._subscribe("keyChanged",(t,r)=>B(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>B(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return B(this,null,function*(){var t,r;if(this.activeServiceWorker=yield EG(),!this.activeServiceWorker)return;this.sender=new tx(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return B(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||CG()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return B(this,null,function*(){try{if(!indexedDB)return!1;let t=yield nx();return yield dO(t,n1,"1"),yield hO(t,n1),!0}catch{}return!1})}_withPendingWrite(t){return B(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return B(this,null,function*(){return this._withPendingWrite(()=>B(this,null,function*(){return yield this._withRetries(i=>dO(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return B(this,null,function*(){let r=yield this._withRetries(i=>TG(i,t));return this.localCache[t]=r,r})}_remove(t){return B(this,null,function*(){return this._withPendingWrite(()=>B(this,null,function*(){return yield this._withRetries(r=>hO(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return B(this,null,function*(){let t=yield this._withRetries(o=>{let s=c1(o,!1).getAll();return new zd(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>B(this,null,function*(){return this._poll()}),AG)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),GO=PG;var Bbe=LO("rcb"),Ube=new Ud(3e4,6e4);function NG(n,e){return e?el(e):(Ft(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Am=class extends Dm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return jC(e,this._buildIdpRequest())}_linkToIdToken(e,t){return jC(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return jC(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function kG(n){return UO(n.auth,new Am(n),n.bypassAuthState)}function RG(n){let{auth:e,user:t}=n;return Ft(t,e,"internal-error"),gG(t,new Am(n),n.bypassAuthState)}function OG(n){return B(this,null,function*(){let{auth:e,user:t}=n;return Ft(t,e,"internal-error"),pG(t,new Am(n),n.bypassAuthState)})}var rx=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>B(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return B(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return kG;case"linkViaPopup":case"linkViaRedirect":return OG;case"reauthViaPopup":case"reauthViaRedirect":return RG;default:tc(this.auth,"internal-error")}}resolve(e){vu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var zbe=new Ud(2e3,1e4);var LG="pendingRedirect",W_=new Map,ix=class n extends rx{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return B(this,null,function*(){let e=W_.get(this.auth._key());if(!e){try{let r=(yield FG(this.resolver,this.auth))?yield Bl(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}W_.set(this.auth._key(),e)}return this.bypassAuthState||W_.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return B(this,null,function*(){if(e.type==="signInViaRedirect")return Bl(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Bl(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return B(this,null,function*(){})}cleanUp(){}};function FG(n,e){return B(this,null,function*(){let t=BG(e),r=jG(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function VG(n,e){W_.set(n._key(),e)}function jG(n){return el(n._redirectPersistence)}function BG(n){return $_(LG,n.config.apiKey,n.name)}function UG(n,e,t=!1){return B(this,null,function*(){if(Ro(n.app))return Promise.reject(tl(n));let r=qd(n),i=NG(r,e),s=yield new ix(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var zG=600*1e3,ox=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!qG(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!KO(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Bd(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=zG&&this.cachedEventUids.clear(),this.cachedEventUids.has(fO(e))}saveEventToCache(e){this.cachedEventUids.add(fO(e)),this.lastProcessedEventTime=Date.now()}};function fO(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function KO({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function qG(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return KO(n);default:return!1}}function HG(t){return B(this,arguments,function*(n,e={}){return _u(n,"GET","/v1/projects",e)})}var $G=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,WG=/^https?/;function GG(n){return B(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield HG(n);for(let t of e)try{if(KG(t))return}catch{}tc(n,"unauthorized-domain")})}function KG(n){let e=UC(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!WG.test(t))return!1;if($G.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var YG=new Ud(3e4,6e4);function pO(){let n=ec().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function QG(n){return new Promise((e,t)=>{var r,i,o;function s(){pO(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{pO(),t(Bd(n,"network-request-failed"))},timeout:YG.get()})}if(!((i=(r=ec().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=ec().gapi)===null||o===void 0)&&o.load)s();else{let a=LO("iframefcb");return ec()[a]=()=>{gapi.load?s():t(Bd(n,"network-request-failed"))},OO(`${nG()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw G_=null,e})}var G_=null;function ZG(n){return G_=G_||QG(n),G_}var JG=new Ud(5e3,15e3),XG="__/auth/iframe",eK="emulator/auth/iframe",tK={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},nK=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rK(n){let e=n.config;Ft(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?lx(e,eK):`https://${n.config.authDomain}/${XG}`,r={apiKey:e.apiKey,appName:n.name,v:du},i=nK.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${mm(r).slice(1)}`}function iK(n){return B(this,null,function*(){let e=yield ZG(n),t=ec().gapi;return Ft(t,n,"internal-error"),e.open({where:document.body,url:rK(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tK,dontclear:!0},r=>new Promise((i,o)=>B(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Bd(n,"network-request-failed"),a=ec().setTimeout(()=>{o(s)},JG.get());function c(){ec().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})})))})}var oK={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},sK=500,aK=600,cK="_blank",lK="http://localhost",o1=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function uK(n,e,t,r=sK,i=aK){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},oK),{width:r.toString(),height:i.toString(),top:o,left:s}),l=mi().toLowerCase();t&&(a=TO(l)?cK:t),SO(l)&&(e=e||lK,c.scrollbars="yes");let u=Object.entries(c).reduce((v,[p,S])=>`${v}${p}=${S},`,"");if(QW(l)&&a!=="_self")return dK(e||"",a),new o1(null);let g=window.open(e||"",a,u);Ft(g,n,"popup-blocked");try{g.focus()}catch{}return new o1(g)}function dK(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var hK="__/auth/handler",fK="emulator/auth/handler",pK=encodeURIComponent("fac");function gO(n,e,t,r,i,o){return B(this,null,function*(){Ft(n.config.authDomain,n,"auth-domain-config-required"),Ft(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:du,eventId:i};if(e instanceof t1){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",DR(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[u,g]of Object.entries(o||{}))s[u]=g}if(e instanceof XC){let u=e.getScopes().filter(g=>g!=="");u.length>0&&(s.scopes=u.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let u of Object.keys(a))a[u]===void 0&&delete a[u];let c=yield n._getAppCheckToken(),l=c?`#${pK}=${encodeURIComponent(c)}`:"";return`${gK(n)}?${mm(a).slice(1)}${l}`})}function gK({config:n}){return n.emulator?lx(n,fK):`https://${n.authDomain}/${hK}`}var BC="webStorageSupport",sx=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ix,this._completeRedirectFn=UG,this._overrideRedirectResult=VG}_openPopup(e,t,r,i){return B(this,null,function*(){var o;vu((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield gO(e,t,r,UC(),i);return uK(e,s,qO())})}_openRedirect(e,t,r,i){return B(this,null,function*(){yield this._originValidation(e);let o=yield gO(e,t,r,UC(),i);return IG(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(vu(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return B(this,null,function*(){let t=yield iK(e),r=new ox(e);return t.register("authEvent",i=>(Ft(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(BC,{type:BC},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[BC];s!==void 0&&t(!!s),tc(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=GG(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return kO()||DO()||fx()}},YO=sx;var mO="@firebase/auth",vO="1.10.8";var ax=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return B(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ft(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function mK(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function vK(n){ha(new fo("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Ft(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:RO(n)},l=new KC(r,i,o,c);return iG(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ha(new fo("auth-internal",e=>{let t=qd(e.getProvider("auth").getImmediate());return(r=>new ax(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Tr(mO,vO,mK(n)),Tr(mO,vO,"esm2017")}var yK=300,_K=gC("authIdTokenMaxAge")||yK,yO=null,wK=n=>e=>B(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>_K)return;let i=t?.token;yO!==i&&(yO=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Ex(n=Fd()){let e=Af(n,"auth");if(e.isInitialized())return e.getImmediate();let t=px(n,{popupRedirectResolver:YO,persistence:[GO,a1,Ix]}),r=gC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=wK(o.toString());wx(t,s,()=>s(t.currentUser)),Pm(t,a=>s(a))}}let i=fC("auth");return i&&gx(t,`http://${i}`),t}function bK(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}eG({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Bd("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",bK().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});vK("Browser");function JO(n){return new rn(function(e){var t=Pm(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var XO="auth",Hd=class{constructor(e){return e}},Nm=class{constructor(){return Pf(XO)}};var Cx=new ct("angularfire2.auth-instances");function aY(n,e){let t=_m(XO,n,e);return t&&new Hd(t)}function cY(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Hd(r)}}var lY={provide:Nm,deps:[[new os,Cx]]},uY={provide:Hd,useFactory:aY,deps:[[new os,Cx],Jc]};function e3(n,...e){return Tr("angularfire",hu.full,"auth"),rs([uY,lY,{provide:Cx,useFactory:cY(n),multi:!0,deps:[Rn,Gr,fu,jd,[new os,Nf],...e]}])}var t3=ur(JO,!0);var n3=ur(vx,!0,2);var r3=ur(Ex,!0);var i3=ur(_x,!0);var o3=ur(yx,!0,2);var s3=ur(bx,!0,2);var a3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},c3={};var nl,xx;(function(){var n;function e($,P){function D(){}D.prototype=P.prototype,$.D=P.prototype,$.prototype=new D,$.prototype.constructor=$,$.C=function(U,E,T){for(var A=Array(arguments.length-2),te=2;te<arguments.length;te++)A[te-2]=arguments[te];return P.prototype[E].apply(U,A)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i($,P,D){D||(D=0);var U=Array(16);if(typeof P=="string")for(var E=0;16>E;++E)U[E]=P.charCodeAt(D++)|P.charCodeAt(D++)<<8|P.charCodeAt(D++)<<16|P.charCodeAt(D++)<<24;else for(E=0;16>E;++E)U[E]=P[D++]|P[D++]<<8|P[D++]<<16|P[D++]<<24;P=$.g[0],D=$.g[1],E=$.g[2];var T=$.g[3],A=P+(T^D&(E^T))+U[0]+3614090360&4294967295;P=D+(A<<7&4294967295|A>>>25),A=T+(E^P&(D^E))+U[1]+3905402710&4294967295,T=P+(A<<12&4294967295|A>>>20),A=E+(D^T&(P^D))+U[2]+606105819&4294967295,E=T+(A<<17&4294967295|A>>>15),A=D+(P^E&(T^P))+U[3]+3250441966&4294967295,D=E+(A<<22&4294967295|A>>>10),A=P+(T^D&(E^T))+U[4]+4118548399&4294967295,P=D+(A<<7&4294967295|A>>>25),A=T+(E^P&(D^E))+U[5]+1200080426&4294967295,T=P+(A<<12&4294967295|A>>>20),A=E+(D^T&(P^D))+U[6]+2821735955&4294967295,E=T+(A<<17&4294967295|A>>>15),A=D+(P^E&(T^P))+U[7]+4249261313&4294967295,D=E+(A<<22&4294967295|A>>>10),A=P+(T^D&(E^T))+U[8]+1770035416&4294967295,P=D+(A<<7&4294967295|A>>>25),A=T+(E^P&(D^E))+U[9]+2336552879&4294967295,T=P+(A<<12&4294967295|A>>>20),A=E+(D^T&(P^D))+U[10]+4294925233&4294967295,E=T+(A<<17&4294967295|A>>>15),A=D+(P^E&(T^P))+U[11]+2304563134&4294967295,D=E+(A<<22&4294967295|A>>>10),A=P+(T^D&(E^T))+U[12]+1804603682&4294967295,P=D+(A<<7&4294967295|A>>>25),A=T+(E^P&(D^E))+U[13]+4254626195&4294967295,T=P+(A<<12&4294967295|A>>>20),A=E+(D^T&(P^D))+U[14]+2792965006&4294967295,E=T+(A<<17&4294967295|A>>>15),A=D+(P^E&(T^P))+U[15]+1236535329&4294967295,D=E+(A<<22&4294967295|A>>>10),A=P+(E^T&(D^E))+U[1]+4129170786&4294967295,P=D+(A<<5&4294967295|A>>>27),A=T+(D^E&(P^D))+U[6]+3225465664&4294967295,T=P+(A<<9&4294967295|A>>>23),A=E+(P^D&(T^P))+U[11]+643717713&4294967295,E=T+(A<<14&4294967295|A>>>18),A=D+(T^P&(E^T))+U[0]+3921069994&4294967295,D=E+(A<<20&4294967295|A>>>12),A=P+(E^T&(D^E))+U[5]+3593408605&4294967295,P=D+(A<<5&4294967295|A>>>27),A=T+(D^E&(P^D))+U[10]+38016083&4294967295,T=P+(A<<9&4294967295|A>>>23),A=E+(P^D&(T^P))+U[15]+3634488961&4294967295,E=T+(A<<14&4294967295|A>>>18),A=D+(T^P&(E^T))+U[4]+3889429448&4294967295,D=E+(A<<20&4294967295|A>>>12),A=P+(E^T&(D^E))+U[9]+568446438&4294967295,P=D+(A<<5&4294967295|A>>>27),A=T+(D^E&(P^D))+U[14]+3275163606&4294967295,T=P+(A<<9&4294967295|A>>>23),A=E+(P^D&(T^P))+U[3]+4107603335&4294967295,E=T+(A<<14&4294967295|A>>>18),A=D+(T^P&(E^T))+U[8]+1163531501&4294967295,D=E+(A<<20&4294967295|A>>>12),A=P+(E^T&(D^E))+U[13]+2850285829&4294967295,P=D+(A<<5&4294967295|A>>>27),A=T+(D^E&(P^D))+U[2]+4243563512&4294967295,T=P+(A<<9&4294967295|A>>>23),A=E+(P^D&(T^P))+U[7]+1735328473&4294967295,E=T+(A<<14&4294967295|A>>>18),A=D+(T^P&(E^T))+U[12]+2368359562&4294967295,D=E+(A<<20&4294967295|A>>>12),A=P+(D^E^T)+U[5]+4294588738&4294967295,P=D+(A<<4&4294967295|A>>>28),A=T+(P^D^E)+U[8]+2272392833&4294967295,T=P+(A<<11&4294967295|A>>>21),A=E+(T^P^D)+U[11]+1839030562&4294967295,E=T+(A<<16&4294967295|A>>>16),A=D+(E^T^P)+U[14]+4259657740&4294967295,D=E+(A<<23&4294967295|A>>>9),A=P+(D^E^T)+U[1]+2763975236&4294967295,P=D+(A<<4&4294967295|A>>>28),A=T+(P^D^E)+U[4]+1272893353&4294967295,T=P+(A<<11&4294967295|A>>>21),A=E+(T^P^D)+U[7]+4139469664&4294967295,E=T+(A<<16&4294967295|A>>>16),A=D+(E^T^P)+U[10]+3200236656&4294967295,D=E+(A<<23&4294967295|A>>>9),A=P+(D^E^T)+U[13]+681279174&4294967295,P=D+(A<<4&4294967295|A>>>28),A=T+(P^D^E)+U[0]+3936430074&4294967295,T=P+(A<<11&4294967295|A>>>21),A=E+(T^P^D)+U[3]+3572445317&4294967295,E=T+(A<<16&4294967295|A>>>16),A=D+(E^T^P)+U[6]+76029189&4294967295,D=E+(A<<23&4294967295|A>>>9),A=P+(D^E^T)+U[9]+3654602809&4294967295,P=D+(A<<4&4294967295|A>>>28),A=T+(P^D^E)+U[12]+3873151461&4294967295,T=P+(A<<11&4294967295|A>>>21),A=E+(T^P^D)+U[15]+530742520&4294967295,E=T+(A<<16&4294967295|A>>>16),A=D+(E^T^P)+U[2]+3299628645&4294967295,D=E+(A<<23&4294967295|A>>>9),A=P+(E^(D|~T))+U[0]+4096336452&4294967295,P=D+(A<<6&4294967295|A>>>26),A=T+(D^(P|~E))+U[7]+1126891415&4294967295,T=P+(A<<10&4294967295|A>>>22),A=E+(P^(T|~D))+U[14]+2878612391&4294967295,E=T+(A<<15&4294967295|A>>>17),A=D+(T^(E|~P))+U[5]+4237533241&4294967295,D=E+(A<<21&4294967295|A>>>11),A=P+(E^(D|~T))+U[12]+1700485571&4294967295,P=D+(A<<6&4294967295|A>>>26),A=T+(D^(P|~E))+U[3]+2399980690&4294967295,T=P+(A<<10&4294967295|A>>>22),A=E+(P^(T|~D))+U[10]+4293915773&4294967295,E=T+(A<<15&4294967295|A>>>17),A=D+(T^(E|~P))+U[1]+2240044497&4294967295,D=E+(A<<21&4294967295|A>>>11),A=P+(E^(D|~T))+U[8]+1873313359&4294967295,P=D+(A<<6&4294967295|A>>>26),A=T+(D^(P|~E))+U[15]+4264355552&4294967295,T=P+(A<<10&4294967295|A>>>22),A=E+(P^(T|~D))+U[6]+2734768916&4294967295,E=T+(A<<15&4294967295|A>>>17),A=D+(T^(E|~P))+U[13]+1309151649&4294967295,D=E+(A<<21&4294967295|A>>>11),A=P+(E^(D|~T))+U[4]+4149444226&4294967295,P=D+(A<<6&4294967295|A>>>26),A=T+(D^(P|~E))+U[11]+3174756917&4294967295,T=P+(A<<10&4294967295|A>>>22),A=E+(P^(T|~D))+U[2]+718787259&4294967295,E=T+(A<<15&4294967295|A>>>17),A=D+(T^(E|~P))+U[9]+3951481745&4294967295,$.g[0]=$.g[0]+P&4294967295,$.g[1]=$.g[1]+(E+(A<<21&4294967295|A>>>11))&4294967295,$.g[2]=$.g[2]+E&4294967295,$.g[3]=$.g[3]+T&4294967295}r.prototype.u=function($,P){P===void 0&&(P=$.length);for(var D=P-this.blockSize,U=this.B,E=this.h,T=0;T<P;){if(E==0)for(;T<=D;)i(this,$,T),T+=this.blockSize;if(typeof $=="string"){for(;T<P;)if(U[E++]=$.charCodeAt(T++),E==this.blockSize){i(this,U),E=0;break}}else for(;T<P;)if(U[E++]=$[T++],E==this.blockSize){i(this,U),E=0;break}}this.h=E,this.o+=P},r.prototype.v=function(){var $=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);$[0]=128;for(var P=1;P<$.length-8;++P)$[P]=0;var D=8*this.o;for(P=$.length-8;P<$.length;++P)$[P]=D&255,D/=256;for(this.u($),$=Array(16),P=D=0;4>P;++P)for(var U=0;32>U;U+=8)$[D++]=this.g[P]>>>U&255;return $};function o($,P){var D=a;return Object.prototype.hasOwnProperty.call(D,$)?D[$]:D[$]=P($)}function s($,P){this.h=P;for(var D=[],U=!0,E=$.length-1;0<=E;E--){var T=$[E]|0;U&&T==P||(D[E]=T,U=!1)}this.g=D}var a={};function c($){return-128<=$&&128>$?o($,function(P){return new s([P|0],0>P?-1:0)}):new s([$|0],0>$?-1:0)}function l($){if(isNaN($)||!isFinite($))return g;if(0>$)return L(l(-$));for(var P=[],D=1,U=0;$>=D;U++)P[U]=$/D|0,D*=4294967296;return new s(P,0)}function u($,P){if($.length==0)throw Error("number format error: empty string");if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if($.charAt(0)=="-")return L(u($.substring(1),P));if(0<=$.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=l(Math.pow(P,8)),U=g,E=0;E<$.length;E+=8){var T=Math.min(8,$.length-E),A=parseInt($.substring(E,E+T),P);8>T?(T=l(Math.pow(P,T)),U=U.j(T).add(l(A))):(U=U.j(D),U=U.add(l(A)))}return U}var g=c(0),v=c(1),p=c(16777216);n=s.prototype,n.m=function(){if(k(this))return-L(this).m();for(var $=0,P=1,D=0;D<this.g.length;D++){var U=this.i(D);$+=(0<=U?U:4294967296+U)*P,P*=4294967296}return $},n.toString=function($){if($=$||10,2>$||36<$)throw Error("radix out of range: "+$);if(S(this))return"0";if(k(this))return"-"+L(this).toString($);for(var P=l(Math.pow($,6)),D=this,U="";;){var E=Z(D,P).g;D=R(D,E.j(P));var T=((0<D.g.length?D.g[0]:D.h)>>>0).toString($);if(D=E,S(D))return T+U;for(;6>T.length;)T="0"+T;U=T+U}},n.i=function($){return 0>$?0:$<this.g.length?this.g[$]:this.h};function S($){if($.h!=0)return!1;for(var P=0;P<$.g.length;P++)if($.g[P]!=0)return!1;return!0}function k($){return $.h==-1}n.l=function($){return $=R(this,$),k($)?-1:S($)?0:1};function L($){for(var P=$.g.length,D=[],U=0;U<P;U++)D[U]=~$.g[U];return new s(D,~$.h).add(v)}n.abs=function(){return k(this)?L(this):this},n.add=function($){for(var P=Math.max(this.g.length,$.g.length),D=[],U=0,E=0;E<=P;E++){var T=U+(this.i(E)&65535)+($.i(E)&65535),A=(T>>>16)+(this.i(E)>>>16)+($.i(E)>>>16);U=A>>>16,T&=65535,A&=65535,D[E]=A<<16|T}return new s(D,D[D.length-1]&-2147483648?-1:0)};function R($,P){return $.add(L(P))}n.j=function($){if(S(this)||S($))return g;if(k(this))return k($)?L(this).j(L($)):L(L(this).j($));if(k($))return L(this.j(L($)));if(0>this.l(p)&&0>$.l(p))return l(this.m()*$.m());for(var P=this.g.length+$.g.length,D=[],U=0;U<2*P;U++)D[U]=0;for(U=0;U<this.g.length;U++)for(var E=0;E<$.g.length;E++){var T=this.i(U)>>>16,A=this.i(U)&65535,te=$.i(E)>>>16,ve=$.i(E)&65535;D[2*U+2*E]+=A*ve,J(D,2*U+2*E),D[2*U+2*E+1]+=T*ve,J(D,2*U+2*E+1),D[2*U+2*E+1]+=A*te,J(D,2*U+2*E+1),D[2*U+2*E+2]+=T*te,J(D,2*U+2*E+2)}for(U=0;U<P;U++)D[U]=D[2*U+1]<<16|D[2*U];for(U=P;U<2*P;U++)D[U]=0;return new s(D,0)};function J($,P){for(;($[P]&65535)!=$[P];)$[P+1]+=$[P]>>>16,$[P]&=65535,P++}function X($,P){this.g=$,this.h=P}function Z($,P){if(S(P))throw Error("division by zero");if(S($))return new X(g,g);if(k($))return P=Z(L($),P),new X(L(P.g),L(P.h));if(k(P))return P=Z($,L(P)),new X(L(P.g),P.h);if(30<$.g.length){if(k($)||k(P))throw Error("slowDivide_ only works with positive integers.");for(var D=v,U=P;0>=U.l($);)D=me(D),U=me(U);var E=be(D,1),T=be(U,1);for(U=be(U,2),D=be(D,2);!S(U);){var A=T.add(U);0>=A.l($)&&(E=E.add(D),T=A),U=be(U,1),D=be(D,1)}return P=R($,E.j(P)),new X(E,P)}for(E=g;0<=$.l(P);){for(D=Math.max(1,Math.floor($.m()/P.m())),U=Math.ceil(Math.log(D)/Math.LN2),U=48>=U?1:Math.pow(2,U-48),T=l(D),A=T.j(P);k(A)||0<A.l($);)D-=U,T=l(D),A=T.j(P);S(T)&&(T=v),E=E.add(T),$=R($,A)}return new X(E,$)}n.A=function($){return Z(this,$).h},n.and=function($){for(var P=Math.max(this.g.length,$.g.length),D=[],U=0;U<P;U++)D[U]=this.i(U)&$.i(U);return new s(D,this.h&$.h)},n.or=function($){for(var P=Math.max(this.g.length,$.g.length),D=[],U=0;U<P;U++)D[U]=this.i(U)|$.i(U);return new s(D,this.h|$.h)},n.xor=function($){for(var P=Math.max(this.g.length,$.g.length),D=[],U=0;U<P;U++)D[U]=this.i(U)^$.i(U);return new s(D,this.h^$.h)};function me($){for(var P=$.g.length+1,D=[],U=0;U<P;U++)D[U]=$.i(U)<<1|$.i(U-1)>>>31;return new s(D,$.h)}function be($,P){var D=P>>5;P%=32;for(var U=$.g.length-D,E=[],T=0;T<U;T++)E[T]=0<P?$.i(T+D)>>>P|$.i(T+D+1)<<32-P:$.i(T+D);return new s(E,$.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,xx=c3.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=u,nl=c3.Integer=s}).apply(typeof a3<"u"?a3:typeof self<"u"?self:typeof window<"u"?window:{});var l1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},rl={};var Sx,hY,Rf,Dx,km,u1,Tx,Ax,Mx;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,_,x){return h==Array.prototype||h==Object.prototype||(h[_]=x.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof l1=="object"&&l1];for(var _=0;_<h.length;++_){var x=h[_];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var r=t(this);function i(h,_){if(_)e:{var x=r;h=h.split(".");for(var z=0;z<h.length-1;z++){var ae=h[z];if(!(ae in x))break e;x=x[ae]}h=h[h.length-1],z=x[h],_=_(z),_!=z&&_!=null&&e(x,h,{configurable:!0,writable:!0,value:_})}}function o(h,_){h instanceof String&&(h+="");var x=0,z=!1,ae={next:function(){if(!z&&x<h.length){var ye=x++;return{value:_(ye,h[ye]),done:!1}}return z=!0,{done:!0,value:void 0}}};return ae[Symbol.iterator]=function(){return ae},ae}i("Array.prototype.values",function(h){return h||function(){return o(this,function(_,x){return x})}});var s=s||{},a=this||self;function c(h){var _=typeof h;return _=_!="object"?_:h?Array.isArray(h)?"array":_:"null",_=="array"||_=="object"&&typeof h.length=="number"}function l(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function u(h,_,x){return h.call.apply(h.bind,arguments)}function g(h,_,x){if(!h)throw Error();if(2<arguments.length){var z=Array.prototype.slice.call(arguments,2);return function(){var ae=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ae,z),h.apply(_,ae)}}return function(){return h.apply(_,arguments)}}function v(h,_,x){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:g,v.apply(null,arguments)}function p(h,_){var x=Array.prototype.slice.call(arguments,1);return function(){var z=x.slice();return z.push.apply(z,arguments),h.apply(this,z)}}function S(h,_){function x(){}x.prototype=_.prototype,h.aa=_.prototype,h.prototype=new x,h.prototype.constructor=h,h.Qb=function(z,ae,ye){for(var We=Array(arguments.length-2),xn=2;xn<arguments.length;xn++)We[xn-2]=arguments[xn];return _.prototype[ae].apply(z,We)}}function k(h){let _=h.length;if(0<_){let x=Array(_);for(let z=0;z<_;z++)x[z]=h[z];return x}return[]}function L(h,_){for(let x=1;x<arguments.length;x++){let z=arguments[x];if(c(z)){let ae=h.length||0,ye=z.length||0;h.length=ae+ye;for(let We=0;We<ye;We++)h[ae+We]=z[We]}else h.push(z)}}class R{constructor(_,x){this.i=_,this.j=x,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function J(h){return/^[\s\xa0]*$/.test(h)}function X(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function Z(h){return Z[" "](h),h}Z[" "]=function(){};var me=X().indexOf("Gecko")!=-1&&!(X().toLowerCase().indexOf("webkit")!=-1&&X().indexOf("Edge")==-1)&&!(X().indexOf("Trident")!=-1||X().indexOf("MSIE")!=-1)&&X().indexOf("Edge")==-1;function be(h,_,x){for(let z in h)_.call(x,h[z],z,h)}function $(h,_){for(let x in h)_.call(void 0,h[x],x,h)}function P(h){let _={};for(let x in h)_[x]=h[x];return _}let D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(h,_){let x,z;for(let ae=1;ae<arguments.length;ae++){z=arguments[ae];for(x in z)h[x]=z[x];for(let ye=0;ye<D.length;ye++)x=D[ye],Object.prototype.hasOwnProperty.call(z,x)&&(h[x]=z[x])}}function E(h){var _=1;h=h.split(":");let x=[];for(;0<_&&h.length;)x.push(h.shift()),_--;return h.length&&x.push(h.join(":")),x}function T(h){a.setTimeout(()=>{throw h},0)}function A(){var h=De;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class te{constructor(){this.h=this.g=null}add(_,x){let z=ve.get();z.set(_,x),this.h?this.h.next=z:this.g=z,this.h=z}}var ve=new R(()=>new Se,h=>h.reset());class Se{constructor(){this.next=this.g=this.h=null}set(_,x){this.h=_,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let Ce,fe=!1,De=new te,$e=()=>{let h=a.Promise.resolve(void 0);Ce=()=>{h.then(Fe)}};var Fe=()=>{for(var h;h=A();){try{h.h.call(h.g)}catch(x){T(x)}var _=ve;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}fe=!1};function V(){this.s=this.s,this.C=this.C}V.prototype.s=!1,V.prototype.ma=function(){this.s||(this.s=!0,this.N())},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Q(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}Q.prototype.h=function(){this.defaultPrevented=!0};var ee=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{let x=()=>{};a.addEventListener("test",x,_),a.removeEventListener("test",x,_)}catch{}return h})();function re(h,_){if(Q.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var x=this.type=h.type,z=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(me){e:{try{Z(_.nodeName);var ae=!0;break e}catch{}ae=!1}ae||(_=null)}}else x=="mouseover"?_=h.fromElement:x=="mouseout"&&(_=h.toElement);this.relatedTarget=_,z?(this.clientX=z.clientX!==void 0?z.clientX:z.pageX,this.clientY=z.clientY!==void 0?z.clientY:z.pageY,this.screenX=z.screenX||0,this.screenY=z.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:ce[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&re.aa.h.call(this)}}S(re,Q);var ce={2:"touch",3:"pen",4:"mouse"};re.prototype.h=function(){re.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var de="closure_listenable_"+(1e6*Math.random()|0),Ie=0;function Ee(h,_,x,z,ae){this.listener=h,this.proxy=null,this.src=_,this.type=x,this.capture=!!z,this.ha=ae,this.key=++Ie,this.da=this.fa=!1}function Ne(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ze(h){this.src=h,this.g={},this.h=0}ze.prototype.add=function(h,_,x,z,ae){var ye=h.toString();h=this.g[ye],h||(h=this.g[ye]=[],this.h++);var We=Qe(h,_,z,ae);return-1<We?(_=h[We],x||(_.fa=!1)):(_=new Ee(_,this.src,ye,!!z,ae),_.fa=x,h.push(_)),_};function Je(h,_){var x=_.type;if(x in h.g){var z=h.g[x],ae=Array.prototype.indexOf.call(z,_,void 0),ye;(ye=0<=ae)&&Array.prototype.splice.call(z,ae,1),ye&&(Ne(_),h.g[x].length==0&&(delete h.g[x],h.h--))}}function Qe(h,_,x,z){for(var ae=0;ae<h.length;++ae){var ye=h[ae];if(!ye.da&&ye.listener==_&&ye.capture==!!x&&ye.ha==z)return ae}return-1}var gt="closure_lm_"+(1e6*Math.random()|0),W={};function Ye(h,_,x,z,ae){if(z&&z.once)return je(h,_,x,z,ae);if(Array.isArray(_)){for(var ye=0;ye<_.length;ye++)Ye(h,_[ye],x,z,ae);return null}return x=Vt(x),h&&h[de]?h.K(_,x,l(z)?!!z.capture:!!z,ae):Zt(h,_,x,!1,z,ae)}function Zt(h,_,x,z,ae,ye){if(!_)throw Error("Invalid event type");var We=l(ae)?!!ae.capture:!!ae,xn=wn(h);if(xn||(h[gt]=xn=new ze(h)),x=xn.add(_,x,z,We,ye),x.proxy)return x;if(z=St(),x.proxy=z,z.src=h,z.listener=x,h.addEventListener)ee||(ae=We),ae===void 0&&(ae=!1),h.addEventListener(_.toString(),z,ae);else if(h.attachEvent)h.attachEvent(It(_.toString()),z);else if(h.addListener&&h.removeListener)h.addListener(z);else throw Error("addEventListener and attachEvent are unavailable.");return x}function St(){function h(x){return _.call(h.src,h.listener,x)}let _=_t;return h}function je(h,_,x,z,ae){if(Array.isArray(_)){for(var ye=0;ye<_.length;ye++)je(h,_[ye],x,z,ae);return null}return x=Vt(x),h&&h[de]?h.L(_,x,l(z)?!!z.capture:!!z,ae):Zt(h,_,x,!0,z,ae)}function Ct(h,_,x,z,ae){if(Array.isArray(_))for(var ye=0;ye<_.length;ye++)Ct(h,_[ye],x,z,ae);else z=l(z)?!!z.capture:!!z,x=Vt(x),h&&h[de]?(h=h.i,_=String(_).toString(),_ in h.g&&(ye=h.g[_],x=Qe(ye,x,z,ae),-1<x&&(Ne(ye[x]),Array.prototype.splice.call(ye,x,1),ye.length==0&&(delete h.g[_],h.h--)))):h&&(h=wn(h))&&(_=h.g[_.toString()],h=-1,_&&(h=Qe(_,x,z,ae)),(x=-1<h?_[h]:null)&&nt(x))}function nt(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[de])Je(_.i,h);else{var x=h.type,z=h.proxy;_.removeEventListener?_.removeEventListener(x,z,h.capture):_.detachEvent?_.detachEvent(It(x),z):_.addListener&&_.removeListener&&_.removeListener(z),(x=wn(_))?(Je(x,h),x.h==0&&(x.src=null,_[gt]=null)):Ne(h)}}}function It(h){return h in W?W[h]:W[h]="on"+h}function _t(h,_){if(h.da)h=!0;else{_=new re(_,this);var x=h.listener,z=h.ha||h.src;h.fa&&nt(h),h=x.call(z,_)}return h}function wn(h){return h=h[gt],h instanceof ze?h:null}var ln="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vt(h){return typeof h=="function"?h:(h[ln]||(h[ln]=function(_){return h.handleEvent(_)}),h[ln])}function At(){V.call(this),this.i=new ze(this),this.M=this,this.F=null}S(At,V),At.prototype[de]=!0,At.prototype.removeEventListener=function(h,_,x,z){Ct(this,h,_,x,z)};function Mt(h,_){var x,z=h.F;if(z)for(x=[];z;z=z.F)x.push(z);if(h=h.M,z=_.type||_,typeof _=="string")_=new Q(_,h);else if(_ instanceof Q)_.target=_.target||h;else{var ae=_;_=new Q(z,h),U(_,ae)}if(ae=!0,x)for(var ye=x.length-1;0<=ye;ye--){var We=_.g=x[ye];ae=ot(We,z,!0,_)&&ae}if(We=_.g=h,ae=ot(We,z,!0,_)&&ae,ae=ot(We,z,!1,_)&&ae,x)for(ye=0;ye<x.length;ye++)We=_.g=x[ye],ae=ot(We,z,!1,_)&&ae}At.prototype.N=function(){if(At.aa.N.call(this),this.i){var h=this.i,_;for(_ in h.g){for(var x=h.g[_],z=0;z<x.length;z++)Ne(x[z]);delete h.g[_],h.h--}}this.F=null},At.prototype.K=function(h,_,x,z){return this.i.add(String(h),_,!1,x,z)},At.prototype.L=function(h,_,x,z){return this.i.add(String(h),_,!0,x,z)};function ot(h,_,x,z){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();for(var ae=!0,ye=0;ye<_.length;++ye){var We=_[ye];if(We&&!We.da&&We.capture==x){var xn=We.listener,vr=We.ha||We.src;We.fa&&Je(h.i,We),ae=xn.call(vr,z)!==!1&&ae}}return ae&&!z.defaultPrevented}function Ht(h,_,x){if(typeof h=="function")x&&(h=v(h,x));else if(h&&typeof h.handleEvent=="function")h=v(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:a.setTimeout(h,_||0)}function ft(h){h.g=Ht(()=>{h.g=null,h.i&&(h.i=!1,ft(h))},h.l);let _=h.h;h.h=null,h.m.apply(null,_)}class pr extends V{constructor(_,x){super(),this.m=_,this.l=x,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:ft(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function un(h){V.call(this),this.h=h,this.g={}}S(un,V);var tn=[];function nn(h){be(h.g,function(_,x){this.g.hasOwnProperty(x)&&nt(_)},h),h.g={}}un.prototype.N=function(){un.aa.N.call(this),nn(this)},un.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Un=a.JSON.stringify,Et=a.JSON.parse,zn=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function Dt(){}Dt.prototype.h=null;function zt(h){return h.h||(h.h=h.i())}function Yn(){}var $t={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function xt(){Q.call(this,"d")}S(xt,Q);function bn(){Q.call(this,"c")}S(bn,Q);var Zi={},ni=null;function vo(){return ni=ni||new At}Zi.La="serverreachability";function jo(h){Q.call(this,Zi.La,h)}S(jo,Q);function wt(h){let _=vo();Mt(_,new jo(_))}Zi.STAT_EVENT="statevent";function vs(h,_){Q.call(this,Zi.STAT_EVENT,h),this.stat=_}S(vs,Q);function rr(h){let _=vo();Mt(_,new vs(_,h))}Zi.Ma="timingevent";function Ji(h,_){Q.call(this,Zi.Ma,h),this.size=_}S(Ji,Q);function ui(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},_)}function qn(){this.g=!0}qn.prototype.xa=function(){this.g=!1};function qr(h,_,x,z,ae,ye){h.info(function(){if(h.g)if(ye)for(var We="",xn=ye.split("&"),vr=0;vr<xn.length;vr++){var Lt=xn[vr].split("=");if(1<Lt.length){var er=Lt[0];Lt=Lt[1];var yr=er.split("_");We=2<=yr.length&&yr[1]=="type"?We+(er+"="+Lt+"&"):We+(er+"=redacted&")}}else We=null;else We=ye;return"XMLHTTP REQ ("+z+") [attempt "+ae+"]: "+_+`
`+x+`
`+We})}function ri(h,_,x,z,ae,ye,We){h.info(function(){return"XMLHTTP RESP ("+z+") [ attempt "+ae+"]: "+_+`
`+x+`
`+ye+" "+We})}function yo(h,_,x,z){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+Bo(h,x)+(z?" "+z:"")})}function Sa(h,_){h.info(function(){return"TIMEOUT: "+_})}qn.prototype.info=function(){};function Bo(h,_){if(!h.g)return _;if(!_)return null;try{var x=JSON.parse(_);if(x){for(h=0;h<x.length;h++)if(Array.isArray(x[h])){var z=x[h];if(!(2>z.length)){var ae=z[1];if(Array.isArray(ae)&&!(1>ae.length)){var ye=ae[0];if(ye!="noop"&&ye!="stop"&&ye!="close")for(var We=1;We<ae.length;We++)ae[We]=""}}}}return Un(x)}catch{return _}}var Xi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},_o={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},eo;function Ii(){}S(Ii,Dt),Ii.prototype.g=function(){return new XMLHttpRequest},Ii.prototype.i=function(){return{}},eo=new Ii;function Ri(h,_,x,z){this.j=h,this.i=_,this.l=x,this.R=z||1,this.U=new un(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Uo}function Uo(){this.i=null,this.g="",this.h=!1}var Da={},Ta={};function Aa(h,_,x){h.L=1,h.v=Ic(wo(_)),h.m=x,h.P=!0,_c(h,null)}function _c(h,_){h.F=Date.now(),wc(h),h.A=wo(h.v);var x=h.A,z=h.R;Array.isArray(z)||(z=[String(z)]),Ot(x.i,"t",z),h.C=0,x=h.j.J,h.h=new Uo,h.g=mr(h.j,x?_:null,!h.m),0<h.O&&(h.M=new pr(v(h.Y,h,h.g),h.O)),_=h.U,x=h.g,z=h.ca;var ae="readystatechange";Array.isArray(ae)||(ae&&(tn[0]=ae.toString()),ae=tn);for(var ye=0;ye<ae.length;ye++){var We=Ye(x,ae[ye],z||_.handleEvent,!1,_.h||_);if(!We)break;_.g[We.key]=We}_=h.H?P(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),wt(),qr(h.i,h.u,h.A,h.l,h.R,h.m)}Ri.prototype.ca=function(h){h=h.target;let _=this.M;_&&bo(h)==3?_.j():this.Y(h)},Ri.prototype.Y=function(h){try{if(h==this.g)e:{let yr=bo(this.g);var _=this.g.Ba();let Qs=this.g.Z();if(!(3>yr)&&(yr!=3||this.g&&(this.h.h||this.g.oa()||Yu(this.g)))){this.J||yr!=4||_==7||(_==8||0>=Qs?wt(3):wt(2)),Oi(this);var x=this.g.Z();this.X=x;t:if(_h(this)){var z=Yu(this.g);h="";var ae=z.length,ye=bo(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ys(this),$s(this);var We="";break t}this.h.i=new a.TextDecoder}for(_=0;_<ae;_++)this.h.h=!0,h+=this.h.i.decode(z[_],{stream:!(ye&&_==ae-1)});z.length=0,this.h.g+=h,this.C=0,We=this.h.g}else We=this.g.oa();if(this.o=x==200,ri(this.i,this.u,this.A,this.l,this.R,yr,x),this.o){if(this.T&&!this.K){t:{if(this.g){var xn,vr=this.g;if((xn=vr.g?vr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!J(xn)){var Lt=xn;break t}}Lt=null}if(x=Lt)yo(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bc(this,x);else{this.o=!1,this.s=3,rr(12),ys(this),$s(this);break e}}if(this.P){x=!0;let ar;for(;!this.J&&this.C<We.length;)if(ar=Uu(this,We),ar==Ta){yr==4&&(this.s=4,rr(14),x=!1),yo(this.i,this.l,null,"[Incomplete Response]");break}else if(ar==Da){this.s=4,rr(15),yo(this.i,this.l,We,"[Invalid Chunk]"),x=!1;break}else yo(this.i,this.l,ar,null),bc(this,ar);if(_h(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),yr!=4||We.length!=0||this.h.h||(this.s=1,rr(16),x=!1),this.o=this.o&&x,!x)yo(this.i,this.l,We,"[Invalid Chunked Response]"),ys(this),$s(this);else if(0<We.length&&!this.W){this.W=!0;var er=this.j;er.g==this&&er.ba&&!er.M&&(er.j.info("Great, no buffering proxy detected. Bytes received: "+We.length),at(er),er.M=!0,rr(11))}}else yo(this.i,this.l,We,null),bc(this,We);yr==4&&ys(this),this.o&&!this.J&&(yr==4?pn(this.j,this):(this.o=!1,wc(this)))}else Ks(this.g),x==400&&0<We.indexOf("Unknown SID")?(this.s=3,rr(12)):(this.s=0,rr(13)),ys(this),$s(this)}}}catch{}finally{}};function _h(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Uu(h,_){var x=h.C,z=_.indexOf(`
`,x);return z==-1?Ta:(x=Number(_.substring(x,z)),isNaN(x)?Da:(z+=1,z+x>_.length?Ta:(_=_.slice(z,z+x),h.C=z+x,_)))}Ri.prototype.cancel=function(){this.J=!0,ys(this)};function wc(h){h.S=Date.now()+h.I,zu(h,h.I)}function zu(h,_){if(h.B!=null)throw Error("WatchDog timer not null");h.B=ui(v(h.ba,h),_)}function Oi(h){h.B&&(a.clearTimeout(h.B),h.B=null)}Ri.prototype.ba=function(){this.B=null;let h=Date.now();0<=h-this.S?(Sa(this.i,this.A),this.L!=2&&(wt(),rr(17)),ys(this),this.s=2,$s(this)):zu(this,this.S-h)};function $s(h){h.j.G==0||h.J||pn(h.j,h)}function ys(h){Oi(h);var _=h.M;_&&typeof _.ma=="function"&&_.ma(),h.M=null,nn(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function bc(h,_){try{var x=h.j;if(x.G!=0&&(x.g==h||Ma(x.h,h))){if(!h.K&&Ma(x.h,h)&&x.G==3){try{var z=x.Da.g.parse(_)}catch{z=null}if(Array.isArray(z)&&z.length==3){var ae=z;if(ae[0]==0){e:if(!x.u){if(x.g)if(x.g.F+3e3<h.F)jt(x),Dc(x);else break e;rt(x),rr(18)}}else x.za=ae[1],0<x.za-x.T&&37500>ae[2]&&x.F&&x.v==0&&!x.C&&(x.C=ui(v(x.Za,x),6e3));if(1>=zo(x.h)&&x.ca){try{x.ca()}catch{}x.ca=void 0}}else $n(x,11)}else if((h.K||x.g==h)&&jt(x),!J(_))for(ae=x.Da.g.parse(_),_=0;_<ae.length;_++){let Lt=ae[_];if(x.T=Lt[0],Lt=Lt[1],x.G==2)if(Lt[0]=="c"){x.K=Lt[1],x.ia=Lt[2];let er=Lt[3];er!=null&&(x.la=er,x.j.info("VER="+x.la));let yr=Lt[4];yr!=null&&(x.Aa=yr,x.j.info("SVER="+x.Aa));let Qs=Lt[5];Qs!=null&&typeof Qs=="number"&&0<Qs&&(z=1.5*Qs,x.L=z,x.j.info("backChannelRequestTimeoutMs_="+z)),z=x;let ar=h.g;if(ar){let Cs=ar.g?ar.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Cs){var ye=z.h;ye.g||Cs.indexOf("spdy")==-1&&Cs.indexOf("quic")==-1&&Cs.indexOf("h2")==-1||(ye.j=ye.l,ye.g=new Set,ye.h&&($u(ye,ye.h),ye.h=null))}if(z.D){let Tc=ar.g?ar.g.getResponseHeader("X-HTTP-Session-Id"):null;Tc&&(z.ya=Tc,Pn(z.I,z.D,Tc))}}x.G=3,x.l&&x.l.ua(),x.ba&&(x.R=Date.now()-h.F,x.j.info("Handshake RTT: "+x.R+"ms")),z=x;var We=h;if(z.qa=Er(z,z.J?z.ia:null,z.W),We.K){gr(z.h,We);var xn=We,vr=z.L;vr&&(xn.I=vr),xn.B&&(Oi(xn),wc(xn)),z.g=We}else Le(z);0<x.i.length&&M(x)}else Lt[0]!="stop"&&Lt[0]!="close"||$n(x,7);else x.G==3&&(Lt[0]=="stop"||Lt[0]=="close"?Lt[0]=="stop"?$n(x,7):Ys(x):Lt[0]!="noop"&&x.l&&x.l.ta(Lt),x.v=0)}}wt(4)}catch{}}var wh=class{constructor(h,_){this.g=h,this.map=_}};function qu(h){this.l=h||10,a.PerformanceNavigationTiming?(h=a.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Hu(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function zo(h){return h.h?1:h.g?h.g.size:0}function Ma(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function $u(h,_){h.g?h.g.add(_):h.h=_}function gr(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}qu.prototype.cancel=function(){if(this.i=Wu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let h of this.g.values())h.cancel();this.g.clear()}};function Wu(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let _=h.i;for(let x of h.g.values())_=_.concat(x.D);return _}return k(h.i)}function _s(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(c(h)){for(var _=[],x=h.length,z=0;z<x;z++)_.push(h[z]);return _}_=[],x=0;for(z in h)_[x++]=h[z];return _}function _l(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(c(h)||typeof h=="string"){var _=[];h=h.length;for(var x=0;x<h;x++)_.push(x);return _}_=[],x=0;for(let z in h)_[x++]=z;return _}}}function Gu(h,_){if(h.forEach&&typeof h.forEach=="function")h.forEach(_,void 0);else if(c(h)||typeof h=="string")Array.prototype.forEach.call(h,_,void 0);else for(var x=_l(h),z=_s(h),ae=z.length,ye=0;ye<ae;ye++)_.call(void 0,z[ye],x&&x[ye],h)}var to=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Nr(h,_){if(h){h=h.split("&");for(var x=0;x<h.length;x++){var z=h[x].indexOf("="),ae=null;if(0<=z){var ye=h[x].substring(0,z);ae=h[x].substring(z+1)}else ye=h[x];_(ye,ae?decodeURIComponent(ae.replace(/\+/g," ")):"")}}}function Ei(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Ei){this.h=h.h,wl(this,h.j),this.o=h.o,this.g=h.g,bl(this,h.s),this.l=h.l;var _=h.i,x=new Ec;x.i=_.i,_.g&&(x.g=new Map(_.g),x.h=_.h),qo(this,x),this.m=h.m}else h&&(_=String(h).match(to))?(this.h=!1,wl(this,_[1]||"",!0),this.o=ws(_[2]||""),this.g=ws(_[3]||"",!0),bl(this,_[4]),this.l=ws(_[5]||"",!0),qo(this,_[6]||"",!0),this.m=ws(_[7]||"")):(this.h=!1,this.i=new Ec(null,this.h))}Ei.prototype.toString=function(){var h=[],_=this.j;_&&h.push(Ho(_,bh,!0),":");var x=this.g;return(x||_=="file")&&(h.push("//"),(_=this.o)&&h.push(Ho(_,bh,!0),"@"),h.push(encodeURIComponent(String(x)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.s,x!=null&&h.push(":",String(x))),(x=this.l)&&(this.g&&x.charAt(0)!="/"&&h.push("/"),h.push(Ho(x,x.charAt(0)=="/"?Ku:Pp,!0))),(x=this.i.toString())&&h.push("?",x),(x=this.m)&&h.push("#",Ho(x,$o)),h.join("")};function wo(h){return new Ei(h)}function wl(h,_,x){h.j=x?ws(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function bl(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function qo(h,_,x){_ instanceof Ec?(h.i=_,Np(h.i,h.h)):(x||(_=Ho(_,Ih)),h.i=new Ec(_,h.h))}function Pn(h,_,x){h.i.set(_,x)}function Ic(h){return Pn(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function ws(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ho(h,_,x){return typeof h=="string"?(h=encodeURI(h).replace(_,Mp),x&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Mp(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var bh=/[#\/\?@]/g,Pp=/[#\?:]/g,Ku=/[#\?]/g,Ih=/[#\?@]/g,$o=/#/g;function Ec(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function Li(h){h.g||(h.g=new Map,h.h=0,h.i&&Nr(h.i,function(_,x){h.add(decodeURIComponent(_.replace(/\+/g," ")),x)}))}n=Ec.prototype,n.add=function(h,_){Li(this),this.i=null,h=Pa(this,h);var x=this.g.get(h);return x||this.g.set(h,x=[]),x.push(_),this.h+=1,this};function Il(h,_){Li(h),_=Pa(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function Eh(h,_){return Li(h),_=Pa(h,_),h.g.has(_)}n.forEach=function(h,_){Li(this),this.g.forEach(function(x,z){x.forEach(function(ae){h.call(_,ae,z,this)},this)},this)},n.na=function(){Li(this);let h=Array.from(this.g.values()),_=Array.from(this.g.keys()),x=[];for(let z=0;z<_.length;z++){let ae=h[z];for(let ye=0;ye<ae.length;ye++)x.push(_[z])}return x},n.V=function(h){Li(this);let _=[];if(typeof h=="string")Eh(this,h)&&(_=_.concat(this.g.get(Pa(this,h))));else{h=Array.from(this.g.values());for(let x=0;x<h.length;x++)_=_.concat(h[x])}return _},n.set=function(h,_){return Li(this),this.i=null,h=Pa(this,h),Eh(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h?(h=this.V(h),0<h.length?String(h[0]):_):_};function Ot(h,_,x){Il(h,_),0<x.length&&(h.i=null,h.g.set(Pa(h,_),k(x)),h.h+=x.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let h=[],_=Array.from(this.g.keys());for(var x=0;x<_.length;x++){var z=_[x];let ye=encodeURIComponent(String(z)),We=this.V(z);for(z=0;z<We.length;z++){var ae=ye;We[z]!==""&&(ae+="="+encodeURIComponent(String(We[z]))),h.push(ae)}}return this.i=h.join("&")};function Pa(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function Np(h,_){_&&!h.j&&(Li(h),h.i=null,h.g.forEach(function(x,z){var ae=z.toLowerCase();z!=ae&&(Il(this,z),Ot(this,ae,x))},h)),h.j=_}function kp(h,_){let x=new qn;if(a.Image){let z=new Image;z.onload=p(di,x,"TestLoadImage: loaded",!0,_,z),z.onerror=p(di,x,"TestLoadImage: error",!1,_,z),z.onabort=p(di,x,"TestLoadImage: abort",!1,_,z),z.ontimeout=p(di,x,"TestLoadImage: timeout",!1,_,z),a.setTimeout(function(){z.ontimeout&&z.ontimeout()},1e4),z.src=h}else _(!1)}function Ws(h,_){let x=new qn,z=new AbortController,ae=setTimeout(()=>{z.abort(),di(x,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:z.signal}).then(ye=>{clearTimeout(ae),ye.ok?di(x,"TestPingServer: ok",!0,_):di(x,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(ae),di(x,"TestPingServer: error",!1,_)})}function di(h,_,x,z,ae){try{ae&&(ae.onload=null,ae.onerror=null,ae.onabort=null,ae.ontimeout=null),z(x)}catch{}}function Rp(){this.g=new zn}function Op(h,_,x){let z=x||"";try{Gu(h,function(ae,ye){let We=ae;l(ae)&&(We=Un(ae)),_.push(z+ye+"="+encodeURIComponent(We))})}catch(ae){throw _.push(z+"type="+encodeURIComponent("_badmap")),ae}}function bs(h){this.l=h.Ub||null,this.j=h.eb||!1}S(bs,Dt),bs.prototype.g=function(){return new Na(this.l,this.j)},bs.prototype.i=(function(h){return function(){return h}})({});function Na(h,_){At.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Na,At),n=Na.prototype,n.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,no(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||a).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Cc(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,no(this)),this.g&&(this.readyState=3,no(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ka(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function ka(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Cc(this):no(this),this.readyState==3&&ka(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Cc(this))},n.Qa=function(h){this.g&&(this.response=h,Cc(this))},n.ga=function(){this.g&&Cc(this)};function Cc(h){h.readyState=4,h.l=null,h.j=null,h.v=null,no(h)}n.setRequestHeader=function(h,_){this.u.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let h=[],_=this.h.entries();for(var x=_.next();!x.done;)x=x.value,h.push(x[0]+": "+x[1]),x=_.next();return h.join(`\r
`)};function no(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Na.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Ch(h){let _="";return be(h,function(x,z){_+=z,_+=":",_+=x,_+=`\r
`}),_}function xc(h,_,x){e:{for(z in x){var z=!1;break e}z=!0}z||(x=Ch(x),typeof h=="string"?x!=null&&encodeURIComponent(String(x)):Pn(h,_,x))}function Hn(h){At.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Hn,At);var xh=/^https?$/i,Gs=["POST","PUT"];n=Hn.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,_,x,z){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():eo.g(),this.v=this.o?zt(this.o):zt(eo),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(ye){El(this,ye);return}if(h=x||"",x=new Map(this.headers),z)if(Object.getPrototypeOf(z)===Object.prototype)for(var ae in z)x.set(ae,z[ae]);else if(typeof z.keys=="function"&&typeof z.get=="function")for(let ye of z.keys())x.set(ye,z.get(ye));else throw Error("Unknown input type for opt_headers: "+String(z));z=Array.from(x.keys()).find(ye=>ye.toLowerCase()=="content-type"),ae=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Gs,_,void 0))||z||ae||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[ye,We]of x)this.g.setRequestHeader(ye,We);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{xl(this),this.u=!0,this.g.send(h),this.u=!1}catch(ye){El(this,ye)}};function El(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,Sc(h),Is(h)}function Sc(h){h.A||(h.A=!0,Mt(h,"complete"),Mt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Mt(this,"complete"),Mt(this,"abort"),Is(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Is(this,!0)),Hn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Cl(this):this.bb())},n.bb=function(){Cl(this)};function Cl(h){if(h.h&&typeof s<"u"&&(!h.v[1]||bo(h)!=4||h.Z()!=2)){if(h.u&&bo(h)==4)Ht(h.Ea,0,h);else if(Mt(h,"readystatechange"),bo(h)==4){h.h=!1;try{let We=h.Z();e:switch(We){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var x;if(!(x=_)){var z;if(z=We===0){var ae=String(h.D).match(to)[1]||null;!ae&&a.self&&a.self.location&&(ae=a.self.location.protocol.slice(0,-1)),z=!xh.test(ae?ae.toLowerCase():"")}x=z}if(x)Mt(h,"complete"),Mt(h,"success");else{h.m=6;try{var ye=2<bo(h)?h.g.statusText:""}catch{ye=""}h.l=ye+" ["+h.Z()+"]",Sc(h)}}finally{Is(h)}}}}function Is(h,_){if(h.g){xl(h);let x=h.g,z=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||Mt(h,"ready");try{x.onreadystatechange=z}catch{}}}function xl(h){h.I&&(a.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function bo(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<bo(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),Et(_)}};function Yu(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Ks(h){let _={};h=(h.g&&2<=bo(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let z=0;z<h.length;z++){if(J(h[z]))continue;var x=E(h[z]);let ae=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();let ye=_[ae]||[];_[ae]=ye,ye.push(x)}$(_,function(z){return z.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ro(h,_,x){return x&&x.internalChannelParams&&x.internalChannelParams[h]||_}function Qu(h){this.Aa=0,this.i=[],this.j=new qn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ro("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ro("baseRetryDelayMs",5e3,h),this.cb=ro("retryDelaySeedMs",1e4,h),this.Wa=ro("forwardChannelMaxRetries",2,h),this.wa=ro("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new qu(h&&h.concurrentRequestLimit),this.Da=new Rp,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Qu.prototype,n.la=8,n.G=1,n.connect=function(h,_,x,z){rr(0),this.W=h,this.H=_||{},x&&z!==void 0&&(this.H.OSID=x,this.H.OAID=z),this.F=this.X,this.I=Er(this,null,this.W),M(this)};function Ys(h){if(m(h),h.G==3){var _=h.U++,x=wo(h.I);if(Pn(x,"SID",h.K),Pn(x,"RID",_),Pn(x,"TYPE","terminate"),le(h,x),_=new Ri(h,h.j,_),_.L=2,_.v=Ic(wo(x)),x=!1,a.navigator&&a.navigator.sendBeacon)try{x=a.navigator.sendBeacon(_.v.toString(),"")}catch{}!x&&a.Image&&(new Image().src=_.v,x=!0),x||(_.g=mr(_.j,null),_.g.ea(_.v)),_.F=Date.now(),wc(_)}Ln(h)}function Dc(h){h.g&&(at(h),h.g.cancel(),h.g=null)}function m(h){Dc(h),h.u&&(a.clearTimeout(h.u),h.u=null),jt(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&a.clearTimeout(h.s),h.s=null)}function M(h){if(!Hu(h.h)&&!h.s){h.s=!0;var _=h.Ga;Ce||$e(),fe||(Ce(),fe=!0),De.add(_,h),h.B=0}}function G(h,_){return zo(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=_.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=ui(v(h.Ga,h,_),Xn(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;let ae=new Ri(this,this.j,h),ye=this.o;if(this.S&&(ye?(ye=P(ye),U(ye,this.S)):ye=this.S),this.m!==null||this.O||(ae.H=ye,ye=null),this.P)e:{for(var _=0,x=0;x<this.i.length;x++){t:{var z=this.i[x];if("__data__"in z.map&&(z=z.map.__data__,typeof z=="string")){z=z.length;break t}z=void 0}if(z===void 0)break;if(_+=z,4096<_){_=x;break e}if(_===4096||x===this.i.length-1){_=x+1;break e}}_=1e3}else _=1e3;_=Ae(this,ae,_),x=wo(this.I),Pn(x,"RID",h),Pn(x,"CVER",22),this.D&&Pn(x,"X-HTTP-Session-Id",this.D),le(this,x),ye&&(this.O?_="headers="+encodeURIComponent(String(Ch(ye)))+"&"+_:this.m&&xc(x,this.m,ye)),$u(this.h,ae),this.Ua&&Pn(x,"TYPE","init"),this.P?(Pn(x,"$req",_),Pn(x,"SID","null"),ae.T=!0,Aa(ae,x,null)):Aa(ae,x,_),this.G=2}}else this.G==3&&(h?ne(this,h):this.i.length==0||Hu(this.h)||ne(this))};function ne(h,_){var x;_?x=_.l:x=h.U++;let z=wo(h.I);Pn(z,"SID",h.K),Pn(z,"RID",x),Pn(z,"AID",h.T),le(h,z),h.m&&h.o&&xc(z,h.m,h.o),x=new Ri(h,h.j,x,h.B+1),h.m===null&&(x.H=h.o),_&&(h.i=_.D.concat(h.i)),_=Ae(h,x,1e3),x.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),$u(h.h,x),Aa(x,z,_)}function le(h,_){h.H&&be(h.H,function(x,z){Pn(_,z,x)}),h.l&&Gu({},function(x,z){Pn(_,z,x)})}function Ae(h,_,x){x=Math.min(h.i.length,x);var z=h.l?v(h.l.Na,h.l,h):null;e:{var ae=h.i;let ye=-1;for(;;){let We=["count="+x];ye==-1?0<x?(ye=ae[0].g,We.push("ofs="+ye)):ye=0:We.push("ofs="+ye);let xn=!0;for(let vr=0;vr<x;vr++){let Lt=ae[vr].g,er=ae[vr].map;if(Lt-=ye,0>Lt)ye=Math.max(0,ae[vr].g-100),xn=!1;else try{Op(er,We,"req"+Lt+"_")}catch{z&&z(er)}}if(xn){z=We.join("&");break e}}}return h=h.i.splice(0,x),_.D=h,z}function Le(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;Ce||$e(),fe||(Ce(),fe=!0),De.add(_,h),h.v=0}}function rt(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=ui(v(h.Fa,h),Xn(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,kt(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=ui(v(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,rr(10),Dc(this),kt(this))};function at(h){h.A!=null&&(a.clearTimeout(h.A),h.A=null)}function kt(h){h.g=new Ri(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var _=wo(h.qa);Pn(_,"RID","rpc"),Pn(_,"SID",h.K),Pn(_,"AID",h.T),Pn(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&Pn(_,"TO",h.ja),Pn(_,"TYPE","xmlhttp"),le(h,_),h.m&&h.o&&xc(_,h.m,h.o),h.L&&(h.g.I=h.L);var x=h.g;h=h.ia,x.L=1,x.v=Ic(wo(_)),x.m=null,x.P=!0,_c(x,h)}n.Za=function(){this.C!=null&&(this.C=null,Dc(this),rt(this),rr(19))};function jt(h){h.C!=null&&(a.clearTimeout(h.C),h.C=null)}function pn(h,_){var x=null;if(h.g==_){jt(h),at(h),h.g=null;var z=2}else if(Ma(h.h,_))x=_.D,gr(h.h,_),z=1;else return;if(h.G!=0){if(_.o)if(z==1){x=_.m?_.m.length:0,_=Date.now()-_.F;var ae=h.B;z=vo(),Mt(z,new Ji(z,x)),M(h)}else Le(h);else if(ae=_.s,ae==3||ae==0&&0<_.X||!(z==1&&G(h,_)||z==2&&rt(h)))switch(x&&0<x.length&&(_=h.h,_.i=_.i.concat(x)),ae){case 1:$n(h,5);break;case 4:$n(h,10);break;case 3:$n(h,6);break;default:$n(h,2)}}}function Xn(h,_){let x=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(x*=2),x*_}function $n(h,_){if(h.j.info("Error code "+_),_==2){var x=v(h.fb,h),z=h.Xa;let ae=!z;z=new Ei(z||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||wl(z,"https"),Ic(z),ae?kp(z.toString(),x):Ws(z.toString(),x)}else rr(2);h.G=0,h.l&&h.l.sa(_),Ln(h),m(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),rr(2)):(this.j.info("Failed to ping google.com"),rr(1))};function Ln(h){if(h.G=0,h.ka=[],h.l){let _=Wu(h.h);(_.length!=0||h.i.length!=0)&&(L(h.ka,_),L(h.ka,h.i),h.h.i.length=0,k(h.i),h.i.length=0),h.l.ra()}}function Er(h,_,x){var z=x instanceof Ei?wo(x):new Ei(x);if(z.g!="")_&&(z.g=_+"."+z.g),bl(z,z.s);else{var ae=a.location;z=ae.protocol,_=_?_+"."+ae.hostname:ae.hostname,ae=+ae.port;var ye=new Ei(null);z&&wl(ye,z),_&&(ye.g=_),ae&&bl(ye,ae),x&&(ye.l=x),z=ye}return x=h.D,_=h.ya,x&&_&&Pn(z,x,_),Pn(z,"VER",h.la),le(h,z),z}function mr(h,_,x){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Ca&&!h.pa?new Hn(new bs({eb:x})):new Hn(h.pa),_.Ha(h.J),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hr(){}n=Hr.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Io(){}Io.prototype.g=function(h,_){return new ir(h,_)};function ir(h,_){At.call(this),this.g=new Qu(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!J(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!J(_)&&(this.g.D=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new Wo(this)}S(ir,At),ir.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ir.prototype.close=function(){Ys(this.g)},ir.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var x={};x.__data__=h,h=x}else this.u&&(x={},x.__data__=Un(h),h=x);_.i.push(new wh(_.Ya++,h)),_.G==3&&M(_)},ir.prototype.N=function(){this.g.l=null,delete this.j,Ys(this.g),delete this.g,ir.aa.N.call(this)};function Es(h){xt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(let x in _){h=x;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}S(Es,xt);function Sl(){bn.call(this),this.status=1}S(Sl,bn);function Wo(h){this.g=h}S(Wo,Hr),Wo.prototype.ua=function(){Mt(this.g,"a")},Wo.prototype.ta=function(h){Mt(this.g,new Es(h))},Wo.prototype.sa=function(h){Mt(this.g,new Sl)},Wo.prototype.ra=function(){Mt(this.g,"b")},Io.prototype.createWebChannel=Io.prototype.g,ir.prototype.send=ir.prototype.o,ir.prototype.open=ir.prototype.m,ir.prototype.close=ir.prototype.close,Mx=rl.createWebChannelTransport=function(){return new Io},Ax=rl.getStatEventTarget=function(){return vo()},Tx=rl.Event=Zi,u1=rl.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Xi.NO_ERROR=0,Xi.TIMEOUT=8,Xi.HTTP_ERROR=6,km=rl.ErrorCode=Xi,_o.COMPLETE="complete",Dx=rl.EventType=_o,Yn.EventType=$t,$t.OPEN="a",$t.CLOSE="b",$t.ERROR="c",$t.MESSAGE="d",At.prototype.listen=At.prototype.K,Rf=rl.WebChannel=Yn,hY=rl.FetchXmlHttpFactory=bs,Hn.prototype.listenOnce=Hn.prototype.L,Hn.prototype.getLastError=Hn.prototype.Ka,Hn.prototype.getLastErrorCode=Hn.prototype.Ba,Hn.prototype.getStatus=Hn.prototype.Z,Hn.prototype.getResponseJson=Hn.prototype.Oa,Hn.prototype.getResponseText=Hn.prototype.oa,Hn.prototype.send=Hn.prototype.ea,Hn.prototype.setWithCredentials=Hn.prototype.Ha,Sx=rl.XhrIo=Hn}).apply(typeof l1<"u"?l1:typeof self<"u"?self:typeof window<"u"?window:{});var l3="@firebase/firestore",u3="4.8.0";var vi=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};vi.UNAUTHENTICATED=new vi(null),vi.GOOGLE_CREDENTIALS=new vi("google-credentials-uid"),vi.FIRST_PARTY=new vi("first-party-uid"),vi.MOCK_USER=new vi("mock-user");var tp="11.10.0";var Yd=new Ja("@firebase/firestore");function Of(){return Yd.logLevel}function tt(n,...e){if(Yd.logLevel<=fn.DEBUG){let t=e.map(yD);Yd.debug(`Firestore (${tp}): ${n}`,...t)}}function il(n,...e){if(Yd.logLevel<=fn.ERROR){let t=e.map(yD);Yd.error(`Firestore (${tp}): ${n}`,...t)}}function Cu(n,...e){if(Yd.logLevel<=fn.WARN){let t=e.map(yD);Yd.warn(`Firestore (${tp}): ${n}`,...t)}}function yD(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Nt(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,t4(n,r,t)}function t4(n,e,t){let r=`FIRESTORE (${tp}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw il(r),new Error(r)}function On(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||t4(e,i,r)}function Yt(n,e){return n}var Re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ze=class extends us{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var pa=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var v1=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Ox=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(vi.UNAUTHENTICATED))}shutdown(){}},Lx=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Fx=class{constructor(e){this.t=e,this.currentUser=vi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){On(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new pa;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new pa,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>B(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{tt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(tt("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new pa)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(tt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(On(typeof r.accessToken=="string",31837,{l:r}),new v1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return On(e===null||typeof e=="string",2055,{h:e}),new vi(e)}},Vx=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=vi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},jx=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Vx(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(vi.FIRST_PARTY))}shutdown(){}invalidateToken(){}},y1=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Bx=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ro(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){On(this.o===void 0,3512);let r=o=>{o.error!=null&&tt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,tt("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{tt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):tt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new y1(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(On(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new y1(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function fY(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function n4(){return new TextEncoder}var jm=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=fY(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function hn(n,e){return n<e?-1:n>e?1:0}function Ux(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return hn(r,i);{let o=n4(),s=pY(o.encode(d3(n,t)),o.encode(d3(e,t)));return s!==0?s:hn(r,i)}}t+=r>65535?2:1}return hn(n.length,e.length)}function d3(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function pY(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return hn(n[t],e[t]);return hn(n.length,e.length)}function qf(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var h3="__name__",_1=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Nt(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Nt(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return hn(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):Ux(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return nl.fromString(e.substring(4,e.length-2))}},hr=class n extends _1{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new Ze(Re.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},gY=/^[_a-zA-Z][_a-zA-Z0-9]*$/,hs=class n extends _1{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return gY.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===h3}static keyField(){return new n([h3])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new Ze(Re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new Ze(Re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Ze(Re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Ze(Re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Tt=class n{constructor(e){this.path=e}static fromPath(e){return new n(hr.fromString(e))}static fromName(e){return new n(hr.fromString(e).popFirst(5))}static empty(){return new n(hr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&hr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return hr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new hr(e.slice()))}};function r4(n,e,t){if(!t)throw new Ze(Re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function mY(n,e,t,r){if(e===!0&&r===!0)throw new Ze(Re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function f3(n){if(!Tt.isDocumentKey(n))throw new Ze(Re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function p3(n){if(Tt.isDocumentKey(n))throw new Ze(Re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function i4(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function X1(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Nt(12329,{type:typeof n})}function ga(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ze(Re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=X1(n);throw new Ze(Re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function vY(n,e){if(e<=0)throw new Ze(Re.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function ei(n,e){let t={typeString:n};return e&&(t.value=e),t}function Jm(n,e){if(!i4(n))throw new Ze(Re.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new Ze(Re.INVALID_ARGUMENT,t);return!0}var g3=-62135596800,m3=1e6,Bt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*m3);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ze(Re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ze(Re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<g3)throw new Ze(Re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ze(Re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/m3}_compareTo(e){return this.seconds===e.seconds?hn(this.nanoseconds,e.nanoseconds):hn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Jm(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-g3;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Bt._jsonSchemaVersion="firestore/timestamp/1.0",Bt._jsonSchema={type:ei("string",Bt._jsonSchemaVersion),seconds:ei("number"),nanoseconds:ei("number")};var en=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Bt(0,0))}static max(){return new n(new Bt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Bm=-1,zx=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};zx.UNKNOWN_ID=-1;function yY(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=en.fromTimestamp(r===1e9?new Bt(t+1,0):new Bt(t,r));return new Qd(i,Tt.empty(),e)}function _Y(n){return new Qd(n.readTime,n.key,Bm)}var Qd=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(en.min(),Tt.empty(),Bm)}static max(){return new n(en.max(),Tt.empty(),Bm)}};function wY(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Tt.comparator(n.documentKey,e.documentKey),t!==0?t:hn(n.largestBatchId,e.largestBatchId))}var bY="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",qx=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function np(n){return B(this,null,function*(){if(n.code!==Re.FAILED_PRECONDITION||n.message!==bY)throw n;tt("LocalStore","Unexpectedly lost primary lease")})}var Be=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Nt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;t(e[l]).next(u=>{s[l]=u,++a,a===o&&r(s)},u=>i(u))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function IY(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function rp(n){return n.name==="IndexedDbTransactionError"}var _D=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),wD=-1;function ew(n){return n==null}function Um(n){return n===0&&1/n==-1/0}function EY(n){return typeof n=="number"&&Number.isInteger(n)&&!Um(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var o4="";function CY(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=v3(e)),e=xY(n.get(t),e);return v3(e)}function xY(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case o4:t+="";break;default:t+=o}}return t}function v3(n){return n+o4+""}var SY="remoteDocuments",s4="owner";var a4="mutationQueues";var c4="mutations";var l4="documentMutations",DY="remoteDocumentsV14";var u4="remoteDocumentGlobal";var d4="targets";var h4="targetDocuments";var f4="targetGlobal",p4="collectionParents";var g4="clientMetadata";var m4="bundles";var v4="namedQueries";var TY="indexConfiguration";var AY="indexState";var MY="indexEntries";var y4="documentOverlays";var PY="globals";var NY=[a4,c4,l4,SY,d4,s4,f4,h4,g4,u4,p4,m4,v4],G2e=[...NY,y4],kY=[a4,c4,l4,DY,d4,s4,f4,h4,g4,u4,p4,m4,v4,y4],RY=kY,OY=[...RY,TY,AY,MY];var K2e=[...OY,PY];function y3(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Mu(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function _4(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ar=class n{constructor(e,t){this.comparator=e,this.root=t||nc.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,nc.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nc.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jf(this.root,e,this.comparator,!1)}getReverseIterator(){return new jf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jf(this.root,e,this.comparator,!0)}},jf=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},nc=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Nt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Nt(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw Nt(27949);return e+(this.isRed()?0:1)}};nc.EMPTY=null,nc.RED=!0,nc.BLACK=!1;nc.EMPTY=new class{constructor(){this.size=0}get key(){throw Nt(57766)}get value(){throw Nt(16141)}get color(){throw Nt(16727)}get left(){throw Nt(29726)}get right(){throw Nt(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new nc(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var yi=class n{constructor(e){this.comparator=e,this.data=new Ar(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new w1(this.data.getIterator())}getIteratorFrom(e){return new w1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},w1=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Us=class n{constructor(e){this.fields=e,e.sort(hs.comparator)}static empty(){return new n([])}unionWith(e){let t=new yi(hs.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return qf(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var b1=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Hi=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new b1("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return hn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Hi.EMPTY_BYTE_STRING=new Hi("");var LY=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ol(n){if(On(!!n,39018),typeof n=="string"){let e=0,t=LY.exec(n);if(On(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:dr(n.seconds),nanos:dr(n.nanos)}}function dr(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function sl(n){return typeof n=="string"?Hi.fromBase64String(n):Hi.fromUint8Array(n)}var w4="server_timestamp",b4="__type__",I4="__previous_value__",E4="__local_write_time__";function bD(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[b4])===null||t===void 0?void 0:t.stringValue)===w4}function tw(n){let e=n.mapValue.fields[I4];return bD(e)?tw(e):e}function zm(n){let e=ol(n.mapValue.fields[E4].timestampValue);return new Bt(e.seconds,e.nanos)}var Hx=class{constructor(e,t,r,i,o,s,a,c,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l,this.isUsingEmulator=u}},I1="(default)",E1=class n{constructor(e,t){this.projectId=e,this.database=t||I1}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===I1}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var ID="__type__",C4="__max__",d1={mapValue:{fields:{__type__:{stringValue:C4}}}},ED="__vector__",Hf="value";function xu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?bD(n)?4:S4(n)?9007199254740991:x4(n)?10:11:Nt(28295,{value:n})}function sc(n,e){if(n===e)return!0;let t=xu(n);if(t!==xu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return zm(n).isEqual(zm(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=ol(i.timestampValue),a=ol(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return sl(i.bytesValue).isEqual(sl(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return dr(i.geoPointValue.latitude)===dr(o.geoPointValue.latitude)&&dr(i.geoPointValue.longitude)===dr(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return dr(i.integerValue)===dr(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=dr(i.doubleValue),a=dr(o.doubleValue);return s===a?Um(s)===Um(a):isNaN(s)&&isNaN(a)}return!1})(n,e);case 9:return qf(n.arrayValue.values||[],e.arrayValue.values||[],sc);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(y3(s)!==y3(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!sc(s[c],a[c])))return!1;return!0})(n,e);default:return Nt(52216,{left:n})}}function qm(n,e){return(n.values||[]).find(t=>sc(t,e))!==void 0}function $f(n,e){if(n===e)return 0;let t=xu(n),r=xu(e);if(t!==r)return hn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return hn(n.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=dr(o.integerValue||o.doubleValue),c=dr(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return _3(n.timestampValue,e.timestampValue);case 4:return _3(zm(n),zm(e));case 5:return Ux(n.stringValue,e.stringValue);case 6:return(function(o,s){let a=sl(o),c=sl(s);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let u=hn(a[l],c[l]);if(u!==0)return u}return hn(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=hn(dr(o.latitude),dr(s.latitude));return a!==0?a:hn(dr(o.longitude),dr(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return w3(n.arrayValue,e.arrayValue);case 10:return(function(o,s){var a,c,l,u;let g=o.fields||{},v=s.fields||{},p=(a=g[Hf])===null||a===void 0?void 0:a.arrayValue,S=(c=v[Hf])===null||c===void 0?void 0:c.arrayValue,k=hn(((l=p?.values)===null||l===void 0?void 0:l.length)||0,((u=S?.values)===null||u===void 0?void 0:u.length)||0);return k!==0?k:w3(p,S)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===d1.mapValue&&s===d1.mapValue)return 0;if(o===d1.mapValue)return 1;if(s===d1.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let g=0;g<c.length&&g<u.length;++g){let v=Ux(c[g],u[g]);if(v!==0)return v;let p=$f(a[c[g]],l[u[g]]);if(p!==0)return p}return hn(c.length,u.length)})(n.mapValue,e.mapValue);default:throw Nt(23264,{le:t})}}function _3(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return hn(n,e);let t=ol(n),r=ol(e),i=hn(t.seconds,r.seconds);return i!==0?i:hn(t.nanos,r.nanos)}function w3(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=$f(t[i],r[i]);if(o)return o}return hn(t.length,r.length)}function Wf(n){return $x(n)}function $x(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=ol(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return sl(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Tt.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=$x(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${$x(t.fields[s])}`;return i+"}"})(n.mapValue):Nt(61005,{value:n})}function p1(n){switch(xu(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=tw(n);return e?16+p1(e):16;case 5:return 2*n.stringValue.length;case 6:return sl(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+p1(o),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Mu(r.fields,(o,s)=>{i+=o.length+p1(s)}),i})(n.mapValue);default:throw Nt(13486,{value:n})}}function b3(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Wx(n){return!!n&&"integerValue"in n}function CD(n){return!!n&&"arrayValue"in n}function I3(n){return!!n&&"nullValue"in n}function E3(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function g1(n){return!!n&&"mapValue"in n}function x4(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[ID])===null||t===void 0?void 0:t.stringValue)===ED}function Om(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Mu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Om(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Om(n.arrayValue.values[t]);return e}return Object.assign({},n)}function S4(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===C4}var Q2e={mapValue:{fields:{[ID]:{stringValue:ED},[Hf]:{arrayValue:{}}}}};var ds=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!g1(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Om(t)}setAll(e){let t=hs.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Om(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());g1(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return sc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];g1(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Mu(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Om(this.value))}};function D4(n){let e=[];return Mu(n.fields,(t,r)=>{let i=new hs([t]);if(g1(r)){let o=D4(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Us(e)}var ma=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,en.min(),en.min(),en.min(),ds.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,en.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,en.min(),en.min(),ds.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,en.min(),en.min(),ds.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(en.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ds.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ds.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=en.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Gf=class{constructor(e,t){this.position=e,this.inclusive=t}};function C3(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=Tt.comparator(Tt.fromName(s.referenceValue),t.key):r=$f(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function x3(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!sc(n.position[t],e.position[t]))return!1;return!0}var Zd=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function FY(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var C1=class{},Xr=class n extends C1{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Kx(e,t,r):t==="array-contains"?new Zx(e,r):t==="in"?new Jx(e,r):t==="not-in"?new Xx(e,r):t==="array-contains-any"?new eS(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Yx(e,r):new Qx(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison($f(t,this.value)):t!==null&&xu(this.value)===xu(t)&&this.matchesComparison($f(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Nt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},va=class n extends C1{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return T4(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function T4(n){return n.op==="and"}function A4(n){return VY(n)&&T4(n)}function VY(n){for(let e of n.filters)if(e instanceof va)return!1;return!0}function Gx(n){if(n instanceof Xr)return n.field.canonicalString()+n.op.toString()+Wf(n.value);if(A4(n))return n.filters.map(e=>Gx(e)).join(",");{let e=n.filters.map(t=>Gx(t)).join(",");return`${n.op}(${e})`}}function M4(n,e){return n instanceof Xr?(function(r,i){return i instanceof Xr&&r.op===i.op&&r.field.isEqual(i.field)&&sc(r.value,i.value)})(n,e):n instanceof va?(function(r,i){return i instanceof va&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&M4(s,i.filters[a]),!0):!1})(n,e):void Nt(19439)}function P4(n){return n instanceof Xr?(function(t){return`${t.field.canonicalString()} ${t.op} ${Wf(t.value)}`})(n):n instanceof va?(function(t){return t.op.toString()+" {"+t.getFilters().map(P4).join(" ,")+"}"})(n):"Filter"}var Kx=class extends Xr{constructor(e,t,r){super(e,t,r),this.key=Tt.fromName(r.referenceValue)}matches(e){let t=Tt.comparator(e.key,this.key);return this.matchesComparison(t)}},Yx=class extends Xr{constructor(e,t){super(e,"in",t),this.keys=N4("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Qx=class extends Xr{constructor(e,t){super(e,"not-in",t),this.keys=N4("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function N4(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Tt.fromName(r.referenceValue))}var Zx=class extends Xr{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return CD(t)&&qm(t.arrayValue,this.value)}},Jx=class extends Xr{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&qm(this.value.arrayValue,t)}},Xx=class extends Xr{constructor(e,t){super(e,"not-in",t)}matches(e){if(qm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!qm(this.value.arrayValue,t)}},eS=class extends Xr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!CD(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>qm(this.value.arrayValue,r))}};var tS=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function S3(n,e=null,t=[],r=[],i=null,o=null,s=null){return new tS(n,e,t,r,i,o,s)}function xD(n){let e=Yt(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Gx(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),ew(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Wf(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Wf(r)).join(",")),e.Pe=t}return e.Pe}function SD(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!FY(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!M4(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!x3(n.startAt,e.startAt)&&x3(n.endAt,e.endAt)}function nS(n){return Tt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Su=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function jY(n,e,t,r,i,o,s,a){return new Su(n,e,t,r,i,o,s,a)}function DD(n){return new Su(n)}function D3(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function k4(n){return n.collectionGroup!==null}function Lm(n){let e=Yt(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new yi(hs.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new Zd(o,r))}),t.has(hs.keyField().canonicalString())||e.Te.push(new Zd(hs.keyField(),r))}return e.Te}function rc(n){let e=Yt(n);return e.Ie||(e.Ie=BY(e,Lm(n))),e.Ie}function BY(n,e){if(n.limitType==="F")return S3(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Zd(i.field,o)});let t=n.endAt?new Gf(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Gf(n.startAt.position,n.startAt.inclusive):null;return S3(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function rS(n,e){let t=n.filters.concat([e]);return new Su(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function x1(n,e,t){return new Su(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function nw(n,e){return SD(rc(n),rc(e))&&n.limitType===e.limitType}function R4(n){return`${xD(rc(n))}|lt:${n.limitType}`}function Lf(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>P4(i)).join(", ")}]`),ew(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Wf(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Wf(i)).join(",")),`Target(${r})`})(rc(n))}; limitType=${n.limitType})`}function rw(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Tt.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of Lm(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,c){let l=C3(s,a,c);return s.inclusive?l<=0:l<0})(r.startAt,Lm(r),i)||r.endAt&&!(function(s,a,c){let l=C3(s,a,c);return s.inclusive?l>=0:l>0})(r.endAt,Lm(r),i))})(n,e)}function UY(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function O4(n){return(e,t)=>{let r=!1;for(let i of Lm(n)){let o=zY(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function zY(n,e,t){let r=n.field.isKeyField()?Tt.comparator(e.key,t.key):(function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?$f(c,l):Nt(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Nt(19790,{direction:n.dir})}}var al=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Mu(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return _4(this.inner)}size(){return this.innerSize}};var qY=new Ar(Tt.comparator);function cl(){return qY}var L4=new Ar(Tt.comparator);function Rm(...n){let e=L4;for(let t of n)e=e.insert(t.key,t);return e}function F4(n){let e=L4;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function $d(){return Fm()}function V4(){return Fm()}function Fm(){return new al(n=>n.toString(),(n,e)=>n.isEqual(e))}var HY=new Ar(Tt.comparator),$Y=new yi(Tt.comparator);function vn(...n){let e=$Y;for(let t of n)e=e.add(t);return e}var WY=new yi(hn);function GY(){return WY}function TD(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Um(e)?"-0":e}}function j4(n){return{integerValue:""+n}}function KY(n,e){return EY(e)?j4(e):TD(n,e)}var Kf=class{constructor(){this._=void 0}};function YY(n,e,t){return n instanceof Yf?(function(i,o){let s={fields:{[b4]:{stringValue:w4},[E4]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&bD(o)&&(o=tw(o)),o&&(s.fields[I4]=o),{mapValue:s}})(t,e):n instanceof Jd?U4(n,e):n instanceof Xd?z4(n,e):(function(i,o){let s=B4(i,o),a=T3(s)+T3(i.Ee);return Wx(s)&&Wx(i.Ee)?j4(a):TD(i.serializer,a)})(n,e)}function QY(n,e,t){return n instanceof Jd?U4(n,e):n instanceof Xd?z4(n,e):t}function B4(n,e){return n instanceof Qf?(function(r){return Wx(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var Yf=class extends Kf{},Jd=class extends Kf{constructor(e){super(),this.elements=e}};function U4(n,e){let t=q4(e);for(let r of n.elements)t.some(i=>sc(i,r))||t.push(r);return{arrayValue:{values:t}}}var Xd=class extends Kf{constructor(e){super(),this.elements=e}};function z4(n,e){let t=q4(e);for(let r of n.elements)t=t.filter(i=>!sc(i,r));return{arrayValue:{values:t}}}var Qf=class extends Kf{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function T3(n){return dr(n.integerValue||n.doubleValue)}function q4(n){return CD(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function ZY(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Jd&&i instanceof Jd||r instanceof Xd&&i instanceof Xd?qf(r.elements,i.elements,sc):r instanceof Qf&&i instanceof Qf?sc(r.Ee,i.Ee):r instanceof Yf&&i instanceof Yf})(n.transform,e.transform)}var iS=class{constructor(e,t){this.version=e,this.transformResults=t}},ic=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function m1(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Zf=class{};function H4(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Hm(n.key,ic.none()):new eh(n.key,n.data,ic.none());{let t=n.data,r=ds.empty(),i=new yi(hs.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new ac(n.key,r,new Us(i.toArray()),ic.none())}}function JY(n,e,t){n instanceof eh?(function(i,o,s){let a=i.value.clone(),c=M3(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(n,e,t):n instanceof ac?(function(i,o,s){if(!m1(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=M3(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll($4(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(n,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function Vm(n,e,t,r){return n instanceof eh?(function(o,s,a,c){if(!m1(o.precondition,s))return a;let l=o.value.clone(),u=P3(o.fieldTransforms,c,s);return l.setAll(u),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(n,e,t,r):n instanceof ac?(function(o,s,a,c){if(!m1(o.precondition,s))return a;let l=P3(o.fieldTransforms,c,s),u=s.data;return u.setAll($4(o)),u.setAll(l),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))})(n,e,t,r):(function(o,s,a){return m1(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(n,e,t)}function XY(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=B4(r.transform,i||null);o!=null&&(t===null&&(t=ds.empty()),t.set(r.field,o))}return t||null}function A3(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&qf(r,i,(o,s)=>ZY(o,s))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var eh=class extends Zf{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},ac=class extends Zf{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function $4(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function M3(n,e,t){let r=new Map;On(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,QY(s,a,t[i]))}return r}function P3(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,YY(o,s,e))}return r}var Hm=class extends Zf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},oS=class extends Zf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var sS=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&JY(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Vm(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Vm(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=V4();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=H4(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(en.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),vn())}isEqual(e){return this.batchId===e.batchId&&qf(this.mutations,e.mutations,(t,r)=>A3(t,r))&&qf(this.baseMutations,e.baseMutations,(t,r)=>A3(t,r))}},aS=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){On(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return HY})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var cS=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var lS=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Zr,Cn;function eQ(n){switch(n){case Re.OK:return Nt(64938);case Re.CANCELLED:case Re.UNKNOWN:case Re.DEADLINE_EXCEEDED:case Re.RESOURCE_EXHAUSTED:case Re.INTERNAL:case Re.UNAVAILABLE:case Re.UNAUTHENTICATED:return!1;case Re.INVALID_ARGUMENT:case Re.NOT_FOUND:case Re.ALREADY_EXISTS:case Re.PERMISSION_DENIED:case Re.FAILED_PRECONDITION:case Re.ABORTED:case Re.OUT_OF_RANGE:case Re.UNIMPLEMENTED:case Re.DATA_LOSS:return!0;default:return Nt(15467,{code:n})}}function W4(n){if(n===void 0)return il("GRPC error has no .code"),Re.UNKNOWN;switch(n){case Zr.OK:return Re.OK;case Zr.CANCELLED:return Re.CANCELLED;case Zr.UNKNOWN:return Re.UNKNOWN;case Zr.DEADLINE_EXCEEDED:return Re.DEADLINE_EXCEEDED;case Zr.RESOURCE_EXHAUSTED:return Re.RESOURCE_EXHAUSTED;case Zr.INTERNAL:return Re.INTERNAL;case Zr.UNAVAILABLE:return Re.UNAVAILABLE;case Zr.UNAUTHENTICATED:return Re.UNAUTHENTICATED;case Zr.INVALID_ARGUMENT:return Re.INVALID_ARGUMENT;case Zr.NOT_FOUND:return Re.NOT_FOUND;case Zr.ALREADY_EXISTS:return Re.ALREADY_EXISTS;case Zr.PERMISSION_DENIED:return Re.PERMISSION_DENIED;case Zr.FAILED_PRECONDITION:return Re.FAILED_PRECONDITION;case Zr.ABORTED:return Re.ABORTED;case Zr.OUT_OF_RANGE:return Re.OUT_OF_RANGE;case Zr.UNIMPLEMENTED:return Re.UNIMPLEMENTED;case Zr.DATA_LOSS:return Re.DATA_LOSS;default:return Nt(39323,{code:n})}}(Cn=Zr||(Zr={}))[Cn.OK=0]="OK",Cn[Cn.CANCELLED=1]="CANCELLED",Cn[Cn.UNKNOWN=2]="UNKNOWN",Cn[Cn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Cn[Cn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Cn[Cn.NOT_FOUND=5]="NOT_FOUND",Cn[Cn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Cn[Cn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Cn[Cn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Cn[Cn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Cn[Cn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Cn[Cn.ABORTED=10]="ABORTED",Cn[Cn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Cn[Cn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Cn[Cn.INTERNAL=13]="INTERNAL",Cn[Cn.UNAVAILABLE=14]="UNAVAILABLE",Cn[Cn.DATA_LOSS=15]="DATA_LOSS";var N3=null;var tQ=new nl([4294967295,4294967295],0);function k3(n){let e=n4().encode(n),t=new xx;return t.update(e),new Uint8Array(t.digest())}function R3(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new nl([t,r],0),new nl([i,o],0)]}var uS=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Wd(`Invalid padding: ${t}`);if(r<0)throw new Wd(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Wd(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Wd(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=nl.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(nl.fromNumber(r)));return i.compare(tQ)===1&&(i=new nl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=k3(e),[r,i]=R3(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let t=k3(e),[r,i]=R3(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Wd=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var S1=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,$m.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(en.min(),i,new Ar(hn),cl(),vn())}},$m=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,vn(),vn(),vn())}};var Bf=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},D1=class{constructor(e,t){this.targetId=e,this.De=t}},T1=class{constructor(e,t,r=Hi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},A1=class{constructor(){this.ve=0,this.Ce=O3(),this.Fe=Hi.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=vn(),t=vn(),r=vn();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Nt(38017,{changeType:o})}}),new $m(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=O3()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,On(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},dS=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=cl(),this.je=h1(),this.Je=h1(),this.He=new Ar(hn)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:Nt(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(nS(o))if(r===0){let s=new Tt(o.path);this.Xe(t,s,ma.newNoDocument(s,en.min()))}else On(r===1,20013,{expectedCount:r});else{let s=this.ot(t);if(s!==r){let a=this._t(e),c=a?this.ut(a,e,s):1;if(c!==0){this.rt(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,l)}N3?.ct((function(u,g,v,p,S){var k,L,R,J,X,Z;let me={localCacheCount:u,existenceFilterCount:g.count,databaseId:v.database,projectId:v.projectId},be=g.unchangedNames;return be&&(me.bloomFilter={applied:S===0,hashCount:(k=be?.hashCount)!==null&&k!==void 0?k:0,bitmapLength:(J=(R=(L=be?.bits)===null||L===void 0?void 0:L.bitmap)===null||R===void 0?void 0:R.length)!==null&&J!==void 0?J:0,padding:(Z=(X=be?.bits)===null||X===void 0?void 0:X.padding)!==null&&Z!==void 0?Z:0,mightContain:$=>{var P;return(P=p?.mightContain($))!==null&&P!==void 0&&P}}),me})(s,e.De,this.We.lt(),a,c))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=sl(r).toUint8Array()}catch(c){if(c instanceof b1)return Cu("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new uS(s,i,o)}catch(c){return Cu(c instanceof Wd?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&nS(a.target)){let c=new Tt(a.target.path);this.Tt(c).has(s)||this.It(s,c)||this.Xe(s,c,ma.newNoDocument(c,e))}o.Ne&&(t.set(s,o.Le()),o.ke())}});let r=vn();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.st(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new S1(e,t,this.He,this.ze,r);return this.ze=cl(),this.je=h1(),this.Je=h1(),this.He=new Ar(hn),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new A1,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new yi(hn),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new yi(hn),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||tt("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new A1),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function h1(){return new Ar(Tt.comparator)}function O3(){return new Ar(Tt.comparator)}var nQ={asc:"ASCENDING",desc:"DESCENDING"},rQ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},iQ={and:"AND",or:"OR"},hS=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function fS(n,e){return n.useProto3Json||ew(e)?e:{value:e}}function M1(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function G4(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function oQ(n,e){return M1(n,e.toTimestamp())}function oc(n){return On(!!n,49232),en.fromTimestamp((function(t){let r=ol(t);return new Bt(r.seconds,r.nanos)})(n))}function AD(n,e){return pS(n,e).canonicalString()}function pS(n,e){let t=(function(i){return new hr(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function K4(n){let e=hr.fromString(n);return On(X4(e),10190,{key:e.toString()}),e}function gS(n,e){return AD(n.databaseId,e.path)}function Px(n,e){let t=K4(e);if(t.get(1)!==n.databaseId.projectId)throw new Ze(Re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ze(Re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Tt(Q4(t))}function Y4(n,e){return AD(n.databaseId,e)}function sQ(n){let e=K4(n);return e.length===4?hr.emptyPath():Q4(e)}function mS(n){return new hr(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Q4(n){return On(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function L3(n,e,t){return{name:gS(n,e),fields:t.value.mapValue.fields}}function aQ(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Nt(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,u){return l.useProto3Json?(On(u===void 0||typeof u=="string",58123),Hi.fromBase64String(u||"")):(On(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),Hi.fromUint8Array(u||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(l){let u=l.code===void 0?Re.UNKNOWN:W4(l.code);return new Ze(u,l.message||"")})(s);t=new T1(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Px(n,r.document.name),o=oc(r.document.updateTime),s=r.document.createTime?oc(r.document.createTime):en.min(),a=new ds({mapValue:{fields:r.document.fields}}),c=ma.newFoundDocument(i,o,s,a),l=r.targetIds||[],u=r.removedTargetIds||[];t=new Bf(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Px(n,r.document),o=r.readTime?oc(r.readTime):en.min(),s=ma.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Bf([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Px(n,r.document),o=r.removedTargetIds||[];t=new Bf([],o,i,null)}else{if(!("filter"in e))return Nt(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new lS(i,o),a=r.targetId;t=new D1(a,s)}}return t}function cQ(n,e){let t;if(e instanceof eh)t={update:L3(n,e.key,e.value)};else if(e instanceof Hm)t={delete:gS(n,e.key)};else if(e instanceof ac)t={update:L3(n,e.key,e.data),updateMask:vQ(e.fieldMask)};else{if(!(e instanceof oS))return Nt(16599,{Rt:e.type});t={verify:gS(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof Yf)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Jd)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Xd)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Qf)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw Nt(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:oQ(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Nt(27497)})(n,e.precondition)),t}function lQ(n,e){return n&&n.length>0?(On(e!==void 0,14353),n.map(t=>(function(i,o){let s=i.updateTime?oc(i.updateTime):oc(o);return s.isEqual(en.min())&&(s=oc(o)),new iS(s,i.transformResults||[])})(t,e))):[]}function uQ(n,e){return{documents:[Y4(n,e.path)]}}function dQ(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Y4(n,i);let o=(function(l){if(l.length!==0)return J4(va.create(l,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(u=>(function(v){return{field:Ff(v.field),direction:pQ(v.dir)}})(u))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=fS(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:t,parent:i}}function hQ(n){let e=sQ(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){On(r===1,65062);let u=t.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let o=[];t.where&&(o=(function(g){let v=Z4(g);return v instanceof va&&A4(v)?v.getFilters():[v]})(t.where));let s=[];t.orderBy&&(s=(function(g){return g.map(v=>(function(S){return new Zd(Vf(S.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(v))})(t.orderBy));let a=null;t.limit&&(a=(function(g){let v;return v=typeof g=="object"?g.value:g,ew(v)?null:v})(t.limit));let c=null;t.startAt&&(c=(function(g){let v=!!g.before,p=g.values||[];return new Gf(p,v)})(t.startAt));let l=null;return t.endAt&&(l=(function(g){let v=!g.before,p=g.values||[];return new Gf(p,v)})(t.endAt)),jY(e,i,s,o,a,"F",c,l)}function fQ(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Nt(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Z4(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Vf(t.unaryFilter.field);return Xr.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Vf(t.unaryFilter.field);return Xr.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Vf(t.unaryFilter.field);return Xr.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Vf(t.unaryFilter.field);return Xr.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Nt(61313);default:return Nt(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Xr.create(Vf(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Nt(58110);default:return Nt(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return va.create(t.compositeFilter.filters.map(r=>Z4(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Nt(1026)}})(t.compositeFilter.op))})(n):Nt(30097,{filter:n})}function pQ(n){return nQ[n]}function gQ(n){return rQ[n]}function mQ(n){return iQ[n]}function Ff(n){return{fieldPath:n.canonicalString()}}function Vf(n){return hs.fromServerFormat(n.fieldPath)}function J4(n){return n instanceof Xr?(function(t){if(t.op==="=="){if(E3(t.value))return{unaryFilter:{field:Ff(t.field),op:"IS_NAN"}};if(I3(t.value))return{unaryFilter:{field:Ff(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(E3(t.value))return{unaryFilter:{field:Ff(t.field),op:"IS_NOT_NAN"}};if(I3(t.value))return{unaryFilter:{field:Ff(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ff(t.field),op:gQ(t.op),value:t.value}}})(n):n instanceof va?(function(t){let r=t.getFilters().map(i=>J4(i));return r.length===1?r[0]:{compositeFilter:{op:mQ(t.op),filters:r}}})(n):Nt(54877,{filter:n})}function vQ(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function X4(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Wm=class n{constructor(e,t,r,i,o=en.min(),s=en.min(),a=Hi.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var vS=class{constructor(e){this.gt=e}};function yQ(n){let e=hQ({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?x1(e,e.limit,"L"):e}var P1=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(dr(e.integerValue));else if("doubleValue"in e){let r=dr(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),Um(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=ol(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(sl(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?S4(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):x4(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):Nt(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let s=Hf,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(dr(a)),this.xt(s,t),this.Dt(o[s],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),Tt.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};P1.Ut=new P1;var yS=class{constructor(){this.Dn=new _S}addToCollectionParentIndex(e,t){return this.Dn.add(t),Be.resolve()}getCollectionParents(e,t){return Be.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return Be.resolve()}deleteFieldIndex(e,t){return Be.resolve()}deleteAllFieldIndexes(e){return Be.resolve()}createTargetIndexes(e,t){return Be.resolve()}getDocumentsMatchingTarget(e,t){return Be.resolve(null)}getIndexType(e,t){return Be.resolve(0)}getFieldIndexes(e,t){return Be.resolve([])}getNextCollectionGroupToUpdate(e){return Be.resolve(null)}getMinOffset(e,t){return Be.resolve(Qd.min())}getMinOffsetFromCollectionGroup(e,t){return Be.resolve(Qd.min())}updateCollectionGroup(e,t,r){return Be.resolve()}updateIndexEntries(e,t){return Be.resolve()}},_S=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new yi(hr.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new yi(hr.comparator)).toArray()}};var Z2e=new Uint8Array(0);var F3={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},eL=41943040,Bs=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Bs.DEFAULT_COLLECTION_PERCENTILE=10,Bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bs.DEFAULT=new Bs(eL,Bs.DEFAULT_COLLECTION_PERCENTILE,Bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bs.DISABLED=new Bs(-1,0,0);var Gm=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var V3="LruGarbageCollector",_Q=1048576;function j3([n,e],[t,r]){let i=hn(n,t);return i===0?hn(e,r):i}var wS=class{constructor(e){this.Tr=e,this.buffer=new yi(j3),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();j3(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},bS=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){tt(V3,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>B(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){rp(t)?tt(V3,"Ignoring IndexedDB error during garbage collection: ",t):yield np(t)}yield this.Rr(3e5)}))}},IS=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return Be.resolve(_D.ue);let r=new wS(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(tt("LruGarbageCollector","Garbage collection skipped; disabled"),Be.resolve(F3)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(tt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),F3):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,s,a,c,l,u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(tt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,s=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,t))).next(g=>(o=g,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(l=Date.now(),Of()<=fn.DEBUG&&tt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-u}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${g} documents in `+(l-c)+`ms
Total Duration: ${l-u}ms`),Be.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:g})))}};function wQ(n,e){return new IS(n,e)}var ES=class{constructor(){this.changes=new al(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ma.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?Be.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var CS=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var xS=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Vm(r.mutation,i,Us.empty(),Bt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,vn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=vn()){let i=$d();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Rm();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=$d();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,vn()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=cl(),s=Fm(),a=(function(){return Fm()})();return t.forEach((c,l)=>{let u=r.get(l.key);i.has(l.key)&&(u===void 0||u.mutation instanceof ac)?o=o.insert(l.key,l):u!==void 0?(s.set(l.key,u.mutation.getFieldMask()),Vm(u.mutation,l,u.mutation.getFieldMask(),Bt.now())):s.set(l.key,Us.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,u)=>s.set(l,u)),t.forEach((l,u)=>{var g;return a.set(l,new CS(u,(g=s.get(l))!==null&&g!==void 0?g:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Fm(),i=new Ar((s,a)=>s-a),o=vn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let u=r.get(c)||Us.empty();u=a.applyToLocalView(l,u),r.set(c,u);let g=(i.get(a.batchId)||vn()).add(c);i=i.insert(a.batchId,g)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,u=c.value,g=V4();u.forEach(v=>{if(!o.has(v)){let p=H4(t.get(v),r.get(v));p!==null&&g.set(v,p),o=o.add(v)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,g))}return Be.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(s){return Tt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):k4(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):Be.resolve($d()),a=Bm,c=o;return s.next(l=>Be.forEach(l,(u,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),o.get(u)?Be.resolve():this.remoteDocumentCache.getEntry(e,u).next(v=>{c=c.insert(u,v)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,vn())).next(u=>({batchId:a,changes:F4(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Tt(t)).next(r=>{let i=Rm();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Rm();return this.indexManager.getCollectionParents(e,o).next(a=>Be.forEach(a,c=>{let l=(function(g,v){return new Su(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(u=>{u.forEach((g,v)=>{s=s.insert(g,v)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,l)=>{let u=l.getKey();s.get(u)===null&&(s=s.insert(u,ma.newInvalidDocument(u)))});let a=Rm();return s.forEach((c,l)=>{let u=o.get(c);u!==void 0&&Vm(u.mutation,l,Us.empty(),Bt.now()),rw(t,l)&&(a=a.insert(c,l))}),a})}};var SS=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return Be.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:oc(i.createTime)}})(t)),Be.resolve()}getNamedQuery(e,t){return Be.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:yQ(i.bundledQuery),readTime:oc(i.readTime)}})(t)),Be.resolve()}};var DS=class{constructor(){this.overlays=new Ar(Tt.comparator),this.kr=new Map}getOverlay(e,t){return Be.resolve(this.overlays.get(t))}getOverlays(e,t){let r=$d();return Be.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),Be.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),Be.resolve()}getOverlaysForCollection(e,t,r){let i=$d(),o=t.length+1,s=new Tt(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return Be.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Ar((l,u)=>l-u),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let u=o.get(l.largestBatchId);u===null&&(u=$d(),o=o.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}let a=$d(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=i)););return Be.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new cS(t,r));let o=this.kr.get(t);o===void 0&&(o=vn(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var TS=class{constructor(){this.sessionToken=Hi.EMPTY_BYTE_STRING}getSessionToken(e){return Be.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Be.resolve()}};var Km=class{constructor(){this.qr=new yi(Jr.Qr),this.$r=new yi(Jr.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new Jr(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Jr(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new Tt(new hr([])),r=new Jr(t,e),i=new Jr(t,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new Tt(new hr([])),r=new Jr(t,e),i=new Jr(t,e+1),o=vn();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Jr(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Jr=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Tt.comparator(e.key,t.key)||hn(e.Hr,t.Hr)}static Ur(e,t){return hn(e.Hr,t.Hr)||Tt.comparator(e.key,t.key)}};var AS=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new yi(Jr.Qr)}checkEmpty(e){return Be.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new sS(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new Jr(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Be.resolve(s)}lookupMutationBatch(e,t){return Be.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return Be.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Be.resolve(this.mutationQueue.length===0?wD:this.er-1)}getAllMutationBatches(e){return Be.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Jr(t,0),i=new Jr(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),Be.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new yi(hn);return t.forEach(i=>{let o=new Jr(i,0),s=new Jr(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),Be.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;Tt.isDocumentKey(o)||(o=o.child(""));let s=new Jr(new Tt(o),0),a=new yi(hn);return this.Yr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.Hr)),!0)},s),Be.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){On(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return Be.forEach(t.mutations,i=>{let o=new Jr(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new Jr(t,0),i=this.Yr.firstAfterOrEqual(r);return Be.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Be.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var MS=class{constructor(e){this.ni=e,this.docs=(function(){return new Ar(Tt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return Be.resolve(r?r.document.mutableCopy():ma.newInvalidDocument(t))}getEntries(e,t){let r=cl();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():ma.newInvalidDocument(i))}),Be.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=cl(),s=t.path,a=new Tt(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:u}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||wY(_Y(u),r)<=0||(i.has(u.key)||rw(t,u))&&(o=o.insert(u.key,u.mutableCopy()))}return Be.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Nt(9500)}ri(e,t){return Be.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new PS(this)}getSize(e){return Be.resolve(this.size)}},PS=class extends ES{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),Be.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var NS=class{constructor(e){this.persistence=e,this.ii=new al(t=>xD(t),SD),this.lastRemoteSnapshotVersion=en.min(),this.highestTargetId=0,this.si=0,this.oi=new Km,this.targetCount=0,this._i=Gm.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),Be.resolve()}getLastRemoteSnapshotVersion(e){return Be.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Be.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),Be.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),Be.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new Gm(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,Be.resolve()}updateTargetData(e,t){return this.hr(t),Be.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,Be.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),Be.waitFor(o).next(()=>i)}getTargetCount(e){return Be.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return Be.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),Be.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),Be.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),Be.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return Be.resolve(r)}containsKey(e,t){return Be.resolve(this.oi.containsKey(t))}};var N1=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new _D(0),this.ci=!1,this.ci=!0,this.li=new TS,this.referenceDelegate=e(this),this.hi=new NS(this),this.indexManager=new yS,this.remoteDocumentCache=(function(i){return new MS(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new vS(t),this.Ti=new SS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new DS,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new AS(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){tt("MemoryPersistence","Starting transaction:",e);let i=new kS(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return Be.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},kS=class extends qx{constructor(e){super(),this.currentSequenceNumber=e}},RS=class n{constructor(e){this.persistence=e,this.Ai=new Km,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw Nt(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),Be.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),Be.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),Be.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Be.forEach(this.mi,r=>{let i=Tt.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,en.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return Be.or([()=>Be.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},k1=class n{constructor(e,t){this.persistence=e,this.gi=new al(r=>CY(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=wQ(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return Be.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return Be.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?Be.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,en.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),Be.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),Be.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),Be.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),Be.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=p1(e.data.value)),t}Sr(e,t,r){return Be.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return Be.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var OS=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=vn(),i=vn();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var LS=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var FS=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return xR()?8:IY(mi())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new LS;return this.ws(e,t,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,t,s,a.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Of()<=fn.DEBUG&&tt("QueryEngine","SDK will not create cache indexes for query:",Lf(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Be.resolve()):(Of()<=fn.DEBUG&&tt("QueryEngine","Query:",Lf(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Of()<=fn.DEBUG&&tt("QueryEngine","The SDK decides to create cache indexes for query:",Lf(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,rc(t))):Be.resolve())}ps(e,t){if(D3(t))return Be.resolve(null);let r=rc(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=x1(t,null,"F"),r=rc(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=vn(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.bs(t,a);return this.Ds(t,l,s,c.readTime)?this.ps(e,x1(t,null,"F")):this.vs(e,l,t,c)}))})))}ys(e,t,r,i){return D3(t)||i.isEqual(en.min())?Be.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ds(t,s,r,i)?Be.resolve(null):(Of()<=fn.DEBUG&&tt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Lf(t)),this.vs(e,s,t,yY(i,Bm)).next(a=>a))})}bs(e,t){let r=new yi(O4(e));return t.forEach((i,o)=>{rw(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return Of()<=fn.DEBUG&&tt("QueryEngine","Using full collection scan to execute query:",Lf(t)),this.gs.getDocumentsMatchingQuery(e,t,Qd.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var MD="LocalStore",bQ=3e8,VS=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new Ar(hn),this.Ms=new al(o=>xD(o),SD),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xS(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function IQ(n,e,t,r){return new VS(n,e,t,r)}function tL(n,e){return B(this,null,function*(){let t=Yt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=vn();for(let l of i){s.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}for(let l of o){a.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}return t.localDocuments.getDocuments(r,c).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function EQ(n,e){let t=Yt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return(function(a,c,l,u){let g=l.batch,v=g.keys(),p=Be.resolve();return v.forEach(S=>{p=p.next(()=>u.getEntry(c,S)).next(k=>{let L=l.docVersions.get(S);On(L!==null,48541),k.version.compareTo(L)<0&&(g.applyToRemoteDocument(k,l),k.isValidDocument()&&(k.setReadTime(l.commitVersion),u.addEntry(k)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(c,g))})(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=vn();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function nL(n){let e=Yt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function CQ(n,e){let t=Yt(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((u,g)=>{let v=i.get(g);if(!v)return;a.push(t.hi.removeMatchingKeys(o,u.removedDocuments,g).next(()=>t.hi.addMatchingKeys(o,u.addedDocuments,g)));let p=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?p=p.withResumeToken(Hi.EMPTY_BYTE_STRING,en.min()).withLastLimboFreeSnapshotVersion(en.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,r)),i=i.insert(g,p),(function(k,L,R){return k.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=bQ?!0:R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size>0})(v,p,u)&&a.push(t.hi.updateTargetData(o,p))});let c=cl(),l=vn();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,u))}),a.push(xQ(o,s,e.documentUpdates).next(u=>{c=u.Ls,l=u.ks})),!r.isEqual(en.min())){let u=t.hi.getLastRemoteSnapshotVersion(o).next(g=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(u)}return Be.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(t.Fs=i,o))}function xQ(n,e,t){let r=vn(),i=vn();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=cl();return t.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(en.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):tt(MD,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ls:s,ks:i}})}function SQ(n,e){let t=Yt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=wD),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function DQ(n,e){let t=Yt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,Be.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new Wm(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}function jS(n,e,t){return B(this,null,function*(){let r=Yt(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!rp(s))throw s;tt(MD,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function B3(n,e,t){let r=Yt(n),i=en.min(),o=vn();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(c,l,u){let g=Yt(c),v=g.Ms.get(u);return v!==void 0?Be.resolve(g.Fs.get(v)):g.hi.getTargetData(l,u)})(r,s,rc(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:en.min(),t?o:vn())).next(a=>(TQ(r,UY(e),a),{documents:a,qs:o})))}function TQ(n,e,t){let r=n.xs.get(e)||en.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}var R1=class{constructor(){this.activeTargetIds=GY()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var BS=class{constructor(){this.Fo=new R1,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new R1,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var US=class{xo(e){}shutdown(){}};var U3="ConnectivityMonitor",O1=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){tt(U3,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){tt(U3,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var f1=null;function zS(){return f1===null?f1=(function(){return 268435456+Math.round(2147483648*Math.random())})():f1++,"0x"+f1.toString(16)}var Nx="RestConnection",AQ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},qS=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===I1?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=zS(),a=this.Go(e,t.toUriEncodedString());tt(Nx,`Sending RPC '${e}' ${s}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,o);let{host:l}=new URL(a),u=lu(l);return this.jo(e,a,c,r,u).then(g=>(tt(Nx,`Received RPC '${e}' ${s}: `,g),g),g=>{throw Cu(Nx,`RPC '${e}' ${s} failed with error: `,g,"url: ",a,"request:",r),g})}Jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+tp})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=AQ[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var HS=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var qi="WebChannelConnection",$S=class extends qS{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let s=zS();return new Promise((a,c)=>{let l=new Sx;l.setWithCredentials(!0),l.listenOnce(Dx.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case km.NO_ERROR:let g=l.getResponseJson();tt(qi,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(g)),a(g);break;case km.TIMEOUT:tt(qi,`RPC '${e}' ${s} timed out`),c(new Ze(Re.DEADLINE_EXCEEDED,"Request time out"));break;case km.HTTP_ERROR:let v=l.getStatus();if(tt(qi,`RPC '${e}' ${s} failed with status:`,v,"response text:",l.getResponseText()),v>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);let S=p?.error;if(S&&S.status&&S.message){let k=(function(R){let J=R.toLowerCase().replace(/_/g,"-");return Object.values(Re).indexOf(J)>=0?J:Re.UNKNOWN})(S.status);c(new Ze(k,S.message))}else c(new Ze(Re.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new Ze(Re.UNAVAILABLE,"Connection failed."));break;default:Nt(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{tt(qi,`RPC '${e}' ${s} completed.`)}});let u=JSON.stringify(i);tt(qi,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",u,r,15)})}P_(e,t,r){let i=zS(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Mx(),a=Ax(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let u=o.join("");tt(qi,`Creating RPC '${e}' stream ${i}: ${u}`,c);let g=s.createWebChannel(u,c);this.T_(g);let v=!1,p=!1,S=new HS({Ho:L=>{p?tt(qi,`Not sending because RPC '${e}' stream ${i} is closed:`,L):(v||(tt(qi,`Opening RPC '${e}' stream ${i} transport.`),g.open(),v=!0),tt(qi,`RPC '${e}' stream ${i} sending:`,L),g.send(L))},Yo:()=>g.close()}),k=(L,R,J)=>{L.listen(R,X=>{try{J(X)}catch(Z){setTimeout(()=>{throw Z},0)}})};return k(g,Rf.EventType.OPEN,()=>{p||(tt(qi,`RPC '${e}' stream ${i} transport opened.`),S.s_())}),k(g,Rf.EventType.CLOSE,()=>{p||(p=!0,tt(qi,`RPC '${e}' stream ${i} transport closed`),S.__(),this.I_(g))}),k(g,Rf.EventType.ERROR,L=>{p||(p=!0,Cu(qi,`RPC '${e}' stream ${i} transport errored. Name:`,L.name,"Message:",L.message),S.__(new Ze(Re.UNAVAILABLE,"The operation could not be completed")))}),k(g,Rf.EventType.MESSAGE,L=>{var R;if(!p){let J=L.data[0];On(!!J,16349);let X=J,Z=X?.error||((R=X[0])===null||R===void 0?void 0:R.error);if(Z){tt(qi,`RPC '${e}' stream ${i} received error:`,Z);let me=Z.status,be=(function(D){let U=Zr[D];if(U!==void 0)return W4(U)})(me),$=Z.message;be===void 0&&(be=Re.INTERNAL,$="Unknown error status: "+me+" with message "+Z.message),p=!0,S.__(new Ze(be,$)),g.close()}else tt(qi,`RPC '${e}' stream ${i} received:`,J),S.a_(J)}}),k(a,Tx.STAT_EVENT,L=>{L.stat===u1.PROXY?tt(qi,`RPC '${e}' stream ${i} detected buffering proxy`):L.stat===u1.NOPROXY&&tt(qi,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.o_()},0),S}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function kx(){return typeof document<"u"?document:null}function iw(n){return new hS(n,!0)}var L1=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&tt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var z3="PersistentStream",F1=class{constructor(e,t,r,i,o,s,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new L1(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return B(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return B(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return B(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===Re.RESOURCE_EXHAUSTED?(il(t.toString()),il("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===Re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new Ze(Re.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>B(this,null,function*(){this.state=0,this.start()}))}G_(e){return tt(z3,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(tt(z3,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},WS=class extends F1{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=aQ(this.serializer,e),r=(function(o){if(!("targetChange"in o))return en.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?en.min():s.readTime?oc(s.readTime):en.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=mS(this.serializer),t.addTarget=(function(o,s){let a,c=s.target;if(a=nS(c)?{documents:uQ(o,c)}:{query:dQ(o,c).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=G4(o,s.resumeToken);let l=fS(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(en.min())>0){a.readTime=M1(o,s.snapshotVersion.toTimestamp());let l=fS(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=fQ(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=mS(this.serializer),t.removeTarget=e,this.k_(t)}},GS=class extends F1{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return On(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,On(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){On(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=lQ(e.writeResults,e.commitTime),r=oc(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=mS(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>cQ(this.serializer,r))};this.k_(t)}};var KS=class{},YS=class extends KS{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new Ze(Re.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,pS(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ze(Re.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,pS(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ze(Re.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},QS=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(il(t),this._a=!1):tt("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var th="RemoteStore",ZS=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>B(this,null,function*(){nh(this)&&(tt(th,"Restarting streams for network reachability change."),yield(function(c){return B(this,null,function*(){let l=Yt(c);l.Ia.add(4),yield Xm(l),l.Aa.set("Unknown"),l.Ia.delete(4),yield ow(l)})})(this))}))}),this.Aa=new QS(r,i)}};function ow(n){return B(this,null,function*(){if(nh(n))for(let e of n.da)yield e(!0)})}function Xm(n){return B(this,null,function*(){for(let e of n.da)yield e(!1)})}function rL(n,e){let t=Yt(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),RD(t)?kD(t):ip(t).x_()&&ND(t,e))}function PD(n,e){let t=Yt(n),r=ip(t);t.Ta.delete(e),r.x_()&&iL(t,e),t.Ta.size===0&&(r.x_()?r.B_():nh(t)&&t.Aa.set("Unknown"))}function ND(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(en.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ip(n).H_(e)}function iL(n,e){n.Ra.$e(e),ip(n).Y_(e)}function kD(n){n.Ra=new dS({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),ip(n).start(),n.Aa.aa()}function RD(n){return nh(n)&&!ip(n).M_()&&n.Ta.size>0}function nh(n){return Yt(n).Ia.size===0}function oL(n){n.Ra=void 0}function MQ(n){return B(this,null,function*(){n.Aa.set("Online")})}function PQ(n){return B(this,null,function*(){n.Ta.forEach((e,t)=>{ND(n,e)})})}function NQ(n,e){return B(this,null,function*(){oL(n),RD(n)?(n.Aa.la(e),kD(n)):n.Aa.set("Unknown")})}function kQ(n,e,t){return B(this,null,function*(){if(n.Aa.set("Online"),e instanceof T1&&e.state===2&&e.cause)try{yield(function(i,o){return B(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})})(n,e)}catch(r){tt(th,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield V1(n,r)}else if(e instanceof Bf?n.Ra.Ye(e):e instanceof D1?n.Ra.it(e):n.Ra.et(e),!t.isEqual(en.min()))try{let r=yield nL(n.localStore);t.compareTo(r)>=0&&(yield(function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let u=o.Ta.get(l);u&&o.Ta.set(l,u.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let u=o.Ta.get(c);if(!u)return;o.Ta.set(c,u.withResumeToken(Hi.EMPTY_BYTE_STRING,u.snapshotVersion)),iL(o,c);let g=new Wm(u.target,c,l,u.sequenceNumber);ND(o,g)}),o.remoteSyncer.applyRemoteEvent(a)})(n,t))}catch(r){tt(th,"Failed to raise snapshot:",r),yield V1(n,r)}})}function V1(n,e,t){return B(this,null,function*(){if(!rp(e))throw e;n.Ia.add(1),yield Xm(n),n.Aa.set("Offline"),t||(t=()=>nL(n.localStore)),n.asyncQueue.enqueueRetryable(()=>B(null,null,function*(){tt(th,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield ow(n)}))})}function sL(n,e){return e().catch(t=>V1(n,t,e))}function sw(n){return B(this,null,function*(){let e=Yt(n),t=Du(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:wD;for(;RQ(e);)try{let i=yield SQ(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,OQ(e,i)}catch(i){yield V1(e,i)}aL(e)&&cL(e)})}function RQ(n){return nh(n)&&n.Pa.length<10}function OQ(n,e){n.Pa.push(e);let t=Du(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function aL(n){return nh(n)&&!Du(n).M_()&&n.Pa.length>0}function cL(n){Du(n).start()}function LQ(n){return B(this,null,function*(){Du(n).na()})}function FQ(n){return B(this,null,function*(){let e=Du(n);for(let t of n.Pa)e.X_(t.mutations)})}function VQ(n,e,t){return B(this,null,function*(){let r=n.Pa.shift(),i=aS.from(r,e,t);yield sL(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield sw(n)})}function jQ(n,e){return B(this,null,function*(){e&&Du(n).Z_&&(yield(function(r,i){return B(this,null,function*(){if((function(s){return eQ(s)&&s!==Re.ABORTED})(i.code)){let o=r.Pa.shift();Du(r).N_(),yield sL(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield sw(r)}})})(n,e)),aL(n)&&cL(n)})}function q3(n,e){return B(this,null,function*(){let t=Yt(n);t.asyncQueue.verifyOperationInProgress(),tt(th,"RemoteStore received new credentials");let r=nh(t);t.Ia.add(3),yield Xm(t),r&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield ow(t)})}function BQ(n,e){return B(this,null,function*(){let t=Yt(n);e?(t.Ia.delete(2),yield ow(t)):e||(t.Ia.add(2),yield Xm(t),t.Aa.set("Unknown"))})}function ip(n){return n.Va||(n.Va=(function(t,r,i){let o=Yt(t);return o.ia(),new WS(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:MQ.bind(null,n),e_:PQ.bind(null,n),n_:NQ.bind(null,n),J_:kQ.bind(null,n)}),n.da.push(e=>B(null,null,function*(){e?(n.Va.N_(),RD(n)?kD(n):n.Aa.set("Unknown")):(yield n.Va.stop(),oL(n))}))),n.Va}function Du(n){return n.ma||(n.ma=(function(t,r,i){let o=Yt(t);return o.ia(),new GS(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:LQ.bind(null,n),n_:jQ.bind(null,n),ea:FQ.bind(null,n),ta:VQ.bind(null,n)}),n.da.push(e=>B(null,null,function*(){e?(n.ma.N_(),yield sw(n)):(yield n.ma.stop(),n.Pa.length>0&&(tt(th,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var JS=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new pa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ze(Re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function OD(n,e){if(il("AsyncQueue",`${e}: ${n}`),rp(n))return new Ze(Re.UNAVAILABLE,`${e}: ${n}`);throw n}var j1=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Tt.comparator(t.key,r.key):(t,r)=>Tt.comparator(t.key,r.key),this.keyedMap=Rm(),this.sortedSet=new Ar(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var B1=class{constructor(){this.fa=new Ar(Tt.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Nt(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},Jf=class n{constructor(e,t,r,i,o,s,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,j1.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var XS=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},eD=class{constructor(){this.queries=H3(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=Yt(t),o=i.queries;i.queries=H3(),o.forEach((s,a)=>{for(let c of a.wa)c.onError(r)})})(this,new Ze(Re.ABORTED,"Firestore shutting down"))}};function H3(){return new al(n=>R4(n),nw)}function lL(n,e){return B(this,null,function*(){let t=Yt(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new XS,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield t.onListen(i,!0);break;case 1:o.ya=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=OD(s,`Initialization of query '${Lf(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&LD(t)})}function uL(n,e){return B(this,null,function*(){let t=Yt(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function UQ(n,e){let t=Yt(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&LD(t)}function zQ(n,e,t){let r=Yt(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function LD(n){n.Da.forEach(e=>{e.next()})}var tD,$3;($3=tD||(tD={})).Fa="default",$3.Cache="cache";var U1=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Jf(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Jf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==tD.Cache}};var z1=class{constructor(e){this.key=e}},q1=class{constructor(e){this.key=e}},nD=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=vn(),this.mutatedKeys=vn(),this.Xa=O4(e),this.eu=new j1(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new B1,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,g)=>{let v=i.get(u),p=rw(this.query,g)?g:null,S=!!v&&this.mutatedKeys.has(v.key),k=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations),L=!1;v&&p?v.data.isEqual(p.data)?S!==k&&(r.track({type:3,doc:p}),L=!0):this.iu(v,p)||(r.track({type:2,doc:p}),L=!0,(c&&this.Xa(p,c)>0||l&&this.Xa(p,l)<0)&&(a=!0)):!v&&p?(r.track({type:0,doc:p}),L=!0):v&&!p&&(r.track({type:1,doc:v}),L=!0,(c||l)&&(a=!0)),L&&(p?(s=s.add(p),o=k?o.add(u):o.delete(u)):(s=s.delete(u),o=o.delete(u)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let u=this.query.limitType==="F"?s.last():s.first();s=s.delete(u.key),o=o.delete(u.key),r.track({type:1,doc:u})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((u,g)=>(function(p,S){let k=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Nt(20277,{At:L})}};return k(p)-k(S)})(u.type,g.type)||this.Xa(u.doc,g.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,l=c!==this.Ya;return this.Ya=c,s.length!==0||l?{snapshot:new Jf(this.query,e.eu,o,s,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new B1,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=vn(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new q1(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new z1(r))}),t}uu(e){this.Ha=e.qs,this.Za=vn();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Jf.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},FD="SyncEngine",rD=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},iD=class{constructor(e){this.key=e,this.lu=!1}},oD=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new al(a=>R4(a),nw),this.Tu=new Map,this.Iu=new Set,this.du=new Ar(Tt.comparator),this.Eu=new Map,this.Au=new Km,this.Ru={},this.Vu=new Map,this.mu=Gm.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function qQ(n,e,t=!0){return B(this,null,function*(){let r=mL(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield dL(r,e,t,!0),i})}function HQ(n,e){return B(this,null,function*(){let t=mL(n);yield dL(t,e,!0,!1)})}function dL(n,e,t,r){return B(this,null,function*(){let i=yield DQ(n.localStore,rc(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield $Q(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&rL(n.remoteStore,i),a})}function $Q(n,e,t,r,i){return B(this,null,function*(){n.gu=(g,v,p)=>(function(k,L,R,J){return B(this,null,function*(){let X=L.view.nu(R);X.Ds&&(X=yield B3(k.localStore,L.query,!1).then(({documents:$})=>L.view.nu($,X)));let Z=J&&J.targetChanges.get(L.targetId),me=J&&J.targetMismatches.get(L.targetId)!=null,be=L.view.applyChanges(X,k.isPrimaryClient,Z,me);return G3(k,L.targetId,be._u),be.snapshot})})(n,g,v,p);let o=yield B3(n.localStore,e,!0),s=new nD(e,o.qs),a=s.nu(o.documents),c=$m.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,c);G3(n,t,l._u);let u=new rD(e,t,s);return n.Pu.set(e,u),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),l.snapshot})}function WQ(n,e,t){return B(this,null,function*(){let r=Yt(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!nw(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield jS(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&PD(r.remoteStore,i.targetId),sD(r,i.targetId)}).catch(np))):(sD(r,i.targetId),yield jS(r.localStore,i.targetId,!0))})}function GQ(n,e){return B(this,null,function*(){let t=Yt(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),PD(t.remoteStore,r.targetId))})}function KQ(n,e,t){return B(this,null,function*(){let r=tZ(n);try{let i=yield(function(s,a){let c=Yt(s),l=Bt.now(),u=a.reduce((p,S)=>p.add(S.key),vn()),g,v;return c.persistence.runTransaction("Locally write mutations","readwrite",p=>{let S=cl(),k=vn();return c.Os.getEntries(p,u).next(L=>{S=L,S.forEach((R,J)=>{J.isValidDocument()||(k=k.add(R))})}).next(()=>c.localDocuments.getOverlayedDocuments(p,S)).next(L=>{g=L;let R=[];for(let J of a){let X=XY(J,g.get(J.key).overlayedDocument);X!=null&&R.push(new ac(J.key,X,D4(X.value.mapValue),ic.exists(!0)))}return c.mutationQueue.addMutationBatch(p,l,R,a)}).next(L=>{v=L;let R=L.applyToLocalDocumentSet(g,k);return c.documentOverlayCache.saveOverlays(p,L.batchId,R)})}).then(()=>({batchId:v.batchId,changes:F4(g)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,c){let l=s.Ru[s.currentUser.toKey()];l||(l=new Ar(hn)),l=l.insert(a,c),s.Ru[s.currentUser.toKey()]=l})(r,i.batchId,t),yield e0(r,i.changes),yield sw(r.remoteStore)}catch(i){let o=OD(i,"Failed to persist write");t.reject(o)}})}function hL(n,e){return B(this,null,function*(){let t=Yt(n);try{let r=yield CQ(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(On(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?On(s.lu,14607):i.removedDocuments.size>0&&(On(s.lu,42227),s.lu=!1))}),yield e0(t,r,e)}catch(r){yield np(r)}})}function W3(n,e,t){let r=Yt(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let c=Yt(s);c.onlineState=a;let l=!1;c.queries.forEach((u,g)=>{for(let v of g.wa)v.va(a)&&(l=!0)}),l&&LD(c)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function YQ(n,e,t){return B(this,null,function*(){let r=Yt(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Ar(Tt.comparator);s=s.insert(o,ma.newNoDocument(o,en.min()));let a=vn().add(o),c=new S1(en.min(),new Map,new Ar(hn),s,a);yield hL(r,c),r.du=r.du.remove(o),r.Eu.delete(e),VD(r)}else yield jS(r.localStore,e,!1).then(()=>sD(r,e,t)).catch(np)})}function QQ(n,e){return B(this,null,function*(){let t=Yt(n),r=e.batch.batchId;try{let i=yield EQ(t.localStore,e);pL(t,r,null),fL(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield e0(t,i)}catch(i){yield np(i)}})}function ZQ(n,e,t){return B(this,null,function*(){let r=Yt(n);try{let i=yield(function(s,a){let c=Yt(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return c.mutationQueue.lookupMutationBatch(l,a).next(g=>(On(g!==null,37113),u=g.keys(),c.mutationQueue.removeMutationBatch(l,g))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,u,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>c.localDocuments.getDocuments(l,u))})})(r.localStore,e);pL(r,e,t),fL(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield e0(r,i)}catch(i){yield np(i)}})}function fL(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function pL(n,e,t){let r=Yt(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function sD(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||gL(n,r)})}function gL(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(PD(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),VD(n))}function G3(n,e,t){for(let r of t)r instanceof z1?(n.Au.addReference(r.key,e),JQ(n,r)):r instanceof q1?(tt(FD,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||gL(n,r.key)):Nt(19791,{yu:r})}function JQ(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(tt(FD,"New document in limbo: "+t),n.Iu.add(r),VD(n))}function VD(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new Tt(hr.fromString(e)),r=n.mu.next();n.Eu.set(r,new iD(t)),n.du=n.du.insert(t,r),rL(n.remoteStore,new Wm(rc(DD(t.path)),r,"TargetPurposeLimboResolution",_D.ue))}}function e0(n,e,t){return B(this,null,function*(){let r=Yt(n),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{s.push(r.gu(c,e,t).then(l=>{var u;if((l||t)&&r.isPrimaryClient){let g=l?!l.fromCache:(u=t?.targetChanges.get(c.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(l){i.push(l);let g=OS.Es(c.targetId,l);o.push(g)}}))}),yield Promise.all(s),r.hu.J_(i),yield(function(c,l){return B(this,null,function*(){let u=Yt(c);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>Be.forEach(l,v=>Be.forEach(v.Is,p=>u.persistence.referenceDelegate.addReference(g,v.targetId,p)).next(()=>Be.forEach(v.ds,p=>u.persistence.referenceDelegate.removeReference(g,v.targetId,p)))))}catch(g){if(!rp(g))throw g;tt(MD,"Failed to update sequence numbers: "+g)}for(let g of l){let v=g.targetId;if(!g.fromCache){let p=u.Fs.get(v),S=p.snapshotVersion,k=p.withLastLimboFreeSnapshotVersion(S);u.Fs=u.Fs.insert(v,k)}}})})(r.localStore,o))})}function XQ(n,e){return B(this,null,function*(){let t=Yt(n);if(!t.currentUser.isEqual(e)){tt(FD,"User change. New user:",e.toKey());let r=yield tL(t.localStore,e);t.currentUser=e,(function(o,s){o.Vu.forEach(a=>{a.forEach(c=>{c.reject(new Ze(Re.CANCELLED,s))})}),o.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield e0(t,r.Bs)}})}function eZ(n,e){let t=Yt(n),r=t.Eu.get(e);if(r&&r.lu)return vn().add(r.key);{let i=vn(),o=t.Tu.get(e);if(!o)return i;for(let s of o){let a=t.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function mL(n){let e=Yt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=hL.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=eZ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=YQ.bind(null,e),e.hu.J_=UQ.bind(null,e.eventManager),e.hu.pu=zQ.bind(null,e.eventManager),e}function tZ(n){let e=Yt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=QQ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ZQ.bind(null,e),e}var vL=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return B(this,null,function*(){this.serializer=iw(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,r){return null}Fu(t,r){return null}vu(t){return IQ(this.persistence,new FS,t.initialUser,this.serializer)}Du(t){return new N1(RS.Vi,this.serializer)}bu(t){return new BS}terminate(){return B(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),aD=class extends vL{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){On(this.persistence.referenceDelegate instanceof k1,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new bS(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?Bs.withCacheSize(this.cacheSizeBytes):Bs.DEFAULT;return new N1(r=>k1.Vi(r,t),this.serializer)}};var nZ=(()=>{class n{initialize(t,r){return B(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>W3(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=XQ.bind(null,this.syncEngine),yield BQ(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return(function(){return new eD})()}createDatastore(t){let r=iw(t.databaseInfo.databaseId),i=(function(s){return new $S(s)})(t.databaseInfo);return(function(s,a,c,l){return new YS(s,a,c,l)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,o,s,a,c){return new ZS(i,o,s,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>W3(this.syncEngine,r,0),(function(){return O1.C()?new O1:new US})())}createSyncEngine(t,r){return(function(o,s,a,c,l,u,g){let v=new oD(o,s,a,c,l,u);return g&&(v.fu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return B(this,null,function*(){var t,r;yield(function(o){return B(this,null,function*(){let s=Yt(o);tt(th,"RemoteStore shutting down."),s.Ia.add(5),yield Xm(s),s.Ea.shutdown(),s.Aa.set("Unknown")})})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var H1=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):il("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Tu="FirestoreClient",cD=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=vi.UNAUTHENTICATED,this.clientId=jm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>B(this,null,function*(){tt(Tu,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(tt(Tu,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new pa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>B(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=OD(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Rx(n,e){return B(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),tt(Tu,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>B(null,null,function*(){r.isEqual(i)||(yield tL(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{Cu("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{tt("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Cu("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e})}function K3(n,e){return B(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield rZ(n);tt(Tu,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>q3(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>q3(e.remoteStore,i)),n._onlineComponents=e})}function rZ(n){return B(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){tt(Tu,"Using user provided OfflineComponentProvider");try{yield Rx(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===Re.FAILED_PRECONDITION||i.code===Re.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Cu("Error using user provided cache. Falling back to memory cache: "+t),yield Rx(n,new vL)}}else tt(Tu,"Using default OfflineComponentProvider"),yield Rx(n,new aD(void 0));return n._offlineComponents})}function yL(n){return B(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(tt(Tu,"Using user provided OnlineComponentProvider"),yield K3(n,n._uninitializedComponentsProvider._online)):(tt(Tu,"Using default OnlineComponentProvider"),yield K3(n,new nZ))),n._onlineComponents})}function iZ(n){return yL(n).then(e=>e.syncEngine)}function _L(n){return B(this,null,function*(){let e=yield yL(n),t=e.eventManager;return t.onListen=qQ.bind(null,e.syncEngine),t.onUnlisten=WQ.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=HQ.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=GQ.bind(null,e.syncEngine),t})}function oZ(n,e,t={}){let r=new pa;return n.asyncQueue.enqueueAndForget(()=>B(null,null,function*(){return(function(o,s,a,c,l){let u=new H1({next:v=>{u.Ou(),s.enqueueAndForget(()=>uL(o,g));let p=v.docs.has(a);!p&&v.fromCache?l.reject(new Ze(Re.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&v.fromCache&&c&&c.source==="server"?l.reject(new Ze(Re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(v)},error:v=>l.reject(v)}),g=new U1(DD(a.path),u,{includeMetadataChanges:!0,ka:!0});return lL(o,g)})(yield _L(n),n.asyncQueue,e,t,r)})),r.promise}function sZ(n,e,t={}){let r=new pa;return n.asyncQueue.enqueueAndForget(()=>B(null,null,function*(){return(function(o,s,a,c,l){let u=new H1({next:v=>{u.Ou(),s.enqueueAndForget(()=>uL(o,g)),v.fromCache&&c.source==="server"?l.reject(new Ze(Re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(v)},error:v=>l.reject(v)}),g=new U1(a,u,{includeMetadataChanges:!0,ka:!0});return lL(o,g)})(yield _L(n),n.asyncQueue,e,t,r)})),r.promise}function wL(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var Y3=new Map;var bL="firestore.googleapis.com",Q3=!0,$1=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ze(Re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=bL,this.ssl=Q3}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Q3;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=eL;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<_Q)throw new Ze(Re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}mY("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wL((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Ze(Re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Ze(Re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Ze(Re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Xf=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ze(Re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ze(Re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Ox;switch(r.type){case"firstParty":return new jx(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ze(Re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return B(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=Y3.get(t);r&&(tt("ComponentProvider","Removing Datastore"),Y3.delete(t),r.terminate())})(this),Promise.resolve()}};function IL(n,e,t,r={}){var i;n=ga(n,Xf);let o=lu(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;o&&(L_(`https://${c}`),F_("Firestore",!0)),s.host!==bL&&s.host!==c&&Cu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:c,ssl:o,emulatorOptions:r});if(!Za(l,a)&&(n._setSettings(l),r.mockUserToken)){let u,g;if(typeof r.mockUserToken=="string")u=r.mockUserToken,g=vi.MOCK_USER;else{u=_R(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new Ze(Re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new vi(v)}n._authCredentials=new Lx(new v1(u,g))}}var Au=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},_i=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Jm(t,n._jsonSchema))return new n(e,r||null,new Tt(hr.fromString(t.referencePath)))}};_i._jsonSchemaVersion="firestore/documentReference/1.0",_i._jsonSchema={type:ei("string",_i._jsonSchemaVersion),referencePath:ei("string")};var wu=class n extends Au{constructor(e,t,r){super(e,t,DD(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new _i(this.firestore,null,new Tt(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function EL(n,e,...t){if(n=Vr(n),r4("collection","path",e),n instanceof Xf){let r=hr.fromString(e,...t);return p3(r),new wu(n,null,r)}{if(!(n instanceof _i||n instanceof wu))throw new Ze(Re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(hr.fromString(e,...t));return p3(r),new wu(n.firestore,null,r)}}function jD(n,e,...t){if(n=Vr(n),arguments.length===1&&(e=jm.newId()),r4("doc","path",e),n instanceof Xf){let r=hr.fromString(e,...t);return f3(r),new _i(n,null,new Tt(r))}{if(!(n instanceof _i||n instanceof wu))throw new Ze(Re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(hr.fromString(e,...t));return f3(r),new _i(n.firestore,n instanceof wu?n.converter:null,new Tt(r))}}var Z3="AsyncQueue",W1=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new L1(this,"async_queue_retry"),this.oc=()=>{let r=kx();r&&tt(Z3,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=kx();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=kx();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new pa;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return B(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!rp(e))throw e;tt(Z3,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,il("INTERNAL UNHANDLED ERROR: ",J3(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=JS.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&Nt(47125,{hc:J3(this.tc)})}verifyOperationInProgress(){}Pc(){return B(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function J3(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}var ll=class extends Xf{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new W1,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return B(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new W1(e),this._firestoreClient=void 0,yield e}})}};function CL(n,e){let t=typeof n=="object"?n:Fd(),r=typeof n=="string"?n:e||I1,i=Af(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=yR("firestore");o&&IL(i,...o)}return i}function BD(n){if(n._terminated)throw new Ze(Re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||aZ(n),n._firestoreClient}function aZ(n){var e,t,r;let i=n._freezeSettings(),o=(function(a,c,l,u){return new Hx(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,wL(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new cD(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&(function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(n._componentsProvider))}var bu=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Hi.fromBase64String(e))}catch(t){throw new Ze(Re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Hi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Jm(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};bu._jsonSchemaVersion="firestore/bytes/1.0",bu._jsonSchema={type:ei("string",bu._jsonSchemaVersion),bytes:ei("string")};var ep=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ze(Re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hs(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Ym=class{constructor(e){this._methodName=e}};var Iu=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ze(Re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ze(Re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return hn(this._lat,e._lat)||hn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Jm(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Iu._jsonSchemaVersion="firestore/geoPoint/1.0",Iu._jsonSchema={type:ei("string",Iu._jsonSchemaVersion),latitude:ei("number"),longitude:ei("number")};var Eu=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Jm(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new Ze(Re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Eu._jsonSchemaVersion="firestore/vectorValue/1.0",Eu._jsonSchema={type:ei("string",Eu._jsonSchemaVersion),vectorValues:ei("object")};var cZ=/^__.*__$/,lD=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new ac(e,this.data,this.fieldMask,t,this.fieldTransforms):new eh(e,this.data,t,this.fieldTransforms)}},G1=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ac(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function xL(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Nt(40011,{Ec:n})}}var uD=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Y1(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(xL(this.Ec)&&cZ.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},dD=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||iw(e)}Dc(e,t,r,i=!1){return new uD({Ec:e,methodName:t,bc:r,path:hs.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function aw(n){let e=n._freezeSettings(),t=iw(n._databaseId);return new dD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function SL(n,e,t,r,i,o={}){let s=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);UD("Data must be an object, but it was:",s,r);let a=DL(r,s),c,l;if(o.merge)c=new Us(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let u=[];for(let g of o.mergeFields){let v=hD(e,g,t);if(!s.contains(v))throw new Ze(Re.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);AL(u,v)||u.push(v)}c=new Us(u),l=s.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,l=s.fieldTransforms;return new lD(new ds(a),c,l)}var K1=class n extends Ym{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function lZ(n,e,t,r){let i=n.Dc(1,e,t);UD("Data must be an object, but it was:",i,r);let o=[],s=ds.empty();Mu(r,(c,l)=>{let u=zD(e,c,t);l=Vr(l);let g=i.gc(u);if(l instanceof K1)o.push(u);else{let v=t0(l,g);v!=null&&(o.push(u),s.set(u,v))}});let a=new Us(o);return new G1(s,a,i.fieldTransforms)}function uZ(n,e,t,r,i,o){let s=n.Dc(1,e,t),a=[hD(e,r,t)],c=[i];if(o.length%2!=0)throw new Ze(Re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<o.length;v+=2)a.push(hD(e,o[v])),c.push(o[v+1]);let l=[],u=ds.empty();for(let v=a.length-1;v>=0;--v)if(!AL(l,a[v])){let p=a[v],S=c[v];S=Vr(S);let k=s.gc(p);if(S instanceof K1)l.push(p);else{let L=t0(S,k);L!=null&&(l.push(p),u.set(p,L))}}let g=new Us(l);return new G1(u,g,s.fieldTransforms)}function dZ(n,e,t,r=!1){return t0(t,n.Dc(r?4:3,e))}function t0(n,e){if(TL(n=Vr(n)))return UD("Unsupported field value:",e,n),DL(n,e);if(n instanceof Ym)return(function(r,i){if(!xL(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let c=t0(a,i.yc(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=Vr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return KY(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Bt.fromDate(r);return{timestampValue:M1(i.serializer,o)}}if(r instanceof Bt){let o=new Bt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:M1(i.serializer,o)}}if(r instanceof Iu)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof bu)return{bytesValue:G4(i.serializer,r._byteString)};if(r instanceof _i){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:AD(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Eu)return(function(s,a){return{mapValue:{fields:{[ID]:{stringValue:ED},[Hf]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return TD(a.serializer,l)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${X1(r)}`)})(n,e)}function DL(n,e){let t={};return _4(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Mu(n,(r,i)=>{let o=t0(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function TL(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Bt||n instanceof Iu||n instanceof bu||n instanceof _i||n instanceof Ym||n instanceof Eu)}function UD(n,e,t){if(!TL(t)||!i4(t)){let r=X1(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function hD(n,e,t){if((e=Vr(e))instanceof ep)return e._internalPath;if(typeof e=="string")return zD(n,e);throw Y1("Field path arguments must be of type string or ",n,!1,void 0,t)}var hZ=new RegExp("[~\\*/\\[\\]]");function zD(n,e,t){if(e.search(hZ)>=0)throw Y1(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ep(...e.split("."))._internalPath}catch{throw Y1(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Y1(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new Ze(Re.INVALID_ARGUMENT,a+n+c)}function AL(n,e){return n.some(t=>t.isEqual(e))}var Q1=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new _i(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new fD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(cw("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},fD=class extends Q1{data(){return super.data()}};function cw(n,e){return typeof e=="string"?zD(n,e):e instanceof ep?e._internalPath:e._delegate._internalPath}function fZ(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ze(Re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Qm=class{},Zm=class extends Qm{};function ML(n,e,...t){let r=[];e instanceof Qm&&r.push(e),r=r.concat(t),(function(o){let s=o.filter(c=>c instanceof pD).length,a=o.filter(c=>c instanceof Z1).length;if(s>1||s>0&&a>0)throw new Ze(Re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var Z1=class n extends Zm{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return RL(e._query,t),new Au(e.firestore,e.converter,rS(e._query,t))}_parse(e){let t=aw(e.firestore);return(function(o,s,a,c,l,u,g){let v;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new Ze(Re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){e4(g,u);let S=[];for(let k of g)S.push(X3(c,o,k));v={arrayValue:{values:S}}}else v=X3(c,o,g)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||e4(g,u),v=dZ(a,s,g,u==="in"||u==="not-in");return Xr.create(l,u,v)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function PL(n,e,t){let r=e,i=cw("where",n);return Z1._create(i,r,t)}var pD=class n extends Qm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:va.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)RL(s,c),s=rS(s,c)})(e._query,t),new Au(e.firestore,e.converter,rS(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var gD=class n extends Zm{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(i,o,s){if(i.startAt!==null)throw new Ze(Re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ze(Re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Zd(o,s)})(e._query,this._field,this._direction);return new Au(e.firestore,e.converter,(function(i,o){let s=i.explicitOrderBy.concat([o]);return new Su(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}};function NL(n,e="asc"){let t=e,r=cw("orderBy",n);return gD._create(r,t)}var mD=class n extends Zm{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new Au(e.firestore,e.converter,x1(e._query,this._limit,this._limitType))}};function kL(n){return vY("limit",n),mD._create("limit",n,"F")}function X3(n,e,t){if(typeof(t=Vr(t))=="string"){if(t==="")throw new Ze(Re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!k4(e)&&t.indexOf("/")!==-1)throw new Ze(Re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(hr.fromString(t));if(!Tt.isDocumentKey(r))throw new Ze(Re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return b3(n,new Tt(r))}if(t instanceof _i)return b3(n,t._key);throw new Ze(Re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${X1(t)}.`)}function e4(n,e){if(!Array.isArray(n)||n.length===0)throw new Ze(Re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function RL(n,e){let t=(function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Ze(Re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ze(Re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var vD=class{convertValue(e,t="none"){switch(xu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(sl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Nt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Mu(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Hf].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>dr(s.doubleValue));return new Eu(o)}convertGeoPoint(e){return new Iu(dr(e.latitude),dr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=tw(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(zm(e));default:return null}}convertTimestamp(e){let t=ol(e);return new Bt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=hr.fromString(e);On(X4(r),9688,{name:e});let i=new E1(r.get(1),r.get(3)),o=new Tt(r.popFirst(5));return i.isEqual(t)||il(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function OL(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Gd=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Kd=class n extends Q1{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Uf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(cw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ze(Re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Kd._jsonSchemaVersion="firestore/documentSnapshot/1.0",Kd._jsonSchema={type:ei("string",Kd._jsonSchemaVersion),bundleSource:ei("string","DocumentSnapshot"),bundleName:ei("string"),bundle:ei("string")};var Uf=class extends Kd{data(e={}){return super.data(e)}},zf=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Gd(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Uf(this._firestore,this._userDataWriter,r.key,r,new Gd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ze(Re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new Uf(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Gd(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new Uf(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Gd(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,u=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),u=s.indexOf(a.doc.key)),{type:pZ(a.type),doc:c,oldIndex:l,newIndex:u}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ze(Re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=jm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function pZ(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Nt(61501,{type:n})}}function LL(n){n=ga(n,_i);let e=ga(n.firestore,ll);return oZ(BD(e),n._key).then(t=>gZ(e,n,t))}zf._jsonSchemaVersion="firestore/querySnapshot/1.0",zf._jsonSchema={type:ei("string",zf._jsonSchemaVersion),bundleSource:ei("string","QuerySnapshot"),bundleName:ei("string"),bundle:ei("string")};var J1=class extends vD{constructor(e){super(),this.firestore=e}convertBytes(e){return new bu(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new _i(this.firestore,null,t)}};function FL(n){n=ga(n,Au);let e=ga(n.firestore,ll),t=BD(e),r=new J1(e);return fZ(n._query),sZ(t,n._query).then(i=>new zf(e,r,n,i))}function VL(n,e,t){n=ga(n,_i);let r=ga(n.firestore,ll),i=OL(n.converter,e,t);return lw(r,[SL(aw(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,ic.none())])}function jL(n,e,t,...r){n=ga(n,_i);let i=ga(n.firestore,ll),o=aw(i),s;return s=typeof(e=Vr(e))=="string"||e instanceof ep?uZ(o,"updateDoc",n._key,e,t,r):lZ(o,"updateDoc",n._key,e),lw(i,[s.toMutation(n._key,ic.exists(!0))])}function BL(n){return lw(ga(n.firestore,ll),[new Hm(n._key,ic.none())])}function UL(n,e){let t=ga(n.firestore,ll),r=jD(n),i=OL(n.converter,e);return lw(t,[SL(aw(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,ic.exists(!1))]).then(()=>r)}function lw(n,e){return(function(r,i){let o=new pa;return r.asyncQueue.enqueueAndForget(()=>B(null,null,function*(){return KQ(yield iZ(r),i,o)})),o.promise})(BD(n),e)}function gZ(n,e,t){let r=t.docs.get(e._key),i=new J1(n);return new Kd(n,i,e._key,r,new Gd(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){tp=i})(du),ha(new fo("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new ll(new Fx(r.getProvider("auth-internal")),new Bx(s,r.getProvider("app-check-internal")),(function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Ze(Re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new E1(l.options.projectId,u)})(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Tr(l3,u3,e),Tr(l3,u3,"esm2017")})();var ul=class{constructor(e){return e}},zL="firestore",qD=class{constructor(){return Pf(zL)}};var HD=new ct("angularfire2.firestore-instances");function mZ(n,e){let t=_m(zL,n,e);return t&&new ul(t)}function vZ(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new ul(r)}}var yZ={provide:qD,deps:[[new os,HD]]},_Z={provide:ul,useFactory:mZ,deps:[[new os,HD],Jc]};function qL(n,...e){return Tr("angularfire",hu.full,"fst"),rs([_Z,yZ,{provide:HD,useFactory:vZ(n),multi:!0,deps:[Rn,Gr,fu,jd,[new os,Nm],[new os,Nf],...e]}])}var ya=ur(UL,!0,2);var Bn=ur(EL,!0,2);var rh=ur(BL,!0,2);var li=ur(jD,!0,2);var op=ur(LL,!0);var ti=ur(FL,!0);var HL=ur(CL,!0);var $D=ur(kL,!0,2);var _a=ur(NL,!0,2),Oo=ur(ML,!0,2);var $L=ur(VL,!0,2);var dl=ur(jL,!0,2);var fs=ur(PL,!0,2);var GL={production:!1,firebase:{apiKey:"AIzaSyASoTkkqkwrFE9wF_Raz1Nly_H6vL3a-U8",authDomain:"hotel-management-system-ee8c3.firebaseapp.com",projectId:"hotel-management-system-ee8c3",storageBucket:"hotel-management-system-ee8c3.appspot.com",messagingSenderId:"1074634780596",appId:"1:1074634780596:web:e0411cc8a3b104c2408ce1"}};var Mr=class n{constructor(e,t){this.firestore=e;this.envInjector=t}inCtx(e){return wr(this.envInjector,e)}createUser(e){return B(this,null,function*(){let t=Bn(this.firestore,"users");return(yield ya(t,bt(Pe({},e),{createdAt:Bt.now()}))).id})}getUsers(){return B(this,null,function*(){let e=Bn(this.firestore,"users");return(yield this.inCtx(()=>ti(e))).docs.map(r=>Pe({id:r.id},r.data()))})}updateUser(e,t){return B(this,null,function*(){let r=li(this.firestore,`users/${e}`);yield dl(r,t)})}deleteUser(e){return B(this,null,function*(){let t=li(this.firestore,`users/${e}`);yield rh(t)})}createMenuItem(e){return B(this,null,function*(){let t=Bn(this.firestore,"menuItems");return(yield ya(t,bt(Pe({},e),{createdAt:Bt.now()}))).id})}getMenuItems(){return B(this,null,function*(){let e=Bn(this.firestore,"menuItems");return(yield this.inCtx(()=>ti(e))).docs.map(r=>Pe({id:r.id},r.data()))})}getActiveMenuItems(){return B(this,null,function*(){let e=Bn(this.firestore,"menuItems"),t=Oo(e,fs("isActive","==",!0));return(yield this.inCtx(()=>ti(t))).docs.map(i=>Pe({id:i.id},i.data()))})}updateMenuItem(e,t){return B(this,null,function*(){let r=li(this.firestore,`menuItems/${e}`);yield dl(r,t)})}deleteMenuItem(e){return B(this,null,function*(){let t=li(this.firestore,`menuItems/${e}`);yield rh(t)})}createDeal(e){return B(this,null,function*(){let t=Bn(this.firestore,"deals"),r=bt(Pe({},e),{createdAt:Bt.now()});return e.startDate&&(r.startDate=Bt.fromDate(e.startDate)),e.endDate&&(r.endDate=Bt.fromDate(e.endDate)),(yield ya(t,r)).id})}getDeals(){return B(this,null,function*(){let e=Bn(this.firestore,"deals");return(yield this.inCtx(()=>ti(e))).docs.map(r=>{let i=r.data();return bt(Pe({id:r.id},i),{startDate:i.startDate?.toDate(),endDate:i.endDate?.toDate(),createdAt:i.createdAt?.toDate()})})})}getActiveDeals(){return B(this,null,function*(){let e=yield this.getDeals(),t=new Date;return e.filter(r=>!(!r.isActive||r.startDate&&r.startDate>t||r.endDate&&r.endDate<t))})}updateDeal(e,t){return B(this,null,function*(){let r=li(this.firestore,`deals/${e}`),i=Pe({},t);t.startDate&&(i.startDate=Bt.fromDate(t.startDate)),t.endDate&&(i.endDate=Bt.fromDate(t.endDate)),yield dl(r,i)})}deleteDeal(e){return B(this,null,function*(){let t=li(this.firestore,`deals/${e}`);yield rh(t)})}createInventoryItem(e){return B(this,null,function*(){let t=Bn(this.firestore,"inventory");return(yield ya(t,bt(Pe({},e),{createdAt:Bt.now()}))).id})}getInventoryItems(){return B(this,null,function*(){let e=Bn(this.firestore,"inventory");return(yield this.inCtx(()=>ti(e))).docs.map(r=>Pe({id:r.id},r.data()))})}getLowStockItems(){return B(this,null,function*(){return(yield this.getInventoryItems()).filter(t=>t.currentStock<t.lowStockThreshold)})}updateInventoryItem(e,t){return B(this,null,function*(){let r=li(this.firestore,`inventory/${e}`);yield dl(r,t)})}deleteInventoryItem(e){return B(this,null,function*(){let t=li(this.firestore,`inventory/${e}`);yield rh(t)})}updateInventoryStock(e,t){return B(this,null,function*(){let r=li(this.firestore,`inventory/${e}`),i=yield this.inCtx(()=>op(r));if(i.exists()){let o=i.data().currentStock||0;yield dl(r,{currentStock:o+t})}})}createPurchase(e){return B(this,null,function*(){let t=Bn(this.firestore,"purchases"),r=yield ya(t,bt(Pe({},e),{date:e.date?Bt.fromDate(e.date):Bt.now(),createdAt:Bt.now()}));return yield this.updateInventoryStock(e.inventoryItemId,e.quantity),r.id})}getPurchases(){return B(this,null,function*(){let e=Bn(this.firestore,"purchases"),t=Oo(e,_a("date","desc"));return(yield this.inCtx(()=>ti(t))).docs.map(i=>Pe({id:i.id},i.data()))})}deletePurchase(e){return B(this,null,function*(){let t=li(this.firestore,`purchases/${e}`);yield rh(t)})}createSupplier(e){return B(this,null,function*(){let t=Bn(this.firestore,"suppliers");return(yield ya(t,bt(Pe({},e),{createdAt:Bt.now()}))).id})}getSuppliers(){return B(this,null,function*(){let e=Bn(this.firestore,"suppliers");return(yield this.inCtx(()=>ti(e))).docs.map(r=>Pe({id:r.id},r.data()))})}createOrder(e){return B(this,null,function*(){try{let t=Bn(this.firestore,"orders"),r={orderNumber:e.orderNumber,isTakeaway:e.isTakeaway,items:e.items,subtotal:e.subtotal,tax:e.tax,discount:e.discount,totalAmount:e.totalAmount,status:e.status,createdAt:e.createdAt?Bt.fromDate(e.createdAt):Bt.now(),cashierId:e.cashierId,cashierName:e.cashierName};return e.tableNumber&&(r.tableNumber=e.tableNumber),e.customerName&&(r.customerName=e.customerName),e.startedCookingAt&&(r.startedCookingAt=Bt.fromDate(e.startedCookingAt)),e.readyAt&&(r.readyAt=Bt.fromDate(e.readyAt)),e.completedAt&&(r.completedAt=Bt.fromDate(e.completedAt)),(yield ya(t,r)).id}catch(t){throw console.error("Error creating order:",t),t}})}getMenuItem(e){return B(this,null,function*(){let t=li(this.firestore,`menuItems/${e}`),r=yield this.inCtx(()=>op(t));return r.exists()?Pe({id:r.id},r.data()):null})}getOrders(e){return B(this,null,function*(){let t=Bn(this.firestore,"orders"),r;e?r=Oo(t,fs("status","==",e)):r=Oo(t,_a("createdAt","desc"));let o=(yield this.inCtx(()=>ti(r))).docs.map(s=>Pe({id:s.id},s.data()));return e&&o.sort((s,a)=>{let c=s.createdAt&&typeof s.createdAt=="object"&&"toDate"in s.createdAt?s.createdAt.toDate():new Date(s.createdAt||0);return(a.createdAt&&typeof a.createdAt=="object"&&"toDate"in a.createdAt?a.createdAt.toDate():new Date(a.createdAt||0)).getTime()-c.getTime()}),o})}updateOrder(e,t){return B(this,null,function*(){let r=li(this.firestore,`orders/${e}`);yield dl(r,t)})}deleteOrder(e){return B(this,null,function*(){let t=li(this.firestore,`orders/${e}`);yield rh(t)})}getTodayOrders(){return B(this,null,function*(){let e=new Date;e.setHours(0,0,0,0);let t=Bn(this.firestore,"orders"),r=Oo(t,fs("createdAt",">=",Bt.fromDate(e)),_a("createdAt","desc"));return(yield this.inCtx(()=>ti(r))).docs.map(o=>Pe({id:o.id},o.data()))})}getActiveOrderForTable(e){return B(this,null,function*(){let t=Bn(this.firestore,"orders"),r=Oo(t,fs("tableNumber","==",e),fs("status","in",["pending","cooking","ready"]),_a("createdAt","desc"),$D(1)),i=yield this.inCtx(()=>ti(r));return i.empty?null:Pe({id:i.docs[0].id},i.docs[0].data())})}getOrdersByTable(e){return B(this,null,function*(){let t=Bn(this.firestore,"orders"),r=Oo(t,fs("tableNumber","==",e),_a("createdAt","desc"));return(yield this.inCtx(()=>ti(r))).docs.map(o=>Pe({id:o.id},o.data()))})}logActivity(e){return B(this,null,function*(){let t=Bn(this.firestore,"activityLogs");return(yield ya(t,bt(Pe({},e),{timestamp:Bt.now()}))).id})}getRecentActivityLogs(e=10){return B(this,null,function*(){let t=Bn(this.firestore,"activityLogs"),r=Oo(t,_a("timestamp","desc"),$D(e));return(yield this.inCtx(()=>ti(r))).docs.map(o=>Pe({id:o.id},o.data()))})}getTodaySales(){return B(this,null,function*(){return(yield this.getTodayOrders()).filter(t=>t.status==="completed").reduce((t,r)=>t+r.totalAmount,0)})}getTodayExpenses(){return B(this,null,function*(){let e=new Date;e.setHours(0,0,0,0);let t=Bn(this.firestore,"purchases"),r=Oo(t,fs("createdAt",">=",Bt.fromDate(e)));return(yield this.inCtx(()=>ti(r))).docs.map(s=>s.data()).reduce((s,a)=>s+a.totalCost,0)})}getOrdersByDateRange(e,t){return B(this,null,function*(){let r=Bn(this.firestore,"orders"),i=Oo(r,fs("createdAt",">=",Bt.fromDate(e)),fs("createdAt","<=",Bt.fromDate(t)),_a("createdAt","desc"));return(yield this.inCtx(()=>ti(i))).docs.map(s=>Pe({id:s.id},s.data()))})}getPurchasesByDateRange(e,t){return B(this,null,function*(){let r=Bn(this.firestore,"purchases"),i=Oo(r,fs("date",">=",Bt.fromDate(e)),fs("date","<=",Bt.fromDate(t)),_a("date","desc"));return(yield this.inCtx(()=>ti(i))).docs.map(s=>Pe({id:s.id},s.data()))})}createInventoryAdjustment(e){return B(this,null,function*(){let t=Bn(this.firestore,"inventoryAdjustments"),r=yield ya(t,bt(Pe({},e),{createdAt:Bt.now()})),i=li(this.firestore,`inventory/${e.inventoryItemId}`),o=yield this.inCtx(()=>op(i));if(o.exists()){let s=o.data().currentStock||0;yield dl(i,{currentStock:s+e.quantity})}return r.id})}getInventoryAdjustments(){return B(this,null,function*(){let e=Bn(this.firestore,"inventoryAdjustments"),t=Oo(e,_a("date","desc"));return(yield this.inCtx(()=>ti(t))).docs.map(i=>Pe({id:i.id},i.data()))})}getAdjustmentsByItem(e){return B(this,null,function*(){let t=Bn(this.firestore,"inventoryAdjustments"),r=Oo(t,fs("inventoryItemId","==",e),_a("date","desc"));return(yield this.inCtx(()=>ti(r))).docs.map(o=>Pe({id:o.id},o.data()))})}getSettings(){return B(this,null,function*(){let e=Bn(this.firestore,"settings"),t=yield this.inCtx(()=>ti(e));if(t.empty)return{currency:"PKR",currencyPosition:"before",dateFormat:"MM/DD/YYYY",taxRate:5,restaurantName:"My Restaurant"};let r=t.docs[0];return Pe({id:r.id},r.data())})}updateSettings(e){return B(this,null,function*(){let t=Bn(this.firestore,"settings"),r=yield this.inCtx(()=>ti(t));if(r.empty)yield ya(t,bt(Pe({},e),{createdAt:Bt.now()}));else{let i=r.docs[0].id,o=li(this.firestore,`settings/${i}`);yield dl(o,e)}})}static \u0275fac=function(t){return new(t||n)(Pt(ul),Pt(cr))};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})};var jr=class n{constructor(e,t,r,i,o){this.auth=e;this.firestore=t;this.router=r;this.envInjector=i;this.db=o;i3(this.auth,a1).catch(s=>{console.error("Failed to set auth persistence:",s)}),this.user$=t3(this.auth),this.user$.subscribe(s=>B(this,null,function*(){s?yield this.loadUserData(s.uid):this.currentUser=null}))}user$;currentUser=null;login(e,t){return B(this,null,function*(){try{console.log("Starting login for:",e);let r=yield o3(this.auth,e,t);if(console.log("Firebase auth successful, UID:",r.user.uid),yield this.loadUserData(r.user.uid),console.log("User data loaded:",this.currentUser),!this.currentUser)throw new Error("Failed to load user profile");this.logActivity("Logged in"),console.log("Redirecting user with role:",this.currentUser.role),this.currentUser?.role==="admin"?this.router.navigate(["/dashboard"]):this.currentUser?.role==="cashier"?this.router.navigate(["/pos"]):this.currentUser?.role==="chef"?this.router.navigate(["/kitchen"]):this.currentUser?.role==="waiter"&&this.router.navigate(["/waiter"])}catch(r){throw console.error("Login error:",r),new Error(r.message)}})}loadUserData(e){return B(this,null,function*(){try{let t=li(this.firestore,`users/${e}`),r=yield wr(this.envInjector,()=>op(t));if(r.exists())this.currentUser=Pe({id:e},r.data());else throw console.error("User profile not found in Firestore for UID:",e),new Error("User profile not found. Please contact administrator.")}catch(t){throw console.error("Error loading user data:",t),t}})}ensureUserLoaded(e){return B(this,null,function*(){(!this.currentUser||this.currentUser.id!==e)&&(yield this.loadUserData(e))})}logout(){return B(this,null,function*(){yield s3(this.auth),this.currentUser=null,this.router.navigate(["/login"])})}isLoggedIn(){return this.currentUser!==null}hasRole(e){return this.currentUser?.role===e}createUserAccount(e,t,r){return B(this,null,function*(){try{let o=(yield n3(this.auth,e,t)).user.uid,s=li(this.firestore,`users/${o}`);return yield $L(s,bt(Pe({},r),{createdAt:new Date})),o}catch(i){throw console.error("Error creating user account:",i),new Error(i.message||"Failed to create user account")}})}logActivity(e,t){return B(this,null,function*(){if(!this.currentUser)return;let r={userId:this.currentUser.id,userName:this.currentUser.name,action:e,timestamp:new Date,details:t};try{yield this.db.logActivity(r)}catch(i){console.error("Failed to log activity:",i)}})}static \u0275fac=function(t){return new(t||n)(Pt(Hd),Pt(ul),Pt(js),Pt(cr),Pt(Mr))};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})};var lc=()=>B(null,null,function*(){let n=Oe(jr),e=Oe(js),t=yield Mv(n.user$.pipe(As(1)));return t?(yield n.ensureUserLoaded(t.uid),!0):(e.navigate(["/login"]),!1)}),ih=()=>B(null,null,function*(){let n=Oe(jr),e=Oe(js),t=yield Mv(n.user$.pipe(As(1)));return t&&(yield n.ensureUserLoaded(t.uid),n.hasRole("admin"))?!0:(e.navigate(["/"]),!1)});var rF=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(Xe(zc),Xe(Wa))};static \u0275dir=Gn({type:n})}return n})(),c0=(()=>{class n extends rF{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Mo(n)))(i||n)}})();static \u0275dir=Gn({type:n,features:[Ni]})}return n})(),lp=new ct(""),wZ={provide:lp,useExisting:Bi(()=>oh),multi:!0},oh=(()=>{class n extends c0{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Mo(n)))(i||n)}})();static \u0275dir=Gn({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&xe("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[as([wZ]),Ni]})}return n})(),bZ={provide:lp,useExisting:Bi(()=>$i),multi:!0};function IZ(){let n=Ls()?Ls().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var EZ=new ct(""),$i=(()=>{class n extends rF{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!IZ())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(Xe(zc),Xe(Wa),Xe(EZ,8))};static \u0275dir=Gn({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&xe("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[as([bZ]),Ni]})}return n})();function CZ(n){return n==null||iF(n)===0}function iF(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var up=new ct(""),oF=new ct("");function xZ(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function SZ(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function DZ(n){return CZ(n.value)?{required:!0}:null}function TZ(n){return e=>{let t=e.value?.length??iF(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function KL(n){return null}function sF(n){return n!=null}function aF(n){return ru(n)?_r(n):n}function cF(n){let e={};return n.forEach(t=>{e=t!=null?Pe(Pe({},e),t):e}),Object.keys(e).length===0?null:e}function lF(n,e){return e.map(t=>t(n))}function AZ(n){return!n.validate}function uF(n){return n.map(e=>AZ(e)?e:t=>e.validate(t))}function MZ(n){if(!n)return null;let e=n.filter(sF);return e.length==0?null:function(t){return cF(lF(t,e))}}function KD(n){return n!=null?MZ(uF(n)):null}function PZ(n){if(!n)return null;let e=n.filter(sF);return e.length==0?null:function(t){let r=lF(t,e).map(aF);return Xb(r).pipe(mn(cF))}}function YD(n){return n!=null?PZ(uF(n)):null}function YL(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function NZ(n){return n._rawValidators}function kZ(n){return n._rawAsyncValidators}function WD(n){return n?Array.isArray(n)?n:[n]:[]}function dw(n,e){return Array.isArray(n)?n.includes(e):n===e}function QL(n,e){let t=WD(e);return WD(n).forEach(i=>{dw(t,i)||t.push(i)}),t}function ZL(n,e){return WD(e).filter(t=>!dw(n,t))}var hw=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=KD(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=YD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},cp=class extends hw{name;get formDirective(){return null}get path(){return null}},a0=class extends hw{_parent=null;name=null;valueAccessor=null},fw=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},RZ={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},UEe=bt(Pe({},RZ),{"[class.ng-submitted]":"isSubmitted"}),Lo=(()=>{class n extends fw{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(Xe(a0,2))};static \u0275dir=Gn({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&on("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Ni]})}return n})(),dF=(()=>{class n extends fw{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(Xe(cp,10))};static \u0275dir=Gn({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&on("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Ni]})}return n})();var n0="VALID",uw="INVALID",sp="PENDING",r0="DISABLED",Nu=class{},pw=class extends Nu{value;source;constructor(e,t){super(),this.value=e,this.source=t}},o0=class extends Nu{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},s0=class extends Nu{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},ap=class extends Nu{status;source;constructor(e,t){super(),this.status=e,this.source=t}},GD=class extends Nu{source;constructor(e){super(),this.source=e}},gw=class extends Nu{source;constructor(e){super(),this.source=e}};function hF(n){return(yw(n)?n.validators:n)||null}function OZ(n){return Array.isArray(n)?KD(n):n||null}function fF(n,e){return(yw(e)?e.asyncValidators:n)||null}function LZ(n){return Array.isArray(n)?YD(n):n||null}function yw(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function FZ(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new et(1e3,"");if(!r[t])throw new et(1001,"")}function VZ(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new et(1002,"")})}var mw=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return pi(this.statusReactive)}set status(e){pi(()=>this.statusReactive.set(e))}_status=hf(()=>this.statusReactive());statusReactive=Os(void 0);get valid(){return this.status===n0}get invalid(){return this.status===uw}get pending(){return this.status==sp}get disabled(){return this.status===r0}get enabled(){return this.status!==r0}errors;get pristine(){return pi(this.pristineReactive)}set pristine(e){pi(()=>this.pristineReactive.set(e))}_pristine=hf(()=>this.pristineReactive());pristineReactive=Os(!0);get dirty(){return!this.pristine}get touched(){return pi(this.touchedReactive)}set touched(e){pi(()=>this.touchedReactive.set(e))}_touched=hf(()=>this.touchedReactive());touchedReactive=Os(!1);get untouched(){return!this.touched}_events=new $r;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(QL(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(QL(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(ZL(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(ZL(e,this._rawAsyncValidators))}hasValidator(e){return dw(this._rawValidators,e)}hasAsyncValidator(e){return dw(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(bt(Pe({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new s0(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new s0(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(bt(Pe({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new o0(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new o0(!0,r))}markAsPending(e={}){this.status=sp;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ap(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(bt(Pe({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=r0,this.errors=null,this._forEachChild(i=>{i.disable(bt(Pe({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new pw(this.value,r)),this._events.next(new ap(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(bt(Pe({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=n0,this._forEachChild(r=>{r.enable(bt(Pe({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(bt(Pe({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===n0||this.status===sp)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new pw(this.value,t)),this._events.next(new ap(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(bt(Pe({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?r0:n0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=sp,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=aF(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new ap(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Kr,this.statusChanges=new Kr}_calculateStatus(){return this._allControlsDisabled()?r0:this.errors?uw:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(sp)?sp:this._anyControlsHaveStatus(uw)?uw:n0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new o0(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new s0(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){yw(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=OZ(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=LZ(this._rawAsyncValidators)}},vw=class extends mw{constructor(e,t,r){super(hF(t),fF(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){VZ(this,!0,e),Object.keys(e).forEach(r=>{FZ(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new gw(this))}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var QD=new ct("",{providedIn:"root",factory:()=>ZD}),ZD="always";function jZ(n,e){return[...e.path,n]}function pF(n,e,t=ZD){gF(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),UZ(n,e),qZ(n,e),zZ(n,e),BZ(n,e)}function JL(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function BZ(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function gF(n,e){let t=NZ(n);e.validator!==null?n.setValidators(YL(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=kZ(n);e.asyncValidator!==null?n.setAsyncValidators(YL(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();JL(e._rawValidators,i),JL(e._rawAsyncValidators,i)}function UZ(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&mF(n,e)})}function zZ(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&mF(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function mF(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function qZ(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function HZ(n,e){n==null,gF(n,e)}function $Z(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function WZ(n){return Object.getPrototypeOf(n.constructor)===c0}function GZ(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function KZ(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===$i?t=o:WZ(o)?r=o:i=o}),i||r||t||null}var YZ={provide:cp,useExisting:Bi(()=>JD)},i0=Promise.resolve(),JD=(()=>{class n extends cp{callSetDisabledState;get submitted(){return pi(this.submittedReactive)}_submitted=hf(()=>this.submittedReactive());submittedReactive=Os(!1);_directives=new Set;form;ngSubmit=new Kr;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new vw({},KD(t),YD(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){i0.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),pF(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){i0.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){i0.then(()=>{let r=this._findContainer(t.path),i=new vw({});HZ(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){i0.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){i0.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),GZ(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new GD(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(Xe(up,10),Xe(oF,10),Xe(QD,8))};static \u0275dir=Gn({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&xe("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[as([YZ]),Ni]})}return n})();function XL(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function eF(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var QZ=class extends mw{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(hF(t),fF(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),yw(t)&&(t.nonNullable||t.initialValueIsDefault)&&(eF(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new gw(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){XL(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){XL(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){eF(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var ZZ={provide:a0,useExisting:Bi(()=>po)},tF=Promise.resolve(),po=(()=>{class n extends a0{_changeDetectorRef;callSetDisabledState;control=new QZ;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Kr;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=KZ(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),$Z(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){pF(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){tF.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Td(r);tF.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?jZ(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(Xe(cp,9),Xe(up,10),Xe(oF,10),Xe(lp,10),Xe(Dd,8),Xe(QD,8))};static \u0275dir=Gn({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[as([ZZ]),Ni,Uc]})}return n})();var vF=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Gn({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),JZ={provide:lp,useExisting:Bi(()=>wa),multi:!0},wa=(()=>{class n extends c0{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Mo(n)))(i||n)}})();static \u0275dir=Gn({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&xe("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[as([JZ]),Ni]})}return n})();var XZ={provide:lp,useExisting:Bi(()=>zs),multi:!0};function yF(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function eJ(n){return n.split(":")[0]}var zs=(()=>{class n extends c0{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=Oe(Hc).injector;destroyRef=Oe(sa);cdr=Oe(Dd);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Oy({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let r=this._getOptionId(t),i=yF(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=eJ(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Mo(n)))(i||n)}})();static \u0275dir=Gn({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&xe("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[as([XZ]),Ni]})}return n})(),uc=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(yF(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||n)(Xe(Wa),Xe(zc),Xe(zs,9))};static \u0275dir=Gn({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),tJ={provide:lp,useExisting:Bi(()=>_F),multi:!0};function nF(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function nJ(n){return n.split(":")[0]}var _F=(()=>{class n extends c0{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],l=this._getOptionValue(c.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let l=this._getOptionValue(c.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=nJ(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Mo(n)))(i||n)}})();static \u0275dir=Gn({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&xe("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[as([tJ]),Ni]})}return n})(),dc=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(nF(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(nF(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(Xe(Wa),Xe(zc),Xe(_F,9))};static \u0275dir=Gn({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function rJ(n){return typeof n=="number"?n:parseInt(n,10)}function wF(n){return typeof n=="number"?n:parseFloat(n)}var _w=(()=>{class n{_validator=KL;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):KL,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Gn({type:n,features:[Uc]})}return n})(),iJ={provide:up,useExisting:Bi(()=>XD),multi:!0},XD=(()=>{class n extends _w{max;inputName="max";normalizeInput=t=>wF(t);createValidator=t=>SZ(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=Mo(n)))(i||n)}})();static \u0275dir=Gn({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&$c("max",i._enabled?i.max:null)},inputs:{max:"max"},standalone:!1,features:[as([iJ]),Ni]})}return n})(),oJ={provide:up,useExisting:Bi(()=>ba),multi:!0},ba=(()=>{class n extends _w{min;inputName="min";normalizeInput=t=>wF(t);createValidator=t=>xZ(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=Mo(n)))(i||n)}})();static \u0275dir=Gn({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&$c("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[as([oJ]),Ni]})}return n})(),sJ={provide:up,useExisting:Bi(()=>eT),multi:!0};var eT=(()=>{class n extends _w{required;inputName="required";normalizeInput=Td;createValidator=t=>DZ;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Mo(n)))(i||n)}})();static \u0275dir=Gn({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&$c("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[as([sJ]),Ni]})}return n})();var aJ={provide:up,useExisting:Bi(()=>tT),multi:!0},tT=(()=>{class n extends _w{maxlength;inputName="maxlength";normalizeInput=t=>rJ(t);createValidator=t=>TZ(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=Mo(n)))(i||n)}})();static \u0275dir=Gn({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&$c("maxlength",i._enabled?i.maxlength:null)},inputs:{maxlength:"maxlength"},standalone:!1,features:[as([aJ]),Ni]})}return n})();var cJ=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=qc({type:n});static \u0275inj=Va({})}return n})();var Wi=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:QD,useValue:t.callSetDisabledState??ZD}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=qc({type:n});static \u0275inj=Va({imports:[cJ]})}return n})();function lJ(n,e){if(n&1&&(b(0,"div",13),C(1),w()),n&2){let t=oe();O(),Ge(" ",t.errorMessage," ")}}var ww=class n{constructor(e){this.authService=e}email="";password="";errorMessage="";isLoading=!1;onLogin(){return B(this,null,function*(){if(this.errorMessage="",!this.email||!this.password){this.errorMessage="Please enter both email and password";return}this.isLoading=!0;try{yield this.authService.login(this.email,this.password)}catch(e){this.errorMessage=e.message||"Login failed. Please try again."}finally{this.isLoading=!1}})}static \u0275fac=function(t){return new(t||n)(Xe(jr))};static \u0275cmp=sr({type:n,selectors:[["app-login"]],decls:22,vars:7,consts:[[1,"login-container"],[1,"login-card"],[1,"login-header"],[1,"login-form",3,"ngSubmit"],[1,"form-group"],["for","email"],["type","email","id","email","name","email","placeholder","Enter your email","required","",3,"ngModelChange","ngModel","disabled"],["for","password"],["type","password","id","password","name","password","placeholder","Enter your password","required","",3,"ngModelChange","ngModel","disabled"],["class","error-message",4,"ngIf"],["type","submit",1,"login-button",3,"disabled"],[1,"forgot-password"],["href","#",3,"click"],[1,"error-message"]],template:function(t,r){t&1&&(b(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),C(4,"Visakh"),w(),b(5,"p"),C(6,"Please login to continue"),w()(),b(7,"form",3),xe("ngSubmit",function(){return r.onLogin()}),b(8,"div",4)(9,"label",5),C(10,"Email"),w(),b(11,"input",6),ht("ngModelChange",function(o){return pt(r.email,o)||(r.email=o),o}),w()(),b(12,"div",4)(13,"label",7),C(14,"Password"),w(),b(15,"input",8),ht("ngModelChange",function(o){return pt(r.password,o)||(r.password=o),o}),w()(),He(16,lJ,2,1,"div",9),b(17,"button",10),C(18),w(),b(19,"div",11)(20,"a",12),xe("click",function(o){return o.preventDefault()}),C(21,"Forgot Password?"),w()()()()()),t&2&&(O(11),dt("ngModel",r.email),he("disabled",r.isLoading),O(4),dt("ngModel",r.password),he("disabled",r.isLoading),O(),he("ngIf",r.errorMessage),O(),he("disabled",r.isLoading),O(),Ge(" ",r.isLoading?"Logging in...":"Login"," "))},dependencies:[lr,Ir,Wi,vF,$i,Lo,dF,eT,po,JD],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2)}.login-card[_ngcontent-%COMP%]{background:#fff;border-radius:10px;box-shadow:0 10px 25px #0003;padding:40px;width:100%;max-width:400px}.login-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#333;font-size:24px;margin-bottom:10px}.login-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:14px}.login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#333;font-weight:500;font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:12px;border:1px solid #ddd;border-radius:5px;font-size:14px;transition:border-color .3s}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{background-color:#f5f5f5;cursor:not-allowed}.error-message[_ngcontent-%COMP%]{background-color:#fee;color:#c33;padding:10px;border-radius:5px;font-size:14px;border:1px solid #fcc}.login-button[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;padding:12px;border-radius:5px;font-size:16px;font-weight:500;cursor:pointer;transition:opacity .3s}.login-button[_ngcontent-%COMP%]:hover:not(:disabled){opacity:.9}.login-button[_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.6}.forgot-password[_ngcontent-%COMP%]{text-align:center;margin-top:10px}.forgot-password[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#667eea;text-decoration:none;font-size:14px}.forgot-password[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};function uJ(n,e){n&1&&(b(0,"div",4),C(1,"Loading dashboard data..."),w())}function dJ(n,e){if(n&1&&(b(0,"div",29)(1,"strong"),C(2),w(),C(3),w()),n&2){let t=e.$implicit;O(2),Ue(t.name),O(),qy(" is below ",t.lowStockThreshold,"",t.unit," (Current: ",t.currentStock,"",t.unit,") ")}}function hJ(n,e){if(n&1&&(b(0,"div",14)(1,"h2",15),C(2,"\u{1F6A8} Low Stock Alerts"),w(),b(3,"div",27),He(4,dJ,4,5,"div",28),w()()),n&2){let t=oe(2);O(4),he("ngForOf",t.lowStockItems)}}function fJ(n,e){if(n&1&&(b(0,"div",30)(1,"div",31),Po(2,"div",32)(3,"div",33),w(),b(4,"div",34),C(5),w()()),n&2){let t=e.$implicit,r=oe(2);O(2),xd("height",t.sales/r.maxChartValue*100,"%"),he("title","Sales: "+r.formatCurrency(t.sales)),O(),xd("height",t.expenses/r.maxChartValue*100,"%"),he("title","Expenses: "+r.formatCurrency(t.expenses)),O(2),Ue(t.date)}}function pJ(n,e){if(n&1&&(b(0,"div",39),C(1),iu(2,"date"),w()),n&2){let t=oe().$implicit;O(),Ge(" ",ou(2,1,t.timestamp,"short")," ")}}function gJ(n,e){if(n&1&&(b(0,"div",35)(1,"div",36),C(2),w(),b(3,"div",37),C(4),w(),He(5,pJ,3,4,"div",38),w()),n&2){let t=e.$implicit;O(2),Ue(t.userName),O(2),Ue(t.action),O(),he("ngIf",t.timestamp)}}function mJ(n,e){n&1&&(b(0,"div",40),C(1," No recent activities "),w())}function vJ(n,e){if(n&1&&(b(0,"div")(1,"div",5)(2,"div",6)(3,"div",7),C(4,"\u{1F4B0}"),w(),b(5,"div",8)(6,"h3"),C(7,"Total Sales Today"),w(),b(8,"p",9),C(9),w()()(),b(10,"div",10)(11,"div",7),C(12,"\u{1F6D2}"),w(),b(13,"div",8)(14,"h3"),C(15,"Total Orders Today"),w(),b(16,"p",9),C(17),w()()(),b(18,"div",11)(19,"div",7),C(20,"\u{1F4CA}"),w(),b(21,"div",8)(22,"h3"),C(23,"Expenses Today"),w(),b(24,"p",9),C(25),w()()(),b(26,"div",12)(27,"div",7),C(28),w(),b(29,"div",8)(30,"h3"),C(31,"Profit Today"),w(),b(32,"p",9),C(33),w()()()(),He(34,hJ,5,1,"div",13),b(35,"div",14)(36,"h2",15),C(37,"\u{1F4CA} Sales vs Expenses (Last 7 Days)"),w(),b(38,"div",16)(39,"div",17)(40,"div",18),He(41,fJ,6,7,"div",19),w(),b(42,"div",20)(43,"div",21),Po(44,"span",22),b(45,"span"),C(46,"Sales"),w()(),b(47,"div",21),Po(48,"span",23),b(49,"span"),C(50,"Expenses"),w()()()()()(),b(51,"div",14)(52,"h2",15),C(53,"\u{1F4DD} Recent Activity"),w(),b(54,"div",24),He(55,gJ,6,3,"div",25)(56,mJ,2,0,"div",26),w()()()),n&2){let t=oe();O(9),Ue(t.formatCurrency(t.totalSalesToday)),O(8),Ue(t.totalOrdersToday),O(8),Ue(t.formatCurrency(t.totalExpensesToday)),O(),on("negative",t.profitToday<0),O(2),Ue(t.profitToday>=0?"\u{1F4C8}":"\u{1F4C9}"),O(5),Ue(t.formatCurrency(t.profitToday)),O(),he("ngIf",t.lowStockItems.length>0),O(7),he("ngForOf",t.chartData),O(14),he("ngForOf",t.recentActivities),O(),he("ngIf",t.recentActivities.length===0)}}var bw=class n{constructor(e){this.db=e}totalSalesToday=0;totalOrdersToday=0;totalExpensesToday=0;profitToday=0;lowStockItems=[];recentActivities=[];chartData=[];maxChartValue=100;weekOrdersCount=0;weekPurchasesCount=0;weekOrderStatusCounts={};isLoading=!0;ngOnInit(){return B(this,null,function*(){yield this.loadDashboardData()})}loadDashboardData(){return B(this,null,function*(){this.isLoading=!0;try{let e=yield Promise.allSettled([this.db.getTodaySales(),this.db.getTodayExpenses(),this.db.getTodayOrders(),this.db.getLowStockItems(),this.db.getRecentActivityLogs(5)]),[t,r,i,o,s]=e;t.status==="fulfilled"?this.totalSalesToday=t.value:console.error("Failed to load today sales:",t.reason),r.status==="fulfilled"?this.totalExpensesToday=r.value:console.error("Failed to load today expenses:",r.reason),this.profitToday=this.totalSalesToday-this.totalExpensesToday,i.status==="fulfilled"?this.totalOrdersToday=i.value.length:console.error("Failed to load today orders:",i.reason),o.status==="fulfilled"?this.lowStockItems=o.value:console.error("Failed to load low stock items:",o.reason),s.status==="fulfilled"?(this.recentActivities=s.value,console.log("Recent activities loaded:",this.recentActivities.length,this.recentActivities)):console.error("Failed to load recent activities:",s.reason);try{yield this.loadChartData()}catch(a){console.error("Failed to load chart data:",a)}}catch(e){console.error("Error loading dashboard data:",e)}finally{this.isLoading=!1}})}loadChartData(){return B(this,null,function*(){this.chartData=[];let e=new Date;e.setHours(23,59,59,999);let t=new Date(e);t.setDate(e.getDate()-6),t.setHours(0,0,0,0),console.log("Loading chart data from",t,"to",e);let[r,i]=yield Promise.all([this.db.getOrdersByDateRange(t,e),this.db.getPurchasesByDateRange(t,e)]);console.log("Week orders:",r.length,r),console.log("Week purchases:",i.length,i),this.weekOrdersCount=r.length,this.weekPurchasesCount=i.length,this.weekOrderStatusCounts=r.reduce((l,u)=>(l[u.status]=(l[u.status]||0)+1,l),{});let o=l=>l?l.toDate&&typeof l.toDate=="function"?l.toDate():l instanceof Date?l:new Date(l):new Date(NaN),s=l=>{let u=l.getFullYear(),g=String(l.getMonth()+1).padStart(2,"0"),v=String(l.getDate()).padStart(2,"0");return`${u}-${g}-${v}`},a={};for(let l=0;l<7;l++){let u=new Date(t);u.setDate(t.getDate()+l);let g=s(u);a[g]={label:this.formatDate(u),sales:0,expenses:0}}for(let l of r){if(l.status!=="completed")continue;let u=o(l.createdAt),g=isNaN(u.getTime())?"":s(u);console.log("Order date:",l.createdAt,"-> parsed:",u,"-> key:",g,"-> amount:",l.totalAmount),g&&a[g]&&(a[g].sales+=l.totalAmount||0)}for(let l of i){let u=o(l.date),g=isNaN(u.getTime())?"":s(u);console.log("Purchase date:",l.date,"-> parsed:",u,"-> key:",g,"-> cost:",l.totalCost),g&&a[g]&&(a[g].expenses+=l.totalCost||0)}this.chartData=Object.keys(a).sort().map(l=>({date:a[l].label,sales:a[l].sales,expenses:a[l].expenses})),console.log("Buckets after aggregation:",JSON.stringify(a,null,2)),console.log("Chart data array:",JSON.stringify(this.chartData,null,2));let c=this.chartData.flatMap(l=>[l.sales,l.expenses]);this.maxChartValue=Math.max(...c,100),console.log("Max chart value:",this.maxChartValue,"All values:",c)})}formatDate(e){return`${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()]} ${e.getDate()}`}formatCurrency(e){return`${e.toFixed(0)}`}get debugInfo(){let e=this.chartData.filter(t=>t.sales>0||t.expenses>0);return{maxChartValue:this.maxChartValue,chartData:this.chartData,nonZeroDays:e,allValues:this.chartData.flatMap(t=>[t.sales,t.expenses]),recentCount:this.recentActivities.length,totals:{salesToday:this.totalSalesToday,expensesToday:this.totalExpensesToday,ordersToday:this.totalOrdersToday,profitToday:this.profitToday},weekOrdersCount:this.weekOrdersCount,weekPurchasesCount:this.weekPurchasesCount,weekOrderStatusCounts:this.weekOrderStatusCounts}}static \u0275fac=function(t){return new(t||n)(Xe(Mr))};static \u0275cmp=sr({type:n,selectors:[["app-dashboard"]],decls:5,vars:2,consts:[[1,"dashboard-container"],[1,"page-title"],["class","loading",4,"ngIf"],[4,"ngIf"],[1,"loading"],[1,"stats-grid"],[1,"stat-card","sales"],[1,"stat-icon"],[1,"stat-content"],[1,"stat-value"],[1,"stat-card","orders"],[1,"stat-card","expenses"],[1,"stat-card","profit"],["class","section",4,"ngIf"],[1,"section"],[1,"section-title"],[1,"chart-container"],[1,"chart"],[1,"chart-bars"],["class","chart-group",4,"ngFor","ngForOf"],[1,"chart-legend"],[1,"legend-item"],[1,"legend-color","sales"],[1,"legend-color","expenses"],[1,"activity-list"],["class","activity-item",4,"ngFor","ngForOf"],["class","no-data",4,"ngIf"],[1,"alert-list"],["class","alert-item",4,"ngFor","ngForOf"],[1,"alert-item"],[1,"chart-group"],[1,"bar-container"],[1,"bar","sales-bar",3,"title"],[1,"bar","expenses-bar",3,"title"],[1,"chart-label"],[1,"activity-item"],[1,"activity-user"],[1,"activity-action"],["class","activity-time",4,"ngIf"],[1,"activity-time"],[1,"no-data"]],template:function(t,r){t&1&&(b(0,"div",0)(1,"h1",1),C(2,"Admin Dashboard"),w(),He(3,uJ,2,0,"div",2)(4,vJ,57,11,"div",3),w()),t&2&&(O(3),he("ngIf",r.isLoading),O(),he("ngIf",!r.isLoading))},dependencies:[lr,Qr,Ir,Ad],styles:[".dashboard-container[_ngcontent-%COMP%]{padding:20px;max-width:1400px;margin:0 auto}.page-title[_ngcontent-%COMP%]{font-size:28px;color:#333;margin-bottom:30px}.loading[_ngcontent-%COMP%]{text-align:center;padding:40px;font-size:18px;color:#666}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin-bottom:30px}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:10px;padding:20px;display:flex;align-items:center;gap:15px;box-shadow:0 2px 8px #0000001a;transition:transform .2s}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.stat-card.sales[_ngcontent-%COMP%]{border-left:4px solid #4caf50}.stat-card.orders[_ngcontent-%COMP%]{border-left:4px solid #2196f3}.stat-card.expenses[_ngcontent-%COMP%]{border-left:4px solid #ff9800}.stat-card.profit[_ngcontent-%COMP%]{border-left:4px solid #9c27b0}.stat-card.profit.negative[_ngcontent-%COMP%]{border-left:4px solid #f44336}.stat-icon[_ngcontent-%COMP%]{font-size:40px}.stat-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:14px;color:#666;margin:0 0 5px}.stat-value[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#333;margin:0}.section[_ngcontent-%COMP%]{background:#fff;border-radius:10px;padding:20px;margin-bottom:20px;box-shadow:0 2px 8px #0000001a}.section-title[_ngcontent-%COMP%]{font-size:20px;color:#333;margin:0 0 20px}.alert-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.alert-item[_ngcontent-%COMP%]{background:#fff3cd;border:1px solid #ffc107;border-radius:5px;padding:12px;color:#856404}.chart-container[_ngcontent-%COMP%]{overflow-x:auto}.chart[_ngcontent-%COMP%]{min-width:600px;height:260px}.chart-bars[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:flex-end;height:80%;border-bottom:2px solid #ddd;padding:20px 0}.chart-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;flex:1;height:100%}.bar-container[_ngcontent-%COMP%]{display:flex;gap:5px;align-items:flex-end;height:100%;width:100%;justify-content:center}.bar[_ngcontent-%COMP%]{width:30px;border-radius:4px 4px 0 0;transition:all .3s;cursor:pointer;min-height:2px}.bar[_ngcontent-%COMP%]:hover{opacity:.8}.sales-bar[_ngcontent-%COMP%]{background:linear-gradient(180deg,#4caf50,#81c784)}.expenses-bar[_ngcontent-%COMP%]{background:linear-gradient(180deg,#ff9800,#ffb74d)}.chart-label[_ngcontent-%COMP%]{margin-top:10px;font-size:12px;color:#666;text-align:center}.chart-legend[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:30px;margin-top:20px}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px}.legend-color[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:3px}.legend-color.sales[_ngcontent-%COMP%]{background:#4caf50}.legend-color.expenses[_ngcontent-%COMP%]{background:#ff9800}.activity-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.activity-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px;background:#f5f5f5;border-radius:5px;gap:15px}.activity-user[_ngcontent-%COMP%]{font-weight:600;color:#333;min-width:120px}.activity-action[_ngcontent-%COMP%]{flex:1;color:#666}.activity-time[_ngcontent-%COMP%]{color:#999;font-size:12px;min-width:120px;text-align:right}.no-data[_ngcontent-%COMP%]{text-align:center;padding:20px;color:#999}"]})};function yJ(n,e){if(n&1&&(b(0,"option",14),C(1),w()),n&2){let t=e.$implicit;he("value",t),O(),Ue(t)}}function _J(n,e){if(n&1){let t=Rt();b(0,"tr")(1,"td"),C(2),w(),b(3,"td")(4,"span",15),C(5),w()(),b(6,"td"),C(7),w(),b(8,"td"),C(9),w(),b(10,"td")(11,"span",16),C(12),w()(),b(13,"td",17)(14,"button",18),xe("click",function(){let i=_e(t).$implicit,o=oe();return we(o.openEditModal(i))}),C(15,"Edit"),w(),b(16,"button",19),xe("click",function(){let i=_e(t).$implicit,o=oe();return we(o.toggleActive(i))}),C(17),w(),b(18,"button",20),xe("click",function(){let i=_e(t).$implicit,o=oe();return we(o.deleteItem(i))}),C(19,"Delete"),w()()()}if(n&2){let t=e.$implicit;O(2),Ue(t.name),O(3),Ue(t.category),O(2),Ue(t.price.toFixed(0)),O(2),Ge("",t.taxRate,"%"),O(2),on("active",t.isActive)("inactive",!t.isActive),O(),Ge(" ",t.isActive?"Active":"Inactive"," "),O(5),Ge(" ",t.isActive?"Deactivate":"Activate"," ")}}function wJ(n,e){n&1&&(b(0,"tr")(1,"td",21),C(2,"No menu items found"),w()())}function bJ(n,e){if(n&1&&(b(0,"option",14),C(1),w()),n&2){let t=e.$implicit;he("value",t),O(),Ue(t)}}function IJ(n,e){if(n&1){let t=Rt();b(0,"div",27)(1,"label"),C(2,"Unit"),w(),b(3,"input",46),ht("ngModelChange",function(i){_e(t);let o=oe(2);return pt(o.currentItem.unit,i)||(o.currentItem.unit=i),we(i)}),w(),b(4,"small"),C(5,"Enter the unit of measurement (e.g., kg for kilograms)"),w()()}if(n&2){let t=oe(2);O(3),dt("ngModel",t.currentItem.unit)}}function EJ(n,e){if(n&1&&(b(0,"option",14),C(1),w()),n&2){let t=e.$implicit;he("value",t.id),O(),Sd(" ",t.name," (",t.currentStock," ",t.unit,") ")}}function CJ(n,e){if(n&1){let t=Rt();b(0,"div",49)(1,"div",50)(2,"div",51)(3,"label"),C(4,"Inventory Item"),w(),b(5,"select",5),ht("ngModelChange",function(i){let o=_e(t).$implicit;return pt(o.inventoryItemId,i)||(o.inventoryItemId=i),we(i)}),xe("change",function(i){let o=_e(t).$implicit,s=oe(3);return we(s.onInventorySelect(o,i))}),b(6,"option",52),C(7,"Select item..."),w(),He(8,EJ,2,4,"option",7),w()(),b(9,"div",51)(10,"label"),C(11,"Quantity Used"),w(),b(12,"input",53),ht("ngModelChange",function(i){let o=_e(t).$implicit;return pt(o.quantityUsed,i)||(o.quantityUsed=i),we(i)}),w()(),b(13,"div",51)(14,"label"),C(15,"Unit"),w(),b(16,"input",54),ht("ngModelChange",function(i){let o=_e(t).$implicit;return pt(o.unit,i)||(o.unit=i),we(i)}),w()(),b(17,"div",55)(18,"button",56),xe("click",function(){let i=_e(t).index,o=oe(3);return we(o.removeRecipeItem(i))}),C(19,"Remove"),w()()()()}if(n&2){let t=e.$implicit,r=oe(3);O(5),dt("ngModel",t.inventoryItemId),O(3),he("ngForOf",r.inventoryItems),O(4),dt("ngModel",t.quantityUsed),O(4),dt("ngModel",t.unit)}}function xJ(n,e){if(n&1&&(b(0,"div",47),He(1,CJ,20,4,"div",48),w()),n&2){let t=oe(2);O(),he("ngForOf",t.currentItem.recipeMapping)}}function SJ(n,e){n&1&&(b(0,"div",57)(1,"p"),C(2,'No ingredients added yet. Click "Add Ingredient" to map inventory items.'),w()())}function DJ(n,e){if(n&1){let t=Rt();b(0,"div",22)(1,"div",23)(2,"div",24)(3,"h2"),C(4),w(),b(5,"button",25),xe("click",function(){_e(t);let i=oe();return we(i.closeModal())}),C(6,"\xD7"),w()(),b(7,"div",26)(8,"div",27)(9,"label"),C(10,"Item Name *"),w(),b(11,"input",28),ht("ngModelChange",function(i){_e(t);let o=oe();return pt(o.currentItem.name,i)||(o.currentItem.name=i),we(i)}),w()(),b(12,"div",27)(13,"label"),C(14,"Category *"),w(),b(15,"select",29),ht("ngModelChange",function(i){_e(t);let o=oe();return pt(o.currentItem.category,i)||(o.currentItem.category=i),we(i)}),He(16,bJ,2,2,"option",7),w()(),b(17,"div",30)(18,"div",27)(19,"label"),C(20,"Selling Price (PKR) *"),w(),b(21,"input",31),ht("ngModelChange",function(i){_e(t);let o=oe();return pt(o.currentItem.price,i)||(o.currentItem.price=i),we(i)}),w()(),b(22,"div",27)(23,"label"),C(24,"Tax Rate (%) *"),w(),b(25,"input",32),ht("ngModelChange",function(i){_e(t);let o=oe();return pt(o.currentItem.taxRate,i)||(o.currentItem.taxRate=i),we(i)}),w()()(),b(26,"div",27)(27,"label"),C(28,"Description"),w(),b(29,"textarea",33),ht("ngModelChange",function(i){_e(t);let o=oe();return pt(o.currentItem.description,i)||(o.currentItem.description=i),we(i)}),w()(),b(30,"div",27)(31,"label",34)(32,"input",35),ht("ngModelChange",function(i){_e(t);let o=oe();return pt(o.currentItem.soldByWeight,i)||(o.currentItem.soldByWeight=i),we(i)}),w(),C(33," Sold by weight (allows decimal quantities like 0.72 kg) "),w()(),He(34,IJ,6,1,"div",36),b(35,"div",27)(36,"label",34)(37,"input",35),ht("ngModelChange",function(i){_e(t);let o=oe();return pt(o.currentItem.isActive,i)||(o.currentItem.isActive=i),we(i)}),w(),C(38," Active (visible in POS) "),w()(),b(39,"div",37)(40,"div",38)(41,"h3"),C(42,"Recipe Mapping (Inventory Deduction)"),w(),b(43,"button",39),xe("click",function(){_e(t);let i=oe();return we(i.addRecipeItem())}),C(44,"+ Add Ingredient"),w()(),b(45,"p",40),C(46,"Define which inventory items are consumed when this menu item is sold"),w(),He(47,xJ,2,1,"div",41)(48,SJ,3,0,"div",42),w()(),b(49,"div",43)(50,"button",44),xe("click",function(){_e(t);let i=oe();return we(i.closeModal())}),C(51,"Cancel"),w(),b(52,"button",45),xe("click",function(){_e(t);let i=oe();return we(i.saveItem())}),C(53),w()()()()}if(n&2){let t=oe();O(4),Ge("",t.isEditMode?"Edit":"Add New"," Menu Item"),O(7),dt("ngModel",t.currentItem.name),O(4),dt("ngModel",t.currentItem.category),O(),he("ngForOf",t.categories),O(5),dt("ngModel",t.currentItem.price),O(4),dt("ngModel",t.currentItem.taxRate),O(4),dt("ngModel",t.currentItem.description),O(3),dt("ngModel",t.currentItem.soldByWeight),O(2),he("ngIf",t.currentItem.soldByWeight),O(3),dt("ngModel",t.currentItem.isActive),O(10),he("ngIf",t.currentItem.recipeMapping&&t.currentItem.recipeMapping.length>0),O(),he("ngIf",!t.currentItem.recipeMapping||t.currentItem.recipeMapping.length===0),O(4),he("disabled",t.isLoading),O(),Ge(" ",t.isLoading?"Saving...":"Save"," ")}}var Iw=class n{constructor(e){this.db=e}menuItems=[];filteredItems=[];inventoryItems=[];isLoading=!1;showAddModal=!1;currentItem=this.getEmptyItem();isEditMode=!1;categories=["BBQ","Curries","Rice","Bread","Salads","Drinks","Desserts"];selectedCategory="all";searchText="";ngOnInit(){return B(this,null,function*(){yield this.loadMenuItems(),yield this.loadInventoryItems()})}getEmptyItem(){return{name:"",category:"BBQ",price:0,taxRate:0,isActive:!0,description:"",recipeMapping:[]}}loadMenuItems(){return B(this,null,function*(){this.isLoading=!0;try{this.menuItems=yield this.db.getMenuItems(),this.applyFilters()}catch(e){console.error("Error loading menu items:",e)}finally{this.isLoading=!1}})}loadInventoryItems(){return B(this,null,function*(){try{this.inventoryItems=yield this.db.getInventoryItems()}catch(e){console.error("Error loading inventory items:",e)}})}applyFilters(){this.filteredItems=this.menuItems.filter(e=>{let t=this.selectedCategory==="all"||e.category===this.selectedCategory,r=!this.searchText||e.name.toLowerCase().includes(this.searchText.toLowerCase());return t&&r})}onCategoryChange(){this.applyFilters()}onSearchChange(){this.applyFilters()}openAddModal(){this.currentItem=this.getEmptyItem(),this.isEditMode=!1,this.showAddModal=!0}openEditModal(e){this.currentItem=bt(Pe({},e),{recipeMapping:e.recipeMapping?[...e.recipeMapping]:[]}),this.isEditMode=!0,this.showAddModal=!0}closeModal(){this.showAddModal=!1,this.currentItem=this.getEmptyItem()}saveItem(){return B(this,null,function*(){if(!this.currentItem.name||this.currentItem.price<=0){alert("Please fill in all required fields");return}this.isLoading=!0;try{this.isEditMode&&this.currentItem.id?yield this.db.updateMenuItem(this.currentItem.id,this.currentItem):yield this.db.createMenuItem(this.currentItem),yield this.loadMenuItems(),this.closeModal()}catch(e){console.error("Error saving menu item:",e),alert("Error saving item. Please try again.")}finally{this.isLoading=!1}})}toggleActive(e){return B(this,null,function*(){if(e.id)try{yield this.db.updateMenuItem(e.id,{isActive:!e.isActive}),yield this.loadMenuItems()}catch(t){console.error("Error updating menu item:",t)}})}deleteItem(e){return B(this,null,function*(){if(e.id&&confirm(`Are you sure you want to delete "${e.name}"?`))try{yield this.db.deleteMenuItem(e.id),yield this.loadMenuItems()}catch(t){console.error("Error deleting menu item:",t)}})}addRecipeItem(){this.currentItem.recipeMapping||(this.currentItem.recipeMapping=[]),this.currentItem.recipeMapping.push({inventoryItemId:"",inventoryItemName:"",quantityUsed:0,unit:""})}removeRecipeItem(e){this.currentItem.recipeMapping&&this.currentItem.recipeMapping.splice(e,1)}onInventorySelect(e,t){let i=t.target.value,o=this.inventoryItems.find(s=>s.id===i);o&&(e.inventoryItemId=o.id,e.inventoryItemName=o.name,e.unit=o.unit)}static \u0275fac=function(t){return new(t||n)(Xe(Mr))};static \u0275cmp=sr({type:n,selectors:[["app-menu-management"]],decls:38,vars:6,consts:[[1,"menu-container"],[1,"header"],[1,"btn","btn-primary",3,"click"],[1,"filters"],[1,"filter-group"],[3,"ngModelChange","change","ngModel"],["value","all"],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","Search menu items...",3,"ngModelChange","input","ngModel"],[1,"table-container"],[1,"items-table"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","modal",4,"ngIf"],[3,"value"],[1,"category-badge"],[1,"status-badge"],[1,"actions"],[1,"btn","btn-sm","btn-edit",3,"click"],[1,"btn","btn-sm","btn-toggle",3,"click"],[1,"btn","btn-sm","btn-delete",3,"click"],["colspan","6",1,"no-data"],[1,"modal"],[1,"modal-content"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"form-group"],["type","text","placeholder","e.g., Chicken Kebab",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],[1,"form-row"],["type","number","min","0","step","0.01",3,"ngModelChange","ngModel"],["type","number","min","0","max","100","step","0.1",3,"ngModelChange","ngModel"],["rows","3","placeholder","Optional description",3,"ngModelChange","ngModel"],[1,"checkbox-label"],["type","checkbox",3,"ngModelChange","ngModel"],["class","form-group",4,"ngIf"],[1,"recipe-section"],[1,"recipe-header"],["type","button",1,"btn","btn-sm","btn-add",3,"click"],[1,"help-text"],["class","recipe-list",4,"ngIf"],["class","no-recipe",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click","disabled"],["type","text","placeholder","e.g., kg",3,"ngModelChange","ngModel"],[1,"recipe-list"],["class","recipe-item",4,"ngFor","ngForOf"],[1,"recipe-item"],[1,"recipe-row"],[1,"recipe-field"],["value",""],["type","number","min","0","step","0.01","placeholder","e.g., 1.5",3,"ngModelChange","ngModel"],["type","text","placeholder","e.g., kg","readonly","",3,"ngModelChange","ngModel"],[1,"recipe-actions"],["type","button",1,"btn","btn-sm","btn-delete",3,"click"],[1,"no-recipe"]],template:function(t,r){t&1&&(b(0,"div",0)(1,"div",1)(2,"h1"),C(3,"Menu Management"),w(),b(4,"button",2),xe("click",function(){return r.openAddModal()}),C(5,"+ Add New Menu Item"),w()(),b(6,"div",3)(7,"div",4)(8,"label"),C(9,"Category:"),w(),b(10,"select",5),ht("ngModelChange",function(o){return pt(r.selectedCategory,o)||(r.selectedCategory=o),o}),xe("change",function(){return r.onCategoryChange()}),b(11,"option",6),C(12,"All Categories"),w(),He(13,yJ,2,2,"option",7),w()(),b(14,"div",4)(15,"label"),C(16,"Search:"),w(),b(17,"input",8),ht("ngModelChange",function(o){return pt(r.searchText,o)||(r.searchText=o),o}),xe("input",function(){return r.onSearchChange()}),w()()(),b(18,"div",9)(19,"table",10)(20,"thead")(21,"tr")(22,"th"),C(23,"Name"),w(),b(24,"th"),C(25,"Category"),w(),b(26,"th"),C(27,"Price"),w(),b(28,"th"),C(29,"Tax Rate"),w(),b(30,"th"),C(31,"Status"),w(),b(32,"th"),C(33,"Actions"),w()()(),b(34,"tbody"),He(35,_J,20,10,"tr",11)(36,wJ,3,0,"tr",12),w()()(),He(37,DJ,54,14,"div",13),w()),t&2&&(O(10),dt("ngModel",r.selectedCategory),O(3),he("ngForOf",r.categories),O(4),dt("ngModel",r.searchText),O(18),he("ngForOf",r.filteredItems),O(),he("ngIf",r.filteredItems.length===0),O(),he("ngIf",r.showAddModal))},dependencies:[lr,Qr,Ir,Wi,uc,dc,$i,wa,oh,zs,Lo,ba,XD,po],styles:[".menu-container[_ngcontent-%COMP%]{padding:20px;max-width:1400px;margin:0 auto}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px;color:#333;margin:0}.filters[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:20px;flex-wrap:wrap}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#666}.filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .filter-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #ddd;border-radius:5px;font-size:14px;min-width:200px}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:10px;box-shadow:0 2px 8px #0000001a;overflow:hidden}.items-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.items-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#f5f5f5}.items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:15px;text-align:left;font-weight:600;color:#333;border-bottom:2px solid #ddd}.items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:15px;border-bottom:1px solid #eee}.items-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f9f9f9}.category-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;background:#e3f2fd;color:#1976d2;border-radius:12px;font-size:12px;font-weight:500}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;border-radius:12px;font-size:12px;font-weight:500}.status-badge.active[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.status-badge.inactive[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.actions[_ngcontent-%COMP%]{display:flex;gap:8px}.no-data[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#999}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:5px;font-size:14px;font-weight:500;cursor:pointer;transition:all .3s}.btn-primary[_ngcontent-%COMP%]{background:#667eea;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:#5568d3}.btn-secondary[_ngcontent-%COMP%]{background:#e0e0e0;color:#333}.btn-secondary[_ngcontent-%COMP%]:hover{background:#d0d0d0}.btn-sm[_ngcontent-%COMP%]{padding:6px 12px;font-size:12px}.btn-edit[_ngcontent-%COMP%]{background:#2196f3;color:#fff}.btn-edit[_ngcontent-%COMP%]:hover{background:#1976d2}.btn-toggle[_ngcontent-%COMP%]{background:#ff9800;color:#fff}.btn-toggle[_ngcontent-%COMP%]:hover{background:#f57c00}.btn-delete[_ngcontent-%COMP%]{background:#f44336;color:#fff}.btn-delete[_ngcontent-%COMP%]:hover{background:#d32f2f}.modal[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:10px;width:90%;max-width:600px;max-height:90vh;overflow-y:auto}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px;border-bottom:1px solid #eee}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:20px;color:#333}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:28px;color:#999;cursor:pointer;padding:0;width:30px;height:30px;line-height:1}.close-btn[_ngcontent-%COMP%]:hover{color:#333}.modal-body[_ngcontent-%COMP%]{padding:20px}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;padding:20px;border-top:1px solid #eee}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:500;color:#333;font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ddd;border-radius:5px;font-size:14px;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:15px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto;cursor:pointer}.recipe-section[_ngcontent-%COMP%]{margin-top:30px;padding:20px;background:#f9f9f9;border-radius:8px;border:1px solid #e0e0e0}.recipe-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.recipe-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px;color:#333}.btn-add[_ngcontent-%COMP%]{background:#4caf50;color:#fff;font-size:12px}.btn-add[_ngcontent-%COMP%]:hover{background:#45a049}.help-text[_ngcontent-%COMP%]{font-size:13px;color:#666;margin:0 0 15px}.recipe-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.recipe-item[_ngcontent-%COMP%]{background:#fff;padding:15px;border-radius:6px;border:1px solid #ddd}.recipe-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr 1fr auto;gap:10px;align-items:end}.recipe-field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.recipe-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:12px;font-weight:500;color:#666;margin:0}.recipe-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .recipe-field[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:8px;border:1px solid #ddd;border-radius:4px;font-size:13px;width:100%;box-sizing:border-box}.recipe-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:read-only{background:#f5f5f5;color:#666}.recipe-actions[_ngcontent-%COMP%]{display:flex;align-items:flex-end}.no-recipe[_ngcontent-%COMP%]{padding:20px;text-align:center;color:#999;font-size:14px}.no-recipe[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}"]})};function TJ(n,e){if(n&1){let t=Rt();b(0,"tr")(1,"td"),C(2),w(),b(3,"td"),C(4),w(),b(5,"td"),C(6),w(),b(7,"td"),C(8),w(),b(9,"td"),C(10),w(),b(11,"td")(12,"span",11),C(13),w()(),b(14,"td",12)(15,"button",13),xe("click",function(){let i=_e(t).$implicit,o=oe(2);return we(o.editItem(i))}),C(16,"Edit"),w(),b(17,"button",14),xe("click",function(){let i=_e(t).$implicit,o=oe(2);return we(o.deleteItem(i))}),C(18,"Delete"),w()()()}if(n&2){let t=e.$implicit;O(2),Ue(t.name),O(2),Ue(t.category),O(2),Ue(t.currentStock),O(2),Ue(t.unit),O(2),Ue(t.lowStockThreshold),O(2),on("low",t.currentStock<t.lowStockThreshold)("ok",t.currentStock>=t.lowStockThreshold),O(),Ge(" ",t.currentStock<t.lowStockThreshold?"\u26A0\uFE0F Low":"\u2705 OK"," ")}}function AJ(n,e){n&1&&(b(0,"tr")(1,"td",15),C(2,"No inventory items"),w()())}function MJ(n,e){if(n&1&&(b(0,"div",7)(1,"table",8)(2,"thead")(3,"tr")(4,"th"),C(5,"Item Name"),w(),b(6,"th"),C(7,"Category"),w(),b(8,"th"),C(9,"Current Stock"),w(),b(10,"th"),C(11,"Unit"),w(),b(12,"th"),C(13,"Low Stock Alert"),w(),b(14,"th"),C(15,"Status"),w(),b(16,"th"),C(17,"Actions"),w()()(),b(18,"tbody"),He(19,TJ,19,10,"tr",9)(20,AJ,3,0,"tr",10),w()()()),n&2){let t=oe();O(19),he("ngForOf",t.inventoryItems),O(),he("ngIf",t.inventoryItems.length===0)}}function PJ(n,e){if(n&1&&(b(0,"tr")(1,"td"),C(2),iu(3,"date"),w(),b(4,"td"),C(5),w(),b(6,"td"),C(7),w(),b(8,"td"),C(9),w(),b(10,"td"),C(11),w(),b(12,"td"),C(13),w()()),n&2){let t=e.$implicit;O(2),Ue(ou(3,7,t.date,"short")),O(3),Ue(t.supplierName),O(2),Ue(t.inventoryItemName),O(2),No("",t.quantity," ",t.unit),O(2),Ue(t.costPrice.toFixed(0)),O(2),Ue(t.totalCost.toFixed(0))}}function NJ(n,e){n&1&&(b(0,"tr")(1,"td",16),C(2,"No purchase records"),w()())}function kJ(n,e){if(n&1&&(b(0,"div",7)(1,"table",8)(2,"thead")(3,"tr")(4,"th"),C(5,"Date"),w(),b(6,"th"),C(7,"Supplier"),w(),b(8,"th"),C(9,"Item"),w(),b(10,"th"),C(11,"Quantity"),w(),b(12,"th"),C(13,"Cost Price"),w(),b(14,"th"),C(15,"Total Cost"),w()()(),b(16,"tbody"),He(17,PJ,14,10,"tr",9)(18,NJ,3,0,"tr",10),w()()()),n&2){let t=oe();O(17),he("ngForOf",t.purchases),O(),he("ngIf",t.purchases.length===0)}}function RJ(n,e){if(n&1&&(b(0,"tr")(1,"td"),C(2),w(),b(3,"td"),C(4),w(),b(5,"td"),C(6),w(),b(7,"td"),C(8),w()()),n&2){let t=e.$implicit;O(2),Ue(t.name),O(2),Ue(t.contact),O(2),Ue(t.email),O(2),Ue(t.address)}}function OJ(n,e){n&1&&(b(0,"tr")(1,"td",17),C(2,"No suppliers"),w()())}function LJ(n,e){if(n&1&&(b(0,"div",7)(1,"table",8)(2,"thead")(3,"tr")(4,"th"),C(5,"Name"),w(),b(6,"th"),C(7,"Contact"),w(),b(8,"th"),C(9,"Email"),w(),b(10,"th"),C(11,"Address"),w()()(),b(12,"tbody"),He(13,RJ,9,4,"tr",9)(14,OJ,3,0,"tr",10),w()()()),n&2){let t=oe();O(13),he("ngForOf",t.suppliers),O(),he("ngIf",t.suppliers.length===0)}}function FJ(n,e){if(n&1&&(b(0,"tr")(1,"td"),C(2),iu(3,"date"),w(),b(4,"td"),C(5),w(),b(6,"td")(7,"span",18),C(8),w()(),b(9,"td"),C(10),w(),b(11,"td"),C(12),w(),b(13,"td"),C(14),w()()),n&2){let t=e.$implicit;O(2),Ue(ou(3,20,t.date,"short")),O(3),Ue(t.inventoryItemName),O(2),on("consumption",t.adjustmentType==="consumption")("wastage",t.adjustmentType==="wastage")("correction",t.adjustmentType==="correction")("production",t.adjustmentType==="production"),O(),Ge(" ",t.adjustmentType," "),O(),on("negative",t.quantity<0)("positive",t.quantity>0),O(),Sd(" ",t.quantity>0?"+":"","",t.quantity," ",t.unit," "),O(2),Ue(t.reason),O(2),Ue(t.adjustedBy)}}function VJ(n,e){n&1&&(b(0,"tr")(1,"td",16),C(2,"No adjustment records"),w()())}function jJ(n,e){if(n&1&&(b(0,"div",7)(1,"table",8)(2,"thead")(3,"tr")(4,"th"),C(5,"Date"),w(),b(6,"th"),C(7,"Item"),w(),b(8,"th"),C(9,"Type"),w(),b(10,"th"),C(11,"Quantity"),w(),b(12,"th"),C(13,"Reason"),w(),b(14,"th"),C(15,"Adjusted By"),w()()(),b(16,"tbody"),He(17,FJ,15,23,"tr",9)(18,VJ,3,0,"tr",10),w()()()),n&2){let t=oe();O(17),he("ngForOf",t.adjustments),O(),he("ngIf",t.adjustments.length===0)}}function BJ(n,e){if(n&1){let t=Rt();b(0,"div",19)(1,"div",20)(2,"div",21)(3,"h2"),C(4),w(),b(5,"button",22),xe("click",function(){_e(t);let i=oe();return we(i.showAddItemModal=!1)}),C(6,"\xD7"),w()(),b(7,"div",23)(8,"div",24)(9,"label"),C(10,"Item Name *"),w(),b(11,"input",25),ht("ngModelChange",function(i){_e(t);let o=oe();return pt(o.currentItem.name,i)||(o.currentItem.name=i),we(i)}),w()(),b(12,"div",24)(13,"label"),C(14,"Category *"),w(),b(15,"select",26),ht("ngModelChange",function(i){_e(t);let o=oe();return pt(o.currentItem.category,i)||(o.currentItem.category=i),we(i)}),b(16,"option"),C(17,"Vegetables"),w(),b(18,"option"),C(19,"Meat"),w(),b(20,"option"),C(21,"Spices"),w(),b(22,"option"),C(23,"Oil"),w(),b(24,"option"),C(25,"Rice"),w(),b(26,"option"),C(27,"Crockery"),w(),b(28,"option"),C(29,"Other"),w()()(),b(30,"div",27)(31,"div",24)(32,"label"),C(33,"Current Stock"),w(),b(34,"input",28),ht("ngModelChange",function(i){_e(t);let o=oe();return pt(o.currentItem.currentStock,i)||(o.currentItem.currentStock=i),we(i)}),w()(),b(35,"div",24)(36,"label"),C(37,"Unit"),w(),b(38,"select",26),ht("ngModelChange",function(i){_e(t);let o=oe();return pt(o.currentItem.unit,i)||(o.currentItem.unit=i),we(i)}),b(39,"option",29),C(40,"Items"),w(),b(41,"option",30),C(42,"Kg"),w()()()(),b(43,"div",24)(44,"label"),C(45,"Low Stock Threshold"),w(),b(46,"input",28),ht("ngModelChange",function(i){_e(t);let o=oe();return pt(o.currentItem.lowStockThreshold,i)||(o.currentItem.lowStockThreshold=i),we(i)}),w()()(),b(47,"div",31)(48,"button",32),xe("click",function(){_e(t);let i=oe();return we(i.showAddItemModal=!1)}),C(49,"Cancel"),w(),b(50,"button",2),xe("click",function(){_e(t);let i=oe();return we(i.saveItem())}),C(51,"Save"),w()()()()}if(n&2){let t=oe();O(4),Ge("",t.isEditMode?"Edit":"Add"," Inventory Item"),O(7),dt("ngModel",t.currentItem.name),O(4),dt("ngModel",t.currentItem.category),O(19),dt("ngModel",t.currentItem.currentStock),O(4),dt("ngModel",t.currentItem.unit),O(8),dt("ngModel",t.currentItem.lowStockThreshold)}}function UJ(n,e){if(n&1&&(b(0,"option",39),C(1),w()),n&2){let t=e.$implicit;he("value",t.id),O(),Ue(t.name)}}function zJ(n,e){if(n&1){let t=Rt();b(0,"div",19)(1,"div",20)(2,"div",21)(3,"h2"),C(4,"Record Purchase"),w(),b(5,"button",22),xe("click",function(){_e(t);let i=oe();return we(i.showAddPurchaseModal=!1)}),C(6,"\xD7"),w()(),b(7,"div",23)(8,"div",24)(9,"label"),C(10,"Supplier Name *"),w(),b(11,"input",25),ht("ngModelChange",function(i){_e(t);let o=oe();return pt(o.currentPurchase.supplierName,i)||(o.currentPurchase.supplierName=i),we(i)}),w()(),b(12,"div",24)(13,"label"),C(14,"Inventory Item *"),w(),b(15,"select",33),ht("ngModelChange",function(i){_e(t);let o=oe();return pt(o.currentPurchase.inventoryItemId,i)||(o.currentPurchase.inventoryItemId=i),we(i)}),xe("change",function(){_e(t);let i=oe();return we(i.onPurchaseItemChange())}),b(16,"option",34),C(17,"Select Item"),w(),He(18,UJ,2,2,"option",35),w()(),b(19,"div",27)(20,"div",24)(21,"label"),C(22,"Quantity *"),w(),b(23,"input",36),ht("ngModelChange",function(i){_e(t);let o=oe();return pt(o.currentPurchase.quantity,i)||(o.currentPurchase.quantity=i),we(i)}),xe("input",function(){_e(t);let i=oe();return we(i.onPurchaseQuantityChange())}),w()(),b(24,"div",24)(25,"label"),C(26,"Cost Price *"),w(),b(27,"input",37),ht("ngModelChange",function(i){_e(t);let o=oe();return pt(o.currentPurchase.costPrice,i)||(o.currentPurchase.costPrice=i),we(i)}),xe("input",function(){_e(t);let i=oe();return we(i.onPurchaseQuantityChange())}),w()()(),b(28,"div",24)(29,"label"),C(30,"Total Cost"),w(),b(31,"input",38),ht("ngModelChange",function(i){_e(t);let o=oe();return pt(o.currentPurchase.totalCost,i)||(o.currentPurchase.totalCost=i),we(i)}),w()()(),b(32,"div",31)(33,"button",32),xe("click",function(){_e(t);let i=oe();return we(i.showAddPurchaseModal=!1)}),C(34,"Cancel"),w(),b(35,"button",2),xe("click",function(){_e(t);let i=oe();return we(i.savePurchase())}),C(36,"Save Purchase"),w()()()()}if(n&2){let t=oe();O(11),dt("ngModel",t.currentPurchase.supplierName),O(4),dt("ngModel",t.currentPurchase.inventoryItemId),O(3),he("ngForOf",t.inventoryItems),O(5),dt("ngModel",t.currentPurchase.quantity),O(4),dt("ngModel",t.currentPurchase.costPrice),O(4),dt("ngModel",t.currentPurchase.totalCost)}}function qJ(n,e){if(n&1&&(b(0,"option",39),C(1),w()),n&2){let t=e.$implicit;he("value",t.id),O(),Sd("",t.name," (",t.currentStock," ",t.unit,")")}}function HJ(n,e){if(n&1){let t=Rt();b(0,"div",19)(1,"div",20)(2,"div",21)(3,"h2"),C(4,"Record Inventory Adjustment"),w(),b(5,"button",22),xe("click",function(){_e(t);let i=oe();return we(i.showAddAdjustmentModal=!1)}),C(6,"\xD7"),w()(),b(7,"div",23)(8,"div",24)(9,"label"),C(10,"Inventory Item *"),w(),b(11,"select",33),ht("ngModelChange",function(i){_e(t);let o=oe();return pt(o.currentAdjustment.inventoryItemId,i)||(o.currentAdjustment.inventoryItemId=i),we(i)}),xe("change",function(){_e(t);let i=oe();return we(i.onAdjustmentItemChange())}),b(12,"option",34),C(13,"Select Item"),w(),He(14,qJ,2,4,"option",35),w()(),b(15,"div",24)(16,"label"),C(17,"Adjustment Type *"),w(),b(18,"select",26),ht("ngModelChange",function(i){_e(t);let o=oe();return pt(o.currentAdjustment.adjustmentType,i)||(o.currentAdjustment.adjustmentType=i),we(i)}),b(19,"option",40),C(20,"Consumption (reduce stock)"),w(),b(21,"option",41),C(22,"Wastage (reduce stock)"),w(),b(23,"option",42),C(24,"Stock Correction (add/reduce)"),w(),b(25,"option",43),C(26,"Production (add prepared items)"),w()()(),b(27,"div",24)(28,"label"),C(29,"Quantity *"),w(),b(30,"input",44),ht("ngModelChange",function(i){_e(t);let o=oe();return pt(o.currentAdjustment.quantity,i)||(o.currentAdjustment.quantity=i),we(i)}),w(),b(31,"small"),C(32,"For consumption/wastage, enter positive number (will be deducted). For correction, use +/- as needed."),w()(),b(33,"div",24)(34,"label"),C(35,"Reason *"),w(),b(36,"textarea",45),ht("ngModelChange",function(i){_e(t);let o=oe();return pt(o.currentAdjustment.reason,i)||(o.currentAdjustment.reason=i),we(i)}),w()()(),b(37,"div",31)(38,"button",32),xe("click",function(){_e(t);let i=oe();return we(i.showAddAdjustmentModal=!1)}),C(39,"Cancel"),w(),b(40,"button",2),xe("click",function(){_e(t);let i=oe();return we(i.saveAdjustment())}),C(41,"Save Adjustment"),w()()()()}if(n&2){let t=oe();O(11),dt("ngModel",t.currentAdjustment.inventoryItemId),O(3),he("ngForOf",t.inventoryItems),O(4),dt("ngModel",t.currentAdjustment.adjustmentType),O(12),dt("ngModel",t.currentAdjustment.quantity),O(6),dt("ngModel",t.currentAdjustment.reason)}}var Ew=class n{constructor(e,t){this.db=e;this.authService=t}activeTab="stock";inventoryItems=[];showAddItemModal=!1;currentItem=this.getEmptyItem();isEditMode=!1;purchases=[];showAddPurchaseModal=!1;currentPurchase=this.getEmptyPurchase();suppliers=[];adjustments=[];showAddAdjustmentModal=!1;currentAdjustment;isLoading=!1;ngOnInit(){return B(this,null,function*(){yield this.loadData()})}getEmptyItem(){return{name:"",category:"Vegetables",currentStock:0,unit:"items",lowStockThreshold:5}}getEmptyPurchase(){return{supplierName:"",date:new Date,inventoryItemId:"",inventoryItemName:"",quantity:0,unit:"kg",costPrice:0,totalCost:0}}getEmptyAdjustment(){return{inventoryItemId:"",inventoryItemName:"",adjustmentType:"consumption",quantity:0,unit:"kg",reason:"",adjustedBy:this.authService.currentUser?.name||"Unknown",date:new Date}}loadData(){return B(this,null,function*(){this.isLoading=!0;try{this.inventoryItems=yield this.db.getInventoryItems(),this.purchases=yield this.db.getPurchases(),this.suppliers=yield this.db.getSuppliers(),this.adjustments=yield this.db.getInventoryAdjustments()}catch(e){console.error("Error loading data:",e)}finally{this.isLoading=!1}})}openAddItemModal(){this.currentItem=this.getEmptyItem(),this.isEditMode=!1,this.showAddItemModal=!0}editItem(e){this.currentItem=Pe({},e),this.isEditMode=!0,this.showAddItemModal=!0}deleteItem(e){return B(this,null,function*(){if(e.id&&confirm(`Are you sure you want to delete "${e.name}"? This action cannot be undone.`))try{yield this.db.deleteInventoryItem(e.id),yield this.loadData(),alert("Item deleted successfully")}catch(t){console.error("Error deleting item:",t),alert("Error deleting item. Please try again.")}})}saveItem(){return B(this,null,function*(){if(!this.currentItem.name){alert("Please enter item name");return}try{this.currentItem.id?yield this.db.updateInventoryItem(this.currentItem.id,this.currentItem):yield this.db.createInventoryItem(this.currentItem),yield this.loadData(),this.showAddItemModal=!1}catch(e){console.error("Error saving item:",e)}})}openAddPurchaseModal(){this.currentPurchase=this.getEmptyPurchase(),this.showAddPurchaseModal=!0}onPurchaseItemChange(){let e=this.inventoryItems.find(t=>t.id===this.currentPurchase.inventoryItemId);e&&(this.currentPurchase.inventoryItemName=e.name,this.currentPurchase.unit=e.unit)}onPurchaseQuantityChange(){this.currentPurchase.totalCost=this.currentPurchase.quantity*this.currentPurchase.costPrice}savePurchase(){return B(this,null,function*(){if(!this.currentPurchase.inventoryItemId||this.currentPurchase.quantity<=0){alert("Please fill in all required fields");return}try{yield this.db.createPurchase(this.currentPurchase),yield this.loadData(),this.showAddPurchaseModal=!1}catch(e){console.error("Error saving purchase:",e)}})}openAddAdjustmentModal(){this.currentAdjustment=this.getEmptyAdjustment(),this.showAddAdjustmentModal=!0}onAdjustmentItemChange(){let e=this.inventoryItems.find(t=>t.id===this.currentAdjustment.inventoryItemId);e&&(this.currentAdjustment.inventoryItemName=e.name,this.currentAdjustment.unit=e.unit)}saveAdjustment(){return B(this,null,function*(){if(!this.currentAdjustment.inventoryItemId||!this.currentAdjustment.reason){alert("Please fill in all required fields");return}this.currentAdjustment.adjustmentType==="consumption"||this.currentAdjustment.adjustmentType==="wastage"?this.currentAdjustment.quantity=-Math.abs(this.currentAdjustment.quantity):this.currentAdjustment.adjustmentType==="correction"&&this.currentAdjustment.quantity>0;try{yield this.db.createInventoryAdjustment(this.currentAdjustment),yield this.loadData(),this.showAddAdjustmentModal=!1}catch(e){console.error("Error saving adjustment:",e)}})}static \u0275fac=function(t){return new(t||n)(Xe(Mr),Xe(jr))};static \u0275cmp=sr({type:n,selectors:[["app-inventory"]],decls:22,vars:16,consts:[[1,"inventory-container"],[1,"header"],[1,"btn","btn-primary",3,"click"],[1,"tabs"],[3,"click"],["class","tab-content",4,"ngIf"],["class","modal",4,"ngIf"],[1,"tab-content"],[1,"data-table"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"status-badge"],[1,"actions"],[1,"btn","btn-sm","btn-edit",3,"click"],[1,"btn","btn-sm","btn-delete",3,"click"],["colspan","7",1,"no-data"],["colspan","6",1,"no-data"],["colspan","4",1,"no-data"],[1,"badge"],[1,"modal"],[1,"modal-content"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"form-group"],["type","text",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],[1,"form-row"],["type","number","min","0",3,"ngModelChange","ngModel"],["value","items"],["value","kg"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","number","min","0",3,"ngModelChange","input","ngModel"],["type","number","min","0","step","0.01",3,"ngModelChange","input","ngModel"],["type","number","readonly","",3,"ngModelChange","ngModel"],[3,"value"],["value","consumption"],["value","wastage"],["value","correction"],["value","production"],["type","number","step","0.01","placeholder","Enter positive number",3,"ngModelChange","ngModel"],["rows","3","placeholder","e.g., Used 10 kg of meat for today's production",3,"ngModelChange","ngModel"]],template:function(t,r){t&1&&(b(0,"div",0)(1,"div",1)(2,"h1"),C(3,"Inventory & Purchasing"),w(),b(4,"button",2),xe("click",function(){return r.activeTab==="stock"?r.openAddItemModal():r.activeTab==="purchases"?r.openAddPurchaseModal():r.openAddAdjustmentModal()}),C(5),w()(),b(6,"div",3)(7,"button",4),xe("click",function(){return r.activeTab="stock"}),C(8,"Current Stock"),w(),b(9,"button",4),xe("click",function(){return r.activeTab="purchases"}),C(10,"Purchase History"),w(),b(11,"button",4),xe("click",function(){return r.activeTab="adjustments"}),C(12,"Adjustments"),w(),b(13,"button",4),xe("click",function(){return r.activeTab="suppliers"}),C(14,"Suppliers"),w()(),He(15,MJ,21,2,"div",5)(16,kJ,19,2,"div",5)(17,LJ,15,2,"div",5)(18,jJ,19,2,"div",5)(19,BJ,52,6,"div",6)(20,zJ,37,6,"div",6)(21,HJ,42,5,"div",6),w()),t&2&&(O(5),Ge(" + ",r.activeTab==="stock"?"Add Item":r.activeTab==="purchases"?"Record Purchase":"Record Adjustment"," "),O(2),on("active",r.activeTab==="stock"),O(2),on("active",r.activeTab==="purchases"),O(2),on("active",r.activeTab==="adjustments"),O(2),on("active",r.activeTab==="suppliers"),O(2),he("ngIf",r.activeTab==="stock"),O(),he("ngIf",r.activeTab==="purchases"),O(),he("ngIf",r.activeTab==="suppliers"),O(),he("ngIf",r.activeTab==="adjustments"),O(),he("ngIf",r.showAddItemModal),O(),he("ngIf",r.showAddPurchaseModal),O(),he("ngIf",r.showAddAdjustmentModal))},dependencies:[lr,Qr,Ir,Wi,uc,dc,$i,wa,zs,Lo,ba,po,Ad],styles:[".inventory-container[_ngcontent-%COMP%]{padding:20px;max-width:1400px;margin:0 auto}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px;color:#333;margin:0}.tabs[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:20px;border-bottom:2px solid #eee}.tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 24px;border:none;background:none;cursor:pointer;font-size:15px;font-weight:500;color:#666;border-bottom:3px solid transparent;transition:all .3s}.tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#667eea}.tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{color:#667eea;border-bottom-color:#667eea}.tab-content[_ngcontent-%COMP%]{background:#fff;border-radius:10px;box-shadow:0 2px 8px #0000001a;overflow:hidden}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#f5f5f5}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:15px;text-align:left;font-weight:600;color:#333;border-bottom:2px solid #ddd}.data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:15px;border-bottom:1px solid #eee}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f9f9f9}.status-badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:12px;font-size:12px;font-weight:500}.status-badge.low[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.status-badge.ok[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.no-data[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#999}.actions[_ngcontent-%COMP%]{display:flex;gap:8px}.btn-sm[_ngcontent-%COMP%]{padding:6px 12px;font-size:13px;border-radius:4px;cursor:pointer;border:none;transition:all .2s}.btn-edit[_ngcontent-%COMP%]{background:#2196f3;color:#fff}.btn-edit[_ngcontent-%COMP%]:hover{background:#1976d2}.btn-delete[_ngcontent-%COMP%]{background:#f44336;color:#fff}.btn-delete[_ngcontent-%COMP%]:hover{background:#d32f2f}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:5px;font-size:14px;font-weight:500;cursor:pointer;transition:all .3s}.btn-primary[_ngcontent-%COMP%]{background:#667eea;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:#5568d3}.btn-secondary[_ngcontent-%COMP%]{background:#e0e0e0;color:#333}.modal[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:10px;width:90%;max-width:600px;max-height:90vh;overflow-y:auto}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px;border-bottom:1px solid #eee}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:20px}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:28px;color:#999;cursor:pointer}.modal-body[_ngcontent-%COMP%]{padding:20px}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;padding:20px;border-top:1px solid #eee}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:500;color:#333;font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ddd;border-radius:5px;font-size:14px;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{font-family:inherit;resize:vertical}.form-group[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:block;margin-top:5px;font-size:12px;color:#666}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:15px}.badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;font-size:12px;font-weight:500;text-transform:capitalize}.badge.consumption[_ngcontent-%COMP%]{background-color:#fff3cd;color:#856404}.badge.wastage[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.badge.correction[_ngcontent-%COMP%]{background-color:#d1ecf1;color:#0c5460}.badge.production[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.negative[_ngcontent-%COMP%]{color:#dc3545;font-weight:500}.positive[_ngcontent-%COMP%]{color:#28a745;font-weight:500}"]})};function $J(n,e){if(n&1){let t=Rt();b(0,"button",36),xe("click",function(){let i=_e(t).$implicit,o=oe();return o.selectedCategory=i,we(o.onCategoryChange())}),C(1),w()}if(n&2){let t=e.$implicit,r=oe();on("active",r.selectedCategory===t),O(),Ge(" ",t==="all"?"All":t," ")}}function WJ(n,e){if(n&1){let t=Rt();b(0,"div",37),xe("click",function(){let i=_e(t).$implicit,o=oe();return we(o.addToCart(i))}),b(1,"div",38),C(2),w(),b(3,"div",39),C(4),w(),b(5,"div",40),C(6),w()()}if(n&2){let t=e.$implicit;O(2),Ue(t.name),O(2),Ue(t.price.toFixed(0)),O(2),Ue(t.category)}}function GJ(n,e){n&1&&(b(0,"div",41),C(1," No items found "),w())}function KJ(n,e){if(n&1&&(b(0,"option",47),C(1),w()),n&2){let t=e.$implicit;he("ngValue",t),O(),Ge("Table ",t)}}function YJ(n,e){n&1&&(b(0,"span",48),C(1,"No tables available"),w())}function QJ(n,e){if(n&1){let t=Rt();b(0,"div",11)(1,"label"),C(2,"Table Number:"),w(),b(3,"div",42)(4,"select",43),ht("ngModelChange",function(i){_e(t);let o=oe();return pt(o.tableNumber,i)||(o.tableNumber=i),we(i)}),b(5,"option",44),C(6,"Select table"),w(),He(7,KJ,2,2,"option",45),w(),b(8,"button",46),xe("click",function(){_e(t);let i=oe();return we(i.loadAvailableTables())}),C(9," \u21BB "),w()(),He(10,YJ,2,0,"span",33),w()}if(n&2){let t=oe();O(4),dt("ngModel",t.tableNumber),O(),he("ngValue",""),O(2),he("ngForOf",t.availableTables),O(3),he("ngIf",t.availableTables.length===0)}}function ZJ(n,e){if(n&1){let t=Rt();b(0,"div",49)(1,"div",50)(2,"div",38),C(3),w(),b(4,"div",39),C(5),w()(),b(6,"div",51)(7,"button",52),xe("click",function(){let i=_e(t).$implicit,o=oe();return we(o.decreaseQuantity(i))}),C(8,"-"),w(),b(9,"span",53),C(10),w(),b(11,"button",52),xe("click",function(){let i=_e(t).$implicit,o=oe();return we(o.increaseQuantity(i))}),C(12,"+"),w(),b(13,"span",54),C(14),w(),b(15,"button",55),xe("click",function(){let i=_e(t).$implicit,o=oe();return we(o.removeFromCart(i))}),C(16,"\xD7"),w()()()}if(n&2){let t=e.$implicit;O(3),Ue(t.menuItemName),O(2),Ue(t.price.toFixed(0)),O(5),Ue(t.quantity),O(4),Ue(t.totalPrice.toFixed(0))}}function JJ(n,e){n&1&&(b(0,"div",56),C(1," Cart is empty. Add items from the menu. "),w())}function XJ(n,e){n&1&&Po(0,"span",57)}function eX(n,e){n&1&&(b(0,"div",48),C(1,"No bill requests"),w())}function tX(n,e){if(n&1){let t=Rt();b(0,"div",58)(1,"div",59)(2,"span",60),C(3),w(),b(4,"span",61),C(5),w(),b(6,"span",62),C(7),w()(),b(8,"div",63)(9,"button",64),xe("click",function(){let i=_e(t).$implicit,o=oe();return we(o.openSettlement(i))}),C(10,"Open Settlement"),w()()()}if(n&2){let t=e.$implicit,r=oe();on("blink",r.isNewRequest(t.id)),O(3),Ue(t.isTakeaway?"Takeaway":"Table "+t.tableNumber),O(2),Ge("",t.totalAmount.toFixed(0)," PKR"),O(2),Ge("(",r.timeSince(t.createdAt),")")}}function nX(n,e){if(n&1){let t=Rt();b(0,"div",65)(1,"button",66),xe("click",function(){_e(t);let i=oe();return we(i.cancelSettlement())}),C(2,"\xD7"),w(),b(3,"h2"),C(4,"Payment & Settlement"),w(),b(5,"div",67)(6,"div"),C(7),w(),b(8,"div"),C(9),w()(),b(10,"div",68)(11,"button",69),xe("click",function(){_e(t);let i=oe();return we(i.viewSelectedBillDetail())}),C(12,"View Order Detail"),w(),b(13,"button",70),xe("click",function(){_e(t);let i=oe();return we(i.completeSettlement())}),C(14,"Complete Payment"),w()()()}if(n&2){let t=oe();O(7),Ge("Table: ",t.selectedBillOrder.tableNumber),O(2),Ge("Total Due: ",t.getSelectedBillTotal().toFixed(0)," PKR"),O(4),he("disabled",t.isLoading)}}var Cw=class n{constructor(e,t){this.db=e;this.authService=t}menuItems=[];filteredMenuItems=[];cart=[];readyOrders=[];selectedBillOrder=null;paymentMethod="cash";tenderedAmount=0;refreshTimer;previousReadyIds=new Set;newRequestIds=new Set;soundEnabled=!0;audioChime;isRefreshing=!1;tableNumber="";isTakeaway=!0;customerName="";discount=0;availableTables=[];selectedCategory="all";searchText="";categories=["all","BBQ","Curries","Rice","Bread","Salads","Drinks","Desserts"];isLoading=!1;ngOnInit(){return B(this,null,function*(){yield this.loadMenuItems(),yield this.loadReadyOrders(),yield this.loadAvailableTables(),this.initAudio();let e=localStorage.getItem("posSoundEnabled");e!==null&&(this.soundEnabled=e==="true"),this.refreshTimer=setInterval(()=>{this.loadReadyOrders()},3e4)})}loadMenuItems(){return B(this,null,function*(){this.isLoading=!0;try{this.menuItems=yield this.db.getActiveMenuItems(),this.applyFilters()}catch(e){console.error("Error loading menu items:",e)}finally{this.isLoading=!1}})}loadReadyOrders(){return B(this,null,function*(){this.isRefreshing=!0;try{let e=yield this.db.getOrders("ready");this.readyOrders=e;let t=new Set(e.map(i=>i.id).filter(Boolean)),r=[];for(let i of t)this.previousReadyIds.has(i)||r.push(i);r.length>0&&(this.playNotificationSound(),r.forEach(i=>{this.newRequestIds.add(i),setTimeout(()=>this.newRequestIds.delete(i),1e4)})),this.previousReadyIds=t}catch(e){console.error("Error loading bill requests:",e)}finally{this.isRefreshing=!1}})}openSettlement(e){this.selectedBillOrder=e,this.paymentMethod="cash",this.tenderedAmount=0}cancelSettlement(){this.selectedBillOrder=null,this.tenderedAmount=0}getSelectedBillTotal(){return this.selectedBillOrder?.totalAmount||0}getChange(){if(this.paymentMethod!=="cash")return 0;let e=this.getSelectedBillTotal();return Math.max(0,this.tenderedAmount-e)}isNewRequest(e){return e?this.newRequestIds.has(e):!1}timeSince(e){if(!e)return"";let t=typeof e=="object"&&"toDate"in e?e.toDate():new Date(e),r=Date.now()-t.getTime(),i=Math.floor(r/6e4);if(i<1)return"just now";if(i<60)return`${i} min${i!==1?"s":""} ago`;let o=Math.floor(i/60);return`${o} hr${o!==1?"s":""} ago`}playNotificationSound(){if(this.soundEnabled){if(this.audioChime){this.audioChime.currentTime=0,this.audioChime.play().catch(()=>this.playBeep());return}this.playBeep()}}initAudio(){try{this.audioChime=new Audio("/sounds/notify.mp3"),this.audioChime.volume=.4,this.audioChime.load()}catch{this.audioChime=void 0}}playBeep(){try{let e=new window.AudioContext,t=e.createOscillator(),r=e.createGain();t.type="sine",t.frequency.setValueAtTime(920,e.currentTime),r.gain.setValueAtTime(1e-4,e.currentTime),r.gain.exponentialRampToValueAtTime(.2,e.currentTime+.01),r.gain.exponentialRampToValueAtTime(1e-4,e.currentTime+.25),t.connect(r),r.connect(e.destination),t.start(),t.stop(e.currentTime+.28)}catch{}}toggleSound(){this.soundEnabled=!this.soundEnabled,localStorage.setItem("posSoundEnabled",String(this.soundEnabled))}viewSelectedBillDetail(){if(!this.selectedBillOrder)return;let e=this.selectedBillOrder,t=e.createdAt&&typeof e.createdAt=="object"&&"toDate"in e.createdAt?e.createdAt.toDate():new Date(e.createdAt),r=(e.items||[]).map(s=>`<tr><td>${s.menuItemName}</td><td>${s.quantity}</td><td>${s.price.toFixed(0)} PKR</td><td>${s.totalPrice.toFixed(0)} PKR</td></tr>`).join(""),i=`<!DOCTYPE html><html><head><meta charset="utf-8"><title>Order ${e.orderNumber}</title>
      <style>body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Arial,sans-serif;padding:20px;color:#333}
      h1{font-size:20px;margin:0 0 10px} p{margin:4px 0}
      table{width:100%;border-collapse:collapse;margin-top:10px}
      th,td{padding:8px;border-bottom:1px solid #eee;text-align:left}
      .total{font-weight:700;margin-top:12px}
      </style></head><body>
      <h1>Order ${e.orderNumber}</h1>
      <p>Table: ${e.tableNumber??"-"}</p>
      <p>Status: ${e.status}</p>
      <p>Created: ${t.toLocaleString()}</p>
      <table><thead><tr><th>Item</th><th>Qty</th><th>Price</th><th>Total</th></tr></thead><tbody>${r}</tbody></table>
      <p class="total">Grand Total: ${e.totalAmount.toFixed(0)} PKR</p>
      </body></html>`,o=window.open("","_blank");o&&(o.document.open(),o.document.write(i),o.document.close(),o.focus())}completeSettlement(){return B(this,null,function*(){if(this.selectedBillOrder?.id){this.isLoading=!0;try{yield this.deductInventoryForOrder(this.selectedBillOrder),yield this.db.updateOrder(this.selectedBillOrder.id,{status:"completed"}),yield this.loadReadyOrders(),this.selectedBillOrder=null,this.tenderedAmount=0,alert("\u2705 Payment completed. Table reset to free.")}catch(e){console.error("Error completing settlement:",e),alert("\u274C Failed to complete payment")}finally{this.isLoading=!1}}})}applyFilters(){this.filteredMenuItems=this.menuItems.filter(e=>{let t=this.selectedCategory==="all"||e.category===this.selectedCategory,r=!this.searchText||e.name.toLowerCase().includes(this.searchText.toLowerCase());return t&&r})}onCategoryChange(){this.applyFilters()}onSearchChange(){this.applyFilters()}loadAvailableTables(){return B(this,null,function*(){try{let e=Array.from({length:20},(i,o)=>String(o+1)),t=yield this.db.getOrders(),r=new Set((t||[]).filter(i=>!!i.tableNumber&&["pending","cooking","ready"].includes(i.status)).map(i=>i.tableNumber));this.availableTables=e.filter(i=>!r.has(i))}catch(e){console.error("Error loading available tables:",e),this.availableTables=[]}})}addToCart(e){let t=this.cart.find(r=>r.menuItemId===e.id);t?e.soldByWeight?this.promptForWeight(e,t):(t.quantity++,t.totalPrice=t.quantity*t.price):e.soldByWeight?this.promptForWeight(e):this.cart.push({menuItemId:e.id,menuItemName:e.name,quantity:1,price:e.price,totalPrice:e.price})}promptForWeight(e,t){let r=prompt(`Enter weight in ${e.unit||"kg"} (e.g., 0.72):`);if(r&&!isNaN(parseFloat(r))){let i=parseFloat(r);t?(t.quantity+=i,t.totalPrice=t.quantity*t.price):this.cart.push({menuItemId:e.id,menuItemName:`${e.name} (${i} ${e.unit||"kg"})`,quantity:i,price:e.price,totalPrice:i*e.price})}}increaseQuantity(e){e.quantity++,e.totalPrice=e.quantity*e.price}decreaseQuantity(e){e.quantity>1?(e.quantity--,e.totalPrice=e.quantity*e.price):this.removeFromCart(e)}removeFromCart(e){let t=this.cart.indexOf(e);t>-1&&this.cart.splice(t,1)}getSubtotal(){return this.cart.reduce((e,t)=>e+t.totalPrice,0)}getTax(){let e=0;for(let t of this.cart){let r=this.menuItems.find(i=>i.id===t.menuItemId);r&&(e+=t.totalPrice*r.taxRate/100)}return e}getTotal(){return this.getSubtotal()+this.getTax()-this.discount}printKOT(){return B(this,null,function*(){if(this.cart.length===0){alert("Cart is empty!");return}if(!this.isTakeaway&&!this.tableNumber){alert("Please select an available table");return}this.isLoading=!0;try{let e=this.createOrder("pending");yield this.db.createOrder(e),alert("Kitchen Order Ticket sent to kitchen!")}catch(e){console.error("Error sending KOT:",e),alert("Error sending order to kitchen")}finally{this.isLoading=!1}})}payAndPrint(){return B(this,null,function*(){if(this.cart.length===0){alert("Cart is empty!");return}if(!this.isTakeaway&&!this.tableNumber){alert("Please select an available table or choose takeaway");return}this.isLoading=!0;try{let e=this.createOrder("completed");yield this.db.createOrder(e),yield this.deductPreparedItems(),alert(`Payment successful! Total: $${this.getTotal().toFixed(2)}`),this.clearCart()}catch(e){console.error("Error processing payment:",e),alert("Error processing payment")}finally{this.isLoading=!1}})}deductPreparedItems(){return B(this,null,function*(){for(let e of this.cart){let t=this.menuItems.find(r=>r.id===e.menuItemId);if(t){if(t.preparedItemId){let r={inventoryItemId:t.preparedItemId,inventoryItemName:t.name,adjustmentType:"consumption",quantity:-e.quantity,unit:t.unit||"pieces",reason:"Sold via POS - Order",adjustedBy:this.authService.currentUser?.name||"System",date:new Date};try{yield this.db.createInventoryAdjustment(r)}catch(i){console.error("Error deducting prepared inventory:",i)}}if(t.recipeMapping&&t.recipeMapping.length>0)for(let r of t.recipeMapping){let i=r.quantityUsed*e.quantity,o={inventoryItemId:r.inventoryItemId,inventoryItemName:r.inventoryItemName,adjustmentType:"consumption",quantity:-i,unit:r.unit,reason:`Sold ${e.quantity}x ${t.name} via POS`,adjustedBy:this.authService.currentUser?.name||"System",date:new Date};try{yield this.db.createInventoryAdjustment(o)}catch(s){console.error("Error deducting recipe inventory:",s)}}}}})}deductInventoryForOrder(e){return B(this,null,function*(){for(let t of e.items||[])if(t.isDeal&&t.dealItems)for(let r of t.dealItems){let i=this.menuItems.find(s=>s.id===r.menuItemId);if(!i)continue;let o=r.quantity*t.quantity;yield this.deductInventoryForMenuItem(i,o,e.orderNumber)}else{let r=this.menuItems.find(i=>i.id===t.menuItemId);if(!r)continue;yield this.deductInventoryForMenuItem(r,t.quantity,e.orderNumber)}})}deductInventoryForMenuItem(e,t,r){return B(this,null,function*(){if(e.preparedItemId){let i={inventoryItemId:e.preparedItemId,inventoryItemName:e.name,adjustmentType:"consumption",quantity:-t,unit:e.unit||"pieces",reason:`Sold - Order ${r}`,adjustedBy:this.authService.currentUser?.name||"System",date:new Date};try{yield this.db.createInventoryAdjustment(i)}catch(o){console.error("Error deducting prepared inventory:",o)}}if(e.recipeMapping&&e.recipeMapping.length>0)for(let i of e.recipeMapping){let o=i.quantityUsed*t,s={inventoryItemId:i.inventoryItemId,inventoryItemName:i.inventoryItemName,adjustmentType:"consumption",quantity:-o,unit:i.unit,reason:`Sold ${t}x ${e.name} - Order ${r}`,adjustedBy:this.authService.currentUser?.name||"System",date:new Date};try{yield this.db.createInventoryAdjustment(s)}catch(a){console.error("Error deducting recipe inventory:",a)}}})}createOrder(e){return{orderNumber:`ORD-${Date.now()}`,tableNumber:this.isTakeaway?void 0:this.tableNumber,isTakeaway:this.isTakeaway,customerName:this.customerName||void 0,items:[...this.cart],subtotal:this.getSubtotal(),tax:this.getTax(),discount:this.discount,totalAmount:this.getTotal(),status:e,createdAt:new Date,cashierId:this.authService.currentUser?.id||"",cashierName:this.authService.currentUser?.name||"Unknown"}}clearCart(){this.cart=[],this.tableNumber="",this.isTakeaway=!1,this.customerName="",this.discount=0}cancelOrder(){confirm("Are you sure you want to cancel this order?")&&this.clearCart()}static \u0275fac=function(t){return new(t||n)(Xe(Mr),Xe(jr))};static \u0275cmp=sr({type:n,selectors:[["app-pos"]],decls:68,vars:22,consts:[[1,"pos-container"],[1,"left-panel"],[1,"category-tabs"],["class","category-tab",3,"active","click",4,"ngFor","ngForOf"],[1,"search-box"],["type","text","placeholder","\u{1F50D} Search menu items...",3,"ngModelChange","input","ngModel"],[1,"menu-grid"],["class","menu-item-card",3,"click",4,"ngFor","ngForOf"],["class","no-items",4,"ngIf"],[1,"right-panel"],[1,"order-details"],[1,"detail-row"],[1,"checkbox-label"],["type","checkbox",3,"ngModelChange","ngModel"],["class","detail-row",4,"ngIf"],["type","text","placeholder","Customer name",3,"ngModelChange","ngModel"],[1,"cart-items"],["class","cart-item",4,"ngFor","ngForOf"],["class","empty-cart",4,"ngIf"],[1,"payment-section"],[1,"payment-row"],["type","number","min","0","step","0.01",1,"discount-input",3,"ngModelChange","ngModel"],[1,"payment-row","total"],[1,"action-buttons"],[1,"btn","btn-secondary",3,"click","disabled"],[1,"btn","btn-info",3,"click","disabled"],[1,"btn","btn-primary",3,"click","disabled"],[1,"bill-requests"],[1,"bill-requests-header"],[1,"header-actions"],[1,"refresh-btn",3,"click","disabled"],["class","mini-spinner",4,"ngIf"],[1,"sound-toggle",3,"click"],["class","empty",4,"ngIf"],["class","bill-request-item",3,"blink",4,"ngFor","ngForOf"],["class","settlement-panel",4,"ngIf"],[1,"category-tab",3,"click"],[1,"menu-item-card",3,"click"],[1,"item-name"],[1,"item-price"],[1,"item-category"],[1,"no-items"],[1,"table-selector"],[1,"table-dropdown",3,"ngModelChange","ngModel"],["disabled","",3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["title","Refresh available tables",1,"refresh-availability-btn",3,"click"],[3,"ngValue"],[1,"empty"],[1,"cart-item"],[1,"item-info"],[1,"item-controls"],[1,"qty-btn",3,"click"],[1,"quantity"],[1,"item-total"],[1,"remove-btn",3,"click"],[1,"empty-cart"],[1,"mini-spinner"],[1,"bill-request-item"],[1,"info"],[1,"table"],[1,"amount"],[1,"ago"],[1,"actions"],[3,"click"],[1,"settlement-panel"],["aria-label","Close",1,"panel-close",3,"click"],[1,"summary"],[1,"settlement-actions"],[1,"details",3,"click"],[1,"complete",3,"click","disabled"]],template:function(t,r){t&1&&(b(0,"div",0)(1,"div",1)(2,"h2"),C(3,"Menu"),w(),b(4,"div",2),He(5,$J,2,3,"button",3),w(),b(6,"div",4)(7,"input",5),ht("ngModelChange",function(o){return pt(r.searchText,o)||(r.searchText=o),o}),xe("input",function(){return r.onSearchChange()}),w()(),b(8,"div",6),He(9,WJ,7,3,"div",7)(10,GJ,2,0,"div",8),w()(),b(11,"div",9)(12,"h2"),C(13,"Current Order"),w(),b(14,"div",10)(15,"div",11)(16,"label",12)(17,"input",13),ht("ngModelChange",function(o){return pt(r.isTakeaway,o)||(r.isTakeaway=o),o}),w(),C(18," Takeaway "),w()(),He(19,QJ,11,4,"div",14),b(20,"div",11)(21,"label"),C(22,"Customer Name (Optional):"),w(),b(23,"input",15),ht("ngModelChange",function(o){return pt(r.customerName,o)||(r.customerName=o),o}),w()()(),b(24,"div",16),He(25,ZJ,17,4,"div",17)(26,JJ,2,0,"div",18),w(),b(27,"div",19)(28,"div",20)(29,"span"),C(30,"Subtotal:"),w(),b(31,"span"),C(32),w()(),b(33,"div",20)(34,"span"),C(35,"Tax:"),w(),b(36,"span"),C(37),w()(),b(38,"div",20)(39,"span"),C(40,"Discount:"),w(),b(41,"input",21),ht("ngModelChange",function(o){return pt(r.discount,o)||(r.discount=o),o}),w()(),b(42,"div",22)(43,"span"),C(44,"Total:"),w(),b(45,"span"),C(46),w()(),b(47,"div",23)(48,"button",24),xe("click",function(){return r.cancelOrder()}),C(49,"Cancel"),w(),b(50,"button",25),xe("click",function(){return r.printKOT()}),C(51,"Print KOT"),w(),b(52,"button",26),xe("click",function(){return r.payAndPrint()}),C(53,"Pay & Print Bill"),w()()(),b(54,"div",27)(55,"div",28)(56,"h2"),C(57,"Bill Requests"),w(),b(58,"div",29)(59,"button",30),xe("click",function(){return r.loadReadyOrders()}),He(60,XJ,1,0,"span",31),b(61,"span"),C(62,"\u21BB Refresh"),w()(),b(63,"button",32),xe("click",function(){return r.toggleSound()}),C(64),w()()(),He(65,eX,2,0,"div",33)(66,tX,11,5,"div",34),w(),He(67,nX,15,3,"div",35),w()()),t&2&&(O(5),he("ngForOf",r.categories),O(2),dt("ngModel",r.searchText),O(2),he("ngForOf",r.filteredMenuItems),O(),he("ngIf",r.filteredMenuItems.length===0),O(7),dt("ngModel",r.isTakeaway),O(2),he("ngIf",!r.isTakeaway),O(4),dt("ngModel",r.customerName),O(2),he("ngForOf",r.cart),O(),he("ngIf",r.cart.length===0),O(6),Ue(r.getSubtotal().toFixed(0)),O(5),Ue(r.getTax().toFixed(0)),O(4),dt("ngModel",r.discount),O(5),Ue(r.getTotal().toFixed(0)),O(2),he("disabled",r.cart.length===0),O(2),he("disabled",r.cart.length===0||r.isLoading),O(2),he("disabled",r.cart.length===0||r.isLoading),O(7),he("disabled",r.isRefreshing),O(),he("ngIf",r.isRefreshing),O(4),Ge("\u{1F514} ",r.soundEnabled?"Sound On":"Sound Off"),O(),he("ngIf",r.readyOrders.length===0),O(),he("ngForOf",r.readyOrders),O(),he("ngIf",r.selectedBillOrder))},dependencies:[lr,Qr,Ir,Wi,uc,dc,$i,wa,oh,zs,Lo,ba,po],styles:[".pos-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr;gap:20px;height:calc(100vh - 60px);padding:20px;max-width:1600px;margin:0 auto}.left-panel[_ngcontent-%COMP%]{background:#fff;border-radius:10px;padding:20px;box-shadow:0 2px 8px #0000001a;display:flex;flex-direction:column;overflow:hidden}.left-panel[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 20px;font-size:24px;color:#333}.category-tabs[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:15px;flex-wrap:wrap}.category-tab[_ngcontent-%COMP%]{padding:8px 16px;border:2px solid #e0e0e0;background:#fff;border-radius:20px;cursor:pointer;font-size:14px;font-weight:500;transition:all .3s}.category-tab[_ngcontent-%COMP%]:hover{border-color:#667eea;color:#667eea}.category-tab.active[_ngcontent-%COMP%]{background:#667eea;color:#fff;border-color:#667eea}.search-box[_ngcontent-%COMP%]{margin-bottom:15px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid #ddd;border-radius:5px;font-size:14px;box-sizing:border-box}.menu-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:15px;overflow-y:auto;flex:1}.menu-item-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:20px;border-radius:10px;cursor:pointer;transition:all .3s;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;min-height:120px}.menu-item-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 6px 15px #0003}.item-name[_ngcontent-%COMP%]{font-weight:600;font-size:16px;margin-bottom:8px}.item-price[_ngcontent-%COMP%]{font-size:20px;font-weight:700;margin-bottom:5px}.item-category[_ngcontent-%COMP%]{font-size:12px;opacity:.9}.no-items[_ngcontent-%COMP%]{grid-column:1 / -1;text-align:center;padding:40px;color:#999}.right-panel[_ngcontent-%COMP%]{background:#fff;border-radius:10px;padding:20px;box-shadow:0 2px 8px #0000001a;display:flex;flex-direction:column}.right-panel[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 20px;font-size:24px;color:#333}.order-details[_ngcontent-%COMP%]{background:#f5f5f5;padding:15px;border-radius:8px;margin-bottom:15px}.detail-row[_ngcontent-%COMP%]{margin-bottom:12px}.detail-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.detail-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:13px;font-weight:500;color:#666;margin-bottom:5px}.detail-row[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .detail-row[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #ddd;border-radius:5px;font-size:14px;box-sizing:border-box}.table-selector[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.table-dropdown[_ngcontent-%COMP%]{flex:1;padding:10px 12px;border:1px solid #ddd;border-radius:5px;font-size:15px;box-sizing:border-box;min-height:42px}.refresh-availability-btn[_ngcontent-%COMP%]{padding:10px 14px;background:#667eea;color:#fff;border:none;border-radius:5px;cursor:pointer;font-size:18px;font-weight:700;transition:all .3s;min-width:42px;min-height:42px;display:flex;align-items:center;justify-content:center}.refresh-availability-btn[_ngcontent-%COMP%]:hover{background:#5568d3;transform:rotate(180deg)}.refresh-availability-btn[_ngcontent-%COMP%]:active{transform:rotate(180deg) scale(.95)}.detail-row[_ngcontent-%COMP%]   .empty[_ngcontent-%COMP%]{font-size:12px;color:#999;margin-top:5px;display:block}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;font-size:14px;color:#333}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto;cursor:pointer}.cart-items[_ngcontent-%COMP%]{flex:1;overflow-y:auto;margin-bottom:15px;border-top:1px solid #eee;border-bottom:1px solid #eee;padding:10px 0}.cart-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px;background:#f9f9f9;border-radius:8px;margin-bottom:10px}.item-info[_ngcontent-%COMP%]{flex:1}.item-info[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{font-weight:600;color:#333;font-size:14px;margin-bottom:4px}.item-info[_ngcontent-%COMP%]   .item-price[_ngcontent-%COMP%]{font-size:12px;color:#666}.item-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.qty-btn[_ngcontent-%COMP%]{width:28px;height:28px;border:none;background:#667eea;color:#fff;border-radius:4px;cursor:pointer;font-size:16px;font-weight:700;display:flex;align-items:center;justify-content:center}.qty-btn[_ngcontent-%COMP%]:hover{background:#5568d3}.quantity[_ngcontent-%COMP%]{min-width:30px;text-align:center;font-weight:600;font-size:14px}.item-total[_ngcontent-%COMP%]{min-width:60px;text-align:right;font-weight:600;color:#333}.remove-btn[_ngcontent-%COMP%]{width:28px;height:28px;border:none;background:#f44336;color:#fff;border-radius:4px;cursor:pointer;font-size:20px;line-height:1}.remove-btn[_ngcontent-%COMP%]:hover{background:#d32f2f}.empty-cart[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#999}.payment-section[_ngcontent-%COMP%]{background:#f5f5f5;padding:15px;border-radius:8px;margin-bottom:15px}.payment-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;font-size:14px}.payment-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.payment-row.total[_ngcontent-%COMP%]{font-size:18px;font-weight:700;padding-top:10px;border-top:2px solid #ddd;margin-top:10px;color:#333}.discount-input[_ngcontent-%COMP%]{width:100px;padding:6px;border:1px solid #ddd;border-radius:4px;text-align:right}.action-buttons[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px}.btn[_ngcontent-%COMP%]{padding:12px;border:none;border-radius:5px;font-size:14px;font-weight:500;cursor:pointer;transition:all .3s}.btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-primary[_ngcontent-%COMP%]{background:#4caf50;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#45a049}.btn-secondary[_ngcontent-%COMP%]{background:#f44336;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#d32f2f}.btn-info[_ngcontent-%COMP%]{background:#ff9800;color:#fff}.btn-info[_ngcontent-%COMP%]:hover:not(:disabled){background:#f57c00}.bill-requests[_ngcontent-%COMP%]{margin-top:20px;background:#fff7e6;border:1px solid #ffe0b2;border-radius:8px;padding:12px}.bill-requests[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 10px;font-size:18px;color:#ff9800}.bill-requests-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.bill-requests-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.refresh-btn[_ngcontent-%COMP%]{background:#eee;color:#333;border:1px solid #ddd;border-radius:6px;padding:6px 10px;cursor:pointer;display:inline-flex;align-items:center;gap:6px}.refresh-btn[_ngcontent-%COMP%]:hover{background:#e0e0e0}.refresh-btn[disabled][_ngcontent-%COMP%]{opacity:.6;cursor:not-allowed}.settlement-panel[_ngcontent-%COMP%]{margin-top:16px;padding:16px;background:#fff;border:1px solid #e5e7eb;border-radius:10px;position:relative}.panel-close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;width:32px;height:32px;border:none;border-radius:8px;background:#f1f5f9;color:#0f172a;font-size:20px;line-height:1;cursor:pointer}.panel-close[_ngcontent-%COMP%]:hover{background:#e2e8f0}.panel-close[_ngcontent-%COMP%]:focus{outline:2px solid #93c5fd;outline-offset:2px}.settlement-panel[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 12px;font-size:18px;font-weight:700}.settlement-panel[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:8px 12px;margin-bottom:14px}.settlement-actions[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:flex-end;gap:12px;margin-top:6px}.settlement-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 14px;border-radius:8px;border:none;font-weight:600;cursor:pointer;min-width:160px}.settlement-actions[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]{opacity:.6;cursor:not-allowed}.settlement-actions[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{background:#f1f5f9;color:#0f172a}.settlement-actions[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]:hover:not([disabled]){background:#e2e8f0}.settlement-actions[_ngcontent-%COMP%]   .complete[_ngcontent-%COMP%]{background:#10b981;color:#fff}.settlement-actions[_ngcontent-%COMP%]   .complete[_ngcontent-%COMP%]:hover:not([disabled]){background:#059669}.settlement-actions[_ngcontent-%COMP%]   .cancel[_ngcontent-%COMP%]{background:#e5e7eb;color:#111827}.settlement-actions[_ngcontent-%COMP%]   .cancel[_ngcontent-%COMP%]:hover:not([disabled]){background:#d1d5db}@media (max-width: 768px){.settlement-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1 1 200px}}.mini-spinner[_ngcontent-%COMP%]{width:14px;height:14px;border:2px solid #bbb;border-top-color:#666;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.sound-toggle[_ngcontent-%COMP%]{background:#eee;color:#333;border:1px solid #ddd;border-radius:6px;padding:6px 10px;cursor:pointer}.sound-toggle[_ngcontent-%COMP%]:hover{background:#e0e0e0}.bill-request-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background:#fffaf0;border:1px solid #ffe0b2;border-radius:6px;padding:8px 10px;margin-bottom:8px}.bill-request-item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;font-size:14px}.bill-request-item[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{font-weight:600}.bill-request-item[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{color:#333;font-weight:600}.bill-request-item[_ngcontent-%COMP%]   .ago[_ngcontent-%COMP%]{color:#777;font-size:12px}.bill-request-item[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#ff9800;color:#fff;border:none;border-radius:4px;padding:6px 10px;cursor:pointer}.bill-request-item[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#f57c00}.blink[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_blink-bg .9s ease-in-out 8}@keyframes _ngcontent-%COMP%_blink-bg{0%{background-color:#fffaf0}50%{background-color:#ffe9c4}to{background-color:#fffaf0}}"]})};function rX(n,e){if(n&1&&(b(0,"div",17)(1,"span",18),C(2),w(),b(3,"span",19),C(4),w()()),n&2){let t=e.$implicit;O(2),Ge("",t.quantity,"x"),O(2),Ue(t.menuItemName)}}function iX(n,e){if(n&1&&(b(0,"div",20),C(1),w()),n&2){let t=oe().$implicit;O(),Ge(" \u{1F464} ",t.customerName," ")}}function oX(n,e){if(n&1){let t=Rt();b(0,"button",21),xe("click",function(){_e(t);let i=oe().$implicit,o=oe();return we(o.startCooking(i))}),C(1," \u{1F525} Start Cooking "),w()}}function sX(n,e){if(n&1){let t=Rt();b(0,"button",22),xe("click",function(){_e(t);let i=oe().$implicit,o=oe();return we(o.markReady(i))}),C(1," \u2705 Mark Ready "),w()}}function aX(n,e){if(n&1&&(b(0,"div",6)(1,"div",7)(2,"div",8)(3,"h3"),C(4),w(),b(5,"div",9),C(6),w()(),b(7,"div",10),C(8),w()(),b(9,"div",11),He(10,rX,5,2,"div",12),w(),He(11,iX,2,1,"div",13),b(12,"div",14),He(13,oX,2,0,"button",15)(14,sX,2,0,"button",16),w()()),n&2){let t=e.$implicit,r=oe();on("cooking",t.status==="cooking"),O(4),Ue(t.isTakeaway?"\u{1F4E6} Takeaway":"\u{1FA91} Table "+t.tableNumber),O(2),Ue(t.orderNumber),O(),on("urgent",r.getElapsedTime(t).includes("15")),O(),Ge(" \u23F1\uFE0F ",r.getElapsedTime(t)," "),O(2),he("ngForOf",t.items),O(),he("ngIf",t.customerName),O(2),he("ngIf",t.status==="pending"),O(),he("ngIf",t.status==="cooking")}}function cX(n,e){n&1&&(b(0,"div",23)(1,"div",24),C(2,"\u2728"),w(),b(3,"p"),C(4,"No active orders"),w(),b(5,"small"),C(6,"New orders will appear here automatically"),w()())}function lX(n,e){if(n&1&&(b(0,"div",17)(1,"span",18),C(2),w(),b(3,"span",19),C(4),w()()),n&2){let t=e.$implicit;O(2),Ge("",t.quantity,"x"),O(2),Ue(t.menuItemName)}}function uX(n,e){if(n&1&&(b(0,"div",20),C(1),w()),n&2){let t=oe().$implicit;O(),Ge(" \u{1F464} ",t.customerName," ")}}function dX(n,e){if(n&1){let t=Rt();b(0,"div",27)(1,"div",7)(2,"div",8)(3,"h3"),C(4),w(),b(5,"div",9),C(6),w()(),b(7,"div",28),C(8," \u2705 Ready "),w()(),b(9,"div",11),He(10,lX,5,2,"div",12),w(),He(11,uX,2,1,"div",13),b(12,"div",14)(13,"button",29),xe("click",function(){let i=_e(t).$implicit,o=oe(2);return we(o.markCompleted(i))}),C(14," \u{1F4CB} Mark Completed "),w()()()}if(n&2){let t=e.$implicit;O(4),Ue(t.isTakeaway?"\u{1F4E6} Takeaway":"\u{1FA91} Table "+t.tableNumber),O(2),Ue(t.orderNumber),O(4),he("ngForOf",t.items),O(),he("ngIf",t.customerName)}}function hX(n,e){if(n&1&&(b(0,"div",25)(1,"h2"),C(2,"\u{1F514} Ready for Pickup"),w(),b(3,"p",1),C(4,"Orders ready to be served"),w(),b(5,"div",2),He(6,dX,15,4,"div",26),w()()),n&2){let t=oe();O(6),he("ngForOf",t.readyOrders)}}var xw=class n{constructor(e,t){this.db=e;this.authService=t}orders=[];readyOrders=[];isLoading=!1;ngOnInit(){return B(this,null,function*(){yield this.loadOrders(),setInterval(()=>this.loadOrders(),1e4)})}loadOrders(){return B(this,null,function*(){try{let e=yield this.db.getTodayOrders();this.orders=e.filter(t=>t.status==="pending"||t.status==="cooking"),this.readyOrders=e.filter(t=>t.status==="ready")}catch(e){console.error("Error loading orders:",e)}})}startCooking(e){return B(this,null,function*(){if(e.id)try{yield this.db.updateOrder(e.id,{status:"cooking",startedCookingAt:new Date}),yield this.loadOrders()}catch(t){console.error("Error updating order:",t)}})}markReady(e){return B(this,null,function*(){if(e.id)try{yield this.db.updateOrder(e.id,{status:"ready",readyAt:new Date}),yield this.loadOrders()}catch(t){console.error("Error updating order:",t)}})}markCompleted(e){return B(this,null,function*(){if(e.id)try{yield this.db.updateOrder(e.id,{status:"completed",completedAt:new Date}),yield this.deductInventoryForOrder(e),yield this.loadOrders()}catch(t){console.error("Error completing order:",t)}})}deductInventoryForOrder(e){return B(this,null,function*(){for(let t of e.items){let r=yield this.db.getMenuItem(t.menuItemId);if(r){if(r.preparedItemId){let i={inventoryItemId:r.preparedItemId,inventoryItemName:r.name,adjustmentType:"consumption",quantity:-t.quantity,unit:r.unit||"pieces",reason:`Completed Order ${e.orderNumber}`,adjustedBy:this.authService.currentUser?.name||"Kitchen",date:new Date};try{yield this.db.createInventoryAdjustment(i)}catch(o){console.error("Error deducting prepared inventory:",o)}}if(r.recipeMapping&&r.recipeMapping.length>0)for(let i of r.recipeMapping){let o=i.quantityUsed*t.quantity,s={inventoryItemId:i.inventoryItemId,inventoryItemName:i.inventoryItemName,adjustmentType:"consumption",quantity:-o,unit:i.unit,reason:`Completed ${t.quantity}x ${r.name} - Order ${e.orderNumber}`,adjustedBy:this.authService.currentUser?.name||"Kitchen",date:new Date};try{yield this.db.createInventoryAdjustment(s)}catch(a){console.error("Error deducting recipe inventory:",a)}}}}})}getElapsedTime(e){let t=new Date,r=e.createdAt instanceof Date?e.createdAt:new Date(e.createdAt),i=t.getTime()-r.getTime();return`${Math.floor(i/6e4)} min`}static \u0275fac=function(t){return new(t||n)(Xe(Mr),Xe(jr))};static \u0275cmp=sr({type:n,selectors:[["app-kitchen"]],decls:9,vars:3,consts:[[1,"kitchen-container"],[1,"subtitle"],[1,"orders-grid"],["class","order-card",3,"cooking",4,"ngFor","ngForOf"],["class","no-orders",4,"ngIf"],["class","ready-section",4,"ngIf"],[1,"order-card"],[1,"order-header"],[1,"order-info"],[1,"order-number"],[1,"order-time"],[1,"order-items"],["class","order-item",4,"ngFor","ngForOf"],["class","order-customer",4,"ngIf"],[1,"order-actions"],["class","btn btn-start",3,"click",4,"ngIf"],["class","btn btn-ready",3,"click",4,"ngIf"],[1,"order-item"],[1,"item-qty"],[1,"item-name"],[1,"order-customer"],[1,"btn","btn-start",3,"click"],[1,"btn","btn-ready",3,"click"],[1,"no-orders"],[1,"no-orders-icon"],[1,"ready-section"],["class","order-card ready-card",4,"ngFor","ngForOf"],[1,"order-card","ready-card"],[1,"order-time","ready-badge"],[1,"btn","btn-complete",3,"click"]],template:function(t,r){t&1&&(b(0,"div",0)(1,"h1"),C(2,"Kitchen Display System"),w(),b(3,"p",1),C(4,"Active orders to prepare"),w(),b(5,"div",2),He(6,aX,15,11,"div",3)(7,cX,7,0,"div",4),w(),He(8,hX,7,1,"div",5),w()),t&2&&(O(6),he("ngForOf",r.orders),O(),he("ngIf",r.orders.length===0),O(),he("ngIf",r.readyOrders.length>0))},dependencies:[lr,Qr,Ir],styles:[".kitchen-container[_ngcontent-%COMP%]{padding:20px;max-width:1400px;margin:0 auto}h1[_ngcontent-%COMP%]{font-size:32px;color:#333;margin:0 0 5px}.subtitle[_ngcontent-%COMP%]{color:#666;margin:0 0 30px}.orders-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px}.order-card[_ngcontent-%COMP%]{background:#fff;border-radius:10px;padding:20px;box-shadow:0 2px 8px #0000001a;border-left:5px solid #ff9800;transition:all .3s}.order-card.cooking[_ngcontent-%COMP%]{border-left-color:#2196f3;background:#e3f2fd}.order-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.order-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:15px;padding-bottom:15px;border-bottom:2px solid #eee}.order-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 5px;font-size:18px;color:#333}.order-number[_ngcontent-%COMP%]{font-size:12px;color:#999;font-family:monospace}.order-time[_ngcontent-%COMP%]{background:#ff9800;color:#fff;padding:6px 12px;border-radius:20px;font-size:14px;font-weight:600}.order-time.urgent[_ngcontent-%COMP%]{background:#f44336;animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.7}}.order-items[_ngcontent-%COMP%]{margin-bottom:15px}.order-item[_ngcontent-%COMP%]{padding:8px 0;border-bottom:1px solid #f0f0f0;display:flex;align-items:center;gap:10px}.order-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.item-qty[_ngcontent-%COMP%]{background:#667eea;color:#fff;padding:4px 8px;border-radius:4px;font-weight:600;font-size:12px;min-width:35px;text-align:center}.item-name[_ngcontent-%COMP%]{font-size:15px;color:#333;font-weight:500}.order-customer[_ngcontent-%COMP%]{background:#f5f5f5;padding:8px 12px;border-radius:5px;font-size:14px;margin-bottom:15px;color:#666}.order-actions[_ngcontent-%COMP%]{display:flex;gap:10px}.btn[_ngcontent-%COMP%]{flex:1;padding:12px;border:none;border-radius:5px;font-size:14px;font-weight:600;cursor:pointer;transition:all .3s}.btn-start[_ngcontent-%COMP%]{background:#ff9800;color:#fff}.btn-start[_ngcontent-%COMP%]:hover{background:#f57c00}.btn-ready[_ngcontent-%COMP%]{background:#4caf50;color:#fff}.btn-ready[_ngcontent-%COMP%]:hover{background:#45a049}.btn-complete[_ngcontent-%COMP%]{background:#667eea;color:#fff}.btn-complete[_ngcontent-%COMP%]:hover{background:#5568d3}.ready-section[_ngcontent-%COMP%]{margin-top:40px;padding-top:30px;border-top:3px solid #e0e0e0}.ready-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:28px;color:#333;margin:0 0 5px}.ready-card[_ngcontent-%COMP%]{border-left-color:#4caf50;background:#f1f8f4}.ready-badge[_ngcontent-%COMP%]{background:#4caf50}.no-orders[_ngcontent-%COMP%]{grid-column:1 / -1;text-align:center;padding:60px 20px;background:#fff;border-radius:10px}.no-orders-icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:20px}.no-orders[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px;color:#333;margin:0 0 10px}.no-orders[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#999;font-size:14px}"]})};function fX(n,e){if(n&1){let t=Rt();b(0,"tr")(1,"td"),C(2),w(),b(3,"td"),C(4),w(),b(5,"td")(6,"span",7),C(7),w()(),b(8,"td")(9,"span",8),C(10),w()(),b(11,"td")(12,"button",9),xe("click",function(){let i=_e(t).$implicit,o=oe();return we(o.openEditModal(i))}),C(13,"Edit"),w(),b(14,"button",10),xe("click",function(){let i=_e(t).$implicit,o=oe();return we(o.toggleActive(i))}),C(15),w()()()}if(n&2){let t=e.$implicit;O(2),Ue(t.name),O(2),Ue(t.email),O(3),Ue(t.role),O(2),on("active",t.isActive)("inactive",!t.isActive),O(),Ge(" ",t.isActive?"Active":"Inactive"," "),O(5),Ge(" ",t.isActive?"Deactivate":"Activate"," ")}}function pX(n,e){n&1&&(b(0,"tr")(1,"td",11),C(2,"No users found"),w()())}function gX(n,e){if(n&1&&(b(0,"option",26),C(1),w()),n&2){let t=e.$implicit;he("value",t),O(),Ue(t)}}function mX(n,e){if(n&1){let t=Rt();b(0,"div",17)(1,"label"),C(2,"Password * (minimum 6 characters)"),w(),b(3,"input",27),ht("ngModelChange",function(i){_e(t);let o=oe(2);return pt(o.newPassword,i)||(o.newPassword=i),we(i)}),w()()}if(n&2){let t=oe(2);O(3),dt("ngModel",t.newPassword)}}function vX(n,e){if(n&1){let t=Rt();b(0,"div",12)(1,"div",13)(2,"div",14)(3,"h2"),C(4),w(),b(5,"button",15),xe("click",function(){_e(t);let i=oe();return we(i.showAddModal=!1)}),C(6,"\xD7"),w()(),b(7,"div",16)(8,"div",17)(9,"label"),C(10,"Name *"),w(),b(11,"input",18),ht("ngModelChange",function(i){_e(t);let o=oe();return pt(o.currentUser.name,i)||(o.currentUser.name=i),we(i)}),w()(),b(12,"div",17)(13,"label"),C(14,"Email *"),w(),b(15,"input",19),ht("ngModelChange",function(i){_e(t);let o=oe();return pt(o.currentUser.email,i)||(o.currentUser.email=i),we(i)}),w()(),b(16,"div",17)(17,"label"),C(18,"Role *"),w(),b(19,"select",20),ht("ngModelChange",function(i){_e(t);let o=oe();return pt(o.currentUser.role,i)||(o.currentUser.role=i),we(i)}),He(20,gX,2,2,"option",21),w()(),He(21,mX,4,1,"div",22),b(22,"div",17)(23,"label"),C(24,"PIN Code (optional, for quick POS access)"),w(),b(25,"input",23),ht("ngModelChange",function(i){_e(t);let o=oe();return pt(o.currentUser.pinCode,i)||(o.currentUser.pinCode=i),we(i)}),w()()(),b(26,"div",24)(27,"button",25),xe("click",function(){_e(t);let i=oe();return we(i.showAddModal=!1)}),C(28,"Cancel"),w(),b(29,"button",2),xe("click",function(){_e(t);let i=oe();return we(i.saveUser())}),C(30),w()()()()}if(n&2){let t=oe();O(4),Ue(t.isEditMode?"Edit User":"Add User"),O(7),dt("ngModel",t.currentUser.name),O(4),dt("ngModel",t.currentUser.email),he("disabled",t.isEditMode),O(4),dt("ngModel",t.currentUser.role),O(),he("ngForOf",t.roles),O(),he("ngIf",!t.isEditMode),O(4),dt("ngModel",t.currentUser.pinCode),O(5),Ue(t.isEditMode?"Update User":"Save User")}}var Sw=class n{constructor(e,t){this.db=e;this.authService=t}users=[];showAddModal=!1;isEditMode=!1;currentUser=this.getEmptyUser();newPassword="";roles=["admin","cashier","chef","waiter"];ngOnInit(){return B(this,null,function*(){yield this.loadUsers()})}getEmptyUser(){return{username:"",email:"",name:"",role:"cashier",isActive:!0}}loadUsers(){return B(this,null,function*(){try{this.users=yield this.db.getUsers()}catch(e){console.error("Error loading users:",e)}})}openAddModal(){this.currentUser=this.getEmptyUser(),this.newPassword="",this.isEditMode=!1,this.showAddModal=!0}openEditModal(e){this.currentUser=Pe({},e),this.newPassword="",this.isEditMode=!0,this.showAddModal=!0}saveUser(){return B(this,null,function*(){if(!this.currentUser.name||!this.currentUser.email){alert("Please fill in all required fields");return}if(!this.isEditMode&&(!this.newPassword||this.newPassword.length<6)){alert("Password must be at least 6 characters long");return}try{if(this.isEditMode&&this.currentUser.id){let e={name:this.currentUser.name,role:this.currentUser.role};this.currentUser.pinCode&&(e.pinCode=this.currentUser.pinCode),yield this.db.updateUser(this.currentUser.id,e),yield this.db.logActivity({userId:this.authService.currentUser?.id||"",userName:this.authService.currentUser?.name||"Admin",action:"Edited User",details:`Updated ${this.currentUser.name} (${this.currentUser.role})`,timestamp:new Date}),alert("User updated successfully")}else{let e=yield this.authService.createUserAccount(this.currentUser.email,this.newPassword,this.currentUser);alert("User created successfully! They can now log in with their email and password.")}yield this.loadUsers(),this.showAddModal=!1}catch(e){console.error("Error saving user:",e),alert("Error saving user: "+(e.message||"Unknown error"))}})}toggleActive(e){return B(this,null,function*(){if(e.id)try{yield this.db.updateUser(e.id,{isActive:!e.isActive}),yield this.loadUsers()}catch(t){console.error("Error updating user:",t)}})}static \u0275fac=function(t){return new(t||n)(Xe(Mr),Xe(jr))};static \u0275cmp=sr({type:n,selectors:[["app-user-management"]],decls:23,vars:3,consts:[[1,"container"],[1,"header"],[1,"btn","btn-primary",3,"click"],[1,"data-table"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","modal",4,"ngIf"],[1,"role-badge"],[1,"status-badge"],[1,"btn","btn-sm","btn-info",3,"click"],[1,"btn","btn-sm",3,"click"],["colspan","5",1,"no-data"],[1,"modal"],[1,"modal-content"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"form-group"],["type","text",3,"ngModelChange","ngModel"],["type","email",3,"ngModelChange","ngModel","disabled"],[3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","form-group",4,"ngIf"],["type","text","placeholder","4-digit PIN","maxlength","4",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[3,"value"],["type","password","placeholder","Enter password",3,"ngModelChange","ngModel"]],template:function(t,r){t&1&&(b(0,"div",0)(1,"div",1)(2,"h1"),C(3,"User Management"),w(),b(4,"button",2),xe("click",function(){return r.openAddModal()}),C(5,"+ Add User"),w()(),b(6,"table",3)(7,"thead")(8,"tr")(9,"th"),C(10,"Name"),w(),b(11,"th"),C(12,"Email"),w(),b(13,"th"),C(14,"Role"),w(),b(15,"th"),C(16,"Status"),w(),b(17,"th"),C(18,"Actions"),w()()(),b(19,"tbody"),He(20,fX,16,9,"tr",4)(21,pX,3,0,"tr",5),w()(),He(22,vX,31,9,"div",6),w()),t&2&&(O(20),he("ngForOf",r.users),O(),he("ngIf",r.users.length===0),O(),he("ngIf",r.showAddModal))},dependencies:[lr,Qr,Ir,Wi,uc,dc,$i,zs,Lo,tT,po],styles:[".container[_ngcontent-%COMP%]{padding:20px;max-width:1400px;margin:0 auto}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px;color:#333;margin:0}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background:#fff;border-radius:10px;box-shadow:0 2px 8px #0000001a;overflow:hidden}.data-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#f5f5f5}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:15px;text-align:left;font-weight:600;color:#333;border-bottom:2px solid #ddd}.data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:15px;border-bottom:1px solid #eee}.role-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;background:#e3f2fd;color:#1976d2;border-radius:12px;font-size:12px;font-weight:500;text-transform:capitalize}.status-badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:12px;font-size:12px;font-weight:500}.status-badge.active[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.status-badge.inactive[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:5px;font-size:14px;font-weight:500;cursor:pointer}.btn-primary[_ngcontent-%COMP%]{background:#667eea;color:#fff}.btn-secondary[_ngcontent-%COMP%]{background:#e0e0e0;color:#333}.btn-sm[_ngcontent-%COMP%]{padding:6px 12px;font-size:12px;margin-right:5px}.btn-info[_ngcontent-%COMP%]{background:#667eea;color:#fff}.btn-info[_ngcontent-%COMP%]:hover{background:#5568d3}.data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:8px}.data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{margin-right:0}.no-data[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#999}.modal[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:10px;width:90%;max-width:600px}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:20px;border-bottom:1px solid #eee}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:28px;cursor:pointer}.modal-body[_ngcontent-%COMP%]{padding:20px}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;padding:20px;border-top:1px solid #eee}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:500}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ddd;border-radius:5px;box-sizing:border-box}"]})};var Ia=Uint8Array,ps=Uint16Array,sT=Int32Array,aT=new Ia([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),cT=new Ia([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),bF=new Ia([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),xF=function(n,e){for(var t=new ps(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new sT(t[30]),r=1;r<30;++r)for(var o=t[r];o<t[r+1];++o)i[o]=o-t[r]<<5|r;return{b:t,r:i}},SF=xF(aT,2),yX=SF.b,rT=SF.r;yX[28]=258,rT[258]=28;var DF=xF(cT,0),mCe=DF.b,IF=DF.r,iT=new ps(32768);for(An=0;An<32768;++An)hl=(An&43690)>>1|(An&21845)<<1,hl=(hl&52428)>>2|(hl&13107)<<2,hl=(hl&61680)>>4|(hl&3855)<<4,iT[An]=((hl&65280)>>8|(hl&255)<<8)>>1;var hl,An,d0=function(n,e,t){for(var r=n.length,i=0,o=new ps(e);i<r;++i)n[i]&&++o[n[i]-1];var s=new ps(e);for(i=1;i<e;++i)s[i]=s[i-1]+o[i-1]<<1;var a;if(t){a=new ps(1<<e);var c=15-e;for(i=0;i<r;++i)if(n[i])for(var l=i<<4|n[i],u=e-n[i],g=s[n[i]-1]++<<u,v=g|(1<<u)-1;g<=v;++g)a[iT[g]>>c]=l}else for(a=new ps(r),i=0;i<r;++i)n[i]&&(a[i]=iT[s[n[i]-1]++]>>15-n[i]);return a},ah=new Ia(288);for(An=0;An<144;++An)ah[An]=8;var An;for(An=144;An<256;++An)ah[An]=9;var An;for(An=256;An<280;++An)ah[An]=7;var An;for(An=280;An<288;++An)ah[An]=8;var An,Dw=new Ia(32);for(An=0;An<32;++An)Dw[An]=5;var An,_X=d0(ah,9,0);var wX=d0(Dw,5,0);var TF=function(n){return(n+7)/8|0},bX=function(n,e,t){return(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length),new Ia(n.subarray(e,t))};var fl=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},l0=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},nT=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,o=t.slice();if(!i)return{t:MF,l:0};if(i==1){var s=new Ia(t[0].s+1);return s[t[0].s]=1,{t:s,l:1}}t.sort(function(me,be){return me.f-be.f}),t.push({s:-1,f:25001});var a=t[0],c=t[1],l=0,u=1,g=2;for(t[0]={s:-1,f:a.f+c.f,l:a,r:c};u!=i-1;)a=t[t[l].f<t[g].f?l++:g++],c=t[l!=u&&t[l].f<t[g].f?l++:g++],t[u++]={s:-1,f:a.f+c.f,l:a,r:c};for(var v=o[0].s,r=1;r<i;++r)o[r].s>v&&(v=o[r].s);var p=new ps(v+1),S=oT(t[u-1],p,0);if(S>e){var r=0,k=0,L=S-e,R=1<<L;for(o.sort(function(be,$){return p[$.s]-p[be.s]||be.f-$.f});r<i;++r){var J=o[r].s;if(p[J]>e)k+=R-(1<<S-p[J]),p[J]=e;else break}for(k>>=L;k>0;){var X=o[r].s;p[X]<e?k-=1<<e-p[X]++-1:++r}for(;r>=0&&k;--r){var Z=o[r].s;p[Z]==e&&(--p[Z],++k)}S=e}return{t:new Ia(p),l:S}},oT=function(n,e,t){return n.s==-1?Math.max(oT(n.l,e,t+1),oT(n.r,e,t+1)):e[n.s]=t},EF=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new ps(++e),r=0,i=n[0],o=1,s=function(c){t[r++]=c},a=1;a<=e;++a)if(n[a]==i&&a!=e)++o;else{if(!i&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(i),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(i);o=1,i=n[a]}return{c:t.subarray(0,r),n:e}},u0=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},AF=function(n,e,t){var r=t.length,i=TF(e+2);n[i]=r&255,n[i+1]=r>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var o=0;o<r;++o)n[i+o+4]=t[o];return(i+4+r)*8},CF=function(n,e,t,r,i,o,s,a,c,l,u){fl(e,u++,t),++i[256];for(var g=nT(i,15),v=g.t,p=g.l,S=nT(o,15),k=S.t,L=S.l,R=EF(v),J=R.c,X=R.n,Z=EF(k),me=Z.c,be=Z.n,$=new ps(19),P=0;P<J.length;++P)++$[J[P]&31];for(var P=0;P<me.length;++P)++$[me[P]&31];for(var D=nT($,7),U=D.t,E=D.l,T=19;T>4&&!U[bF[T-1]];--T);var A=l+5<<3,te=u0(i,ah)+u0(o,Dw)+s,ve=u0(i,v)+u0(o,k)+s+14+3*T+u0($,U)+2*$[16]+3*$[17]+7*$[18];if(c>=0&&A<=te&&A<=ve)return AF(e,u,n.subarray(c,c+l));var Se,Ce,fe,De;if(fl(e,u,1+(ve<te)),u+=2,ve<te){Se=d0(v,p,0),Ce=v,fe=d0(k,L,0),De=k;var $e=d0(U,E,0);fl(e,u,X-257),fl(e,u+5,be-1),fl(e,u+10,T-4),u+=14;for(var P=0;P<T;++P)fl(e,u+3*P,U[bF[P]]);u+=3*T;for(var Fe=[J,me],V=0;V<2;++V)for(var Q=Fe[V],P=0;P<Q.length;++P){var ee=Q[P]&31;fl(e,u,$e[ee]),u+=U[ee],ee>15&&(fl(e,u,Q[P]>>5&127),u+=Q[P]>>12)}}else Se=_X,Ce=ah,fe=wX,De=Dw;for(var P=0;P<a;++P){var re=r[P];if(re>255){var ee=re>>18&31;l0(e,u,Se[ee+257]),u+=Ce[ee+257],ee>7&&(fl(e,u,re>>23&31),u+=aT[ee]);var ce=re&31;l0(e,u,fe[ce]),u+=De[ce],ce>3&&(l0(e,u,re>>5&8191),u+=cT[ce])}else l0(e,u,Se[re]),u+=Ce[re]}return l0(e,u,Se[256]),u+Ce[256]},IX=new sT([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),MF=new Ia(0),EX=function(n,e,t,r,i,o){var s=o.z||n.length,a=new Ia(r+s+5*(1+Math.ceil(s/7e3))+i),c=a.subarray(r,a.length-i),l=o.l,u=(o.r||0)&7;if(e){u&&(c[0]=o.r>>3);for(var g=IX[e-1],v=g>>13,p=g&8191,S=(1<<t)-1,k=o.p||new ps(32768),L=o.h||new ps(S+1),R=Math.ceil(t/3),J=2*R,X=function(gt){return(n[gt]^n[gt+1]<<R^n[gt+2]<<J)&S},Z=new sT(25e3),me=new ps(288),be=new ps(32),$=0,P=0,D=o.i||0,U=0,E=o.w||0,T=0;D+2<s;++D){var A=X(D),te=D&32767,ve=L[A];if(k[te]=ve,L[A]=te,E<=D){var Se=s-D;if(($>7e3||U>24576)&&(Se>423||!l)){u=CF(n,c,0,Z,me,be,P,U,T,D-T,u),U=$=P=0,T=D;for(var Ce=0;Ce<286;++Ce)me[Ce]=0;for(var Ce=0;Ce<30;++Ce)be[Ce]=0}var fe=2,De=0,$e=p,Fe=te-ve&32767;if(Se>2&&A==X(D-Fe))for(var V=Math.min(v,Se)-1,Q=Math.min(32767,D),ee=Math.min(258,Se);Fe<=Q&&--$e&&te!=ve;){if(n[D+fe]==n[D+fe-Fe]){for(var re=0;re<ee&&n[D+re]==n[D+re-Fe];++re);if(re>fe){if(fe=re,De=Fe,re>V)break;for(var ce=Math.min(Fe,re-2),de=0,Ce=0;Ce<ce;++Ce){var Ie=D-Fe+Ce&32767,Ee=k[Ie],Ne=Ie-Ee&32767;Ne>de&&(de=Ne,ve=Ie)}}}te=ve,ve=k[te],Fe+=te-ve&32767}if(De){Z[U++]=268435456|rT[fe]<<18|IF[De];var ze=rT[fe]&31,Je=IF[De]&31;P+=aT[ze]+cT[Je],++me[257+ze],++be[Je],E=D+fe,++$}else Z[U++]=n[D],++me[n[D]]}}for(D=Math.max(D,E);D<s;++D)Z[U++]=n[D],++me[n[D]];u=CF(n,c,l,Z,me,be,P,U,T,D-T,u),l||(o.r=u&7|c[u/8|0]<<3,u-=7,o.h=L,o.p=k,o.i=D,o.w=E)}else{for(var D=o.w||0;D<s+l;D+=65535){var Qe=D+65535;Qe>=s&&(c[u/8|0]=l,Qe=s),u=AF(c,u+1,n.subarray(D,Qe))}o.i=s}return bX(a,0,r+TF(u)+i)};var PF=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,o=t.length|0,s=0;s!=o;){for(var a=Math.min(s+2655,o);s<a;++s)i+=r+=t[s];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}n=r,e=i},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},CX=function(n,e,t,r,i){if(!i&&(i={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),s=new Ia(o.length+n.length);s.set(o),s.set(n,o.length),n=s,i.w=o.length}return EX(n,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,i)};var NF=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8};var xX=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var i=PF();i.p(e.dictionary),NF(n,2,i.d())}};function Tw(n,e){e||(e={});var t=PF();t.p(n);var r=CX(n,e,e.dictionary?6:2,4);return xX(r,e),NF(r,r.length-4,t.d()),r}var SX=typeof TextDecoder<"u"&&new TextDecoder,DX=0;try{SX.decode(MF,{stream:!0}),DX=1}catch{}function kF(n){if(Array.isArray(n))return n}function RF(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,o,s,a=[],c=!0,l=!1;try{if(o=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=o.call(t)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(u){l=!0,i=u}finally{try{if(!c&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(l)throw i}}return a}}function lT(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function OF(n,e){if(n){if(typeof n=="string")return lT(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?lT(n,e):void 0}}function LF(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uT(n,e){return kF(n)||RF(n,e)||OF(n,e)||LF()}function dT(n,e="utf8"){return new TextDecoder(e).decode(n)}var TX=new TextEncoder;function FF(n){return TX.encode(n)}var AX=1024*8,MX=(()=>{let n=new Uint8Array(4),e=new Uint32Array(n.buffer);return!((e[0]=1)&n[0])})(),hT={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array},h0=class n{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=AX,t={}){let r=!1;typeof e=="number"?e=new ArrayBuffer(e):(r=!0,this.lastWrittenByte=e.byteLength);let i=t.offset?t.offset>>>0:0,o=e.byteLength-i,s=i;(ArrayBuffer.isView(e)||e instanceof n)&&(e.byteLength!==e.buffer.byteLength&&(s=e.byteOffset+i),e=e.buffer),r?this.lastWrittenByte=o:this.lastWrittenByte=0,this.buffer=e,this.length=o,this.byteLength=o,this.byteOffset=s,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,s,o),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){let e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){let r=(this.offset+e)*2,i=new Uint8Array(r);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){let r=hT[t].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,o=this.buffer.slice(i,i+r);if(this.littleEndian===MX&&t!=="uint8"&&t!=="int8"){let a=new Uint8Array(this.buffer.slice(i,i+r));a.reverse();let c=new hT[t](a.buffer);return this.offset+=r,c.reverse(),c}let s=new hT[t](o);return this.offset+=r,s}readInt16(){let e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){let e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){let e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){let e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){let e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){let e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){let e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){let e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let r=0;r<e;r++)t+=this.readChar();return t}readUtf8(e=1){return dT(this.readBytes(e))}decodeText(e=1,t="utf8"){return dT(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(FF(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}};function mp(n){let e=n.length;for(;--e>=0;)n[e]=0}var PX=0,I6=1,NX=2,kX=3,RX=258,LT=29,D0=256,_0=D0+1+LT,fp=30,FT=19,E6=2*_0+1,ch=15,fT=16,OX=7,VT=256,C6=16,x6=17,S6=18,DT=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Rw=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),LX=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),D6=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),FX=512,gl=new Array((_0+2)*2);mp(gl);var m0=new Array(fp*2);mp(m0);var w0=new Array(FX);mp(w0);var b0=new Array(RX-kX+1);mp(b0);var jT=new Array(LT);mp(jT);var Ow=new Array(fp);mp(Ow);function pT(n,e,t,r,i){this.static_tree=n,this.extra_bits=e,this.extra_base=t,this.elems=r,this.max_length=i,this.has_stree=n&&n.length}var T6,A6,M6;function gT(n,e){this.dyn_tree=n,this.max_code=0,this.stat_desc=e}var P6=n=>n<256?w0[n]:w0[256+(n>>>7)],I0=(n,e)=>{n.pending_buf[n.pending++]=e&255,n.pending_buf[n.pending++]=e>>>8&255},Fo=(n,e,t)=>{n.bi_valid>fT-t?(n.bi_buf|=e<<n.bi_valid&65535,I0(n,n.bi_buf),n.bi_buf=e>>fT-n.bi_valid,n.bi_valid+=t-fT):(n.bi_buf|=e<<n.bi_valid&65535,n.bi_valid+=t)},fc=(n,e,t)=>{Fo(n,t[e*2],t[e*2+1])},N6=(n,e)=>{let t=0;do t|=n&1,n>>>=1,t<<=1;while(--e>0);return t>>>1},VX=n=>{n.bi_valid===16?(I0(n,n.bi_buf),n.bi_buf=0,n.bi_valid=0):n.bi_valid>=8&&(n.pending_buf[n.pending++]=n.bi_buf&255,n.bi_buf>>=8,n.bi_valid-=8)},jX=(n,e)=>{let t=e.dyn_tree,r=e.max_code,i=e.stat_desc.static_tree,o=e.stat_desc.has_stree,s=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,c=e.stat_desc.max_length,l,u,g,v,p,S,k=0;for(v=0;v<=ch;v++)n.bl_count[v]=0;for(t[n.heap[n.heap_max]*2+1]=0,l=n.heap_max+1;l<E6;l++)u=n.heap[l],v=t[t[u*2+1]*2+1]+1,v>c&&(v=c,k++),t[u*2+1]=v,!(u>r)&&(n.bl_count[v]++,p=0,u>=a&&(p=s[u-a]),S=t[u*2],n.opt_len+=S*(v+p),o&&(n.static_len+=S*(i[u*2+1]+p)));if(k!==0){do{for(v=c-1;n.bl_count[v]===0;)v--;n.bl_count[v]--,n.bl_count[v+1]+=2,n.bl_count[c]--,k-=2}while(k>0);for(v=c;v!==0;v--)for(u=n.bl_count[v];u!==0;)g=n.heap[--l],!(g>r)&&(t[g*2+1]!==v&&(n.opt_len+=(v-t[g*2+1])*t[g*2],t[g*2+1]=v),u--)}},k6=(n,e,t)=>{let r=new Array(ch+1),i=0,o,s;for(o=1;o<=ch;o++)i=i+t[o-1]<<1,r[o]=i;for(s=0;s<=e;s++){let a=n[s*2+1];a!==0&&(n[s*2]=N6(r[a]++,a))}},BX=()=>{let n,e,t,r,i,o=new Array(ch+1);for(t=0,r=0;r<LT-1;r++)for(jT[r]=t,n=0;n<1<<DT[r];n++)b0[t++]=r;for(b0[t-1]=r,i=0,r=0;r<16;r++)for(Ow[r]=i,n=0;n<1<<Rw[r];n++)w0[i++]=r;for(i>>=7;r<fp;r++)for(Ow[r]=i<<7,n=0;n<1<<Rw[r]-7;n++)w0[256+i++]=r;for(e=0;e<=ch;e++)o[e]=0;for(n=0;n<=143;)gl[n*2+1]=8,n++,o[8]++;for(;n<=255;)gl[n*2+1]=9,n++,o[9]++;for(;n<=279;)gl[n*2+1]=7,n++,o[7]++;for(;n<=287;)gl[n*2+1]=8,n++,o[8]++;for(k6(gl,_0+1,o),n=0;n<fp;n++)m0[n*2+1]=5,m0[n*2]=N6(n,5);T6=new pT(gl,DT,D0+1,_0,ch),A6=new pT(m0,Rw,0,fp,ch),M6=new pT(new Array(0),LX,0,FT,OX)},R6=n=>{let e;for(e=0;e<_0;e++)n.dyn_ltree[e*2]=0;for(e=0;e<fp;e++)n.dyn_dtree[e*2]=0;for(e=0;e<FT;e++)n.bl_tree[e*2]=0;n.dyn_ltree[VT*2]=1,n.opt_len=n.static_len=0,n.sym_next=n.matches=0},O6=n=>{n.bi_valid>8?I0(n,n.bi_buf):n.bi_valid>0&&(n.pending_buf[n.pending++]=n.bi_buf),n.bi_buf=0,n.bi_valid=0},VF=(n,e,t,r)=>{let i=e*2,o=t*2;return n[i]<n[o]||n[i]===n[o]&&r[e]<=r[t]},mT=(n,e,t)=>{let r=n.heap[t],i=t<<1;for(;i<=n.heap_len&&(i<n.heap_len&&VF(e,n.heap[i+1],n.heap[i],n.depth)&&i++,!VF(e,r,n.heap[i],n.depth));)n.heap[t]=n.heap[i],t=i,i<<=1;n.heap[t]=r},jF=(n,e,t)=>{let r,i,o=0,s,a;if(n.sym_next!==0)do r=n.pending_buf[n.sym_buf+o++]&255,r+=(n.pending_buf[n.sym_buf+o++]&255)<<8,i=n.pending_buf[n.sym_buf+o++],r===0?fc(n,i,e):(s=b0[i],fc(n,s+D0+1,e),a=DT[s],a!==0&&(i-=jT[s],Fo(n,i,a)),r--,s=P6(r),fc(n,s,t),a=Rw[s],a!==0&&(r-=Ow[s],Fo(n,r,a)));while(o<n.sym_next);fc(n,VT,e)},TT=(n,e)=>{let t=e.dyn_tree,r=e.stat_desc.static_tree,i=e.stat_desc.has_stree,o=e.stat_desc.elems,s,a,c=-1,l;for(n.heap_len=0,n.heap_max=E6,s=0;s<o;s++)t[s*2]!==0?(n.heap[++n.heap_len]=c=s,n.depth[s]=0):t[s*2+1]=0;for(;n.heap_len<2;)l=n.heap[++n.heap_len]=c<2?++c:0,t[l*2]=1,n.depth[l]=0,n.opt_len--,i&&(n.static_len-=r[l*2+1]);for(e.max_code=c,s=n.heap_len>>1;s>=1;s--)mT(n,t,s);l=o;do s=n.heap[1],n.heap[1]=n.heap[n.heap_len--],mT(n,t,1),a=n.heap[1],n.heap[--n.heap_max]=s,n.heap[--n.heap_max]=a,t[l*2]=t[s*2]+t[a*2],n.depth[l]=(n.depth[s]>=n.depth[a]?n.depth[s]:n.depth[a])+1,t[s*2+1]=t[a*2+1]=l,n.heap[1]=l++,mT(n,t,1);while(n.heap_len>=2);n.heap[--n.heap_max]=n.heap[1],jX(n,e),k6(t,c,n.bl_count)},BF=(n,e,t)=>{let r,i=-1,o,s=e[1],a=0,c=7,l=4;for(s===0&&(c=138,l=3),e[(t+1)*2+1]=65535,r=0;r<=t;r++)o=s,s=e[(r+1)*2+1],!(++a<c&&o===s)&&(a<l?n.bl_tree[o*2]+=a:o!==0?(o!==i&&n.bl_tree[o*2]++,n.bl_tree[C6*2]++):a<=10?n.bl_tree[x6*2]++:n.bl_tree[S6*2]++,a=0,i=o,s===0?(c=138,l=3):o===s?(c=6,l=3):(c=7,l=4))},UF=(n,e,t)=>{let r,i=-1,o,s=e[1],a=0,c=7,l=4;for(s===0&&(c=138,l=3),r=0;r<=t;r++)if(o=s,s=e[(r+1)*2+1],!(++a<c&&o===s)){if(a<l)do fc(n,o,n.bl_tree);while(--a!==0);else o!==0?(o!==i&&(fc(n,o,n.bl_tree),a--),fc(n,C6,n.bl_tree),Fo(n,a-3,2)):a<=10?(fc(n,x6,n.bl_tree),Fo(n,a-3,3)):(fc(n,S6,n.bl_tree),Fo(n,a-11,7));a=0,i=o,s===0?(c=138,l=3):o===s?(c=6,l=3):(c=7,l=4)}},UX=n=>{let e;for(BF(n,n.dyn_ltree,n.l_desc.max_code),BF(n,n.dyn_dtree,n.d_desc.max_code),TT(n,n.bl_desc),e=FT-1;e>=3&&n.bl_tree[D6[e]*2+1]===0;e--);return n.opt_len+=3*(e+1)+5+5+4,e},zX=(n,e,t,r)=>{let i;for(Fo(n,e-257,5),Fo(n,t-1,5),Fo(n,r-4,4),i=0;i<r;i++)Fo(n,n.bl_tree[D6[i]*2+1],3);UF(n,n.dyn_ltree,e-1),UF(n,n.dyn_dtree,t-1)},qX=n=>{let e=4093624447,t;for(t=0;t<=31;t++,e>>>=1)if(e&1&&n.dyn_ltree[t*2]!==0)return 0;if(n.dyn_ltree[18]!==0||n.dyn_ltree[20]!==0||n.dyn_ltree[26]!==0)return 1;for(t=32;t<D0;t++)if(n.dyn_ltree[t*2]!==0)return 1;return 0},zF=!1,HX=n=>{zF||(BX(),zF=!0),n.l_desc=new gT(n.dyn_ltree,T6),n.d_desc=new gT(n.dyn_dtree,A6),n.bl_desc=new gT(n.bl_tree,M6),n.bi_buf=0,n.bi_valid=0,R6(n)},L6=(n,e,t,r)=>{Fo(n,(PX<<1)+(r?1:0),3),O6(n),I0(n,t),I0(n,~t),t&&n.pending_buf.set(n.window.subarray(e,e+t),n.pending),n.pending+=t},$X=n=>{Fo(n,I6<<1,3),fc(n,VT,gl),VX(n)},WX=(n,e,t,r)=>{let i,o,s=0;n.level>0?(n.strm.data_type===2&&(n.strm.data_type=qX(n)),TT(n,n.l_desc),TT(n,n.d_desc),s=UX(n),i=n.opt_len+3+7>>>3,o=n.static_len+3+7>>>3,o<=i&&(i=o)):i=o=t+5,t+4<=i&&e!==-1?L6(n,e,t,r):n.strategy===4||o===i?(Fo(n,(I6<<1)+(r?1:0),3),jF(n,gl,m0)):(Fo(n,(NX<<1)+(r?1:0),3),zX(n,n.l_desc.max_code+1,n.d_desc.max_code+1,s+1),jF(n,n.dyn_ltree,n.dyn_dtree)),R6(n),r&&O6(n)},GX=(n,e,t)=>(n.pending_buf[n.sym_buf+n.sym_next++]=e,n.pending_buf[n.sym_buf+n.sym_next++]=e>>8,n.pending_buf[n.sym_buf+n.sym_next++]=t,e===0?n.dyn_ltree[t*2]++:(n.matches++,e--,n.dyn_ltree[(b0[t]+D0+1)*2]++,n.dyn_dtree[P6(e)*2]++),n.sym_next===n.sym_end),KX=HX,YX=L6,QX=WX,ZX=GX,JX=$X,XX={_tr_init:KX,_tr_stored_block:YX,_tr_flush_block:QX,_tr_tally:ZX,_tr_align:JX},eee=(n,e,t,r)=>{let i=n&65535|0,o=n>>>16&65535|0,s=0;for(;t!==0;){s=t>2e3?2e3:t,t-=s;do i=i+e[r++]|0,o=o+i|0;while(--s);i%=65521,o%=65521}return i|o<<16|0},E0=eee,tee=()=>{let n,e=[];for(var t=0;t<256;t++){n=t;for(var r=0;r<8;r++)n=n&1?3988292384^n>>>1:n>>>1;e[t]=n}return e},nee=new Uint32Array(tee()),ree=(n,e,t,r)=>{let i=nee,o=r+t;n^=-1;for(let s=r;s<o;s++)n=n>>>8^i[(n^e[s])&255];return n^-1},wi=ree,dh={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},vp={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},{_tr_init:iee,_tr_stored_block:AT,_tr_flush_block:oee,_tr_tally:Ou,_tr_align:see}=XX,{Z_NO_FLUSH:Lu,Z_PARTIAL_FLUSH:aee,Z_FULL_FLUSH:cee,Z_FINISH:qs,Z_BLOCK:qF,Z_OK:ki,Z_STREAM_END:HF,Z_STREAM_ERROR:pc,Z_DATA_ERROR:lee,Z_BUF_ERROR:vT,Z_DEFAULT_COMPRESSION:uee,Z_FILTERED:dee,Z_HUFFMAN_ONLY:Aw,Z_RLE:hee,Z_FIXED:fee,Z_DEFAULT_STRATEGY:pee,Z_UNKNOWN:gee,Z_DEFLATED:Vw}=vp,mee=9,vee=15,yee=8,_ee=29,wee=256,MT=wee+1+_ee,bee=30,Iee=19,Eee=2*MT+1,Cee=15,_n=3,Ru=258,gc=Ru+_n+1,xee=32,pp=42,BT=57,PT=69,NT=73,kT=91,RT=103,lh=113,p0=666,go=1,yp=2,hh=3,_p=4,See=3,uh=(n,e)=>(n.msg=dh[e],e),$F=n=>n*2-(n>4?9:0),ku=n=>{let e=n.length;for(;--e>=0;)n[e]=0},Dee=n=>{let e,t,r,i=n.w_size;e=n.hash_size,r=e;do t=n.head[--r],n.head[r]=t>=i?t-i:0;while(--e);e=i,r=e;do t=n.prev[--r],n.prev[r]=t>=i?t-i:0;while(--e)},Tee=(n,e,t)=>(e<<n.hash_shift^t)&n.hash_mask,Fu=Tee,gs=n=>{let e=n.state,t=e.pending;t>n.avail_out&&(t=n.avail_out),t!==0&&(n.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+t),n.next_out),n.next_out+=t,e.pending_out+=t,n.total_out+=t,n.avail_out-=t,e.pending-=t,e.pending===0&&(e.pending_out=0))},ms=(n,e)=>{oee(n,n.block_start>=0?n.block_start:-1,n.strstart-n.block_start,e),n.block_start=n.strstart,gs(n.strm)},Mn=(n,e)=>{n.pending_buf[n.pending++]=e},f0=(n,e)=>{n.pending_buf[n.pending++]=e>>>8&255,n.pending_buf[n.pending++]=e&255},OT=(n,e,t,r)=>{let i=n.avail_in;return i>r&&(i=r),i===0?0:(n.avail_in-=i,e.set(n.input.subarray(n.next_in,n.next_in+i),t),n.state.wrap===1?n.adler=E0(n.adler,e,i,t):n.state.wrap===2&&(n.adler=wi(n.adler,e,i,t)),n.next_in+=i,n.total_in+=i,i)},F6=(n,e)=>{let t=n.max_chain_length,r=n.strstart,i,o,s=n.prev_length,a=n.nice_match,c=n.strstart>n.w_size-gc?n.strstart-(n.w_size-gc):0,l=n.window,u=n.w_mask,g=n.prev,v=n.strstart+Ru,p=l[r+s-1],S=l[r+s];n.prev_length>=n.good_match&&(t>>=2),a>n.lookahead&&(a=n.lookahead);do if(i=e,!(l[i+s]!==S||l[i+s-1]!==p||l[i]!==l[r]||l[++i]!==l[r+1])){r+=2,i++;do;while(l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&r<v);if(o=Ru-(v-r),r=v-Ru,o>s){if(n.match_start=e,s=o,o>=a)break;p=l[r+s-1],S=l[r+s]}}while((e=g[e&u])>c&&--t!==0);return s<=n.lookahead?s:n.lookahead},gp=n=>{let e=n.w_size,t,r,i;do{if(r=n.window_size-n.lookahead-n.strstart,n.strstart>=e+(e-gc)&&(n.window.set(n.window.subarray(e,e+e-r),0),n.match_start-=e,n.strstart-=e,n.block_start-=e,n.insert>n.strstart&&(n.insert=n.strstart),Dee(n),r+=e),n.strm.avail_in===0)break;if(t=OT(n.strm,n.window,n.strstart+n.lookahead,r),n.lookahead+=t,n.lookahead+n.insert>=_n)for(i=n.strstart-n.insert,n.ins_h=n.window[i],n.ins_h=Fu(n,n.ins_h,n.window[i+1]);n.insert&&(n.ins_h=Fu(n,n.ins_h,n.window[i+_n-1]),n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++,n.insert--,!(n.lookahead+n.insert<_n)););}while(n.lookahead<gc&&n.strm.avail_in!==0)},V6=(n,e)=>{let t=n.pending_buf_size-5>n.w_size?n.w_size:n.pending_buf_size-5,r,i,o,s=0,a=n.strm.avail_in;do{if(r=65535,o=n.bi_valid+42>>3,n.strm.avail_out<o||(o=n.strm.avail_out-o,i=n.strstart-n.block_start,r>i+n.strm.avail_in&&(r=i+n.strm.avail_in),r>o&&(r=o),r<t&&(r===0&&e!==qs||e===Lu||r!==i+n.strm.avail_in)))break;s=e===qs&&r===i+n.strm.avail_in?1:0,AT(n,0,0,s),n.pending_buf[n.pending-4]=r,n.pending_buf[n.pending-3]=r>>8,n.pending_buf[n.pending-2]=~r,n.pending_buf[n.pending-1]=~r>>8,gs(n.strm),i&&(i>r&&(i=r),n.strm.output.set(n.window.subarray(n.block_start,n.block_start+i),n.strm.next_out),n.strm.next_out+=i,n.strm.avail_out-=i,n.strm.total_out+=i,n.block_start+=i,r-=i),r&&(OT(n.strm,n.strm.output,n.strm.next_out,r),n.strm.next_out+=r,n.strm.avail_out-=r,n.strm.total_out+=r)}while(s===0);return a-=n.strm.avail_in,a&&(a>=n.w_size?(n.matches=2,n.window.set(n.strm.input.subarray(n.strm.next_in-n.w_size,n.strm.next_in),0),n.strstart=n.w_size,n.insert=n.strstart):(n.window_size-n.strstart<=a&&(n.strstart-=n.w_size,n.window.set(n.window.subarray(n.w_size,n.w_size+n.strstart),0),n.matches<2&&n.matches++,n.insert>n.strstart&&(n.insert=n.strstart)),n.window.set(n.strm.input.subarray(n.strm.next_in-a,n.strm.next_in),n.strstart),n.strstart+=a,n.insert+=a>n.w_size-n.insert?n.w_size-n.insert:a),n.block_start=n.strstart),n.high_water<n.strstart&&(n.high_water=n.strstart),s?_p:e!==Lu&&e!==qs&&n.strm.avail_in===0&&n.strstart===n.block_start?yp:(o=n.window_size-n.strstart,n.strm.avail_in>o&&n.block_start>=n.w_size&&(n.block_start-=n.w_size,n.strstart-=n.w_size,n.window.set(n.window.subarray(n.w_size,n.w_size+n.strstart),0),n.matches<2&&n.matches++,o+=n.w_size,n.insert>n.strstart&&(n.insert=n.strstart)),o>n.strm.avail_in&&(o=n.strm.avail_in),o&&(OT(n.strm,n.window,n.strstart,o),n.strstart+=o,n.insert+=o>n.w_size-n.insert?n.w_size-n.insert:o),n.high_water<n.strstart&&(n.high_water=n.strstart),o=n.bi_valid+42>>3,o=n.pending_buf_size-o>65535?65535:n.pending_buf_size-o,t=o>n.w_size?n.w_size:o,i=n.strstart-n.block_start,(i>=t||(i||e===qs)&&e!==Lu&&n.strm.avail_in===0&&i<=o)&&(r=i>o?o:i,s=e===qs&&n.strm.avail_in===0&&r===i?1:0,AT(n,n.block_start,r,s),n.block_start+=r,gs(n.strm)),s?hh:go)},yT=(n,e)=>{let t,r;for(;;){if(n.lookahead<gc){if(gp(n),n.lookahead<gc&&e===Lu)return go;if(n.lookahead===0)break}if(t=0,n.lookahead>=_n&&(n.ins_h=Fu(n,n.ins_h,n.window[n.strstart+_n-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),t!==0&&n.strstart-t<=n.w_size-gc&&(n.match_length=F6(n,t)),n.match_length>=_n)if(r=Ou(n,n.strstart-n.match_start,n.match_length-_n),n.lookahead-=n.match_length,n.match_length<=n.max_lazy_match&&n.lookahead>=_n){n.match_length--;do n.strstart++,n.ins_h=Fu(n,n.ins_h,n.window[n.strstart+_n-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart;while(--n.match_length!==0);n.strstart++}else n.strstart+=n.match_length,n.match_length=0,n.ins_h=n.window[n.strstart],n.ins_h=Fu(n,n.ins_h,n.window[n.strstart+1]);else r=Ou(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++;if(r&&(ms(n,!1),n.strm.avail_out===0))return go}return n.insert=n.strstart<_n-1?n.strstart:_n-1,e===qs?(ms(n,!0),n.strm.avail_out===0?hh:_p):n.sym_next&&(ms(n,!1),n.strm.avail_out===0)?go:yp},dp=(n,e)=>{let t,r,i;for(;;){if(n.lookahead<gc){if(gp(n),n.lookahead<gc&&e===Lu)return go;if(n.lookahead===0)break}if(t=0,n.lookahead>=_n&&(n.ins_h=Fu(n,n.ins_h,n.window[n.strstart+_n-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),n.prev_length=n.match_length,n.prev_match=n.match_start,n.match_length=_n-1,t!==0&&n.prev_length<n.max_lazy_match&&n.strstart-t<=n.w_size-gc&&(n.match_length=F6(n,t),n.match_length<=5&&(n.strategy===dee||n.match_length===_n&&n.strstart-n.match_start>4096)&&(n.match_length=_n-1)),n.prev_length>=_n&&n.match_length<=n.prev_length){i=n.strstart+n.lookahead-_n,r=Ou(n,n.strstart-1-n.prev_match,n.prev_length-_n),n.lookahead-=n.prev_length-1,n.prev_length-=2;do++n.strstart<=i&&(n.ins_h=Fu(n,n.ins_h,n.window[n.strstart+_n-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart);while(--n.prev_length!==0);if(n.match_available=0,n.match_length=_n-1,n.strstart++,r&&(ms(n,!1),n.strm.avail_out===0))return go}else if(n.match_available){if(r=Ou(n,0,n.window[n.strstart-1]),r&&ms(n,!1),n.strstart++,n.lookahead--,n.strm.avail_out===0)return go}else n.match_available=1,n.strstart++,n.lookahead--}return n.match_available&&(r=Ou(n,0,n.window[n.strstart-1]),n.match_available=0),n.insert=n.strstart<_n-1?n.strstart:_n-1,e===qs?(ms(n,!0),n.strm.avail_out===0?hh:_p):n.sym_next&&(ms(n,!1),n.strm.avail_out===0)?go:yp},Aee=(n,e)=>{let t,r,i,o,s=n.window;for(;;){if(n.lookahead<=Ru){if(gp(n),n.lookahead<=Ru&&e===Lu)return go;if(n.lookahead===0)break}if(n.match_length=0,n.lookahead>=_n&&n.strstart>0&&(i=n.strstart-1,r=s[i],r===s[++i]&&r===s[++i]&&r===s[++i])){o=n.strstart+Ru;do;while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<o);n.match_length=Ru-(o-i),n.match_length>n.lookahead&&(n.match_length=n.lookahead)}if(n.match_length>=_n?(t=Ou(n,1,n.match_length-_n),n.lookahead-=n.match_length,n.strstart+=n.match_length,n.match_length=0):(t=Ou(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++),t&&(ms(n,!1),n.strm.avail_out===0))return go}return n.insert=0,e===qs?(ms(n,!0),n.strm.avail_out===0?hh:_p):n.sym_next&&(ms(n,!1),n.strm.avail_out===0)?go:yp},Mee=(n,e)=>{let t;for(;;){if(n.lookahead===0&&(gp(n),n.lookahead===0)){if(e===Lu)return go;break}if(n.match_length=0,t=Ou(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++,t&&(ms(n,!1),n.strm.avail_out===0))return go}return n.insert=0,e===qs?(ms(n,!0),n.strm.avail_out===0?hh:_p):n.sym_next&&(ms(n,!1),n.strm.avail_out===0)?go:yp};function hc(n,e,t,r,i){this.good_length=n,this.max_lazy=e,this.nice_length=t,this.max_chain=r,this.func=i}var g0=[new hc(0,0,0,0,V6),new hc(4,4,8,4,yT),new hc(4,5,16,8,yT),new hc(4,6,32,32,yT),new hc(4,4,16,16,dp),new hc(8,16,32,32,dp),new hc(8,16,128,128,dp),new hc(8,32,128,256,dp),new hc(32,128,258,1024,dp),new hc(32,258,258,4096,dp)],Pee=n=>{n.window_size=2*n.w_size,ku(n.head),n.max_lazy_match=g0[n.level].max_lazy,n.good_match=g0[n.level].good_length,n.nice_match=g0[n.level].nice_length,n.max_chain_length=g0[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=_n-1,n.match_available=0,n.ins_h=0};function Nee(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Vw,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Eee*2),this.dyn_dtree=new Uint16Array((2*bee+1)*2),this.bl_tree=new Uint16Array((2*Iee+1)*2),ku(this.dyn_ltree),ku(this.dyn_dtree),ku(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Cee+1),this.heap=new Uint16Array(2*MT+1),ku(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*MT+1),ku(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var T0=n=>{if(!n)return 1;let e=n.state;return!e||e.strm!==n||e.status!==pp&&e.status!==BT&&e.status!==PT&&e.status!==NT&&e.status!==kT&&e.status!==RT&&e.status!==lh&&e.status!==p0?1:0},j6=n=>{if(T0(n))return uh(n,pc);n.total_in=n.total_out=0,n.data_type=gee;let e=n.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap===2?BT:e.wrap?pp:lh,n.adler=e.wrap===2?0:1,e.last_flush=-2,iee(e),ki},B6=n=>{let e=j6(n);return e===ki&&Pee(n.state),e},kee=(n,e)=>T0(n)||n.state.wrap!==2?pc:(n.state.gzhead=e,ki),U6=(n,e,t,r,i,o)=>{if(!n)return pc;let s=1;if(e===uee&&(e=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),i<1||i>mee||t!==Vw||r<8||r>15||e<0||e>9||o<0||o>fee||r===8&&s!==1)return uh(n,pc);r===8&&(r=9);let a=new Nee;return n.state=a,a.strm=n,a.status=pp,a.wrap=s,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+_n-1)/_n),a.window=new Uint8Array(a.w_size*2),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=(a.lit_bufsize-1)*3,a.level=e,a.strategy=o,a.method=t,B6(n)},Ree=(n,e)=>U6(n,e,Vw,vee,yee,pee),Oee=(n,e)=>{if(T0(n)||e>qF||e<0)return n?uh(n,pc):pc;let t=n.state;if(!n.output||n.avail_in!==0&&!n.input||t.status===p0&&e!==qs)return uh(n,n.avail_out===0?vT:pc);let r=t.last_flush;if(t.last_flush=e,t.pending!==0){if(gs(n),n.avail_out===0)return t.last_flush=-1,ki}else if(n.avail_in===0&&$F(e)<=$F(r)&&e!==qs)return uh(n,vT);if(t.status===p0&&n.avail_in!==0)return uh(n,vT);if(t.status===pp&&t.wrap===0&&(t.status=lh),t.status===pp){let i=Vw+(t.w_bits-8<<4)<<8,o=-1;if(t.strategy>=Aw||t.level<2?o=0:t.level<6?o=1:t.level===6?o=2:o=3,i|=o<<6,t.strstart!==0&&(i|=xee),i+=31-i%31,f0(t,i),t.strstart!==0&&(f0(t,n.adler>>>16),f0(t,n.adler&65535)),n.adler=1,t.status=lh,gs(n),t.pending!==0)return t.last_flush=-1,ki}if(t.status===BT){if(n.adler=0,Mn(t,31),Mn(t,139),Mn(t,8),t.gzhead)Mn(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),Mn(t,t.gzhead.time&255),Mn(t,t.gzhead.time>>8&255),Mn(t,t.gzhead.time>>16&255),Mn(t,t.gzhead.time>>24&255),Mn(t,t.level===9?2:t.strategy>=Aw||t.level<2?4:0),Mn(t,t.gzhead.os&255),t.gzhead.extra&&t.gzhead.extra.length&&(Mn(t,t.gzhead.extra.length&255),Mn(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(n.adler=wi(n.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=PT;else if(Mn(t,0),Mn(t,0),Mn(t,0),Mn(t,0),Mn(t,0),Mn(t,t.level===9?2:t.strategy>=Aw||t.level<2?4:0),Mn(t,See),t.status=lh,gs(n),t.pending!==0)return t.last_flush=-1,ki}if(t.status===PT){if(t.gzhead.extra){let i=t.pending,o=(t.gzhead.extra.length&65535)-t.gzindex;for(;t.pending+o>t.pending_buf_size;){let a=t.pending_buf_size-t.pending;if(t.pending_buf.set(t.gzhead.extra.subarray(t.gzindex,t.gzindex+a),t.pending),t.pending=t.pending_buf_size,t.gzhead.hcrc&&t.pending>i&&(n.adler=wi(n.adler,t.pending_buf,t.pending-i,i)),t.gzindex+=a,gs(n),t.pending!==0)return t.last_flush=-1,ki;i=0,o-=a}let s=new Uint8Array(t.gzhead.extra);t.pending_buf.set(s.subarray(t.gzindex,t.gzindex+o),t.pending),t.pending+=o,t.gzhead.hcrc&&t.pending>i&&(n.adler=wi(n.adler,t.pending_buf,t.pending-i,i)),t.gzindex=0}t.status=NT}if(t.status===NT){if(t.gzhead.name){let i=t.pending,o;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>i&&(n.adler=wi(n.adler,t.pending_buf,t.pending-i,i)),gs(n),t.pending!==0)return t.last_flush=-1,ki;i=0}t.gzindex<t.gzhead.name.length?o=t.gzhead.name.charCodeAt(t.gzindex++)&255:o=0,Mn(t,o)}while(o!==0);t.gzhead.hcrc&&t.pending>i&&(n.adler=wi(n.adler,t.pending_buf,t.pending-i,i)),t.gzindex=0}t.status=kT}if(t.status===kT){if(t.gzhead.comment){let i=t.pending,o;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>i&&(n.adler=wi(n.adler,t.pending_buf,t.pending-i,i)),gs(n),t.pending!==0)return t.last_flush=-1,ki;i=0}t.gzindex<t.gzhead.comment.length?o=t.gzhead.comment.charCodeAt(t.gzindex++)&255:o=0,Mn(t,o)}while(o!==0);t.gzhead.hcrc&&t.pending>i&&(n.adler=wi(n.adler,t.pending_buf,t.pending-i,i))}t.status=RT}if(t.status===RT){if(t.gzhead.hcrc){if(t.pending+2>t.pending_buf_size&&(gs(n),t.pending!==0))return t.last_flush=-1,ki;Mn(t,n.adler&255),Mn(t,n.adler>>8&255),n.adler=0}if(t.status=lh,gs(n),t.pending!==0)return t.last_flush=-1,ki}if(n.avail_in!==0||t.lookahead!==0||e!==Lu&&t.status!==p0){let i=t.level===0?V6(t,e):t.strategy===Aw?Mee(t,e):t.strategy===hee?Aee(t,e):g0[t.level].func(t,e);if((i===hh||i===_p)&&(t.status=p0),i===go||i===hh)return n.avail_out===0&&(t.last_flush=-1),ki;if(i===yp&&(e===aee?see(t):e!==qF&&(AT(t,0,0,!1),e===cee&&(ku(t.head),t.lookahead===0&&(t.strstart=0,t.block_start=0,t.insert=0))),gs(n),n.avail_out===0))return t.last_flush=-1,ki}return e!==qs?ki:t.wrap<=0?HF:(t.wrap===2?(Mn(t,n.adler&255),Mn(t,n.adler>>8&255),Mn(t,n.adler>>16&255),Mn(t,n.adler>>24&255),Mn(t,n.total_in&255),Mn(t,n.total_in>>8&255),Mn(t,n.total_in>>16&255),Mn(t,n.total_in>>24&255)):(f0(t,n.adler>>>16),f0(t,n.adler&65535)),gs(n),t.wrap>0&&(t.wrap=-t.wrap),t.pending!==0?ki:HF)},Lee=n=>{if(T0(n))return pc;let e=n.state.status;return n.state=null,e===lh?uh(n,lee):ki},Fee=(n,e)=>{let t=e.length;if(T0(n))return pc;let r=n.state,i=r.wrap;if(i===2||i===1&&r.status!==pp||r.lookahead)return pc;if(i===1&&(n.adler=E0(n.adler,e,t,0)),r.wrap=0,t>=r.w_size){i===0&&(ku(r.head),r.strstart=0,r.block_start=0,r.insert=0);let c=new Uint8Array(r.w_size);c.set(e.subarray(t-r.w_size,t),0),e=c,t=r.w_size}let o=n.avail_in,s=n.next_in,a=n.input;for(n.avail_in=t,n.next_in=0,n.input=e,gp(r);r.lookahead>=_n;){let c=r.strstart,l=r.lookahead-(_n-1);do r.ins_h=Fu(r,r.ins_h,r.window[c+_n-1]),r.prev[c&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=c,c++;while(--l);r.strstart=c,r.lookahead=_n-1,gp(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=_n-1,r.match_available=0,n.next_in=s,n.input=a,n.avail_in=o,r.wrap=i,ki},Vee=Ree,jee=U6,Bee=B6,Uee=j6,zee=kee,qee=Oee,Hee=Lee,$ee=Fee,Wee="pako deflate (from Nodeca project)",v0={deflateInit:Vee,deflateInit2:jee,deflateReset:Bee,deflateResetKeep:Uee,deflateSetHeader:zee,deflate:qee,deflateEnd:Hee,deflateSetDictionary:$ee,deflateInfo:Wee},Gee=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),Kee=function(n){let e=Array.prototype.slice.call(arguments,1);for(;e.length;){let t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(let r in t)Gee(t,r)&&(n[r]=t[r])}}return n},Yee=n=>{let e=0;for(let r=0,i=n.length;r<i;r++)e+=n[r].length;let t=new Uint8Array(e);for(let r=0,i=0,o=n.length;r<o;r++){let s=n[r];t.set(s,i),i+=s.length}return t},jw={assign:Kee,flattenChunks:Yee},z6=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{z6=!1}var C0=new Uint8Array(256);for(let n=0;n<256;n++)C0[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;C0[254]=C0[254]=1;var Qee=n=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(n);let e,t,r,i,o,s=n.length,a=0;for(i=0;i<s;i++)t=n.charCodeAt(i),(t&64512)===55296&&i+1<s&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),a+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(a),o=0,i=0;o<a;i++)t=n.charCodeAt(i),(t&64512)===55296&&i+1<s&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),t<128?e[o++]=t:t<2048?(e[o++]=192|t>>>6,e[o++]=128|t&63):t<65536?(e[o++]=224|t>>>12,e[o++]=128|t>>>6&63,e[o++]=128|t&63):(e[o++]=240|t>>>18,e[o++]=128|t>>>12&63,e[o++]=128|t>>>6&63,e[o++]=128|t&63);return e},Zee=(n,e)=>{if(e<65534&&n.subarray&&z6)return String.fromCharCode.apply(null,n.length===e?n:n.subarray(0,e));let t="";for(let r=0;r<e;r++)t+=String.fromCharCode(n[r]);return t},Jee=(n,e)=>{let t=e||n.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,e));let r,i,o=new Array(t*2);for(i=0,r=0;r<t;){let s=n[r++];if(s<128){o[i++]=s;continue}let a=C0[s];if(a>4){o[i++]=65533,r+=a-1;continue}for(s&=a===2?31:a===3?15:7;a>1&&r<t;)s=s<<6|n[r++]&63,a--;if(a>1){o[i++]=65533;continue}s<65536?o[i++]=s:(s-=65536,o[i++]=55296|s>>10&1023,o[i++]=56320|s&1023)}return Zee(o,i)},Xee=(n,e)=>{e=e||n.length,e>n.length&&(e=n.length);let t=e-1;for(;t>=0&&(n[t]&192)===128;)t--;return t<0||t===0?e:t+C0[n[t]]>e?t:e},x0={string2buf:Qee,buf2string:Jee,utf8border:Xee};function ete(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var q6=ete,H6=Object.prototype.toString,{Z_NO_FLUSH:tte,Z_SYNC_FLUSH:nte,Z_FULL_FLUSH:rte,Z_FINISH:ite,Z_OK:Lw,Z_STREAM_END:ote,Z_DEFAULT_COMPRESSION:ste,Z_DEFAULT_STRATEGY:ate,Z_DEFLATED:cte}=vp;function A0(n){this.options=jw.assign({level:ste,method:cte,chunkSize:16384,windowBits:15,memLevel:8,strategy:ate},n||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new q6,this.strm.avail_out=0;let t=v0.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(t!==Lw)throw new Error(dh[t]);if(e.header&&v0.deflateSetHeader(this.strm,e.header),e.dictionary){let r;if(typeof e.dictionary=="string"?r=x0.string2buf(e.dictionary):H6.call(e.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(e.dictionary):r=e.dictionary,t=v0.deflateSetDictionary(this.strm,r),t!==Lw)throw new Error(dh[t]);this._dict_set=!0}}A0.prototype.push=function(n,e){let t=this.strm,r=this.options.chunkSize,i,o;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?ite:tte,typeof n=="string"?t.input=x0.string2buf(n):H6.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){if(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),(o===nte||o===rte)&&t.avail_out<=6){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(i=v0.deflate(t,o),i===ote)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),i=v0.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===Lw;if(t.avail_out===0){this.onData(t.output);continue}if(o>0&&t.next_out>0){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(t.avail_in===0)break}return!0};A0.prototype.onData=function(n){this.chunks.push(n)};A0.prototype.onEnd=function(n){n===Lw&&(this.result=jw.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function UT(n,e){let t=new A0(e);if(t.push(n,!0),t.err)throw t.msg||dh[t.err];return t.result}function lte(n,e){return e=e||{},e.raw=!0,UT(n,e)}function ute(n,e){return e=e||{},e.gzip=!0,UT(n,e)}var dte=A0,hte=UT,fte=lte,pte=ute,gte=vp,mte={Deflate:dte,deflate:hte,deflateRaw:fte,gzip:pte,constants:gte},Mw=16209,vte=16191,yte=function(e,t){let r,i,o,s,a,c,l,u,g,v,p,S,k,L,R,J,X,Z,me,be,$,P,D,U,E=e.state;r=e.next_in,D=e.input,i=r+(e.avail_in-5),o=e.next_out,U=e.output,s=o-(t-e.avail_out),a=o+(e.avail_out-257),c=E.dmax,l=E.wsize,u=E.whave,g=E.wnext,v=E.window,p=E.hold,S=E.bits,k=E.lencode,L=E.distcode,R=(1<<E.lenbits)-1,J=(1<<E.distbits)-1;e:do{S<15&&(p+=D[r++]<<S,S+=8,p+=D[r++]<<S,S+=8),X=k[p&R];t:for(;;){if(Z=X>>>24,p>>>=Z,S-=Z,Z=X>>>16&255,Z===0)U[o++]=X&65535;else if(Z&16){me=X&65535,Z&=15,Z&&(S<Z&&(p+=D[r++]<<S,S+=8),me+=p&(1<<Z)-1,p>>>=Z,S-=Z),S<15&&(p+=D[r++]<<S,S+=8,p+=D[r++]<<S,S+=8),X=L[p&J];n:for(;;){if(Z=X>>>24,p>>>=Z,S-=Z,Z=X>>>16&255,Z&16){if(be=X&65535,Z&=15,S<Z&&(p+=D[r++]<<S,S+=8,S<Z&&(p+=D[r++]<<S,S+=8)),be+=p&(1<<Z)-1,be>c){e.msg="invalid distance too far back",E.mode=Mw;break e}if(p>>>=Z,S-=Z,Z=o-s,be>Z){if(Z=be-Z,Z>u&&E.sane){e.msg="invalid distance too far back",E.mode=Mw;break e}if($=0,P=v,g===0){if($+=l-Z,Z<me){me-=Z;do U[o++]=v[$++];while(--Z);$=o-be,P=U}}else if(g<Z){if($+=l+g-Z,Z-=g,Z<me){me-=Z;do U[o++]=v[$++];while(--Z);if($=0,g<me){Z=g,me-=Z;do U[o++]=v[$++];while(--Z);$=o-be,P=U}}}else if($+=g-Z,Z<me){me-=Z;do U[o++]=v[$++];while(--Z);$=o-be,P=U}for(;me>2;)U[o++]=P[$++],U[o++]=P[$++],U[o++]=P[$++],me-=3;me&&(U[o++]=P[$++],me>1&&(U[o++]=P[$++]))}else{$=o-be;do U[o++]=U[$++],U[o++]=U[$++],U[o++]=U[$++],me-=3;while(me>2);me&&(U[o++]=U[$++],me>1&&(U[o++]=U[$++]))}}else if((Z&64)===0){X=L[(X&65535)+(p&(1<<Z)-1)];continue n}else{e.msg="invalid distance code",E.mode=Mw;break e}break}}else if((Z&64)===0){X=k[(X&65535)+(p&(1<<Z)-1)];continue t}else if(Z&32){E.mode=vte;break e}else{e.msg="invalid literal/length code",E.mode=Mw;break e}break}}while(r<i&&o<a);me=S>>3,r-=me,S-=me<<3,p&=(1<<S)-1,e.next_in=r,e.next_out=o,e.avail_in=r<i?5+(i-r):5-(r-i),e.avail_out=o<a?257+(a-o):257-(o-a),E.hold=p,E.bits=S},hp=15,WF=852,GF=592,KF=0,_T=1,YF=2,_te=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),wte=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),bte=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Ite=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Ete=(n,e,t,r,i,o,s,a)=>{let c=a.bits,l=0,u=0,g=0,v=0,p=0,S=0,k=0,L=0,R=0,J=0,X,Z,me,be,$,P=null,D,U=new Uint16Array(hp+1),E=new Uint16Array(hp+1),T=null,A,te,ve;for(l=0;l<=hp;l++)U[l]=0;for(u=0;u<r;u++)U[e[t+u]]++;for(p=c,v=hp;v>=1&&U[v]===0;v--);if(p>v&&(p=v),v===0)return i[o++]=1<<24|64<<16|0,i[o++]=1<<24|64<<16|0,a.bits=1,0;for(g=1;g<v&&U[g]===0;g++);for(p<g&&(p=g),L=1,l=1;l<=hp;l++)if(L<<=1,L-=U[l],L<0)return-1;if(L>0&&(n===KF||v!==1))return-1;for(E[1]=0,l=1;l<hp;l++)E[l+1]=E[l]+U[l];for(u=0;u<r;u++)e[t+u]!==0&&(s[E[e[t+u]]++]=u);if(n===KF?(P=T=s,D=20):n===_T?(P=_te,T=wte,D=257):(P=bte,T=Ite,D=0),J=0,u=0,l=g,$=o,S=p,k=0,me=-1,R=1<<p,be=R-1,n===_T&&R>WF||n===YF&&R>GF)return 1;for(;;){A=l-k,s[u]+1<D?(te=0,ve=s[u]):s[u]>=D?(te=T[s[u]-D],ve=P[s[u]-D]):(te=96,ve=0),X=1<<l-k,Z=1<<S,g=Z;do Z-=X,i[$+(J>>k)+Z]=A<<24|te<<16|ve|0;while(Z!==0);for(X=1<<l-1;J&X;)X>>=1;if(X!==0?(J&=X-1,J+=X):J=0,u++,--U[l]===0){if(l===v)break;l=e[t+s[u]]}if(l>p&&(J&be)!==me){for(k===0&&(k=p),$+=g,S=l-k,L=1<<S;S+k<v&&(L-=U[S+k],!(L<=0));)S++,L<<=1;if(R+=1<<S,n===_T&&R>WF||n===YF&&R>GF)return 1;me=J&be,i[me]=p<<24|S<<16|$-o|0}}return J!==0&&(i[$+J]=l-k<<24|64<<16|0),a.bits=p,0},y0=Ete,Cte=0,$6=1,W6=2,{Z_FINISH:QF,Z_BLOCK:xte,Z_TREES:Pw,Z_OK:fh,Z_STREAM_END:Ste,Z_NEED_DICT:Dte,Z_STREAM_ERROR:Hs,Z_DATA_ERROR:G6,Z_MEM_ERROR:K6,Z_BUF_ERROR:Tte,Z_DEFLATED:ZF}=vp,Bw=16180,JF=16181,XF=16182,e6=16183,t6=16184,n6=16185,r6=16186,i6=16187,o6=16188,s6=16189,Fw=16190,pl=16191,wT=16192,a6=16193,bT=16194,c6=16195,l6=16196,u6=16197,d6=16198,Nw=16199,kw=16200,h6=16201,f6=16202,p6=16203,g6=16204,m6=16205,IT=16206,v6=16207,y6=16208,fr=16209,Y6=16210,Q6=16211,Ate=852,Mte=592,Pte=15,Nte=Pte,_6=n=>(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24);function kte(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var ph=n=>{if(!n)return 1;let e=n.state;return!e||e.strm!==n||e.mode<Bw||e.mode>Q6?1:0},Z6=n=>{if(ph(n))return Hs;let e=n.state;return n.total_in=n.total_out=e.total=0,n.msg="",e.wrap&&(n.adler=e.wrap&1),e.mode=Bw,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(Ate),e.distcode=e.distdyn=new Int32Array(Mte),e.sane=1,e.back=-1,fh},J6=n=>{if(ph(n))return Hs;let e=n.state;return e.wsize=0,e.whave=0,e.wnext=0,Z6(n)},X6=(n,e)=>{let t;if(ph(n))return Hs;let r=n.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Hs:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=t,r.wbits=e,J6(n))},e8=(n,e)=>{if(!n)return Hs;let t=new kte;n.state=t,t.strm=n,t.window=null,t.mode=Bw;let r=X6(n,e);return r!==fh&&(n.state=null),r},Rte=n=>e8(n,Nte),w6=!0,ET,CT,Ote=n=>{if(w6){ET=new Int32Array(512),CT=new Int32Array(32);let e=0;for(;e<144;)n.lens[e++]=8;for(;e<256;)n.lens[e++]=9;for(;e<280;)n.lens[e++]=7;for(;e<288;)n.lens[e++]=8;for(y0($6,n.lens,0,288,ET,0,n.work,{bits:9}),e=0;e<32;)n.lens[e++]=5;y0(W6,n.lens,0,32,CT,0,n.work,{bits:5}),w6=!1}n.lencode=ET,n.lenbits=9,n.distcode=CT,n.distbits=5},t8=(n,e,t,r)=>{let i,o=n.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),r>=o.wsize?(o.window.set(e.subarray(t-o.wsize,t),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>r&&(i=r),o.window.set(e.subarray(t-r,t-r+i),o.wnext),r-=i,r?(o.window.set(e.subarray(t-r,t),0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0},Lte=(n,e)=>{let t,r,i,o,s,a,c,l,u,g,v,p,S,k,L=0,R,J,X,Z,me,be,$,P,D=new Uint8Array(4),U,E,T=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(ph(n)||!n.output||!n.input&&n.avail_in!==0)return Hs;t=n.state,t.mode===pl&&(t.mode=wT),s=n.next_out,i=n.output,c=n.avail_out,o=n.next_in,r=n.input,a=n.avail_in,l=t.hold,u=t.bits,g=a,v=c,P=fh;e:for(;;)switch(t.mode){case Bw:if(t.wrap===0){t.mode=wT;break}for(;u<16;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(t.wrap&2&&l===35615){t.wbits===0&&(t.wbits=15),t.check=0,D[0]=l&255,D[1]=l>>>8&255,t.check=wi(t.check,D,2,0),l=0,u=0,t.mode=JF;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((l&255)<<8)+(l>>8))%31){n.msg="incorrect header check",t.mode=fr;break}if((l&15)!==ZF){n.msg="unknown compression method",t.mode=fr;break}if(l>>>=4,u-=4,$=(l&15)+8,t.wbits===0&&(t.wbits=$),$>15||$>t.wbits){n.msg="invalid window size",t.mode=fr;break}t.dmax=1<<t.wbits,t.flags=0,n.adler=t.check=1,t.mode=l&512?s6:pl,l=0,u=0;break;case JF:for(;u<16;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(t.flags=l,(t.flags&255)!==ZF){n.msg="unknown compression method",t.mode=fr;break}if(t.flags&57344){n.msg="unknown header flags set",t.mode=fr;break}t.head&&(t.head.text=l>>8&1),t.flags&512&&t.wrap&4&&(D[0]=l&255,D[1]=l>>>8&255,t.check=wi(t.check,D,2,0)),l=0,u=0,t.mode=XF;case XF:for(;u<32;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.head&&(t.head.time=l),t.flags&512&&t.wrap&4&&(D[0]=l&255,D[1]=l>>>8&255,D[2]=l>>>16&255,D[3]=l>>>24&255,t.check=wi(t.check,D,4,0)),l=0,u=0,t.mode=e6;case e6:for(;u<16;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.head&&(t.head.xflags=l&255,t.head.os=l>>8),t.flags&512&&t.wrap&4&&(D[0]=l&255,D[1]=l>>>8&255,t.check=wi(t.check,D,2,0)),l=0,u=0,t.mode=t6;case t6:if(t.flags&1024){for(;u<16;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.length=l,t.head&&(t.head.extra_len=l),t.flags&512&&t.wrap&4&&(D[0]=l&255,D[1]=l>>>8&255,t.check=wi(t.check,D,2,0)),l=0,u=0}else t.head&&(t.head.extra=null);t.mode=n6;case n6:if(t.flags&1024&&(p=t.length,p>a&&(p=a),p&&(t.head&&($=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(r.subarray(o,o+p),$)),t.flags&512&&t.wrap&4&&(t.check=wi(t.check,r,p,o)),a-=p,o+=p,t.length-=p),t.length))break e;t.length=0,t.mode=r6;case r6:if(t.flags&2048){if(a===0)break e;p=0;do $=r[o+p++],t.head&&$&&t.length<65536&&(t.head.name+=String.fromCharCode($));while($&&p<a);if(t.flags&512&&t.wrap&4&&(t.check=wi(t.check,r,p,o)),a-=p,o+=p,$)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=i6;case i6:if(t.flags&4096){if(a===0)break e;p=0;do $=r[o+p++],t.head&&$&&t.length<65536&&(t.head.comment+=String.fromCharCode($));while($&&p<a);if(t.flags&512&&t.wrap&4&&(t.check=wi(t.check,r,p,o)),a-=p,o+=p,$)break e}else t.head&&(t.head.comment=null);t.mode=o6;case o6:if(t.flags&512){for(;u<16;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(t.wrap&4&&l!==(t.check&65535)){n.msg="header crc mismatch",t.mode=fr;break}l=0,u=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),n.adler=t.check=0,t.mode=pl;break;case s6:for(;u<32;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}n.adler=t.check=_6(l),l=0,u=0,t.mode=Fw;case Fw:if(t.havedict===0)return n.next_out=s,n.avail_out=c,n.next_in=o,n.avail_in=a,t.hold=l,t.bits=u,Dte;n.adler=t.check=1,t.mode=pl;case pl:if(e===xte||e===Pw)break e;case wT:if(t.last){l>>>=u&7,u-=u&7,t.mode=IT;break}for(;u<3;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}switch(t.last=l&1,l>>>=1,u-=1,l&3){case 0:t.mode=a6;break;case 1:if(Ote(t),t.mode=Nw,e===Pw){l>>>=2,u-=2;break e}break;case 2:t.mode=l6;break;case 3:n.msg="invalid block type",t.mode=fr}l>>>=2,u-=2;break;case a6:for(l>>>=u&7,u-=u&7;u<32;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if((l&65535)!==(l>>>16^65535)){n.msg="invalid stored block lengths",t.mode=fr;break}if(t.length=l&65535,l=0,u=0,t.mode=bT,e===Pw)break e;case bT:t.mode=c6;case c6:if(p=t.length,p){if(p>a&&(p=a),p>c&&(p=c),p===0)break e;i.set(r.subarray(o,o+p),s),a-=p,o+=p,c-=p,s+=p,t.length-=p;break}t.mode=pl;break;case l6:for(;u<14;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(t.nlen=(l&31)+257,l>>>=5,u-=5,t.ndist=(l&31)+1,l>>>=5,u-=5,t.ncode=(l&15)+4,l>>>=4,u-=4,t.nlen>286||t.ndist>30){n.msg="too many length or distance symbols",t.mode=fr;break}t.have=0,t.mode=u6;case u6:for(;t.have<t.ncode;){for(;u<3;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.lens[T[t.have++]]=l&7,l>>>=3,u-=3}for(;t.have<19;)t.lens[T[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,U={bits:t.lenbits},P=y0(Cte,t.lens,0,19,t.lencode,0,t.work,U),t.lenbits=U.bits,P){n.msg="invalid code lengths set",t.mode=fr;break}t.have=0,t.mode=d6;case d6:for(;t.have<t.nlen+t.ndist;){for(;L=t.lencode[l&(1<<t.lenbits)-1],R=L>>>24,J=L>>>16&255,X=L&65535,!(R<=u);){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(X<16)l>>>=R,u-=R,t.lens[t.have++]=X;else{if(X===16){for(E=R+2;u<E;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(l>>>=R,u-=R,t.have===0){n.msg="invalid bit length repeat",t.mode=fr;break}$=t.lens[t.have-1],p=3+(l&3),l>>>=2,u-=2}else if(X===17){for(E=R+3;u<E;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}l>>>=R,u-=R,$=0,p=3+(l&7),l>>>=3,u-=3}else{for(E=R+7;u<E;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}l>>>=R,u-=R,$=0,p=11+(l&127),l>>>=7,u-=7}if(t.have+p>t.nlen+t.ndist){n.msg="invalid bit length repeat",t.mode=fr;break}for(;p--;)t.lens[t.have++]=$}}if(t.mode===fr)break;if(t.lens[256]===0){n.msg="invalid code -- missing end-of-block",t.mode=fr;break}if(t.lenbits=9,U={bits:t.lenbits},P=y0($6,t.lens,0,t.nlen,t.lencode,0,t.work,U),t.lenbits=U.bits,P){n.msg="invalid literal/lengths set",t.mode=fr;break}if(t.distbits=6,t.distcode=t.distdyn,U={bits:t.distbits},P=y0(W6,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,U),t.distbits=U.bits,P){n.msg="invalid distances set",t.mode=fr;break}if(t.mode=Nw,e===Pw)break e;case Nw:t.mode=kw;case kw:if(a>=6&&c>=258){n.next_out=s,n.avail_out=c,n.next_in=o,n.avail_in=a,t.hold=l,t.bits=u,yte(n,v),s=n.next_out,i=n.output,c=n.avail_out,o=n.next_in,r=n.input,a=n.avail_in,l=t.hold,u=t.bits,t.mode===pl&&(t.back=-1);break}for(t.back=0;L=t.lencode[l&(1<<t.lenbits)-1],R=L>>>24,J=L>>>16&255,X=L&65535,!(R<=u);){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(J&&(J&240)===0){for(Z=R,me=J,be=X;L=t.lencode[be+((l&(1<<Z+me)-1)>>Z)],R=L>>>24,J=L>>>16&255,X=L&65535,!(Z+R<=u);){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}l>>>=Z,u-=Z,t.back+=Z}if(l>>>=R,u-=R,t.back+=R,t.length=X,J===0){t.mode=m6;break}if(J&32){t.back=-1,t.mode=pl;break}if(J&64){n.msg="invalid literal/length code",t.mode=fr;break}t.extra=J&15,t.mode=h6;case h6:if(t.extra){for(E=t.extra;u<E;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.length+=l&(1<<t.extra)-1,l>>>=t.extra,u-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=f6;case f6:for(;L=t.distcode[l&(1<<t.distbits)-1],R=L>>>24,J=L>>>16&255,X=L&65535,!(R<=u);){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if((J&240)===0){for(Z=R,me=J,be=X;L=t.distcode[be+((l&(1<<Z+me)-1)>>Z)],R=L>>>24,J=L>>>16&255,X=L&65535,!(Z+R<=u);){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}l>>>=Z,u-=Z,t.back+=Z}if(l>>>=R,u-=R,t.back+=R,J&64){n.msg="invalid distance code",t.mode=fr;break}t.offset=X,t.extra=J&15,t.mode=p6;case p6:if(t.extra){for(E=t.extra;u<E;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.offset+=l&(1<<t.extra)-1,l>>>=t.extra,u-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){n.msg="invalid distance too far back",t.mode=fr;break}t.mode=g6;case g6:if(c===0)break e;if(p=v-c,t.offset>p){if(p=t.offset-p,p>t.whave&&t.sane){n.msg="invalid distance too far back",t.mode=fr;break}p>t.wnext?(p-=t.wnext,S=t.wsize-p):S=t.wnext-p,p>t.length&&(p=t.length),k=t.window}else k=i,S=s-t.offset,p=t.length;p>c&&(p=c),c-=p,t.length-=p;do i[s++]=k[S++];while(--p);t.length===0&&(t.mode=kw);break;case m6:if(c===0)break e;i[s++]=t.length,c--,t.mode=kw;break;case IT:if(t.wrap){for(;u<32;){if(a===0)break e;a--,l|=r[o++]<<u,u+=8}if(v-=c,n.total_out+=v,t.total+=v,t.wrap&4&&v&&(n.adler=t.check=t.flags?wi(t.check,i,v,s-v):E0(t.check,i,v,s-v)),v=c,t.wrap&4&&(t.flags?l:_6(l))!==t.check){n.msg="incorrect data check",t.mode=fr;break}l=0,u=0}t.mode=v6;case v6:if(t.wrap&&t.flags){for(;u<32;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(t.wrap&4&&l!==(t.total&4294967295)){n.msg="incorrect length check",t.mode=fr;break}l=0,u=0}t.mode=y6;case y6:P=Ste;break e;case fr:P=G6;break e;case Y6:return K6;case Q6:default:return Hs}return n.next_out=s,n.avail_out=c,n.next_in=o,n.avail_in=a,t.hold=l,t.bits=u,(t.wsize||v!==n.avail_out&&t.mode<fr&&(t.mode<IT||e!==QF))&&t8(n,n.output,n.next_out,v-n.avail_out),g-=n.avail_in,v-=n.avail_out,n.total_in+=g,n.total_out+=v,t.total+=v,t.wrap&4&&v&&(n.adler=t.check=t.flags?wi(t.check,i,v,n.next_out-v):E0(t.check,i,v,n.next_out-v)),n.data_type=t.bits+(t.last?64:0)+(t.mode===pl?128:0)+(t.mode===Nw||t.mode===bT?256:0),(g===0&&v===0||e===QF)&&P===fh&&(P=Tte),P},Fte=n=>{if(ph(n))return Hs;let e=n.state;return e.window&&(e.window=null),n.state=null,fh},Vte=(n,e)=>{if(ph(n))return Hs;let t=n.state;return(t.wrap&2)===0?Hs:(t.head=e,e.done=!1,fh)},jte=(n,e)=>{let t=e.length,r,i,o;return ph(n)||(r=n.state,r.wrap!==0&&r.mode!==Fw)?Hs:r.mode===Fw&&(i=1,i=E0(i,e,t,0),i!==r.check)?G6:(o=t8(n,e,t,t),o?(r.mode=Y6,K6):(r.havedict=1,fh))},Bte=J6,Ute=X6,zte=Z6,qte=Rte,Hte=e8,$te=Lte,Wte=Fte,Gte=Vte,Kte=jte,Yte="pako inflate (from Nodeca project)",ml={inflateReset:Bte,inflateReset2:Ute,inflateResetKeep:zte,inflateInit:qte,inflateInit2:Hte,inflate:$te,inflateEnd:Wte,inflateGetHeader:Gte,inflateSetDictionary:Kte,inflateInfo:Yte};function Qte(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Zte=Qte,n8=Object.prototype.toString,{Z_NO_FLUSH:Jte,Z_FINISH:Xte,Z_OK:S0,Z_STREAM_END:xT,Z_NEED_DICT:ST,Z_STREAM_ERROR:ene,Z_DATA_ERROR:b6,Z_MEM_ERROR:tne}=vp;function M0(n){this.options=jw.assign({chunkSize:1024*64,windowBits:15,to:""},n||{});let e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(n&&n.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new q6,this.strm.avail_out=0;let t=ml.inflateInit2(this.strm,e.windowBits);if(t!==S0)throw new Error(dh[t]);if(this.header=new Zte,ml.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=x0.string2buf(e.dictionary):n8.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=ml.inflateSetDictionary(this.strm,e.dictionary),t!==S0)))throw new Error(dh[t])}M0.prototype.push=function(n,e){let t=this.strm,r=this.options.chunkSize,i=this.options.dictionary,o,s,a;if(this.ended)return!1;for(e===~~e?s=e:s=e===!0?Xte:Jte,n8.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),o=ml.inflate(t,s),o===ST&&i&&(o=ml.inflateSetDictionary(t,i),o===S0?o=ml.inflate(t,s):o===b6&&(o=ST));t.avail_in>0&&o===xT&&t.state.wrap>0&&n[t.next_in]!==0;)ml.inflateReset(t),o=ml.inflate(t,s);switch(o){case ene:case b6:case ST:case tne:return this.onEnd(o),this.ended=!0,!1}if(a=t.avail_out,t.next_out&&(t.avail_out===0||o===xT))if(this.options.to==="string"){let c=x0.utf8border(t.output,t.next_out),l=t.next_out-c,u=x0.buf2string(t.output,c);t.next_out=l,t.avail_out=r-l,l&&t.output.set(t.output.subarray(c,c+l),0),this.onData(u)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(o===S0&&a===0)){if(o===xT)return o=ml.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};M0.prototype.onData=function(n){this.chunks.push(n)};M0.prototype.onEnd=function(n){n===S0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=jw.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function zT(n,e){let t=new M0(e);if(t.push(n),t.err)throw t.msg||dh[t.err];return t.result}function nne(n,e){return e=e||{},e.raw=!0,zT(n,e)}var rne=M0,ine=zT,one=nne,sne=zT,ane=vp,cne={Inflate:rne,inflate:ine,inflateRaw:one,ungzip:sne,constants:ane},{Deflate:NCe,deflate:kCe,deflateRaw:RCe,gzip:OCe}=mte,{Inflate:lne,inflate:une,inflateRaw:LCe,ungzip:FCe}=cne;var qT=lne,r8=une;var o8=[];for(let n=0;n<256;n++){let e=n;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;o8[n]=e}var i8=4294967295;function dne(n,e,t){let r=n;for(let i=0;i<t;i++)r=o8[(r^e[i])&255]^r>>>8;return r}function hne(n,e){return(dne(i8,n,e)^i8)>>>0}function HT(n,e,t){let r=n.readUint32(),i=hne(new Uint8Array(n.buffer,n.byteOffset+n.offset-e-4,e),e);if(i!==r)throw new Error(`CRC mismatch for chunk ${t}. Expected ${r}, found ${i}`)}function Uw(n,e,t){for(let r=0;r<t;r++)e[r]=n[r]}function zw(n,e,t,r){let i=0;for(;i<r;i++)e[i]=n[i];for(;i<t;i++)e[i]=n[i]+e[i-r]&255}function qw(n,e,t,r){let i=0;if(t.length===0)for(;i<r;i++)e[i]=n[i];else for(;i<r;i++)e[i]=n[i]+t[i]&255}function Hw(n,e,t,r,i){let o=0;if(t.length===0){for(;o<i;o++)e[o]=n[o];for(;o<r;o++)e[o]=n[o]+(e[o-i]>>1)&255}else{for(;o<i;o++)e[o]=n[o]+(t[o]>>1)&255;for(;o<r;o++)e[o]=n[o]+(e[o-i]+t[o]>>1)&255}}function $w(n,e,t,r,i){let o=0;if(t.length===0){for(;o<i;o++)e[o]=n[o];for(;o<r;o++)e[o]=n[o]+e[o-i]&255}else{for(;o<i;o++)e[o]=n[o]+t[o]&255;for(;o<r;o++)e[o]=n[o]+fne(e[o-i],t[o],t[o-i])&255}}function fne(n,e,t){let r=n+e-t,i=Math.abs(r-n),o=Math.abs(r-e),s=Math.abs(r-t);return i<=o&&i<=s?n:o<=s?e:t}function s8(n,e,t,r,i,o){switch(n){case 0:Uw(e,t,i);break;case 1:zw(e,t,i,o);break;case 2:qw(e,t,r,i);break;case 3:Hw(e,t,r,i,o);break;case 4:$w(e,t,r,i,o);break;default:throw new Error(`Unsupported filter: ${n}`)}}var pne=new Uint16Array([255]),gne=new Uint8Array(pne.buffer),mne=gne[0]===255;function a8(n){let{data:e,width:t,height:r,channels:i,depth:o}=n,s=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],a=Math.ceil(o/8)*i,c=new Uint8Array(r*t*a),l=0;for(let u=0;u<7;u++){let g=s[u],v=Math.ceil((t-g.x)/g.xStep),p=Math.ceil((r-g.y)/g.yStep);if(v<=0||p<=0)continue;let S=v*a,k=new Uint8Array(S);for(let L=0;L<p;L++){let R=e[l++],J=e.subarray(l,l+S);l+=S;let X=new Uint8Array(S);s8(R,J,X,k,S,a),k.set(X);for(let Z=0;Z<v;Z++){let me=g.x+Z*g.xStep,be=g.y+L*g.yStep;if(!(me>=t||be>=r))for(let $=0;$<a;$++)c[(be*t+me)*a+$]=X[Z*a+$]}}}if(o===16){let u=new Uint16Array(c.buffer);if(mne)for(let g=0;g<u.length;g++)u[g]=vne(u[g]);return u}else return c}function vne(n){return(n&255)<<8|n>>8&255}var yne=new Uint16Array([255]),_ne=new Uint8Array(yne.buffer),wne=_ne[0]===255,bne=new Uint8Array(0);function $T(n){let{data:e,width:t,height:r,channels:i,depth:o}=n,s=Math.ceil(o/8)*i,a=Math.ceil(o/8*i*t),c=new Uint8Array(r*a),l=bne,u=0,g,v;for(let p=0;p<r;p++){switch(g=e.subarray(u+1,u+1+a),v=c.subarray(p*a,(p+1)*a),e[u]){case 0:Uw(g,v,a);break;case 1:zw(g,v,a,s);break;case 2:qw(g,v,l,a);break;case 3:Hw(g,v,l,a,s);break;case 4:$w(g,v,l,a,s);break;default:throw new Error(`Unsupported filter: ${e[u]}`)}l=v,u+=a+1}if(o===16){let p=new Uint16Array(c.buffer);if(wne)for(let S=0;S<p.length;S++)p[S]=Ine(p[S]);return p}else return c}function Ine(n){return(n&255)<<8|n>>8&255}var Ww=Uint8Array.of(137,80,78,71,13,10,26,10);function WT(n){if(!c8(n.readBytes(Ww.length)))throw new Error("wrong PNG signature")}function c8(n){if(n.length<Ww.length)return!1;for(let e=0;e<Ww.length;e++)if(n[e]!==Ww[e])return!1;return!0}var l8="tEXt",Cne=0,u8=new TextDecoder("latin1");function xne(n){if(Dne(n),n.length===0||n.length>79)throw new Error("keyword length must be between 1 and 79")}var Sne=/^[\u0000-\u00FF]*$/;function Dne(n){if(!Sne.test(n))throw new Error("invalid latin1 text")}function d8(n,e,t){let r=GT(e);n[r]=Tne(e,t-r.length-1)}function GT(n){for(n.mark();n.readByte()!==Cne;);let e=n.offset;n.reset();let t=u8.decode(n.readBytes(e-n.offset-1));return n.skip(1),xne(t),t}function Tne(n,e){return u8.decode(n.readBytes(e))}var mo={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},P0={UNKNOWN:-1,DEFLATE:0},Gw={UNKNOWN:-1,ADAPTIVE:0},N0={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},k0={NONE:0,BACKGROUND:1,PREVIOUS:2},Kw={SOURCE:0,OVER:1};var Yw=class extends h0{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,t={}){super(e);let{checkCrc:r=!1}=t;this._checkCrc=r,this._inflator=new qT,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=P0.UNKNOWN,this._filterMethod=Gw.UNKNOWN,this._interlaceMethod=N0.UNKNOWN,this._colorType=mo.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(WT(this);!this._end;){let e=this.readUint32(),t=this.readChars(4);this.decodeChunk(e,t)}return this.decodeImage(),this._png}decodeApng(){for(WT(this);!this._end;){let e=this.readUint32(),t=this.readChars(4);this.decodeApngChunk(e,t)}return this.decodeApngImage(),this._apng}decodeChunk(e,t){let r=this.offset;switch(t){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case l8:d8(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?HT(this,e+4,t):this.skip(4)}decodeApngChunk(e,t){let r=this.offset;switch(t!=="fdAT"&&t!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),t){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,t),this.offset=r+e;break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?HT(this,e+4,t):this.skip(4)}decodeIHDR(){let e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=Ane(this.readUint8());let t=this.readUint8();this._colorType=t;let r;switch(t){case mo.GREYSCALE:r=1;break;case mo.TRUECOLOUR:r=3;break;case mo.INDEXED_COLOUR:r=1;break;case mo.GREYSCALE_ALPHA:r=2;break;case mo.TRUECOLOUR_ALPHA:r=4;break;case mo.UNKNOWN:default:throw new Error(`Unknown color type: ${t}`)}if(this._png.channels=r,this._compressionMethod=this.readUint8(),this._compressionMethod!==P0.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){let e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);let t=e/3;this._hasPalette=!0;let r=[];this._palette=r;for(let i=0;i<t;i++)r.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;let t=e,r=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,r,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let t=e,r=this.offset+this.byteOffset;if(r+=4,t-=4,this._inflator.push(new Uint8Array(this.buffer,r,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case mo.GREYSCALE:case mo.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let t=0;t<e/2;t++)this._transparency[t]=this.readUint16();break}case mo.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let t=0;for(;t<e;t++){let r=this.readByte();this._palette[t].push(r)}for(;t<this._palette.length;t++)this._palette[t].push(255);break}case mo.UNKNOWN:case mo.GREYSCALE_ALPHA:case mo.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){let t=GT(this),r=this.readUint8();if(r!==P0.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${r}`);let i=this.readBytes(e-t.length-2);this._png.iccEmbeddedProfile={name:t,profile:r8(i)}}decodepHYs(){let e=this.readUint32(),t=this.readUint32(),r=this.readByte();this._png.resolution={x:e,y:t,unit:r}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){let t={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},r=this._frames.at(e);if(r){if(r.data=$T({data:r.data,width:r.width,height:r.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||r.xOffset===0&&r.yOffset===0&&r.width===this._png.width&&r.height===this._png.height)t.data=r.data;else{let i=this._apng.frames.at(e-1);this.disposeFrame(r,i,t),this.addFrameDataToCanvas(t,r)}this._apng.frames.push(t)}}return this._apng}disposeFrame(e,t,r){switch(e.disposeOp){case k0.NONE:break;case k0.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let o=0;o<this._png.width;o++){let s=(i*e.width+o)*this._png.channels;for(let a=0;a<this._png.channels;a++)r.data[s+a]=0}break;case k0.PREVIOUS:r.data.set(t.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,t){let r=1<<this._png.depth,i=(o,s)=>{let a=((o+t.yOffset)*this._png.width+t.xOffset+s)*this._png.channels,c=(o*t.width+s)*this._png.channels;return{index:a,frameIndex:c}};switch(t.blendOp){case Kw.SOURCE:for(let o=0;o<t.height;o++)for(let s=0;s<t.width;s++){let{index:a,frameIndex:c}=i(o,s);for(let l=0;l<this._png.channels;l++)e.data[a+l]=t.data[c+l]}break;case Kw.OVER:for(let o=0;o<t.height;o++)for(let s=0;s<t.width;s++){let{index:a,frameIndex:c}=i(o,s);for(let l=0;l<this._png.channels;l++){let u=t.data[c+this._png.channels-1]/r,g=l%(this._png.channels-1)===0?1:t.data[c+l],v=Math.floor(u*g+(1-u)*e.data[a+l]);e.data[a+l]+=v}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);let e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==Gw.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===N0.NO_INTERLACE)this._png.data=$T({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===N0.ADAM7)this._png.data=a8({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){let e=this._inflator.result,t=this._frames.at(-1);t?t.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:k0.NONE,blendOp:Kw.SOURCE,data:e}),this._inflator=new qT,this._writingDataChunks=!1}};function Ane(n){if(n!==1&&n!==2&&n!==4&&n!==8&&n!==16)throw new Error(`invalid bit depth: ${n}`);return n}function h8(n,e){return new Yw(n,e).decode()}var Ut=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function KT(){Ut.console&&typeof Ut.console.log=="function"&&Ut.console.log.apply(Ut.console,arguments)}var Jn={log:KT,warn:function(n){Ut.console&&(typeof Ut.console.warn=="function"?Ut.console.warn.apply(Ut.console,arguments):KT.call(null,arguments))},error:function(n){Ut.console&&(typeof Ut.console.error=="function"?Ut.console.error.apply(Ut.console,arguments):KT(n))}};function YT(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){gh(r.response,e,t)},r.onerror=function(){Jn.error("could not download file")},r.send()}function f8(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Qw(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var gh=Ut.saveAs||((typeof window>"u"?"undefined":Wn(window))!=="object"||window!==Ut?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=Ut.URL||Ut.webkitURL,i=document.createElement("a");e=e||n.name||"download",i.download=e,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin!==location.origin?f8(i.href)?YT(n,e,t):Qw(i,i.target="_blank"):Qw(i)):(i.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Qw(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(f8(n))YT(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){Qw(r)})}else navigator.msSaveOrOpenBlob((function(i,o){return o===void 0?o={autoBom:!1}:Wn(o)!=="object"&&(Jn.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i})(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return YT(n,e,t);var i=n.type==="application/octet-stream",o=/constructor/i.test(Ut.HTMLElement)||Ut.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||i&&o)&&(typeof FileReader>"u"?"undefined":Wn(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var u=a.result;u=s?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=u:location=u,r=null},a.readAsDataURL(n)}else{var c=Ut.URL||Ut.webkitURL,l=c.createObjectURL(n);r?r.location=l:location.href=l,r=null,setTimeout(function(){c.revokeObjectURL(l)},4e4)}});function F8(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<t.length;r++){var i=t[r].re,o=t[r].process,s=i.exec(n);s&&(e=o(s),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),c=this.g.toString(16),l=this.b.toString(16);return a.length==1&&(a="0"+a),c.length==1&&(c="0"+c),l.length==1&&(l="0"+l),"#"+a+c+l}}var eb=Ut.atob.bind(Ut),p8=Ut.btoa.bind(Ut);function QT(n,e){var t=n[0],r=n[1],i=n[2],o=n[3];t=Gi(t,r,i,o,e[0],7,-680876936),o=Gi(o,t,r,i,e[1],12,-389564586),i=Gi(i,o,t,r,e[2],17,606105819),r=Gi(r,i,o,t,e[3],22,-1044525330),t=Gi(t,r,i,o,e[4],7,-176418897),o=Gi(o,t,r,i,e[5],12,1200080426),i=Gi(i,o,t,r,e[6],17,-1473231341),r=Gi(r,i,o,t,e[7],22,-45705983),t=Gi(t,r,i,o,e[8],7,1770035416),o=Gi(o,t,r,i,e[9],12,-1958414417),i=Gi(i,o,t,r,e[10],17,-42063),r=Gi(r,i,o,t,e[11],22,-1990404162),t=Gi(t,r,i,o,e[12],7,1804603682),o=Gi(o,t,r,i,e[13],12,-40341101),i=Gi(i,o,t,r,e[14],17,-1502002290),t=Ki(t,r=Gi(r,i,o,t,e[15],22,1236535329),i,o,e[1],5,-165796510),o=Ki(o,t,r,i,e[6],9,-1069501632),i=Ki(i,o,t,r,e[11],14,643717713),r=Ki(r,i,o,t,e[0],20,-373897302),t=Ki(t,r,i,o,e[5],5,-701558691),o=Ki(o,t,r,i,e[10],9,38016083),i=Ki(i,o,t,r,e[15],14,-660478335),r=Ki(r,i,o,t,e[4],20,-405537848),t=Ki(t,r,i,o,e[9],5,568446438),o=Ki(o,t,r,i,e[14],9,-1019803690),i=Ki(i,o,t,r,e[3],14,-187363961),r=Ki(r,i,o,t,e[8],20,1163531501),t=Ki(t,r,i,o,e[13],5,-1444681467),o=Ki(o,t,r,i,e[2],9,-51403784),i=Ki(i,o,t,r,e[7],14,1735328473),t=Yi(t,r=Ki(r,i,o,t,e[12],20,-1926607734),i,o,e[5],4,-378558),o=Yi(o,t,r,i,e[8],11,-2022574463),i=Yi(i,o,t,r,e[11],16,1839030562),r=Yi(r,i,o,t,e[14],23,-35309556),t=Yi(t,r,i,o,e[1],4,-1530992060),o=Yi(o,t,r,i,e[4],11,1272893353),i=Yi(i,o,t,r,e[7],16,-155497632),r=Yi(r,i,o,t,e[10],23,-1094730640),t=Yi(t,r,i,o,e[13],4,681279174),o=Yi(o,t,r,i,e[0],11,-358537222),i=Yi(i,o,t,r,e[3],16,-722521979),r=Yi(r,i,o,t,e[6],23,76029189),t=Yi(t,r,i,o,e[9],4,-640364487),o=Yi(o,t,r,i,e[12],11,-421815835),i=Yi(i,o,t,r,e[15],16,530742520),t=Qi(t,r=Yi(r,i,o,t,e[2],23,-995338651),i,o,e[0],6,-198630844),o=Qi(o,t,r,i,e[7],10,1126891415),i=Qi(i,o,t,r,e[14],15,-1416354905),r=Qi(r,i,o,t,e[5],21,-57434055),t=Qi(t,r,i,o,e[12],6,1700485571),o=Qi(o,t,r,i,e[3],10,-1894986606),i=Qi(i,o,t,r,e[10],15,-1051523),r=Qi(r,i,o,t,e[1],21,-2054922799),t=Qi(t,r,i,o,e[8],6,1873313359),o=Qi(o,t,r,i,e[15],10,-30611744),i=Qi(i,o,t,r,e[6],15,-1560198380),r=Qi(r,i,o,t,e[13],21,1309151649),t=Qi(t,r,i,o,e[4],6,-145523070),o=Qi(o,t,r,i,e[11],10,-1120210379),i=Qi(i,o,t,r,e[2],15,718787259),r=Qi(r,i,o,t,e[9],21,-343485551),n[0]=ju(t,n[0]),n[1]=ju(r,n[1]),n[2]=ju(i,n[2]),n[3]=ju(o,n[3])}function ab(n,e,t,r,i,o){return e=ju(ju(e,n),ju(r,o)),ju(e<<i|e>>>32-i,t)}function Gi(n,e,t,r,i,o,s){return ab(e&t|~e&r,n,e,i,o,s)}function Ki(n,e,t,r,i,o,s){return ab(e&r|t&~r,n,e,i,o,s)}function Yi(n,e,t,r,i,o,s){return ab(e^t^r,n,e,i,o,s)}function Qi(n,e,t,r,i,o,s){return ab(t^(e|~r),n,e,i,o,s)}function V8(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)QT(r,Mne(n.substring(e-64,e)));n=n.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(QT(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,QT(r,i),r}function Mne(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}var g8="0123456789abcdef".split("");function Pne(n){for(var e="",t=0;t<4;t++)e+=g8[n>>8*t+4&15]+g8[n>>8*t&15];return e}function Nne(n){return String.fromCharCode(255&n,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function nA(n){return V8(n).map(Nne).join("")}var kne=(function(n){for(var e=0;e<n.length;e++)n[e]=Pne(n[e]);return n.join("")})(V8("hello"))!="5d41402abc4b2a76b9719d911017c592";function ju(n,e){if(kne){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}function rA(n,e){var t,r,i,o;if(n!==t){for(var s=(i=n,o=1+(256/n.length|0),new Array(o+1).join(i)),a=[],c=0;c<256;c++)a[c]=c;var l=0;for(c=0;c<256;c++){var u=a[c];l=(l+u+s.charCodeAt(c))%256,a[c]=a[l],a[l]=u}t=n,r=a}else a=r;var g=e.length,v=0,p=0,S="";for(c=0;c<g;c++)p=(p+(u=a[v=(v+1)%256]))%256,a[v]=a[p],a[p]=u,s=a[(a[v]+a[p])%256],S+=String.fromCharCode(e.charCodeAt(c)^s);return S}var m8={print:4,modify:8,copy:16,"annot-forms":32};function Ip(n,e,t,r){this.v=1,this.r=2;var i=192;n.forEach(function(a){if(m8.perm!==void 0)throw new Error("Invalid permission: "+a);i+=m8[a]}),this.padding="(\xBFN^Nu\x8AAd\0NV\xFF\xFA\b..\0\xB6\xD0h>\x80/\f\xA9\xFEdSiz";var o=(e+this.padding).substr(0,32),s=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,s),this.P=-(1+(255^i)),this.encryptionKey=nA(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=rA(this.encryptionKey,this.padding)}function Ep(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var i=n.charCodeAt(r);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):n[r]}return e}function v8(n){if(Wn(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,i){if(i=i||!1,typeof t!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var o=Math.random().toString(35);return e[t][o]=[r,!!i],o},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var o in e[t]){var s=e[t][o];try{s[0].apply(n,r)}catch(a){Ut.console&&Jn.error("jsPDF PubSub Error",a.message,a)}s[1]&&i.push(o)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function ob(n){if(!(this instanceof ob))return new ob(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function j8(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function mh(n,e,t,r,i){if(!(this instanceof mh))return new mh(n,e,t,r,i);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,j8.call(this,r,i)}function Cp(n,e,t,r,i){if(!(this instanceof Cp))return new Cp(n,e,t,r,i);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,j8.call(this,r,i)}function mt(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],o=arguments[3],s=[],a=1,c=16,l="S",u=null;Wn(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,i=n.format||i,o=n.compress||n.compressPdf||o,(u=n.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),a=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(c=n.floatPrecision),l=n.defaultPathOperation||"S"),s=n.filters||(o===!0?["FlateEncode"]:s),r=r||"mm",t=(""+(t||"P")).toLowerCase();var g=n.putOnlyUsedFonts||!1,v={},p={internal:{},__private__:{}};p.__private__.PubSub=v8;var S="1.3",k=p.__private__.getPdfVersion=function(){return S};p.__private__.setPdfVersion=function(m){S=m};var L={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return L};var R=p.__private__.getPageFormat=function(m){return L[m]};i=i||"a4";var J="compat",X="advanced",Z=J;function me(){this.saveGraphicsState(),W(new wt(Ht,0,0,-Ht,0,Ys()*Ht).toString()+" cm"),this.setFontSize(this.getFontSize()/Ht),l="n",Z=X}function be(){this.restoreGraphicsState(),l="S",Z=J}var $=p.__private__.combineFontStyleAndFontWeight=function(m,M){if(m=="bold"&&M=="normal"||m=="bold"&&M==400||m=="normal"&&M=="italic"||m=="bold"&&M=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return M&&(m=M==400||M==="normal"?m==="italic"?"italic":"normal":M!=700&&M!=="bold"||m!=="normal"?(M==700?"bold":M)+""+m:"bold"),m};p.advancedAPI=function(m){var M=Z===J;return M&&me.call(this),typeof m!="function"||(m(this),M&&be.call(this)),this},p.compatAPI=function(m){var M=Z===X;return M&&be.call(this),typeof m!="function"||(m(this),M&&me.call(this)),this},p.isAdvancedAPI=function(){return Z===X};var P,D=function(m){if(Z!==X)throw new Error(m+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},U=p.roundToPrecision=p.__private__.roundToPrecision=function(m,M){var G=e||M;if(isNaN(m)||isNaN(G))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return m.toFixed(G).replace(/0+$/,"")};P=p.hpf=p.__private__.hpf=typeof c=="number"?function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.hpf");return U(m,c)}:c==="smart"?function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.hpf");return U(m,m>-1&&m<1?16:5)}:function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.hpf");return U(m,16)};var E=p.f2=p.__private__.f2=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.f2");return U(m,2)},T=p.__private__.f3=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.f3");return U(m,3)},A=p.scale=p.__private__.scale=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.scale");return Z===J?m*Ht:Z===X?m:void 0},te=function(m){return A((function(M){return Z===J?Ys()-M:Z===X?M:void 0})(m))};p.__private__.setPrecision=p.setPrecision=function(m){typeof parseInt(m,10)=="number"&&(e=parseInt(m,10))};var ve,Se="00000000000000000000000000000000",Ce=p.__private__.getFileId=function(){return Se},fe=p.__private__.setFileId=function(m){return Se=m!==void 0&&/^[a-fA-F0-9]{32}$/.test(m)?m.toUpperCase():Se.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(Nr=new Ip(u.userPermissions,u.userPassword,u.ownerPassword,Se)),Se};p.setFileId=function(m){return fe(m),this},p.getFileId=function(){return Ce()};var De=p.__private__.convertDateToPDFDate=function(m){var M=m.getTimezoneOffset(),G=M<0?"+":"-",ne=Math.floor(Math.abs(M/60)),le=Math.abs(M%60),Ae=[G,ee(ne),"'",ee(le),"'"].join("");return["D:",m.getFullYear(),ee(m.getMonth()+1),ee(m.getDate()),ee(m.getHours()),ee(m.getMinutes()),ee(m.getSeconds()),Ae].join("")},$e=p.__private__.convertPDFDateToDate=function(m){var M=parseInt(m.substr(2,4),10),G=parseInt(m.substr(6,2),10)-1,ne=parseInt(m.substr(8,2),10),le=parseInt(m.substr(10,2),10),Ae=parseInt(m.substr(12,2),10),Le=parseInt(m.substr(14,2),10);return new Date(M,G,ne,le,Ae,Le,0)},Fe=p.__private__.setCreationDate=function(m){var M;if(m===void 0&&(m=new Date),m instanceof Date)M=De(m);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(m))throw new Error("Invalid argument passed to jsPDF.setCreationDate");M=m}return ve=M},V=p.__private__.getCreationDate=function(m){var M=ve;return m==="jsDate"&&(M=$e(ve)),M};p.setCreationDate=function(m){return Fe(m),this},p.getCreationDate=function(m){return V(m)};var Q,ee=p.__private__.padd2=function(m){return("0"+parseInt(m)).slice(-2)},re=p.__private__.padd2Hex=function(m){return("00"+(m=m.toString())).substr(m.length)},ce=0,de=[],Ie=[],Ee=0,Ne=[],ze=[],Je=!1,Qe=Ie;p.__private__.setCustomOutputDestination=function(m){Je=!0,Qe=m};var gt=function(m){Je||(Qe=m)};p.__private__.resetCustomOutputDestination=function(){Je=!1,Qe=Ie};var W=p.__private__.out=function(m){return m=m.toString(),Ee+=m.length+1,Qe.push(m),Qe},Ye=p.__private__.write=function(m){return W(arguments.length===1?m.toString():Array.prototype.join.call(arguments," "))},Zt=p.__private__.getArrayBuffer=function(m){for(var M=m.length,G=new ArrayBuffer(M),ne=new Uint8Array(G);M--;)ne[M]=m.charCodeAt(M);return G},St=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return St};var je=n.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(m){return je=Z===X?m/Ht:m,this};var Ct,nt=p.__private__.getFontSize=p.getFontSize=function(){return Z===J?je:je*Ht},It=n.R2L||!1;p.__private__.setR2L=p.setR2L=function(m){return It=m,this},p.__private__.getR2L=p.getR2L=function(){return It};var _t,wn=p.__private__.setZoomMode=function(m){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(m))Ct=m;else if(isNaN(m)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(m)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+m+'" is not recognized.');Ct=m}else Ct=parseInt(m,10)};p.__private__.getZoomMode=function(){return Ct};var ln,Vt=p.__private__.setPageMode=function(m){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(m)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+m+'" is not recognized.');_t=m};p.__private__.getPageMode=function(){return _t};var At=p.__private__.setLayoutMode=function(m){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(m)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+m+'" is not recognized.');ln=m};p.__private__.getLayoutMode=function(){return ln},p.__private__.setDisplayMode=p.setDisplayMode=function(m,M,G){return wn(m),At(M),Vt(G),this};var Mt={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(m){if(Object.keys(Mt).indexOf(m)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Mt[m]},p.__private__.getDocumentProperties=function(){return Mt},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(m){for(var M in Mt)Mt.hasOwnProperty(M)&&m[M]&&(Mt[M]=m[M]);return this},p.__private__.setDocumentProperty=function(m,M){if(Object.keys(Mt).indexOf(m)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Mt[m]=M};var ot,Ht,ft,pr,un,tn={},nn={},Un=[],Et={},zn={},Dt={},zt={},Yn=null,$t=0,xt=[],bn=new v8(p),Zi=n.hotfixes||[],ni={},vo={},jo=[],wt=function m(M,G,ne,le,Ae,Le){if(!(this instanceof m))return new m(M,G,ne,le,Ae,Le);isNaN(M)&&(M=1),isNaN(G)&&(G=0),isNaN(ne)&&(ne=0),isNaN(le)&&(le=1),isNaN(Ae)&&(Ae=0),isNaN(Le)&&(Le=0),this._matrix=[M,G,ne,le,Ae,Le]};Object.defineProperty(wt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(m){this._matrix[0]=m}}),Object.defineProperty(wt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(m){this._matrix[1]=m}}),Object.defineProperty(wt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(m){this._matrix[2]=m}}),Object.defineProperty(wt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(m){this._matrix[3]=m}}),Object.defineProperty(wt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(m){this._matrix[4]=m}}),Object.defineProperty(wt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(m){this._matrix[5]=m}}),Object.defineProperty(wt.prototype,"a",{get:function(){return this._matrix[0]},set:function(m){this._matrix[0]=m}}),Object.defineProperty(wt.prototype,"b",{get:function(){return this._matrix[1]},set:function(m){this._matrix[1]=m}}),Object.defineProperty(wt.prototype,"c",{get:function(){return this._matrix[2]},set:function(m){this._matrix[2]=m}}),Object.defineProperty(wt.prototype,"d",{get:function(){return this._matrix[3]},set:function(m){this._matrix[3]=m}}),Object.defineProperty(wt.prototype,"e",{get:function(){return this._matrix[4]},set:function(m){this._matrix[4]=m}}),Object.defineProperty(wt.prototype,"f",{get:function(){return this._matrix[5]},set:function(m){this._matrix[5]=m}}),Object.defineProperty(wt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(wt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(wt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(wt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),wt.prototype.join=function(m){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(P).join(m)},wt.prototype.multiply=function(m){var M=m.sx*this.sx+m.shy*this.shx,G=m.sx*this.shy+m.shy*this.sy,ne=m.shx*this.sx+m.sy*this.shx,le=m.shx*this.shy+m.sy*this.sy,Ae=m.tx*this.sx+m.ty*this.shx+this.tx,Le=m.tx*this.shy+m.ty*this.sy+this.ty;return new wt(M,G,ne,le,Ae,Le)},wt.prototype.decompose=function(){var m=this.sx,M=this.shy,G=this.shx,ne=this.sy,le=this.tx,Ae=this.ty,Le=Math.sqrt(m*m+M*M),rt=(m/=Le)*G+(M/=Le)*ne;G-=m*rt,ne-=M*rt;var at=Math.sqrt(G*G+ne*ne);return rt/=at,m*(ne/=at)<M*(G/=at)&&(m=-m,M=-M,rt=-rt,Le=-Le),{scale:new wt(Le,0,0,at,0,0),translate:new wt(1,0,0,1,le,Ae),rotate:new wt(m,M,-M,m,0,0),skew:new wt(1,0,rt,1,0,0)}},wt.prototype.toString=function(m){return this.join(" ")},wt.prototype.inversed=function(){var m=this.sx,M=this.shy,G=this.shx,ne=this.sy,le=this.tx,Ae=this.ty,Le=1/(m*ne-M*G),rt=ne*Le,at=-M*Le,kt=-G*Le,jt=m*Le;return new wt(rt,at,kt,jt,-rt*le-kt*Ae,-at*le-jt*Ae)},wt.prototype.applyToPoint=function(m){var M=m.x*this.sx+m.y*this.shx+this.tx,G=m.x*this.shy+m.y*this.sy+this.ty;return new Gs(M,G)},wt.prototype.applyToRectangle=function(m){var M=this.applyToPoint(m),G=this.applyToPoint(new Gs(m.x+m.w,m.y+m.h));return new El(M.x,M.y,G.x-M.x,G.y-M.y)},wt.prototype.clone=function(){var m=this.sx,M=this.shy,G=this.shx,ne=this.sy,le=this.tx,Ae=this.ty;return new wt(m,M,G,ne,le,Ae)},p.Matrix=wt;var vs=p.matrixMult=function(m,M){return M.multiply(m)},rr=new wt(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=rr;var Ji=function(m,M){if(!zn[m]){var G=(M instanceof mh?"Sh":"P")+(Object.keys(Et).length+1).toString(10);M.id=G,zn[m]=G,Et[G]=M,bn.publish("addPattern",M)}};p.ShadingPattern=mh,p.TilingPattern=Cp,p.addShadingPattern=function(m,M){return D("addShadingPattern()"),Ji(m,M),this},p.beginTilingPattern=function(m){D("beginTilingPattern()"),Cl(m.boundingBox[0],m.boundingBox[1],m.boundingBox[2]-m.boundingBox[0],m.boundingBox[3]-m.boundingBox[1],m.matrix)},p.endTilingPattern=function(m,M){D("endTilingPattern()"),M.stream=ze[Q].join(`
`),Ji(m,M),bn.publish("endTilingPattern",M),jo.pop().restore()};var ui,qn=p.__private__.newObject=function(){var m=qr();return ri(m,!0),m},qr=p.__private__.newObjectDeferred=function(){return ce++,de[ce]=function(){return Ee},ce},ri=function(m,M){return M=typeof M=="boolean"&&M,de[m]=Ee,M&&W(m+" 0 obj"),m},yo=p.__private__.newAdditionalObject=function(){var m={objId:qr(),content:""};return Ne.push(m),m},Sa=qr(),Bo=qr(),Xi=p.__private__.decodeColorString=function(m){var M=m.split(" ");if(M.length!==2||M[1]!=="g"&&M[1]!=="G")M.length!==5||M[4]!=="k"&&M[4]!=="K"||(M=[(1-M[0])*(1-M[3]),(1-M[1])*(1-M[3]),(1-M[2])*(1-M[3]),"r"]);else{var G=parseFloat(M[0]);M=[G,G,G,"r"]}for(var ne="#",le=0;le<3;le++)ne+=("0"+Math.floor(255*parseFloat(M[le])).toString(16)).slice(-2);return ne},_o=p.__private__.encodeColorString=function(m){var M;typeof m=="string"&&(m={ch1:m});var G=m.ch1,ne=m.ch2,le=m.ch3,Ae=m.ch4,Le=m.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof G=="string"&&G.charAt(0)!=="#"){var rt=new F8(G);if(rt.ok)G=rt.toHex();else if(!/^\d*\.?\d*$/.test(G))throw new Error('Invalid color "'+G+'" passed to jsPDF.encodeColorString.')}if(typeof G=="string"&&/^#[0-9A-Fa-f]{3}$/.test(G)&&(G="#"+G[1]+G[1]+G[2]+G[2]+G[3]+G[3]),typeof G=="string"&&/^#[0-9A-Fa-f]{6}$/.test(G)){var at=parseInt(G.substr(1),16);G=at>>16&255,ne=at>>8&255,le=255&at}if(ne===void 0||Ae===void 0&&G===ne&&ne===le)M=typeof G=="string"?G+" "+Le[0]:m.precision===2?E(G/255)+" "+Le[0]:T(G/255)+" "+Le[0];else if(Ae===void 0||Wn(Ae)==="object"){if(Ae&&!isNaN(Ae.a)&&Ae.a===0)return["1.","1.","1.",Le[1]].join(" ");M=typeof G=="string"?[G,ne,le,Le[1]].join(" "):m.precision===2?[E(G/255),E(ne/255),E(le/255),Le[1]].join(" "):[T(G/255),T(ne/255),T(le/255),Le[1]].join(" ")}else M=typeof G=="string"?[G,ne,le,Ae,Le[2]].join(" "):m.precision===2?[E(G),E(ne),E(le),E(Ae),Le[2]].join(" "):[T(G),T(ne),T(le),T(Ae),Le[2]].join(" ");return M},eo=p.__private__.getFilters=function(){return s},Ii=p.__private__.putStream=function(m){var M=(m=m||{}).data||"",G=m.filters||eo(),ne=m.alreadyAppliedFilters||[],le=m.addLength1||!1,Ae=M.length,Le=m.objectId,rt=function(Er){return Er};if(u!==null&&Le===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(rt=Nr.encryptor(Le,0));var at={};G===!0&&(G=["FlateEncode"]);var kt=m.additionalKeyValues||[],jt=(at=mt.API.processDataByFilters!==void 0?mt.API.processDataByFilters(M,G):{data:M,reverseChain:[]}).reverseChain+(Array.isArray(ne)?ne.join(" "):ne.toString());if(at.data.length!==0&&(kt.push({key:"Length",value:at.data.length}),le===!0&&kt.push({key:"Length1",value:Ae})),jt.length!=0)if(jt.split("/").length-1==1)kt.push({key:"Filter",value:jt});else{kt.push({key:"Filter",value:"["+jt+"]"});for(var pn=0;pn<kt.length;pn+=1)if(kt[pn].key==="DecodeParms"){for(var Xn=[],$n=0;$n<at.reverseChain.split("/").length-1;$n+=1)Xn.push("null");Xn.push(kt[pn].value),kt[pn].value="["+Xn.join(" ")+"]"}}W("<<");for(var Ln=0;Ln<kt.length;Ln++)W("/"+kt[Ln].key+" "+kt[Ln].value);W(">>"),at.data.length!==0&&(W("stream"),W(rt(at.data)),W("endstream"))},Ri=p.__private__.putPage=function(m){var M=m.number,G=m.data,ne=m.objId,le=m.contentsObjId;ri(ne,!0),W("<</Type /Page"),W("/Parent "+m.rootDictionaryObjId+" 0 R"),W("/Resources "+m.resourceDictionaryObjId+" 0 R"),W("/MediaBox ["+parseFloat(P(m.mediaBox.bottomLeftX))+" "+parseFloat(P(m.mediaBox.bottomLeftY))+" "+P(m.mediaBox.topRightX)+" "+P(m.mediaBox.topRightY)+"]"),m.cropBox!==null&&W("/CropBox ["+P(m.cropBox.bottomLeftX)+" "+P(m.cropBox.bottomLeftY)+" "+P(m.cropBox.topRightX)+" "+P(m.cropBox.topRightY)+"]"),m.bleedBox!==null&&W("/BleedBox ["+P(m.bleedBox.bottomLeftX)+" "+P(m.bleedBox.bottomLeftY)+" "+P(m.bleedBox.topRightX)+" "+P(m.bleedBox.topRightY)+"]"),m.trimBox!==null&&W("/TrimBox ["+P(m.trimBox.bottomLeftX)+" "+P(m.trimBox.bottomLeftY)+" "+P(m.trimBox.topRightX)+" "+P(m.trimBox.topRightY)+"]"),m.artBox!==null&&W("/ArtBox ["+P(m.artBox.bottomLeftX)+" "+P(m.artBox.bottomLeftY)+" "+P(m.artBox.topRightX)+" "+P(m.artBox.topRightY)+"]"),typeof m.userUnit=="number"&&m.userUnit!==1&&W("/UserUnit "+m.userUnit),bn.publish("putPage",{objId:ne,pageContext:xt[M],pageNumber:M,page:G}),W("/Contents "+le+" 0 R"),W(">>"),W("endobj");var Ae=G.join(`
`);return Z===X&&(Ae+=`
Q`),ri(le,!0),Ii({data:Ae,filters:eo(),objectId:le}),W("endobj"),ne},Uo=p.__private__.putPages=function(){var m,M,G=[];for(m=1;m<=$t;m++)xt[m].objId=qr(),xt[m].contentsObjId=qr();for(m=1;m<=$t;m++)G.push(Ri({number:m,data:ze[m],objId:xt[m].objId,contentsObjId:xt[m].contentsObjId,mediaBox:xt[m].mediaBox,cropBox:xt[m].cropBox,bleedBox:xt[m].bleedBox,trimBox:xt[m].trimBox,artBox:xt[m].artBox,userUnit:xt[m].userUnit,rootDictionaryObjId:Sa,resourceDictionaryObjId:Bo}));ri(Sa,!0),W("<</Type /Pages");var ne="/Kids [";for(M=0;M<$t;M++)ne+=G[M]+" 0 R ";W(ne+"]"),W("/Count "+$t),W(">>"),W("endobj"),bn.publish("postPutPages")},Da=function(m){bn.publish("putFont",{font:m,out:W,newObject:qn,putStream:Ii}),m.isAlreadyPutted!==!0&&(m.objectNumber=qn(),W("<<"),W("/Type /Font"),W("/BaseFont /"+Ep(m.postScriptName)),W("/Subtype /Type1"),typeof m.encoding=="string"&&W("/Encoding /"+m.encoding),W("/FirstChar 32"),W("/LastChar 255"),W(">>"),W("endobj"))},Ta=function(m){m.objectNumber=qn();var M=[];M.push({key:"Type",value:"/XObject"}),M.push({key:"Subtype",value:"/Form"}),M.push({key:"BBox",value:"["+[P(m.x),P(m.y),P(m.x+m.width),P(m.y+m.height)].join(" ")+"]"}),M.push({key:"Matrix",value:"["+m.matrix.toString()+"]"});var G=m.pages[1].join(`
`);Ii({data:G,additionalKeyValues:M,objectId:m.objectNumber}),W("endobj")},Aa=function(m,M){M||(M=21);var G=qn(),ne=(function(Le,rt){var at,kt=[],jt=1/(rt-1);for(at=0;at<1;at+=jt)kt.push(at);if(kt.push(1),Le[0].offset!=0){var pn={offset:0,color:Le[0].color};Le.unshift(pn)}if(Le[Le.length-1].offset!=1){var Xn={offset:1,color:Le[Le.length-1].color};Le.push(Xn)}for(var $n="",Ln=0,Er=0;Er<kt.length;Er++){for(at=kt[Er];at>Le[Ln+1].offset;)Ln++;var mr=Le[Ln].offset,Hr=(at-mr)/(Le[Ln+1].offset-mr),Io=Le[Ln].color,ir=Le[Ln+1].color;$n+=re(Math.round((1-Hr)*Io[0]+Hr*ir[0]).toString(16))+re(Math.round((1-Hr)*Io[1]+Hr*ir[1]).toString(16))+re(Math.round((1-Hr)*Io[2]+Hr*ir[2]).toString(16))}return $n.trim()})(m.colors,M),le=[];le.push({key:"FunctionType",value:"0"}),le.push({key:"Domain",value:"[0.0 1.0]"}),le.push({key:"Size",value:"["+M+"]"}),le.push({key:"BitsPerSample",value:"8"}),le.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),le.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ii({data:ne,additionalKeyValues:le,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:G}),W("endobj"),m.objectNumber=qn(),W("<< /ShadingType "+m.type),W("/ColorSpace /DeviceRGB");var Ae="/Coords ["+P(parseFloat(m.coords[0]))+" "+P(parseFloat(m.coords[1]))+" ";m.type===2?Ae+=P(parseFloat(m.coords[2]))+" "+P(parseFloat(m.coords[3])):Ae+=P(parseFloat(m.coords[2]))+" "+P(parseFloat(m.coords[3]))+" "+P(parseFloat(m.coords[4]))+" "+P(parseFloat(m.coords[5])),W(Ae+="]"),m.matrix&&W("/Matrix ["+m.matrix.toString()+"]"),W("/Function "+G+" 0 R"),W("/Extend [true true]"),W(">>"),W("endobj")},_c=function(m,M){var G=qr(),ne=qn();M.push({resourcesOid:G,objectOid:ne}),m.objectNumber=ne;var le=[];le.push({key:"Type",value:"/Pattern"}),le.push({key:"PatternType",value:"1"}),le.push({key:"PaintType",value:"1"}),le.push({key:"TilingType",value:"1"}),le.push({key:"BBox",value:"["+m.boundingBox.map(P).join(" ")+"]"}),le.push({key:"XStep",value:P(m.xStep)}),le.push({key:"YStep",value:P(m.yStep)}),le.push({key:"Resources",value:G+" 0 R"}),m.matrix&&le.push({key:"Matrix",value:"["+m.matrix.toString()+"]"}),Ii({data:m.stream,additionalKeyValues:le,objectId:m.objectNumber}),W("endobj")},_h=function(m){for(var M in m.objectNumber=qn(),W("<<"),m)switch(M){case"opacity":W("/ca "+E(m[M]));break;case"stroke-opacity":W("/CA "+E(m[M]))}W(">>"),W("endobj")},Uu=function(m){ri(m.resourcesOid,!0),W("<<"),W("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var M in W("/Font <<"),tn)tn.hasOwnProperty(M)&&(g===!1||g===!0&&v.hasOwnProperty(M))&&W("/"+M+" "+tn[M].objectNumber+" 0 R");W(">>")})(),(function(){if(Object.keys(Et).length>0){for(var M in W("/Shading <<"),Et)Et.hasOwnProperty(M)&&Et[M]instanceof mh&&Et[M].objectNumber>=0&&W("/"+M+" "+Et[M].objectNumber+" 0 R");bn.publish("putShadingPatternDict"),W(">>")}})(),(function(M){if(Object.keys(Et).length>0){for(var G in W("/Pattern <<"),Et)Et.hasOwnProperty(G)&&Et[G]instanceof p.TilingPattern&&Et[G].objectNumber>=0&&Et[G].objectNumber<M&&W("/"+G+" "+Et[G].objectNumber+" 0 R");bn.publish("putTilingPatternDict"),W(">>")}})(m.objectOid),(function(){if(Object.keys(Dt).length>0){var M;for(M in W("/ExtGState <<"),Dt)Dt.hasOwnProperty(M)&&Dt[M].objectNumber>=0&&W("/"+M+" "+Dt[M].objectNumber+" 0 R");bn.publish("putGStateDict"),W(">>")}})(),(function(){for(var M in W("/XObject <<"),ni)ni.hasOwnProperty(M)&&ni[M].objectNumber>=0&&W("/"+M+" "+ni[M].objectNumber+" 0 R");bn.publish("putXobjectDict"),W(">>")})(),W(">>"),W("endobj")},wc=function(m){nn[m.fontName]=nn[m.fontName]||{},nn[m.fontName][m.fontStyle]=m.id},zu=function(m,M,G,ne,le){var Ae={id:"F"+(Object.keys(tn).length+1).toString(10),postScriptName:m,fontName:M,fontStyle:G,encoding:ne,isStandardFont:le||!1,metadata:{}};return bn.publish("addFont",{font:Ae,instance:this}),tn[Ae.id]=Ae,wc(Ae),Ae.id},Oi=p.__private__.pdfEscape=p.pdfEscape=function(m,M){return(function(G,ne){var le,Ae,Le,rt,at,kt,jt,pn,Xn;if(Le=(ne=ne||{}).sourceEncoding||"Unicode",at=ne.outputEncoding,(ne.autoencode||at)&&tn[ot].metadata&&tn[ot].metadata[Le]&&tn[ot].metadata[Le].encoding&&(rt=tn[ot].metadata[Le].encoding,!at&&tn[ot].encoding&&(at=tn[ot].encoding),!at&&rt.codePages&&(at=rt.codePages[0]),typeof at=="string"&&(at=rt[at]),at)){for(jt=!1,kt=[],le=0,Ae=G.length;le<Ae;le++)(pn=at[G.charCodeAt(le)])?kt.push(String.fromCharCode(pn)):kt.push(G[le]),kt[le].charCodeAt(0)>>8&&(jt=!0);G=kt.join("")}for(le=G.length;jt===void 0&&le!==0;)G.charCodeAt(le-1)>>8&&(jt=!0),le--;if(!jt)return G;for(kt=ne.noBOM?[]:[254,255],le=0,Ae=G.length;le<Ae;le++){if((Xn=(pn=G.charCodeAt(le))>>8)>>8)throw new Error("Character at position "+le+" of string '"+G+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");kt.push(Xn),kt.push(pn-(Xn<<8))}return String.fromCharCode.apply(void 0,kt)})(m,M).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},$s=p.__private__.beginPage=function(m){ze[++$t]=[],xt[$t]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(m[0]),topRightY:Number(m[1])}},wh($t),gt(ze[Q])},ys=function(m,M){var G,ne,le;switch(t=M||t,typeof m=="string"&&(G=R(m.toLowerCase()),Array.isArray(G)&&(ne=G[0],le=G[1])),Array.isArray(m)&&(ne=m[0]*Ht,le=m[1]*Ht),isNaN(ne)&&(ne=i[0],le=i[1]),(ne>14400||le>14400)&&(Jn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ne=Math.min(14400,ne),le=Math.min(14400,le)),i=[ne,le],t.substr(0,1)){case"l":le>ne&&(i=[le,ne]);break;case"p":ne>le&&(i=[le,ne])}$s(i),Ot(Il),W(bs),xc!==0&&W(xc+" J"),Hn!==0&&W(Hn+" j"),bn.publish("addPage",{pageNumber:$t})},bc=function(m){m>0&&m<=$t&&(ze.splice(m,1),xt.splice(m,1),$t--,Q>$t&&(Q=$t),this.setPage(Q))},wh=function(m){m>0&&m<=$t&&(Q=m)},qu=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return ze.length-1},Hu=function(m,M,G){var ne,le=void 0;return G=G||{},m=m!==void 0?m:tn[ot].fontName,M=M!==void 0?M:tn[ot].fontStyle,ne=m.toLowerCase(),nn[ne]!==void 0&&nn[ne][M]!==void 0?le=nn[ne][M]:nn[m]!==void 0&&nn[m][M]!==void 0?le=nn[m][M]:G.disableWarning===!1&&Jn.warn("Unable to look up font label for font '"+m+"', '"+M+"'. Refer to getFontList() for available fonts."),le||G.noFallback||(le=nn.times[M])==null&&(le=nn.times.normal),le},zo=p.__private__.putInfo=function(){var m=qn(),M=function(ne){return ne};for(var G in u!==null&&(M=Nr.encryptor(m,0)),W("<<"),W("/Producer ("+Oi(M("jsPDF "+mt.version))+")"),Mt)Mt.hasOwnProperty(G)&&Mt[G]&&W("/"+G.substr(0,1).toUpperCase()+G.substr(1)+" ("+Oi(M(Mt[G]))+")");W("/CreationDate ("+Oi(M(ve))+")"),W(">>"),W("endobj")},Ma=p.__private__.putCatalog=function(m){var M=(m=m||{}).rootDictionaryObjId||Sa;switch(qn(),W("<<"),W("/Type /Catalog"),W("/Pages "+M+" 0 R"),Ct||(Ct="fullwidth"),Ct){case"fullwidth":W("/OpenAction [3 0 R /FitH null]");break;case"fullheight":W("/OpenAction [3 0 R /FitV null]");break;case"fullpage":W("/OpenAction [3 0 R /Fit]");break;case"original":W("/OpenAction [3 0 R /XYZ null null 1]");break;default:var G=""+Ct;G.substr(G.length-1)==="%"&&(Ct=parseInt(Ct)/100),typeof Ct=="number"&&W("/OpenAction [3 0 R /XYZ null null "+E(Ct)+"]")}switch(ln||(ln="continuous"),ln){case"continuous":W("/PageLayout /OneColumn");break;case"single":W("/PageLayout /SinglePage");break;case"two":case"twoleft":W("/PageLayout /TwoColumnLeft");break;case"tworight":W("/PageLayout /TwoColumnRight")}_t&&W("/PageMode /"+_t),bn.publish("putCatalog"),W(">>"),W("endobj")},$u=p.__private__.putTrailer=function(){W("trailer"),W("<<"),W("/Size "+(ce+1)),W("/Root "+ce+" 0 R"),W("/Info "+(ce-1)+" 0 R"),u!==null&&W("/Encrypt "+Nr.oid+" 0 R"),W("/ID [ <"+Se+"> <"+Se+"> ]"),W(">>")},gr=p.__private__.putHeader=function(){W("%PDF-"+S),W("%\xBA\xDF\xAC\xE0")},Wu=p.__private__.putXRef=function(){var m="0000000000";W("xref"),W("0 "+(ce+1)),W("0000000000 65535 f ");for(var M=1;M<=ce;M++)typeof de[M]=="function"?W((m+de[M]()).slice(-10)+" 00000 n "):de[M]!==void 0?W((m+de[M]).slice(-10)+" 00000 n "):W("0000000000 00000 n ")},_s=p.__private__.buildDocument=function(){var m;ce=0,Ee=0,Ie=[],de=[],Ne=[],Sa=qr(),Bo=qr(),gt(Ie),bn.publish("buildDocument"),gr(),Uo(),(function(){bn.publish("putAdditionalObjects");for(var G=0;G<Ne.length;G++){var ne=Ne[G];ri(ne.objId,!0),W(ne.content),W("endobj")}bn.publish("postPutAdditionalObjects")})(),m=[],(function(){for(var G in tn)tn.hasOwnProperty(G)&&(g===!1||g===!0&&v.hasOwnProperty(G))&&Da(tn[G])})(),(function(){var G;for(G in Dt)Dt.hasOwnProperty(G)&&_h(Dt[G])})(),(function(){for(var G in ni)ni.hasOwnProperty(G)&&Ta(ni[G])})(),(function(G){var ne;for(ne in Et)Et.hasOwnProperty(ne)&&(Et[ne]instanceof mh?Aa(Et[ne]):Et[ne]instanceof Cp&&_c(Et[ne],G))})(m),bn.publish("putResources"),m.forEach(Uu),Uu({resourcesOid:Bo,objectOid:Number.MAX_SAFE_INTEGER}),bn.publish("postPutResources"),u!==null&&(Nr.oid=qn(),W("<<"),W("/Filter /Standard"),W("/V "+Nr.v),W("/R "+Nr.r),W("/U <"+Nr.toHexString(Nr.U)+">"),W("/O <"+Nr.toHexString(Nr.O)+">"),W("/P "+Nr.P),W(">>"),W("endobj")),zo(),Ma();var M=Ee;return Wu(),$u(),W("startxref"),W(""+M),W("%%EOF"),gt(ze[Q]),Ie.join(`
`)},_l=p.__private__.getBlob=function(m){return new Blob([Zt(m)],{type:"application/pdf"})},Gu=p.output=p.__private__.output=(ui=function(m,M){switch(typeof(M=M||{})=="string"?M={filename:M}:M.filename=M.filename||"generated.pdf",m){case void 0:return _s();case"save":p.save(M.filename);break;case"arraybuffer":return Zt(_s());case"blob":return _l(_s());case"bloburi":case"bloburl":if(Ut.URL!==void 0&&typeof Ut.URL.createObjectURL=="function")return Ut.URL&&Ut.URL.createObjectURL(_l(_s()))||void 0;Jn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var G="",ne=_s();try{G=p8(ne)}catch{G=p8(unescape(encodeURIComponent(ne)))}return"data:application/pdf;filename="+M.filename+";base64,"+G;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Ut)==="[object Window]"){var le="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ae=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';M.pdfObjectUrl&&(le=M.pdfObjectUrl,Ae="");var Le='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+le+'"'+Ae+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(M)+");<\/script></body></html>",rt=Ut.open();return rt!==null&&rt.document.write(Le),rt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Ut)==="[object Window]"){var at='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(M.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+M.filename+'" width="500px" height="400px" /></body></html>',kt=Ut.open();if(kt!==null){kt.document.write(at);var jt=this;kt.document.documentElement.querySelector("#pdfViewer").onload=function(){kt.document.title=M.filename,kt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(jt.output("bloburl"))}}return kt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Ut)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var pn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",M)+'"></iframe></body></html>',Xn=Ut.open();if(Xn!==null&&(Xn.document.write(pn),Xn.document.title=M.filename),Xn||typeof safari>"u")return Xn;break;case"datauri":case"dataurl":return Ut.document.location.href=this.output("datauristring",M);default:return null}},ui.foo=function(){try{return ui.apply(this,arguments)}catch(G){var m=G.stack||"";~m.indexOf(" at ")&&(m=m.split(" at ")[1]);var M="Error in function "+m.split(`
`)[0].split("<")[0]+": "+G.message;if(!Ut.console)throw new Error(M);Ut.console.error(M,G),Ut.alert&&alert(M)}},ui.foo.bar=ui,ui.foo),to=function(m){return Array.isArray(Zi)===!0&&Zi.indexOf(m)>-1};switch(r){case"pt":Ht=1;break;case"mm":Ht=72/25.4;break;case"cm":Ht=72/2.54;break;case"in":Ht=72;break;case"px":Ht=to("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ht=12;break;case"ex":Ht=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Ht=r}var Nr=null;Fe(),fe();var Ei=p.__private__.getPageInfo=p.getPageInfo=function(m){if(isNaN(m)||m%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:xt[m].objId,pageNumber:m,pageContext:xt[m]}},wo=p.__private__.getPageInfoByObjId=function(m){if(isNaN(m)||m%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var M in xt)if(xt[M].objId===m)break;return Ei(M)},wl=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:xt[Q].objId,pageNumber:Q,pageContext:xt[Q]}};p.addPage=function(){return ys.apply(this,arguments),this},p.setPage=function(){return wh.apply(this,arguments),gt.call(this,ze[Q]),this},p.insertPage=function(m){return this.addPage(),this.movePage(Q,m),this},p.movePage=function(m,M){var G,ne;if(m>M){G=ze[m],ne=xt[m];for(var le=m;le>M;le--)ze[le]=ze[le-1],xt[le]=xt[le-1];ze[M]=G,xt[M]=ne,this.setPage(M)}else if(m<M){G=ze[m],ne=xt[m];for(var Ae=m;Ae<M;Ae++)ze[Ae]=ze[Ae+1],xt[Ae]=xt[Ae+1];ze[M]=G,xt[M]=ne,this.setPage(M)}return this},p.deletePage=function(){return bc.apply(this,arguments),this},p.__private__.text=p.text=function(m,M,G,ne,le){var Ae,Le,rt,at,kt,jt,pn,Xn,$n,Ln=(ne=ne||{}).scope||this;if(typeof m=="number"&&typeof M=="number"&&(typeof G=="string"||Array.isArray(G))){var Er=G;G=M,M=m,m=Er}if(arguments[3]instanceof wt==0?(rt=arguments[4],at=arguments[5],Wn(pn=arguments[3])==="object"&&pn!==null||(typeof rt=="string"&&(at=rt,rt=null),typeof pn=="string"&&(at=pn,pn=null),typeof pn=="number"&&(rt=pn,pn=null),ne={flags:pn,angle:rt,align:at})):(D("The transform parameter of text() with a Matrix value"),$n=le),isNaN(M)||isNaN(G)||m==null)throw new Error("Invalid arguments passed to jsPDF.text");if(m.length===0)return Ln;var mr,Hr="",Io=typeof ne.lineHeightFactor=="number"?ne.lineHeightFactor:Li,ir=Ln.internal.scaleFactor;function Es(Nn){return Nn=Nn.split("	").join(Array(ne.TabLen||9).join(" ")),Oi(Nn,pn)}function Sl(Nn){for(var Qn,Rr=Nn.concat(),ii=[],Mc=Rr.length;Mc--;)typeof(Qn=Rr.shift())=="string"?ii.push(Qn):Array.isArray(Nn)&&(Qn.length===1||Qn[1]===void 0&&Qn[2]===void 0)?ii.push(Qn[0]):ii.push([Qn[0],Qn[1],Qn[2]]);return ii}function Wo(Nn,Qn){var Rr;if(typeof Nn=="string")Rr=Qn(Nn)[0];else if(Array.isArray(Nn)){for(var ii,Mc,zp=Nn.concat(),Dh=[],F0=zp.length;F0--;)typeof(ii=zp.shift())=="string"?Dh.push(Qn(ii)[0]):Array.isArray(ii)&&typeof ii[0]=="string"&&(Mc=Qn(ii[0],ii[1],ii[2]),Dh.push([Mc[0],Mc[1],Mc[2]]));Rr=Dh}return Rr}var h=!1,_=!0;if(typeof m=="string")h=!0;else if(Array.isArray(m)){var x=m.concat();Le=[];for(var z,ae=x.length;ae--;)(typeof(z=x.shift())!="string"||Array.isArray(z)&&typeof z[0]!="string")&&(_=!1);h=_}if(h===!1)throw new Error('Type of text must be string or Array. "'+m+'" is not recognized.');typeof m=="string"&&(m=m.match(/[\r?\n]/)?m.split(/\r\n|\r|\n/g):[m]);var ye=je/Ln.internal.scaleFactor,We=ye*(Io-1);switch(ne.baseline){case"bottom":G-=We;break;case"top":G+=ye-We;break;case"hanging":G+=ye-2*We;break;case"middle":G+=ye/2-We}if((jt=ne.maxWidth||0)>0&&(typeof m=="string"?m=Ln.splitTextToSize(m,jt):Object.prototype.toString.call(m)==="[object Array]"&&(m=m.reduce(function(Nn,Qn){return Nn.concat(Ln.splitTextToSize(Qn,jt))},[]))),Ae={text:m,x:M,y:G,options:ne,mutex:{pdfEscape:Oi,activeFontKey:ot,fonts:tn,activeFontSize:je}},bn.publish("preProcessText",Ae),m=Ae.text,rt=(ne=Ae.options).angle,$n instanceof wt==0&&rt&&typeof rt=="number"){rt*=Math.PI/180,ne.rotationDirection===0&&(rt=-rt),Z===X&&(rt=-rt);var xn=Math.cos(rt),vr=Math.sin(rt);$n=new wt(xn,vr,-vr,xn,0,0)}else rt&&rt instanceof wt&&($n=rt);Z!==X||$n||($n=rr),(kt=ne.charSpace||no)!==void 0&&(Hr+=P(A(kt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Xn=ne.horizontalScale)!==void 0&&(Hr+=P(100*Xn)+` Tz
`),ne.lang;var Lt=-1,er=ne.renderingMode!==void 0?ne.renderingMode:ne.stroke,yr=Ln.internal.getCurrentPageInfo().pageContext;switch(er){case 0:case!1:case"fill":Lt=0;break;case 1:case!0:case"stroke":Lt=1;break;case 2:case"fillThenStroke":Lt=2;break;case 3:case"invisible":Lt=3;break;case 4:case"fillAndAddForClipping":Lt=4;break;case 5:case"strokeAndAddPathForClipping":Lt=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Lt=6;break;case 7:case"addToPathForClipping":Lt=7}var Qs=yr.usedRenderingMode!==void 0?yr.usedRenderingMode:-1;Lt!==-1?Hr+=Lt+` Tr
`:Qs!==-1&&(Hr+=`0 Tr
`),Lt!==-1&&(yr.usedRenderingMode=Lt),at=ne.align||"left";var ar,Cs=je*Io,Tc=Ln.internal.pageSize.getWidth(),Lp=tn[ot];kt=ne.charSpace||no,jt=ne.maxWidth||0,pn=Object.assign({autoencode:!0,noBOM:!0},ne.flags);var Dl=[],Zu=function(Nn){return Ln.getStringUnitWidth(Nn,{font:Lp,charSpace:kt,fontSize:je,doKerning:!1})*je/ir};if(Object.prototype.toString.call(m)==="[object Array]"){var Go;Le=Sl(m),at!=="left"&&(ar=Le.map(Zu));var Ko,Tl=0;if(at==="right"){M-=ar[0],m=[],ae=Le.length;for(var Ac=0;Ac<ae;Ac++)Ac===0?(Ko=Ws(M),Go=di(G)):(Ko=A(Tl-ar[Ac]),Go=-Cs),m.push([Le[Ac],Ko,Go]),Tl=ar[Ac]}else if(at==="center"){M-=ar[0]/2,m=[],ae=Le.length;for(var Al=0;Al<ae;Al++)Al===0?(Ko=Ws(M),Go=di(G)):(Ko=A((Tl-ar[Al])/2),Go=-Cs),m.push([Le[Al],Ko,Go]),Tl=ar[Al]}else if(at==="left"){m=[],ae=Le.length;for(var Fp=0;Fp<ae;Fp++)m.push(Le[Fp])}else if(at==="justify"&&Lp.encoding==="Identity-H"){m=[],ae=Le.length,jt=jt!==0?jt:Tc;for(var Sh=0,kr=0;kr<ae;kr++)if(Go=kr===0?di(G):-Cs,Ko=kr===0?Ws(M):Sh,kr<ae-1){var L0=A((jt-ar[kr])/(Le[kr].split(" ").length-1)),Ra=Le[kr].split(" ");m.push([Ra[0]+" ",Ko,Go]),Sh=0;for(var Oa=1;Oa<Ra.length;Oa++){var Vp=(Zu(Ra[Oa-1]+" "+Ra[Oa])-Zu(Ra[Oa]))*ir+L0;Oa==Ra.length-1?m.push([Ra[Oa],Vp,0]):m.push([Ra[Oa]+" ",Vp,0]),Sh-=Vp}}else m.push([Le[kr],Ko,Go]);m.push(["",Sh,0])}else{if(at!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(m=[],ae=Le.length,jt=jt!==0?jt:Tc,kr=0;kr<ae;kr++){Go=kr===0?di(G):-Cs,Ko=kr===0?Ws(M):0;var jp=Le[kr].split(" ").length-1,Bp=jp>0?(jt-ar[kr])/jp:0;kr<ae-1?Dl.push(P(A(Bp))):Dl.push(0),m.push([Le[kr],Ko,Go])}}}(typeof ne.R2L=="boolean"?ne.R2L:It)===!0&&(m=Wo(m,function(Nn,Qn,Rr){return[Nn.split("").reverse().join(""),Qn,Rr]})),Ae={text:m,x:M,y:G,options:ne,mutex:{pdfEscape:Oi,activeFontKey:ot,fonts:tn,activeFontSize:je}},bn.publish("postProcessText",Ae),m=Ae.text,mr=Ae.mutex.isHex||!1;var Up=tn[ot].encoding;Up!=="WinAnsiEncoding"&&Up!=="StandardEncoding"||(m=Wo(m,function(Nn,Qn,Rr){return[Es(Nn),Qn,Rr]})),Le=Sl(m),m=[];for(var Ml,Pl,Nl,Ju=Array.isArray(Le[0])?1:0,kl="",Xu=function(Nn,Qn,Rr){var ii="";return Rr instanceof wt?(Rr=typeof ne.angle=="number"?vs(Rr,new wt(1,0,0,1,Nn,Qn)):vs(new wt(1,0,0,1,Nn,Qn),Rr),Z===X&&(Rr=vs(new wt(1,0,0,-1,0,0),Rr)),ii=Rr.join(" ")+` Tm
`):ii=P(Nn)+" "+P(Qn)+` Td
`,ii},xs=0;xs<Le.length;xs++){switch(kl="",Ju){case 1:Nl=(mr?"<":"(")+Le[xs][0]+(mr?">":")"),Ml=parseFloat(Le[xs][1]),Pl=parseFloat(Le[xs][2]);break;case 0:Nl=(mr?"<":"(")+Le[xs]+(mr?">":")"),Ml=Ws(M),Pl=di(G)}Dl!==void 0&&Dl[xs]!==void 0&&(kl=Dl[xs]+` Tw
`),xs===0?m.push(kl+Xu(Ml,Pl,$n)+Nl):Ju===0?m.push(kl+Nl):Ju===1&&m.push(kl+Xu(Ml,Pl,$n)+Nl)}m=Ju===0?m.join(` Tj
T* `):m.join(` Tj
`),m+=` Tj
`;var La=`BT
/`;return La+=ot+" "+je+` Tf
`,La+=P(je*Io)+` TL
`,La+=ka+`
`,La+=Hr,La+=m,W(La+="ET"),v[ot]=!0,Ln};var bl=p.__private__.clip=p.clip=function(m){return W(m==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return bl("evenodd")},p.__private__.discardPath=p.discardPath=function(){return W("n"),this};var qo=p.__private__.isValidStyle=function(m){var M=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(m)!==-1&&(M=!0),M};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(m){return qo(m)&&(l=m),this};var Pn=p.__private__.getStyle=p.getStyle=function(m){var M=l;switch(m){case"D":case"S":M="S";break;case"F":M="f";break;case"FD":case"DF":M="B";break;case"f":case"f*":case"B":case"B*":M=m}return M},Ic=p.close=function(){return W("h"),this};p.stroke=function(){return W("S"),this},p.fill=function(m){return ws("f",m),this},p.fillEvenOdd=function(m){return ws("f*",m),this},p.fillStroke=function(m){return ws("B",m),this},p.fillStrokeEvenOdd=function(m){return ws("B*",m),this};var ws=function(m,M){Wn(M)==="object"?bh(M,m):W(m)},Ho=function(m){m===null||Z===X&&m===void 0||(m=Pn(m),W(m))};function Mp(m,M,G,ne,le){var Ae=new Cp(M||this.boundingBox,G||this.xStep,ne||this.yStep,this.gState,le||this.matrix);Ae.stream=this.stream;var Le=m+"$$"+this.cloneIndex+++"$$";return Ji(Le,Ae),Ae}var bh=function(m,M){var G=zn[m.key],ne=Et[G];if(ne instanceof mh)W("q"),W(Pp(M)),ne.gState&&p.setGState(ne.gState),W(m.matrix.toString()+" cm"),W("/"+G+" sh"),W("Q");else if(ne instanceof Cp){var le=new wt(1,0,0,-1,0,Ys());m.matrix&&(le=le.multiply(m.matrix||rr),G=Mp.call(ne,m.key,m.boundingBox,m.xStep,m.yStep,le).id),W("q"),W("/Pattern cs"),W("/"+G+" scn"),ne.gState&&p.setGState(ne.gState),W(M),W("Q")}},Pp=function(m){switch(m){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Ku=p.moveTo=function(m,M){return W(P(A(m))+" "+P(te(M))+" m"),this},Ih=p.lineTo=function(m,M){return W(P(A(m))+" "+P(te(M))+" l"),this},$o=p.curveTo=function(m,M,G,ne,le,Ae){return W([P(A(m)),P(te(M)),P(A(G)),P(te(ne)),P(A(le)),P(te(Ae)),"c"].join(" ")),this};p.__private__.line=p.line=function(m,M,G,ne,le){if(isNaN(m)||isNaN(M)||isNaN(G)||isNaN(ne)||!qo(le))throw new Error("Invalid arguments passed to jsPDF.line");return Z===J?this.lines([[G-m,ne-M]],m,M,[1,1],le||"S"):this.lines([[G-m,ne-M]],m,M,[1,1]).stroke()},p.__private__.lines=p.lines=function(m,M,G,ne,le,Ae){var Le,rt,at,kt,jt,pn,Xn,$n,Ln,Er,mr,Hr;if(typeof m=="number"&&(Hr=G,G=M,M=m,m=Hr),ne=ne||[1,1],Ae=Ae||!1,isNaN(M)||isNaN(G)||!Array.isArray(m)||!Array.isArray(ne)||!qo(le)||typeof Ae!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ku(M,G),Le=ne[0],rt=ne[1],kt=m.length,Er=M,mr=G,at=0;at<kt;at++)(jt=m[at]).length===2?(Er=jt[0]*Le+Er,mr=jt[1]*rt+mr,Ih(Er,mr)):(pn=jt[0]*Le+Er,Xn=jt[1]*rt+mr,$n=jt[2]*Le+Er,Ln=jt[3]*rt+mr,Er=jt[4]*Le+Er,mr=jt[5]*rt+mr,$o(pn,Xn,$n,Ln,Er,mr));return Ae&&Ic(),Ho(le),this},p.path=function(m){for(var M=0;M<m.length;M++){var G=m[M],ne=G.c;switch(G.op){case"m":Ku(ne[0],ne[1]);break;case"l":Ih(ne[0],ne[1]);break;case"c":$o.apply(this,ne);break;case"h":Ic()}}return this},p.__private__.rect=p.rect=function(m,M,G,ne,le){if(isNaN(m)||isNaN(M)||isNaN(G)||isNaN(ne)||!qo(le))throw new Error("Invalid arguments passed to jsPDF.rect");return Z===J&&(ne=-ne),W([P(A(m)),P(te(M)),P(A(G)),P(A(ne)),"re"].join(" ")),Ho(le),this},p.__private__.triangle=p.triangle=function(m,M,G,ne,le,Ae,Le){if(isNaN(m)||isNaN(M)||isNaN(G)||isNaN(ne)||isNaN(le)||isNaN(Ae)||!qo(Le))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[G-m,ne-M],[le-G,Ae-ne],[m-le,M-Ae]],m,M,[1,1],Le,!0),this},p.__private__.roundedRect=p.roundedRect=function(m,M,G,ne,le,Ae,Le){if(isNaN(m)||isNaN(M)||isNaN(G)||isNaN(ne)||isNaN(le)||isNaN(Ae)||!qo(Le))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var rt=4/3*(Math.SQRT2-1);return le=Math.min(le,.5*G),Ae=Math.min(Ae,.5*ne),this.lines([[G-2*le,0],[le*rt,0,le,Ae-Ae*rt,le,Ae],[0,ne-2*Ae],[0,Ae*rt,-le*rt,Ae,-le,Ae],[2*le-G,0],[-le*rt,0,-le,-Ae*rt,-le,-Ae],[0,2*Ae-ne],[0,-Ae*rt,le*rt,-Ae,le,-Ae]],m+le,M,[1,1],Le,!0),this},p.__private__.ellipse=p.ellipse=function(m,M,G,ne,le){if(isNaN(m)||isNaN(M)||isNaN(G)||isNaN(ne)||!qo(le))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ae=4/3*(Math.SQRT2-1)*G,Le=4/3*(Math.SQRT2-1)*ne;return Ku(m+G,M),$o(m+G,M-Le,m+Ae,M-ne,m,M-ne),$o(m-Ae,M-ne,m-G,M-Le,m-G,M),$o(m-G,M+Le,m-Ae,M+ne,m,M+ne),$o(m+Ae,M+ne,m+G,M+Le,m+G,M),Ho(le),this},p.__private__.circle=p.circle=function(m,M,G,ne){if(isNaN(m)||isNaN(M)||isNaN(G)||!qo(ne))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(m,M,G,G,ne)},p.setFont=function(m,M,G){return G&&(M=$(M,G)),ot=Hu(m,M,{disableWarning:!1}),this};var Ec=p.__private__.getFont=p.getFont=function(){return tn[Hu.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var m,M,G={};for(m in nn)if(nn.hasOwnProperty(m))for(M in G[m]=[],nn[m])nn[m].hasOwnProperty(M)&&G[m].push(M);return G},p.addFont=function(m,M,G,ne,le){var Ae=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ae.indexOf(arguments[3])!==-1?le=arguments[3]:arguments[3]&&Ae.indexOf(arguments[3])==-1&&(G=$(G,ne)),zu.call(this,m,M,G,le=le||"Identity-H")};var Li,Il=n.lineWidth||.200025,Eh=p.__private__.getLineWidth=p.getLineWidth=function(){return Il},Ot=p.__private__.setLineWidth=p.setLineWidth=function(m){return Il=m,W(P(A(m))+" w"),this};p.__private__.setLineDash=mt.API.setLineDash=mt.API.setLineDashPattern=function(m,M){if(m=m||[],M=M||0,isNaN(M)||!Array.isArray(m))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return m=m.map(function(G){return P(A(G))}).join(" "),M=P(A(M)),W("["+m+"] "+M+" d"),this};var Pa=p.__private__.getLineHeight=p.getLineHeight=function(){return je*Li};p.__private__.getLineHeight=p.getLineHeight=function(){return je*Li};var Np=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(m){return typeof(m=m||1.15)=="number"&&(Li=m),this},kp=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return Li};Np(n.lineHeight);var Ws=p.__private__.getHorizontalCoordinate=function(m){return A(m)},di=p.__private__.getVerticalCoordinate=function(m){return Z===X?m:xt[Q].mediaBox.topRightY-xt[Q].mediaBox.bottomLeftY-A(m)},Rp=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(m){return P(Ws(m))},Op=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(m){return P(di(m))},bs=n.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return Xi(bs)},p.__private__.setStrokeColor=p.setDrawColor=function(m,M,G,ne){return bs=_o({ch1:m,ch2:M,ch3:G,ch4:ne,pdfColorType:"draw",precision:2}),W(bs),this};var Na=n.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return Xi(Na)},p.__private__.setFillColor=p.setFillColor=function(m,M,G,ne){return Na=_o({ch1:m,ch2:M,ch3:G,ch4:ne,pdfColorType:"fill",precision:2}),W(Na),this};var ka=n.textColor||"0 g",Cc=p.__private__.getTextColor=p.getTextColor=function(){return Xi(ka)};p.__private__.setTextColor=p.setTextColor=function(m,M,G,ne){return ka=_o({ch1:m,ch2:M,ch3:G,ch4:ne,pdfColorType:"text",precision:3}),this};var no=n.charSpace,Ch=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(no||0)};p.__private__.setCharSpace=p.setCharSpace=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return no=m,this};var xc=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(m){var M=p.CapJoinStyles[m];if(M===void 0)throw new Error("Line cap style of '"+m+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return xc=M,W(M+" J"),this};var Hn=0;p.__private__.setLineJoin=p.setLineJoin=function(m){var M=p.CapJoinStyles[m];if(M===void 0)throw new Error("Line join style of '"+m+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Hn=M,W(M+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(m){if(m=m||0,isNaN(m))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return W(P(A(m))+" M"),this},p.GState=ob,p.setGState=function(m){(m=typeof m=="string"?Dt[zt[m]]:xh(null,m)).equals(Yn)||(W("/"+m.id+" gs"),Yn=m)};var xh=function(m,M){if(!m||!zt[m]){var G=!1;for(var ne in Dt)if(Dt.hasOwnProperty(ne)&&Dt[ne].equals(M)){G=!0;break}if(G)M=Dt[ne];else{var le="GS"+(Object.keys(Dt).length+1).toString(10);Dt[le]=M,M.id=le}return m&&(zt[m]=M.id),bn.publish("addGState",M),M}};p.addGState=function(m,M){return xh(m,M),this},p.saveGraphicsState=function(){return W("q"),Un.push({key:ot,size:je,color:ka}),this},p.restoreGraphicsState=function(){W("Q");var m=Un.pop();return ot=m.key,je=m.size,ka=m.color,Yn=null,this},p.setCurrentTransformationMatrix=function(m){return W(m.toString()+" cm"),this},p.comment=function(m){return W("#"+m),this};var Gs=function(m,M){var G=m||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return G},set:function(Ae){isNaN(Ae)||(G=parseFloat(Ae))}});var ne=M||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ne},set:function(Ae){isNaN(Ae)||(ne=parseFloat(Ae))}});var le="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return le},set:function(Ae){le=Ae.toString()}}),this},El=function(m,M,G,ne){Gs.call(this,m,M),this.type="rect";var le=G||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return le},set:function(Le){isNaN(Le)||(le=parseFloat(Le))}});var Ae=ne||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ae},set:function(Le){isNaN(Le)||(Ae=parseFloat(Le))}}),this},Sc=function(){this.page=$t,this.currentPage=Q,this.pages=ze.slice(0),this.pagesContext=xt.slice(0),this.x=ft,this.y=pr,this.matrix=un,this.width=xl(Q),this.height=Yu(Q),this.outputDestination=Qe,this.id="",this.objectNumber=-1};Sc.prototype.restore=function(){$t=this.page,Q=this.currentPage,xt=this.pagesContext,ze=this.pages,ft=this.x,pr=this.y,un=this.matrix,bo(Q,this.width),Ks(Q,this.height),Qe=this.outputDestination};var Cl=function(m,M,G,ne,le){jo.push(new Sc),$t=Q=0,ze=[],ft=m,pr=M,un=le,$s([G,ne])};for(var Is in p.beginFormObject=function(m,M,G,ne,le){return Cl(m,M,G,ne,le),this},p.endFormObject=function(m){return(function(M){if(vo[M])jo.pop().restore();else{var G=new Sc,ne="Xo"+(Object.keys(ni).length+1).toString(10);G.id=ne,vo[M]=ne,ni[ne]=G,bn.publish("addFormObject",G),jo.pop().restore()}})(m),this},p.doFormObject=function(m,M){var G=ni[vo[m]];return W("q"),W(M.toString()+" cm"),W("/"+G.id+" Do"),W("Q"),this},p.getFormObject=function(m){var M=ni[vo[m]];return{x:M.x,y:M.y,width:M.width,height:M.height,matrix:M.matrix}},p.save=function(m,M){return m=m||"generated.pdf",(M=M||{}).returnPromise=M.returnPromise||!1,M.returnPromise===!1?(gh(_l(_s()),m),typeof gh.unload=="function"&&Ut.setTimeout&&setTimeout(gh.unload,911),this):new Promise(function(G,ne){try{var le=gh(_l(_s()),m);typeof gh.unload=="function"&&Ut.setTimeout&&setTimeout(gh.unload,911),G(le)}catch(Ae){ne(Ae.message)}})},mt.API)mt.API.hasOwnProperty(Is)&&(Is==="events"&&mt.API.events.length?(function(m,M){var G,ne,le;for(le=M.length-1;le!==-1;le--)G=M[le][0],ne=M[le][1],m.subscribe.apply(m,[G].concat(typeof ne=="function"?[ne]:ne))})(bn,mt.API.events):p[Is]=mt.API[Is]);function xl(m){return xt[m].mediaBox.topRightX-xt[m].mediaBox.bottomLeftX}function bo(m,M){xt[m].mediaBox.topRightX=M+xt[m].mediaBox.bottomLeftX}function Yu(m){return xt[m].mediaBox.topRightY-xt[m].mediaBox.bottomLeftY}function Ks(m,M){xt[m].mediaBox.topRightY=M+xt[m].mediaBox.bottomLeftY}var ro=p.getPageWidth=function(m){return xl(m=m||Q)/Ht},Qu=p.setPageWidth=function(m,M){bo(m,M*Ht)},Ys=p.getPageHeight=function(m){return Yu(m=m||Q)/Ht},Dc=p.setPageHeight=function(m,M){Ks(m,M*Ht)};return p.internal={pdfEscape:Oi,getStyle:Pn,getFont:Ec,getFontSize:nt,getCharSpace:Ch,getTextColor:Cc,getLineHeight:Pa,getLineHeightFactor:kp,getLineWidth:Eh,write:Ye,getHorizontalCoordinate:Ws,getVerticalCoordinate:di,getCoordinateString:Rp,getVerticalCoordinateString:Op,collections:{},newObject:qn,newAdditionalObject:yo,newObjectDeferred:qr,newObjectDeferredBegin:ri,getFilters:eo,putStream:Ii,events:bn,scaleFactor:Ht,pageSize:{getWidth:function(){return ro(Q)},setWidth:function(m){Qu(Q,m)},getHeight:function(){return Ys(Q)},setHeight:function(m){Dc(Q,m)}},encryptionOptions:u,encryption:Nr,getEncryptor:function(m){return u!==null?Nr.encryptor(m,0):function(M){return M}},output:Gu,getNumberOfPages:qu,get pages(){return ze},out:W,f2:E,f3:T,getPageInfo:Ei,getPageInfoByObjId:wo,getCurrentPageInfo:wl,getPDFVersion:k,Point:Gs,Rectangle:El,Matrix:wt,hasHotfix:to},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return ro(Q)},set:function(m){Qu(Q,m)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return Ys(Q)},set:function(m){Dc(Q,m)},enumerable:!0,configurable:!0}),(function(m){for(var M=0,G=St.length;M<G;M++){var ne=zu.call(this,m[M][0],m[M][1],m[M][2],St[M][3],!0);g===!1&&(v[ne]=!0);var le=m[M][0].split("-");wc({id:ne,fontName:le[0],fontStyle:le[1]||""})}bn.publish("addFonts",{fonts:tn,dictionary:nn})}).call(p,St),ot="F1",ys(i,t),bn.publish("initialized"),p}Ip.prototype.lsbFirstWord=function(n){return String.fromCharCode(255&n,n>>8&255,n>>16&255,n>>24&255)},Ip.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Ip.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},Ip.prototype.processOwnerPassword=function(n,e){return rA(nA(e).substr(0,5),n)},Ip.prototype.encryptor=function(n,e){var t=nA(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return rA(t,r)}},ob.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||Wn(n)!==Wn(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},mt.API={events:[]},mt.version="3.0.4";var Pr=mt.API,sA=1,yh=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},wp=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Qt=function(n){return n.toFixed(2)},Vu=function(n){return n.toFixed(5)};Pr.__acroform__={};var Vo=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},y8=function(n){return n*sA},mc=function(n){var e=new U8,t=st.internal.getHeight(n)||0,r=st.internal.getWidth(n)||0;return e.BBox=[0,0,Number(Qt(r)),Number(Qt(t))],e},Rne=Pr.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|1<<e},One=Pr.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&~(1<<e)},Lne=Pr.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},Br=Pr.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Lne(n,e-1)},Ur=Pr.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Rne(n,e-1)},zr=Pr.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return One(n,e-1)},Fne=Pr.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=n[0],o=n[1],s=n[2],a=n[3],c={};return c.lowerLeft_X=t(i)||0,c.lowerLeft_Y=r(o+a)||0,c.upperRight_X=t(i+s)||0,c.upperRight_Y=r(o)||0,[Number(Qt(c.lowerLeft_X)),Number(Qt(c.lowerLeft_Y)),Number(Qt(c.upperRight_X)),Number(Qt(c.upperRight_Y))]},Vne=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=iA(n,t),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+i+" "+Qt(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=mc(n);return o.scope=n.scope,o.stream=e.join(`
`),o}},iA=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=n.multiline?i.map(function(E){return E.split(`
`)}):i.map(function(E){return[E]});var o=t,s=st.internal.getHeight(n)||0;s=s<0?-s:s;var a=st.internal.getWidth(n)||0;a=a<0?-a:a;var c=function(E,T,A){if(E+1<i.length){var te=T+" "+i[E+1][0];return Zw(te,n,A).width<=a-4}return!1};o++;e:for(;o>0;){e="",o--;var l,u,g=Zw("3",n,o).height,v=n.multiline?s-o:(s-g)/2,p=v+=2,S=0,k=0,L=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+Zw(e,n,o=12).width+", FieldWidth:"+a+`
`;break}for(var R="",J=0,X=0;X<i.length;X++)if(i.hasOwnProperty(X)){var Z=!1;if(i[X].length!==1&&L!==i[X].length-1){if((g+2)*(J+2)+2>s)continue e;R+=i[X][L],Z=!0,k=X,X--}else{R=(R+=i[X][L]+" ").substr(R.length-1)==" "?R.substr(0,R.length-1):R;var me=parseInt(X),be=c(me,R,o),$=X>=i.length-1;if(be&&!$){R+=" ",L=0;continue}if(be||$){if($)k=me;else if(n.multiline&&(g+2)*(J+2)+2>s)continue e}else{if(!n.multiline||(g+2)*(J+2)+2>s)continue e;k=me}}for(var P="",D=S;D<=k;D++){var U=i[D];if(n.multiline){if(D===k){P+=U[L]+" ",L=(L+1)%U.length;continue}if(D===S){P+=U[U.length-1]+" ";continue}}P+=U[0]+" "}switch(P=P.substr(P.length-1)==" "?P.substr(0,P.length-1):P,u=Zw(P,n,o).width,n.textAlign){case"right":l=a-u-2;break;case"center":l=(a-u)/2;break;default:l=2}e+=Qt(l)+" "+Qt(p)+` Td
`,e+="("+yh(P)+`) Tj
`,e+=-Qt(l)+` 0 Td
`,p=-(o+2),u=0,S=Z?k:k+1,J++,R=""}break}return r.text=e,r.fontSize=o,r},Zw=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},jne={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Bne=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},Une=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(Ca.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(jne)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");sA=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new z8,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var o=r[i];o.objId=void 0,o.hasAnnotation&&Bne(o,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,i){var o=!r;for(var s in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(s)){var a=r[s],c=[],l=a.Rect;if(a.Rect&&(a.Rect=Fne(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=st.createDefaultAppearanceStream(a),Wn(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(c=a.getKeyValueListForStream()),a.Rect=l,a.hasAppearanceStream&&!a.appearanceStreamContent){var u=Vne(a);c.push({key:"AP",value:"<</N "+u+">>"}),i.internal.acroformPlugin.xForms.push(u)}if(a.appearanceStreamContent){var g="";for(var v in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(v)){var p=a.appearanceStreamContent[v];if(g+="/"+v+" ",g+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var s in p)if(p.hasOwnProperty(s)){var S=p[s];typeof S=="function"&&(S=S.call(i,a)),g+="/"+s+" "+S+" ",i.internal.acroformPlugin.xForms.indexOf(S)>=0||i.internal.acroformPlugin.xForms.push(S)}}else typeof(S=p)=="function"&&(S=S.call(i,a)),g+="/"+s+" "+S,i.internal.acroformPlugin.xForms.indexOf(S)>=0||i.internal.acroformPlugin.xForms.push(S);g+=">>"}c.push({key:"AP",value:`<<
`+g+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:a.objId}),i.internal.out("endobj")}o&&(function(k,L){for(var R in k)if(k.hasOwnProperty(R)){var J=R,X=k[R];L.internal.newObjectDeferredBegin(X.objId,!0),Wn(X)==="object"&&typeof X.putStream=="function"&&X.putStream(),delete k[J]}})(i.internal.acroformPlugin.xForms,i)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},B8=Pr.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(s){return s};if(Array.isArray(n)){for(var i="[",o=0;o<n.length;o++)switch(o!==0&&(i+=" "),Wn(n[o])){case"boolean":case"number":case"object":i+=n[o].toString();break;case"string":n[o].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),i+="("+yh(r(n[o].toString()))+")"):i+=n[o].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},ZT=function(n,e,t){var r=function(i){return i};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),"("+yh(r(n))+")"},vc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};vc.prototype.toString=function(){return this.objId+" 0 R"},vc.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},vc.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],i=this[r];i&&(Array.isArray(i)?n.push({key:r,value:B8(i,this.objId,this.scope)}):i instanceof vc?(i.scope=this.scope,n.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&n.push({key:r,value:i}))}return n};var U8=function(){vc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};Vo(U8,vc);var z8=function(){vc.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+yh(t(n))+")"}},set:function(t){n=t}})};Vo(z8,vc);var Ca=function n(){vc.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(R){if(isNaN(R))throw new Error('Invalid value "'+R+'" for attribute F supplied.');e=R}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Br(e,3)},set:function(R){R?this.F=Ur(e,3):this.F=zr(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(R){if(isNaN(R))throw new Error('Invalid value "'+R+'" for attribute Ff supplied.');t=R}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(R){r=R!==void 0?R:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(R){r[0]=R}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(R){r[1]=R}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(R){r[2]=R}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(R){r[3]=R}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(R){switch(R){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=R;break;default:throw new Error('Invalid value "'+R+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof sb)return;o="FieldObject"+n.FieldNum++}var R=function(J){return J};return this.scope&&(R=this.scope.internal.getEncryptor(this.objId)),"("+yh(R(o))+")"},set:function(R){o=R.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(R){o=R}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(R){s=R}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(R){a=R}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(R){c=R}});var l=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return l===void 0?50/sA:l},set:function(R){l=R}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(R){u=R}});var g="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!g||this instanceof sb||this instanceof vh))return ZT(g,this.objId,this.scope)},set:function(R){R=R.toString(),g=R}});var v=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof bi==0?ZT(v,this.objId,this.scope):v},set:function(R){R=R.toString(),v=this instanceof bi==0?R.substr(0,1)==="("?wp(R.substr(1,R.length-2)):wp(R):R}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof bi==1?wp(v.substr(1,v.length-1)):v},set:function(R){R=R.toString(),v=this instanceof bi==1?"/"+R:R}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(R){this.V=R}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof bi==0?ZT(p,this.objId,this.scope):p},set:function(R){R=R.toString(),p=this instanceof bi==0?R.substr(0,1)==="("?wp(R.substr(1,R.length-2)):wp(R):R}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof bi==1?wp(p.substr(1,p.length-1)):p},set:function(R){R=R.toString(),p=this instanceof bi==1?"/"+R:R}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var S,k=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return k},set:function(R){R=!!R,k=R}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(S)return S},set:function(R){S=R}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,1)},set:function(R){R?this.Ff=Ur(this.Ff,1):this.Ff=zr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,2)},set:function(R){R?this.Ff=Ur(this.Ff,2):this.Ff=zr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,3)},set:function(R){R?this.Ff=Ur(this.Ff,3):this.Ff=zr(this.Ff,3)}});var L=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(L!==null)return L},set:function(R){if([0,1,2].indexOf(R)===-1)throw new Error('Invalid value "'+R+'" for attribute Q supplied.');L=R}}),Object.defineProperty(this,"textAlign",{get:function(){var R;switch(L){case 0:default:R="left";break;case 1:R="center";break;case 2:R="right"}return R},configurable:!0,enumerable:!0,set:function(R){switch(R){case"right":case 2:L=2;break;case"center":case 1:L=1;break;default:L=0}}})};Vo(Ca,vc);var xp=function(){Ca.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return B8(e,this.objId,this.scope)},set:function(t){var r,i;i=[],typeof(r=t)=="string"&&(i=(function(o,s,a){a||(a=1);for(var c,l=[];c=s.exec(o);)l.push(c[a]);return l})(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,18)},set:function(t){t?this.Ff=Ur(this.Ff,18):this.Ff=zr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=Ur(this.Ff,19):this.Ff=zr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,20)},set:function(t){t?(this.Ff=Ur(this.Ff,20),e.sort()):this.Ff=zr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,22)},set:function(t){t?this.Ff=Ur(this.Ff,22):this.Ff=zr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,23)},set:function(t){t?this.Ff=Ur(this.Ff,23):this.Ff=zr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,27)},set:function(t){t?this.Ff=Ur(this.Ff,27):this.Ff=zr(this.Ff,27)}}),this.hasAppearanceStream=!1};Vo(xp,Ca);var Sp=function(){xp.call(this),this.fontName="helvetica",this.combo=!1};Vo(Sp,xp);var Dp=function(){Sp.call(this),this.combo=!0};Vo(Dp,Sp);var tb=function(){Dp.call(this),this.edit=!0};Vo(tb,Dp);var bi=function(){Ca.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,15)},set:function(t){t?this.Ff=Ur(this.Ff,15):this.Ff=zr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,16)},set:function(t){t?this.Ff=Ur(this.Ff,16):this.Ff=zr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,17)},set:function(t){t?this.Ff=Ur(this.Ff,17):this.Ff=zr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,26)},set:function(t){t?this.Ff=Ur(this.Ff,26):this.Ff=zr(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(o){return o};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+yh(t(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){Wn(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};Vo(bi,Ca);var nb=function(){bi.call(this),this.pushButton=!0};Vo(nb,bi);var Tp=function(){bi.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};Vo(Tp,bi);var sb=function(){var n,e;Ca.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var o,s=[];for(o in s.push("<<"),r)s.push("/"+o+" ("+yh(i(r[o]))+")");return s.push(">>"),s.join(`
`)},set:function(i){Wn(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=st.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Vo(sb,Ca),Tp.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},Tp.prototype.createOption=function(n){var e=new sb;return e.Parent=this,e.optionName=n,this.Kids.push(e),zne.call(this.scope,e),e};var rb=function(){bi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=st.CheckBox.createAppearanceStream()};Vo(rb,bi);var vh=function(){Ca.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,13)},set:function(e){e?this.Ff=Ur(this.Ff,13):this.Ff=zr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,21)},set:function(e){e?this.Ff=Ur(this.Ff,21):this.Ff=zr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,23)},set:function(e){e?this.Ff=Ur(this.Ff,23):this.Ff=zr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,24)},set:function(e){e?this.Ff=Ur(this.Ff,24):this.Ff=zr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,25)},set:function(e){e?this.Ff=Ur(this.Ff,25):this.Ff=zr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,26)},set:function(e){e?this.Ff=Ur(this.Ff,26):this.Ff=zr(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Vo(vh,Ca);var ib=function(){vh.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,14)},set:function(n){n?this.Ff=Ur(this.Ff,14):this.Ff=zr(this.Ff,14)}}),this.password=!0};Vo(ib,vh);var st={CheckBox:{createAppearanceStream:function(){return{N:{On:st.CheckBox.YesNormal},D:{On:st.CheckBox.YesPushDown,Off:st.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=mc(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),o=iA(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+Qt(st.internal.getWidth(n))+" "+Qt(st.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+Qt(o.fontSize)+" Tf "+i),t.push("BT"),t.push(o.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=mc(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),i=[],o=st.internal.getHeight(n),s=st.internal.getWidth(n),a=iA(n,n.caption);return i.push("1 g"),i.push("0 0 "+Qt(s)+" "+Qt(o)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Qt(s-1)+" "+Qt(o-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+Qt(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=mc(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Qt(st.internal.getWidth(n))+" "+Qt(st.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:st.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=st.RadioButton.Circle.YesNormal,e.D[n]=st.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=mc(n);e.scope=n.scope;var t=[],r=st.internal.getWidth(n)<=st.internal.getHeight(n)?st.internal.getWidth(n)/4:st.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=st.internal.Bezier_C,o=Number((r*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Vu(st.internal.getWidth(n)/2)+" "+Vu(st.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),t.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),t.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),t.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=mc(n);e.scope=n.scope;var t=[],r=st.internal.getWidth(n)<=st.internal.getHeight(n)?st.internal.getWidth(n)/4:st.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*st.internal.Bezier_C).toFixed(5)),s=Number((r*st.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Vu(st.internal.getWidth(n)/2)+" "+Vu(st.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),t.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),t.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),t.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Vu(st.internal.getWidth(n)/2)+" "+Vu(st.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=mc(n);e.scope=n.scope;var t=[],r=st.internal.getWidth(n)<=st.internal.getHeight(n)?st.internal.getWidth(n)/4:st.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*st.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Vu(st.internal.getWidth(n)/2)+" "+Vu(st.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),t.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),t.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),t.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:st.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=st.RadioButton.Cross.YesNormal,e.D[n]=st.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=mc(n);e.scope=n.scope;var t=[],r=st.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+Qt(st.internal.getWidth(n)-2)+" "+Qt(st.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(Qt(r.x1.x)+" "+Qt(r.x1.y)+" m"),t.push(Qt(r.x2.x)+" "+Qt(r.x2.y)+" l"),t.push(Qt(r.x4.x)+" "+Qt(r.x4.y)+" m"),t.push(Qt(r.x3.x)+" "+Qt(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=mc(n);e.scope=n.scope;var t=st.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+Qt(st.internal.getWidth(n))+" "+Qt(st.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Qt(st.internal.getWidth(n)-2)+" "+Qt(st.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(Qt(t.x1.x)+" "+Qt(t.x1.y)+" m"),r.push(Qt(t.x2.x)+" "+Qt(t.x2.y)+" l"),r.push(Qt(t.x4.x)+" "+Qt(t.x4.y)+" m"),r.push(Qt(t.x3.x)+" "+Qt(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=mc(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Qt(st.internal.getWidth(n))+" "+Qt(st.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};st.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=st.internal.getWidth(n),t=st.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},st.internal.getWidth=function(n){var e=0;return Wn(n)==="object"&&(e=y8(n.Rect[2])),e},st.internal.getHeight=function(n){var e=0;return Wn(n)==="object"&&(e=y8(n.Rect[3])),e};var zne=Pr.addField=function(n){if(Une(this,n),!(n instanceof Ca))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};Pr.AcroFormChoiceField=xp,Pr.AcroFormListBox=Sp,Pr.AcroFormComboBox=Dp,Pr.AcroFormEditBox=tb,Pr.AcroFormButton=bi,Pr.AcroFormPushButton=nb,Pr.AcroFormRadioButton=Tp,Pr.AcroFormCheckBox=rb,Pr.AcroFormTextField=vh,Pr.AcroFormPasswordField=ib,Pr.AcroFormAppearance=st,Pr.AcroForm={ChoiceField:xp,ListBox:Sp,ComboBox:Dp,EditBox:tb,Button:bi,PushButton:nb,RadioButton:Tp,CheckBox:rb,TextField:vh,PasswordField:ib,Appearance:st},mt.AcroForm={ChoiceField:xp,ListBox:Sp,ComboBox:Dp,EditBox:tb,Button:bi,PushButton:nb,RadioButton:Tp,CheckBox:rb,TextField:vh,PasswordField:ib,Appearance:st};var Pxe=mt.AcroForm;function q8(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){var e="addImage_";n.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=n.__addimage__.getImageFileTypeByImageData=function(E,T){var A,te,ve,Se,Ce,fe=t;if((T=T||t)==="RGBA"||E.data!==void 0&&E.data instanceof Uint8ClampedArray&&"height"in E&&"width"in E)return"RGBA";if(be(E))for(Ce in r)for(ve=r[Ce],A=0;A<ve.length;A+=1){for(Se=!0,te=0;te<ve[A].length;te+=1)if(ve[A][te]!==void 0&&ve[A][te]!==E[te]){Se=!1;break}if(Se===!0){fe=Ce;break}}else for(Ce in r)for(ve=r[Ce],A=0;A<ve.length;A+=1){for(Se=!0,te=0;te<ve[A].length;te+=1)if(ve[A][te]!==void 0&&ve[A][te]!==E.charCodeAt(te)){Se=!1;break}if(Se===!0){fe=Ce;break}}return fe===t&&T!==t&&(fe=T),fe},o=function E(T){for(var A=this.internal.write,te=this.internal.putStream,ve=(0,this.internal.getFilters)();ve.indexOf("FlateEncode")!==-1;)ve.splice(ve.indexOf("FlateEncode"),1);T.objectId=this.internal.newObject();var Se=[];if(Se.push({key:"Type",value:"/XObject"}),Se.push({key:"Subtype",value:"/Image"}),Se.push({key:"Width",value:T.width}),Se.push({key:"Height",value:T.height}),T.colorSpace===R.INDEXED?Se.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(T.palette.length/3-1)+" "+("sMask"in T&&T.sMask!==void 0?T.objectId+2:T.objectId+1)+" 0 R]"}):(Se.push({key:"ColorSpace",value:"/"+T.colorSpace}),T.colorSpace===R.DEVICE_CMYK&&Se.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Se.push({key:"BitsPerComponent",value:T.bitsPerComponent}),"decodeParameters"in T&&T.decodeParameters!==void 0&&Se.push({key:"DecodeParms",value:"<<"+T.decodeParameters+">>"}),"transparency"in T&&Array.isArray(T.transparency)&&T.transparency.length>0){for(var Ce="",fe=0,De=T.transparency.length;fe<De;fe++)Ce+=T.transparency[fe]+" "+T.transparency[fe]+" ";Se.push({key:"Mask",value:"["+Ce+"]"})}T.sMask!==void 0&&Se.push({key:"SMask",value:T.objectId+1+" 0 R"});var $e=T.filter!==void 0?["/"+T.filter]:void 0;if(te({data:T.data,additionalKeyValues:Se,alreadyAppliedFilters:$e,objectId:T.objectId}),A("endobj"),"sMask"in T&&T.sMask!==void 0){var Fe,V=(Fe=T.sMaskBitsPerComponent)!==null&&Fe!==void 0?Fe:T.bitsPerComponent,Q={width:T.width,height:T.height,colorSpace:"DeviceGray",bitsPerComponent:V,data:T.sMask};"filter"in T&&(Q.decodeParameters="/Predictor ".concat(T.predictor," /Colors 1 /BitsPerComponent ").concat(V," /Columns ").concat(T.width),Q.filter=T.filter),E.call(this,Q)}if(T.colorSpace===R.INDEXED){var ee=this.internal.newObject();te({data:P(new Uint8Array(T.palette)),objectId:ee}),A("endobj")}},s=function(){var E=this.internal.collections[e+"images"];for(var T in E)o.call(this,E[T])},a=function(){var E,T=this.internal.collections[e+"images"],A=this.internal.write;for(var te in T)A("/I"+(E=T[te]).index,E.objectId,"0","R")},c=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",a))},l=function(){var E=this.internal.collections[e+"images"];return c.call(this),E},u=function(){return Object.keys(this.internal.collections[e+"images"]).length},g=function(E){return typeof n["process"+E.toUpperCase()]=="function"},v=function(E){return Wn(E)==="object"&&E.nodeType===1},p=function(E,T){if(E.nodeName==="IMG"&&E.hasAttribute("src")){var A=""+E.getAttribute("src");if(A.indexOf("data:image/")===0)return eb(unescape(A).split("base64,").pop());var te=n.loadFile(A,!0);if(te!==void 0)return te}if(E.nodeName==="CANVAS"){if(E.width===0||E.height===0)throw new Error("Given canvas must have data. Canvas width: "+E.width+", height: "+E.height);var ve;switch(T){case"PNG":ve="image/png";break;case"WEBP":ve="image/webp";break;default:ve="image/jpeg"}return eb(E.toDataURL(ve,1).split("base64,").pop())}},S=function(E){var T=this.internal.collections[e+"images"];if(T){for(var A in T)if(E===T[A].alias)return T[A]}},k=function(E,T,A){return E||T||(E=-96,T=-96),E<0&&(E=-1*A.width*72/E/this.internal.scaleFactor),T<0&&(T=-1*A.height*72/T/this.internal.scaleFactor),E===0&&(E=T*A.width/A.height),T===0&&(T=E*A.height/A.width),[E,T]},L=function(E,T,A,te,ve,Se){var Ce=k.call(this,A,te,ve),fe=this.internal.getCoordinateString,De=this.internal.getVerticalCoordinateString,$e=l.call(this);if(A=Ce[0],te=Ce[1],$e[ve.index]=ve,Se){Se*=Math.PI/180;var Fe=Math.cos(Se),V=Math.sin(Se),Q=function(re){return re.toFixed(4)},ee=[Q(Fe),Q(V),Q(-1*V),Q(Fe),0,0,"cm"]}this.internal.write("q"),Se?(this.internal.write([1,"0","0",1,fe(E),De(T+te),"cm"].join(" ")),this.internal.write(ee.join(" ")),this.internal.write([fe(A),"0","0",fe(te),"0","0","cm"].join(" "))):this.internal.write([fe(A),"0","0",fe(te),fe(E),De(T+te),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ve.index+" Do"),this.internal.write("Q")},R=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var J=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},X=n.__addimage__.sHashCode=function(E){var T,A,te=0;if(typeof E=="string")for(A=E.length,T=0;T<A;T++)te=(te<<5)-te+E.charCodeAt(T),te|=0;else if(be(E))for(A=E.byteLength/2,T=0;T<A;T++)te=(te<<5)-te+E[T],te|=0;return te},Z=n.__addimage__.validateStringAsBase64=function(E){(E=E||"").toString().trim();var T=!0;return E.length===0&&(T=!1),E.length%4!=0&&(T=!1),/^[A-Za-z0-9+/]+$/.test(E.substr(0,E.length-2))===!1&&(T=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(E.substr(-2))===!1&&(T=!1),T},me=n.__addimage__.extractImageFromDataUrl=function(E){if(E==null||!(E=E.trim()).startsWith("data:"))return null;var T=E.indexOf(",");return T<0?null:E.substring(0,T).trim().endsWith("base64")?E.substring(T+1):null};n.__addimage__.isArrayBuffer=function(E){return E instanceof ArrayBuffer};var be=n.__addimage__.isArrayBufferView=function(E){return E instanceof Int8Array||E instanceof Uint8Array||E instanceof Uint8ClampedArray||E instanceof Int16Array||E instanceof Uint16Array||E instanceof Int32Array||E instanceof Uint32Array||E instanceof Float32Array||E instanceof Float64Array},$=n.__addimage__.binaryStringToUint8Array=function(E){for(var T=E.length,A=new Uint8Array(T),te=0;te<T;te++)A[te]=E.charCodeAt(te);return A},P=n.__addimage__.arrayBufferToBinaryString=function(E){for(var T="",A=be(E)?E:new Uint8Array(E),te=0;te<A.length;te+=8192)T+=String.fromCharCode.apply(null,A.subarray(te,te+8192));return T};n.addImage=function(){var E,T,A,te,ve,Se,Ce,fe,De;if(typeof arguments[1]=="number"?(T=t,A=arguments[1],te=arguments[2],ve=arguments[3],Se=arguments[4],Ce=arguments[5],fe=arguments[6],De=arguments[7]):(T=arguments[1],A=arguments[2],te=arguments[3],ve=arguments[4],Se=arguments[5],Ce=arguments[6],fe=arguments[7],De=arguments[8]),Wn(E=arguments[0])==="object"&&!v(E)&&"imageData"in E){var $e=E;E=$e.imageData,T=$e.format||T||t,A=$e.x||A||0,te=$e.y||te||0,ve=$e.w||$e.width||ve,Se=$e.h||$e.height||Se,Ce=$e.alias||Ce,fe=$e.compression||fe,De=$e.rotation||$e.angle||De}var Fe=this.internal.getFilters();if(fe===void 0&&Fe.indexOf("FlateEncode")!==-1&&(fe="SLOW"),isNaN(A)||isNaN(te))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var V=D.call(this,E,T,Ce,fe);return L.call(this,A,te,ve,Se,V,De),this};var D=function(E,T,A,te){var ve,Se,Ce;if(typeof E=="string"&&i(E)===t){E=unescape(E);var fe=U(E,!1);(fe!==""||(fe=n.loadFile(E,!0))!==void 0)&&(E=fe)}if(v(E)&&(E=p(E,T)),T=i(E,T),!g(T))throw new Error("addImage does not support files of type '"+T+"', please ensure that a plugin for '"+T+"' support is added.");if(((Ce=A)==null||Ce.length===0)&&(A=(function(De){return typeof De=="string"||be(De)?X(De):be(De.data)?X(De.data):null})(E)),(ve=S.call(this,A))||(E instanceof Uint8Array||T==="RGBA"||(Se=E,E=$(E)),ve=this["process"+T.toUpperCase()](E,u.call(this),A,(function(De){return De&&typeof De=="string"&&(De=De.toUpperCase()),De in n.image_compression?De:J.NONE})(te),Se)),!ve)throw new Error("An unknown error occurred whilst processing the image.");return ve},U=n.__addimage__.convertBase64ToBinaryString=function(E,T){T=typeof T!="boolean"||T;var A,te="";if(typeof E=="string"){var ve;A=(ve=me(E))!==null&&ve!==void 0?ve:E;try{te=eb(A)}catch(Se){if(T)throw Z(A)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Se.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return te};n.getImageProperties=function(E){var T,A,te="";if(v(E)&&(E=p(E)),typeof E=="string"&&i(E)===t&&((te=U(E,!1))===""&&(te=n.loadFile(E)||""),E=te),A=i(E),!g(A))throw new Error("addImage does not support files of type '"+A+"', please ensure that a plugin for '"+A+"' support is added.");if(E instanceof Uint8Array||(E=$(E)),!(T=this["process"+A.toUpperCase()](E)))throw new Error("An unknown error occurred whilst processing the image");return T.fileType=A,T}})(mt.API),(function(n){var e=function(t){if(t!==void 0&&t!="")return!0};mt.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,i,o,s=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(t.objId),l=t.pageContext.annotations,u=!1,g=0;g<l.length&&!u;g++)switch((r=l[g]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var v=0;v<l.length;v++){r=l[v];var p=this.internal.pdfEscape,S=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var k=this.internal.newAdditionalObject(),L=this.internal.newAdditionalObject(),R=this.internal.getEncryptor(k.objId),J=r.title||"Note";o="<</Type /Annot /Subtype /Text "+(i="/Rect ["+s(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+p(R(r.contents))+")",o+=" /Popup "+L.objId+" 0 R",o+=" /P "+c.objId+" 0 R",o+=" /T ("+p(R(J))+") >>",k.content=o;var X=k.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+s(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+X,r.open&&(o+=" /Open true"),o+=" >>",L.content=o,this.internal.write(k.objId,"0 R",L.objId,"0 R");break;case"freetext":i="/Rect ["+s(r.bounds.x)+" "+a(r.bounds.y)+" "+s(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var Z=r.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+p(S(r.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+Z+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(r.options.name){var me=this.annotations._nameMap[r.options.name];r.options.pageNumber=me.page,r.options.top=me.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",o="",r.options.url)o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+p(S(r.options.url))+") >>";else if(r.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,o+=" /FitV "+r.options.left+"]";break;default:var be=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),o+=" /XYZ "+r.options.left+" "+be+" "+r.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,i,o,s){var a=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:c(t),y:l(r),w:c(t+i),h:l(r+o)},options:s,type:"link"})},n.textWithLink=function(t,r,i,o){var s,a,c=this.getTextWidth(t),l=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){a=o.maxWidth;var u=this.splitTextToSize(t,a).length;s=Math.ceil(l*u)}else a=c,s=l;return this.text(t,r,i,o),i+=.2*l,o.align==="center"&&(r-=c/2),o.align==="right"&&(r-=c),this.link(r,i-l,a,s,o),c},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}})(mt.API),(function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var o=n.__arabicParser__.isInArabicSubstitutionA=function(k){return e[k.charCodeAt(0)]!==void 0},s=n.__arabicParser__.isArabicLetter=function(k){return typeof k=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(k)},a=n.__arabicParser__.isArabicEndLetter=function(k){return s(k)&&o(k)&&e[k.charCodeAt(0)].length<=2},c=n.__arabicParser__.isArabicAlfLetter=function(k){return s(k)&&i.indexOf(k.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(k){return s(k)&&o(k)&&e[k.charCodeAt(0)].length>=1};var l=n.__arabicParser__.arabicLetterHasFinalForm=function(k){return s(k)&&o(k)&&e[k.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(k){return s(k)&&o(k)&&e[k.charCodeAt(0)].length>=3};var u=n.__arabicParser__.arabicLetterHasMedialForm=function(k){return s(k)&&o(k)&&e[k.charCodeAt(0)].length==4},g=n.__arabicParser__.resolveLigatures=function(k){var L=0,R=t,J="",X=0;for(L=0;L<k.length;L+=1)R[k.charCodeAt(L)]!==void 0?(X++,typeof(R=R[k.charCodeAt(L)])=="number"&&(J+=String.fromCharCode(R),R=t,X=0),L===k.length-1&&(R=t,J+=k.charAt(L-(X-1)),L-=X-1,X=0)):(R=t,J+=k.charAt(L-X),L-=X,X=0);return J};n.__arabicParser__.isArabicDiacritic=function(k){return k!==void 0&&r[k.charCodeAt(0)]!==void 0};var v=n.__arabicParser__.getCorrectForm=function(k,L,R){return s(k)?o(k)===!1?-1:!l(k)||!s(L)&&!s(R)||!s(R)&&a(L)||a(k)&&!s(L)||a(k)&&c(L)||a(k)&&a(L)?0:u(k)&&s(L)&&!a(L)&&s(R)&&l(R)?3:a(k)||!s(R)?1:2:-1},p=function(k){var L=0,R=0,J=0,X="",Z="",me="",be=(k=k||"").split("\\s+"),$=[];for(L=0;L<be.length;L+=1){for($.push(""),R=0;R<be[L].length;R+=1)X=be[L][R],Z=be[L][R-1],me=be[L][R+1],s(X)?(J=v(X,Z,me),$[L]+=J!==-1?String.fromCharCode(e[X.charCodeAt(0)][J]):X):$[L]+=X;$[L]=g($[L])}return $.join(" ")},S=n.__arabicParser__.processArabic=n.processArabic=function(){var k,L=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,R=[];if(Array.isArray(L)){var J=0;for(R=[],J=0;J<L.length;J+=1)Array.isArray(L[J])?R.push([p(L[J][0]),L[J][1],L[J][2]]):R.push([p(L[J])]);k=R}else k=p(L);return typeof arguments[0]=="string"?k:(arguments[0].text=k,arguments[0])};n.events.push(["preProcessText",S])})(mt.API),mt.API.autoPrint=function(n){var e;return(n=n||{}).variant=n.variant||"non-conform",n.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(a){t=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(a){o=a}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(a){s=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var i;if((t=t||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(mt.API),(function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(k){c=k}});var l=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return l},set:function(k){l=k}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(k){u=k}});var g=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return g},set:function(k){g=k}});var v=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return v},set:function(k){v=k}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(k){p=k}});var S=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return S},set:function(k){S=k}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(c){return r.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},n.getTextDimensions=function(c,l){r.call(this);var u=(l=l||{}).fontSize||this.getFontSize(),g=l.font||this.getFont(),v=l.scaleFactor||this.internal.scaleFactor,p=0,S=0,k=0,L=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var R=l.maxWidth;R>0?typeof c=="string"?c=this.splitTextToSize(c,R):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(X,Z){return X.concat(L.splitTextToSize(Z,R))},[])):c=Array.isArray(c)?c:[c];for(var J=0;J<c.length;J++)p<(k=this.getStringUnitWidth(c[J],{font:g})*u)&&(p=k);return p!==0&&(S=c.length),{w:p/=v,h:Math.max((S*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/v,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=n.cell=function(){var c;c=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),r.call(this);var l=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,g=this.internal.__cell__.margins||e,v=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return l.lineNumber!==void 0&&(l.lineNumber===c.lineNumber?(c.x=(l.x||0)+(l.width||0),c.y=l.y||0):l.y+l.height+c.height+g.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=g.top,p&&v&&(this.printHeaderRow(c.lineNumber,!0),c.y+=v[0].height)):c.y=l.y+l.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,t===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-u,c.y+u,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+u,{align:"center",baseline:"top",maxWidth:c.width-u-u}):this.text(c.text,c.x+u,c.y+u,{align:"left",baseline:"top",maxWidth:c.width-u-u})),this.internal.__cell__.lastCell=c,this};n.table=function(c,l,u,g,v){if(r.call(this),!u)throw new Error("No data for PDF table.");var p,S,k,L,R=[],J=[],X=[],Z={},me={},be=[],$=[],P=(v=v||{}).autoSize||!1,D=v.printHeaders!==!1,U=v.css&&v.css["font-size"]!==void 0?16*v.css["font-size"]:v.fontSize||12,E=v.margins||Object.assign({width:this.getPageWidth()},e),T=typeof v.padding=="number"?v.padding:3,A=v.headerBackgroundColor||"#c8c8c8",te=v.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=D,this.internal.__cell__.margins=E,this.internal.__cell__.table_font_size=U,this.internal.__cell__.padding=T,this.internal.__cell__.headerBackgroundColor=A,this.internal.__cell__.headerTextColor=te,this.setFontSize(U),g==null)J=R=Object.keys(u[0]),X=R.map(function(){return"left"});else if(Array.isArray(g)&&Wn(g[0])==="object")for(R=g.map(function($e){return $e.name}),J=g.map(function($e){return $e.prompt||$e.name||""}),X=g.map(function($e){return $e.align||"left"}),p=0;p<g.length;p+=1)me[g[p].name]=.7499990551181103*g[p].width;else Array.isArray(g)&&typeof g[0]=="string"&&(J=R=g,X=R.map(function(){return"left"}));if(P||Array.isArray(g)&&typeof g[0]=="string")for(p=0;p<R.length;p+=1){for(Z[L=R[p]]=u.map(function($e){return $e[L]}),this.setFont(void 0,"bold"),be.push(this.getTextDimensions(J[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),S=Z[L],this.setFont(void 0,"normal"),k=0;k<S.length;k+=1)be.push(this.getTextDimensions(S[k],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);me[L]=Math.max.apply(null,be)+T+T,be=[]}if(D){var ve={};for(p=0;p<R.length;p+=1)ve[R[p]]={},ve[R[p]].text=J[p],ve[R[p]].align=X[p];var Se=a.call(this,ve,me);$=R.map(function($e){return new o(c,l,me[$e],Se,ve[$e].text,void 0,ve[$e].align)}),this.setTableHeaderRow($),this.printHeaderRow(1,!1)}var Ce=g.reduce(function($e,Fe){return $e[Fe.name]=Fe.align,$e},{});for(p=0;p<u.length;p+=1){"rowStart"in v&&v.rowStart instanceof Function&&v.rowStart({row:p,data:u[p]},this);var fe=a.call(this,u[p],me);for(k=0;k<R.length;k+=1){var De=u[p][R[k]];"cellStart"in v&&v.cellStart instanceof Function&&v.cellStart({row:p,col:k,data:De},this),s.call(this,new o(c,l,me[R[k]],fe,De,p+2,Ce[R[k]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=l,this};var a=function(c,l){var u=this.internal.__cell__.padding,g=this.internal.__cell__.table_font_size,v=this.internal.scaleFactor;return Object.keys(c).map(function(p){var S=c[p];return this.splitTextToSize(S.hasOwnProperty("text")?S.text:S,l[p]-u-u)},this).map(function(p){return this.getLineHeightFactor()*p.length*g/v+u+u},this).reduce(function(p,S){return Math.max(p,S)},0)};n.setTableHeaderRow=function(c){r.call(this),this.internal.__cell__.tableHeaderRow=c},n.printHeaderRow=function(c,l){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var g=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(g[0],g[1],g[2],g[3],void 0,-1)}this.setFont(void 0,"bold");for(var v=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){u=this.internal.__cell__.tableHeaderRow[p].clone(),l&&(u.y=this.internal.__cell__.margins.top||0,v.push(u)),u.lineNumber=c;var S=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,u),this.setTextColor(S)}v.length>0&&this.setTableHeaderRow(v),this.setFont(void 0,"normal"),t=!1}})(mt.API);var H8={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},$8=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],oA=q8($8),W8=[100,200,300,400,500,600,700,800,900],qne=q8(W8);function JT(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=(function(o){return H8[o=o||"normal"]?o:"normal"})(n.style),r=(function(o){return o?typeof o=="number"?o>=100&&o<=900&&o%100==0?o:400:/^\d00$/.test(o)?parseInt(o):o==="bold"?700:400:400})(n.weight),i=(function(o){return typeof oA[o=o||"normal"]=="number"?o:"normal"})(n.stretch);return{family:e,style:t,weight:r,stretch:i,src:n.src||[],ref:n.ref||{name:e,style:[i,t,r].join(" ")}}}function _8(n,e,t,r){var i;for(i=t;i>=0&&i<e.length;i+=r)if(n[e[i]])return n[e[i]];for(i=t;i>=0&&i<e.length;i-=r)if(n[e[i]])return n[e[i]]}var Hne={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},w8={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function b8(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function I8(n){return n.trimLeft()}function $ne(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function Wne(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var Jw,E8,C8,bp,Xw,x8,S8,D8,XT=["times"];function T8(n,e,t,r,i){var o=4,s=M8;switch(i){case mt.API.image_compression.FAST:o=1,s=A8;break;case mt.API.image_compression.MEDIUM:o=6,s=P8;break;case mt.API.image_compression.SLOW:o=9,s=N8}n=(function(c,l,u,g){for(var v,p=c.length/l,S=new Uint8Array(c.length+p),k=[Gne,A8,M8,P8,N8],L=0;L<p;L+=1){var R=L*l,J=c.subarray(R,R+l);if(g)S.set(g(J,u,v),R+L);else{for(var X=k.length,Z=[],me=0;me<X;me+=1)Z[me]=k[me](J,u,v);var be=Yne(Z.concat());S.set(Z[be],R+L)}v=J}return S})(n,e,Math.ceil(t*r/8),s);var a=Tw(n,{level:o});return mt.API.__addimage__.arrayBufferToBinaryString(a)}function Gne(n){var e=Array.apply([],n);return e.unshift(0),e}function A8(n,e){var t=n.length,r=[];r[0]=1;for(var i=0;i<t;i+=1){var o=n[i-e]||0;r[i+1]=n[i]-o+256&255}return r}function M8(n,e,t){var r=n.length,i=[];i[0]=2;for(var o=0;o<r;o+=1){var s=t&&t[o]||0;i[o+1]=n[o]-s+256&255}return i}function P8(n,e,t){var r=n.length,i=[];i[0]=3;for(var o=0;o<r;o+=1){var s=n[o-e]||0,a=t&&t[o]||0;i[o+1]=n[o]+256-(s+a>>>1)&255}return i}function N8(n,e,t){var r=n.length,i=[];i[0]=4;for(var o=0;o<r;o+=1){var s=Kne(n[o-e]||0,t&&t[o]||0,t&&t[o-e]||0);i[o+1]=n[o]-s+256&255}return i}function Kne(n,e,t){if(n===e&&e===t)return n;var r=Math.abs(e-t),i=Math.abs(n-t),o=Math.abs(n+e-t-t);return r<=i&&r<=o?n:i<=o?e:t}function Yne(n){var e=n.map(function(t){return t.reduce(function(r,i){return r+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function eA(n,e,t){var r=e*t,i=Math.floor(r/8),o=16-(r-8*i+t),s=(1<<t)-1;return G8(n,i)>>o&s}function k8(n,e,t,r){var i=t*r,o=Math.floor(i/8),s=16-(i-8*o+r),a=(1<<r)-1,c=(e&a)<<s;(function(l,u,g){if(u+1<l.byteLength)l.setUint16(u,g,!1);else{var v=g>>8&255;l.setUint8(u,v)}})(n,o,G8(n,o)&~(a<<s)&65535|c)}function G8(n,e){return e+1<n.byteLength?n.getUint16(e,!1):n.getUint8(e)<<8}function Qne(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,i=n[e++],o=i>>7,s=1<<1+(7&i);n[e++],n[e++];var a=null,c=null;o&&(a=e,c=s,e+=3*s);var l=!0,u=[],g=0,v=null,p=0,S=null;for(this.width=t,this.height=r;l&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,S=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((E=n[e++])>=0))throw Error("Invalid block size");if(E===0)break;e+=E}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var k=n[e++];g=n[e++]|n[e++]<<8,v=n[e++],1&k||(v=null),p=k>>2&7,e++;break;case 254:for(;;){if(!((E=n[e++])>=0))throw Error("Invalid block size");if(E===0)break;e+=E}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var L=n[e++]|n[e++]<<8,R=n[e++]|n[e++]<<8,J=n[e++]|n[e++]<<8,X=n[e++]|n[e++]<<8,Z=n[e++],me=Z>>6&1,be=1<<1+(7&Z),$=a,P=c,D=!1;Z>>7&&(D=!0,$=e,P=be,e+=3*be);var U=e;for(e++;;){var E;if(!((E=n[e++])>=0))throw Error("Invalid block size");if(E===0)break;e+=E}u.push({x:L,y:R,width:J,height:X,has_local_palette:D,palette_offset:$,palette_size:P,data_offset:U,data_length:e-U,transparent_index:v,interlaced:!!me,delay:g,disposal:p});break;case 59:l=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return S},this.frameInfo=function(T){if(T<0||T>=u.length)throw new Error("Frame index out of range.");return u[T]},this.decodeAndBlitFrameBGRA=function(T,A){var te=this.frameInfo(T),ve=te.width*te.height,Se=new Uint8Array(ve);R8(n,te.data_offset,Se,ve);var Ce=te.palette_offset,fe=te.transparent_index;fe===null&&(fe=256);var De=te.width,$e=t-De,Fe=De,V=4*(te.y*t+te.x),Q=4*((te.y+te.height)*t+te.x),ee=V,re=4*$e;te.interlaced===!0&&(re+=4*t*7);for(var ce=8,de=0,Ie=Se.length;de<Ie;++de){var Ee=Se[de];if(Fe===0&&(Fe=De,(ee+=re)>=Q&&(re=4*$e+4*t*(ce-1),ee=V+(De+$e)*(ce<<1),ce>>=1)),Ee===fe)ee+=4;else{var Ne=n[Ce+3*Ee],ze=n[Ce+3*Ee+1],Je=n[Ce+3*Ee+2];A[ee++]=Je,A[ee++]=ze,A[ee++]=Ne,A[ee++]=255}--Fe}},this.decodeAndBlitFrameRGBA=function(T,A){var te=this.frameInfo(T),ve=te.width*te.height,Se=new Uint8Array(ve);R8(n,te.data_offset,Se,ve);var Ce=te.palette_offset,fe=te.transparent_index;fe===null&&(fe=256);var De=te.width,$e=t-De,Fe=De,V=4*(te.y*t+te.x),Q=4*((te.y+te.height)*t+te.x),ee=V,re=4*$e;te.interlaced===!0&&(re+=4*t*7);for(var ce=8,de=0,Ie=Se.length;de<Ie;++de){var Ee=Se[de];if(Fe===0&&(Fe=De,(ee+=re)>=Q&&(re=4*$e+4*t*(ce-1),ee=V+(De+$e)*(ce<<1),ce>>=1)),Ee===fe)ee+=4;else{var Ne=n[Ce+3*Ee],ze=n[Ce+3*Ee+1],Je=n[Ce+3*Ee+2];A[ee++]=Ne,A[ee++]=ze,A[ee++]=Je,A[ee++]=255}--Fe}}}function R8(n,e,t,r){for(var i=n[e++],o=1<<i,s=o+1,a=s+1,c=i+1,l=(1<<c)-1,u=0,g=0,v=0,p=n[e++],S=new Int32Array(4096),k=null;;){for(;u<16&&p!==0;)g|=n[e++]<<u,u+=8,p===1?p=n[e++]:--p;if(u<c)break;var L=g&l;if(g>>=c,u-=c,L!==o){if(L===s)break;for(var R=L<a?L:k,J=0,X=R;X>o;)X=S[X]>>8,++J;var Z=X;if(v+J+(R!==L?1:0)>r)return void Jn.log("Warning, gif stream longer than expected.");t[v++]=Z;var me=v+=J;for(R!==L&&(t[v++]=Z),X=R;J--;)X=S[X],t[--me]=255&X,X>>=8;k!==null&&a<4096&&(S[a++]=k<<8|Z,a>=l+1&&c<12&&(++c,l=l<<1|1)),k=L}else a=s+1,l=(1<<(c=i+1))-1,k=null}return v!==r&&Jn.log("Warning, gif stream shorter than expected."),t}function tA(n){var e,t,r,i,o,s=Math.floor,a=new Array(64),c=new Array(64),l=new Array(64),u=new Array(64),g=new Array(65535),v=new Array(65535),p=new Array(64),S=new Array(64),k=[],L=0,R=7,J=new Array(64),X=new Array(64),Z=new Array(64),me=new Array(256),be=new Array(2048),$=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],P=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],D=[0,1,2,3,4,5,6,7,8,9,10,11],U=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],E=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],T=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],A=[0,1,2,3,4,5,6,7,8,9,10,11],te=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ve=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Se(V,Q){for(var ee=0,re=0,ce=new Array,de=1;de<=16;de++){for(var Ie=1;Ie<=V[de];Ie++)ce[Q[re]]=[],ce[Q[re]][0]=ee,ce[Q[re]][1]=de,re++,ee++;ee*=2}return ce}function Ce(V){for(var Q=V[0],ee=V[1]-1;ee>=0;)Q&1<<ee&&(L|=1<<R),ee--,--R<0&&(L==255?(fe(255),fe(0)):fe(L),R=7,L=0)}function fe(V){k.push(V)}function De(V){fe(V>>8&255),fe(255&V)}function $e(V,Q,ee,re,ce){for(var de,Ie=ce[0],Ee=ce[240],Ne=(function(je,Ct){var nt,It,_t,wn,ln,Vt,At,Mt,ot,Ht,ft=0;for(ot=0;ot<8;++ot){nt=je[ft],It=je[ft+1],_t=je[ft+2],wn=je[ft+3],ln=je[ft+4],Vt=je[ft+5],At=je[ft+6];var pr=nt+(Mt=je[ft+7]),un=nt-Mt,tn=It+At,nn=It-At,Un=_t+Vt,Et=_t-Vt,zn=wn+ln,Dt=wn-ln,zt=pr+zn,Yn=pr-zn,$t=tn+Un,xt=tn-Un;je[ft]=zt+$t,je[ft+4]=zt-$t;var bn=.707106781*(xt+Yn);je[ft+2]=Yn+bn,je[ft+6]=Yn-bn;var Zi=.382683433*((zt=Dt+Et)-(xt=nn+un)),ni=.5411961*zt+Zi,vo=1.306562965*xt+Zi,jo=.707106781*($t=Et+nn),wt=un+jo,vs=un-jo;je[ft+5]=vs+ni,je[ft+3]=vs-ni,je[ft+1]=wt+vo,je[ft+7]=wt-vo,ft+=8}for(ft=0,ot=0;ot<8;++ot){nt=je[ft],It=je[ft+8],_t=je[ft+16],wn=je[ft+24],ln=je[ft+32],Vt=je[ft+40],At=je[ft+48];var rr=nt+(Mt=je[ft+56]),Ji=nt-Mt,ui=It+At,qn=It-At,qr=_t+Vt,ri=_t-Vt,yo=wn+ln,Sa=wn-ln,Bo=rr+yo,Xi=rr-yo,_o=ui+qr,eo=ui-qr;je[ft]=Bo+_o,je[ft+32]=Bo-_o;var Ii=.707106781*(eo+Xi);je[ft+16]=Xi+Ii,je[ft+48]=Xi-Ii;var Ri=.382683433*((Bo=Sa+ri)-(eo=qn+Ji)),Uo=.5411961*Bo+Ri,Da=1.306562965*eo+Ri,Ta=.707106781*(_o=ri+qn),Aa=Ji+Ta,_c=Ji-Ta;je[ft+40]=_c+Uo,je[ft+24]=_c-Uo,je[ft+8]=Aa+Da,je[ft+56]=Aa-Da,ft++}for(ot=0;ot<64;++ot)Ht=je[ot]*Ct[ot],p[ot]=Ht>0?Ht+.5|0:Ht-.5|0;return p})(V,Q),ze=0;ze<64;++ze)S[$[ze]]=Ne[ze];var Je=S[0]-ee;ee=S[0],Je==0?Ce(re[0]):(Ce(re[v[de=32767+Je]]),Ce(g[de]));for(var Qe=63;Qe>0&&S[Qe]==0;)Qe--;if(Qe==0)return Ce(Ie),ee;for(var gt,W=1;W<=Qe;){for(var Ye=W;S[W]==0&&W<=Qe;)++W;var Zt=W-Ye;if(Zt>=16){gt=Zt>>4;for(var St=1;St<=gt;++St)Ce(Ee);Zt&=15}de=32767+S[W],Ce(ce[(Zt<<4)+v[de]]),Ce(g[de]),W++}return Qe!=63&&Ce(Ie),ee}function Fe(V){V=Math.min(Math.max(V,1),100),o!=V&&((function(Q){for(var ee=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],re=0;re<64;re++){var ce=s((ee[re]*Q+50)/100);ce=Math.min(Math.max(ce,1),255),a[$[re]]=ce}for(var de=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ie=0;Ie<64;Ie++){var Ee=s((de[Ie]*Q+50)/100);Ee=Math.min(Math.max(Ee,1),255),c[$[Ie]]=Ee}for(var Ne=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ze=0,Je=0;Je<8;Je++)for(var Qe=0;Qe<8;Qe++)l[ze]=1/(a[$[ze]]*Ne[Je]*Ne[Qe]*8),u[ze]=1/(c[$[ze]]*Ne[Je]*Ne[Qe]*8),ze++})(V<50?Math.floor(5e3/V):Math.floor(200-2*V)),o=V)}this.encode=function(V,Q){Q&&Fe(Q),k=new Array,L=0,R=7,De(65496),De(65504),De(16),fe(74),fe(70),fe(73),fe(70),fe(0),fe(1),fe(1),fe(0),De(1),De(1),fe(0),fe(0),(function(){De(65499),De(132),fe(0);for(var It=0;It<64;It++)fe(a[It]);fe(1);for(var _t=0;_t<64;_t++)fe(c[_t])})(),(function(It,_t){De(65472),De(17),fe(8),De(_t),De(It),fe(3),fe(1),fe(17),fe(0),fe(2),fe(17),fe(1),fe(3),fe(17),fe(1)})(V.width,V.height),(function(){De(65476),De(418),fe(0);for(var It=0;It<16;It++)fe(P[It+1]);for(var _t=0;_t<=11;_t++)fe(D[_t]);fe(16);for(var wn=0;wn<16;wn++)fe(U[wn+1]);for(var ln=0;ln<=161;ln++)fe(E[ln]);fe(1);for(var Vt=0;Vt<16;Vt++)fe(T[Vt+1]);for(var At=0;At<=11;At++)fe(A[At]);fe(17);for(var Mt=0;Mt<16;Mt++)fe(te[Mt+1]);for(var ot=0;ot<=161;ot++)fe(ve[ot])})(),De(65498),De(12),fe(3),fe(1),fe(0),fe(2),fe(17),fe(3),fe(17),fe(0),fe(63),fe(0);var ee=0,re=0,ce=0;L=0,R=7,this.encode.displayName="_encode_";for(var de,Ie,Ee,Ne,ze,Je,Qe,gt,W,Ye=V.data,Zt=V.width,St=V.height,je=4*Zt,Ct=0;Ct<St;){for(de=0;de<je;){for(ze=je*Ct+de,Qe=-1,gt=0,W=0;W<64;W++)Je=ze+(gt=W>>3)*je+(Qe=4*(7&W)),Ct+gt>=St&&(Je-=je*(Ct+1+gt-St)),de+Qe>=je&&(Je-=de+Qe-je+4),Ie=Ye[Je++],Ee=Ye[Je++],Ne=Ye[Je++],J[W]=(be[Ie]+be[Ee+256|0]+be[Ne+512|0]>>16)-128,X[W]=(be[Ie+768|0]+be[Ee+1024|0]+be[Ne+1280|0]>>16)-128,Z[W]=(be[Ie+1280|0]+be[Ee+1536|0]+be[Ne+1792|0]>>16)-128;ee=$e(J,l,ee,e,r),re=$e(X,u,re,t,i),ce=$e(Z,u,ce,t,i),de+=32}Ct+=8}if(R>=0){var nt=[];nt[1]=R+1,nt[0]=(1<<R+1)-1,Ce(nt)}return De(65497),new Uint8Array(k)},n=n||50,(function(){for(var V=String.fromCharCode,Q=0;Q<256;Q++)me[Q]=V(Q)})(),e=Se(P,D),t=Se(T,A),r=Se(U,E),i=Se(te,ve),(function(){for(var V=1,Q=2,ee=1;ee<=15;ee++){for(var re=V;re<Q;re++)v[32767+re]=ee,g[32767+re]=[],g[32767+re][1]=ee,g[32767+re][0]=re;for(var ce=-(Q-1);ce<=-V;ce++)v[32767+ce]=ee,g[32767+ce]=[],g[32767+ce][1]=ee,g[32767+ce][0]=Q-1+ce;V<<=1,Q<<=1}})(),(function(){for(var V=0;V<256;V++)be[V]=19595*V,be[V+256|0]=38470*V,be[V+512|0]=7471*V+32768,be[V+768|0]=-11059*V,be[V+1024|0]=-21709*V,be[V+1280|0]=32768*V+8421375,be[V+1536|0]=-27439*V,be[V+1792|0]=-5329*V})(),Fe(n)}function Ea(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function O8(n){function e(D){if(!D)throw Error("assert :P")}function t(D,U,E){for(var T=0;4>T;T++)if(D[U+T]!=E.charCodeAt(T))return!0;return!1}function r(D,U,E,T,A){for(var te=0;te<A;te++)D[U+te]=E[T+te]}function i(D,U,E,T){for(var A=0;A<T;A++)D[U+A]=E}function o(D){return new Int32Array(D)}function s(D,U){for(var E=[],T=0;T<D;T++)E.push(new U);return E}function a(D,U){var E=[];return(function T(A,te,ve){for(var Se=ve[te],Ce=0;Ce<Se&&(A.push(ve.length>te+1?[]:new U),!(ve.length<te+1));Ce++)T(A[Ce],te+1,ve)})(E,0,D),E}var c=function(){var D=this;function U(d,f){for(var y=1<<f-1>>>0;d&y;)y>>>=1;return y?(d&y-1)+y:d}function E(d,f,y,I,N){e(!(I%y));do d[f+(I-=y)]=N;while(0<I)}function T(d,f,y,I,N){if(e(2328>=N),512>=N)var F=o(512);else if((F=o(N))==null)return 0;return(function(j,q,H,K,ie,ge){var Y,se,ue=q,Te=1<<H,pe=o(16),Me=o(16);for(e(ie!=0),e(K!=null),e(j!=null),e(0<H),se=0;se<ie;++se){if(15<K[se])return 0;++pe[K[se]]}if(pe[0]==ie)return 0;for(Me[1]=0,Y=1;15>Y;++Y){if(pe[Y]>1<<Y)return 0;Me[Y+1]=Me[Y]+pe[Y]}for(se=0;se<ie;++se)Y=K[se],0<K[se]&&(ge[Me[Y]++]=se);if(Me[15]==1)return(K=new A).g=0,K.value=ge[0],E(j,ue,1,Te,K),Te;var ke,qe=-1,Ve=Te-1,vt=0,it=1,sn=1,lt=1<<H;for(se=0,Y=1,ie=2;Y<=H;++Y,ie<<=1){if(it+=sn<<=1,0>(sn-=pe[Y]))return 0;for(;0<pe[Y];--pe[Y])(K=new A).g=Y,K.value=ge[se++],E(j,ue+vt,ie,lt,K),vt=U(vt,Y)}for(Y=H+1,ie=2;15>=Y;++Y,ie<<=1){if(it+=sn<<=1,0>(sn-=pe[Y]))return 0;for(;0<pe[Y];--pe[Y]){if(K=new A,(vt&Ve)!=qe){for(ue+=lt,ke=1<<(qe=Y)-H;15>qe&&!(0>=(ke-=pe[qe]));)++qe,ke<<=1;Te+=lt=1<<(ke=qe-H),j[q+(qe=vt&Ve)].g=ke+H,j[q+qe].value=ue-q-qe}K.g=Y-H,K.value=ge[se++],E(j,ue+(vt>>H),ie,lt,K),vt=U(vt,Y)}}return it!=2*Me[15]-1?0:Te})(d,f,y,I,N,F)}function A(){this.value=this.g=0}function te(){this.value=this.g=0}function ve(){this.G=s(5,A),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(Zu,te)}function Se(d,f,y,I){e(d!=null),e(f!=null),e(2147483648>I),d.Ca=254,d.I=0,d.b=-8,d.Ka=0,d.oa=f,d.pa=y,d.Jd=f,d.Yc=y+I,d.Zc=4<=I?y+I-4+1:y,Ie(d)}function Ce(d,f){for(var y=0;0<f--;)y|=Ne(d,128)<<f;return y}function fe(d,f){var y=Ce(d,f);return Ee(d)?-y:y}function De(d,f,y,I){var N,F=0;for(e(d!=null),e(f!=null),e(4294967288>I),d.Sb=I,d.Ra=0,d.u=0,d.h=0,4<I&&(I=4),N=0;N<I;++N)F+=f[y+N]<<8*N;d.Ra=F,d.bb=I,d.oa=f,d.pa=y}function $e(d){for(;8<=d.u&&d.bb<d.Sb;)d.Ra>>>=8,d.Ra+=d.oa[d.pa+d.bb]<<Tl-8>>>0,++d.bb,d.u-=8;re(d)&&(d.h=1,d.u=0)}function Fe(d,f){if(e(0<=f),!d.h&&f<=Ko){var y=ee(d)&Go[f];return d.u+=f,$e(d),y}return d.h=1,d.u=0}function V(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Q(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function ee(d){return d.Ra>>>(d.u&Tl-1)>>>0}function re(d){return e(d.bb<=d.Sb),d.h||d.bb==d.Sb&&d.u>Tl}function ce(d,f){d.u=f,d.h=re(d)}function de(d){d.u>=Ac&&(e(d.u>=Ac),$e(d))}function Ie(d){e(d!=null&&d.oa!=null),d.pa<d.Zc?(d.I=(d.oa[d.pa++]|d.I<<8)>>>0,d.b+=8):(e(d!=null&&d.oa!=null),d.pa<d.Yc?(d.b+=8,d.I=d.oa[d.pa++]|d.I<<8):d.Ka?d.b=0:(d.I<<=8,d.b+=8,d.Ka=1))}function Ee(d){return Ce(d,1)}function Ne(d,f){var y=d.Ca;0>d.b&&Ie(d);var I=d.b,N=y*f>>>8,F=(d.I>>>I>N)+0;for(F?(y-=N,d.I-=N+1<<I>>>0):y=N+1,I=y,N=0;256<=I;)N+=8,I>>=8;return I=7^N+Al[I],d.b-=I,d.Ca=(y<<I)-1,F}function ze(d,f,y){d[f+0]=y>>24&255,d[f+1]=y>>16&255,d[f+2]=y>>8&255,d[f+3]=255&y}function Je(d,f){return d[f+0]|d[f+1]<<8}function Qe(d,f){return Je(d,f)|d[f+2]<<16}function gt(d,f){return Je(d,f)|Je(d,f+2)<<16}function W(d,f){var y=1<<f;return e(d!=null),e(0<f),d.X=o(y),d.X==null?0:(d.Mb=32-f,d.Xa=f,1)}function Ye(d,f){e(d!=null),e(f!=null),e(d.Xa==f.Xa),r(f.X,0,d.X,0,1<<f.Xa)}function Zt(){this.X=[],this.Xa=this.Mb=0}function St(d,f,y,I){e(y!=null),e(I!=null);var N=y[0],F=I[0];return N==0&&(N=(d*F+f/2)/f),F==0&&(F=(f*N+d/2)/d),0>=N||0>=F?0:(y[0]=N,I[0]=F,1)}function je(d,f){return d+(1<<f)-1>>>f}function Ct(d,f){return((4278255360&d)+(4278255360&f)>>>0&4278255360)+((16711935&d)+(16711935&f)>>>0&16711935)>>>0}function nt(d,f){D[f]=function(y,I,N,F,j,q,H){var K;for(K=0;K<j;++K){var ie=D[d](q[H+K-1],N,F+K);q[H+K]=Ct(y[I+K],ie)}}}function It(){this.ud=this.hd=this.jd=0}function _t(d,f){return((4278124286&(d^f))>>>1)+(d&f)>>>0}function wn(d){return 0<=d&&256>d?d:0>d?0:255<d?255:void 0}function ln(d,f){return wn(d+(d-f+.5>>1))}function Vt(d,f,y){return Math.abs(f-y)-Math.abs(d-y)}function At(d,f,y,I,N,F,j){for(I=F[j-1],y=0;y<N;++y)F[j+y]=I=Ct(d[f+y],I)}function Mt(d,f,y,I,N){var F;for(F=0;F<y;++F){var j=d[f+F],q=j>>8&255,H=16711935&(H=(H=16711935&j)+((q<<16)+q));I[N+F]=(4278255360&j)+H>>>0}}function ot(d,f){f.jd=255&d,f.hd=d>>8&255,f.ud=d>>16&255}function Ht(d,f,y,I,N,F){var j;for(j=0;j<I;++j){var q=f[y+j],H=q>>>8,K=q,ie=255&(ie=(ie=q>>>16)+((d.jd<<24>>24)*(H<<24>>24)>>>5));K=255&(K=(K+=(d.hd<<24>>24)*(H<<24>>24)>>>5)+((d.ud<<24>>24)*(ie<<24>>24)>>>5)),N[F+j]=(4278255360&q)+(ie<<16)+K}}function ft(d,f,y,I,N){D[f]=function(F,j,q,H,K,ie,ge,Y,se){for(H=ge;H<Y;++H)for(ge=0;ge<se;++ge)K[ie++]=N(q[I(F[j++])])},D[d]=function(F,j,q,H,K,ie,ge){var Y=8>>F.b,se=F.Ea,ue=F.K[0],Te=F.w;if(8>Y)for(F=(1<<F.b)-1,Te=(1<<Y)-1;j<q;++j){var pe,Me=0;for(pe=0;pe<se;++pe)pe&F||(Me=I(H[K++])),ie[ge++]=N(ue[Me&Te]),Me>>=Y}else D["VP8LMapColor"+y](H,K,ue,Te,ie,ge,j,q,se)}}function pr(d,f,y,I,N){for(y=f+y;f<y;){var F=d[f++];I[N++]=F>>16&255,I[N++]=F>>8&255,I[N++]=255&F}}function un(d,f,y,I,N){for(y=f+y;f<y;){var F=d[f++];I[N++]=F>>16&255,I[N++]=F>>8&255,I[N++]=255&F,I[N++]=F>>24&255}}function tn(d,f,y,I,N){for(y=f+y;f<y;){var F=(j=d[f++])>>16&240|j>>12&15,j=240&j|j>>28&15;I[N++]=F,I[N++]=j}}function nn(d,f,y,I,N){for(y=f+y;f<y;){var F=(j=d[f++])>>16&248|j>>13&7,j=j>>5&224|j>>3&31;I[N++]=F,I[N++]=j}}function Un(d,f,y,I,N){for(y=f+y;f<y;){var F=d[f++];I[N++]=255&F,I[N++]=F>>8&255,I[N++]=F>>16&255}}function Et(d,f,y,I,N,F){if(F==0)for(y=f+y;f<y;)ze(I,((F=d[f++])[0]>>24|F[1]>>8&65280|F[2]<<8&16711680|F[3]<<24)>>>0),N+=32;else r(I,N,d,f,y)}function zn(d,f){D[f][0]=D[d+"0"],D[f][1]=D[d+"1"],D[f][2]=D[d+"2"],D[f][3]=D[d+"3"],D[f][4]=D[d+"4"],D[f][5]=D[d+"5"],D[f][6]=D[d+"6"],D[f][7]=D[d+"7"],D[f][8]=D[d+"8"],D[f][9]=D[d+"9"],D[f][10]=D[d+"10"],D[f][11]=D[d+"11"],D[f][12]=D[d+"12"],D[f][13]=D[d+"13"],D[f][14]=D[d+"0"],D[f][15]=D[d+"0"]}function Dt(d){return d==vb||d==yb||d==q0||d==_b}function zt(){this.eb=[],this.size=this.A=this.fb=0}function Yn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function $t(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new zt,this.f.kb=new Yn,this.sd=null}function xt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function bn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Zi(d){return alert("todo:WebPSamplerProcessPlane"),d.T}function ni(d,f){var y=d.T,I=f.ba.f.RGBA,N=I.eb,F=I.fb+d.ka*I.A,j=Ds[f.ba.S],q=d.y,H=d.O,K=d.f,ie=d.N,ge=d.ea,Y=d.W,se=f.cc,ue=f.dc,Te=f.Mc,pe=f.Nc,Me=d.ka,ke=d.ka+d.T,qe=d.U,Ve=qe+1>>1;for(Me==0?j(q,H,null,null,K,ie,ge,Y,K,ie,ge,Y,N,F,null,null,qe):(j(f.ec,f.fc,q,H,se,ue,Te,pe,K,ie,ge,Y,N,F-I.A,N,F,qe),++y);Me+2<ke;Me+=2)se=K,ue=ie,Te=ge,pe=Y,ie+=d.Rc,Y+=d.Rc,F+=2*I.A,j(q,(H+=2*d.fa)-d.fa,q,H,se,ue,Te,pe,K,ie,ge,Y,N,F-I.A,N,F,qe);return H+=d.fa,d.j+ke<d.o?(r(f.ec,f.fc,q,H,qe),r(f.cc,f.dc,K,ie,Ve),r(f.Mc,f.Nc,ge,Y,Ve),y--):1&ke||j(q,H,null,null,K,ie,ge,Y,K,ie,ge,Y,N,F+I.A,null,null,qe),y}function vo(d,f,y){var I=d.F,N=[d.J];if(I!=null){var F=d.U,j=f.ba.S,q=j==z0||j==q0;f=f.ba.f.RGBA;var H=[0],K=d.ka;H[0]=d.T,d.Kb&&(K==0?--H[0]:(--K,N[0]-=d.width),d.j+d.ka+d.T==d.o&&(H[0]=d.o-d.j-K));var ie=f.eb;K=f.fb+K*f.A,d=EA(I,N[0],d.width,F,H,ie,K+(q?0:3),f.A),e(y==H),d&&Dt(j)&&qp(ie,K,q,F,H,f.A)}return 0}function jo(d){var f=d.ma,y=f.ba.S,I=11>y,N=y==B0||y==U0||y==z0||y==mb||y==12||Dt(y);if(f.memory=null,f.Ib=null,f.Jb=null,f.Nd=null,!Tc(f.Oa,d,N?11:12))return 0;if(N&&Dt(y)&&Sl(),d.da)alert("todo:use_scaling");else{if(I){if(f.Ib=Zi,d.Kb){if(y=d.U+1>>1,f.memory=o(d.U+2*y),f.memory==null)return 0;f.ec=f.memory,f.fc=0,f.cc=f.ec,f.dc=f.fc+d.U,f.Mc=f.cc,f.Nc=f.dc+y,f.Ib=ni,Sl()}}else alert("todo:EmitYUV");N&&(f.Jb=vo,I&&ir())}if(I&&!BA){for(d=0;256>d;++d)LV[d]=89858*(d-128)+$0>>H0,jV[d]=-22014*(d-128)+$0,VV[d]=-45773*(d-128),FV[d]=113618*(d-128)+$0>>H0;for(d=$p;d<Ib;++d)f=76283*(d-16)+$0>>H0,BV[d-$p]=zo(f,255),UV[d-$p]=zo(f+8>>4,15);BA=1}return 1}function wt(d){var f=d.ma,y=d.U,I=d.T;return e(!(1&d.ka)),0>=y||0>=I?0:(y=f.Ib(d,f),f.Jb!=null&&f.Jb(d,f,y),f.Dc+=y,1)}function vs(d){d.ma.memory=null}function rr(d,f,y,I){return Fe(d,8)!=47?0:(f[0]=Fe(d,14)+1,y[0]=Fe(d,14)+1,I[0]=Fe(d,1),Fe(d,3)!=0?0:!d.h)}function Ji(d,f){if(4>d)return d+1;var y=d-2>>1;return(2+(1&d)<<y)+Fe(f,y)+1}function ui(d,f){return 120<f?f-120:1<=(y=((y=IV[f-1])>>4)*d+(8-(15&y)))?y:1;var y}function qn(d,f,y){var I=ee(y),N=d[f+=255&I].g-8;return 0<N&&(ce(y,y.u+8),I=ee(y),f+=d[f].value,f+=I&(1<<N)-1),ce(y,y.u+d[f].g),d[f].value}function qr(d,f,y){return y.g+=d.g,y.value+=d.value<<f>>>0,e(8>=y.g),d.g}function ri(d,f,y){var I=d.xc;return e((f=I==0?0:d.vc[d.md*(y>>I)+(f>>I)])<d.Wb),d.Ya[f]}function yo(d,f,y,I){var N=d.ab,F=d.c*f,j=d.C;f=j+f;var q=y,H=I;for(I=d.Ta,y=d.Ua;0<N--;){var K=d.gc[N],ie=j,ge=f,Y=q,se=H,ue=(H=I,q=y,K.Ea);switch(e(ie<ge),e(ge<=K.nc),K.hc){case 2:kr(Y,se,(ge-ie)*ue,H,q);break;case 0:var Te=ie,pe=ge,Me=H,ke=q,qe=(lt=K).Ea;Te==0&&(Fp(Y,se,null,null,1,Me,ke),At(Y,se+1,0,0,qe-1,Me,ke+1),se+=qe,ke+=qe,++Te);for(var Ve=1<<lt.b,vt=Ve-1,it=je(qe,lt.b),sn=lt.K,lt=lt.w+(Te>>lt.b)*it;Te<pe;){var yn=sn,oi=lt,an=1;for(Sh(Y,se,Me,ke-qe,1,Me,ke);an<qe;){var ut=(an&~vt)+Ve;ut>qe&&(ut=qe),(0,jp[yn[oi++]>>8&15])(Y,se+ +an,Me,ke+an-qe,ut-an,Me,ke+an),an=ut}se+=qe,ke+=qe,++Te&vt||(lt+=it)}ge!=K.nc&&r(H,q-ue,H,q+(ge-ie-1)*ue,ue);break;case 1:for(ue=Y,pe=se,qe=(Y=K.Ea)-(ke=Y&~(Me=(se=1<<K.b)-1)),Te=je(Y,K.b),Ve=K.K,K=K.w+(ie>>K.b)*Te;ie<ge;){for(vt=Ve,it=K,sn=new It,lt=pe+ke,yn=pe+Y;pe<lt;)ot(vt[it++],sn),Bp(sn,ue,pe,se,H,q),pe+=se,q+=se;pe<yn&&(ot(vt[it++],sn),Bp(sn,ue,pe,qe,H,q),pe+=qe,q+=qe),++ie&Me||(K+=Te)}break;case 3:if(Y==H&&se==q&&0<K.b){for(pe=H,Y=ue=q+(ge-ie)*ue-(ke=(ge-ie)*je(K.Ea,K.b)),se=H,Me=q,Te=[],ke=(qe=ke)-1;0<=ke;--ke)Te[ke]=se[Me+ke];for(ke=qe-1;0<=ke;--ke)pe[Y+ke]=Te[ke];L0(K,ie,ge,H,ue,H,q)}else L0(K,ie,ge,Y,se,H,q)}q=I,H=y}H!=y&&r(I,y,q,H,F)}function Sa(d,f){var y=d.V,I=d.Ba+d.c*d.C,N=f-d.C;if(e(f<=d.l.o),e(16>=N),0<N){var F=d.l,j=d.Ta,q=d.Ua,H=F.width;if(yo(d,N,y,I),N=q=[q],e((y=d.C)<(I=f)),e(F.v<F.va),I>F.o&&(I=F.o),y<F.j){var K=F.j-y;y=F.j,N[0]+=K*H}if(y>=I?y=0:(N[0]+=4*F.v,F.ka=y-F.j,F.U=F.va-F.v,F.T=I-y,y=1),y){if(q=q[0],11>(y=d.ca).S){var ie=y.f.RGBA,ge=(I=y.S,N=F.U,F=F.T,K=ie.eb,ie.A),Y=F;for(ie=ie.fb+d.Ma*ie.A;0<Y--;){var se=j,ue=q,Te=N,pe=K,Me=ie;switch(I){case j0:Up(se,ue,Te,pe,Me);break;case B0:Ml(se,ue,Te,pe,Me);break;case vb:Ml(se,ue,Te,pe,Me),qp(pe,Me,0,Te,1,0);break;case MA:Ju(se,ue,Te,pe,Me);break;case U0:Et(se,ue,Te,pe,Me,1);break;case yb:Et(se,ue,Te,pe,Me,1),qp(pe,Me,0,Te,1,0);break;case z0:Et(se,ue,Te,pe,Me,0);break;case q0:Et(se,ue,Te,pe,Me,0),qp(pe,Me,1,Te,1,0);break;case mb:Pl(se,ue,Te,pe,Me);break;case _b:Pl(se,ue,Te,pe,Me),IA(pe,Me,Te,1,0);break;case PA:Nl(se,ue,Te,pe,Me);break;default:e(0)}q+=H,ie+=ge}d.Ma+=F}else alert("todo:EmitRescaledRowsYUVA");e(d.Ma<=y.height)}}d.C=f,e(d.C<=d.i)}function Bo(d){var f;if(0<d.ua)return 0;for(f=0;f<d.Wb;++f){var y=d.Ya[f].G,I=d.Ya[f].H;if(0<y[1][I[1]+0].g||0<y[2][I[2]+0].g||0<y[3][I[3]+0].g)return 0}return 1}function Xi(d,f,y,I,N,F){if(d.Z!=0){var j=d.qd,q=d.rd;for(e(Ol[d.Z]!=null);f<y;++f)Ol[d.Z](j,q,I,N,I,N,F),j=I,q=N,N+=F;d.qd=j,d.rd=q}}function _o(d,f){var y=d.l.ma,I=y.Z==0||y.Z==1?d.l.j:d.C;if(I=d.C<I?I:d.C,e(f<=d.l.o),f>I){var N=d.l.width,F=y.ca,j=y.tb+N*I,q=d.V,H=d.Ba+d.c*I,K=d.gc;e(d.ab==1),e(K[0].hc==3),Oa(K[0],I,f,q,H,F,j),Xi(y,I,f,F,j,N)}d.C=d.Ma=f}function eo(d,f,y,I,N,F,j){var q=d.$/I,H=d.$%I,K=d.m,ie=d.s,ge=y+d.$,Y=ge;N=y+I*N;var se=y+I*F,ue=280+ie.ua,Te=d.Pb?q:16777216,pe=0<ie.ua?ie.Wa:null,Me=ie.wc,ke=ge<se?ri(ie,H,q):null;e(d.C<F),e(se<=N);var qe=!1;e:for(;;){for(;qe||ge<se;){var Ve=0;if(q>=Te){var vt=ge-y;e((Te=d).Pb),Te.wd=Te.m,Te.xd=vt,0<Te.s.ua&&Ye(Te.s.Wa,Te.s.vb),Te=q+CV}if(H&Me||(ke=ri(ie,H,q)),e(ke!=null),ke.Qb&&(f[ge]=ke.qb,qe=!0),!qe)if(de(K),ke.jc){Ve=K,vt=f;var it=ge,sn=ke.pd[ee(Ve)&Zu-1];e(ke.jc),256>sn.g?(ce(Ve,Ve.u+sn.g),vt[it]=sn.value,Ve=0):(ce(Ve,Ve.u+sn.g-256),e(256<=sn.value),Ve=sn.value),Ve==0&&(qe=!0)}else Ve=qn(ke.G[0],ke.H[0],K);if(K.h)break;if(qe||256>Ve){if(!qe)if(ke.nd)f[ge]=(ke.qb|Ve<<8)>>>0;else{if(de(K),qe=qn(ke.G[1],ke.H[1],K),de(K),vt=qn(ke.G[2],ke.H[2],K),it=qn(ke.G[3],ke.H[3],K),K.h)break;f[ge]=(it<<24|qe<<16|Ve<<8|vt)>>>0}if(qe=!1,++ge,++H>=I&&(H=0,++q,j!=null&&q<=F&&!(q%16)&&j(d,q),pe!=null))for(;Y<ge;)Ve=f[Y++],pe.X[(506832829*Ve&4294967295)>>>pe.Mb]=Ve}else if(280>Ve){if(Ve=Ji(Ve-256,K),vt=qn(ke.G[4],ke.H[4],K),de(K),vt=ui(I,vt=Ji(vt,K)),K.h)break;if(ge-y<vt||N-ge<Ve)break e;for(it=0;it<Ve;++it)f[ge+it]=f[ge+it-vt];for(ge+=Ve,H+=Ve;H>=I;)H-=I,++q,j!=null&&q<=F&&!(q%16)&&j(d,q);if(e(ge<=N),H&Me&&(ke=ri(ie,H,q)),pe!=null)for(;Y<ge;)Ve=f[Y++],pe.X[(506832829*Ve&4294967295)>>>pe.Mb]=Ve}else{if(!(Ve<ue))break e;for(qe=Ve-280,e(pe!=null);Y<ge;)Ve=f[Y++],pe.X[(506832829*Ve&4294967295)>>>pe.Mb]=Ve;Ve=ge,e(!(qe>>>(vt=pe).Xa)),f[Ve]=vt.X[qe],qe=!0}qe||e(K.h==re(K))}if(d.Pb&&K.h&&ge<N)e(d.m.h),d.a=5,d.m=d.wd,d.$=d.xd,0<d.s.ua&&Ye(d.s.vb,d.s.Wa);else{if(K.h)break e;j?.(d,q>F?F:q),d.a=0,d.$=ge-y}return 1}return d.a=3,0}function Ii(d){e(d!=null),d.vc=null,d.yc=null,d.Ya=null;var f=d.Wa;f!=null&&(f.X=null),d.vb=null,e(d!=null)}function Ri(){var d=new kt;return d==null?null:(d.a=0,d.xb=RA,zn("Predictor","VP8LPredictors"),zn("Predictor","VP8LPredictors_C"),zn("PredictorAdd","VP8LPredictorsAdd"),zn("PredictorAdd","VP8LPredictorsAdd_C"),kr=Mt,Bp=Ht,Up=pr,Ml=un,Pl=tn,Nl=nn,Ju=Un,D.VP8LMapColor32b=Ra,D.VP8LMapColor8b=Vp,d)}function Uo(d,f,y,I,N){var F=1,j=[d],q=[f],H=I.m,K=I.s,ie=null,ge=0;e:for(;;){if(y)for(;F&&Fe(H,1);){var Y=j,se=q,ue=I,Te=1,pe=ue.m,Me=ue.gc[ue.ab],ke=Fe(pe,2);if(ue.Oc&1<<ke)F=0;else{switch(ue.Oc|=1<<ke,Me.hc=ke,Me.Ea=Y[0],Me.nc=se[0],Me.K=[null],++ue.ab,e(4>=ue.ab),ke){case 0:case 1:Me.b=Fe(pe,3)+2,Te=Uo(je(Me.Ea,Me.b),je(Me.nc,Me.b),0,ue,Me.K),Me.K=Me.K[0];break;case 3:var qe,Ve=Fe(pe,8)+1,vt=16<Ve?0:4<Ve?1:2<Ve?2:3;if(Y[0]=je(Me.Ea,vt),Me.b=vt,qe=Te=Uo(Ve,1,0,ue,Me.K)){var it,sn=Ve,lt=Me,yn=1<<(8>>lt.b),oi=o(yn);if(oi==null)qe=0;else{var an=lt.K[0],ut=lt.w;for(oi[0]=lt.K[0][0],it=1;it<1*sn;++it)oi[it]=Ct(an[ut+it],oi[it-1]);for(;it<4*yn;++it)oi[it]=0;lt.K[0]=null,lt.K[0]=oi,qe=1}}Te=qe;break;case 2:break;default:e(0)}F=Te}}if(j=j[0],q=q[0],F&&Fe(H,1)&&!(F=1<=(ge=Fe(H,4))&&11>=ge)){I.a=3;break e}var Ke;if(Ke=F)t:{var Or,Jt,In,or=I,Ci=j,io=q,Cr=ge,Fi=y,oo=or.m,si=or.s,Sn=[null],Fn=1,xr=0,Vn=EV[Cr];n:for(;;){if(Fi&&Fe(oo,1)){var xi=Fe(oo,3)+2,Js=je(Ci,xi),Lr=je(io,xi),Eo=Js*Lr;if(!Uo(Js,Lr,0,or,Sn))break n;for(Sn=Sn[0],si.xc=xi,Or=0;Or<Eo;++Or){var Zn=Sn[Or]>>8&65535;Sn[Or]=Zn,Zn>=Fn&&(Fn=Zn+1)}}if(oo.h)break n;for(Jt=0;5>Jt;++Jt){var ai=NA[Jt];!Jt&&0<Cr&&(ai+=1<<Cr),xr<ai&&(xr=ai)}var Qo=s(Fn*Vn,A),so=Fn,Zo=s(so,ve);if(Zo==null)var Jo=null;else e(65536>=so),Jo=Zo;var Co=o(xr);if(Jo==null||Co==null||Qo==null){or.a=1;break n}var Xo=Qo;for(Or=In=0;Or<Fn;++Or){var tr=Jo[Or],es=tr.G,Xs=tr.H,ed=0,Nc=1,Si=0;for(Jt=0;5>Jt;++Jt){ai=NA[Jt],es[Jt]=Xo,Xs[Jt]=In,!Jt&&0<Cr&&(ai+=1<<Cr);i:{var G0,Eb=ai,K0=or,Wp=Co,HV=Xo,$V=In,Cb=0,Ll=K0.m,WV=Fe(Ll,1);if(i(Wp,0,0,Eb),WV){var GV=Fe(Ll,1)+1,KV=Fe(Ll,1),qA=Fe(Ll,KV==0?1:8);Wp[qA]=1,GV==2&&(Wp[qA=Fe(Ll,8)]=1);var Y0=1}else{var HA=o(19),$A=Fe(Ll,4)+4;if(19<$A){K0.a=3;var Q0=0;break i}for(G0=0;G0<$A;++G0)HA[bV[G0]]=Fe(Ll,3);var xb=void 0,Gp=void 0,WA=K0,YV=HA,Z0=Eb,GA=Wp,Sb=0,Fl=WA.m,KA=8,YA=s(128,A);r:for(;T(YA,0,7,YV,19);){if(Fe(Fl,1)){var QV=2+2*Fe(Fl,3);if((xb=2+Fe(Fl,QV))>Z0)break r}else xb=Z0;for(Gp=0;Gp<Z0&&xb--;){de(Fl);var QA=YA[0+(127&ee(Fl))];ce(Fl,Fl.u+QA.g);var Th=QA.value;if(16>Th)GA[Gp++]=Th,Th!=0&&(KA=Th);else{var ZV=Th==16,ZA=Th-16,JV=_V[ZA],JA=Fe(Fl,yV[ZA])+JV;if(Gp+JA>Z0)break r;for(var XV=ZV?KA:0;0<JA--;)GA[Gp++]=XV}}Sb=1;break r}Sb||(WA.a=3),Y0=Sb}(Y0=Y0&&!Ll.h)&&(Cb=T(HV,$V,8,Wp,Eb)),Y0&&Cb!=0?Q0=Cb:(K0.a=3,Q0=0)}if(Q0==0)break n;if(Nc&&wV[Jt]==1&&(Nc=Xo[In].g==0),ed+=Xo[In].g,In+=Q0,3>=Jt){var Kp,Db=Co[0];for(Kp=1;Kp<ai;++Kp)Co[Kp]>Db&&(Db=Co[Kp]);Si+=Db}}if(tr.nd=Nc,tr.Qb=0,Nc&&(tr.qb=(es[3][Xs[3]+0].value<<24|es[1][Xs[1]+0].value<<16|es[2][Xs[2]+0].value)>>>0,ed==0&&256>es[0][Xs[0]+0].value&&(tr.Qb=1,tr.qb+=es[0][Xs[0]+0].value<<8)),tr.jc=!tr.Qb&&6>Si,tr.jc){var J0,kc=tr;for(J0=0;J0<Zu;++J0){var Vl=J0,jl=kc.pd[Vl],X0=kc.G[0][kc.H[0]+Vl];256<=X0.value?(jl.g=X0.g+256,jl.value=X0.value):(jl.g=0,jl.value=0,Vl>>=qr(X0,8,jl),Vl>>=qr(kc.G[1][kc.H[1]+Vl],16,jl),Vl>>=qr(kc.G[2][kc.H[2]+Vl],0,jl),qr(kc.G[3][kc.H[3]+Vl],24,jl))}}}si.vc=Sn,si.Wb=Fn,si.Ya=Jo,si.yc=Qo,Ke=1;break t}Ke=0}if(!(F=Ke)){I.a=3;break e}if(0<ge){if(K.ua=1<<ge,!W(K.Wa,ge)){I.a=1,F=0;break e}}else K.ua=0;var Tb=I,XA=j,ej=q,Ab=Tb.s,Mb=Ab.xc;if(Tb.c=XA,Tb.i=ej,Ab.md=je(XA,Mb),Ab.wc=Mb==0?-1:(1<<Mb)-1,y){I.xb=PV;break e}if((ie=o(j*q))==null){I.a=1,F=0;break e}F=(F=eo(I,ie,0,j,q,q,null))&&!H.h;break e}return F?(N!=null?N[0]=ie:(e(ie==null),e(y)),I.$=0,y||Ii(K)):Ii(K),F}function Da(d,f){var y=d.c*d.i,I=y+f+16*f;return e(d.c<=f),d.V=o(I),d.V==null?(d.Ta=null,d.Ua=0,d.a=1,0):(d.Ta=d.V,d.Ua=d.Ba+y+f,1)}function Ta(d,f){var y=d.C,I=f-y,N=d.V,F=d.Ba+d.c*y;for(e(f<=d.l.o);0<I;){var j=16<I?16:I,q=d.l.ma,H=d.l.width,K=H*j,ie=q.ca,ge=q.tb+H*y,Y=d.Ta,se=d.Ua;yo(d,j,N,F),CA(Y,se,ie,ge,K),Xi(q,y,y+j,ie,ge,H),I-=j,N+=j*d.c,y+=j}e(y==f),d.C=d.Ma=f}function Aa(){this.ub=this.yd=this.td=this.Rb=0}function _c(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function _h(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function Uu(){this.Yb=(function(){var d=[];return(function f(y,I,N){for(var F=N[I],j=0;j<F&&(y.push(N.length>I+1?[]:0),!(N.length<I+1));j++)f(y[j],I+1,N)})(d,0,[3,11]),d})()}function wc(){this.jb=o(3),this.Wc=a([4,8],Uu),this.Xc=a([4,17],Uu)}function zu(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Oi(){this.ld=this.La=this.dd=this.tc=0}function $s(){this.Na=this.la=0}function ys(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function bc(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function wh(){this.uc=this.M=this.Nb=0,this.wa=Array(new Oi),this.Y=0,this.ya=Array(new bc),this.aa=0,this.l=new Ma}function qu(){this.y=o(16),this.f=o(8),this.ea=o(8)}function Hu(){this.cb=this.a=0,this.sc="",this.m=new V,this.Od=new Aa,this.Kc=new _c,this.ed=new zu,this.Qa=new _h,this.Ic=this.$c=this.Aa=0,this.D=new wh,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,V),this.ia=0,this.pb=s(4,ys),this.Pa=new wc,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new qu),this.Hd=0,this.rb=Array(new $s),this.sb=0,this.wa=Array(new Oi),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new bc),this.L=this.aa=0,this.gd=a([4,2],Oi),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function zo(d,f){return 0>d?0:d>f?f:d}function Ma(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function $u(){var d=new Hu;return d!=null&&(d.a=0,d.sc="OK",d.cb=0,d.Xb=0,Hp||(Hp=_l)),d}function gr(d,f,y){return d.a==0&&(d.a=f,d.sc=y,d.cb=0),0}function Wu(d,f,y){return 3<=y&&d[f+0]==157&&d[f+1]==1&&d[f+2]==42}function _s(d,f){if(d==null)return 0;if(d.a=0,d.sc="OK",f==null)return gr(d,2,"null VP8Io passed to VP8GetHeaders()");var y=f.data,I=f.w,N=f.ha;if(4>N)return gr(d,7,"Truncated header.");var F=y[I+0]|y[I+1]<<8|y[I+2]<<16,j=d.Od;if(j.Rb=!(1&F),j.td=F>>1&7,j.yd=F>>4&1,j.ub=F>>5,3<j.td)return gr(d,3,"Incorrect keyframe parameters.");if(!j.yd)return gr(d,4,"Frame not displayable.");I+=3,N-=3;var q=d.Kc;if(j.Rb){if(7>N)return gr(d,7,"cannot parse picture header");if(!Wu(y,I,N))return gr(d,3,"Bad code word");q.c=16383&(y[I+4]<<8|y[I+3]),q.Td=y[I+4]>>6,q.i=16383&(y[I+6]<<8|y[I+5]),q.Ud=y[I+6]>>6,I+=7,N-=7,d.za=q.c+15>>4,d.Ub=q.i+15>>4,f.width=q.c,f.height=q.i,f.Da=0,f.j=0,f.v=0,f.va=f.width,f.o=f.height,f.da=0,f.ib=f.width,f.hb=f.height,f.U=f.width,f.T=f.height,i((F=d.Pa).jb,0,255,F.jb.length),e((F=d.Qa)!=null),F.Cb=0,F.Bb=0,F.Fb=1,i(F.Zb,0,0,F.Zb.length),i(F.Lb,0,0,F.Lb)}if(j.ub>N)return gr(d,7,"bad partition length");Se(F=d.m,y,I,j.ub),I+=j.ub,N-=j.ub,j.Rb&&(q.Ld=Ee(F),q.Kd=Ee(F)),q=d.Qa;var H,K=d.Pa;if(e(F!=null),e(q!=null),q.Cb=Ee(F),q.Cb){if(q.Bb=Ee(F),Ee(F)){for(q.Fb=Ee(F),H=0;4>H;++H)q.Zb[H]=Ee(F)?fe(F,7):0;for(H=0;4>H;++H)q.Lb[H]=Ee(F)?fe(F,6):0}if(q.Bb)for(H=0;3>H;++H)K.jb[H]=Ee(F)?Ce(F,8):255}else q.Bb=0;if(F.Ka)return gr(d,3,"cannot parse segment header");if((q=d.ed).zd=Ee(F),q.Tb=Ce(F,6),q.wb=Ce(F,3),q.Pc=Ee(F),q.Pc&&Ee(F)){for(K=0;4>K;++K)Ee(F)&&(q.vd[K]=fe(F,6));for(K=0;4>K;++K)Ee(F)&&(q.od[K]=fe(F,6))}if(d.L=q.Tb==0?0:q.zd?1:2,F.Ka)return gr(d,3,"cannot parse filter header");var ie=N;if(N=H=I,I=H+ie,q=ie,d.Xb=(1<<Ce(d.m,2))-1,ie<3*(K=d.Xb))y=7;else{for(H+=3*K,q-=3*K,ie=0;ie<K;++ie){var ge=y[N+0]|y[N+1]<<8|y[N+2]<<16;ge>q&&(ge=q),Se(d.Jc[+ie],y,H,ge),H+=ge,q-=ge,N+=3}Se(d.Jc[+K],y,H,q),y=H<I?0:5}if(y!=0)return gr(d,y,"cannot parse partitions");for(y=Ce(H=d.m,7),N=Ee(H)?fe(H,4):0,I=Ee(H)?fe(H,4):0,q=Ee(H)?fe(H,4):0,K=Ee(H)?fe(H,4):0,H=Ee(H)?fe(H,4):0,ie=d.Qa,ge=0;4>ge;++ge){if(ie.Cb){var Y=ie.Zb[ge];ie.Fb||(Y+=y)}else{if(0<ge){d.pb[ge]=d.pb[0];continue}Y=y}var se=d.pb[ge];se.Sc[0]=wb[zo(Y+N,127)],se.Sc[1]=bb[zo(Y+0,127)],se.Eb[0]=2*wb[zo(Y+I,127)],se.Eb[1]=101581*bb[zo(Y+q,127)]>>16,8>se.Eb[1]&&(se.Eb[1]=8),se.Qc[0]=wb[zo(Y+K,117)],se.Qc[1]=bb[zo(Y+H,127)],se.lc=Y+H}if(!j.Rb)return gr(d,4,"Not a key frame.");for(Ee(F),j=d.Pa,y=0;4>y;++y){for(N=0;8>N;++N)for(I=0;3>I;++I)for(q=0;11>q;++q)K=Ne(F,AV[y][N][I][q])?Ce(F,8):DV[y][N][I][q],j.Wc[y][N].Yb[I][q]=K;for(N=0;17>N;++N)j.Xc[y][N]=j.Wc[y][MV[N]]}return d.kc=Ee(F),d.kc&&(d.Bd=Ce(F,8)),d.cb=1}function _l(d,f,y,I,N,F,j){var q=f[N].Yb[y];for(y=0;16>N;++N){if(!Ne(d,q[y+0]))return N;for(;!Ne(d,q[y+1]);)if(q=f[++N].Yb[0],y=0,N==16)return 16;var H=f[N+1].Yb;if(Ne(d,q[y+2])){var K=d,ie=0;if(Ne(K,(Y=q)[(ge=y)+3]))if(Ne(K,Y[ge+6])){for(q=0,ge=2*(ie=Ne(K,Y[ge+8]))+(Y=Ne(K,Y[ge+9+ie])),ie=0,Y=xV[ge];Y[q];++q)ie+=ie+Ne(K,Y[q]);ie+=3+(8<<ge)}else Ne(K,Y[ge+7])?(ie=7+2*Ne(K,165),ie+=Ne(K,145)):ie=5+Ne(K,159);else ie=Ne(K,Y[ge+4])?3+Ne(K,Y[ge+5]):2;q=H[2]}else ie=1,q=H[1];H=j+SV[N],0>(K=d).b&&Ie(K);var ge,Y=K.b,se=(ge=K.Ca>>1)-(K.I>>Y)>>31;--K.b,K.Ca+=se,K.Ca|=1,K.I-=(ge+1&se)<<Y,F[H]=((ie^se)-se)*I[(0<N)+0]}return 16}function Gu(d){var f=d.rb[d.sb-1];f.la=0,f.Na=0,i(d.zc,0,0,d.zc.length),d.ja=0}function to(d,f,y,I,N){N=d[f+y+32*I]+(N>>3),d[f+y+32*I]=-256&N?0>N?0:255:N}function Nr(d,f,y,I,N,F){to(d,f,0,y,I+N),to(d,f,1,y,I+F),to(d,f,2,y,I-F),to(d,f,3,y,I-N)}function Ei(d){return(20091*d>>16)+d}function wo(d,f,y,I){var N,F=0,j=o(16);for(N=0;4>N;++N){var q=d[f+0]+d[f+8],H=d[f+0]-d[f+8],K=(35468*d[f+4]>>16)-Ei(d[f+12]),ie=Ei(d[f+4])+(35468*d[f+12]>>16);j[F+0]=q+ie,j[F+1]=H+K,j[F+2]=H-K,j[F+3]=q-ie,F+=4,f++}for(N=F=0;4>N;++N)q=(d=j[F+0]+4)+j[F+8],H=d-j[F+8],K=(35468*j[F+4]>>16)-Ei(j[F+12]),to(y,I,0,0,q+(ie=Ei(j[F+4])+(35468*j[F+12]>>16))),to(y,I,1,0,H+K),to(y,I,2,0,H-K),to(y,I,3,0,q-ie),F++,I+=32}function wl(d,f,y,I){var N=d[f+0]+4,F=35468*d[f+4]>>16,j=Ei(d[f+4]),q=35468*d[f+1]>>16;Nr(y,I,0,N+j,d=Ei(d[f+1]),q),Nr(y,I,1,N+F,d,q),Nr(y,I,2,N-F,d,q),Nr(y,I,3,N-j,d,q)}function bl(d,f,y,I,N){wo(d,f,y,I),N&&wo(d,f+16,y,I+4)}function qo(d,f,y,I){Xu(d,f+0,y,I,1),Xu(d,f+32,y,I+128,1)}function Pn(d,f,y,I){var N;for(d=d[f+0]+4,N=0;4>N;++N)for(f=0;4>f;++f)to(y,I,f,N,d)}function Ic(d,f,y,I){d[f+0]&&Nn(d,f+0,y,I),d[f+16]&&Nn(d,f+16,y,I+4),d[f+32]&&Nn(d,f+32,y,I+128),d[f+48]&&Nn(d,f+48,y,I+128+4)}function ws(d,f,y,I){var N,F=o(16);for(N=0;4>N;++N){var j=d[f+0+N]+d[f+12+N],q=d[f+4+N]+d[f+8+N],H=d[f+4+N]-d[f+8+N],K=d[f+0+N]-d[f+12+N];F[0+N]=j+q,F[8+N]=j-q,F[4+N]=K+H,F[12+N]=K-H}for(N=0;4>N;++N)j=(d=F[0+4*N]+3)+F[3+4*N],q=F[1+4*N]+F[2+4*N],H=F[1+4*N]-F[2+4*N],K=d-F[3+4*N],y[I+0]=j+q>>3,y[I+16]=K+H>>3,y[I+32]=j-q>>3,y[I+48]=K-H>>3,I+=64}function Ho(d,f,y){var I,N=f-32,F=Yo,j=255-d[N-1];for(I=0;I<y;++I){var q,H=F,K=j+d[f-1];for(q=0;q<y;++q)d[f+q]=H[K+d[N+q]];f+=32}}function Mp(d,f){Ho(d,f,4)}function bh(d,f){Ho(d,f,8)}function Pp(d,f){Ho(d,f,16)}function Ku(d,f){var y;for(y=0;16>y;++y)r(d,f+32*y,d,f-32,16)}function Ih(d,f){var y;for(y=16;0<y;--y)i(d,f,d[f-1],16),f+=32}function $o(d,f,y){var I;for(I=0;16>I;++I)i(f,y+32*I,d,16)}function Ec(d,f){var y,I=16;for(y=0;16>y;++y)I+=d[f-1+32*y]+d[f+y-32];$o(I>>5,d,f)}function Li(d,f){var y,I=8;for(y=0;16>y;++y)I+=d[f-1+32*y];$o(I>>4,d,f)}function Il(d,f){var y,I=8;for(y=0;16>y;++y)I+=d[f+y-32];$o(I>>4,d,f)}function Eh(d,f){$o(128,d,f)}function Ot(d,f,y){return d+2*f+y+2>>2}function Pa(d,f){var y,I=f-32;for(I=new Uint8Array([Ot(d[I-1],d[I+0],d[I+1]),Ot(d[I+0],d[I+1],d[I+2]),Ot(d[I+1],d[I+2],d[I+3]),Ot(d[I+2],d[I+3],d[I+4])]),y=0;4>y;++y)r(d,f+32*y,I,0,I.length)}function Np(d,f){var y=d[f-1],I=d[f-1+32],N=d[f-1+64],F=d[f-1+96];ze(d,f+0,16843009*Ot(d[f-1-32],y,I)),ze(d,f+32,16843009*Ot(y,I,N)),ze(d,f+64,16843009*Ot(I,N,F)),ze(d,f+96,16843009*Ot(N,F,F))}function kp(d,f){var y,I=4;for(y=0;4>y;++y)I+=d[f+y-32]+d[f-1+32*y];for(I>>=3,y=0;4>y;++y)i(d,f+32*y,I,4)}function Ws(d,f){var y=d[f-1+0],I=d[f-1+32],N=d[f-1+64],F=d[f-1-32],j=d[f+0-32],q=d[f+1-32],H=d[f+2-32],K=d[f+3-32];d[f+0+96]=Ot(I,N,d[f-1+96]),d[f+1+96]=d[f+0+64]=Ot(y,I,N),d[f+2+96]=d[f+1+64]=d[f+0+32]=Ot(F,y,I),d[f+3+96]=d[f+2+64]=d[f+1+32]=d[f+0+0]=Ot(j,F,y),d[f+3+64]=d[f+2+32]=d[f+1+0]=Ot(q,j,F),d[f+3+32]=d[f+2+0]=Ot(H,q,j),d[f+3+0]=Ot(K,H,q)}function di(d,f){var y=d[f+1-32],I=d[f+2-32],N=d[f+3-32],F=d[f+4-32],j=d[f+5-32],q=d[f+6-32],H=d[f+7-32];d[f+0+0]=Ot(d[f+0-32],y,I),d[f+1+0]=d[f+0+32]=Ot(y,I,N),d[f+2+0]=d[f+1+32]=d[f+0+64]=Ot(I,N,F),d[f+3+0]=d[f+2+32]=d[f+1+64]=d[f+0+96]=Ot(N,F,j),d[f+3+32]=d[f+2+64]=d[f+1+96]=Ot(F,j,q),d[f+3+64]=d[f+2+96]=Ot(j,q,H),d[f+3+96]=Ot(q,H,H)}function Rp(d,f){var y=d[f-1+0],I=d[f-1+32],N=d[f-1+64],F=d[f-1-32],j=d[f+0-32],q=d[f+1-32],H=d[f+2-32],K=d[f+3-32];d[f+0+0]=d[f+1+64]=F+j+1>>1,d[f+1+0]=d[f+2+64]=j+q+1>>1,d[f+2+0]=d[f+3+64]=q+H+1>>1,d[f+3+0]=H+K+1>>1,d[f+0+96]=Ot(N,I,y),d[f+0+64]=Ot(I,y,F),d[f+0+32]=d[f+1+96]=Ot(y,F,j),d[f+1+32]=d[f+2+96]=Ot(F,j,q),d[f+2+32]=d[f+3+96]=Ot(j,q,H),d[f+3+32]=Ot(q,H,K)}function Op(d,f){var y=d[f+0-32],I=d[f+1-32],N=d[f+2-32],F=d[f+3-32],j=d[f+4-32],q=d[f+5-32],H=d[f+6-32],K=d[f+7-32];d[f+0+0]=y+I+1>>1,d[f+1+0]=d[f+0+64]=I+N+1>>1,d[f+2+0]=d[f+1+64]=N+F+1>>1,d[f+3+0]=d[f+2+64]=F+j+1>>1,d[f+0+32]=Ot(y,I,N),d[f+1+32]=d[f+0+96]=Ot(I,N,F),d[f+2+32]=d[f+1+96]=Ot(N,F,j),d[f+3+32]=d[f+2+96]=Ot(F,j,q),d[f+3+64]=Ot(j,q,H),d[f+3+96]=Ot(q,H,K)}function bs(d,f){var y=d[f-1+0],I=d[f-1+32],N=d[f-1+64],F=d[f-1+96];d[f+0+0]=y+I+1>>1,d[f+2+0]=d[f+0+32]=I+N+1>>1,d[f+2+32]=d[f+0+64]=N+F+1>>1,d[f+1+0]=Ot(y,I,N),d[f+3+0]=d[f+1+32]=Ot(I,N,F),d[f+3+32]=d[f+1+64]=Ot(N,F,F),d[f+3+64]=d[f+2+64]=d[f+0+96]=d[f+1+96]=d[f+2+96]=d[f+3+96]=F}function Na(d,f){var y=d[f-1+0],I=d[f-1+32],N=d[f-1+64],F=d[f-1+96],j=d[f-1-32],q=d[f+0-32],H=d[f+1-32],K=d[f+2-32];d[f+0+0]=d[f+2+32]=y+j+1>>1,d[f+0+32]=d[f+2+64]=I+y+1>>1,d[f+0+64]=d[f+2+96]=N+I+1>>1,d[f+0+96]=F+N+1>>1,d[f+3+0]=Ot(q,H,K),d[f+2+0]=Ot(j,q,H),d[f+1+0]=d[f+3+32]=Ot(y,j,q),d[f+1+32]=d[f+3+64]=Ot(I,y,j),d[f+1+64]=d[f+3+96]=Ot(N,I,y),d[f+1+96]=Ot(F,N,I)}function ka(d,f){var y;for(y=0;8>y;++y)r(d,f+32*y,d,f-32,8)}function Cc(d,f){var y;for(y=0;8>y;++y)i(d,f,d[f-1],8),f+=32}function no(d,f,y){var I;for(I=0;8>I;++I)i(f,y+32*I,d,8)}function Ch(d,f){var y,I=8;for(y=0;8>y;++y)I+=d[f+y-32]+d[f-1+32*y];no(I>>4,d,f)}function xc(d,f){var y,I=4;for(y=0;8>y;++y)I+=d[f+y-32];no(I>>3,d,f)}function Hn(d,f){var y,I=4;for(y=0;8>y;++y)I+=d[f-1+32*y];no(I>>3,d,f)}function xh(d,f){no(128,d,f)}function Gs(d,f,y){var I=d[f-y],N=d[f+0],F=3*(N-I)+gb[1020+d[f-2*y]-d[f+y]],j=V0[112+(F+4>>3)];d[f-y]=Yo[255+I+V0[112+(F+3>>3)]],d[f+0]=Yo[255+N-j]}function El(d,f,y,I){var N=d[f+0],F=d[f+y];return Ss[255+d[f-2*y]-d[f-y]]>I||Ss[255+F-N]>I}function Sc(d,f,y,I){return 4*Ss[255+d[f-y]-d[f+0]]+Ss[255+d[f-2*y]-d[f+y]]<=I}function Cl(d,f,y,I,N){var F=d[f-3*y],j=d[f-2*y],q=d[f-y],H=d[f+0],K=d[f+y],ie=d[f+2*y],ge=d[f+3*y];return 4*Ss[255+q-H]+Ss[255+j-K]>I?0:Ss[255+d[f-4*y]-F]<=N&&Ss[255+F-j]<=N&&Ss[255+j-q]<=N&&Ss[255+ge-ie]<=N&&Ss[255+ie-K]<=N&&Ss[255+K-H]<=N}function Is(d,f,y,I){var N=2*I+1;for(I=0;16>I;++I)Sc(d,f+I,y,N)&&Gs(d,f+I,y)}function xl(d,f,y,I){var N=2*I+1;for(I=0;16>I;++I)Sc(d,f+I*y,1,N)&&Gs(d,f+I*y,1)}function bo(d,f,y,I){var N;for(N=3;0<N;--N)Is(d,f+=4*y,y,I)}function Yu(d,f,y,I){var N;for(N=3;0<N;--N)xl(d,f+=4,y,I)}function Ks(d,f,y,I,N,F,j,q){for(F=2*F+1;0<N--;){if(Cl(d,f,y,F,j))if(El(d,f,y,q))Gs(d,f,y);else{var H=d,K=f,ie=y,ge=H[K-2*ie],Y=H[K-ie],se=H[K+0],ue=H[K+ie],Te=H[K+2*ie],pe=27*(ke=gb[1020+3*(se-Y)+gb[1020+ge-ue]])+63>>7,Me=18*ke+63>>7,ke=9*ke+63>>7;H[K-3*ie]=Yo[255+H[K-3*ie]+ke],H[K-2*ie]=Yo[255+ge+Me],H[K-ie]=Yo[255+Y+pe],H[K+0]=Yo[255+se-pe],H[K+ie]=Yo[255+ue-Me],H[K+2*ie]=Yo[255+Te-ke]}f+=I}}function ro(d,f,y,I,N,F,j,q){for(F=2*F+1;0<N--;){if(Cl(d,f,y,F,j))if(El(d,f,y,q))Gs(d,f,y);else{var H=d,K=f,ie=y,ge=H[K-ie],Y=H[K+0],se=H[K+ie],ue=V0[112+(4+(Te=3*(Y-ge))>>3)],Te=V0[112+(Te+3>>3)],pe=ue+1>>1;H[K-2*ie]=Yo[255+H[K-2*ie]+pe],H[K-ie]=Yo[255+ge+Te],H[K+0]=Yo[255+Y-ue],H[K+ie]=Yo[255+se-pe]}f+=I}}function Qu(d,f,y,I,N,F){Ks(d,f,y,1,16,I,N,F)}function Ys(d,f,y,I,N,F){Ks(d,f,1,y,16,I,N,F)}function Dc(d,f,y,I,N,F){var j;for(j=3;0<j;--j)ro(d,f+=4*y,y,1,16,I,N,F)}function m(d,f,y,I,N,F){var j;for(j=3;0<j;--j)ro(d,f+=4,1,y,16,I,N,F)}function M(d,f,y,I,N,F,j,q){Ks(d,f,N,1,8,F,j,q),Ks(y,I,N,1,8,F,j,q)}function G(d,f,y,I,N,F,j,q){Ks(d,f,1,N,8,F,j,q),Ks(y,I,1,N,8,F,j,q)}function ne(d,f,y,I,N,F,j,q){ro(d,f+4*N,N,1,8,F,j,q),ro(y,I+4*N,N,1,8,F,j,q)}function le(d,f,y,I,N,F,j,q){ro(d,f+4,1,N,8,F,j,q),ro(y,I+4,1,N,8,F,j,q)}function Ae(){this.ba=new $t,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new bn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Le(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function rt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function at(){this.ua=0,this.Wa=new Zt,this.vb=new Zt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ve,this.yc=new A}function kt(){this.xb=this.a=0,this.l=new Ma,this.ca=new $t,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Q,this.Pb=0,this.wd=new Q,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new at,this.ab=0,this.gc=s(4,rt),this.Oc=0}function jt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ma,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function pn(d,f,y,I,N,F,j){for(d=d==null?0:d[f+0],f=0;f<j;++f)N[F+f]=d+y[I+f]&255,d=N[F+f]}function Xn(d,f,y,I,N,F,j){var q;if(d==null)pn(null,null,y,I,N,F,j);else for(q=0;q<j;++q)N[F+q]=d[f+q]+y[I+q]&255}function $n(d,f,y,I,N,F,j){if(d==null)pn(null,null,y,I,N,F,j);else{var q,H=d[f+0],K=H,ie=H;for(q=0;q<j;++q)K=ie+(H=d[f+q])-K,ie=y[I+q]+(-256&K?0>K?0:255:K)&255,K=H,N[F+q]=ie}}function Ln(d,f,y,I){var N=f.width,F=f.o;if(e(d!=null&&f!=null),0>y||0>=I||y+I>F)return null;if(!d.Cc){if(d.ga==null){var j;if(d.ga=new jt,(j=d.ga==null)||(j=f.width*f.o,e(d.Gb.length==0),d.Gb=o(j),d.Uc=0,d.Gb==null?j=0:(d.mb=d.Gb,d.nb=d.Uc,d.rc=null,j=1),j=!j),!j){j=d.ga;var q=d.Fa,H=d.P,K=d.qc,ie=d.mb,ge=d.nb,Y=H+1,se=K-1,ue=j.l;if(e(q!=null&&ie!=null&&f!=null),Ol[0]=null,Ol[1]=pn,Ol[2]=Xn,Ol[3]=$n,j.ca=ie,j.tb=ge,j.c=f.width,j.i=f.height,e(0<j.c&&0<j.i),1>=K)f=0;else if(j.$a=3&q[H+0],j.Z=q[H+0]>>2&3,j.Lc=q[H+0]>>4&3,H=q[H+0]>>6&3,0>j.$a||1<j.$a||4<=j.Z||1<j.Lc||H)f=0;else if(ue.put=wt,ue.ac=jo,ue.bc=vs,ue.ma=j,ue.width=f.width,ue.height=f.height,ue.Da=f.Da,ue.v=f.v,ue.va=f.va,ue.j=f.j,ue.o=f.o,j.$a)e:{e(j.$a==1),f=Ri();t:for(;;){if(f==null){f=0;break e}if(e(j!=null),j.mc=f,f.c=j.c,f.i=j.i,f.l=j.l,f.l.ma=j,f.l.width=j.c,f.l.height=j.i,f.a=0,De(f.m,q,Y,se),!Uo(j.c,j.i,1,f,null)||(f.ab==1&&f.gc[0].hc==3&&Bo(f.s)?(j.ic=1,q=f.c*f.i,f.Ta=null,f.Ua=0,f.V=o(q),f.Ba=0,f.V==null?(f.a=1,f=0):f=1):(j.ic=0,f=Da(f,j.c)),!f))break t;f=1;break e}j.mc=null,f=0}else f=se>=j.c*j.i;j=!f}if(j)return null;d.ga.Lc!=1?d.Ga=0:I=F-y}e(d.ga!=null),e(y+I<=F);e:{if(f=(q=d.ga).c,F=q.l.o,q.$a==0){if(Y=d.rc,se=d.Vc,ue=d.Fa,H=d.P+1+y*f,K=d.mb,ie=d.nb+y*f,e(H<=d.P+d.qc),q.Z!=0)for(e(Ol[q.Z]!=null),j=0;j<I;++j)Ol[q.Z](Y,se,ue,H,K,ie,f),Y=K,se=ie,ie+=f,H+=f;else for(j=0;j<I;++j)r(K,ie,ue,H,f),Y=K,se=ie,ie+=f,H+=f;d.rc=Y,d.Vc=se}else{if(e(q.mc!=null),f=y+I,e((j=q.mc)!=null),e(f<=j.i),j.C>=f)f=1;else if(q.ic||ir(),q.ic){q=j.V,Y=j.Ba,se=j.c;var Te=j.i,pe=(ue=1,H=j.$/se,K=j.$%se,ie=j.m,ge=j.s,j.$),Me=se*Te,ke=se*f,qe=ge.wc,Ve=pe<ke?ri(ge,K,H):null;e(pe<=Me),e(f<=Te),e(Bo(ge));t:for(;;){for(;!ie.h&&pe<ke;){if(K&qe||(Ve=ri(ge,K,H)),e(Ve!=null),de(ie),256>(Te=qn(Ve.G[0],Ve.H[0],ie)))q[Y+pe]=Te,++pe,++K>=se&&(K=0,++H<=f&&!(H%16)&&_o(j,H));else{if(!(280>Te)){ue=0;break t}Te=Ji(Te-256,ie);var vt,it=qn(Ve.G[4],Ve.H[4],ie);if(de(ie),!(pe>=(it=ui(se,it=Ji(it,ie)))&&Me-pe>=Te)){ue=0;break t}for(vt=0;vt<Te;++vt)q[Y+pe+vt]=q[Y+pe+vt-it];for(pe+=Te,K+=Te;K>=se;)K-=se,++H<=f&&!(H%16)&&_o(j,H);pe<ke&&K&qe&&(Ve=ri(ge,K,H))}e(ie.h==re(ie))}_o(j,H>f?f:H);break t}!ue||ie.h&&pe<Me?(ue=0,j.a=ie.h?5:3):j.$=pe,f=ue}else f=eo(j,j.V,j.Ba,j.c,j.i,f,Ta);if(!f){I=0;break e}}y+I>=F&&(d.Cc=1),I=1}if(!I)return null;if(d.Cc&&((I=d.ga)!=null&&(I.mc=null),d.ga=null,0<d.Ga))return alert("todo:WebPDequantizeLevels"),null}return d.nb+y*N}function Er(d,f,y,I,N,F){for(;0<N--;){var j,q=d,H=f+(y?1:0),K=d,ie=f+(y?0:3);for(j=0;j<I;++j){var ge=K[ie+4*j];ge!=255&&(ge*=32897,q[H+4*j+0]=q[H+4*j+0]*ge>>23,q[H+4*j+1]=q[H+4*j+1]*ge>>23,q[H+4*j+2]=q[H+4*j+2]*ge>>23)}f+=F}}function mr(d,f,y,I,N){for(;0<I--;){var F;for(F=0;F<y;++F){var j=d[f+2*F+0],q=15&(K=d[f+2*F+1]),H=4369*q,K=(240&K|K>>4)*H>>16;d[f+2*F+0]=(240&j|j>>4)*H>>16&240|(15&j|j<<4)*H>>16>>4&15,d[f+2*F+1]=240&K|q}f+=N}}function Hr(d,f,y,I,N,F,j,q){var H,K,ie=255;for(K=0;K<N;++K){for(H=0;H<I;++H){var ge=d[f+H];F[j+4*H]=ge,ie&=ge}f+=y,j+=q}return ie!=255}function Io(d,f,y,I,N){var F;for(F=0;F<N;++F)y[I+F]=d[f+F]>>8}function ir(){qp=Er,IA=mr,EA=Hr,CA=Io}function Es(d,f,y){D[d]=function(I,N,F,j,q,H,K,ie,ge,Y,se,ue,Te,pe,Me,ke,qe){var Ve,vt=qe-1>>1,it=q[H+0]|K[ie+0]<<16,sn=ge[Y+0]|se[ue+0]<<16;e(I!=null);var lt=3*it+sn+131074>>2;for(f(I[N+0],255&lt,lt>>16,Te,pe),F!=null&&(lt=3*sn+it+131074>>2,f(F[j+0],255&lt,lt>>16,Me,ke)),Ve=1;Ve<=vt;++Ve){var yn=q[H+Ve]|K[ie+Ve]<<16,oi=ge[Y+Ve]|se[ue+Ve]<<16,an=it+yn+sn+oi+524296,ut=an+2*(yn+sn)>>3;lt=ut+it>>1,it=(an=an+2*(it+oi)>>3)+yn>>1,f(I[N+2*Ve-1],255&lt,lt>>16,Te,pe+(2*Ve-1)*y),f(I[N+2*Ve-0],255&it,it>>16,Te,pe+(2*Ve-0)*y),F!=null&&(lt=an+sn>>1,it=ut+oi>>1,f(F[j+2*Ve-1],255&lt,lt>>16,Me,ke+(2*Ve-1)*y),f(F[j+2*Ve+0],255&it,it>>16,Me,ke+(2*Ve+0)*y)),it=yn,sn=oi}1&qe||(lt=3*it+sn+131074>>2,f(I[N+qe-1],255&lt,lt>>16,Te,pe+(qe-1)*y),F!=null&&(lt=3*sn+it+131074>>2,f(F[j+qe-1],255&lt,lt>>16,Me,ke+(qe-1)*y)))}}function Sl(){Ds[j0]=NV,Ds[B0]=OA,Ds[MA]=kV,Ds[U0]=LA,Ds[z0]=FA,Ds[mb]=VA,Ds[PA]=RV,Ds[vb]=OA,Ds[yb]=LA,Ds[q0]=FA,Ds[_b]=VA}function Wo(d){return d&~OV?0>d?0:255:d>>jA}function h(d,f){return Wo((19077*d>>8)+(26149*f>>8)-14234)}function _(d,f,y){return Wo((19077*d>>8)-(6419*f>>8)-(13320*y>>8)+8708)}function x(d,f){return Wo((19077*d>>8)+(33050*f>>8)-17685)}function z(d,f,y,I,N){I[N+0]=h(d,y),I[N+1]=_(d,f,y),I[N+2]=x(d,f)}function ae(d,f,y,I,N){I[N+0]=x(d,f),I[N+1]=_(d,f,y),I[N+2]=h(d,y)}function ye(d,f,y,I,N){var F=_(d,f,y);f=F<<3&224|x(d,f)>>3,I[N+0]=248&h(d,y)|F>>5,I[N+1]=f}function We(d,f,y,I,N){var F=240&x(d,f)|15;I[N+0]=240&h(d,y)|_(d,f,y)>>4,I[N+1]=F}function xn(d,f,y,I,N){I[N+0]=255,z(d,f,y,I,N+1)}function vr(d,f,y,I,N){ae(d,f,y,I,N),I[N+3]=255}function Lt(d,f,y,I,N){z(d,f,y,I,N),I[N+3]=255}function er(d,f,y){D[d]=function(I,N,F,j,q,H,K,ie,ge){for(var Y=ie+(-2&ge)*y;ie!=Y;)f(I[N+0],F[j+0],q[H+0],K,ie),f(I[N+1],F[j+0],q[H+0],K,ie+y),N+=2,++j,++H,ie+=2*y;1&ge&&f(I[N+0],F[j+0],q[H+0],K,ie)}}function yr(d,f,y){return y==0?d==0?f==0?6:5:f==0?4:0:y}function Qs(d,f,y,I,N){switch(d>>>30){case 3:Xu(f,y,I,N,0);break;case 2:xs(f,y,I,N);break;case 1:Nn(f,y,I,N)}}function ar(d,f){var y,I,N=f.M,F=f.Nb,j=d.oc,q=d.pc+40,H=d.oc,K=d.pc+584,ie=d.oc,ge=d.pc+600;for(y=0;16>y;++y)j[q+32*y-1]=129;for(y=0;8>y;++y)H[K+32*y-1]=129,ie[ge+32*y-1]=129;for(0<N?j[q-1-32]=H[K-1-32]=ie[ge-1-32]=129:(i(j,q-32-1,127,21),i(H,K-32-1,127,9),i(ie,ge-32-1,127,9)),I=0;I<d.za;++I){var Y=f.ya[f.aa+I];if(0<I){for(y=-1;16>y;++y)r(j,q+32*y-4,j,q+32*y+12,4);for(y=-1;8>y;++y)r(H,K+32*y-4,H,K+32*y+4,4),r(ie,ge+32*y-4,ie,ge+32*y+4,4)}var se=d.Gd,ue=d.Hd+I,Te=Y.ad,pe=Y.Hc;if(0<N&&(r(j,q-32,se[ue].y,0,16),r(H,K-32,se[ue].f,0,8),r(ie,ge-32,se[ue].ea,0,8)),Y.Za){var Me=j,ke=q-32+16;for(0<N&&(I>=d.za-1?i(Me,ke,se[ue].y[15],4):r(Me,ke,se[ue+1].y,0,4)),y=0;4>y;y++)Me[ke+128+y]=Me[ke+256+y]=Me[ke+384+y]=Me[ke+0+y];for(y=0;16>y;++y,pe<<=2)Me=j,ke=q+UA[y],Zs[Y.Ob[y]](Me,ke),Qs(pe,Te,16*+y,Me,ke)}else if(Me=yr(I,N,Y.Ob[0]),Rl[Me](j,q),pe!=0)for(y=0;16>y;++y,pe<<=2)Qs(pe,Te,16*+y,j,q+UA[y]);for(y=Y.Gc,Me=yr(I,N,Y.Dd),Pc[Me](H,K),Pc[Me](ie,ge),pe=Te,Me=H,ke=K,255&(Y=0|y)&&(170&Y?La(pe,256,Me,ke):Qn(pe,256,Me,ke)),Y=ie,pe=ge,255&(y>>=8)&&(170&y?La(Te,320,Y,pe):Qn(Te,320,Y,pe)),N<d.Ub-1&&(r(se[ue].y,0,j,q+480,16),r(se[ue].f,0,H,K+224,8),r(se[ue].ea,0,ie,ge+224,8)),y=8*F*d.B,se=d.sa,ue=d.ta+16*I+16*F*d.R,Te=d.qa,Y=d.ra+8*I+y,pe=d.Ha,Me=d.Ia+8*I+y,y=0;16>y;++y)r(se,ue+y*d.R,j,q+32*y,16);for(y=0;8>y;++y)r(Te,Y+y*d.B,H,K+32*y,8),r(pe,Me+y*d.B,ie,ge+32*y,8)}}function Cs(d,f,y,I,N,F,j,q,H){var K=[0],ie=[0],ge=0,Y=H!=null?H.kd:0,se=H??new Le;if(d==null||12>y)return 7;se.data=d,se.w=f,se.ha=y,f=[f],y=[y],se.gb=[se.gb];e:{var ue=f,Te=y,pe=se.gb;if(e(d!=null),e(Te!=null),e(pe!=null),pe[0]=0,12<=Te[0]&&!t(d,ue[0],"RIFF")){if(t(d,ue[0]+8,"WEBP")){pe=3;break e}var Me=gt(d,ue[0]+4);if(12>Me||4294967286<Me){pe=3;break e}if(Y&&Me>Te[0]-8){pe=7;break e}pe[0]=Me,ue[0]+=12,Te[0]-=12}pe=0}if(pe!=0)return pe;for(Me=0<se.gb[0],y=y[0];;){e:{var ke=d;Te=f,pe=y;var qe=K,Ve=ie,vt=ue=[0];if((lt=ge=[ge])[0]=0,8>pe[0])pe=7;else{if(!t(ke,Te[0],"VP8X")){if(gt(ke,Te[0]+4)!=10){pe=3;break e}if(18>pe[0]){pe=7;break e}var it=gt(ke,Te[0]+8),sn=1+Qe(ke,Te[0]+12);if(2147483648<=sn*(ke=1+Qe(ke,Te[0]+15))){pe=3;break e}vt!=null&&(vt[0]=it),qe!=null&&(qe[0]=sn),Ve!=null&&(Ve[0]=ke),Te[0]+=18,pe[0]-=18,lt[0]=1}pe=0}}if(ge=ge[0],ue=ue[0],pe!=0)return pe;if(Te=!!(2&ue),!Me&&ge)return 3;if(F!=null&&(F[0]=!!(16&ue)),j!=null&&(j[0]=Te),q!=null&&(q[0]=0),j=K[0],ue=ie[0],ge&&Te&&H==null){pe=0;break}if(4>y){pe=7;break}if(Me&&ge||!Me&&!ge&&!t(d,f[0],"ALPH")){y=[y],se.na=[se.na],se.P=[se.P],se.Sa=[se.Sa];e:{it=d,pe=f,Me=y;var lt=se.gb;qe=se.na,Ve=se.P,vt=se.Sa,sn=22,e(it!=null),e(Me!=null),ke=pe[0];var yn=Me[0];for(e(qe!=null),e(vt!=null),qe[0]=null,Ve[0]=null,vt[0]=0;;){if(pe[0]=ke,Me[0]=yn,8>yn){pe=7;break e}var oi=gt(it,ke+4);if(4294967286<oi){pe=3;break e}var an=8+oi+1&-2;if(sn+=an,0<lt&&sn>lt){pe=3;break e}if(!t(it,ke,"VP8 ")||!t(it,ke,"VP8L")){pe=0;break e}if(yn[0]<an){pe=7;break e}t(it,ke,"ALPH")||(qe[0]=it,Ve[0]=ke+8,vt[0]=oi),ke+=an,yn-=an}}if(y=y[0],se.na=se.na[0],se.P=se.P[0],se.Sa=se.Sa[0],pe!=0)break}y=[y],se.Ja=[se.Ja],se.xa=[se.xa];e:if(lt=d,pe=f,Me=y,qe=se.gb[0],Ve=se.Ja,vt=se.xa,it=pe[0],ke=!t(lt,it,"VP8 "),sn=!t(lt,it,"VP8L"),e(lt!=null),e(Me!=null),e(Ve!=null),e(vt!=null),8>Me[0])pe=7;else{if(ke||sn){if(lt=gt(lt,it+4),12<=qe&&lt>qe-12){pe=3;break e}if(Y&&lt>Me[0]-8){pe=7;break e}Ve[0]=lt,pe[0]+=8,Me[0]-=8,vt[0]=sn}else vt[0]=5<=Me[0]&&lt[it+0]==47&&!(lt[it+4]>>5),Ve[0]=Me[0];pe=0}if(y=y[0],se.Ja=se.Ja[0],se.xa=se.xa[0],f=f[0],pe!=0)break;if(4294967286<se.Ja)return 3;if(q==null||Te||(q[0]=se.xa?2:1),j=[j],ue=[ue],se.xa){if(5>y){pe=7;break}q=j,Y=ue,Te=F,d==null||5>y?d=0:5<=y&&d[f+0]==47&&!(d[f+4]>>5)?(Me=[0],lt=[0],qe=[0],De(Ve=new Q,d,f,y),rr(Ve,Me,lt,qe)?(q!=null&&(q[0]=Me[0]),Y!=null&&(Y[0]=lt[0]),Te!=null&&(Te[0]=qe[0]),d=1):d=0):d=0}else{if(10>y){pe=7;break}q=ue,d==null||10>y||!Wu(d,f+3,y-3)?d=0:(Y=d[f+0]|d[f+1]<<8|d[f+2]<<16,Te=16383&(d[f+7]<<8|d[f+6]),d=16383&(d[f+9]<<8|d[f+8]),1&Y||3<(Y>>1&7)||!(Y>>4&1)||Y>>5>=se.Ja||!Te||!d?d=0:(j&&(j[0]=Te),q&&(q[0]=d),d=1))}if(!d||(j=j[0],ue=ue[0],ge&&(K[0]!=j||ie[0]!=ue)))return 3;H!=null&&(H[0]=se,H.offset=f-H.w,e(4294967286>f-H.w),e(H.offset==H.ha-y));break}return pe==0||pe==7&&ge&&H==null?(F!=null&&(F[0]|=se.na!=null&&0<se.na.length),I!=null&&(I[0]=j),N!=null&&(N[0]=ue),0):pe}function Tc(d,f,y){var I=f.width,N=f.height,F=0,j=0,q=I,H=N;if(f.Da=d!=null&&0<d.Da,f.Da&&(q=d.cd,H=d.bd,F=d.v,j=d.j,11>y||(F&=-2,j&=-2),0>F||0>j||0>=q||0>=H||F+q>I||j+H>N))return 0;if(f.v=F,f.j=j,f.va=F+q,f.o=j+H,f.U=q,f.T=H,f.da=d!=null&&0<d.da,f.da){if(!St(q,H,y=[d.ib],F=[d.hb]))return 0;f.ib=y[0],f.hb=F[0]}return f.ob=d!=null&&d.ob,f.Kb=d==null||!d.Sd,f.da&&(f.ob=f.ib<3*I/4&&f.hb<3*N/4,f.Kb=0),1}function Lp(d){if(d==null)return 2;if(11>d.S){var f=d.f.RGBA;f.fb+=(d.height-1)*f.A,f.A=-f.A}else f=d.f.kb,d=d.height,f.O+=(d-1)*f.fa,f.fa=-f.fa,f.N+=(d-1>>1)*f.Ab,f.Ab=-f.Ab,f.W+=(d-1>>1)*f.Db,f.Db=-f.Db,f.F!=null&&(f.J+=(d-1)*f.lb,f.lb=-f.lb);return 0}function Dl(d,f,y,I){if(I==null||0>=d||0>=f)return 2;if(y!=null){if(y.Da){var N=y.cd,F=y.bd,j=-2&y.v,q=-2&y.j;if(0>j||0>q||0>=N||0>=F||j+N>d||q+F>f)return 2;d=N,f=F}if(y.da){if(!St(d,f,N=[y.ib],F=[y.hb]))return 2;d=N[0],f=F[0]}}I.width=d,I.height=f;e:{var H=I.width,K=I.height;if(d=I.S,0>=H||0>=K||!(d>=j0&&13>d))d=2;else{if(0>=I.Rd&&I.sd==null){j=F=N=f=0;var ie=(q=H*zA[d])*K;if(11>d||(F=(K+1)/2*(f=(H+1)/2),d==12&&(j=(N=H)*K)),(K=o(ie+2*F+j))==null){d=1;break e}I.sd=K,11>d?((H=I.f.RGBA).eb=K,H.fb=0,H.A=q,H.size=ie):((H=I.f.kb).y=K,H.O=0,H.fa=q,H.Fd=ie,H.f=K,H.N=0+ie,H.Ab=f,H.Cd=F,H.ea=K,H.W=0+ie+F,H.Db=f,H.Ed=F,d==12&&(H.F=K,H.J=0+ie+2*F),H.Tc=j,H.lb=N)}if(f=1,N=I.S,F=I.width,j=I.height,N>=j0&&13>N)if(11>N)d=I.f.RGBA,f&=(q=Math.abs(d.A))*(j-1)+F<=d.size,f&=q>=F*zA[N],f&=d.eb!=null;else{d=I.f.kb,q=(F+1)/2,ie=(j+1)/2,H=Math.abs(d.fa),K=Math.abs(d.Ab);var ge=Math.abs(d.Db),Y=Math.abs(d.lb),se=Y*(j-1)+F;f&=H*(j-1)+F<=d.Fd,f&=K*(ie-1)+q<=d.Cd,f=(f&=ge*(ie-1)+q<=d.Ed)&H>=F&K>=q&ge>=q,f&=d.y!=null,f&=d.f!=null,f&=d.ea!=null,N==12&&(f&=Y>=F,f&=se<=d.Tc,f&=d.F!=null)}else f=0;d=f?0:2}}return d!=0||y!=null&&y.fd&&(d=Lp(I)),d}var Zu=64,Go=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ko=24,Tl=32,Ac=8,Al=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];nt("Predictor0","PredictorAdd0"),D.Predictor0=function(){return 4278190080},D.Predictor1=function(d){return d},D.Predictor2=function(d,f,y){return f[y+0]},D.Predictor3=function(d,f,y){return f[y+1]},D.Predictor4=function(d,f,y){return f[y-1]},D.Predictor5=function(d,f,y){return _t(_t(d,f[y+1]),f[y+0])},D.Predictor6=function(d,f,y){return _t(d,f[y-1])},D.Predictor7=function(d,f,y){return _t(d,f[y+0])},D.Predictor8=function(d,f,y){return _t(f[y-1],f[y+0])},D.Predictor9=function(d,f,y){return _t(f[y+0],f[y+1])},D.Predictor10=function(d,f,y){return _t(_t(d,f[y-1]),_t(f[y+0],f[y+1]))},D.Predictor11=function(d,f,y){var I=f[y+0];return 0>=Vt(I>>24&255,d>>24&255,(f=f[y-1])>>24&255)+Vt(I>>16&255,d>>16&255,f>>16&255)+Vt(I>>8&255,d>>8&255,f>>8&255)+Vt(255&I,255&d,255&f)?I:d},D.Predictor12=function(d,f,y){var I=f[y+0];return(wn((d>>24&255)+(I>>24&255)-((f=f[y-1])>>24&255))<<24|wn((d>>16&255)+(I>>16&255)-(f>>16&255))<<16|wn((d>>8&255)+(I>>8&255)-(f>>8&255))<<8|wn((255&d)+(255&I)-(255&f)))>>>0},D.Predictor13=function(d,f,y){var I=f[y-1];return(ln((d=_t(d,f[y+0]))>>24&255,I>>24&255)<<24|ln(d>>16&255,I>>16&255)<<16|ln(d>>8&255,I>>8&255)<<8|ln(255&d,255&I))>>>0};var Fp=D.PredictorAdd0;D.PredictorAdd1=At,nt("Predictor2","PredictorAdd2"),nt("Predictor3","PredictorAdd3"),nt("Predictor4","PredictorAdd4"),nt("Predictor5","PredictorAdd5"),nt("Predictor6","PredictorAdd6"),nt("Predictor7","PredictorAdd7"),nt("Predictor8","PredictorAdd8"),nt("Predictor9","PredictorAdd9"),nt("Predictor10","PredictorAdd10"),nt("Predictor11","PredictorAdd11"),nt("Predictor12","PredictorAdd12"),nt("Predictor13","PredictorAdd13");var Sh=D.PredictorAdd2;ft("ColorIndexInverseTransform","MapARGB","32b",function(d){return d>>8&255},function(d){return d}),ft("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(d){return d},function(d){return d>>8&255});var kr,L0=D.ColorIndexInverseTransform,Ra=D.MapARGB,Oa=D.VP8LColorIndexInverseTransformAlpha,Vp=D.MapAlpha,jp=D.VP8LPredictorsAdd=[];jp.length=16,(D.VP8LPredictors=[]).length=16,(D.VP8LPredictorsAdd_C=[]).length=16,(D.VP8LPredictors_C=[]).length=16;var Bp,Up,Ml,Pl,Nl,Ju,kl,Xu,xs,La,Nn,Qn,Rr,ii,Mc,zp,Dh,F0,mA,vA,yA,_A,wA,bA,qp,IA,EA,CA,xA=o(511),SA=o(2041),DA=o(225),TA=o(767),AA=0,gb=SA,V0=DA,Yo=TA,Ss=xA,j0=0,B0=1,MA=2,U0=3,z0=4,mb=5,PA=6,vb=7,yb=8,q0=9,_b=10,yV=[2,3,7],_V=[3,3,11],NA=[280,256,256,256,40],wV=[0,1,1,1,0],bV=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],IV=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],EV=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],CV=8,wb=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],bb=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Hp=null,xV=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],SV=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],kA=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],DV=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],TV=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],AV=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],MV=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Rl=[],Zs=[],Pc=[],PV=1,RA=2,Ol=[],Ds=[];Es("UpsampleRgbLinePair",z,3),Es("UpsampleBgrLinePair",ae,3),Es("UpsampleRgbaLinePair",Lt,4),Es("UpsampleBgraLinePair",vr,4),Es("UpsampleArgbLinePair",xn,4),Es("UpsampleRgba4444LinePair",We,2),Es("UpsampleRgb565LinePair",ye,2);var NV=D.UpsampleRgbLinePair,kV=D.UpsampleBgrLinePair,OA=D.UpsampleRgbaLinePair,LA=D.UpsampleBgraLinePair,FA=D.UpsampleArgbLinePair,VA=D.UpsampleRgba4444LinePair,RV=D.UpsampleRgb565LinePair,H0=16,$0=1<<H0-1,$p=-227,Ib=482,jA=6,OV=(256<<jA)-1,BA=0,LV=o(256),FV=o(256),VV=o(256),jV=o(256),BV=o(Ib-$p),UV=o(Ib-$p);er("YuvToRgbRow",z,3),er("YuvToBgrRow",ae,3),er("YuvToRgbaRow",Lt,4),er("YuvToBgraRow",vr,4),er("YuvToArgbRow",xn,4),er("YuvToRgba4444Row",We,2),er("YuvToRgb565Row",ye,2);var UA=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],W0=[0,2,8],zV=[8,7,6,4,4,2,2,2,1,1,1,1],qV=1;this.WebPDecodeRGBA=function(d,f,y,I,N){var F=B0,j=new Ae,q=new $t;j.ba=q,q.S=F,q.width=[q.width],q.height=[q.height];var H=q.width,K=q.height,ie=new xt;if(ie==null||d==null)var ge=2;else e(ie!=null),ge=Cs(d,f,y,ie.width,ie.height,ie.Pd,ie.Qd,ie.format,null);if(ge!=0?H=0:(H!=null&&(H[0]=ie.width[0]),K!=null&&(K[0]=ie.height[0]),H=1),H){q.width=q.width[0],q.height=q.height[0],I!=null&&(I[0]=q.width),N!=null&&(N[0]=q.height);e:{if(I=new Ma,(N=new Le).data=d,N.w=f,N.ha=y,N.kd=1,f=[0],e(N!=null),((d=Cs(N.data,N.w,N.ha,null,null,null,f,null,N))==0||d==7)&&f[0]&&(d=4),(f=d)==0){if(e(j!=null),I.data=N.data,I.w=N.w+N.offset,I.ha=N.ha-N.offset,I.put=wt,I.ac=jo,I.bc=vs,I.ma=j,N.xa){if((d=Ri())==null){j=1;break e}if((function(Y,se){var ue=[0],Te=[0],pe=[0];t:for(;;){if(Y==null)return 0;if(se==null)return Y.a=2,0;if(Y.l=se,Y.a=0,De(Y.m,se.data,se.w,se.ha),!rr(Y.m,ue,Te,pe)){Y.a=3;break t}if(Y.xb=RA,se.width=ue[0],se.height=Te[0],!Uo(ue[0],Te[0],1,Y,null))break t;return 1}return e(Y.a!=0),0})(d,I)){if(I=(f=Dl(I.width,I.height,j.Oa,j.ba))==0){t:{I=d;n:for(;;){if(I==null){I=0;break t}if(e(I.s.yc!=null),e(I.s.Ya!=null),e(0<I.s.Wb),e((y=I.l)!=null),e((N=y.ma)!=null),I.xb!=0){if(I.ca=N.ba,I.tb=N.tb,e(I.ca!=null),!Tc(N.Oa,y,U0)){I.a=2;break n}if(!Da(I,y.width)||y.da)break n;if((y.da||Dt(I.ca.S))&&ir(),11>I.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),I.ca.f.kb.F!=null&&ir()),I.Pb&&0<I.s.ua&&I.s.vb.X==null&&!W(I.s.vb,I.s.Wa.Xa)){I.a=1;break n}I.xb=0}if(!eo(I,I.V,I.Ba,I.c,I.i,y.o,Sa))break n;N.Dc=I.Ma,I=1;break t}e(I.a!=0),I=0}I=!I}I&&(f=d.a)}else f=d.a}else{if((d=new $u)==null){j=1;break e}if(d.Fa=N.na,d.P=N.P,d.qc=N.Sa,_s(d,I)){if((f=Dl(I.width,I.height,j.Oa,j.ba))==0){if(d.Aa=0,y=j.Oa,e((N=d)!=null),y!=null){if(0<(H=0>(H=y.Md)?0:100<H?255:255*H/100)){for(K=ie=0;4>K;++K)12>(ge=N.pb[K]).lc&&(ge.ia=H*zV[0>ge.lc?0:ge.lc]>>3),ie|=ge.ia;ie&&(alert("todo:VP8InitRandom"),N.ia=1)}N.Ga=y.Id,100<N.Ga?N.Ga=100:0>N.Ga&&(N.Ga=0)}(function(Y,se){if(Y==null)return 0;if(se==null)return gr(Y,2,"NULL VP8Io parameter in VP8Decode().");if(!Y.cb&&!_s(Y,se))return 0;if(e(Y.cb),se.ac==null||se.ac(se)){se.ob&&(Y.L=0);var ue=W0[Y.L];if(Y.L==2?(Y.yb=0,Y.zb=0):(Y.yb=se.v-ue>>4,Y.zb=se.j-ue>>4,0>Y.yb&&(Y.yb=0),0>Y.zb&&(Y.zb=0)),Y.Va=se.o+15+ue>>4,Y.Hb=se.va+15+ue>>4,Y.Hb>Y.za&&(Y.Hb=Y.za),Y.Va>Y.Ub&&(Y.Va=Y.Ub),0<Y.L){var Te=Y.ed;for(ue=0;4>ue;++ue){var pe;if(Y.Qa.Cb){var Me=Y.Qa.Lb[ue];Y.Qa.Fb||(Me+=Te.Tb)}else Me=Te.Tb;for(pe=0;1>=pe;++pe){var ke=Y.gd[ue][pe],qe=Me;if(Te.Pc&&(qe+=Te.vd[0],pe&&(qe+=Te.od[0])),0<(qe=0>qe?0:63<qe?63:qe)){var Ve=qe;0<Te.wb&&(Ve=4<Te.wb?Ve>>2:Ve>>1)>9-Te.wb&&(Ve=9-Te.wb),1>Ve&&(Ve=1),ke.dd=Ve,ke.tc=2*qe+Ve,ke.ld=40<=qe?2:15<=qe?1:0}else ke.tc=0;ke.La=pe}}}ue=0}else gr(Y,6,"Frame setup failed"),ue=Y.a;if(ue=ue==0){if(ue){Y.$c=0,0<Y.Aa||(Y.Ic=qV);t:{ue=Y.Ic,Te=4*(Ve=Y.za);var vt=32*Ve,it=Ve+1,sn=0<Y.L?Ve*(0<Y.Aa?2:1):0,lt=(Y.Aa==2?2:1)*Ve;if((ke=Te+832+(pe=3*(16*ue+W0[Y.L])/2*vt)+(Me=Y.Fa!=null&&0<Y.Fa.length?Y.Kc.c*Y.Kc.i:0))!=ke)ue=0;else{if(ke>Y.Vb){if(Y.Vb=0,Y.Ec=o(ke),Y.Fc=0,Y.Ec==null){ue=gr(Y,1,"no memory during frame initialization.");break t}Y.Vb=ke}ke=Y.Ec,qe=Y.Fc,Y.Ac=ke,Y.Bc=qe,qe+=Te,Y.Gd=s(vt,qu),Y.Hd=0,Y.rb=s(it+1,$s),Y.sb=1,Y.wa=sn?s(sn,Oi):null,Y.Y=0,Y.D.Nb=0,Y.D.wa=Y.wa,Y.D.Y=Y.Y,0<Y.Aa&&(Y.D.Y+=Ve),e(!0),Y.oc=ke,Y.pc=qe,qe+=832,Y.ya=s(lt,bc),Y.aa=0,Y.D.ya=Y.ya,Y.D.aa=Y.aa,Y.Aa==2&&(Y.D.aa+=Ve),Y.R=16*Ve,Y.B=8*Ve,Ve=(vt=W0[Y.L])*Y.R,vt=vt/2*Y.B,Y.sa=ke,Y.ta=qe+Ve,Y.qa=Y.sa,Y.ra=Y.ta+16*ue*Y.R+vt,Y.Ha=Y.qa,Y.Ia=Y.ra+8*ue*Y.B+vt,Y.$c=0,qe+=pe,Y.mb=Me?ke:null,Y.nb=Me?qe:null,e(qe+Me<=Y.Fc+Y.Vb),Gu(Y),i(Y.Ac,Y.Bc,0,Te),ue=1}}if(ue){if(se.ka=0,se.y=Y.sa,se.O=Y.ta,se.f=Y.qa,se.N=Y.ra,se.ea=Y.Ha,se.Vd=Y.Ia,se.fa=Y.R,se.Rc=Y.B,se.F=null,se.J=0,!AA){for(ue=-255;255>=ue;++ue)xA[255+ue]=0>ue?-ue:ue;for(ue=-1020;1020>=ue;++ue)SA[1020+ue]=-128>ue?-128:127<ue?127:ue;for(ue=-112;112>=ue;++ue)DA[112+ue]=-16>ue?-16:15<ue?15:ue;for(ue=-255;510>=ue;++ue)TA[255+ue]=0>ue?0:255<ue?255:ue;AA=1}kl=ws,Xu=bl,La=qo,Nn=Pn,Qn=Ic,xs=wl,Rr=Qu,ii=Ys,Mc=M,zp=G,Dh=Dc,F0=m,mA=ne,vA=le,yA=Is,_A=xl,wA=bo,bA=Yu,Zs[0]=kp,Zs[1]=Mp,Zs[2]=Pa,Zs[3]=Np,Zs[4]=Ws,Zs[5]=Rp,Zs[6]=di,Zs[7]=Op,Zs[8]=Na,Zs[9]=bs,Rl[0]=Ec,Rl[1]=Pp,Rl[2]=Ku,Rl[3]=Ih,Rl[4]=Li,Rl[5]=Il,Rl[6]=Eh,Pc[0]=Ch,Pc[1]=bh,Pc[2]=ka,Pc[3]=Cc,Pc[4]=Hn,Pc[5]=xc,Pc[6]=xh,ue=1}else ue=0}ue&&(ue=(function(yn,oi){for(yn.M=0;yn.M<yn.Va;++yn.M){var an,ut=yn.Jc[yn.M&yn.Xb],Ke=yn.m,Or=yn;for(an=0;an<Or.za;++an){var Jt=Ke,In=Or,or=In.Ac,Ci=In.Bc+4*an,io=In.zc,Cr=In.ya[In.aa+an];if(In.Qa.Bb?Cr.$b=Ne(Jt,In.Pa.jb[0])?2+Ne(Jt,In.Pa.jb[2]):Ne(Jt,In.Pa.jb[1]):Cr.$b=0,In.kc&&(Cr.Ad=Ne(Jt,In.Bd)),Cr.Za=!Ne(Jt,145)+0,Cr.Za){var Fi=Cr.Ob,oo=0;for(In=0;4>In;++In){var si,Sn=io[0+In];for(si=0;4>si;++si){Sn=TV[or[Ci+si]][Sn];for(var Fn=kA[Ne(Jt,Sn[0])];0<Fn;)Fn=kA[2*Fn+Ne(Jt,Sn[Fn])];Sn=-Fn,or[Ci+si]=Sn}r(Fi,oo,or,Ci,4),oo+=4,io[0+In]=Sn}}else Sn=Ne(Jt,156)?Ne(Jt,128)?1:3:Ne(Jt,163)?2:0,Cr.Ob[0]=Sn,i(or,Ci,Sn,4),i(io,0,Sn,4);Cr.Dd=Ne(Jt,142)?Ne(Jt,114)?Ne(Jt,183)?1:3:2:0}if(Or.m.Ka)return gr(yn,7,"Premature end-of-partition0 encountered.");for(;yn.ja<yn.za;++yn.ja){if(Or=ut,Jt=(Ke=yn).rb[Ke.sb-1],or=Ke.rb[Ke.sb+Ke.ja],an=Ke.ya[Ke.aa+Ke.ja],Ci=Ke.kc?an.Ad:0)Jt.la=or.la=0,an.Za||(Jt.Na=or.Na=0),an.Hc=0,an.Gc=0,an.ia=0;else{var xr,Vn;if(Jt=or,or=Or,Ci=Ke.Pa.Xc,io=Ke.ya[Ke.aa+Ke.ja],Cr=Ke.pb[io.$b],In=io.ad,Fi=0,oo=Ke.rb[Ke.sb-1],Sn=si=0,i(In,Fi,0,384),io.Za)var xi=0,Js=Ci[3];else{Fn=o(16);var Lr=Jt.Na+oo.Na;if(Lr=Hp(or,Ci[1],Lr,Cr.Eb,0,Fn,0),Jt.Na=oo.Na=(0<Lr)+0,1<Lr)kl(Fn,0,In,Fi);else{var Eo=Fn[0]+3>>3;for(Fn=0;256>Fn;Fn+=16)In[Fi+Fn]=Eo}xi=1,Js=Ci[0]}var Zn=15&Jt.la,ai=15&oo.la;for(Fn=0;4>Fn;++Fn){var Qo=1&ai;for(Eo=Vn=0;4>Eo;++Eo)Zn=Zn>>1|(Qo=(Lr=Hp(or,Js,Lr=Qo+(1&Zn),Cr.Sc,xi,In,Fi))>xi)<<7,Vn=Vn<<2|(3<Lr?3:1<Lr?2:In[Fi+0]!=0),Fi+=16;Zn>>=4,ai=ai>>1|Qo<<7,si=(si<<8|Vn)>>>0}for(Js=Zn,xi=ai>>4,xr=0;4>xr;xr+=2){for(Vn=0,Zn=Jt.la>>4+xr,ai=oo.la>>4+xr,Fn=0;2>Fn;++Fn){for(Qo=1&ai,Eo=0;2>Eo;++Eo)Lr=Qo+(1&Zn),Zn=Zn>>1|(Qo=0<(Lr=Hp(or,Ci[2],Lr,Cr.Qc,0,In,Fi)))<<3,Vn=Vn<<2|(3<Lr?3:1<Lr?2:In[Fi+0]!=0),Fi+=16;Zn>>=2,ai=ai>>1|Qo<<5}Sn|=Vn<<4*xr,Js|=Zn<<4<<xr,xi|=(240&ai)<<xr}Jt.la=Js,oo.la=xi,io.Hc=si,io.Gc=Sn,io.ia=43690&Sn?0:Cr.ia,Ci=!(si|Sn)}if(0<Ke.L&&(Ke.wa[Ke.Y+Ke.ja]=Ke.gd[an.$b][an.Za],Ke.wa[Ke.Y+Ke.ja].La|=!Ci),Or.Ka)return gr(yn,7,"Premature end-of-file encountered.")}if(Gu(yn),Ke=oi,Or=1,an=(ut=yn).D,Jt=0<ut.L&&ut.M>=ut.zb&&ut.M<=ut.Va,ut.Aa==0)t:{if(an.M=ut.M,an.uc=Jt,ar(ut,an),Or=1,an=(Vn=ut.D).Nb,Jt=(Sn=W0[ut.L])*ut.R,or=Sn/2*ut.B,Fn=16*an*ut.R,Eo=8*an*ut.B,Ci=ut.sa,io=ut.ta-Jt+Fn,Cr=ut.qa,In=ut.ra-or+Eo,Fi=ut.Ha,oo=ut.Ia-or+Eo,ai=(Zn=Vn.M)==0,si=Zn>=ut.Va-1,ut.Aa==2&&ar(ut,Vn),Vn.uc)for(Qo=(Lr=ut).D.M,e(Lr.D.uc),Vn=Lr.yb;Vn<Lr.Hb;++Vn){xi=Vn,Js=Qo;var so=(Zo=(Si=Lr).D).Nb;xr=Si.R;var Zo=Zo.wa[Zo.Y+xi],Jo=Si.sa,Co=Si.ta+16*so*xr+16*xi,Xo=Zo.dd,tr=Zo.tc;if(tr!=0)if(e(3<=tr),Si.L==1)0<xi&&_A(Jo,Co,xr,tr+4),Zo.La&&bA(Jo,Co,xr,tr),0<Js&&yA(Jo,Co,xr,tr+4),Zo.La&&wA(Jo,Co,xr,tr);else{var es=Si.B,Xs=Si.qa,ed=Si.ra+8*so*es+8*xi,Nc=Si.Ha,Si=Si.Ia+8*so*es+8*xi;so=Zo.ld,0<xi&&(ii(Jo,Co,xr,tr+4,Xo,so),zp(Xs,ed,Nc,Si,es,tr+4,Xo,so)),Zo.La&&(F0(Jo,Co,xr,tr,Xo,so),vA(Xs,ed,Nc,Si,es,tr,Xo,so)),0<Js&&(Rr(Jo,Co,xr,tr+4,Xo,so),Mc(Xs,ed,Nc,Si,es,tr+4,Xo,so)),Zo.La&&(Dh(Jo,Co,xr,tr,Xo,so),mA(Xs,ed,Nc,Si,es,tr,Xo,so))}}if(ut.ia&&alert("todo:DitherRow"),Ke.put!=null){if(Vn=16*Zn,Zn=16*(Zn+1),ai?(Ke.y=ut.sa,Ke.O=ut.ta+Fn,Ke.f=ut.qa,Ke.N=ut.ra+Eo,Ke.ea=ut.Ha,Ke.W=ut.Ia+Eo):(Vn-=Sn,Ke.y=Ci,Ke.O=io,Ke.f=Cr,Ke.N=In,Ke.ea=Fi,Ke.W=oo),si||(Zn-=Sn),Zn>Ke.o&&(Zn=Ke.o),Ke.F=null,Ke.J=null,ut.Fa!=null&&0<ut.Fa.length&&Vn<Zn&&(Ke.J=Ln(ut,Ke,Vn,Zn-Vn),Ke.F=ut.mb,Ke.F==null&&Ke.F.length==0)){Or=gr(ut,3,"Could not decode alpha data.");break t}Vn<Ke.j&&(Sn=Ke.j-Vn,Vn=Ke.j,e(!(1&Sn)),Ke.O+=ut.R*Sn,Ke.N+=ut.B*(Sn>>1),Ke.W+=ut.B*(Sn>>1),Ke.F!=null&&(Ke.J+=Ke.width*Sn)),Vn<Zn&&(Ke.O+=Ke.v,Ke.N+=Ke.v>>1,Ke.W+=Ke.v>>1,Ke.F!=null&&(Ke.J+=Ke.v),Ke.ka=Vn-Ke.j,Ke.U=Ke.va-Ke.v,Ke.T=Zn-Vn,Or=Ke.put(Ke))}an+1!=ut.Ic||si||(r(ut.sa,ut.ta-Jt,Ci,io+16*ut.R,Jt),r(ut.qa,ut.ra-or,Cr,In+8*ut.B,or),r(ut.Ha,ut.Ia-or,Fi,oo+8*ut.B,or))}if(!Or)return gr(yn,6,"Output aborted.")}return 1})(Y,se)),se.bc!=null&&se.bc(se),ue&=1}return ue?(Y.cb=0,ue):0})(d,I)||(f=d.a)}}else f=d.a}f==0&&j.Oa!=null&&j.Oa.fd&&(f=Lp(j.ba))}j=f}F=j!=0?null:11>F?q.f.RGBA.eb:q.f.kb.y}else F=null;return F};var zA=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function l(D,U){for(var E="",T=0;T<4;T++)E+=String.fromCharCode(D[U++]);return E}function u(D,U){return D[U+0]|D[U+1]<<8}function g(D,U){return(D[U+0]|D[U+1]<<8|D[U+2]<<16)>>>0}function v(D,U){return(D[U+0]|D[U+1]<<8|D[U+2]<<16|D[U+3]<<24)>>>0}new c;var p=[0],S=[0],k=[],L=new c,R=n,J=(function(D,U){var E={},T=0,A=!1,te=0,ve=0;if(E.frames=[],!(function(V,Q){for(var ee=0;ee<4;ee++)if(V[Q+ee]!="RIFF".charCodeAt(ee))return!0;return!1})(D,U)){for(v(D,U+=4),U+=8;U<D.length;){var Se=l(D,U),Ce=v(D,U+=4);U+=4;var fe=Ce+(1&Ce);switch(Se){case"VP8 ":case"VP8L":E.frames[T]===void 0&&(E.frames[T]={}),(Fe=E.frames[T]).src_off=A?ve:U-8,Fe.src_size=te+Ce+8,T++,A&&(A=!1,te=0,ve=0);break;case"VP8X":(Fe=E.header={}).feature_flags=D[U];var De=U+4;Fe.canvas_width=1+g(D,De),De+=3,Fe.canvas_height=1+g(D,De),De+=3;break;case"ALPH":A=!0,te=fe+8,ve=U-8;break;case"ANIM":(Fe=E.header).bgcolor=v(D,U),De=U+4,Fe.loop_count=u(D,De),De+=2;break;case"ANMF":var $e,Fe;(Fe=E.frames[T]={}).offset_x=2*g(D,U),U+=3,Fe.offset_y=2*g(D,U),U+=3,Fe.width=1+g(D,U),U+=3,Fe.height=1+g(D,U),U+=3,Fe.duration=g(D,U),U+=3,$e=D[U++],Fe.dispose=1&$e,Fe.blend=$e>>1&1}Se!="ANMF"&&(U+=fe)}return E}})(R,0);J.response=R,J.rgbaoutput=!0,J.dataurl=!1;var X=J.header?J.header:null,Z=J.frames?J.frames:null;if(X){X.loop_counter=X.loop_count,p=[X.canvas_height],S=[X.canvas_width];for(var me=0;me<Z.length&&Z[me].blend!=0;me++);}var be=Z[0],$=L.WebPDecodeRGBA(R,be.src_off,be.src_size,S,p);be.rgba=$,be.imgwidth=S[0],be.imgheight=p[0];for(var P=0;P<S[0]*p[0]*4;P++)k[P]=$[P];return this.width=S,this.height=p,this.data=k,this}(function(n){var e,t,r,i,o,s,a,c,l,u=function(V){return V=V||{},this.isStrokeTransparent=V.isStrokeTransparent||!1,this.strokeOpacity=V.strokeOpacity||1,this.strokeStyle=V.strokeStyle||"#000000",this.fillStyle=V.fillStyle||"#000000",this.isFillTransparent=V.isFillTransparent||!1,this.fillOpacity=V.fillOpacity||1,this.font=V.font||"10px sans-serif",this.textBaseline=V.textBaseline||"alphabetic",this.textAlign=V.textAlign||"left",this.lineWidth=V.lineWidth||1,this.lineJoin=V.lineJoin||"miter",this.lineCap=V.lineCap||"butt",this.path=V.path||[],this.transform=V.transform!==void 0?V.transform.clone():new c,this.globalCompositeOperation=V.globalCompositeOperation||"normal",this.globalAlpha=V.globalAlpha||1,this.clip_path=V.clip_path||[],this.currentPoint=V.currentPoint||new s,this.miterLimit=V.miterLimit||10,this.lastPoint=V.lastPoint||new s,this.lineDashOffset=V.lineDashOffset||0,this.lineDash=V.lineDash||[],this.margin=V.margin||[0,0,0,0],this.prevPageLastElemOffset=V.prevPageLastElemOffset||0,this.ignoreClearRect=typeof V.ignoreClearRect!="boolean"||V.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new g(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,s=this.internal.Point,a=this.internal.Rectangle,c=this.internal.Matrix,l=new u}]);var g=function(V){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Q=V;Object.defineProperty(this,"pdf",{get:function(){return Q}});var ee=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ee},set:function(W){ee=!!W}});var re=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return re},set:function(W){re=!!W}});var ce=0;Object.defineProperty(this,"posX",{get:function(){return ce},set:function(W){isNaN(W)||(ce=W)}});var de=0;Object.defineProperty(this,"posY",{get:function(){return de},set:function(W){isNaN(W)||(de=W)}}),Object.defineProperty(this,"margin",{get:function(){return l.margin},set:function(W){var Ye;typeof W=="number"?Ye=[W,W,W,W]:((Ye=new Array(4))[0]=W[0],Ye[1]=W.length>=2?W[1]:Ye[0],Ye[2]=W.length>=3?W[2]:Ye[0],Ye[3]=W.length>=4?W[3]:Ye[1]),l.margin=Ye}});var Ie=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ie},set:function(W){Ie=W}});var Ee=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ee},set:function(W){Ee=W}});var Ne=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ne},set:function(W){Ne=W}}),Object.defineProperty(this,"ctx",{get:function(){return l},set:function(W){W instanceof u&&(l=W)}}),Object.defineProperty(this,"path",{get:function(){return l.path},set:function(W){l.path=W}});var ze=[];Object.defineProperty(this,"ctxStack",{get:function(){return ze},set:function(W){ze=W}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(W){var Ye;Ye=v(W),this.ctx.fillStyle=Ye.style,this.ctx.isFillTransparent=Ye.a===0,this.ctx.fillOpacity=Ye.a,this.pdf.setFillColor(Ye.r,Ye.g,Ye.b,{a:Ye.a}),this.pdf.setTextColor(Ye.r,Ye.g,Ye.b,{a:Ye.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(W){var Ye=v(W);this.ctx.strokeStyle=Ye.style,this.ctx.isStrokeTransparent=Ye.a===0,this.ctx.strokeOpacity=Ye.a,Ye.a===0?this.pdf.setDrawColor(255,255,255):(Ye.a,this.pdf.setDrawColor(Ye.r,Ye.g,Ye.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(W){["butt","round","square"].indexOf(W)!==-1&&(this.ctx.lineCap=W,this.pdf.setLineCap(W))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(W){isNaN(W)||(this.ctx.lineWidth=W,this.pdf.setLineWidth(W))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(W){["bevel","round","miter"].indexOf(W)!==-1&&(this.ctx.lineJoin=W,this.pdf.setLineJoin(W))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(W){isNaN(W)||(this.ctx.miterLimit=W,this.pdf.setMiterLimit(W))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(W){this.ctx.textBaseline=W}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(W){["right","end","center","left","start"].indexOf(W)!==-1&&(this.ctx.textAlign=W)}});var Je=null,Qe=null,gt=null;Object.defineProperty(this,"fontFaces",{get:function(){return gt},set:function(W){Je=null,Qe=null,gt=W}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(W){var Ye;if(this.ctx.font=W,(Ye=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(W))!==null){var Zt=Ye[1];Ye[2];var St=Ye[3],je=Ye[4];Ye[5];var Ct=Ye[6],nt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(je)[2];je=Math.floor(nt==="px"?parseFloat(je)*this.pdf.internal.scaleFactor:nt==="em"?parseFloat(je)*this.pdf.getFontSize():parseFloat(je)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(je);var It=(function(ft){var pr,un,tn=[],nn=ft.trim();if(nn==="")return XT;if(nn in w8)return[w8[nn]];for(;nn!=="";){switch(un=null,pr=(nn=I8(nn)).charAt(0)){case'"':case"'":un=$ne(nn.substring(1),pr);break;default:un=Wne(nn)}if(un===null||(tn.push(un[0]),(nn=I8(un[1]))!==""&&nn.charAt(0)!==","))return XT;nn=nn.replace(/^,/,"")}return tn})(Ct);if(this.fontFaces){var _t=(function(ft,pr){var un=ft.getFontList(),tn=JSON.stringify(un);if(Je===null||Qe!==tn){var nn=(function(Un){var Et=[];return Object.keys(Un).forEach(function(zn){Un[zn].forEach(function(Dt){var zt=null;switch(Dt){case"bold":zt={family:zn,weight:"bold"};break;case"italic":zt={family:zn,style:"italic"};break;case"bolditalic":zt={family:zn,weight:"bold",style:"italic"};break;case"":case"normal":zt={family:zn}}zt!==null&&(zt.ref={name:zn,style:Dt},Et.push(zt))})}),Et})(un);Je=(function(Un){for(var Et={},zn=0;zn<Un.length;++zn){var Dt=JT(Un[zn]),zt=Dt.family,Yn=Dt.stretch,$t=Dt.style,xt=Dt.weight;Et[zt]=Et[zt]||{},Et[zt][Yn]=Et[zt][Yn]||{},Et[zt][Yn][$t]=Et[zt][Yn][$t]||{},Et[zt][Yn][$t][xt]=Dt}return Et})(nn.concat(pr)),Qe=tn}return Je})(this.pdf,this.fontFaces),wn=It.map(function(ft){return{family:ft,stretch:"normal",weight:St,style:Zt}}),ln=(function(ft,pr,un){for(var tn=(un=un||{}).defaultFontFamily||"times",nn=Object.assign({},Hne,un.genericFontFamilies||{}),Un=null,Et=null,zn=0;zn<pr.length;++zn)if(nn[(Un=JT(pr[zn])).family]&&(Un.family=nn[Un.family]),ft.hasOwnProperty(Un.family)){Et=ft[Un.family];break}if(!(Et=Et||ft[tn]))throw new Error("Could not find a font-family for the rule '"+b8(Un)+"' and default family '"+tn+"'.");if(Et=(function(Dt,zt){if(zt[Dt])return zt[Dt];var Yn=oA[Dt],$t=Yn<=oA.normal?-1:1,xt=_8(zt,$8,Yn,$t);if(!xt)throw new Error("Could not find a matching font-stretch value for "+Dt);return xt})(Un.stretch,Et),Et=(function(Dt,zt){if(zt[Dt])return zt[Dt];for(var Yn=H8[Dt],$t=0;$t<Yn.length;++$t)if(zt[Yn[$t]])return zt[Yn[$t]];throw new Error("Could not find a matching font-style for "+Dt)})(Un.style,Et),!(Et=(function(Dt,zt){if(zt[Dt])return zt[Dt];if(Dt===400&&zt[500])return zt[500];if(Dt===500&&zt[400])return zt[400];var Yn=qne[Dt],$t=_8(zt,W8,Yn,Dt<400?-1:1);if(!$t)throw new Error("Could not find a matching font-weight for value "+Dt);return $t})(Un.weight,Et)))throw new Error("Failed to resolve a font for the rule '"+b8(Un)+"'.");return Et})(_t,wn);this.pdf.setFont(ln.ref.name,ln.ref.style)}else{var Vt="";(St==="bold"||parseInt(St,10)>=700||Zt==="bold")&&(Vt="bold"),Zt==="italic"&&(Vt+="italic"),Vt.length===0&&(Vt="normal");for(var At="",Mt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ot=0;ot<It.length;ot++){if(this.pdf.internal.getFont(It[ot],Vt,{noFallback:!0,disableWarning:!0})!==void 0){At=It[ot];break}if(Vt==="bolditalic"&&this.pdf.internal.getFont(It[ot],"bold",{noFallback:!0,disableWarning:!0})!==void 0)At=It[ot],Vt="bold";else if(this.pdf.internal.getFont(It[ot],"normal",{noFallback:!0,disableWarning:!0})!==void 0){At=It[ot],Vt="normal";break}}if(At===""){for(var Ht=0;Ht<It.length;Ht++)if(Mt[It[Ht]]){At=Mt[It[Ht]];break}}At=At===""?"Times":At,this.pdf.setFont(At,Vt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(W){this.ctx.globalCompositeOperation=W}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(W){this.ctx.globalAlpha=W}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(W){this.ctx.lineDashOffset=W,Fe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(W){this.ctx.lineDash=W,Fe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(W){this.ctx.ignoreClearRect=!!W}})};g.prototype.setLineDash=function(V){this.lineDash=V},g.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},g.prototype.fill=function(){Z.call(this,"fill",!1)},g.prototype.stroke=function(){Z.call(this,"stroke",!1)},g.prototype.beginPath=function(){this.path=[{type:"begin"}]},g.prototype.moveTo=function(V,Q){if(isNaN(V)||isNaN(Q))throw Jn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ee=this.ctx.transform.applyToPoint(new s(V,Q));this.path.push({type:"mt",x:ee.x,y:ee.y}),this.ctx.lastPoint=new s(V,Q)},g.prototype.closePath=function(){var V=new s(0,0),Q=0;for(Q=this.path.length-1;Q!==-1;Q--)if(this.path[Q].type==="begin"&&Wn(this.path[Q+1])==="object"&&typeof this.path[Q+1].x=="number"){V=new s(this.path[Q+1].x,this.path[Q+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(V.x,V.y)},g.prototype.lineTo=function(V,Q){if(isNaN(V)||isNaN(Q))throw Jn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ee=this.ctx.transform.applyToPoint(new s(V,Q));this.path.push({type:"lt",x:ee.x,y:ee.y}),this.ctx.lastPoint=new s(ee.x,ee.y)},g.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),Z.call(this,null,!0)},g.prototype.quadraticCurveTo=function(V,Q,ee,re){if(isNaN(ee)||isNaN(re)||isNaN(V)||isNaN(Q))throw Jn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ce=this.ctx.transform.applyToPoint(new s(ee,re)),de=this.ctx.transform.applyToPoint(new s(V,Q));this.path.push({type:"qct",x1:de.x,y1:de.y,x:ce.x,y:ce.y}),this.ctx.lastPoint=new s(ce.x,ce.y)},g.prototype.bezierCurveTo=function(V,Q,ee,re,ce,de){if(isNaN(ce)||isNaN(de)||isNaN(V)||isNaN(Q)||isNaN(ee)||isNaN(re))throw Jn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ie=this.ctx.transform.applyToPoint(new s(ce,de)),Ee=this.ctx.transform.applyToPoint(new s(V,Q)),Ne=this.ctx.transform.applyToPoint(new s(ee,re));this.path.push({type:"bct",x1:Ee.x,y1:Ee.y,x2:Ne.x,y2:Ne.y,x:Ie.x,y:Ie.y}),this.ctx.lastPoint=new s(Ie.x,Ie.y)},g.prototype.arc=function(V,Q,ee,re,ce,de){if(isNaN(V)||isNaN(Q)||isNaN(ee)||isNaN(re)||isNaN(ce))throw Jn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(de=!!de,!this.ctx.transform.isIdentity){var Ie=this.ctx.transform.applyToPoint(new s(V,Q));V=Ie.x,Q=Ie.y;var Ee=this.ctx.transform.applyToPoint(new s(0,ee)),Ne=this.ctx.transform.applyToPoint(new s(0,0));ee=Math.sqrt(Math.pow(Ee.x-Ne.x,2)+Math.pow(Ee.y-Ne.y,2))}Math.abs(ce-re)>=2*Math.PI&&(re=0,ce=2*Math.PI),this.path.push({type:"arc",x:V,y:Q,radius:ee,startAngle:re,endAngle:ce,counterclockwise:de})},g.prototype.arcTo=function(V,Q,ee,re,ce){throw new Error("arcTo not implemented.")},g.prototype.rect=function(V,Q,ee,re){if(isNaN(V)||isNaN(Q)||isNaN(ee)||isNaN(re))throw Jn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(V,Q),this.lineTo(V+ee,Q),this.lineTo(V+ee,Q+re),this.lineTo(V,Q+re),this.lineTo(V,Q),this.lineTo(V+ee,Q),this.lineTo(V,Q)},g.prototype.fillRect=function(V,Q,ee,re){if(isNaN(V)||isNaN(Q)||isNaN(ee)||isNaN(re))throw Jn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var ce={};this.lineCap!=="butt"&&(ce.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ce.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(V,Q,ee,re),this.fill(),ce.hasOwnProperty("lineCap")&&(this.lineCap=ce.lineCap),ce.hasOwnProperty("lineJoin")&&(this.lineJoin=ce.lineJoin)}},g.prototype.strokeRect=function(V,Q,ee,re){if(isNaN(V)||isNaN(Q)||isNaN(ee)||isNaN(re))throw Jn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");S.call(this)||(this.beginPath(),this.rect(V,Q,ee,re),this.stroke())},g.prototype.clearRect=function(V,Q,ee,re){if(isNaN(V)||isNaN(Q)||isNaN(ee)||isNaN(re))throw Jn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(V,Q,ee,re))},g.prototype.save=function(V){V=typeof V!="boolean"||V;for(var Q=this.pdf.internal.getCurrentPageInfo().pageNumber,ee=0;ee<this.pdf.internal.getNumberOfPages();ee++)this.pdf.setPage(ee+1),this.pdf.internal.out("q");if(this.pdf.setPage(Q),V){this.ctx.fontSize=this.pdf.internal.getFontSize();var re=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=re}},g.prototype.restore=function(V){V=typeof V!="boolean"||V;for(var Q=this.pdf.internal.getCurrentPageInfo().pageNumber,ee=0;ee<this.pdf.internal.getNumberOfPages();ee++)this.pdf.setPage(ee+1),this.pdf.internal.out("Q");this.pdf.setPage(Q),V&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},g.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var v=function(V){var Q,ee,re,ce;if(V.isCanvasGradient===!0&&(V=V.getColor()),!V)return{r:0,g:0,b:0,a:0,style:V};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(V))Q=0,ee=0,re=0,ce=0;else{var de=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(V);if(de!==null)Q=parseInt(de[1]),ee=parseInt(de[2]),re=parseInt(de[3]),ce=1;else if((de=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(V))!==null)Q=parseInt(de[1]),ee=parseInt(de[2]),re=parseInt(de[3]),ce=parseFloat(de[4]);else{if(ce=1,typeof V=="string"&&V.charAt(0)!=="#"){var Ie=new F8(V);V=Ie.ok?Ie.toHex():"#000000"}V.length===4?(Q=V.substring(1,2),Q+=Q,ee=V.substring(2,3),ee+=ee,re=V.substring(3,4),re+=re):(Q=V.substring(1,3),ee=V.substring(3,5),re=V.substring(5,7)),Q=parseInt(Q,16),ee=parseInt(ee,16),re=parseInt(re,16)}}return{r:Q,g:ee,b:re,a:ce,style:V}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},S=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};g.prototype.fillText=function(V,Q,ee,re){if(isNaN(Q)||isNaN(ee)||typeof V!="string")throw Jn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(re=isNaN(re)?void 0:re,!p.call(this)){var ce=fe(this.ctx.transform.rotation),de=this.ctx.transform.scaleX;T.call(this,{text:V,x:Q,y:ee,scale:de,angle:ce,align:this.textAlign,maxWidth:re})}},g.prototype.strokeText=function(V,Q,ee,re){if(isNaN(Q)||isNaN(ee)||typeof V!="string")throw Jn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!S.call(this)){re=isNaN(re)?void 0:re;var ce=fe(this.ctx.transform.rotation),de=this.ctx.transform.scaleX;T.call(this,{text:V,x:Q,y:ee,scale:de,renderingMode:"stroke",angle:ce,align:this.textAlign,maxWidth:re})}},g.prototype.measureText=function(V){if(typeof V!="string")throw Jn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Q=this.pdf,ee=this.pdf.internal.scaleFactor,re=Q.internal.getFontSize(),ce=Q.getStringUnitWidth(V)*re/Q.internal.scaleFactor;return new function(de){var Ie=(de=de||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ie}}),this}({width:ce*=Math.round(96*ee/72*1e4)/1e4})},g.prototype.scale=function(V,Q){if(isNaN(V)||isNaN(Q))throw Jn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ee=new c(V,0,0,Q,0,0);this.ctx.transform=this.ctx.transform.multiply(ee)},g.prototype.rotate=function(V){if(isNaN(V))throw Jn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Q=new c(Math.cos(V),Math.sin(V),-Math.sin(V),Math.cos(V),0,0);this.ctx.transform=this.ctx.transform.multiply(Q)},g.prototype.translate=function(V,Q){if(isNaN(V)||isNaN(Q))throw Jn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ee=new c(1,0,0,1,V,Q);this.ctx.transform=this.ctx.transform.multiply(ee)},g.prototype.transform=function(V,Q,ee,re,ce,de){if(isNaN(V)||isNaN(Q)||isNaN(ee)||isNaN(re)||isNaN(ce)||isNaN(de))throw Jn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ie=new c(V,Q,ee,re,ce,de);this.ctx.transform=this.ctx.transform.multiply(Ie)},g.prototype.setTransform=function(V,Q,ee,re,ce,de){V=isNaN(V)?1:V,Q=isNaN(Q)?0:Q,ee=isNaN(ee)?0:ee,re=isNaN(re)?1:re,ce=isNaN(ce)?0:ce,de=isNaN(de)?0:de,this.ctx.transform=new c(V,Q,ee,re,ce,de)};var k=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};g.prototype.drawImage=function(V,Q,ee,re,ce,de,Ie,Ee,Ne){var ze=this.pdf.getImageProperties(V),Je=1,Qe=1,gt=1,W=1;re!==void 0&&Ee!==void 0&&(gt=Ee/re,W=Ne/ce,Je=ze.width/re*Ee/re,Qe=ze.height/ce*Ne/ce),de===void 0&&(de=Q,Ie=ee,Q=0,ee=0),re!==void 0&&Ee===void 0&&(Ee=re,Ne=ce),re===void 0&&Ee===void 0&&(Ee=ze.width,Ne=ze.height);var Ye=this.ctx.transform.decompose(),Zt=fe(Ye.rotate.shx),St=new c,je=(St=(St=(St=St.multiply(Ye.translate)).multiply(Ye.skew)).multiply(Ye.scale)).applyToRectangle(new a(de-Q*gt,Ie-ee*W,re*Je,ce*Qe));if(this.autoPaging){for(var Ct,nt=L.call(this,je),It=[],_t=0;_t<nt.length;_t+=1)It.indexOf(nt[_t])===-1&&It.push(nt[_t]);X(It);for(var wn=It[0],ln=It[It.length-1],Vt=wn;Vt<ln+1;Vt++){this.pdf.setPage(Vt);var At=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Mt=Vt===1?this.posY+this.margin[0]:this.margin[0],ot=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ht=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ft=Vt===1?0:ot+(Vt-2)*Ht;if(this.ctx.clip_path.length!==0){var pr=this.path;Ct=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=J(Ct,this.posX+this.margin[3],-ft+Mt+this.ctx.prevPageLastElemOffset),me.call(this,"fill",!0),this.path=pr}var un=JSON.parse(JSON.stringify(je));un=J([un],this.posX+this.margin[3],-ft+Mt+this.ctx.prevPageLastElemOffset)[0];var tn=(Vt>wn||Vt<ln)&&k.call(this);tn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],At,Ht,null).clip().discardPath()),this.pdf.addImage(V,"JPEG",un.x,un.y,un.w,un.h,null,null,Zt),tn&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(V,"JPEG",je.x,je.y,je.w,je.h,null,null,Zt)};var L=function(V,Q,ee){var re=[];Q=Q||this.pdf.internal.pageSize.width,ee=ee||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ce=this.posY+this.ctx.prevPageLastElemOffset;switch(V.type){default:case"mt":case"lt":re.push(Math.floor((V.y+ce)/ee)+1);break;case"arc":re.push(Math.floor((V.y+ce-V.radius)/ee)+1),re.push(Math.floor((V.y+ce+V.radius)/ee)+1);break;case"qct":var de=De(this.ctx.lastPoint.x,this.ctx.lastPoint.y,V.x1,V.y1,V.x,V.y);re.push(Math.floor((de.y+ce)/ee)+1),re.push(Math.floor((de.y+de.h+ce)/ee)+1);break;case"bct":var Ie=$e(this.ctx.lastPoint.x,this.ctx.lastPoint.y,V.x1,V.y1,V.x2,V.y2,V.x,V.y);re.push(Math.floor((Ie.y+ce)/ee)+1),re.push(Math.floor((Ie.y+Ie.h+ce)/ee)+1);break;case"rect":re.push(Math.floor((V.y+ce)/ee)+1),re.push(Math.floor((V.y+V.h+ce)/ee)+1)}for(var Ee=0;Ee<re.length;Ee+=1)for(;this.pdf.internal.getNumberOfPages()<re[Ee];)R.call(this);return re},R=function(){var V=this.fillStyle,Q=this.strokeStyle,ee=this.font,re=this.lineCap,ce=this.lineWidth,de=this.lineJoin;this.pdf.addPage(),this.fillStyle=V,this.strokeStyle=Q,this.font=ee,this.lineCap=re,this.lineWidth=ce,this.lineJoin=de},J=function(V,Q,ee){for(var re=0;re<V.length;re++)switch(V[re].type){case"bct":V[re].x2+=Q,V[re].y2+=ee;case"qct":V[re].x1+=Q,V[re].y1+=ee;default:V[re].x+=Q,V[re].y+=ee}return V},X=function(V){return V.sort(function(Q,ee){return Q-ee})},Z=function(V,Q){var ee=this.fillStyle,re=this.strokeStyle,ce=this.lineCap,de=this.lineWidth,Ie=Math.abs(de*this.ctx.transform.scaleX),Ee=this.lineJoin;if(this.autoPaging){for(var Ne,ze,Je=JSON.parse(JSON.stringify(this.path)),Qe=JSON.parse(JSON.stringify(this.path)),gt=[],W=0;W<Qe.length;W++)if(Qe[W].x!==void 0)for(var Ye=L.call(this,Qe[W]),Zt=0;Zt<Ye.length;Zt+=1)gt.indexOf(Ye[Zt])===-1&&gt.push(Ye[Zt]);for(var St=0;St<gt.length;St++)for(;this.pdf.internal.getNumberOfPages()<gt[St];)R.call(this);X(gt);for(var je=gt[0],Ct=gt[gt.length-1],nt=je;nt<Ct+1;nt++){this.pdf.setPage(nt),this.fillStyle=ee,this.strokeStyle=re,this.lineCap=ce,this.lineWidth=Ie,this.lineJoin=Ee;var It=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],_t=nt===1?this.posY+this.margin[0]:this.margin[0],wn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ln=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Vt=nt===1?0:wn+(nt-2)*ln;if(this.ctx.clip_path.length!==0){var At=this.path;Ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=J(Ne,this.posX+this.margin[3],-Vt+_t+this.ctx.prevPageLastElemOffset),me.call(this,V,!0),this.path=At}if(ze=JSON.parse(JSON.stringify(Je)),this.path=J(ze,this.posX+this.margin[3],-Vt+_t+this.ctx.prevPageLastElemOffset),Q===!1||nt===0){var Mt=(nt>je||nt<Ct)&&k.call(this);Mt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],It,ln,null).clip().discardPath()),me.call(this,V,Q),Mt&&this.pdf.restoreGraphicsState()}this.lineWidth=de}this.path=Je}else this.lineWidth=Ie,me.call(this,V,Q),this.lineWidth=de},me=function(V,Q){if((V!=="stroke"||Q||!S.call(this))&&(V==="stroke"||Q||!p.call(this))){for(var ee,re,ce=[],de=this.path,Ie=0;Ie<de.length;Ie++){var Ee=de[Ie];switch(Ee.type){case"begin":ce.push({begin:!0});break;case"close":ce.push({close:!0});break;case"mt":ce.push({start:Ee,deltas:[],abs:[]});break;case"lt":var Ne=ce.length;if(de[Ie-1]&&!isNaN(de[Ie-1].x)&&(ee=[Ee.x-de[Ie-1].x,Ee.y-de[Ie-1].y],Ne>0)){for(;Ne>=0;Ne--)if(ce[Ne-1].close!==!0&&ce[Ne-1].begin!==!0){ce[Ne-1].deltas.push(ee),ce[Ne-1].abs.push(Ee);break}}break;case"bct":ee=[Ee.x1-de[Ie-1].x,Ee.y1-de[Ie-1].y,Ee.x2-de[Ie-1].x,Ee.y2-de[Ie-1].y,Ee.x-de[Ie-1].x,Ee.y-de[Ie-1].y],ce[ce.length-1].deltas.push(ee);break;case"qct":var ze=de[Ie-1].x+2/3*(Ee.x1-de[Ie-1].x),Je=de[Ie-1].y+2/3*(Ee.y1-de[Ie-1].y),Qe=Ee.x+2/3*(Ee.x1-Ee.x),gt=Ee.y+2/3*(Ee.y1-Ee.y),W=Ee.x,Ye=Ee.y;ee=[ze-de[Ie-1].x,Je-de[Ie-1].y,Qe-de[Ie-1].x,gt-de[Ie-1].y,W-de[Ie-1].x,Ye-de[Ie-1].y],ce[ce.length-1].deltas.push(ee);break;case"arc":ce.push({deltas:[],abs:[],arc:!0}),Array.isArray(ce[ce.length-1].abs)&&ce[ce.length-1].abs.push(Ee)}}re=Q?null:V==="stroke"?"stroke":"fill";for(var Zt=!1,St=0;St<ce.length;St++)if(ce[St].arc)for(var je=ce[St].abs,Ct=0;Ct<je.length;Ct++){var nt=je[Ct];nt.type==="arc"?P.call(this,nt.x,nt.y,nt.radius,nt.startAngle,nt.endAngle,nt.counterclockwise,void 0,Q,!Zt):A.call(this,nt.x,nt.y),Zt=!0}else if(ce[St].close===!0)this.pdf.internal.out("h"),Zt=!1;else if(ce[St].begin!==!0){var It=ce[St].start.x,_t=ce[St].start.y;te.call(this,ce[St].deltas,It,_t),Zt=!0}re&&D.call(this,re),Q&&U.call(this)}},be=function(V){var Q=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ee=Q*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return V-ee;case"top":return V+Q-ee;case"hanging":return V+Q-2*ee;case"middle":return V+Q/2-ee;default:return V}},$=function(V){return V+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};g.prototype.createLinearGradient=function(){var V=function(){};return V.colorStops=[],V.addColorStop=function(Q,ee){this.colorStops.push([Q,ee])},V.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},V.isCanvasGradient=!0,V},g.prototype.createPattern=function(){return this.createLinearGradient()},g.prototype.createRadialGradient=function(){return this.createLinearGradient()};var P=function(V,Q,ee,re,ce,de,Ie,Ee,Ne){for(var ze=Se.call(this,ee,re,ce,de),Je=0;Je<ze.length;Je++){var Qe=ze[Je];Je===0&&(Ne?E.call(this,Qe.x1+V,Qe.y1+Q):A.call(this,Qe.x1+V,Qe.y1+Q)),ve.call(this,V,Q,Qe.x2,Qe.y2,Qe.x3,Qe.y3,Qe.x4,Qe.y4)}Ee?U.call(this):D.call(this,Ie)},D=function(V){switch(V){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},U=function(){this.pdf.clip(),this.pdf.discardPath()},E=function(V,Q){this.pdf.internal.out(t(V)+" "+r(Q)+" m")},T=function(V){var Q;switch(V.align){case"right":case"end":Q="right";break;case"center":Q="center";break;default:Q="left"}var ee,re,ce,de=this.pdf.getTextDimensions(V.text),Ie=be.call(this,V.y),Ee=$.call(this,Ie)-de.h,Ne=this.ctx.transform.applyToPoint(new s(V.x,Ie));if(this.autoPaging){var ze=this.ctx.transform.decompose(),Je=new c;Je=(Je=(Je=Je.multiply(ze.translate)).multiply(ze.skew)).multiply(ze.scale);for(var Qe=this.ctx.transform.applyToRectangle(new a(V.x,Ie,de.w,de.h)),gt=Je.applyToRectangle(new a(V.x,Ee,de.w,de.h)),W=L.call(this,gt),Ye=[],Zt=0;Zt<W.length;Zt+=1)Ye.indexOf(W[Zt])===-1&&Ye.push(W[Zt]);X(Ye);for(var St=Ye[0],je=Ye[Ye.length-1],Ct=St;Ct<je+1;Ct++){this.pdf.setPage(Ct);var nt=Ct===1?this.posY+this.margin[0]:this.margin[0],It=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],_t=this.pdf.internal.pageSize.height-this.margin[2],wn=_t-this.margin[0],ln=this.pdf.internal.pageSize.width-this.margin[1],Vt=ln-this.margin[3],At=Ct===1?0:It+(Ct-2)*wn;if(this.ctx.clip_path.length!==0){var Mt=this.path;ee=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=J(ee,this.posX+this.margin[3],-1*At+nt),me.call(this,"fill",!0),this.path=Mt}var ot=J([JSON.parse(JSON.stringify(gt))],this.posX+this.margin[3],-At+nt+this.ctx.prevPageLastElemOffset)[0];V.scale>=.01&&(re=this.pdf.internal.getFontSize(),this.pdf.setFontSize(re*V.scale),ce=this.lineWidth,this.lineWidth=ce*V.scale);var Ht=this.autoPaging!=="text";if(Ht||ot.y+ot.h<=_t){if(Ht||ot.y>=nt&&ot.x<=ln){var ft=Ht?V.text:this.pdf.splitTextToSize(V.text,V.maxWidth||ln-ot.x)[0],pr=J([JSON.parse(JSON.stringify(Qe))],this.posX+this.margin[3],-At+nt+this.ctx.prevPageLastElemOffset)[0],un=Ht&&(Ct>St||Ct<je)&&k.call(this);un&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Vt,wn,null).clip().discardPath()),this.pdf.text(ft,pr.x,pr.y,{angle:V.angle,align:Q,renderingMode:V.renderingMode}),un&&this.pdf.restoreGraphicsState()}}else ot.y<_t&&(this.ctx.prevPageLastElemOffset+=_t-ot.y);V.scale>=.01&&(this.pdf.setFontSize(re),this.lineWidth=ce)}}else V.scale>=.01&&(re=this.pdf.internal.getFontSize(),this.pdf.setFontSize(re*V.scale),ce=this.lineWidth,this.lineWidth=ce*V.scale),this.pdf.text(V.text,Ne.x+this.posX,Ne.y+this.posY,{angle:V.angle,align:Q,renderingMode:V.renderingMode,maxWidth:V.maxWidth}),V.scale>=.01&&(this.pdf.setFontSize(re),this.lineWidth=ce)},A=function(V,Q,ee,re){ee=ee||0,re=re||0,this.pdf.internal.out(t(V+ee)+" "+r(Q+re)+" l")},te=function(V,Q,ee){return this.pdf.lines(V,Q,ee,null,null)},ve=function(V,Q,ee,re,ce,de,Ie,Ee){this.pdf.internal.out([e(i(ee+V)),e(o(re+Q)),e(i(ce+V)),e(o(de+Q)),e(i(Ie+V)),e(o(Ee+Q)),"c"].join(" "))},Se=function(V,Q,ee,re){for(var ce=2*Math.PI,de=Math.PI/2;Q>ee;)Q-=ce;var Ie=Math.abs(ee-Q);Ie<ce&&re&&(Ie=ce-Ie);for(var Ee=[],Ne=re?-1:1,ze=Q;Ie>1e-5;){var Je=ze+Ne*Math.min(Ie,de);Ee.push(Ce.call(this,V,ze,Je)),Ie-=Math.abs(Je-ze),ze=Je}return Ee},Ce=function(V,Q,ee){var re=(ee-Q)/2,ce=V*Math.cos(re),de=V*Math.sin(re),Ie=ce,Ee=-de,Ne=Ie*Ie+Ee*Ee,ze=Ne+Ie*ce+Ee*de,Je=4/3*(Math.sqrt(2*Ne*ze)-ze)/(Ie*de-Ee*ce),Qe=Ie-Je*Ee,gt=Ee+Je*Ie,W=Qe,Ye=-gt,Zt=re+Q,St=Math.cos(Zt),je=Math.sin(Zt);return{x1:V*Math.cos(Q),y1:V*Math.sin(Q),x2:Qe*St-gt*je,y2:Qe*je+gt*St,x3:W*St-Ye*je,y3:W*je+Ye*St,x4:V*Math.cos(ee),y4:V*Math.sin(ee)}},fe=function(V){return 180*V/Math.PI},De=function(V,Q,ee,re,ce,de){var Ie=V+.5*(ee-V),Ee=Q+.5*(re-Q),Ne=ce+.5*(ee-ce),ze=de+.5*(re-de),Je=Math.min(V,ce,Ie,Ne),Qe=Math.max(V,ce,Ie,Ne),gt=Math.min(Q,de,Ee,ze),W=Math.max(Q,de,Ee,ze);return new a(Je,gt,Qe-Je,W-gt)},$e=function(V,Q,ee,re,ce,de,Ie,Ee){var Ne,ze,Je,Qe,gt,W,Ye,Zt,St,je,Ct,nt,It,_t,wn=ee-V,ln=re-Q,Vt=ce-ee,At=de-re,Mt=Ie-ce,ot=Ee-de;for(ze=0;ze<41;ze++)St=(Ye=(Je=V+(Ne=ze/40)*wn)+Ne*((gt=ee+Ne*Vt)-Je))+Ne*(gt+Ne*(ce+Ne*Mt-gt)-Ye),je=(Zt=(Qe=Q+Ne*ln)+Ne*((W=re+Ne*At)-Qe))+Ne*(W+Ne*(de+Ne*ot-W)-Zt),ze==0?(Ct=St,nt=je,It=St,_t=je):(Ct=Math.min(Ct,St),nt=Math.min(nt,je),It=Math.max(It,St),_t=Math.max(_t,je));return new a(Math.round(Ct),Math.round(nt),Math.round(It-Ct),Math.round(_t-nt))},Fe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var V,Q,ee=(V=this.ctx.lineDash,Q=this.ctx.lineDashOffset,JSON.stringify({lineDash:V,lineDashOffset:Q}));this.prevLineDash!==ee&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ee)}}})(mt.API),(function(n){var e=function(s){var a,c,l,u,g,v,p,S,k,L;for(/[^\x00-\xFF]/.test(s),c=[],l=0,u=(s+=a="\0\0\0\0".slice(s.length%4||4)).length;u>l;l+=4)(g=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(v=(g=((g=((g=((g=(g-(L=g%85))/85)-(k=g%85))/85)-(S=g%85))/85)-(p=g%85))/85)%85,c.push(v+33,p+33,S+33,k+33,L+33)):c.push(122);return(function(R,J){for(var X=J;X>0;X--)R.pop()})(c,a.length),String.fromCharCode.apply(String,c)+"~>"},t=function(s){var a,c,l,u,g,v=String,p="length",S=255,k="charCodeAt",L="slice",R="replace";for(s[L](-2),s=s[L](0,-2)[R](/\s/g,"")[R]("z","!!!!!"),l=[],u=0,g=(s+=a="uuuuu"[L](s[p]%5||5))[p];g>u;u+=5)c=52200625*(s[k](u)-33)+614125*(s[k](u+1)-33)+7225*(s[k](u+2)-33)+85*(s[k](u+3)-33)+(s[k](u+4)-33),l.push(S&c>>24,S&c>>16,S&c>>8,S&c);return(function(J,X){for(var Z=X;Z>0;Z--)J.pop()})(l,a[p]),v.fromCharCode.apply(v,l)},r=function(s){return s.split("").map(function(a){return("0"+a.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(s){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),a.test(s)===!1)return"";for(var c="",l=0;l<s.length;l+=2)c+=String.fromCharCode("0x"+(s[l]+s[l+1]));return c},o=function(s){for(var a=new Uint8Array(s.length),c=s.length;c--;)a[c]=s.charCodeAt(c);return(a=Tw(a)).reduce(function(l,u){return l+String.fromCharCode(u)},"")};n.processDataByFilters=function(s,a){var c=0,l=s||"",u=[];for(typeof(a=a||[])=="string"&&(a=[a]),c=0;c<a.length;c+=1)switch(a[c]){case"ASCII85Decode":case"/ASCII85Decode":l=t(l),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=i(l),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=r(l),u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=o(l),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[c]+'" is not implemented')}return{data:l,reverseChain:u.reverse().join(" ")}}})(mt.API),(function(n){n.loadFile=function(e,t,r){return(function(i,o,s){o=o!==!1,s=typeof s=="function"?s:function(){};var a=void 0;try{a=(function(c,l,u){var g=new XMLHttpRequest,v=0,p=function(S){var k=S.length,L=[],R=String.fromCharCode;for(v=0;v<k;v+=1)L.push(R(255&S.charCodeAt(v)));return L.join("")};if(g.open("GET",c,!l),g.overrideMimeType("text/plain; charset=x-user-defined"),l===!1&&(g.onload=function(){g.status===200?u(p(this.responseText)):u(void 0)}),g.send(null),l&&g.status===200)return p(g.responseText)})(i,o,s)}catch{}return a})(e,t,r)},n.loadImageFile=n.loadFile})(mt.API),(function(n){function e(){return(Ut.html2canvas?Promise.resolve(Ut.html2canvas):import("./chunk-SFOPF7YH.js")).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function t(){return(Ut.DOMPurify?Promise.resolve(Ut.DOMPurify):import("./chunk-LPMOHE6U.js")).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var r=function(a){var c=Wn(a);return c==="undefined"?"undefined":c==="string"||a instanceof String?"string":c==="number"||a instanceof Number?"number":c==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":c==="object"?"object":"unknown"},i=function(a,c){var l=document.createElement(a);for(var u in c.className&&(l.className=c.className),c.innerHTML&&c.dompurify&&(l.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)l.style[u]=c.style[u];return l},o=function a(c,l){for(var u=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),g=c.firstChild;g;g=g.nextSibling)l!==!0&&g.nodeType===1&&g.nodeName==="SCRIPT"||u.appendChild(a(g,l));return c.nodeType===1&&(c.nodeName==="CANVAS"?(u.width=c.width,u.height=c.height,u.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(u.value=c.value),u.addEventListener("load",function(){u.scrollTop=c.scrollTop,u.scrollLeft=c.scrollLeft},!0)),u},s=function a(c){var l=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),u=a.convert(Promise.resolve(),l);return(u=u.setProgress(1,a,1,[a])).set(c)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(a,c){return a.__proto__=c||s.prototype,a},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(a,c){return this.then(function(){switch(c=c||(function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(a),c){case"string":return this.then(t).then(function(l){return this.set({src:i("div",{innerHTML:a,dompurify:l})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},s.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=o(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(c){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,c(this.prop.container,l)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(c){var l=this.opt.jsPDF,u=this.opt.fontFaces,g=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,v=Object.assign({async:!0,allowTaint:!0,scale:g,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete v.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=u,u)for(var p=0;p<u.length;++p){var S=u[p],k=S.src.find(function(L){return L.format==="truetype"});k&&l.addFont(k.url,S.ref.name,S.ref.style)}return v.windowHeight=v.windowHeight||0,v.windowHeight=v.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):v.windowHeight,l.context2d.save(!0),c(this.prop.container,v)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(a,c,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(a,c):this.outputPdf(a,c)},s.prototype.outputPdf=function(a,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,c)})},s.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},s.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(a){if(r(a)!=="object")return this;var c=Object.keys(a||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=a[l]};switch(l){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[l]=a[l]}}},this);return this.then(function(){return this.thenList(c)})},s.prototype.get=function(a,c){return this.then(function(){var l=a in s.template.prop?this.prop[a]:this.opt[a];return c?c(l):l})},s.prototype.setMargin=function(a){return this.then(function(){switch(r(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},s.prototype.setPageSize=function(a){function c(l,u){return Math.floor(l*u/72*96)}return this.then(function(){(a=a||mt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:c(a.inner.width,a.k),height:c(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},s.prototype.setProgress=function(a,c,l,u){return a!=null&&(this.progress.val=a),c!=null&&(this.progress.state=c),l!=null&&(this.progress.n=l),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(a,c,l,u){return this.setProgress(a?this.progress.val+a:null,c||null,l?this.progress.n+l:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(a,c){var l=this;return this.thenCore(a,c,function(u,g){return l.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(v){return l.updateProgress(null,u),v}).then(u,g).then(function(v){return l.updateProgress(1),v})})},s.prototype.thenCore=function(a,c,l){l=l||Promise.prototype.then;var u=this;a&&(a=a.bind(u)),c&&(c=c.bind(u));var g=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?u:s.convert(Object.assign({},u),Promise.prototype),v=l.call(g,a,c);return s.convert(v,u.__proto__)},s.prototype.thenExternal=function(a,c){return Promise.prototype.then.call(this,a,c)},s.prototype.thenList=function(a){var c=this;return a.forEach(function(l){c=c.thenCore(l)}),c},s.prototype.catch=function(a){a&&(a=a.bind(this));var c=Promise.prototype.catch.call(this,a);return s.convert(c,this)},s.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},s.prototype.error=function(a){return this.then(function(){throw new Error(a)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,mt.getPageSize=function(a,c,l){if(Wn(a)==="object"){var u=a;a=u.orientation,c=u.unit||c,l=u.format||l}c=c||"mm",l=l||"a4",a=(""+(a||"P")).toLowerCase();var g,v=(""+l).toLowerCase(),p={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":g=1;break;case"mm":g=72/25.4;break;case"cm":g=72/2.54;break;case"in":g=72;break;case"px":g=.75;break;case"pc":case"em":g=12;break;case"ex":g=6;break;default:throw"Invalid unit: "+c}var S,k=0,L=0;if(p.hasOwnProperty(v))k=p[v][1]/g,L=p[v][0]/g;else try{k=l[1],L=l[0]}catch{throw new Error("Invalid format: "+l)}if(a==="p"||a==="portrait")a="p",L>k&&(S=L,L=k,k=S);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",k>L&&(S=L,L=k,k=S)}return{width:L,height:k,unit:c,k:g,orientation:a}},n.html=function(a,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(JT):null;var l=new s(c);return c.worker?l:l.from(a).doCallback()}})(mt.API),mt.API.addJS=function(n){return C8=n,this.internal.events.subscribe("postPutResources",function(){Jw=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Jw+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),E8=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+C8+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Jw!==void 0&&E8!==void 0&&this.internal.out("/Names <</JavaScript "+Jw+" 0 R>>")}),this},(function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),o=0;o<i.length;o++){var s=i[o],a=r.exec(s);if(a!=null){var c=a[1];t.internal.newObjectDeferredBegin(c,!1)}t.internal.write(s)}if(this.outline.createNamedDestinations){var l=this.internal.pages.length,u=[];for(o=0;o<l;o++){var g=t.internal.newObject();u.push(g);var v=t.internal.getPageInfo(o+1);t.internal.write("<< /D["+v.objId+" 0 R /XYZ null null null]>> endobj")}var p=t.internal.newObject();for(t.internal.write("<< /Names [ "),o=0;o<u.length;o++)t.internal.write("(page_"+(o+1)+")"+u[o]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+p+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,o){var s={title:i,options:o,children:[]};return r==null&&(r=this.root),r.children.push(s),s},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<r.children.length;o++){var s=r.children[o];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(r)),o>0&&this.line("/Prev "+this.makeRef(r.children[o-1])),o<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[o+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var a=this.count=this.count_r({count:0},s);if(a>0&&this.line("/Count "+a),s.options&&s.options.pageNumber){var c=t.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var l=0;l<r.children.length;l++)this.renderItems(r.children[l])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,i){for(var o=0;o<i.children.length;o++)r.count++,this.count_r(r,i.children[o]);return r.count}}])})(mt.API),(function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,i,o,s,a){var c,l=this.decode.DCT_DECODE,u=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=s||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,c=(function(g){for(var v,p=256*g.charCodeAt(4)+g.charCodeAt(5),S=g.length,k={width:0,height:0,numcomponents:1},L=4;L<S;L+=2){if(L+=p,e.indexOf(g.charCodeAt(L+1))!==-1){v=256*g.charCodeAt(L+5)+g.charCodeAt(L+6),k={width:256*g.charCodeAt(L+7)+g.charCodeAt(L+8),height:v,numcomponents:g.charCodeAt(L+9)};break}p=256*g.charCodeAt(L+2)+g.charCodeAt(L+3)}return k})(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),c.numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}u={data:t,width:c.width,height:c.height,colorSpace:a,bitsPerComponent:8,filter:l,index:r,alias:i}}return u}})(mt.API),mt.API.processPNG=function(n,e,t,r){if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){var i,o=h8(n,{checkCrc:!0}),s=o.width,a=o.height,c=o.channels,l=o.palette,u=o.depth;i=l&&c===1?(function(P){for(var D=P.width,U=P.height,E=P.data,T=P.palette,A=P.depth,te=!1,ve=[],Se=[],Ce=void 0,fe=!1,De=0,$e=0;$e<T.length;$e++){var Fe=uT(T[$e],4),V=Fe[0],Q=Fe[1],ee=Fe[2],re=Fe[3];ve.push(V,Q,ee),re!=null&&(re===0?(De++,Se.length<1&&Se.push($e)):re<255&&(fe=!0))}if(fe||De>1){te=!0,Se=void 0;var ce=D*U;Ce=new Uint8Array(ce);for(var de=new DataView(E.buffer),Ie=0;Ie<ce;Ie++){var Ee=eA(de,Ie,A),Ne=uT(T[Ee],4)[3];Ce[Ie]=Ne}}else De===0&&(Se=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:te?8:void 0,colorBytes:E,alphaBytes:Ce,needSMask:te,palette:ve,mask:Se}})(o):c===2||c===4?(function(P){for(var D=P.data,U=P.width,E=P.height,T=P.channels,A=P.depth,te=T===2?"DeviceGray":"DeviceRGB",ve=T-1,Se=U*E,Ce=ve,fe=Se*Ce,De=1*Se,$e=Math.ceil(fe*A/8),Fe=Math.ceil(De*A/8),V=new Uint8Array($e),Q=new Uint8Array(Fe),ee=new DataView(D.buffer),re=new DataView(V.buffer),ce=new DataView(Q.buffer),de=!1,Ie=0;Ie<Se;Ie++){for(var Ee=Ie*T,Ne=0;Ne<Ce;Ne++)k8(re,eA(ee,Ee+Ne,A),Ie*Ce+Ne,A);var ze=eA(ee,Ee+Ce,A);ze<(1<<A)-1&&(de=!0),k8(ce,ze,1*Ie,A)}return{colorSpace:te,colorsPerPixel:ve,sMaskBitsPerComponent:de?A:void 0,colorBytes:V,alphaBytes:Q,needSMask:de}})(o):(function(P){var D=P.data,U=P.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:U,colorsPerPixel:U==="DeviceGray"?1:3,colorBytes:D instanceof Uint16Array?(function(E){for(var T=E.length,A=new Uint8Array(2*T),te=new DataView(A.buffer,A.byteOffset,A.byteLength),ve=0;ve<T;ve++)te.setUint16(2*ve,E[ve],!1);return A})(D):D,needSMask:!1}})(o);var g,v,p,S=i,k=S.colorSpace,L=S.colorsPerPixel,R=S.sMaskBitsPerComponent,J=S.colorBytes,X=S.alphaBytes,Z=S.needSMask,me=S.palette,be=S.mask,$=null;return r!==mt.API.image_compression.NONE&&typeof Tw=="function"?($=(function(P){var D;switch(P){case mt.API.image_compression.FAST:D=11;break;case mt.API.image_compression.MEDIUM:D=13;break;case mt.API.image_compression.SLOW:D=14;break;default:D=12}return D})(r),g=this.decode.FLATE_DECODE,v="/Predictor ".concat($," /Colors ").concat(L," /BitsPerComponent ").concat(u," /Columns ").concat(s),n=T8(J,Math.ceil(s*L*u/8),L,u,r),Z&&(p=T8(X,Math.ceil(s*R/8),1,R,r))):(g=void 0,v=void 0,n=J,Z&&(p=X)),(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(p&&this.__addimage__.isArrayBuffer(p)||this.__addimage__.isArrayBufferView(p))&&(p=this.__addimage__.arrayBufferToBinaryString(p)),{alias:t,data:n,index:e,filter:g,decodeParameters:v,transparency:be,palette:me,sMask:p,predictor:$,width:s,height:a,bitsPerComponent:u,sMaskBitsPerComponent:R,colorSpace:k}}},(function(n){n.processGIF89A=function(e,t,r,i){var o=new Qne(e),s=o.width,a=o.height,c=[];o.decodeAndBlitFrameRGBA(0,c);var l={data:c,width:s,height:a},u=new tA(100).encode(l,100);return n.processJPEG.call(this,u,t,r,i)},n.processGIF87A=n.processGIF89A})(mt.API),Ea.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:t,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Ea.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){Jn.log("bit decode error:"+t)}},Ea.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++)for(var o=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var c=this.palette[o>>7-a&1];this.data[s+4*a]=c.blue,this.data[s+4*a+1]=c.green,this.data[s+4*a+2]=c.red,this.data[s+4*a+3]=255}t!==0&&(this.pos+=4-t)}},Ea.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<n;i++){var o=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+2*i*4,a=o>>4,c=15&o,l=this.palette[a];if(this.data[s]=l.blue,this.data[s+1]=l.green,this.data[s+2]=l.red,this.data[s+3]=255,2*i+1>=this.width)break;l=this.palette[c],this.data[s+4]=l.blue,this.data[s+4+1]=l.green,this.data[s+4+2]=l.red,this.data[s+4+3]=255}e!==0&&(this.pos+=4-e)}},Ea.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;if(i<this.palette.length){var s=this.palette[i];this.data[o]=s.red,this.data[o+1]=s.green,this.data[o+2]=s.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}n!==0&&(this.pos+=4-n)}},Ea.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(o&e)/e*255|0,a=(o>>5&e)/e*255|0,c=(o>>10&e)/e*255|0,l=o>>15?255:0,u=r*this.width*4+4*i;this.data[u]=c,this.data[u+1]=a,this.data[u+2]=s,this.data[u+3]=l}this.pos+=n}},Ea.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,o=0;o<this.width;o++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&e)/e*255|0,c=(s>>5&t)/t*255|0,l=(s>>11)/e*255|0,u=i*this.width*4+4*o;this.data[u]=l,this.data[u+1]=c,this.data[u+2]=a,this.data[u+3]=255}this.pos+=n}},Ea.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*t;this.data[s]=o,this.data[s+1]=i,this.data[s+2]=r,this.data[s+3]=255}this.pos+=this.width%4}},Ea.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=o,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=s}},Ea.prototype.getData=function(){return this.data},(function(n){n.processBMP=function(e,t,r,i){var o=new Ea(e,!1),s=o.width,a=o.height,c={data:o.getData(),width:s,height:a},l=new tA(100).encode(c,100);return n.processJPEG.call(this,l,t,r,i)}})(mt.API),O8.prototype.getData=function(){return this.data},(function(n){n.processWEBP=function(e,t,r,i){var o=new O8(e),s=o.width,a=o.height,c={data:o.getData(),width:s,height:a},l=new tA(100).encode(c,100);return n.processJPEG.call(this,l,t,r,i)}})(mt.API),mt.API.processRGBA=function(n,e,t){for(var r=n.data,i=r.length,o=new Uint8Array(i/4*3),s=new Uint8Array(i/4),a=0,c=0,l=0;l<i;l+=4){var u=r[l],g=r[l+1],v=r[l+2],p=r[l+3];o[a++]=u,o[a++]=g,o[a++]=v,s[c++]=p}var S=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:S,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},mt.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},bp=mt.API,Xw=bp.getCharWidthsArray=function(n,e){var t,r,i=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),s=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,c=a.fof?a.fof:1,l=e.kerning?e.kerning:i.metadata.Unicode.kerning,u=l.fof?l.fof:1,g=e.doKerning!==!1,v=0,p=n.length,S=0,k=a[0]||c,L=[];for(t=0;t<p;t++)r=n.charCodeAt(t),typeof i.metadata.widthOfString=="function"?L.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+s*(1e3/o)||0)/1e3):(v=g&&Wn(l[r])==="object"&&!isNaN(parseInt(l[r][S],10))?l[r][S]/u:0,L.push((a[r]||k)/c+v)),S=r;return L},x8=bp.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return bp.processArabic&&(n=bp.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,i)/t:Xw.apply(this,arguments).reduce(function(o,s){return o+s},0)},S8=function(n,e,t,r){for(var i=[],o=0,s=n.length,a=0;o!==s&&a+e[o]<t;)a+=e[o],o++;i.push(n.slice(0,o));var c=o;for(a=0;o!==s;)a+e[o]>r&&(i.push(n.slice(c,o)),a=0,c=o),a+=e[o],o++;return c!==o&&i.push(n.slice(c,o)),i},D8=function(n,e,t){t||(t={});var r,i,o,s,a,c,l,u=[],g=[u],v=t.textIndent||0,p=0,S=0,k=n.split(" "),L=Xw.apply(this,[" ",t])[0];if(c=t.lineIndent===-1?k[0].length+2:t.lineIndent||0){var R=Array(c).join(" "),J=[];k.map(function(Z){(Z=Z.split(/\s*\n/)).length>1?J=J.concat(Z.map(function(me,be){return(be&&me.length?`
`:"")+me})):J.push(Z[0])}),k=J,c=x8.apply(this,[R,t])}for(o=0,s=k.length;o<s;o++){var X=0;if(r=k[o],c&&r[0]==`
`&&(r=r.substr(1),X=1),v+p+(S=(i=Xw.apply(this,[r,t])).reduce(function(Z,me){return Z+me},0))>e||X){if(S>e){for(a=S8.apply(this,[r,i,e-(v+p),e]),u.push(a.shift()),u=[a.pop()];a.length;)g.push([a.shift()]);S=i.slice(r.length-(u[0]?u[0].length:0)).reduce(function(Z,me){return Z+me},0)}else u=[r];g.push(u),v=S+c,p=L}else u.push(r),v+=p+S,p=L}return l=c?function(Z,me){return(me?R:"")+Z.join(" ")}:function(Z){return Z.join(" ")},g.map(l)},bp.splitTextToSize=function(n,e,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),o=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var g=this.internal.getFont(u.fontName,u.fontStyle),v="Unicode";return g.metadata[v]?{widths:g.metadata[v].widths||{0:1},kerning:g.metadata[v].kerning||{}}:{font:g.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var s=1*this.internal.scaleFactor*e/i;o.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,o.lineIndent=t.lineIndent;var a,c,l=[];for(a=0,c=r.length;a<c;a++)l=l.concat(D8.apply(this,[r[a],s,o]));return l},(function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",r={},i={},o=0;o<16;o++)r[t[o]]=e[o],i[e[o]]=t[o];var s=function(v){return"0x"+parseInt(v,10).toString(16)},a=n.__fontmetrics__.compress=function(v){var p,S,k,L,R=["{"];for(var J in v){if(p=v[J],isNaN(parseInt(J,10))?S="'"+J+"'":(J=parseInt(J,10),S=(S=s(J).slice(2)).slice(0,-1)+i[S.slice(-1)]),typeof p=="number")p<0?(k=s(p).slice(3),L="-"):(k=s(p).slice(2),L=""),k=L+k.slice(0,-1)+i[k.slice(-1)];else{if(Wn(p)!=="object")throw new Error("Don't know what to do with value type "+Wn(p)+".");k=a(p)}R.push(S+k)}return R.push("}"),R.join("")},c=n.__fontmetrics__.uncompress=function(v){if(typeof v!="string")throw new Error("Invalid argument passed to uncompress.");for(var p,S,k,L,R={},J=1,X=R,Z=[],me="",be="",$=v.length-1,P=1;P<$;P+=1)(L=v[P])=="'"?p?(k=p.join(""),p=void 0):p=[]:p?p.push(L):L=="{"?(Z.push([X,k]),X={},k=void 0):L=="}"?((S=Z.pop())[0][S[1]]=X,k=void 0,X=S[0]):L=="-"?J=-1:k===void 0?r.hasOwnProperty(L)?(me+=r[L],k=parseInt(me,16)*J,J=1,me=""):me+=L:r.hasOwnProperty(L)?(be+=r[L],X[k]=parseInt(be,16)*J,J=1,k=void 0,be=""):be+=L;return R},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},g={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(v){var p=v.font,S=g.Unicode[p.postScriptName];S&&(p.metadata.Unicode={},p.metadata.Unicode.widths=S.widths,p.metadata.Unicode.kerning=S.kerning);var k=u.Unicode[p.postScriptName];k&&(p.metadata.Unicode.encoding=k,p.encoding=k.codePages[0])}])})(mt.API),(function(n){var e=function(t){for(var r=t.length,i=new Uint8Array(r),o=0;o<r;o++)i[o]=t.charCodeAt(o);return i};n.API.events.push(["addFont",function(t){var r=void 0,i=t.font,o=t.instance;if(!i.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=o.existsFileInVFS(i.postScriptName)===!1?o.loadFile(i.postScriptName):o.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(s,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(eb(a)),s.metadata=n.API.TTFFont.open(a),s.metadata.Unicode=s.metadata.Unicode||{encoding:{},kerning:{},widths:[]},s.metadata.glyIdsUsed=[0]})(i,r)}}])})(mt),mt.API.addSvgAsImage=function(n,e,t,r,i,o,s,a){if(isNaN(e)||isNaN(t))throw Jn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(i))throw Jn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=r,c.height=i;var l=c.getContext("2d");l.fillStyle="#fff",l.fillRect(0,0,c.width,c.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return(Ut.canvg?Promise.resolve(Ut.canvg):import("./chunk-RCZSNMKX.js")).catch(function(v){return Promise.reject(new Error("Could not load canvg: "+v))}).then(function(v){return v.default?v.default:v}).then(function(v){return v.fromString(l,n,u)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(v){return v.render(u)}).then(function(){g.addImage(c.toDataURL("image/jpeg",1),e,t,r,i,s,a)})},mt.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,t);return this},mt.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,i,o,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(s),c=[],l=0,u=0,g=0;function v(S,k){var L,R=!1;for(L=0;L<S.length;L+=1)S[L]===k&&(R=!0);return R}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var p=a.length;for(g=0;g<p;g+=1)t[a[g]].value=t[a[g]].defaultValue,t[a[g]].explicitSet=!1}if(Wn(n)==="object"){for(i in n)if(o=n[i],v(a,i)&&o!==void 0){if(t[i].type==="boolean"&&typeof o=="boolean")t[i].value=o;else if(t[i].type==="name"&&v(t[i].valueSet,o))t[i].value=o;else if(t[i].type==="integer"&&Number.isInteger(o))t[i].value=o;else if(t[i].type==="array"){for(l=0;l<o.length;l+=1)if(r=!0,o[l].length===1&&typeof o[l][0]=="number")c.push(String(o[l]-1));else if(o[l].length>1){for(u=0;u<o[l].length;u+=1)typeof o[l][u]!="number"&&(r=!1);r===!0&&c.push([o[l][0]-1,o[l][1]-1].join(" "))}t[i].value="["+c.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var S,k=[];for(S in t)t[S].explicitSet===!0&&(t[S].type==="name"?k.push("/"+S+" /"+t[S].value):k.push("/"+S+" "+t[S].value));k.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+k.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},(function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(r)),s=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),l=o.length+s.length+a.length+i.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+l+" >>"),this.internal.write("stream"),this.internal.write(i+o+s+a+c),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}})(mt.API),(function(n){var e=n.API,t=e.pdfEscape16=function(o,s){for(var a,c=s.metadata.Unicode.widths,l=["","0","00","000","0000"],u=[""],g=0,v=o.length;g<v;++g){if(a=s.metadata.characterToGlyph(o.charCodeAt(g)),s.metadata.glyIdsUsed.push(a),s.metadata.toUnicode[a]=o.charCodeAt(g),c.indexOf(a)==-1&&(c.push(a),c.push([parseInt(s.metadata.widthOfGlyph(a),10)])),a=="0")return u.join("");a=a.toString(16),u.push(l[4-a.length],a)}return u.join("")},r=function(o){var s,a,c,l,u,g,v;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],g=0,v=(a=Object.keys(o).sort(function(p,S){return p-S})).length;g<v;g++)s=a[g],c.length>=100&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),o[s]!==void 0&&o[s]!==null&&typeof o[s].toString=="function"&&(l=("0000"+o[s].toString(16)).slice(-4),s=("0000"+(+s).toString(16)).slice(-4),c.push("<"+s+"><"+l+">"));return c.length&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),u+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(s){var a=s.font,c=s.out,l=s.newObject,u=s.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="Identity-H"){for(var g=a.metadata.Unicode.widths,v=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),p="",S=0;S<v.length;S++)p+=String.fromCharCode(v[S]);var k=l();u({data:p,addLength1:!0,objectId:k}),c("endobj");var L=l();u({data:r(a.metadata.toUnicode),addLength1:!0,objectId:L}),c("endobj");var R=l();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Ep(a.fontName)),c("/FontFile2 "+k+" 0 R"),c("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),c("/Flags "+a.metadata.flags),c("/StemV "+a.metadata.stemV),c("/ItalicAngle "+a.metadata.italicAngle),c("/Ascent "+a.metadata.ascender),c("/Descent "+a.metadata.decender),c("/CapHeight "+a.metadata.capHeight),c(">>"),c("endobj");var J=l();c("<<"),c("/Type /Font"),c("/BaseFont /"+Ep(a.fontName)),c("/FontDescriptor "+R+" 0 R"),c("/W "+n.API.PDFObject.convert(g)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+a.encoding+")"),c(">>"),c(">>"),c("endobj"),a.objectNumber=l(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+L+" 0 R"),c("/BaseFont /"+Ep(a.fontName)),c("/Encoding /"+a.encoding),c("/DescendantFonts ["+J+" 0 R]"),c(">>"),c("endobj"),a.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(s){var a=s.font,c=s.out,l=s.newObject,u=s.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var g=a.metadata.rawData,v="",p=0;p<g.length;p++)v+=String.fromCharCode(g[p]);var S=l();u({data:v,addLength1:!0,objectId:S}),c("endobj");var k=l();u({data:r(a.metadata.toUnicode),addLength1:!0,objectId:k}),c("endobj");var L=l();c("<<"),c("/Descent "+a.metadata.decender),c("/CapHeight "+a.metadata.capHeight),c("/StemV "+a.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+S+" 0 R"),c("/Flags 96"),c("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),c("/FontName /"+Ep(a.fontName)),c("/ItalicAngle "+a.metadata.italicAngle),c("/Ascent "+a.metadata.ascender),c(">>"),c("endobj"),a.objectNumber=l();for(var R=0;R<a.metadata.hmtx.widths.length;R++)a.metadata.hmtx.widths[R]=parseInt(a.metadata.hmtx.widths[R]*(1e3/a.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+k+" 0 R/BaseFont/"+Ep(a.fontName)+"/FontDescriptor "+L+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),c("endobj"),a.isAlreadyPutted=!0}})(o)}]);var i=function(o){var s,a=o.text||"",c=o.x,l=o.y,u=o.options||{},g=o.mutex||{},v=g.pdfEscape,p=g.activeFontKey,S=g.fonts,k=p,L="",R=0,J="",X=S[k].encoding;if(S[k].encoding!=="Identity-H")return{text:a,x:c,y:l,options:u,mutex:g};for(J=a,k=p,Array.isArray(a)&&(J=a[0]),R=0;R<J.length;R+=1)S[k].metadata.hasOwnProperty("cmap")&&(s=S[k].metadata.cmap.unicode.codeMap[J[R].charCodeAt(0)]),s||J[R].charCodeAt(0)<256&&S[k].metadata.hasOwnProperty("Unicode")?L+=J[R]:L+="";var Z="";return parseInt(k.slice(1))<14||X==="WinAnsiEncoding"?Z=v(L,k).split("").map(function(me){return me.charCodeAt(0).toString(16)}).join(""):X==="Identity-H"&&(Z=t(L,S[k])),g.isHex=!0,{text:Z,x:c,y:l,options:u,mutex:g}};e.events.push(["postProcessText",function(o){var s=o.text||"",a=[],c={text:s,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(s)){var l=0;for(l=0;l<s.length;l+=1)Array.isArray(s[l])&&s[l].length===3?a.push([i(Object.assign({},c,{text:s[l][0]})).text,s[l][1],s[l][2]]):a.push(i(Object.assign({},c,{text:s[l]})).text);o.text=a}else o.text=i(Object.assign({},c,{text:s})).text}])})(mt),(function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}})(mt.API),(function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var i,o,s,a,c,l,u,g=e,v=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],S={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},k={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},L=["(",")","(","<",">","<","[","]","[","{","}","{","\xAB","\xBB","\xAB","\u2039","\u203A","\u2039","\u2045","\u2046","\u2045","\u207D","\u207E","\u207D","\u208D","\u208E","\u208D","\u2264","\u2265","\u2264","\u2329","\u232A","\u2329","\uFE59","\uFE5A","\uFE59","\uFE5B","\uFE5C","\uFE5B","\uFE5D","\uFE5E","\uFE5D","\uFE64","\uFE65","\uFE64"],R=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),J=!1,X=0;this.__bidiEngine__={};var Z=function(E){var T=E.charCodeAt(),A=T>>8,te=k[A];return te!==void 0?g[256*te+(255&T)]:A===252||A===253?"AL":R.test(A)?"L":A===8?"R":"N"},me=function(E){for(var T,A=0;A<E.length;A++){if((T=Z(E.charAt(A)))==="L")return!1;if(T==="R")return!0}return!1},be=function(E,T,A,te){var ve,Se,Ce,fe,De=T[te];switch(De){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":J=!1;break;case"N":case"AN":break;case"EN":J&&(De="AN");break;case"AL":J=!0,De="R";break;case"WS":case"BN":De="N";break;case"CS":te<1||te+1>=T.length||(ve=A[te-1])!=="EN"&&ve!=="AN"||(Se=T[te+1])!=="EN"&&Se!=="AN"?De="N":J&&(Se="AN"),De=Se===ve?Se:"N";break;case"ES":De=(ve=te>0?A[te-1]:"B")==="EN"&&te+1<T.length&&T[te+1]==="EN"?"EN":"N";break;case"ET":if(te>0&&A[te-1]==="EN"){De="EN";break}if(J){De="N";break}for(Ce=te+1,fe=T.length;Ce<fe&&T[Ce]==="ET";)Ce++;De=Ce<fe&&T[Ce]==="EN"?"EN":"N";break;case"NSM":if(s&&!a){for(fe=T.length,Ce=te+1;Ce<fe&&T[Ce]==="NSM";)Ce++;if(Ce<fe){var $e=E[te],Fe=$e>=1425&&$e<=2303||$e===64286;if(ve=T[Ce],Fe&&(ve==="R"||ve==="AL")){De="R";break}}}De=te<1||(ve=T[te-1])==="B"?"N":A[te-1];break;case"B":J=!1,i=!0,De=X;break;case"S":o=!0,De="N"}return De},$=function(E,T,A){var te=E.split("");return A&&P(te,A,{hiLevel:X}),te.reverse(),T&&T.reverse(),te.join("")},P=function(E,T,A){var te,ve,Se,Ce,fe,De=-1,$e=E.length,Fe=0,V=[],Q=X?p:v,ee=[];for(J=!1,i=!1,o=!1,ve=0;ve<$e;ve++)ee[ve]=Z(E[ve]);for(Se=0;Se<$e;Se++){if(fe=Fe,V[Se]=be(E,ee,V,Se),te=240&(Fe=Q[fe][S[V[Se]]]),Fe&=15,T[Se]=Ce=Q[Fe][5],te>0)if(te===16){for(ve=De;ve<Se;ve++)T[ve]=1;De=-1}else De=-1;if(Q[Fe][6])De===-1&&(De=Se);else if(De>-1){for(ve=De;ve<Se;ve++)T[ve]=Ce;De=-1}ee[Se]==="B"&&(T[Se]=0),A.hiLevel|=Ce}o&&(function(re,ce,de){for(var Ie=0;Ie<de;Ie++)if(re[Ie]==="S"){ce[Ie]=X;for(var Ee=Ie-1;Ee>=0&&re[Ee]==="WS";Ee--)ce[Ee]=X}})(ee,T,$e)},D=function(E,T,A,te,ve){if(!(ve.hiLevel<E)){if(E===1&&X===1&&!i)return T.reverse(),void(A&&A.reverse());for(var Se,Ce,fe,De,$e=T.length,Fe=0;Fe<$e;){if(te[Fe]>=E){for(fe=Fe+1;fe<$e&&te[fe]>=E;)fe++;for(De=Fe,Ce=fe-1;De<Ce;De++,Ce--)Se=T[De],T[De]=T[Ce],T[Ce]=Se,A&&(Se=A[De],A[De]=A[Ce],A[Ce]=Se);Fe=fe}Fe++}}},U=function(E,T,A){var te=E.split(""),ve={hiLevel:X};return A||(A=[]),P(te,A,ve),(function(Se,Ce,fe){if(fe.hiLevel!==0&&u)for(var De,$e=0;$e<Se.length;$e++)Ce[$e]===1&&(De=L.indexOf(Se[$e]))>=0&&(Se[$e]=L[De+1])})(te,A,ve),D(2,te,T,A,ve),D(1,te,T,A,ve),te.join("")};return this.__bidiEngine__.doBidiReorder=function(E,T,A){if((function(ve,Se){if(Se)for(var Ce=0;Ce<ve.length;Ce++)Se[Ce]=Ce;a===void 0&&(a=me(ve)),l===void 0&&(l=me(ve))})(E,T),s||!c||l)if(s&&c&&a^l)X=a?1:0,E=$(E,T,A);else if(!s&&c&&l)X=a?1:0,E=U(E,T,A),E=$(E,T);else if(!s||a||c||l){if(s&&!c&&a^l)E=$(E,T),a?(X=0,E=U(E,T,A)):(X=1,E=U(E,T,A),E=$(E,T));else if(s&&a&&!c&&l)X=1,E=U(E,T,A),E=$(E,T);else if(!s&&!c&&a^l){var te=u;a?(X=1,E=U(E,T,A),X=0,u=!1,E=U(E,T,A),u=te):(X=0,E=U(E,T,A),E=$(E,T),X=1,u=!1,E=U(E,T,A),u=te,E=$(E,T))}}else X=0,E=U(E,T,A);else X=a?1:0,E=U(E,T,A);return E},this.__bidiEngine__.setOptions=function(E){E&&(s=E.isInputVisual,c=E.isOutputVisual,a=E.isInputRtl,l=E.isOutputRtl,u=E.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var o=r.options||{};r.mutex,o.lang;var s=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,t.setOptions(o),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(s=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?s.push([t.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):s.push([t.doBidiReorder(i[a])]);r.text=s}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])})(mt),mt.API.TTFFont=(function(){function n(e){var t;if(this.rawData=e,t=this.contents=new Bu(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new dre(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new Zne(this.contents),this.head=new Xne(this),this.name=new ire(this),this.cmap=new K8(this),this.toUnicode={},this.hhea=new ere(this),this.maxp=new ore(this),this.hmtx=new sre(this),this.post=new nre(this),this.os2=new tre(this),this.loca=new ure(this),this.glyf=new are(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,i,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var s,a,c,l;for(l=[],s=0,a=(c=this.bbox).length;s<a;s++)e=c[s],l.push(Math.round(e*this.scaleFactor));return l}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var i,o,s,a;for(s=0,o=0,a=(e=""+e).length;0<=a?o<a:o>a;o=0<=a?++o:--o)i=e.charCodeAt(o),s+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return s*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n})();var xa,Bu=(function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,i;for(i=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,i,o,s,a,c;return e=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),o=this.readByte(),s=this.readByte(),a=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^o)+65536*(255^s)+256*(255^a)+(255^c)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*i+16777216*o+65536*s+256*a+c},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,i,o;for(o=[],r=0,i=e.length;r<i;r++)t=e[r],o.push(this.writeByte(t));return o},n})(),Zne=(function(){var n;function e(t){var r,i,o;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,o=this.tableCount;0<=o?i<o:i>o;i=0<=o?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,i,o,s,a,c,l,u,g,v,p,S,k;for(k in p=Object.keys(t).length,c=Math.log(2),g=16*Math.floor(Math.log(p)/c),s=Math.floor(g/c),u=16*p-g,(i=new Bu).writeInt(this.scalarType),i.writeShort(p),i.writeShort(g),i.writeShort(s),i.writeShort(u),o=16*p,l=i.pos+o,a=null,S=[],t)for(v=t[k],i.writeString(k),i.writeInt(n(v)),i.writeInt(l),i.writeInt(v.length),S=S.concat(v),k==="head"&&(a=l),l+=v.length;l%4;)S.push(0),l++;return i.write(S),r=2981146554-n(i.data),i.pos=a+8,i.writeUInt32(r),i.data},n=function(t){var r,i,o,s;for(t=Y8.call(t);t.length%4;)t.push(0);for(o=new Bu(t),i=0,r=0,s=t.length;r<s;r=r+=4)i+=o.readUInt32();return 4294967295&i},e})(),Jne={}.hasOwnProperty,yc=function(n,e){for(var t in e)Jne.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};xa=(function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n})();var Xne=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return yc(n,xa),n.prototype.tag="head",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},n.prototype.encode=function(e){var t;return(t=new Bu).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},n})(),L8=(function(){function n(e,t){var r,i,o,s,a,c,l,u,g,v,p,S,k,L,R,J,X;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),g=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(p=e.readUInt16(),v=p/2,e.pos+=6,o=(function(){var Z,me;for(me=[],c=Z=0;0<=v?Z<v:Z>v;c=0<=v?++Z:--Z)me.push(e.readUInt16());return me})(),e.pos+=2,k=(function(){var Z,me;for(me=[],c=Z=0;0<=v?Z<v:Z>v;c=0<=v?++Z:--Z)me.push(e.readUInt16());return me})(),l=(function(){var Z,me;for(me=[],c=Z=0;0<=v?Z<v:Z>v;c=0<=v?++Z:--Z)me.push(e.readUInt16());return me})(),u=(function(){var Z,me;for(me=[],c=Z=0;0<=v?Z<v:Z>v;c=0<=v?++Z:--Z)me.push(e.readUInt16());return me})(),i=(this.length-e.pos+this.offset)/2,a=(function(){var Z,me;for(me=[],c=Z=0;0<=i?Z<i:Z>i;c=0<=i?++Z:--Z)me.push(e.readUInt16());return me})(),c=R=0,X=o.length;R<X;c=++R)for(L=o[c],r=J=S=k[c];S<=L?J<=L:J>=L;r=S<=L?++J:--J)u[c]===0?s=r+l[c]:(s=a[u[c]/2+(r-S)-(v-c)]||0)!==0&&(s+=l[c]),this.codeMap[r]=65535&s}e.pos=g}return n.encode=function(e,t){var r,i,o,s,a,c,l,u,g,v,p,S,k,L,R,J,X,Z,me,be,$,P,D,U,E,T,A,te,ve,Se,Ce,fe,De,$e,Fe,V,Q,ee,re,ce,de,Ie,Ee,Ne,ze,Je;switch(te=new Bu,s=Object.keys(e).sort(function(Qe,gt){return Qe-gt}),t){case"macroman":for(k=0,L=(function(){var Qe=[];for(S=0;S<256;++S)Qe.push(0);return Qe})(),J={0:0},o={},ve=0,De=s.length;ve<De;ve++)J[Ee=e[i=s[ve]]]==null&&(J[Ee]=++k),o[i]={old:e[i],new:J[e[i]]},L[i]=J[e[i]];return te.writeUInt16(1),te.writeUInt16(0),te.writeUInt32(12),te.writeUInt16(0),te.writeUInt16(262),te.writeUInt16(0),te.write(L),{charMap:o,subtable:te.data,maxGlyphID:k+1};case"unicode":for(T=[],g=[],X=0,J={},r={},R=l=null,Se=0,$e=s.length;Se<$e;Se++)J[me=e[i=s[Se]]]==null&&(J[me]=++X),r[i]={old:me,new:J[me]},a=J[me]-i,R!=null&&a===l||(R&&g.push(R),T.push(i),l=a),R=i;for(R&&g.push(R),g.push(65535),T.push(65535),U=2*(D=T.length),P=2*Math.pow(Math.log(D)/Math.LN2,2),v=Math.log(P/2)/Math.LN2,$=2*D-P,c=[],be=[],p=[],S=Ce=0,Fe=T.length;Ce<Fe;S=++Ce){if(E=T[S],u=g[S],E===65535){c.push(0),be.push(0);break}if(E-(A=r[E].new)>=32768)for(c.push(0),be.push(2*(p.length+D-S)),i=fe=E;E<=u?fe<=u:fe>=u;i=E<=u?++fe:--fe)p.push(r[i].new);else c.push(A-E),be.push(0)}for(te.writeUInt16(3),te.writeUInt16(1),te.writeUInt32(12),te.writeUInt16(4),te.writeUInt16(16+8*D+2*p.length),te.writeUInt16(0),te.writeUInt16(U),te.writeUInt16(P),te.writeUInt16(v),te.writeUInt16($),de=0,V=g.length;de<V;de++)i=g[de],te.writeUInt16(i);for(te.writeUInt16(0),Ie=0,Q=T.length;Ie<Q;Ie++)i=T[Ie],te.writeUInt16(i);for(Ne=0,ee=c.length;Ne<ee;Ne++)a=c[Ne],te.writeUInt16(a);for(ze=0,re=be.length;ze<re;ze++)Z=be[ze],te.writeUInt16(Z);for(Je=0,ce=p.length;Je<ce;Je++)k=p[Je],te.writeUInt16(k);return{charMap:r,subtable:te.data,maxGlyphID:X+1}}},n})(),K8=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return yc(n,xa),n.prototype.tag="cmap",n.prototype.parse=function(e){var t,r,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=i?r<i:r>i;r=0<=i?++r:--r)t=new L8(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},n.encode=function(e,t){var r,i;return t==null&&(t="macroman"),r=L8.encode(e,t),(i=new Bu).writeUInt16(0),i.writeUInt16(1),r.table=i.data.concat(r.subtable),r},n})(),ere=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return yc(n,xa),n.prototype.tag="hhea",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},n})(),tre=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return yc(n,xa),n.prototype.tag="OS/2",n.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var t,r;for(r=[],t=0;t<10;++t)r.push(e.readByte());return r})(),this.charRange=(function(){var t,r;for(r=[],t=0;t<4;++t)r.push(e.readInt());return r})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var t,r;for(r=[],t=0;t<2;t=++t)r.push(e.readInt());return r})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},n})(),nre=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return yc(n,xa),n.prototype.tag="post",n.prototype.parse=function(e){var t,r,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var o;for(r=e.readUInt16(),this.glyphNameIndex=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)t=e.readByte(),i.push(this.names.push(e.readString(t)));return i;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 262144:return this.map=(function(){var s,a,c;for(c=[],o=s=0,a=this.file.maxp.numGlyphs;0<=a?s<a:s>a;o=0<=a?++s:--s)c.push(e.readUInt32());return c}).call(this)}},n})(),rre=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},ire=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return yc(n,xa),n.prototype.tag="name",n.prototype.parse=function(e){var t,r,i,o,s,a,c,l,u,g,v;for(e.pos=this.offset,e.readShort(),t=e.readShort(),a=e.readShort(),r=[],o=0;0<=t?o<t:o>t;o=0<=t?++o:--o)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+a+e.readShort()});for(c={},o=u=0,g=r.length;u<g;o=++u)i=r[o],e.pos=i.offset,l=e.readString(i.length),s=new rre(l,i),c[v=i.nameID]==null&&(c[v]=[]),c[i.nameID].push(s);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},n})(),ore=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return yc(n,xa),n.prototype.tag="maxp",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},n})(),sre=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return yc(n,xa),n.prototype.tag="hmtx",n.prototype.parse=function(e){var t,r,i,o,s,a,c;for(e.pos=this.offset,this.metrics=[],t=0,a=this.file.hhea.numberOfMetrics;0<=a?t<a:t>a;t=0<=a?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var l,u;for(u=[],t=l=0;0<=i?l<i:l>i;t=0<=i?++l:--l)u.push(e.readInt16());return u})(),this.widths=(function(){var l,u,g,v;for(v=[],l=0,u=(g=this.metrics).length;l<u;l++)o=g[l],v.push(o.advance);return v}).call(this),r=this.widths[this.widths.length-1],c=[],t=s=0;0<=i?s<i:s>i;t=0<=i?++s:--s)c.push(this.widths.push(r));return c},n.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},n})(),Y8=[].slice,are=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return yc(n,xa),n.prototype.tag="glyf",n.prototype.parse=function(){return this.cache={}},n.prototype.glyphFor=function(e){var t,r,i,o,s,a,c,l,u,g;return e in this.cache?this.cache[e]:(o=this.file.loca,t=this.file.contents,r=o.indexOf(e),(i=o.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+r,s=(a=new Bu(t.read(i))).readShort(),l=a.readShort(),g=a.readShort(),c=a.readShort(),u=a.readShort(),this.cache[e]=s===-1?new lre(a,l,g,c,u):new cre(a,s,l,g,c,u),this.cache[e]))},n.prototype.encode=function(e,t,r){var i,o,s,a,c;for(s=[],o=[],a=0,c=t.length;a<c;a++)i=e[t[a]],o.push(s.length),i&&(s=s.concat(i.encode(r)));return o.push(s.length),{table:s,offsets:o}},n})(),cre=(function(){function n(e,t,r,i,o,s){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=o,this.yMax=s,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n})(),lre=(function(){function n(e,t,r,i,o){var s,a;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;a=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&a;)s.pos+=1&a?4:2,128&a?s.pos+=8:64&a?s.pos+=4:8&a&&(s.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new Bu(Y8.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n})(),ure=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return yc(n,xa),n.prototype.tag="loca",n.prototype.parse=function(e){var t,r;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var i,o;for(o=[],r=0,i=this.length;r<i;r+=2)o.push(2*e.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],r=0,i=this.length;r<i;r+=4)o.push(e.readUInt32());return o}).call(this)},n.prototype.indexOf=function(e){return this.offsets[e]},n.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},n.prototype.encode=function(e,t){for(var r=new Uint32Array(this.offsets.length),i=0,o=0,s=0;s<r.length;++s)if(r[s]=i,o<t.length&&t[o]==s){++o,r[s]=i;var a=this.offsets[s],c=this.offsets[s+1]-a;c>0&&(i+=c)}for(var l=new Array(4*r.length),u=0;u<r.length;++u)l[4*u+3]=255&r[u],l[4*u+2]=(65280&r[u])>>8,l[4*u+1]=(16711680&r[u])>>16,l[4*u]=(4278190080&r[u])>>24;return l},n})(),dre=(function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,i,o;for(t in i=this.font.cmap.tables[0].codeMap,e={},o=this.subset)r=o[t],e[t]=i[r];return e},n.prototype.glyphsFor=function(e){var t,r,i,o,s,a,c;for(i={},s=0,a=e.length;s<a;s++)i[o=e[s]]=this.font.glyf.glyphFor(o);for(o in t=[],i)(r=i[o])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(o in c=this.glyphsFor(t))r=c[o],i[o]=r;return i},n.prototype.encode=function(e,t){var r,i,o,s,a,c,l,u,g,v,p,S,k,L,R;for(i in r=K8.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(e),p={0:0},R=r.charMap)p[(c=R[i]).old]=c.new;for(S in v=r.maxGlyphID,s)S in p||(p[S]=v++);return u=(function(J){var X,Z;for(X in Z={},J)Z[J[X]]=X;return Z})(p),g=Object.keys(u).sort(function(J,X){return J-X}),k=(function(){var J,X,Z;for(Z=[],J=0,X=g.length;J<X;J++)a=g[J],Z.push(u[a]);return Z})(),o=this.font.glyf.encode(s,k,p),l=this.font.loca.encode(o.offsets,k),L={cmap:this.font.cmap.raw(),glyf:o.table,loca:l,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(L["OS/2"]=this.font.os2.raw()),this.font.directory.encode(L)},n})();mt.API.PDFObject=(function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,i,o,s;if(Array.isArray(t))return"["+(function(){var a,c,l;for(l=[],a=0,c=t.length;a<c;a++)r=t[a],l.push(e.convert(r));return l})().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t?.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in o=["<<"],t)s=t[i],o.push("/"+i+" "+e.convert(s));return o.push(">>"),o.join(`
`)}return""+t},e})();function tV(n,e,t,r,i){r=r||{};var o=1.15,s=i.internal.scaleFactor,a=i.internal.getFontSize()/s,c=i.getLineHeightFactor?i.getLineHeightFactor():o,l=a*c,u=/\r\n|\r|\n/g,g="",v=1;if((r.valign==="middle"||r.valign==="bottom"||r.halign==="center"||r.halign==="right")&&(g=typeof n=="string"?n.split(u):n,v=g.length||1),t+=a*(2-o),r.valign==="middle"?t-=v/2*l:r.valign==="bottom"&&(t-=v*l),r.halign==="center"||r.halign==="right"){var p=a;if(r.halign==="center"&&(p*=.5),g&&v>=1){for(var S=0;S<g.length;S++)i.text(g[S],e-i.getStringUnitWidth(g[S])*p,t),t+=l;return i}e-=i.getStringUnitWidth(n)*p}return r.halign==="justify"?i.text(n,e,t,{maxWidth:r.maxWidth||100,align:"justify"}):i.text(n,e,t),i}var Q8={},Ap=(function(){function n(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return n.setDefaults=function(e,t){t===void 0&&(t=null),t?t.__autoTableDocumentDefaults=e:Q8=e},n.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},n.prototype.applyStyles=function(e,t){var r,i,o;t===void 0&&(t=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var s=this.jsPDFDocument.internal.getFont(),a=s.fontStyle,c=s.fontName;if(e.font&&(c=e.font),e.fontStyle){a=e.fontStyle;var l=this.getFontList()[c];l&&l.indexOf(a)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(l[0]),a=l[0])}if(this.jsPDFDocument.setFont(c,a),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!t){var u=n.unifyColor(e.fillColor);u&&(r=this.jsPDFDocument).setFillColor.apply(r,u),u=n.unifyColor(e.textColor),u&&(i=this.jsPDFDocument).setTextColor.apply(i,u),u=n.unifyColor(e.lineColor),u&&(o=this.jsPDFDocument).setDrawColor.apply(o,u),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},n.prototype.splitTextToSize=function(e,t,r){return this.jsPDFDocument.splitTextToSize(e,t,r)},n.prototype.rect=function(e,t,r,i,o){return this.jsPDFDocument.rect(e,t,r,i,o)},n.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},n.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},n.prototype.getDocument=function(){return this.jsPDFDocument},n.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},n.prototype.addPage=function(){return this.jsPDFDocument.addPage()},n.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},n.prototype.getGlobalOptions=function(){return Q8||{}},n.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},n.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},n.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},n.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},n.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},n.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},n})(),fA=function(n,e){return fA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},fA(n,e)};function nV(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");fA(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var rV=(function(n){nV(e,n);function e(t){var r=n.call(this)||this;return r._element=t,r}return e})(Array);function hre(n){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/n,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function fre(n){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[n]}function cb(n,e,t){t.applyStyles(e,!0);var r=Array.isArray(n)?n:[n],i=r.map(function(o){return t.getTextWidth(o)}).reduce(function(o,s){return Math.max(o,s)},0);return i}function iV(n,e,t,r){var i=e.settings.tableLineWidth,o=e.settings.tableLineColor;n.applyStyles({lineWidth:i,lineColor:o});var s=oV(i,!1);s&&n.rect(t.x,t.y,e.getWidth(n.pageSize().width),r.y-t.y,s)}function oV(n,e){var t=n>0,r=e||e===0;return t&&r?"DF":t?"S":r?"F":null}function ub(n,e){var t,r,i,o;if(n=n||e,Array.isArray(n)){if(n.length>=4)return{top:n[0],right:n[1],bottom:n[2],left:n[3]};if(n.length===3)return{top:n[0],right:n[1],bottom:n[2],left:n[1]};if(n.length===2)return{top:n[0],right:n[1],bottom:n[0],left:n[1]};n.length===1?n=n[0]:n=e}return typeof n=="object"?(typeof n.vertical=="number"&&(n.top=n.vertical,n.bottom=n.vertical),typeof n.horizontal=="number"&&(n.right=n.horizontal,n.left=n.horizontal),{left:(t=n.left)!==null&&t!==void 0?t:e,top:(r=n.top)!==null&&r!==void 0?r:e,right:(i=n.right)!==null&&i!==void 0?i:e,bottom:(o=n.bottom)!==null&&o!==void 0?o:e}):(typeof n!="number"&&(n=e),{top:n,right:n,bottom:n,left:n})}function sV(n,e){var t=ub(e.settings.margin,0);return n.pageSize().width-(t.left+t.right)}function pre(n,e,t,r,i){var o={},s=1.3333333333333333,a=aA(e,function(X){return i.getComputedStyle(X).backgroundColor});a!=null&&(o.fillColor=a);var c=aA(e,function(X){return i.getComputedStyle(X).color});c!=null&&(o.textColor=c);var l=mre(r,t);l&&(o.cellPadding=l);var u="borderTopColor",g=s*t,v=r.borderTopWidth;if(r.borderBottomWidth===v&&r.borderRightWidth===v&&r.borderLeftWidth===v){var p=(parseFloat(v)||0)/g;p&&(o.lineWidth=p)}else o.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/g,right:(parseFloat(r.borderRightWidth)||0)/g,bottom:(parseFloat(r.borderBottomWidth)||0)/g,left:(parseFloat(r.borderLeftWidth)||0)/g},o.lineWidth.top||(o.lineWidth.right?u="borderRightColor":o.lineWidth.bottom?u="borderBottomColor":o.lineWidth.left&&(u="borderLeftColor"));var S=aA(e,function(X){return i.getComputedStyle(X)[u]});S!=null&&(o.lineColor=S);var k=["left","right","center","justify"];k.indexOf(r.textAlign)!==-1&&(o.halign=r.textAlign),k=["middle","bottom","top"],k.indexOf(r.verticalAlign)!==-1&&(o.valign=r.verticalAlign);var L=parseInt(r.fontSize||"");isNaN(L)||(o.fontSize=L/s);var R=gre(r);R&&(o.fontStyle=R);var J=(r.fontFamily||"").toLowerCase();return n.indexOf(J)!==-1&&(o.font=J),o}function gre(n){var e="";return(n.fontWeight==="bold"||n.fontWeight==="bolder"||parseInt(n.fontWeight)>=700)&&(e="bold"),(n.fontStyle==="italic"||n.fontStyle==="oblique")&&(e+="italic"),e}function aA(n,e){var t=aV(n,e);if(!t)return null;var r=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var i=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],o=parseInt(r[4]);return o===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function aV(n,e){var t=e(n);return t==="rgba(0, 0, 0, 0)"||t==="transparent"||t==="initial"||t==="inherit"?n.parentElement==null?null:aV(n.parentElement,e):t}function mre(n,e){var t=[n.paddingTop,n.paddingRight,n.paddingBottom,n.paddingLeft],r=96/(72/e),i=(parseInt(n.lineHeight)-parseInt(n.fontSize))/e/2,o=t.map(function(a){return parseInt(a||"0")/r}),s=ub(o,0);return i>s.top&&(s.top=i),i>s.bottom&&(s.bottom=i),s}function cV(n,e,t,r,i){var o,s;r===void 0&&(r=!1),i===void 0&&(i=!1);var a;typeof e=="string"?a=t.document.querySelector(e):a=e;var c=Object.keys(n.getFontList()),l=n.scaleFactor(),u=[],g=[],v=[];if(!a)return console.error("Html table could not be found with input: ",e),{head:u,body:g,foot:v};for(var p=0;p<a.rows.length;p++){var S=a.rows[p],k=(s=(o=S?.parentElement)===null||o===void 0?void 0:o.tagName)===null||s===void 0?void 0:s.toLowerCase(),L=vre(c,l,t,S,r,i);L&&(k==="thead"?u.push(L):k==="tfoot"?v.push(L):g.push(L))}return{head:u,body:g,foot:v}}function vre(n,e,t,r,i,o){for(var s=new rV(r),a=0;a<r.cells.length;a++){var c=r.cells[a],l=t.getComputedStyle(c);if(i||l.display!=="none"){var u=void 0;o&&(u=pre(n,c,e,l,t)),s.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:u,_element:c,content:yre(c)})}}var g=t.getComputedStyle(r);if(s.length>0&&(i||g.display!=="none"))return s}function yre(n){var e=n.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(t){return t.trim()}).join(`
`),e.innerText||e.textContent||""}function _re(n,e,t){for(var r=0,i=[n,e,t];r<i.length;r++){var o=i[r];o&&typeof o!="object"&&console.error("The options parameter should be of type object, is: "+typeof o),o.startY&&typeof o.startY!="number"&&(console.error("Invalid value for startY option",o.startY),delete o.startY)}}function vl(n,e,t,r,i){if(n==null)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(n),s=1;s<arguments.length;s++){var a=arguments[s];if(a!=null)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(o[c]=a[c])}return o}function lV(n,e){var t=new Ap(n),r=t.getDocumentOptions(),i=t.getGlobalOptions();_re(i,r,e);var o=vl({},i,r,e),s;typeof window<"u"&&(s=window);var a=wre(i,r,e),c=bre(i,r,e),l=Ire(t,o),u=Cre(t,o,s);return{id:e.tableId,content:u,hooks:c,styles:a,settings:l}}function wre(n,e,t){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(c){if(c==="columnStyles"){var l=n[c],u=e[c],g=t[c];r.columnStyles=vl({},l,u,g)}else{var v=[n,e,t],p=v.map(function(S){return S[c]||{}});r[c]=vl({},p[0],p[1],p[2])}},o=0,s=Object.keys(r);o<s.length;o++){var a=s[o];i(a)}return r}function bre(n,e,t){for(var r=[n,e,t],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},o=0,s=r;o<s.length;o++){var a=s[o];a.didParseCell&&i.didParseCell.push(a.didParseCell),a.willDrawCell&&i.willDrawCell.push(a.willDrawCell),a.didDrawCell&&i.didDrawCell.push(a.didDrawCell),a.willDrawPage&&i.willDrawPage.push(a.willDrawPage),a.didDrawPage&&i.didDrawPage.push(a.didDrawPage)}return i}function Ire(n,e){var t,r,i,o,s,a,c,l,u,g,v,p,S=ub(e.margin,40/n.scaleFactor()),k=(t=Ere(n,e.startY))!==null&&t!==void 0?t:S.top,L;e.showFoot===!0?L="everyPage":e.showFoot===!1?L="never":L=(r=e.showFoot)!==null&&r!==void 0?r:"everyPage";var R;e.showHead===!0?R="everyPage":e.showHead===!1?R="never":R=(i=e.showHead)!==null&&i!==void 0?i:"everyPage";var J=(o=e.useCss)!==null&&o!==void 0?o:!1,X=e.theme||(J?"plain":"striped"),Z=!!e.horizontalPageBreak,me=(s=e.horizontalPageBreakRepeat)!==null&&s!==void 0?s:null;return{includeHiddenHtml:(a=e.includeHiddenHtml)!==null&&a!==void 0?a:!1,useCss:J,theme:X,startY:k,margin:S,pageBreak:(c=e.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(l=e.rowPageBreak)!==null&&l!==void 0?l:"auto",tableWidth:(u=e.tableWidth)!==null&&u!==void 0?u:"auto",showHead:R,showFoot:L,tableLineWidth:(g=e.tableLineWidth)!==null&&g!==void 0?g:0,tableLineColor:(v=e.tableLineColor)!==null&&v!==void 0?v:200,horizontalPageBreak:Z,horizontalPageBreakRepeat:me,horizontalPageBreakBehaviour:(p=e.horizontalPageBreakBehaviour)!==null&&p!==void 0?p:"afterAllRows"}}function Ere(n,e){var t=n.getLastAutoTable(),r=n.scaleFactor(),i=n.pageNumber(),o=!1;if(t&&t.startPageNumber){var s=t.startPageNumber+t.pageNumber-1;o=s===i}return typeof e=="number"?e:(e==null||e===!1)&&o&&t?.finalY!=null?t.finalY+20/r:null}function Cre(n,e,t){var r=e.head||[],i=e.body||[],o=e.foot||[];if(e.html){var s=e.includeHiddenHtml;if(t){var a=cV(n,e.html,t,s,e.useCss)||{};r=a.head||r,i=a.body||r,o=a.foot||r}else console.error("Cannot parse html in non browser environment")}var c=e.columns||xre(r,i,o);return{columns:c,head:r,body:i,foot:o}}function xre(n,e,t){var r=n[0]||e[0]||t[0]||[],i=[];return Object.keys(r).filter(function(o){return o!=="_element"}).forEach(function(o){var s=1,a;Array.isArray(r)?a=r[parseInt(o)]:a=r[o],typeof a=="object"&&!Array.isArray(a)&&(s=a?.colSpan||1);for(var c=0;c<s;c++){var l=void 0;Array.isArray(r)?l=i.length:l=o+(c>0?"_".concat(c):"");var u={dataKey:l};i.push(u)}}),i}var pA=(function(){function n(e,t,r){this.table=t,this.pageNumber=t.pageNumber,this.settings=t.settings,this.cursor=r,this.doc=e.getDocument()}return n})(),Sre=(function(n){nV(e,n);function e(t,r,i,o,s,a){var c=n.call(this,t,r,a)||this;return c.cell=i,c.row=o,c.column=s,c.section=o.section,c}return e})(pA),Dre=(function(){function n(e,t){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=t.columns,this.head=t.head,this.body=t.body,this.foot=t.foot}return n.prototype.getHeadHeight=function(e){return this.head.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},n.prototype.getFootHeight=function(e){return this.foot.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},n.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},n.prototype.callCellHooks=function(e,t,r,i,o,s){for(var a=0,c=t;a<c.length;a++){var l=c[a],u=new Sre(e,this,r,i,o,s),g=l(u)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],g)return!1}return!0},n.prototype.callEndPageHooks=function(e,t){e.applyStyles(e.userStyles);for(var r=0,i=this.hooks.didDrawPage;r<i.length;r++){var o=i[r];o(new pA(e,this,t))}},n.prototype.callWillDrawPageHooks=function(e,t){for(var r=0,i=this.hooks.willDrawPage;r<i.length;r++){var o=i[r];o(new pA(e,this,t))}},n.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var t=this.columns.reduce(function(i,o){return i+o.wrappedWidth},0);return t}else{var r=this.settings.margin;return e-r.left-r.right}},n})(),uV=(function(){function n(e,t,r,i,o){o===void 0&&(o=!1),this.height=0,this.raw=e,e instanceof rV&&(this.raw=e._element,this.element=e._element),this.index=t,this.section=r,this.cells=i,this.spansMultiplePages=o}return n.prototype.getMaxCellHeight=function(e){var t=this;return e.reduce(function(r,i){var o;return Math.max(r,((o=t.cells[i.index])===null||o===void 0?void 0:o.height)||0)},0)},n.prototype.hasRowSpan=function(e){var t=this;return e.filter(function(r){var i=t.cells[r.index];return i?i.rowSpan>1:!1}).length>0},n.prototype.canEntireRowFit=function(e,t){return this.getMaxCellHeight(t)<=e},n.prototype.getMinimumRowHeight=function(e,t){var r=this;return e.reduce(function(i,o){var s=r.cells[o.index];if(!s)return 0;var a=t.getLineHeight(s.styles.fontSize),c=s.padding("vertical"),l=c+a;return l>i?l:i},0)},n})(),dV=(function(){function n(e,t,r){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=t,this.section=r,this.raw=e;var o=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,o=(i=e.content)!==null&&i!==void 0?i:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var s=o!=null?""+o:"",a=/\r\n|\r|\n/g;this.text=s.split(a)}return n.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var t=this.height-this.padding("vertical");e=this.y+t/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");r=this.x+i/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:e}},n.prototype.getContentHeight=function(e,t){t===void 0&&(t=1.15);var r=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/e*t,o=r*i+this.padding("vertical");return Math.max(o,this.styles.minCellHeight)},n.prototype.padding=function(e){var t=ub(this.styles.cellPadding,0);return e==="vertical"?t.top+t.bottom:e==="horizontal"?t.left+t.right:t[e]},n})(),Tre=(function(){function n(e,t,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=t,this.index=r}return n.prototype.getMaxCustomCellWidth=function(e){for(var t=0,r=0,i=e.allRows();r<i.length;r++){var o=i[r],s=o.cells[this.index];s&&typeof s.styles.cellWidth=="number"&&(t=Math.max(t,s.styles.cellWidth))}return t},n})();function Are(n,e){Mre(n,e);var t=[],r=0;e.columns.forEach(function(o){var s=o.getMaxCustomCellWidth(e);s?o.width=s:(o.width=o.wrappedWidth,t.push(o)),r+=o.width});var i=e.getWidth(n.pageSize().width)-r;i&&(i=gA(t,i,function(o){return Math.max(o.minReadableWidth,o.minWidth)})),i&&(i=gA(t,i,function(o){return o.minWidth})),i=Math.abs(i),!e.settings.horizontalPageBreak&&i>.1/n.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),Nre(e),kre(e,n),Pre(e)}function Mre(n,e){var t=n.scaleFactor(),r=e.settings.horizontalPageBreak,i=sV(n,e);e.allRows().forEach(function(o){for(var s=0,a=e.columns;s<a.length;s++){var c=a[s],l=o.cells[c.index];if(l){var u=e.hooks.didParseCell;e.callCellHooks(n,u,l,o,c,null);var g=l.padding("horizontal");l.contentWidth=cb(l.text,l.styles,n)+g;var v=cb(l.text.join(" ").split(/[^\S\u00A0]+/),l.styles,n);if(l.minReadableWidth=v+l.padding("horizontal"),typeof l.styles.cellWidth=="number")l.minWidth=l.styles.cellWidth,l.wrappedWidth=l.styles.cellWidth;else if(l.styles.cellWidth==="wrap"||r===!0)l.contentWidth>i?(l.minWidth=i,l.wrappedWidth=i):(l.minWidth=l.contentWidth,l.wrappedWidth=l.contentWidth);else{var p=10/t;l.minWidth=l.styles.minCellWidth||p,l.wrappedWidth=l.contentWidth,l.minWidth>l.wrappedWidth&&(l.wrappedWidth=l.minWidth)}}}}),e.allRows().forEach(function(o){for(var s=0,a=e.columns;s<a.length;s++){var c=a[s],l=o.cells[c.index];if(l&&l.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,l.wrappedWidth),c.minWidth=Math.max(c.minWidth,l.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,l.minReadableWidth);else{var u=e.styles.columnStyles[c.dataKey]||e.styles.columnStyles[c.index]||{},g=u.cellWidth||u.minCellWidth;g&&typeof g=="number"&&(c.minWidth=g,c.wrappedWidth=g)}l&&(l.colSpan>1&&!c.minWidth&&(c.minWidth=l.minWidth),l.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=l.minWidth))}})}function gA(n,e,t){for(var r=e,i=n.reduce(function(p,S){return p+S.wrappedWidth},0),o=0;o<n.length;o++){var s=n[o],a=s.wrappedWidth/i,c=r*a,l=s.width+c,u=t(s),g=l<u?u:l;e-=g-s.width,s.width=g}if(e=Math.round(e*1e10)/1e10,e){var v=n.filter(function(p){return e<0?p.width>t(p):!0});v.length&&(e=gA(v,e,t))}return e}function Pre(n){for(var e={},t=1,r=n.allRows(),i=0;i<r.length;i++)for(var o=r[i],s=0,a=n.columns;s<a.length;s++){var c=a[s],l=e[c.index];if(t>1)t--,delete o.cells[c.index];else if(l)l.cell.height+=o.height,t=l.cell.colSpan,delete o.cells[c.index],l.left--,l.left<=1&&delete e[c.index];else{var u=o.cells[c.index];if(!u)continue;if(u.height=o.height,u.rowSpan>1){var g=r.length-i,v=u.rowSpan>g?g:u.rowSpan;e[c.index]={cell:u,left:v,row:o}}}}}function Nre(n){for(var e=n.allRows(),t=0;t<e.length;t++)for(var r=e[t],i=null,o=0,s=0,a=0;a<n.columns.length;a++){var c=n.columns[a];if(s-=1,s>1&&n.columns[a+1])o+=c.width,delete r.cells[c.index];else if(i){var l=i;delete r.cells[c.index],i=null,l.width=c.width+o}else{var l=r.cells[c.index];if(!l)continue;if(s=l.colSpan,o=0,l.colSpan>1){i=l,o+=c.width;continue}l.width=c.width+o}}}function kre(n,e){for(var t={count:0,height:0},r=0,i=n.allRows();r<i.length;r++){for(var o=i[r],s=0,a=n.columns;s<a.length;s++){var c=a[s],l=o.cells[c.index];if(l){e.applyStyles(l.styles,!0);var u=l.width-l.padding("horizontal");if(l.styles.overflow==="linebreak")l.text=e.splitTextToSize(l.text,u+1/e.scaleFactor(),{fontSize:l.styles.fontSize});else if(l.styles.overflow==="ellipsize")l.text=Z8(l.text,u,l.styles,e,"...");else if(l.styles.overflow==="hidden")l.text=Z8(l.text,u,l.styles,e,"");else if(typeof l.styles.overflow=="function"){var g=l.styles.overflow(l.text,u);typeof g=="string"?l.text=[g]:l.text=g}l.contentHeight=l.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var v=l.contentHeight/l.rowSpan;l.rowSpan>1&&t.count*t.height<v*l.rowSpan?t={height:v,count:l.rowSpan}:t&&t.count>0&&t.height>v&&(v=t.height),v>o.height&&(o.height=v)}}t.count--}}function Z8(n,e,t,r,i){return n.map(function(o){return Rre(o,e,t,r,i)})}function Rre(n,e,t,r,i){var o=1e4*r.scaleFactor();if(e=Math.ceil(e*o)/o,e>=cb(n,t,r))return n;for(;e<cb(n+i,t,r)&&!(n.length<=1);)n=n.substring(0,n.length-1);return n.trim()+i}function hV(n,e){var t=new Ap(n),r=Ore(e,t.scaleFactor()),i=new Dre(e,r);return Are(t,i),t.applyStyles(t.userStyles),i}function Ore(n,e){var t=n.content,r=Fre(t.columns);if(t.head.length===0){var i=J8(r,"head");i&&t.head.push(i)}if(t.foot.length===0){var i=J8(r,"foot");i&&t.foot.push(i)}var o=n.settings.theme,s=n.styles;return{columns:r,head:cA("head",t.head,r,s,o,e),body:cA("body",t.body,r,s,o,e),foot:cA("foot",t.foot,r,s,o,e)}}function cA(n,e,t,r,i,o){var s={},a=e.map(function(c,l){for(var u=0,g={},v=0,p=0,S=0,k=t;S<k.length;S++){var L=k[S];if(s[L.index]==null||s[L.index].left===0)if(p===0){var R=void 0;Array.isArray(c)?R=c[L.index-v-u]:R=c[L.dataKey];var J={};typeof R=="object"&&!Array.isArray(R)&&(J=R?.styles||{});var X=Vre(n,L,l,i,r,o,J),Z=new dV(R,X,n);g[L.dataKey]=Z,g[L.index]=Z,p=Z.colSpan-1,s[L.index]={left:Z.rowSpan-1,times:p}}else p--,v++;else s[L.index].left--,p=s[L.index].times,u++}return new uV(c,l,n,g)});return a}function J8(n,e){var t={};return n.forEach(function(r){if(r.raw!=null){var i=Lre(e,r.raw);i!=null&&(t[r.dataKey]=i)}}),Object.keys(t).length>0?t:null}function Lre(n,e){if(n==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(n==="foot"&&typeof e=="object")return e.footer;return null}function Fre(n){return n.map(function(e,t){var r,i;return typeof e=="object"?i=(r=e.dataKey)!==null&&r!==void 0?r:t:i=t,new Tre(i,e,t)})}function Vre(n,e,t,r,i,o,s){var a=fre(r),c;n==="head"?c=i.headStyles:n==="body"?c=i.bodyStyles:n==="foot"&&(c=i.footStyles);var l=vl({},a.table,a[n],i.styles,c),u=i.columnStyles[e.dataKey]||i.columnStyles[e.index]||{},g=n==="body"?u:{},v=n==="body"&&t%2===0?vl({},a.alternateRow,i.alternateRowStyles):{},p=hre(o),S=vl({},p,l,v,g);return vl(S,s)}function jre(n,e,t){var r;t===void 0&&(t={});var i=sV(n,e),o=new Map,s=[],a=[],c=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?c=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(c=[e.settings.horizontalPageBreakRepeat]),c.forEach(function(v){var p=e.columns.find(function(S){return S.dataKey===v||S.index===v});p&&!o.has(p.index)&&(o.set(p.index,!0),s.push(p.index),a.push(e.columns[p.index]),i-=p.wrappedWidth)});for(var l=!0,u=(r=t?.start)!==null&&r!==void 0?r:0;u<e.columns.length;){if(o.has(u)){u++;continue}var g=e.columns[u].wrappedWidth;if(l||i>=g)l=!1,s.push(u),a.push(e.columns[u]),i-=g;else break;u++}return{colIndexes:s,columns:a,lastIndex:u-1}}function Bre(n,e){for(var t=[],r=0;r<e.columns.length;r++){var i=jre(n,e,{start:r});i.columns.length&&(t.push(i),r=i.lastIndex)}return t}function fV(n,e){var t=e.settings,r=t.startY,i=t.margin,o={x:i.left,y:r},s=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),a=r+i.bottom+s;if(t.pageBreak==="avoid"){var c=e.body,l=c.reduce(function(v,p){return v+p.height},0);a+=l}var u=new Ap(n);(t.pageBreak==="always"||t.startY!=null&&a>u.pageSize().height)&&(gV(u),o.y=i.top),e.callWillDrawPageHooks(u,o);var g=vl({},o);e.startPageNumber=u.pageNumber(),t.horizontalPageBreak?Ure(u,e,g,o):(u.applyStyles(u.userStyles),(t.showHead==="firstPage"||t.showHead==="everyPage")&&e.head.forEach(function(v){return yl(u,e,v,o,e.columns)}),u.applyStyles(u.userStyles),e.body.forEach(function(v,p){var S=p===e.body.length-1;lb(u,e,v,S,g,o,e.columns)}),u.applyStyles(u.userStyles),(t.showFoot==="lastPage"||t.showFoot==="everyPage")&&e.foot.forEach(function(v){return yl(u,e,v,o,e.columns)})),iV(u,e,g,o),e.callEndPageHooks(u,o),e.finalY=o.y,n.lastAutoTable=e,u.applyStyles(u.userStyles)}function Ure(n,e,t,r){var i=Bre(n,e),o=e.settings;if(o.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(l,u){n.applyStyles(n.userStyles),u>0?R0(n,e,t,r,l.columns,!0):X8(n,e,r,l.columns),zre(n,e,t,r,l.columns),lA(n,e,r,l.columns)});else for(var s=-1,a=i[0],c=function(){var l=s;if(a){n.applyStyles(n.userStyles);var u=a.columns;s>=0?R0(n,e,t,r,u,!0):X8(n,e,r,u),l=eV(n,e,s+1,r,u),lA(n,e,r,u)}var g=l-s;i.slice(1).forEach(function(v){n.applyStyles(n.userStyles),R0(n,e,t,r,v.columns,!0),eV(n,e,s+1,r,v.columns,g),lA(n,e,r,v.columns)}),s=l};s<e.body.length-1;)c()}function X8(n,e,t,r){var i=e.settings;n.applyStyles(n.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&e.head.forEach(function(o){return yl(n,e,o,t,r)})}function zre(n,e,t,r,i){n.applyStyles(n.userStyles),e.body.forEach(function(o,s){var a=s===e.body.length-1;lb(n,e,o,a,t,r,i)})}function eV(n,e,t,r,i,o){n.applyStyles(n.userStyles),o=o??e.body.length;var s=Math.min(t+o,e.body.length),a=-1;return e.body.slice(t,s).forEach(function(c,l){var u=t+l===e.body.length-1,g=pV(n,e,u,r);c.canEntireRowFit(g,i)&&(yl(n,e,c,r,i),a=t+l)}),a}function lA(n,e,t,r){var i=e.settings;n.applyStyles(n.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&e.foot.forEach(function(o){return yl(n,e,o,t,r)})}function qre(n,e,t){var r=t.getLineHeight(n.styles.fontSize),i=n.padding("vertical"),o=Math.floor((e-i)/r);return Math.max(0,o)}function Hre(n,e,t,r){var i={};n.spansMultiplePages=!0,n.height=0;for(var o=0,s=0,a=t.columns;s<a.length;s++){var c=a[s],l=n.cells[c.index];if(l){Array.isArray(l.text)||(l.text=[l.text]);var u=new dV(l.raw,l.styles,l.section);u=vl(u,l),u.text=[];var g=qre(l,e,r);l.text.length>g&&(u.text=l.text.splice(g,l.text.length));var v=r.scaleFactor(),p=r.getLineHeightFactor();l.contentHeight=l.getContentHeight(v,p),l.contentHeight>=e&&(l.contentHeight=e,u.styles.minCellHeight-=e),l.contentHeight>n.height&&(n.height=l.contentHeight),u.contentHeight=u.getContentHeight(v,p),u.contentHeight>o&&(o=u.contentHeight),i[c.index]=u}}var S=new uV(n.raw,-1,n.section,i,!0);S.height=o;for(var k=0,L=t.columns;k<L.length;k++){var c=L[k],u=S.cells[c.index];u&&(u.height=S.height);var l=n.cells[c.index];l&&(l.height=n.height)}return S}function $re(n,e,t,r){var i=n.pageSize().height,o=r.settings.margin,s=o.top+o.bottom,a=i-s;e.section==="body"&&(a-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var c=e.getMinimumRowHeight(r.columns,n),l=c<t;if(c>a)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!l)return!1;var u=e.hasRowSpan(r.columns),g=e.getMaxCellHeight(r.columns)>a;return g?(u&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(u||r.settings.rowPageBreak==="avoid")}function lb(n,e,t,r,i,o,s){var a=pV(n,e,r,o);if(t.canEntireRowFit(a,s))yl(n,e,t,o,s);else if($re(n,t,a,e)){var c=Hre(t,a,e,n);yl(n,e,t,o,s),R0(n,e,i,o,s),lb(n,e,c,r,i,o,s)}else R0(n,e,i,o,s),lb(n,e,t,r,i,o,s)}function yl(n,e,t,r,i){r.x=e.settings.margin.left;for(var o=0,s=i;o<s.length;o++){var a=s[o],c=t.cells[a.index];if(!c){r.x+=a.width;continue}n.applyStyles(c.styles),c.x=r.x,c.y=r.y;var l=e.callCellHooks(n,e.hooks.willDrawCell,c,t,a,r);if(l===!1){r.x+=a.width;continue}Wre(n,c,r);var u=c.getTextPos();tV(c.text,u.x,u.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},n.getDocument()),e.callCellHooks(n,e.hooks.didDrawCell,c,t,a,r),r.x+=a.width}r.y+=t.height}function Wre(n,e,t){var r=e.styles;if(n.getDocument().setFillColor(n.getDocument().getFillColor()),typeof r.lineWidth=="number"){var i=oV(r.lineWidth,r.fillColor);i&&n.rect(e.x,t.y,e.width,e.height,i)}else typeof r.lineWidth=="object"&&(r.fillColor&&n.rect(e.x,t.y,e.width,e.height,"F"),Gre(n,e,t,r.lineWidth))}function Gre(n,e,t,r){var i,o,s,a;r.top&&(i=t.x,o=t.y,s=t.x+e.width,a=t.y,r.right&&(s+=.5*r.right),r.left&&(i-=.5*r.left),c(r.top,i,o,s,a)),r.bottom&&(i=t.x,o=t.y+e.height,s=t.x+e.width,a=t.y+e.height,r.right&&(s+=.5*r.right),r.left&&(i-=.5*r.left),c(r.bottom,i,o,s,a)),r.left&&(i=t.x,o=t.y,s=t.x,a=t.y+e.height,r.top&&(o-=.5*r.top),r.bottom&&(a+=.5*r.bottom),c(r.left,i,o,s,a)),r.right&&(i=t.x+e.width,o=t.y,s=t.x+e.width,a=t.y+e.height,r.top&&(o-=.5*r.top),r.bottom&&(a+=.5*r.bottom),c(r.right,i,o,s,a));function c(l,u,g,v,p){n.getDocument().setLineWidth(l),n.getDocument().line(u,g,v,p,"S")}}function pV(n,e,t,r){var i=e.settings.margin.bottom,o=e.settings.showFoot;return(o==="everyPage"||o==="lastPage"&&t)&&(i+=e.getFootHeight(e.columns)),n.pageSize().height-r.y-i}function R0(n,e,t,r,i,o){i===void 0&&(i=[]),o===void 0&&(o=!1),n.applyStyles(n.userStyles),e.settings.showFoot==="everyPage"&&!o&&e.foot.forEach(function(a){return yl(n,e,a,r,i)}),e.callEndPageHooks(n,r);var s=e.settings.margin;iV(n,e,t,r),gV(n),e.pageNumber++,r.x=s.left,r.y=s.top,t.y=s.top,e.callWillDrawPageHooks(n,r),e.settings.showHead==="everyPage"&&(e.head.forEach(function(a){return yl(n,e,a,r,i)}),n.applyStyles(n.userStyles))}function gV(n){var e=n.pageNumber();n.setPage(e+1);var t=n.pageNumber();return t===e?(n.addPage(),!0):!1}function Kre(n){n.API.autoTable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[0],i=lV(this,r),o=hV(this,i);return fV(this,o),this},n.API.lastAutoTable=!1,n.API.autoTableText=function(e,t,r,i){tV(e,t,r,i,this)},n.API.autoTableSetDefaults=function(e){return Ap.setDefaults(e,this),this},n.autoTableSetDefaults=function(e,t){Ap.setDefaults(e,t)},n.API.autoTableHtmlToJson=function(e,t){var r;if(t===void 0&&(t=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new Ap(this),o=cV(i,e,window,t,!1),s=o.head,a=o.body,c=((r=s[0])===null||r===void 0?void 0:r.map(function(l){return l.content}))||[];return{columns:c,rows:a,data:a}}}var uA;function O0(n,e){var t=lV(n,e),r=hV(n,t);fV(n,r)}try{typeof window<"u"&&window&&(dA=window,hA=dA.jsPDF||((uA=dA.jspdf)===null||uA===void 0?void 0:uA.jsPDF),hA&&Kre(hA))}catch(n){console.error("Could not apply autoTable plugin",n)}var dA,hA;function Yre(n,e){if(n&1&&(b(0,"tr")(1,"td"),C(2),w(),b(3,"td"),C(4),w(),b(5,"td"),C(6),w(),b(7,"td"),C(8),w(),b(9,"td"),C(10),w()()),n&2){let t=e.$implicit,r=oe(2);O(2),Ue(t.orderNumber),O(2),Ue(r.formatDate(t.createdAt)),O(2),Ue(t.isTakeaway?"Takeaway":"Table "+t.tableNumber),O(2),Ge("",t.items.length," items"),O(2),Ue(t.totalAmount.toFixed(0))}}function Qre(n,e){n&1&&(b(0,"tr")(1,"td",22),C(2,"No sales in this period"),w()())}function Zre(n,e){if(n&1&&(b(0,"div",18)(1,"h2"),C(2,"Sales Details"),w(),b(3,"table",19)(4,"thead")(5,"tr")(6,"th"),C(7,"Order #"),w(),b(8,"th"),C(9,"Date"),w(),b(10,"th"),C(11,"Table/Type"),w(),b(12,"th"),C(13,"Items"),w(),b(14,"th"),C(15,"Amount"),w()()(),b(16,"tbody"),He(17,Yre,11,5,"tr",20)(18,Qre,3,0,"tr",21),w()()()),n&2){let t=oe();O(17),he("ngForOf",t.salesOrders),O(),he("ngIf",t.salesOrders.length===0)}}function Jre(n,e){if(n&1&&(b(0,"tr")(1,"td"),C(2),iu(3,"date"),w(),b(4,"td"),C(5),w(),b(6,"td"),C(7),w(),b(8,"td"),C(9),w(),b(10,"td"),C(11),w()()),n&2){let t=e.$implicit;O(2),Ue(ou(3,6,t.date,"short")),O(3),Ue(t.supplierName),O(2),Ue(t.inventoryItemName),O(2),No("",t.quantity," ",t.unit),O(2),Ue(t.totalCost.toFixed(0))}}function Xre(n,e){n&1&&(b(0,"tr")(1,"td",22),C(2,"No expenses in this period"),w()())}function eie(n,e){if(n&1&&(b(0,"div",18)(1,"h2"),C(2,"Expense Details"),w(),b(3,"table",19)(4,"thead")(5,"tr")(6,"th"),C(7,"Date"),w(),b(8,"th"),C(9,"Supplier"),w(),b(10,"th"),C(11,"Item"),w(),b(12,"th"),C(13,"Quantity"),w(),b(14,"th"),C(15,"Cost"),w()()(),b(16,"tbody"),He(17,Jre,12,9,"tr",20)(18,Xre,3,0,"tr",21),w()()()),n&2){let t=oe();O(17),he("ngForOf",t.expenses),O(),he("ngIf",t.expenses.length===0)}}function tie(n,e){if(n&1&&(b(0,"tr")(1,"td"),C(2),w(),b(3,"td"),C(4),w(),b(5,"td"),C(6),w(),b(7,"td"),C(8),w()()),n&2){let t=e.$implicit,r=e.index;O(2),Ue(r+1),O(2),Ue(t.name),O(2),Ue(t.sold),O(2),Ue(t.revenue.toFixed(0))}}function nie(n,e){n&1&&(b(0,"tr")(1,"td",23),C(2,"No sales data available"),w()())}function rie(n,e){if(n&1&&(b(0,"div",18)(1,"h2"),C(2,"Best Selling Items"),w(),b(3,"table",19)(4,"thead")(5,"tr")(6,"th"),C(7,"Rank"),w(),b(8,"th"),C(9,"Item Name"),w(),b(10,"th"),C(11,"Quantity Sold"),w(),b(12,"th"),C(13,"Total Revenue"),w()()(),b(14,"tbody"),He(15,tie,9,4,"tr",20)(16,nie,3,0,"tr",21),w()()()),n&2){let t=oe();O(15),he("ngForOf",t.itemPerformance),O(),he("ngIf",t.itemPerformance.length===0)}}var db=class n{constructor(e){this.db=e}activeTab="sales";startDate="";endDate="";salesOrders=[];totalRevenue=0;totalOrdersCount=0;expenses=[];totalExpenses=0;profit=0;itemPerformance=[];ngOnInit(){return B(this,null,function*(){let e=new Date;this.endDate=e.toISOString().split("T")[0];let t=new Date(e);t.setDate(t.getDate()-7),this.startDate=t.toISOString().split("T")[0],yield this.loadReports()})}loadReports(){return B(this,null,function*(){let e=new Date(this.startDate),t=new Date(this.endDate);t.setHours(23,59,59);try{this.salesOrders=yield this.db.getOrdersByDateRange(e,t),this.salesOrders=this.salesOrders.filter(r=>r.status==="completed"),this.totalRevenue=this.salesOrders.reduce((r,i)=>r+i.totalAmount,0),this.totalOrdersCount=this.salesOrders.length,this.expenses=yield this.db.getPurchasesByDateRange(e,t),this.totalExpenses=this.expenses.reduce((r,i)=>r+i.totalCost,0),this.profit=this.totalRevenue-this.totalExpenses,this.calculateItemPerformance()}catch(r){console.error("Error loading reports:",r)}})}calculateItemPerformance(){let e=new Map;for(let t of this.salesOrders)for(let r of t.items){let i=e.get(r.menuItemName)||{sold:0,revenue:0};i.sold+=r.quantity,i.revenue+=r.totalPrice,e.set(r.menuItemName,i)}this.itemPerformance=Array.from(e.entries()).map(([t,r])=>({name:t,sold:r.sold,revenue:r.revenue})).sort((t,r)=>r.revenue-t.revenue)}switchTab(e){this.activeTab=e}formatDate(e){if(!e)return"N/A";let t;return e.toDate&&typeof e.toDate=="function"?t=e.toDate():e instanceof Date?t=e:t=new Date(e),isNaN(t.getTime())?"Invalid Date":t.toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})}exportToPDF(){let e=new mt,t=`${this.startDate} to ${this.endDate}`,r=20;e.setFontSize(18),e.setFont("helvetica","bold"),e.text("VISAKH",105,r,{align:"center"}),r+=10,e.setFontSize(14),e.text("Reports & Accounts",105,r,{align:"center"}),r+=8,e.setFontSize(10),e.setFont("helvetica","normal"),e.text(`Period: ${t}`,105,r,{align:"center"}),r+=5,e.text(`Generated: ${new Date().toLocaleString()}`,105,r,{align:"center"}),r+=15,e.setFontSize(12),e.setFont("helvetica","bold"),e.text("SUMMARY",14,r),r+=8,O0(e,{startY:r,head:[["Metric","Value"]],body:[["Total Revenue",`$${this.totalRevenue.toFixed(2)} (${this.totalOrdersCount} orders)`],["Total Expenses",`$${this.totalExpenses.toFixed(2)} (${this.expenses.length} purchases)`],["Net Profit/Loss",`$${this.profit.toFixed(2)}`]],theme:"grid",headStyles:{fillColor:[102,126,234]},margin:{left:14,right:14}}),r=e.lastAutoTable.finalY+15,e.setFontSize(12),e.setFont("helvetica","bold"),e.text("SALES REPORT",14,r),r+=8;let i=this.salesOrders.map(c=>[c.orderNumber,this.formatDate(c.createdAt),c.isTakeaway?"Takeaway":`Table ${c.tableNumber}`,c.items.map(l=>`${l.quantity}x ${l.menuItemName}`).join(", "),c.cashierName,`$${c.totalAmount.toFixed(2)}`]);O0(e,{startY:r,head:[["Order #","Date","Type","Items","Cashier","Amount"]],body:i.length>0?i:[["No sales in this period","","","","",""]],theme:"striped",headStyles:{fillColor:[76,175,80]},margin:{left:14,right:14},styles:{fontSize:8,cellPadding:3},columnStyles:{3:{cellWidth:60}}}),r=e.lastAutoTable.finalY+15,r>250&&(e.addPage(),r=20),e.setFontSize(12),e.setFont("helvetica","bold"),e.text("EXPENSE REPORT",14,r),r+=8;let o=this.expenses.map(c=>[this.formatDate(c.date),c.supplierName,c.inventoryItemName,`${c.quantity} ${c.unit}`,`$${c.totalCost.toFixed(2)}`]);O0(e,{startY:r,head:[["Date","Supplier","Item","Quantity","Cost"]],body:o.length>0?o:[["No expenses in this period","","","",""]],theme:"striped",headStyles:{fillColor:[255,152,0]},margin:{left:14,right:14},styles:{fontSize:9,cellPadding:3}}),r=e.lastAutoTable.finalY+15,r>250&&(e.addPage(),r=20),e.setFontSize(12),e.setFont("helvetica","bold"),e.text("ITEM PERFORMANCE",14,r),r+=8;let s=this.itemPerformance.map((c,l)=>[(l+1).toString(),c.name,c.sold.toString(),`$${c.revenue.toFixed(2)}`]);O0(e,{startY:r,head:[["Rank","Item Name","Quantity Sold","Total Revenue"]],body:s.length>0?s:[["No sales data available","","",""]],theme:"striped",headStyles:{fillColor:[33,150,243]},margin:{left:14,right:14},styles:{fontSize:9,cellPadding:3}});let a=`HMS_Report_${this.startDate}_to_${this.endDate}.pdf`;e.save(a),alert("PDF report exported successfully!")}clearRecords(){return B(this,null,function*(){let t=`Are you sure you want to delete ALL records (sales and expenses) for the period ${`${this.startDate} to ${this.endDate}`}?

This action cannot be undone!

Records to be deleted:
- ${this.salesOrders.length} sales orders
- ${this.expenses.length} expense records`;if(confirm(t)&&confirm("Final confirmation: This will permanently delete all selected records. Continue?"))try{let r=0,i=0;for(let o of this.salesOrders)o.id&&(yield this.db.deleteOrder(o.id),r++);for(let o of this.expenses)o.id&&(yield this.db.deletePurchase(o.id),i++);alert(`Records cleared successfully!

Deleted:
- ${r} sales orders
- ${i} expense records`),yield this.loadReports()}catch(r){console.error("Error clearing records:",r),alert("Error clearing records. Please try again.")}})}static \u0275fac=function(t){return new(t||n)(Xe(Mr))};static \u0275cmp=sr({type:n,selectors:[["app-reports"]],decls:60,vars:19,consts:[[1,"reports-container"],[1,"filter-section"],[1,"date-filters"],[1,"form-group"],["type","date",3,"input","value"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-export",3,"click"],[1,"btn","btn-danger",3,"click"],[1,"summary-cards"],[1,"summary-card","revenue"],[1,"card-icon"],[1,"card-content"],[1,"card-value"],[1,"summary-card","expenses"],[1,"summary-card","profit"],[1,"tabs"],[3,"click"],["class","tab-content",4,"ngIf"],[1,"tab-content"],[1,"data-table"],[4,"ngFor","ngForOf"],[4,"ngIf"],["colspan","5",1,"no-data"],["colspan","4",1,"no-data"]],template:function(t,r){t&1&&(b(0,"div",0)(1,"h1"),C(2,"Reports & Accounts"),w(),b(3,"div",1)(4,"div",2)(5,"div",3)(6,"label"),C(7,"Start Date:"),w(),b(8,"input",4),xe("input",function(o){return r.startDate=o.target.value}),w()(),b(9,"div",3)(10,"label"),C(11,"End Date:"),w(),b(12,"input",4),xe("input",function(o){return r.endDate=o.target.value}),w()(),b(13,"button",5),xe("click",function(){return r.loadReports()}),C(14,"Apply Filter"),w(),b(15,"button",6),xe("click",function(){return r.exportToPDF()}),C(16,"\u{1F4C4} Export to PDF"),w(),b(17,"button",7),xe("click",function(){return r.clearRecords()}),C(18,"\u{1F5D1}\uFE0F Clear Records"),w()()(),b(19,"div",8)(20,"div",9)(21,"div",10),C(22,"\u{1F4B0}"),w(),b(23,"div",11)(24,"h3"),C(25,"Total Revenue"),w(),b(26,"p",12),C(27),w(),b(28,"small"),C(29),w()()(),b(30,"div",13)(31,"div",10),C(32,"\u{1F4CA}"),w(),b(33,"div",11)(34,"h3"),C(35,"Total Expenses"),w(),b(36,"p",12),C(37),w(),b(38,"small"),C(39),w()()(),b(40,"div",14)(41,"div",10),C(42),w(),b(43,"div",11)(44,"h3"),C(45,"Profit/Loss"),w(),b(46,"p",12),C(47),w(),b(48,"small"),C(49,"Revenue - Expenses"),w()()()(),b(50,"div",15)(51,"button",16),xe("click",function(){return r.switchTab("sales")}),C(52,"Sales Report"),w(),b(53,"button",16),xe("click",function(){return r.switchTab("expenses")}),C(54,"Expense Report"),w(),b(55,"button",16),xe("click",function(){return r.switchTab("items")}),C(56,"Item Performance"),w()(),He(57,Zre,19,2,"div",17)(58,eie,19,2,"div",17)(59,rie,17,2,"div",17),w()),t&2&&(O(8),he("value",r.startDate),O(4),he("value",r.endDate),O(15),Ue(r.totalRevenue.toFixed(0)),O(2),Ge("",r.totalOrdersCount," orders"),O(8),Ue(r.totalExpenses.toFixed(0)),O(2),Ge("",r.expenses.length," purchases"),O(),on("negative",r.profit<0),O(2),Ue(r.profit>=0?"\u{1F4C8}":"\u{1F4C9}"),O(5),Ue(r.profit.toFixed(0)),O(4),on("active",r.activeTab==="sales"),O(2),on("active",r.activeTab==="expenses"),O(2),on("active",r.activeTab==="items"),O(2),he("ngIf",r.activeTab==="sales"),O(),he("ngIf",r.activeTab==="expenses"),O(),he("ngIf",r.activeTab==="items"))},dependencies:[lr,Qr,Ir,Wi,Ad],styles:[".reports-container[_ngcontent-%COMP%]{padding:20px;max-width:1400px;margin:0 auto}h1[_ngcontent-%COMP%]{font-size:28px;color:#333;margin-bottom:30px}.filter-section[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:10px;box-shadow:0 2px 8px #0000001a;margin-bottom:20px}.date-filters[_ngcontent-%COMP%]{display:flex;gap:20px;align-items:flex-end}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#666}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #ddd;border-radius:5px;font-size:14px}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:5px;font-size:14px;font-weight:500;cursor:pointer;transition:all .3s}.btn-primary[_ngcontent-%COMP%]{background:#667eea;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:#5568d3}.btn-export[_ngcontent-%COMP%]{background:#4caf50;color:#fff}.btn-export[_ngcontent-%COMP%]:hover{background:#45a049}.btn-danger[_ngcontent-%COMP%]{background:#f44336;color:#fff}.btn-danger[_ngcontent-%COMP%]:hover{background:#da190b}.summary-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px;margin-bottom:30px}.summary-card[_ngcontent-%COMP%]{background:#fff;border-radius:10px;padding:20px;display:flex;align-items:center;gap:15px;box-shadow:0 2px 8px #0000001a}.summary-card.revenue[_ngcontent-%COMP%]{border-left:4px solid #4caf50}.summary-card.expenses[_ngcontent-%COMP%]{border-left:4px solid #ff9800}.summary-card.profit[_ngcontent-%COMP%]{border-left:4px solid #2196f3}.summary-card.profit.negative[_ngcontent-%COMP%]{border-left:4px solid #f44336}.card-icon[_ngcontent-%COMP%]{font-size:48px}.card-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:14px;color:#666;margin:0 0 8px}.card-value[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:#333;margin:0 0 5px}.card-content[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#999;font-size:12px}.tabs[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:20px;border-bottom:2px solid #eee}.tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 24px;border:none;background:none;cursor:pointer;font-size:15px;font-weight:500;color:#666;border-bottom:3px solid transparent}.tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{color:#667eea;border-bottom-color:#667eea}.tab-content[_ngcontent-%COMP%]{background:#fff;border-radius:10px;padding:20px;box-shadow:0 2px 8px #0000001a}.tab-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 20px;font-size:20px;color:#333}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#f5f5f5}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:15px;text-align:left;font-weight:600;color:#333;border-bottom:2px solid #ddd}.data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:15px;border-bottom:1px solid #eee}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f9f9f9}.no-data[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#999}"]})};function iie(n,e){if(n&1&&(b(0,"div",20),C(1),w()),n&2){let t=oe(2).$implicit;O(),Ge("",t.activeOrder.totalAmount.toFixed(0)," PKR")}}function oie(n,e){if(n&1&&(b(0,"div",17)(1,"div",18),C(2),w(),He(3,iie,2,1,"div",19),w()),n&2){let t=oe().$implicit,r=oe(2);O(2),Ge("\u23F1 ",r.getTimeSinceSeated(t)),O(),he("ngIf",t.activeOrder)}}function sie(n,e){n&1&&(b(0,"div",17)(1,"div",21),C(2,"\u{1F4B5} Bill Requested"),w()())}function aie(n,e){if(n&1){let t=Rt();b(0,"div",14),xe("click",function(){let i=_e(t).$implicit,o=oe(2);return we(o.selectTable(i))}),b(1,"div",15),C(2),w(),He(3,oie,4,2,"div",16)(4,sie,3,0,"div",16),w()}if(n&2){let t=e.$implicit;on("free",t.status==="free")("occupied",t.status==="occupied")("bill-requested",t.status==="billRequested"),O(2),Ge("Table ",t.number),O(),he("ngIf",t.status==="occupied"),O(),he("ngIf",t.status==="billRequested")}}function cie(n,e){if(n&1){let t=Rt();b(0,"div",8)(1,"div",9)(2,"button",10),xe("click",function(){_e(t);let i=oe();return we(i.setFilter("all"))}),C(3," All "),w(),b(4,"button",10),xe("click",function(){_e(t);let i=oe();return we(i.setFilter("free"))}),C(5," Free "),w(),b(6,"button",10),xe("click",function(){_e(t);let i=oe();return we(i.setFilter("occupied"))}),C(7," Occupied "),w(),b(8,"button",10),xe("click",function(){_e(t);let i=oe();return we(i.setFilter("billRequested"))}),C(9," Bill Requested "),w()(),b(10,"div",11),He(11,aie,5,9,"div",12),w(),b(12,"button",13),xe("click",function(){_e(t);let i=oe();return we(i.startTakeaway())}),b(13,"span"),C(14,"+ New Takeaway"),w()()()}if(n&2){let t=oe();O(2),on("active",t.selectedFilter==="all"),O(2),on("active",t.selectedFilter==="free"),O(2),on("active",t.selectedFilter==="occupied"),O(2),on("active",t.selectedFilter==="billRequested"),O(3),he("ngForOf",t.filteredTables)}}function lie(n,e){if(n&1&&(b(0,"div",47),C(1),w()),n&2){let t=oe().$implicit;O(),Ge("\u{1F4DD} ",t.notes)}}function uie(n,e){if(n&1&&(b(0,"div",39)(1,"div",40)(2,"div",41),C(3),w(),He(4,lie,2,1,"div",42),w(),b(5,"div",43),C(6),w(),b(7,"div",44),C(8),w(),b(9,"div",45)(10,"span",46),C(11),w()()()),n&2){let t=e.$implicit,r=oe(3);O(3),Ue(t.menuItemName),O(),he("ngIf",t.notes),O(2),Ge("",t.quantity,"x"),O(2),Ge("",t.totalPrice.toFixed(0)," PKR"),O(2),xd("background-color",r.getStatusColor((r.selectedTable==null||r.selectedTable.activeOrder==null?null:r.selectedTable.activeOrder.status)||"pending")),O(),Ge(" ",r.getStatusText((r.selectedTable==null||r.selectedTable.activeOrder==null?null:r.selectedTable.activeOrder.status)||"pending")," ")}}function die(n,e){if(n&1&&(b(0,"div",37),He(1,uie,12,7,"div",38),w()),n&2){let t=oe(2);O(),he("ngForOf",t.selectedTable==null||t.selectedTable.activeOrder==null?null:t.selectedTable.activeOrder.items)}}function hie(n,e){n&1&&(b(0,"div",48),C(1,"No items ordered yet"),w())}function fie(n,e){if(n&1&&(b(0,"div",47),C(1),w()),n&2){let t=oe().$implicit;O(),Ge("\u{1F4DD} ",t.notes)}}function pie(n,e){if(n&1){let t=Rt();b(0,"div",57)(1,"div",40)(2,"div",41),C(3),w(),He(4,fie,2,1,"div",42),w(),b(5,"div",58)(6,"input",59),ht("ngModelChange",function(i){let o=_e(t).$implicit;return pt(o.quantity,i)||(o.quantity=i),we(i)}),xe("ngModelChange",function(){let i=_e(t).$implicit,o=oe(3);return we(o.updateEditableQuantity(i,i.quantity))}),w()(),b(7,"div",44),C(8),w(),b(9,"button",60),xe("click",function(){let i=_e(t).$implicit,o=oe(3);return we(o.removeEditableItem(i))}),C(10,"\u2715"),w()()}if(n&2){let t=e.$implicit;O(3),Ue(t.menuItemName),O(),he("ngIf",t.notes),O(2),dt("ngModel",t.quantity),O(2),Ge("",t.totalPrice.toFixed(0)," PKR")}}function gie(n,e){if(n&1){let t=Rt();b(0,"div",49)(1,"h3"),C(2,"Edit Order"),w(),b(3,"div",50),He(4,pie,11,4,"div",51),w(),b(5,"div",52)(6,"div",53)(7,"span"),C(8,"Edited Subtotal:"),w(),b(9,"span"),C(10),w()()(),b(11,"div",54)(12,"button",55),xe("click",function(){_e(t);let i=oe(2);return we(i.cancelEditOrder())}),C(13,"Close"),w(),b(14,"button",56),xe("click",function(){_e(t);let i=oe(2);return we(i.saveOrderEdits())}),C(15,"Save Changes"),w()()()}if(n&2){let t=oe(2);O(4),he("ngForOf",t.editableItems),O(6),Ge("",t.getEditableSubtotal().toFixed(0)," PKR"),O(4),he("disabled",t.isLoading||t.editableItems.length===0)}}function mie(n,e){if(n&1){let t=Rt();b(0,"button",61),xe("click",function(){_e(t);let i=oe(2);return we(i.startEditOrder())}),b(1,"span"),C(2,"\u270F\uFE0F Edit Order"),w()()}}function vie(n,e){if(n&1){let t=Rt();b(0,"button",62),xe("click",function(){_e(t);let i=oe(2);return we(i.cancelOrderWithReason())}),b(1,"span"),C(2,"\u{1F6D1} Cancel Order"),w()()}}function yie(n,e){if(n&1){let t=Rt();b(0,"div",22)(1,"div",23)(2,"button",24),xe("click",function(){_e(t);let i=oe();return we(i.backToFloorMap())}),C(3,"\u2190 Back"),w(),b(4,"div",25)(5,"h2"),C(6),w(),b(7,"span",26),C(8),w()()(),b(9,"div",27)(10,"h3"),C(11,"Current Order (Sent to Kitchen)"),w(),He(12,die,2,1,"div",28)(13,hie,2,0,"ng-template",null,0,hE),w(),He(15,gie,16,3,"div",29),b(16,"div",30)(17,"span"),C(18,"Running Total:"),w(),b(19,"span",31),C(20),w()(),b(21,"div",32)(22,"button",33),xe("click",function(){_e(t);let i=oe();return we(i.goToAddItems())}),b(23,"span"),C(24,"+ Add Items"),w()(),b(25,"button",34),xe("click",function(){_e(t);let i=oe();return we(i.requestBill())}),b(26,"span"),C(27,"\u{1F4B5} Request Bill"),w()(),He(28,mie,3,0,"button",35)(29,vie,3,0,"button",36),w()()}if(n&2){let t=dE(14),r=oe();O(6),Ge("Table ",r.selectedTable==null?null:r.selectedTable.number),O(2),Ge("",(r.selectedTable==null?null:r.selectedTable.guestCount)||2," Guests"),O(4),he("ngIf",r.selectedTable==null||r.selectedTable.activeOrder==null||r.selectedTable.activeOrder.items==null?null:r.selectedTable.activeOrder.items.length)("ngIfElse",t),O(3),he("ngIf",r.editMode),O(5),Ge("",(r.selectedTable==null||r.selectedTable.activeOrder==null||r.selectedTable.activeOrder.totalAmount==null?null:r.selectedTable.activeOrder.totalAmount.toFixed(0))||0," PKR"),O(8),he("ngIf",r.canEditOrder()&&!r.editMode),O(),he("ngIf",r.canEditOrder())}}function _ie(n,e){if(n&1){let t=Rt();b(0,"button",10),xe("click",function(){let i=_e(t).$implicit,o=oe(2);return we(o.selectedCategory=i)}),C(1),w()}if(n&2){let t=e.$implicit,r=oe(2);on("active",r.selectedCategory===t),O(),Ge(" ",t," ")}}function wie(n,e){if(n&1&&(b(0,"span",76),C(1),w()),n&2){let t=oe().$implicit;O(),Ge("/ ",t.unit||"kg")}}function bie(n,e){if(n&1){let t=Rt();b(0,"div",73),xe("click",function(){let i=_e(t).$implicit,o=oe(2);return we(o.openItemModifier(i))}),b(1,"div",41),C(2),w(),b(3,"div",74),C(4),w(),b(5,"div",44),C(6),He(7,wie,2,1,"span",75),w()()}if(n&2){let t=e.$implicit,r=oe(2);on("selected",r.isItemSelected(t)),O(2),Ue(t.name),O(2),Ue(t.category),O(2),Ge(" ",t.price.toFixed(0)," PKR "),O(),he("ngIf",t.soldByWeight)}}function Iie(n,e){if(n&1&&(b(0,"div",85),C(1),w()),n&2){let t=e.$implicit;O(),No(" ",t.quantity,"x ",t.menuItemName," ")}}function Eie(n,e){if(n&1){let t=Rt();b(0,"div",77),xe("click",function(){let i=_e(t).$implicit,o=oe(2);return we(o.addDealToCart(i))}),b(1,"div",78),C(2,"\u2B50 DEAL"),w(),b(3,"div",41),C(4),w(),b(5,"div",79),He(6,Iie,2,2,"div",80),w(),b(7,"div",81)(8,"span",82),C(9),w(),b(10,"span",83),C(11),w()(),b(12,"div",84),C(13),w()()}if(n&2){let t=e.$implicit;O(4),Ue(t.name),O(2),he("ngForOf",t.items),O(3),Ge("",t.originalPrice.toFixed(0)," PKR"),O(2),Ge("",t.dealPrice.toFixed(0)," PKR"),O(2),Ge("Save ",t.savingsPercent.toFixed(0),"%")}}function Cie(n,e){if(n&1){let t=Rt();b(0,"div",86),xe("click",function(){_e(t);let i=oe(2);return we(i.viewCart())}),b(1,"span"),C(2),w(),b(3,"span"),C(4),w()()}if(n&2){let t=oe(2);O(2),Ge("",t.draftCart.length," Items selected"),O(2),Ge("",t.getDraftSubtotal().toFixed(0)," PKR \u2192")}}function xie(n,e){if(n&1){let t=Rt();b(0,"div",63)(1,"div",64)(2,"button",24),xe("click",function(){_e(t);let i=oe();return we(i.backToFloorMap())}),C(3,"\u2190 Back"),w(),b(4,"div",25)(5,"h2"),C(6),w()()(),b(7,"div",65)(8,"input",66),ht("ngModelChange",function(i){_e(t);let o=oe();return pt(o.searchText,i)||(o.searchText=i),we(i)}),w()(),b(9,"div",67),He(10,_ie,2,3,"button",68),w(),b(11,"div",69),He(12,bie,8,6,"div",70)(13,Eie,14,5,"div",71),w(),He(14,Cie,5,2,"div",72),w()}if(n&2){let t=oe();O(6),Ge("Table ",t.selectedTable==null?null:t.selectedTable.number),O(2),dt("ngModel",t.searchText),O(2),he("ngForOf",t.categories),O(2),he("ngForOf",t.filteredMenu),O(),he("ngForOf",t.filteredDeals),O(),he("ngIf",t.draftCart.length>0)}}function Sie(n,e){if(n&1&&(b(0,"div",89)(1,"span"),C(2,"Current Order:"),w(),b(3,"span"),C(4),w()()),n&2){let t=oe(2);O(4),Ge("",t.selectedTable==null||t.selectedTable.activeOrder==null||t.selectedTable.activeOrder.totalAmount==null?null:t.selectedTable.activeOrder.totalAmount.toFixed(0)," PKR")}}function Die(n,e){n&1&&(b(0,"span",98),C(1,"\u2B50 DEAL"),w())}function Tie(n,e){if(n&1&&(b(0,"div",47),C(1),w()),n&2){let t=oe().$implicit;O(),Ge("\u{1F4DD} ",t.notes)}}function Aie(n,e){if(n&1&&(b(0,"div",101),C(1),w()),n&2){let t=e.$implicit;O(),No(" \u2022 ",t.quantity,"x ",t.menuItemName," ")}}function Mie(n,e){if(n&1&&(b(0,"div",99),He(1,Aie,2,2,"div",100),w()),n&2){let t=oe().$implicit;O(),he("ngForOf",t.dealItems)}}function Pie(n,e){if(n&1){let t=Rt();b(0,"div",58)(1,"input",59),ht("ngModelChange",function(i){_e(t);let o=oe().$implicit;return pt(o.quantity,i)||(o.quantity=i),we(i)}),xe("ngModelChange",function(){_e(t);let i=oe().$implicit,o=oe(2);return we(o.updateDraftQuantity(i,i.quantity))}),w()()}if(n&2){let t=oe().$implicit;O(),dt("ngModel",t.quantity)}}function Nie(n,e){if(n&1&&(b(0,"div",58)(1,"span",102),C(2),w()()),n&2){let t=oe().$implicit;O(2),Ue(t.quantity)}}function kie(n,e){if(n&1){let t=Rt();b(0,"div",57)(1,"div",40)(2,"div",41),C(3),He(4,Die,2,0,"span",95),w(),He(5,Tie,2,1,"div",42)(6,Mie,2,1,"div",96),w(),He(7,Pie,2,1,"div",97)(8,Nie,3,1,"div",97),b(9,"div",44),C(10),w(),b(11,"button",60),xe("click",function(){let i=_e(t).$implicit,o=oe(2);return we(o.removeDraftItem(i))}),C(12,"\u2715"),w()()}if(n&2){let t=e.$implicit;O(3),Ge(" ",t.menuItemName," "),O(),he("ngIf",t.isDeal),O(),he("ngIf",t.notes),O(),he("ngIf",t.isDeal&&t.dealItems),O(),he("ngIf",!t.isDeal),O(),he("ngIf",t.isDeal),O(2),Ge("",t.totalPrice.toFixed(0)," PKR")}}function Rie(n,e){if(n&1&&(b(0,"div",53)(1,"span"),C(2,"Current Order:"),w(),b(3,"span"),C(4),w()()),n&2){let t=oe(2);O(4),Ge("",t.selectedTable==null||t.selectedTable.activeOrder==null||t.selectedTable.activeOrder.totalAmount==null?null:t.selectedTable.activeOrder.totalAmount.toFixed(0)," PKR")}}function Oie(n,e){if(n&1){let t=Rt();b(0,"div",87)(1,"div",23)(2,"button",24),xe("click",function(){_e(t);let i=oe();return we(i.backToMenu())}),C(3,"\u2190 Back"),w(),b(4,"h2"),C(5,"Review Order"),w()(),b(6,"div",88)(7,"div",89)(8,"span"),C(9,"Table:"),w(),b(10,"span"),C(11),w()(),He(12,Sie,5,1,"div",90),w(),b(13,"div",91)(14,"h3"),C(15,"New Items (To be sent to kitchen)"),w(),b(16,"div",50),He(17,kie,13,7,"div",51),w()(),b(18,"div",52),He(19,Rie,5,1,"div",92),b(20,"div",53)(21,"span"),C(22,"New Items:"),w(),b(23,"span"),C(24),w()(),b(25,"div",93)(26,"span"),C(27,"Grand Total:"),w(),b(28,"span"),C(29),w()()(),b(30,"div",94)(31,"button",56),xe("click",function(){_e(t);let i=oe();return we(i.confirmAndSendToKitchen())}),C(32),w()()()}if(n&2){let t=oe();O(11),Ue(t.selectedTable==null?null:t.selectedTable.number),O(),he("ngIf",t.selectedTable==null?null:t.selectedTable.activeOrder),O(5),he("ngForOf",t.draftCart),O(2),he("ngIf",t.selectedTable==null?null:t.selectedTable.activeOrder),O(5),Ge("",t.getDraftSubtotal().toFixed(0)," PKR"),O(5),Ge("",t.getTotalOrderAmount().toFixed(0)," PKR"),O(2),he("disabled",t.isLoading),O(),Ge(" ",t.isLoading?"Sending...":"\u{1F373} Confirm & Send to Kitchen"," ")}}function Lie(n,e){if(n&1&&(b(0,"span"),C(1),w()),n&2){let t=oe(2);O(),Ge("/ ",(t.selectedMenuItem==null?null:t.selectedMenuItem.unit)||"kg")}}function Fie(n,e){if(n&1){let t=Rt();b(0,"div",103),xe("click",function(){_e(t);let i=oe();return we(i.closeItemModifier())}),b(1,"div",104),xe("click",function(i){return _e(t),we(i.stopPropagation())}),b(2,"div",105)(3,"h3"),C(4),w(),b(5,"button",106),xe("click",function(){_e(t);let i=oe();return we(i.closeItemModifier())}),C(6,"\u2715"),w()(),b(7,"div",107)(8,"div",108),C(9),He(10,Lie,2,1,"span",109),w(),b(11,"div",110)(12,"label"),C(13,"Quantity:"),w(),b(14,"div",111)(15,"button",10),xe("click",function(){_e(t);let i=oe();return i.modifierQuantity=i.Math.max(.1,i.modifierQuantity-(i.selectedMenuItem!=null&&i.selectedMenuItem.soldByWeight?.1:1)),we(i.formatQuantity(i.modifierQuantity))}),C(16,"\u2212"),w(),b(17,"input",112),ht("ngModelChange",function(i){_e(t);let o=oe();return pt(o.modifierQuantity,i)||(o.modifierQuantity=i),we(i)}),xe("ngModelChange",function(i){_e(t);let o=oe();return we(o.formatQuantity(i))}),w(),b(18,"button",10),xe("click",function(){_e(t);let i=oe();return i.modifierQuantity=i.modifierQuantity+(i.selectedMenuItem!=null&&i.selectedMenuItem.soldByWeight?.1:1),we(i.formatQuantity(i.modifierQuantity))}),C(19,"+"),w()()(),b(20,"div",113)(21,"label"),C(22,"Special Instructions (Optional):"),w(),b(23,"textarea",114),ht("ngModelChange",function(i){_e(t);let o=oe();return pt(o.modifierNotes,i)||(o.modifierNotes=i),we(i)}),w()(),b(24,"div",115)(25,"span"),C(26,"Total:"),w(),b(27,"span"),C(28),w()()(),b(29,"div",116)(30,"button",55),xe("click",function(){_e(t);let i=oe();return we(i.closeItemModifier())}),C(31,"Cancel"),w(),b(32,"button",117),xe("click",function(){_e(t);let i=oe();return we(i.addItemToCart())}),C(33,"Add to Cart"),w()()()()}if(n&2){let t=oe();O(4),Ue(t.selectedMenuItem==null?null:t.selectedMenuItem.name),O(5),Ge(" ",t.selectedMenuItem==null||t.selectedMenuItem.price==null?null:t.selectedMenuItem.price.toFixed(0)," PKR "),O(),he("ngIf",t.selectedMenuItem==null?null:t.selectedMenuItem.soldByWeight),O(7),dt("ngModel",t.modifierQuantity),he("step",t.selectedMenuItem!=null&&t.selectedMenuItem.soldByWeight?.1:1),O(6),dt("ngModel",t.modifierNotes),O(5),Ge("",(t.modifierQuantity*((t.selectedMenuItem==null?null:t.selectedMenuItem.price)||0)).toFixed(0)," PKR")}}function Vie(n,e){n&1&&(b(0,"div",118),Po(1,"div",119),b(2,"div"),C(3,"Processing..."),w()())}var hb=class n{constructor(e,t){this.db=e;this.authService=t}isLoading=!1;currentScreen="floorMap";tables=[];selectedFilter="all";selectedTable=null;guestCount=2;menuItems=[];deals=[];searchText="";selectedCategory="All";categories=["All","Deals","BBQ","Curries","Rice","Bread","Salads","Drinks","Desserts"];draftCart=[];editMode=!1;editableItems=[];showItemModifier=!1;selectedMenuItem=null;modifierQuantity=1;modifierNotes="";Math=Math;ngOnInit(){return B(this,null,function*(){yield this.loadMenuItems(),yield this.loadDeals(),yield this.loadAllTables(),setInterval(()=>this.loadAllTables(),3e4)})}loadAllTables(){return B(this,null,function*(){try{let e=Array.from({length:20},(r,i)=>String(i+1)),t=yield this.db.getOrders();this.tables=e.map(r=>{let i=t.find(s=>s.tableNumber===r&&["pending","cooking","ready"].includes(s.status)),o="free";return i&&(o=i.status==="ready"?"billRequested":"occupied"),{number:r,status:o,activeOrder:i||null,seatedTime:i?.createdAt||null,guestCount:0}})}catch(e){console.error("Failed to load tables:",e)}})}get filteredTables(){return this.selectedFilter==="all"?this.tables:this.tables.filter(e=>e.status===this.selectedFilter)}setFilter(e){this.selectedFilter=e}getTimeSinceSeated(e){if(!e.seatedTime)return"";let t=new Date,r;e.seatedTime instanceof Date?r=e.seatedTime:typeof e.seatedTime=="object"&&"toDate"in e.seatedTime?r=e.seatedTime.toDate():r=new Date(e.seatedTime);let i=t.getTime()-r.getTime(),o=Math.floor(i/6e4);if(o<60)return`${o}m ago`;let s=Math.floor(o/60),a=o%60;return`${s}h ${a}m ago`}selectTable(e){this.selectedTable=e,this.draftCart=[],this.editMode=!1,this.editableItems=[],e.status==="free"?(this.guestCount=2,this.currentScreen="menuSelection"):this.currentScreen="tableDetail"}backToFloorMap(){this.currentScreen="floorMap",this.selectedTable=null,this.draftCart=[],this.editMode=!1,this.editableItems=[],this.loadAllTables()}loadMenuItems(){return B(this,null,function*(){this.isLoading=!0;try{this.menuItems=yield this.db.getActiveMenuItems()}catch(e){console.error("Failed to load menu items",e)}finally{this.isLoading=!1}})}loadDeals(){return B(this,null,function*(){try{this.deals=yield this.db.getActiveDeals()}catch(e){console.error("Failed to load deals",e)}})}get filteredMenu(){if(this.selectedCategory==="Deals")return[];let e=this.searchText.toLowerCase(),t=this.menuItems;return this.selectedCategory!=="All"&&(t=t.filter(r=>r.category===this.selectedCategory)),e&&(t=t.filter(r=>r.name.toLowerCase().includes(e))),t}get filteredDeals(){if(this.selectedCategory!=="Deals")return[];let e=this.searchText.toLowerCase();return e?this.deals.filter(t=>t.name.toLowerCase().includes(e)):this.deals}isItemSelected(e){return e.id?this.draftCart.some(t=>t.menuItemId===e.id):!1}getSelectedQuantityForItem(e){return e.id?this.draftCart.filter(t=>t.menuItemId===e.id).reduce((t,r)=>t+r.quantity,0):0}openItemModifier(e){this.selectedMenuItem=e;let t=this.getSelectedQuantityForItem(e);this.modifierQuantity=t>0?t:e.soldByWeight?.5:1,this.modifierNotes="",this.showItemModifier=!0}formatQuantity(e){this.modifierQuantity=Math.round(e*100)/100}addDealToCart(e){if(!e.id)return;let t={menuItemId:e.id,menuItemName:e.name,quantity:1,price:e.dealPrice,totalPrice:e.dealPrice,isDeal:!0,dealId:e.id,dealItems:e.items};this.draftCart.push(t),alert(`\u2705 ${e.name} added to cart`)}closeItemModifier(){this.showItemModifier=!1,this.selectedMenuItem=null,this.modifierNotes=""}addItemToCart(){if(!this.selectedMenuItem)return;let e=this.selectedMenuItem,t={menuItemId:e.id,menuItemName:e.name,quantity:this.modifierQuantity,price:e.price,totalPrice:this.modifierQuantity*e.price};this.modifierNotes&&this.modifierNotes.trim()!==""&&(t.notes=this.modifierNotes.trim());let r=this.draftCart.find(i=>i.menuItemId===e.id&&i.notes===t.notes);r?(r.quantity=this.modifierQuantity,r.totalPrice=r.quantity*r.price):this.draftCart.push(t),this.closeItemModifier()}goToAddItems(){this.currentScreen="menuSelection"}viewCart(){this.draftCart.length>0&&(this.currentScreen="cartReview")}removeDraftItem(e){this.draftCart=this.draftCart.filter(t=>t!==e)}updateDraftQuantity(e,t){e.quantity=Math.max(.1,t),e.totalPrice=e.quantity*e.price}getDraftSubtotal(){return this.draftCart.reduce((e,t)=>e+t.totalPrice,0)}getTotalOrderAmount(){return(this.selectedTable?.activeOrder?.totalAmount||0)+this.getDraftSubtotal()}backToMenu(){this.currentScreen="menuSelection"}startTakeaway(){this.selectedTable={number:"TAKEAWAY",status:"free",activeOrder:null,seatedTime:null,guestCount:0},this.draftCart=[],this.currentScreen="menuSelection"}confirmAndSendToKitchen(){return B(this,null,function*(){if(!(!this.selectedTable||this.draftCart.length===0)){this.isLoading=!0;try{if(this.selectedTable.activeOrder?.id){let t=[...this.selectedTable.activeOrder.items||[],...this.draftCart],r=t.reduce((i,o)=>i+o.totalPrice,0);yield this.db.updateOrder(this.selectedTable.activeOrder.id,{items:t,subtotal:r,totalAmount:r}),alert("\u2705 Add-on items sent to kitchen!")}else{let e=this.selectedTable.number==="TAKEAWAY",t={orderNumber:`ORD-${Date.now()}`,tableNumber:e?void 0:this.selectedTable.number,isTakeaway:e,items:[...this.draftCart],subtotal:this.getDraftSubtotal(),tax:0,discount:0,totalAmount:this.getDraftSubtotal(),status:e?"ready":"pending",createdAt:new Date,cashierId:this.authService.currentUser?.id||"",cashierName:this.authService.currentUser?.name||"Waiter"};yield this.db.createOrder(t),alert("\u2705 Order sent to kitchen!")}this.draftCart=[],yield this.loadAllTables(),this.backToFloorMap()}catch(e){console.error("Failed to send order:",e),alert("\u274C Failed to send order to kitchen")}finally{this.isLoading=!1}}})}requestBill(){return B(this,null,function*(){if(this.selectedTable?.activeOrder?.id&&confirm("Mark this table as ready for bill?"))try{yield this.db.updateOrder(this.selectedTable.activeOrder.id,{status:"ready"}),alert("\u2705 Bill request sent to cashier"),this.backToFloorMap()}catch(e){console.error("Failed to request bill:",e),alert("\u274C Failed to request bill")}})}canEditOrder(){return!!(this.selectedTable?.activeOrder&&this.selectedTable.activeOrder.status==="pending")}startEditOrder(){if(!this.canEditOrder())return;let e=this.selectedTable.activeOrder.items||[];this.editableItems=e.map(t=>Pe({},t)),this.editMode=!0}cancelEditOrder(){this.editMode=!1,this.editableItems=[]}updateEditableQuantity(e,t){e.quantity=Math.max(.1,t),e.totalPrice=e.quantity*e.price}removeEditableItem(e){this.editableItems=this.editableItems.filter(t=>t!==e)}getEditableSubtotal(){return this.editableItems.reduce((e,t)=>e+t.totalPrice,0)}saveOrderEdits(){return B(this,null,function*(){if(this.selectedTable?.activeOrder?.id){this.isLoading=!0;try{let e=this.getEditableSubtotal();yield this.db.updateOrder(this.selectedTable.activeOrder.id,{items:this.editableItems,subtotal:e,totalAmount:e}),yield this.db.logActivity({userId:this.authService.currentUser?.id||"",userName:this.authService.currentUser?.name||"Waiter",action:"Edited Order",details:`Table ${this.selectedTable.number} | Items: ${this.editableItems.length} | Total: ${e.toFixed(0)} PKR`,timestamp:new Date}),alert("\u2705 Order updated successfully"),this.editMode=!1,this.editableItems=[],yield this.loadAllTables();let t=this.tables.find(r=>r.number===this.selectedTable.number);t&&(this.selectedTable=t)}catch(e){console.error("Failed to update order:",e),alert("\u274C Failed to update order")}finally{this.isLoading=!1}}})}cancelOrderWithReason(){return B(this,null,function*(){if(!this.selectedTable?.activeOrder?.id)return;if(this.selectedTable.activeOrder.status!=="pending"){alert("Only pending orders can be cancelled by the waiter.");return}let t=window.prompt("Reason for cancellation (optional):","Customer changed mind");if(confirm("Cancel this order and free the table?")){this.isLoading=!0;try{yield this.db.updateOrder(this.selectedTable.activeOrder.id,{status:"cancelled"}),yield this.db.logActivity({userId:this.authService.currentUser?.id||"",userName:this.authService.currentUser?.name||"Waiter",action:"Cancelled Order",details:`Table ${this.selectedTable.number} | Reason: ${t||"N/A"}`,timestamp:new Date}),alert("\u2705 Order cancelled and table cleared"),this.backToFloorMap()}catch(r){console.error("Failed to cancel order:",r),alert("\u274C Failed to cancel order")}finally{this.isLoading=!1}}})}formatDate(e){return e?(e.toDate?e.toDate():new Date(e)).toLocaleString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}):""}getStatusColor(e){switch(e){case"pending":return"#ff9800";case"cooking":return"#2196f3";case"ready":return"#4caf50";case"completed":return"#9e9e9e";case"cancelled":return"#f44336";default:return"#9e9e9e"}}getStatusText(e){switch(e){case"pending":return"Pending";case"cooking":return"Cooking";case"ready":return"Ready";case"completed":return"Completed";case"cancelled":return"Cancelled";default:return e}}static \u0275fac=function(t){return new(t||n)(Xe(Mr),Xe(jr))};static \u0275cmp=sr({type:n,selectors:[["app-waiter"]],decls:7,vars:6,consts:[["noItems",""],[1,"waiter-app"],["class","floor-map-screen",4,"ngIf"],["class","table-detail-screen",4,"ngIf"],["class","menu-selection-screen",4,"ngIf"],["class","cart-review-screen",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],["class","loading-overlay",4,"ngIf"],[1,"floor-map-screen"],[1,"filter-tabs"],[3,"click"],[1,"table-grid"],["class","table-card",3,"free","occupied","bill-requested","click",4,"ngFor","ngForOf"],[1,"fab-button",3,"click"],[1,"table-card",3,"click"],[1,"table-number"],["class","table-status",4,"ngIf"],[1,"table-status"],[1,"timer"],["class","amount",4,"ngIf"],[1,"amount"],[1,"bill-icon"],[1,"table-detail-screen"],[1,"header"],[1,"back-btn",3,"click"],[1,"table-info"],[1,"guest-count"],[1,"sent-items-section"],["class","sent-items",4,"ngIf","ngIfElse"],["class","edit-order-section",4,"ngIf"],[1,"running-total"],[1,"total-amount"],[1,"table-actions"],[1,"btn-primary",3,"click"],[1,"btn-success",3,"click"],["class","btn-secondary",3,"click",4,"ngIf"],["class","btn-danger",3,"click",4,"ngIf"],[1,"sent-items"],["class","order-item sent",4,"ngFor","ngForOf"],[1,"order-item","sent"],[1,"item-info"],[1,"item-name"],["class","item-notes",4,"ngIf"],[1,"item-qty"],[1,"item-price"],[1,"item-status"],[1,"status-badge"],[1,"item-notes"],[1,"empty-state"],[1,"edit-order-section"],[1,"draft-items"],["class","order-item draft",4,"ngFor","ngForOf"],[1,"totals-section"],[1,"total-row"],[1,"edit-actions"],[1,"btn-cancel",3,"click"],[1,"btn-confirm",3,"click","disabled"],[1,"order-item","draft"],[1,"item-controls"],["type","number","step","0.1","min","0.1",1,"qty-input",3,"ngModelChange","ngModel"],[1,"btn-remove",3,"click"],[1,"btn-secondary",3,"click"],[1,"btn-danger",3,"click"],[1,"menu-selection-screen"],[1,"header","sticky"],[1,"search-bar"],["type","text","placeholder","\u{1F50D} Search menu items...",3,"ngModelChange","ngModel"],[1,"category-slider"],[3,"active","click",4,"ngFor","ngForOf"],[1,"item-grid"],["class","menu-item-card",3,"selected","click",4,"ngFor","ngForOf"],["class","menu-item-card deal-card",3,"click",4,"ngFor","ngForOf"],["class","view-cart-bar",3,"click",4,"ngIf"],[1,"menu-item-card",3,"click"],[1,"item-category"],["class","item-unit",4,"ngIf"],[1,"item-unit"],[1,"menu-item-card","deal-card",3,"click"],[1,"deal-badge"],[1,"deal-items-preview"],["class","deal-item-mini",4,"ngFor","ngForOf"],[1,"deal-pricing"],[1,"original-price"],[1,"deal-price"],[1,"savings-label"],[1,"deal-item-mini"],[1,"view-cart-bar",3,"click"],[1,"cart-review-screen"],[1,"order-info-card"],[1,"info-row"],["class","info-row",4,"ngIf"],[1,"new-items-section"],["class","total-row",4,"ngIf"],[1,"total-row","grand-total"],[1,"confirm-section"],["class","deal-badge-small",4,"ngIf"],["class","deal-contents",4,"ngIf"],["class","item-controls",4,"ngIf"],[1,"deal-badge-small"],[1,"deal-contents"],["class","deal-item-line",4,"ngFor","ngForOf"],[1,"deal-item-line"],[1,"qty-display"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"item-price-display"],[4,"ngIf"],[1,"quantity-section"],[1,"quantity-stepper"],["type","number","min","0.1",3,"ngModelChange","ngModel","step"],[1,"notes-section"],["placeholder","e.g., Extra spicy, No onions...","rows","3",3,"ngModelChange","ngModel"],[1,"modal-total"],[1,"modal-footer"],[1,"btn-add",3,"click"],[1,"loading-overlay"],[1,"spinner"]],template:function(t,r){t&1&&(b(0,"div",1),He(1,cie,15,9,"div",2)(2,yie,30,8,"div",3)(3,xie,15,6,"div",4)(4,Oie,33,8,"div",5)(5,Fie,34,7,"div",6)(6,Vie,4,0,"div",7),w()),t&2&&(O(),he("ngIf",r.currentScreen==="floorMap"),O(),he("ngIf",r.currentScreen==="tableDetail"),O(),he("ngIf",r.currentScreen==="menuSelection"),O(),he("ngIf",r.currentScreen==="cartReview"),O(),he("ngIf",r.showItemModifier),O(),he("ngIf",r.isLoading))},dependencies:[lr,Qr,Ir,Wi,$i,wa,Lo,ba,po],styles:[".waiter-app[_ngcontent-%COMP%]{min-height:100vh;background:#f5f5f5;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,sans-serif}.header[_ngcontent-%COMP%]{background:#fff;padding:16px;box-shadow:0 2px 8px #0000001a;display:flex;align-items:center;gap:16px;position:sticky;top:var(--app-header-height, 56px);z-index:500}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;margin:0;flex:1}.header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;margin:0;flex:1}.back-btn[_ngcontent-%COMP%]{background:#f0f0f0;border:none;border-radius:8px;padding:10px 16px;font-size:16px;font-weight:600;cursor:pointer}.waiter-info[_ngcontent-%COMP%]{font-size:14px;color:#666;font-weight:500}.table-info[_ngcontent-%COMP%]{flex:1}.guest-count[_ngcontent-%COMP%]{font-size:14px;color:#666}.filter-tabs[_ngcontent-%COMP%]{display:flex;gap:8px;padding:16px;overflow-x:auto;background:#fff}.filter-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;border:2px solid #e0e0e0;border-radius:20px;background:#fff;color:#666;font-size:15px;font-weight:600;white-space:nowrap;cursor:pointer;transition:all .2s}.filter-tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#2196f3;color:#fff;border-color:#2196f3}.table-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:16px;padding:16px}.table-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;cursor:pointer;transition:all .2s;box-shadow:0 2px 8px #0000001a;min-height:120px;display:flex;flex-direction:column;justify-content:space-between}.table-card[_ngcontent-%COMP%]:active{transform:scale(.97)}.table-card.free[_ngcontent-%COMP%]{border:3px solid #4caf50;background:#f1f8f4}.table-card.occupied[_ngcontent-%COMP%]{border:3px solid #f44336;background:#fff5f5}.table-card.bill-requested[_ngcontent-%COMP%]{border:3px solid #ff9800;background:#fff8f0;animation:_ngcontent-%COMP%_bill-blink 1.2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_bill-blink{0%{background-color:#fff8f0}50%{background-color:#ffe9c4}to{background-color:#fff8f0}}.table-number[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#333}.table-status[_ngcontent-%COMP%]{margin-top:12px}.timer[_ngcontent-%COMP%]{font-size:14px;color:#666;margin-bottom:4px}.amount[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#2196f3}.bill-icon[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#ff9800}.fab-button[_ngcontent-%COMP%]{position:fixed;bottom:24px;right:24px;background:#2196f3;color:#fff;border:none;border-radius:56px;padding:18px 28px;font-size:16px;font-weight:600;box-shadow:0 4px 12px #2196f366;cursor:pointer;z-index:50}.sent-items-section[_ngcontent-%COMP%]{background:#fff;margin:16px;border-radius:12px;padding:16px}.sent-items-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;margin:0 0 16px;color:#333}.order-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:16px;border-radius:8px;margin-bottom:12px}.order-item.sent[_ngcontent-%COMP%]{background:#f9f9f9;border:2px solid #e0e0e0}.order-item.draft[_ngcontent-%COMP%]{background:#fff;border:2px solid #2196f3}.item-info[_ngcontent-%COMP%]{flex:1}.item-name[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#333}.item-notes[_ngcontent-%COMP%]{font-size:13px;color:#666;margin-top:4px;font-style:italic}.item-qty[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#2196f3;min-width:50px;text-align:center}.item-price[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#4caf50;min-width:80px;text-align:right}.item-status[_ngcontent-%COMP%]{min-width:90px}.status-badge[_ngcontent-%COMP%]{padding:6px 12px;border-radius:12px;font-size:12px;font-weight:600;color:#fff}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#999;font-size:16px}.running-total[_ngcontent-%COMP%]{background:#fff3e0;margin:0 16px 16px;padding:16px;border-radius:12px;display:flex;justify-content:space-between;align-items:center;font-size:18px;font-weight:700}.total-amount[_ngcontent-%COMP%]{color:#ff9800}.table-actions[_ngcontent-%COMP%]{display:flex;gap:12px;padding:0 16px 24px}.table-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;padding:18px;border:none;border-radius:12px;font-size:16px;font-weight:600;cursor:pointer}.btn-primary[_ngcontent-%COMP%]{background:#2196f3;color:#fff}.btn-success[_ngcontent-%COMP%]{background:#4caf50;color:#fff}.btn-secondary[_ngcontent-%COMP%]{background:#f0f0f0;color:#333}.btn-danger[_ngcontent-%COMP%]{background:#f44336;color:#fff}.search-bar[_ngcontent-%COMP%]{padding:16px;background:#fff}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:14px;border:2px solid #e0e0e0;border-radius:12px;font-size:16px}.category-slider[_ngcontent-%COMP%]{display:flex;gap:8px;padding:16px;overflow-x:auto;background:#fff;border-bottom:1px solid #f0f0f0}.category-slider[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;border:2px solid #e0e0e0;border-radius:20px;background:#fff;color:#666;font-size:15px;font-weight:600;white-space:nowrap;cursor:pointer}.category-slider[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#2196f3;color:#fff;border-color:#2196f3}.item-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:12px;padding:16px 16px 100px}.menu-item-card[_ngcontent-%COMP%]{background:#fff;border:2px solid #e0e0e0;border-radius:12px;padding:16px;cursor:pointer;transition:all .2s;min-height:110px}.menu-item-card[_ngcontent-%COMP%]:active{transform:scale(.97);border-color:#2196f3}.menu-item-card.selected[_ngcontent-%COMP%]{background:#e8f5e9;border-color:#4caf50;box-shadow:inset 0 0 0 2px #4caf5033}.menu-item-card[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#333;margin-bottom:6px}.menu-item-card[_ngcontent-%COMP%]   .item-category[_ngcontent-%COMP%]{font-size:12px;color:#999;margin-bottom:8px}.menu-item-card[_ngcontent-%COMP%]   .item-price[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:#4caf50}.item-unit[_ngcontent-%COMP%]{font-size:12px;color:#999;font-weight:400}.menu-item-card.deal-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff3e0,#ffe0b2);border-color:#ff9800;position:relative}.deal-badge[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;background:#ff9800;color:#fff;padding:4px 10px;border-radius:12px;font-size:11px;font-weight:700}.deal-badge-small[_ngcontent-%COMP%]{background:#ff9800;color:#fff;padding:2px 8px;border-radius:8px;font-size:10px;font-weight:700;margin-left:6px}.deal-items-preview[_ngcontent-%COMP%]{margin:8px 0;font-size:11px;color:#666;max-height:50px;overflow:hidden}.deal-item-mini[_ngcontent-%COMP%]{padding:2px 0}.deal-pricing[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-top:8px}.original-price[_ngcontent-%COMP%]{font-size:14px;color:#999;text-decoration:line-through}.deal-price[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#ff9800}.savings-label[_ngcontent-%COMP%]{background:#4caf50;color:#fff;padding:3px 8px;border-radius:8px;font-size:11px;font-weight:700;margin-top:6px;display:inline-block}.deal-contents[_ngcontent-%COMP%]{margin-top:8px;padding:8px;background:#f9f9f9;border-radius:6px;font-size:12px;color:#666}.deal-item-line[_ngcontent-%COMP%]{padding:2px 0}.qty-display[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#666;padding:8px 16px}.view-cart-bar[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;right:0;background:#2196f3;color:#fff;padding:20px 24px;display:flex;justify-content:space-between;align-items:center;font-size:18px;font-weight:700;cursor:pointer;box-shadow:0 -4px 12px #0000001a;z-index:50}.order-info-card[_ngcontent-%COMP%]{background:#fff;margin:16px;padding:16px;border-radius:12px}.info-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:8px 0;font-size:16px}.info-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{color:#666}.info-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{font-weight:600;color:#333}.new-items-section[_ngcontent-%COMP%]{background:#fff;margin:16px;padding:16px;border-radius:12px}.new-items-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;margin:0 0 16px;color:#333}.edit-order-section[_ngcontent-%COMP%]{background:#fff;margin:16px;padding:16px;border-radius:12px;border:2px dashed #2196f3}.edit-order-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;margin:0 0 16px;color:#333}.item-controls[_ngcontent-%COMP%]{display:flex;align-items:center}.qty-input[_ngcontent-%COMP%]{width:70px;padding:8px;border:2px solid #e0e0e0;border-radius:8px;text-align:center;font-size:16px;font-weight:600}.btn-remove[_ngcontent-%COMP%]{background:#f44336;color:#fff;border:none;border-radius:50%;width:32px;height:32px;font-size:18px;cursor:pointer;display:flex;align-items:center;justify-content:center}.totals-section[_ngcontent-%COMP%]{background:#fff;margin:16px;padding:16px;border-radius:12px}.total-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:12px 0;font-size:16px;border-bottom:1px solid #f0f0f0}.total-row.grand-total[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#2196f3;border-bottom:none;border-top:2px solid #e0e0e0;margin-top:8px;padding-top:16px}.confirm-section[_ngcontent-%COMP%]{padding:16px}.btn-confirm[_ngcontent-%COMP%]{width:100%;padding:20px;background:#4caf50;color:#fff;border:none;border-radius:12px;font-size:18px;font-weight:700;cursor:pointer}.btn-confirm[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.edit-actions[_ngcontent-%COMP%]{display:flex;gap:12px;padding:16px}.edit-actions[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]{background:#f0f0f0;color:#666}.edit-actions[_ngcontent-%COMP%]   .btn-confirm[_ngcontent-%COMP%]{background:#2196f3;color:#fff}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000b3;display:flex;align-items:center;justify-content:center;z-index:1000;padding:16px}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:20px;width:100%;max-width:500px;max-height:90vh;overflow-y:auto}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:24px;border-bottom:2px solid #f0f0f0}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:22px;margin:0;color:#333}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:28px;color:#999;cursor:pointer;width:36px;height:36px;display:flex;align-items:center;justify-content:center}.modal-body[_ngcontent-%COMP%]{padding:24px}.item-price-display[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#4caf50;margin-bottom:24px}.quantity-section[_ngcontent-%COMP%], .notes-section[_ngcontent-%COMP%]{margin-bottom:24px}.quantity-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .notes-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:600;color:#666;margin-bottom:8px}.quantity-stepper[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.quantity-stepper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:48px;height:48px;min-width:48px;min-height:48px;border:2px solid #2196f3;background:#fff;color:#2196f3;font-size:24px;font-weight:700;border-radius:12px;cursor:pointer;flex-shrink:0;display:flex;align-items:center;justify-content:center}.quantity-stepper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;min-width:60px;max-width:120px;text-align:center;padding:12px;border:2px solid #e0e0e0;border-radius:12px;font-size:20px;font-weight:600}.notes-section[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:12px;border:2px solid #e0e0e0;border-radius:12px;font-size:15px;font-family:inherit;resize:vertical}.modal-total[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:20px;font-weight:700;padding:16px 0;border-top:2px solid #e0e0e0;color:#2196f3}.modal-footer[_ngcontent-%COMP%]{display:flex;gap:12px;padding:24px;border-top:2px solid #f0f0f0}.modal-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;padding:16px;border:none;border-radius:12px;font-size:16px;font-weight:600;cursor:pointer}.btn-cancel[_ngcontent-%COMP%]{background:#f0f0f0;color:#666}.btn-add[_ngcontent-%COMP%]{background:#2196f3;color:#fff}.loading-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000b3;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:300;color:#fff;font-size:18px}.spinner[_ngcontent-%COMP%]{width:48px;height:48px;border:4px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:16px}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}@media (min-width: 768px){.table-grid[_ngcontent-%COMP%], .item-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(180px,1fr))}}@media (min-width: 1024px){.waiter-app[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}}"]})};function jie(n,e){if(n&1&&(b(0,"div",16),C(1),w()),n&2){let t=oe().$implicit;O(),Ue(t.description)}}function Bie(n,e){if(n&1&&(b(0,"div",17),C(1),w()),n&2){let t=e.$implicit;O(),No(" ",t.quantity,"x ",t.menuItemName," ")}}function Uie(n,e){if(n&1){let t=Rt();b(0,"tr")(1,"td")(2,"strong"),C(3),w(),He(4,jie,2,1,"div",7),w(),b(5,"td")(6,"div",8),He(7,Bie,2,2,"div",9),w()(),b(8,"td"),C(9),w(),b(10,"td")(11,"strong",10),C(12),w()(),b(13,"td")(14,"span",11),C(15),w()(),b(16,"td")(17,"span",12),C(18),w()(),b(19,"td")(20,"button",13),xe("click",function(){let i=_e(t).$implicit,o=oe();return we(o.openEditModal(i))}),C(21,"Edit"),w(),b(22,"button",14),xe("click",function(){let i=_e(t).$implicit,o=oe();return we(o.toggleActive(i))}),C(23),w(),b(24,"button",15),xe("click",function(){let i=_e(t).$implicit,o=oe();return we(o.deleteDeal(i))}),C(25,"Delete"),w()()()}if(n&2){let t=e.$implicit;O(3),Ue(t.name),O(),he("ngIf",t.description),O(3),he("ngForOf",t.items),O(2),Ge("",t.originalPrice.toFixed(0)," PKR"),O(3),Ge("",t.dealPrice.toFixed(0)," PKR"),O(3),No(" Save ",t.savings.toFixed(0)," PKR (",t.savingsPercent.toFixed(0),"%) "),O(2),on("active",t.isActive)("inactive",!t.isActive),O(),Ge(" ",t.isActive?"Active":"Inactive"," "),O(5),Ge(" ",t.isActive?"Deactivate":"Activate"," ")}}function zie(n,e){n&1&&(b(0,"tr")(1,"td",18),C(2,"No deals found. Create your first deal!"),w()())}function qie(n,e){if(n&1&&(b(0,"option",33),C(1),w()),n&2){let t=e.$implicit;he("ngValue",t),O(),Ue(t)}}function Hie(n,e){if(n&1&&(b(0,"option",33),C(1),w()),n&2){let t=e.$implicit;he("ngValue",t.id),O(),No(" ",t.name," (",t.price.toFixed(0)," PKR) ")}}function $ie(n,e){if(n&1){let t=Rt();b(0,"tr")(1,"td"),C(2),w(),b(3,"td")(4,"input",49),ht("ngModelChange",function(i){let o=_e(t).$implicit;return pt(o.quantity,i)||(o.quantity=i),we(i)}),xe("ngModelChange",function(){let i=_e(t).$implicit,o=oe(3);return we(o.updateItemQuantity(i,i.quantity))}),w()(),b(5,"td"),C(6),w(),b(7,"td"),C(8),w(),b(9,"td")(10,"button",15),xe("click",function(){let i=_e(t).$implicit,o=oe(3);return we(o.removeItemFromDeal(i))}),C(11,"Remove"),w()()()}if(n&2){let t=e.$implicit;O(2),Ue(t.menuItemName),O(2),dt("ngModel",t.quantity),O(2),Ge("",t.standardPrice.toFixed(0)," PKR"),O(2),Ge("",(t.quantity*t.standardPrice).toFixed(0)," PKR")}}function Wie(n,e){if(n&1&&(b(0,"div",47)(1,"h4"),C(2,"Items in Deal:"),w(),b(3,"table",48)(4,"thead")(5,"tr")(6,"th"),C(7,"Item"),w(),b(8,"th"),C(9,"Quantity"),w(),b(10,"th"),C(11,"Unit Price"),w(),b(12,"th"),C(13,"Subtotal"),w(),b(14,"th"),C(15,"Action"),w()()(),b(16,"tbody"),He(17,$ie,12,4,"tr",4),w()()()),n&2){let t=oe(2);O(17),he("ngForOf",t.currentDeal.items)}}function Gie(n,e){if(n&1&&(b(0,"div",50)(1,"span",40),C(2,"Customer Saves:"),w(),b(3,"span",51),C(4),w()()),n&2){let t=oe(2);O(4),No(" ",t.currentDeal.savings.toFixed(0)," PKR (",t.currentDeal.savingsPercent.toFixed(1),"%) ")}}function Kie(n,e){if(n&1){let t=Rt();b(0,"div",19)(1,"div",20)(2,"div",21)(3,"h2"),C(4),w(),b(5,"button",22),xe("click",function(){_e(t);let i=oe();return we(i.showDealModal=!1)}),C(6,"\xD7"),w()(),b(7,"div",23)(8,"div",24)(9,"div",25)(10,"h3"),C(11,"Deal Information"),w(),b(12,"div",26)(13,"label"),C(14,"Deal Name *"),w(),b(15,"input",27),ht("ngModelChange",function(i){_e(t);let o=oe();return pt(o.currentDeal.name,i)||(o.currentDeal.name=i),we(i)}),w()(),b(16,"div",26)(17,"label"),C(18,"Description (Optional)"),w(),b(19,"textarea",28),ht("ngModelChange",function(i){_e(t);let o=oe();return pt(o.currentDeal.description,i)||(o.currentDeal.description=i),we(i)}),w()()(),b(20,"div",25)(21,"h3"),C(22,"Add Items to Deal"),w(),b(23,"div",29)(24,"div",26)(25,"label"),C(26,"Filter by Category"),w(),b(27,"select",30),ht("ngModelChange",function(i){_e(t);let o=oe();return pt(o.selectedItemCategory,i)||(o.selectedItemCategory=i),we(i)}),He(28,qie,2,2,"option",31),w()(),b(29,"div",32)(30,"div",26)(31,"label"),C(32,"Select Item"),w(),b(33,"select",30),ht("ngModelChange",function(i){_e(t);let o=oe();return pt(o.selectedMenuItemId,i)||(o.selectedMenuItemId=i),we(i)}),b(34,"option",33),C(35,"Choose an item"),w(),He(36,Hie,2,3,"option",31),w()(),b(37,"div",26)(38,"label"),C(39,"Quantity"),w(),b(40,"input",34),ht("ngModelChange",function(i){_e(t);let o=oe();return pt(o.itemQuantity,i)||(o.itemQuantity=i),we(i)}),w()(),b(41,"div",26)(42,"label"),C(43,"\xA0"),w(),b(44,"button",35),xe("click",function(){_e(t);let i=oe();return we(i.addItemToDeal())}),C(45,"+ Add Item"),w()()()(),He(46,Wie,18,1,"div",36),w(),b(47,"div",37)(48,"h3"),C(49,"Pricing"),w(),b(50,"div",38)(51,"div",39)(52,"span",40),C(53,"Total Original Price:"),w(),b(54,"span",41),C(55),w()(),b(56,"div",26)(57,"label"),C(58,"Set Deal Price * (Promotional Price)"),w(),b(59,"input",42),ht("ngModelChange",function(i){_e(t);let o=oe();return pt(o.currentDeal.dealPrice,i)||(o.currentDeal.dealPrice=i),we(i)}),xe("ngModelChange",function(){_e(t);let i=oe();return we(i.onDealPriceChange())}),w()(),He(60,Gie,5,2,"div",43),w(),b(61,"div",26)(62,"label",44)(63,"input",45),ht("ngModelChange",function(i){_e(t);let o=oe();return pt(o.currentDeal.isActive,i)||(o.currentDeal.isActive=i),we(i)}),w(),C(64," Active (visible to waiters and cashiers) "),w()()()()(),b(65,"div",46)(66,"button",35),xe("click",function(){_e(t);let i=oe();return we(i.showDealModal=!1)}),C(67,"Cancel"),w(),b(68,"button",2),xe("click",function(){_e(t);let i=oe();return we(i.saveDeal())}),C(69),w()()()()}if(n&2){let t=oe();O(4),Ue(t.isEditMode?"Edit Deal":"Create New Deal"),O(11),dt("ngModel",t.currentDeal.name),O(4),dt("ngModel",t.currentDeal.description),O(8),dt("ngModel",t.selectedItemCategory),O(),he("ngForOf",t.itemCategories),O(5),dt("ngModel",t.selectedMenuItemId),O(),he("ngValue",""),O(2),he("ngForOf",t.filteredMenuItems),O(4),dt("ngModel",t.itemQuantity),O(6),he("ngIf",t.currentDeal.items.length>0),O(9),Ge("",t.currentDeal.originalPrice.toFixed(0)," PKR"),O(4),dt("ngModel",t.currentDeal.dealPrice),O(),he("ngIf",t.currentDeal.dealPrice>0),O(3),dt("ngModel",t.currentDeal.isActive),O(6),Ge(" ",t.isEditMode?"Update Deal":"Create Deal"," ")}}var fb=class n{constructor(e,t){this.db=e;this.authService=t}deals=[];menuItems=[];showDealModal=!1;isEditMode=!1;currentDeal=this.getEmptyDeal();selectedMenuItemId="";itemQuantity=1;selectedItemCategory="All";itemCategories=["All","BBQ","Curries","Rice","Bread","Salads","Drinks","Desserts"];ngOnInit(){return B(this,null,function*(){yield this.loadDeals(),yield this.loadMenuItems()})}getEmptyDeal(){return{name:"",description:"",items:[],originalPrice:0,dealPrice:0,savings:0,savingsPercent:0,isActive:!0}}loadDeals(){return B(this,null,function*(){try{this.deals=yield this.db.getDeals()}catch(e){console.error("Error loading deals:",e)}})}loadMenuItems(){return B(this,null,function*(){try{this.menuItems=yield this.db.getActiveMenuItems()}catch(e){console.error("Error loading menu items:",e)}})}get filteredMenuItems(){return this.selectedItemCategory==="All"?this.menuItems:this.menuItems.filter(e=>e.category===this.selectedItemCategory)}openAddModal(){this.currentDeal=this.getEmptyDeal(),this.isEditMode=!1,this.showDealModal=!0}openEditModal(e){this.currentDeal=bt(Pe({},e),{items:[...e.items]}),this.isEditMode=!0,this.showDealModal=!0}addItemToDeal(){if(!this.selectedMenuItemId){alert("Please select a menu item");return}let e=this.menuItems.find(r=>r.id===this.selectedMenuItemId);if(!e)return;let t=this.currentDeal.items.find(r=>r.menuItemId===this.selectedMenuItemId);t?t.quantity+=this.itemQuantity:this.currentDeal.items.push({menuItemId:e.id,menuItemName:e.name,quantity:this.itemQuantity,standardPrice:e.price}),this.calculateDealPrices(),this.selectedMenuItemId="",this.itemQuantity=1}removeItemFromDeal(e){this.currentDeal.items=this.currentDeal.items.filter(t=>t!==e),this.calculateDealPrices()}updateItemQuantity(e,t){e.quantity=Math.max(1,t),this.calculateDealPrices()}calculateDealPrices(){this.currentDeal.originalPrice=this.currentDeal.items.reduce((e,t)=>e+t.standardPrice*t.quantity,0),this.currentDeal.dealPrice>0?(this.currentDeal.savings=this.currentDeal.originalPrice-this.currentDeal.dealPrice,this.currentDeal.savingsPercent=this.currentDeal.originalPrice>0?this.currentDeal.savings/this.currentDeal.originalPrice*100:0):(this.currentDeal.savings=0,this.currentDeal.savingsPercent=0)}onDealPriceChange(){this.calculateDealPrices()}saveDeal(){return B(this,null,function*(){if(!this.currentDeal.name||this.currentDeal.items.length===0){alert("Please enter deal name and add at least one item");return}if(this.currentDeal.dealPrice<=0){alert("Please set a valid deal price");return}try{if(this.isEditMode&&this.currentDeal.id){let e={name:this.currentDeal.name,description:this.currentDeal.description,items:this.currentDeal.items,originalPrice:this.currentDeal.originalPrice,dealPrice:this.currentDeal.dealPrice,savings:this.currentDeal.savings,savingsPercent:this.currentDeal.savingsPercent,isActive:this.currentDeal.isActive,choiceGroups:this.currentDeal.choiceGroups||[]};this.currentDeal.startDate&&(e.startDate=this.currentDeal.startDate),this.currentDeal.endDate&&(e.endDate=this.currentDeal.endDate),yield this.db.updateDeal(this.currentDeal.id,e),yield this.db.logActivity({userId:this.authService.currentUser?.id||"",userName:this.authService.currentUser?.name||"Admin",action:"Edited Deal",details:`${this.currentDeal.name} - ${this.currentDeal.dealPrice} PKR`,timestamp:new Date}),alert("Deal updated successfully")}else yield this.db.createDeal(this.currentDeal),yield this.db.logActivity({userId:this.authService.currentUser?.id||"",userName:this.authService.currentUser?.name||"Admin",action:"Created Deal",details:`${this.currentDeal.name} - ${this.currentDeal.dealPrice} PKR`,timestamp:new Date}),alert("Deal created successfully");yield this.loadDeals(),this.showDealModal=!1}catch(e){console.error("Error saving deal:",e),alert("Error saving deal: "+(e.message||"Unknown error"))}})}toggleActive(e){return B(this,null,function*(){if(e.id)try{yield this.db.updateDeal(e.id,{isActive:!e.isActive}),yield this.loadDeals()}catch(t){console.error("Error updating deal:",t)}})}deleteDeal(e){return B(this,null,function*(){if(e.id&&confirm(`Delete deal "${e.name}"?`))try{yield this.db.deleteDeal(e.id),alert("Deal deleted successfully"),yield this.loadDeals()}catch(t){console.error("Error deleting deal:",t),alert("Error deleting deal")}})}static \u0275fac=function(t){return new(t||n)(Xe(Mr),Xe(jr))};static \u0275cmp=sr({type:n,selectors:[["app-deal-management"]],decls:27,vars:3,consts:[[1,"container"],[1,"header"],[1,"btn","btn-primary",3,"click"],[1,"data-table"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","modal",4,"ngIf"],["class","deal-desc",4,"ngIf"],[1,"deal-items"],["class","deal-item-line",4,"ngFor","ngForOf"],[1,"deal-price"],[1,"savings-badge"],[1,"status-badge"],[1,"btn","btn-sm","btn-info",3,"click"],[1,"btn","btn-sm",3,"click"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"deal-desc"],[1,"deal-item-line"],["colspan","7",1,"no-data"],[1,"modal"],[1,"modal-content","modal-large"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"deal-form"],[1,"form-section"],[1,"form-group"],["type","text","placeholder","e.g., Family Feast",3,"ngModelChange","ngModel"],["placeholder","Brief description of the deal","rows","2",3,"ngModelChange","ngModel"],[1,"item-picker"],[3,"ngModelChange","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"form-row"],[3,"ngValue"],["type","number","min","1","step","1",3,"ngModelChange","ngModel"],[1,"btn","btn-secondary",3,"click"],["class","deal-items-list",4,"ngIf"],[1,"form-section","pricing-section"],[1,"pricing-display"],[1,"price-row"],[1,"price-label"],[1,"price-value","original"],["type","number","min","0","step","10","placeholder","Enter deal price",3,"ngModelChange","ngModel"],["class","price-row savings",4,"ngIf"],[1,"checkbox-label"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"deal-items-list"],[1,"items-table"],["type","number","min","1",1,"qty-input",3,"ngModelChange","ngModel"],[1,"price-row","savings"],[1,"price-value","savings-amt"]],template:function(t,r){t&1&&(b(0,"div",0)(1,"div",1)(2,"h1"),C(3,"Deals & Combos Management"),w(),b(4,"button",2),xe("click",function(){return r.openAddModal()}),C(5,"+ Create Deal"),w()(),b(6,"table",3)(7,"thead")(8,"tr")(9,"th"),C(10,"Deal Name"),w(),b(11,"th"),C(12,"Items"),w(),b(13,"th"),C(14,"Original Price"),w(),b(15,"th"),C(16,"Deal Price"),w(),b(17,"th"),C(18,"Savings"),w(),b(19,"th"),C(20,"Status"),w(),b(21,"th"),C(22,"Actions"),w()()(),b(23,"tbody"),He(24,Uie,26,13,"tr",4)(25,zie,3,0,"tr",5),w()(),He(26,Kie,70,15,"div",6),w()),t&2&&(O(24),he("ngForOf",r.deals),O(),he("ngIf",r.deals.length===0),O(),he("ngIf",r.showDealModal))},dependencies:[lr,Qr,Ir,Wi,uc,dc,$i,wa,oh,zs,Lo,ba,po],styles:[".container[_ngcontent-%COMP%]{padding:20px;max-width:1600px;margin:0 auto}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px;color:#333;margin:0}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background:#fff;border-radius:10px;box-shadow:0 2px 8px #0000001a;overflow:hidden}.data-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#f5f5f5}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:15px;text-align:left;font-weight:600;color:#333;border-bottom:2px solid #ddd}.data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:15px;border-bottom:1px solid #eee}.deal-desc[_ngcontent-%COMP%]{font-size:12px;color:#666;margin-top:4px}.deal-items[_ngcontent-%COMP%]{font-size:13px}.deal-item-line[_ngcontent-%COMP%]{padding:2px 0;color:#555}.deal-price[_ngcontent-%COMP%]{color:#4caf50;font-size:16px}.savings-badge[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32;padding:4px 10px;border-radius:12px;font-size:12px;font-weight:500;white-space:nowrap}.status-badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:12px;font-size:12px;font-weight:500}.status-badge.active[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.status-badge.inactive[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:5px;font-size:14px;font-weight:500;cursor:pointer;transition:all .3s}.btn-primary[_ngcontent-%COMP%]{background:#667eea;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:#5568d3}.btn-secondary[_ngcontent-%COMP%]{background:#e0e0e0;color:#333}.btn-secondary[_ngcontent-%COMP%]:hover{background:#d0d0d0}.btn-sm[_ngcontent-%COMP%]{padding:6px 12px;font-size:12px;margin-right:5px}.btn-info[_ngcontent-%COMP%]{background:#667eea;color:#fff}.btn-info[_ngcontent-%COMP%]:hover{background:#5568d3}.btn-danger[_ngcontent-%COMP%]{background:#f44336;color:#fff}.btn-danger[_ngcontent-%COMP%]:hover{background:#d32f2f}.no-data[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#999}.modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:10px;width:90%;max-width:600px;max-height:90vh;display:flex;flex-direction:column;box-shadow:0 4px 20px #0003}.modal-large[_ngcontent-%COMP%]{max-width:900px}.modal-header[_ngcontent-%COMP%]{padding:20px;border-bottom:1px solid #eee;display:flex;justify-content:space-between;align-items:center}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:22px;color:#333}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:28px;color:#999;cursor:pointer;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center}.close-btn[_ngcontent-%COMP%]:hover{color:#333}.modal-body[_ngcontent-%COMP%]{padding:20px;overflow-y:auto;flex:1}.modal-footer[_ngcontent-%COMP%]{padding:20px;border-top:1px solid #eee;display:flex;justify-content:flex-end;gap:10px}.deal-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:25px}.form-section[_ngcontent-%COMP%]{background:#f9f9f9;padding:20px;border-radius:8px}.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 15px;font-size:18px;color:#333}.form-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:15px 0 10px;font-size:15px;color:#555}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]:last-child{margin-bottom:0}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:13px;font-weight:500;color:#666;margin-bottom:5px}.form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ddd;border-radius:5px;font-size:14px;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr auto;gap:10px;align-items:end}.form-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:0}.form-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:last-child   button[_ngcontent-%COMP%]{margin-top:0;height:42px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;font-size:14px;color:#333}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto;cursor:pointer}.items-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background:#fff;border-radius:5px;overflow:hidden;margin-top:10px}.items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f5f5f5;padding:10px;text-align:left;font-size:12px;font-weight:600;color:#666}.items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;border-bottom:1px solid #eee;font-size:13px}.qty-input[_ngcontent-%COMP%]{width:70px;padding:5px;border:1px solid #ddd;border-radius:3px;text-align:center}.pricing-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e3f2fd,#f3e5f5)}.pricing-display[_ngcontent-%COMP%]{background:#fff;padding:15px;border-radius:5px;margin-bottom:15px}.price-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 0}.price-row.savings[_ngcontent-%COMP%]{border-top:2px solid #4caf50;margin-top:10px;padding-top:15px}.price-label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#555}.price-value[_ngcontent-%COMP%]{font-size:20px;font-weight:700}.price-value.original[_ngcontent-%COMP%]{color:#999;text-decoration:line-through}.price-value.savings-amt[_ngcontent-%COMP%]{color:#4caf50}.deal-items-list[_ngcontent-%COMP%]{margin-top:15px}"]})};var mV=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"login",component:ww},{path:"dashboard",component:bw,canActivate:[lc,ih]},{path:"menu",component:Iw,canActivate:[lc,ih]},{path:"deals",component:fb,canActivate:[lc,ih]},{path:"inventory",component:Ew,canActivate:[lc,ih]},{path:"pos",component:Cw,canActivate:[lc]},{path:"kitchen",component:xw,canActivate:[lc]},{path:"waiter",component:hb,canActivate:[lc]},{path:"users",component:Sw,canActivate:[lc,ih]},{path:"reports",component:db,canActivate:[lc,ih]},{path:"**",redirectTo:"/login"}];var vV={providers:[Z2(),gE({eventCoalescing:!0}),cC(mV),WR(()=>GR(GL.firebase)),e3(()=>r3()),qL(()=>HL())]};function Yie(n,e){n&1&&(Uy(0),b(1,"a",13),C(2,"Dashboard"),w(),b(3,"a",14),C(4,"Menu"),w(),b(5,"a",15),C(6,"Deals"),w(),b(7,"a",16),C(8,"Inventory"),w(),b(9,"a",17),C(10,"Users"),w(),b(11,"a",18),C(12,"Reports"),w(),b(13,"a",19),C(14,"Waiter"),w(),zy())}function Qie(n,e){n&1&&(b(0,"a",20),C(1,"POS"),w())}function Zie(n,e){n&1&&(b(0,"a",21),C(1,"Kitchen"),w())}function Jie(n,e){n&1&&(b(0,"a",19),C(1,"Waiter"),w())}function Xie(n,e){if(n&1){let t=Rt();b(0,"nav",3)(1,"div",4)(2,"h2"),C(3,"\u{1F37D}\uFE0F Visakh"),w()(),b(4,"div",5),He(5,Yie,15,0,"ng-container",6)(6,Qie,2,0,"a",7)(7,Zie,2,0,"a",8)(8,Jie,2,0,"a",9),w(),b(9,"div",10)(10,"span",11),C(11),w(),b(12,"button",12),xe("click",function(){_e(t);let i=oe();return we(i.logout())}),C(13,"Logout"),w()()()}if(n&2){let t=oe();O(5),he("ngIf",t.authService.hasRole("admin")),O(),he("ngIf",t.authService.hasRole("cashier")||t.authService.hasRole("admin")),O(),he("ngIf",t.authService.hasRole("chef")||t.authService.hasRole("admin")),O(),he("ngIf",t.authService.hasRole("waiter")),O(3),Ue(t.authService.currentUser==null?null:t.authService.currentUser.name)}}var pb=class n{constructor(e,t){this.authService=e;this.router=t;let r=sessionStorage.getItem("redirectPath");r&&r!=="/"&&this.router.url==="/"&&(sessionStorage.removeItem("redirectPath"),this.router.navigateByUrl(r).catch(()=>{})),this.router.events.subscribe(()=>{this.showNav=!this.router.url.includes("login")})}title="Restaurant Management System";showNav=!1;logout(){return B(this,null,function*(){yield this.authService.logout()})}static \u0275fac=function(t){return new(t||n)(Xe(jr),Xe(js))};static \u0275cmp=sr({type:n,selectors:[["app-root"]],decls:4,vars:3,consts:[[1,"app-container"],["class","navbar",4,"ngIf"],[1,"main-content"],[1,"navbar"],[1,"nav-brand"],[1,"nav-links"],[4,"ngIf"],["routerLink","/pos","routerLinkActive","active",4,"ngIf"],["routerLink","/kitchen","routerLinkActive","active",4,"ngIf"],["routerLink","/waiter","routerLinkActive","active",4,"ngIf"],[1,"nav-user"],[1,"user-name"],[1,"btn-logout",3,"click"],["routerLink","/dashboard","routerLinkActive","active"],["routerLink","/menu","routerLinkActive","active"],["routerLink","/deals","routerLinkActive","active"],["routerLink","/inventory","routerLinkActive","active"],["routerLink","/users","routerLinkActive","active"],["routerLink","/reports","routerLinkActive","active"],["routerLink","/waiter","routerLinkActive","active"],["routerLink","/pos","routerLinkActive","active"],["routerLink","/kitchen","routerLinkActive","active"]],template:function(t,r){t&1&&(b(0,"div",0),He(1,Xie,14,5,"nav",1),b(2,"main",2),Po(3,"router-outlet"),w()()),t&2&&(O(),he("ngIf",r.showNav&&r.authService.isLoggedIn()),O(),on("with-nav",r.showNav&&r.authService.isLoggedIn()))},dependencies:[lr,Ir,um,N_],styles:[".app-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column}.navbar[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:0 20px;display:flex;align-items:center;justify-content:space-between;height:60px;box-shadow:0 2px 8px #0000001a;position:sticky;top:0;z-index:100}.nav-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:600}.nav-links[_ngcontent-%COMP%]{display:flex;gap:5px;flex:1;justify-content:center}.nav-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;padding:8px 16px;border-radius:5px;transition:background .3s;font-weight:500}.nav-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#fff3}.nav-links[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background:#ffffff4d}.nav-user[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.user-name[_ngcontent-%COMP%]{font-weight:500}.btn-logout[_ngcontent-%COMP%]{background:#fff3;color:#fff;border:1px solid rgba(255,255,255,.3);padding:8px 16px;border-radius:5px;cursor:pointer;font-weight:500;transition:all .3s}.btn-logout[_ngcontent-%COMP%]:hover{background:#ffffff4d}.main-content[_ngcontent-%COMP%]{flex:1;background:#f5f5f5}.main-content.with-nav[_ngcontent-%COMP%]{min-height:calc(100vh - 60px)}"]})};VE(pb,vV).catch(n=>console.error(n));
