import{a as Gn}from"./chunk-FK6H3RFT.js";import{a as Ie,b as ft,e as ql,f as F}from"./chunk-YYD2Q6U2.js";var Fw;function nv(){return Fw}function Ua(n){let e=Fw;return Fw=n,e}var n5=Symbol("NotFound");function Nh(n){return n===n5||n?.name==="\u0275NotFound"}var Hi=null,rv=!1,Vw=1,r7=null,Wi=Symbol("SIGNAL");function cn(n){let e=Hi;return Hi=n,e}function av(){return Hi}var kh={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Oh(n){if(rv)throw new Error("");if(Hi===null)return;Hi.consumerOnSignalRead(n);let e=Hi.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=Hi.recomputing;if(r&&(t=e!==void 0?e.nextProducer:Hi.producers,t!==void 0&&t.producer===n)){Hi.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===Hi&&(!r||o7(i,Hi)))return;let o=Lh(Hi),s={producer:n,consumer:Hi,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};Hi.producersTail=s,e!==void 0?e.nextProducer=s:Hi.producers=s,o&&s5(n,s)}function r5(){Vw++}function cv(n){if(!(Lh(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Vw)){if(!n.producerMustRecompute(n)&&!em(n)){sv(n);return}n.producerRecomputeValue(n),sv(n)}}function jw(n){if(n.consumers===void 0)return;let e=rv;rv=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||i7(r)}}finally{rv=e}}function Bw(){return Hi?.consumerAllowSignalWrites!==!1}function i7(n){n.dirty=!0,jw(n),n.consumerMarkedDirty?.(n)}function sv(n){n.dirty=!1,n.lastCleanEpoch=Vw}function Rh(n){return n&&i5(n),cn(n)}function i5(n){n.producersTail=void 0,n.recomputing=!0}function Xp(n,e){cn(e),n&&o5(n)}function o5(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(Lh(n))do t=Uw(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function em(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(cv(t),r!==t.version))return!0}return!1}function tm(n){if(Lh(n)){let e=n.producers;for(;e!==void 0;)e=Uw(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function s5(n,e){let t=n.consumersTail,r=Lh(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)s5(i.producer,i)}function Uw(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Lh(e)){let o=e.producers;for(;o!==void 0;)o=Uw(o)}return t}function Lh(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function lv(n){r7?.(n)}function o7(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function uv(n,e){return Object.is(n,e)}function dv(n,e){let t=Object.create(s7);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(cv(t),Oh(t),t.value===Jp)throw t.error;return t.value};return r[Wi]=t,lv(t),r}var iv=Symbol("UNSET"),ov=Symbol("COMPUTING"),Jp=Symbol("ERRORED"),s7=ft(Ie({},kh),{value:iv,dirty:!0,error:null,equal:uv,kind:"computed",producerMustRecompute(n){return n.value===iv||n.value===ov},producerRecomputeValue(n){if(n.value===ov)throw new Error("");let e=n.value;n.value=ov;let t=Rh(n),r,i=!1;try{r=n.computation(),cn(null),i=e!==iv&&e!==Jp&&r!==Jp&&n.equal(e,r)}catch(o){r=Jp,n.error=o}finally{Xp(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function a7(){throw new Error}var a5=a7;function c5(n){a5(n)}function zw(n){a5=n}var c7=null;function $w(n,e){let t=Object.create(hv);t.value=n,e!==void 0&&(t.equal=e);let r=()=>l5(t);return r[Wi]=t,lv(t),[r,s=>Fh(t,s),s=>qw(t,s)]}function l5(n){return Oh(n),n.value}function Fh(n,e){Bw()||c5(n),n.equal(n.value,e)||(n.value=e,l7(n))}function qw(n,e){Bw()||c5(n),Fh(n,e(n.value))}var hv=ft(Ie({},kh),{equal:uv,value:void 0,kind:"signal"});function l7(n){n.version++,r5(),jw(n),c7?.(n)}function en(n){return typeof n=="function"}function Vh(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var fv=Vh(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function sd(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Pr=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(en(r))try{r()}catch(o){e=o instanceof fv?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{u5(o)}catch(s){e=e??[],s instanceof fv?e=[...e,...s.errors]:e.push(s)}}if(e)throw new fv(e)}}add(e){var t;if(e&&e!==this)if(this.closed)u5(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&sd(t,e)}remove(e){let{_finalizers:t}=this;t&&sd(t,e),e instanceof n&&e._removeParent(this)}};Pr.EMPTY=(()=>{let n=new Pr;return n.closed=!0,n})();var Hw=Pr.EMPTY;function pv(n){return n instanceof Pr||n&&"closed"in n&&en(n.remove)&&en(n.add)&&en(n.unsubscribe)}function u5(n){en(n)?n():n.unsubscribe()}var sa={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var jh={setTimeout(n,e,...t){let{delegate:r}=jh;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=jh;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function mv(n){jh.setTimeout(()=>{let{onUnhandledError:e}=sa;if(e)e(n);else throw n})}function nm(){}var d5=Ww("C",void 0,void 0);function h5(n){return Ww("E",void 0,n)}function f5(n){return Ww("N",n,void 0)}function Ww(n,e,t){return{kind:n,value:e,error:t}}var ad=null;function Bh(n){if(sa.useDeprecatedSynchronousErrorHandling){let e=!ad;if(e&&(ad={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=ad;if(ad=null,t)throw r}}else n()}function p5(n){sa.useDeprecatedSynchronousErrorHandling&&ad&&(ad.errorThrown=!0,ad.error=n)}var cd=class extends Pr{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,pv(e)&&e.add(this)):this.destination=h7}static create(e,t,r){return new Hl(e,t,r)}next(e){this.isStopped?Kw(f5(e),this):this._next(e)}error(e){this.isStopped?Kw(h5(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Kw(d5,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},u7=Function.prototype.bind;function Gw(n,e){return u7.call(n,e)}var Yw=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){gv(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){gv(r)}else gv(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){gv(t)}}},Hl=class extends cd{constructor(e,t,r){super();let i;if(en(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&sa.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Gw(e.next,o),error:e.error&&Gw(e.error,o),complete:e.complete&&Gw(e.complete,o)}):i=e}this.destination=new Yw(i)}};function gv(n){sa.useDeprecatedSynchronousErrorHandling?p5(n):mv(n)}function d7(n){throw n}function Kw(n,e){let{onStoppedNotification:t}=sa;t&&jh.setTimeout(()=>t(n,e))}var h7={closed:!0,next:nm,error:d7,complete:nm};var Uh=typeof Symbol=="function"&&Symbol.observable||"@@observable";function is(n){return n}function Qw(...n){return Zw(n)}function Zw(n){return n.length===0?is:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var on=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=p7(t)?t:new Hl(t,r,i);return Bh(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=m5(r),new r((i,o)=>{let s=new Hl({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Uh](){return this}pipe(...t){return Zw(t)(this)}toPromise(t){return t=m5(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function m5(n){var e;return(e=n??sa.Promise)!==null&&e!==void 0?e:Promise}function f7(n){return n&&en(n.next)&&en(n.error)&&en(n.complete)}function p7(n){return n&&n instanceof cd||f7(n)&&pv(n)}function Jw(n){return en(n?.lift)}function In(n){return e=>{if(Jw(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function gn(n,e,t,r,i){return new Xw(n,e,t,r,i)}var Xw=class extends cd{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function zh(){return In((n,e)=>{let t=null;n._refCount++;let r=gn(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var $h=class extends on{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Jw(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Pr;let t=this.getSubject();e.add(this.source.subscribe(gn(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Pr.EMPTY)}return e}refCount(){return zh()(this)}};var g5=Vh(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Yr=(()=>{class n extends on{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new vv(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new g5}next(t){Bh(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Bh(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Bh(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Hw:(this.currentObservers=null,o.push(t),new Pr(()=>{this.currentObservers=null,sd(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new on;return t.source=this,t}}return n.create=(e,t)=>new vv(e,t),n})(),vv=class extends Yr{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Hw}};var Pi=class extends Yr{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var e2={now(){return(e2.delegate||Date).now()},delegate:void 0};var yv=class extends Pr{constructor(e,t){super()}schedule(e,t=0){return this}};var rm={setInterval(n,e,...t){let{delegate:r}=rm;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=rm;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var qh=class extends yv{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return rm.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&rm.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,sd(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Hh=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Hh.now=e2.now;var Wh=class extends Hh{constructor(e,t=Hh.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var t2=new Wh(qh);var _v=class extends qh{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var bv=class extends Wh{};var n2=new bv(_v);var Ao=new on(n=>n.complete());function v5(n){return n&&en(n.schedule)}function y5(n){return n[n.length-1]}function wv(n){return en(y5(n))?n.pop():void 0}function Wl(n){return v5(y5(n))?n.pop():void 0}function r2(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function b5(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(m){s(m)}}function c(u){try{l(r.throw(u))}catch(m){s(m)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function _5(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ld(n){return this instanceof ld?(this.v=n,this):new ld(n)}function w5(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(p){return function(D){return Promise.resolve(D).then(p,m)}}function a(p,D){r[p]&&(i[p]=function(k){return new Promise(function(L,R){o.push([p,k,L,R])>1||c(p,k)})},D&&(i[p]=D(i[p])))}function c(p,D){try{l(r[p](D))}catch(k){_(o[0][3],k)}}function l(p){p.value instanceof ld?Promise.resolve(p.value.v).then(u,m):_(o[0][2],p)}function u(p){c("next",p)}function m(p){c("throw",p)}function _(p,D){p(D),o.shift(),o.length&&c(o[0][0],o[0][1])}}function C5(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof _5=="function"?_5(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,c){s=n[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var Cv=n=>n&&typeof n.length=="number"&&typeof n!="function";function Ev(n){return en(n?.then)}function Iv(n){return en(n[Uh])}function xv(n){return Symbol.asyncIterator&&en(n?.[Symbol.asyncIterator])}function Sv(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function m7(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Dv=m7();function Tv(n){return en(n?.[Dv])}function Av(n){return w5(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield ld(t.read());if(i)return yield ld(void 0);yield yield ld(r)}}finally{t.releaseLock()}})}function Mv(n){return en(n?.getReader)}function Qr(n){if(n instanceof on)return n;if(n!=null){if(Iv(n))return g7(n);if(Cv(n))return v7(n);if(Ev(n))return y7(n);if(xv(n))return E5(n);if(Tv(n))return _7(n);if(Mv(n))return b7(n)}throw Sv(n)}function g7(n){return new on(e=>{let t=n[Uh]();if(en(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function v7(n){return new on(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function y7(n){return new on(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,mv)})}function _7(n){return new on(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function E5(n){return new on(e=>{w7(n,e).catch(t=>e.error(t))})}function b7(n){return E5(Av(n))}function w7(n,e){var t,r,i,o;return b5(this,void 0,void 0,function*(){try{for(t=C5(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Mo(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Gl(n,e=0){return In((t,r)=>{t.subscribe(gn(r,i=>Mo(r,n,()=>r.next(i),e),()=>Mo(r,n,()=>r.complete(),e),i=>Mo(r,n,()=>r.error(i),e)))})}function Kl(n,e=0){return In((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function I5(n,e){return Qr(n).pipe(Kl(e),Gl(e))}function x5(n,e){return Qr(n).pipe(Kl(e),Gl(e))}function S5(n,e){return new on(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function D5(n,e){return new on(t=>{let r;return Mo(t,e,()=>{r=n[Dv](),Mo(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>en(r?.return)&&r.return()})}function Pv(n,e){if(!n)throw new Error("Iterable cannot be null");return new on(t=>{Mo(t,e,()=>{let r=n[Symbol.asyncIterator]();Mo(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function T5(n,e){return Pv(Av(n),e)}function A5(n,e){if(n!=null){if(Iv(n))return I5(n,e);if(Cv(n))return S5(n,e);if(Ev(n))return x5(n,e);if(xv(n))return Pv(n,e);if(Tv(n))return D5(n,e);if(Mv(n))return T5(n,e)}throw Sv(n)}function Er(n,e){return e?A5(n,e):Qr(n)}function qt(...n){let e=Wl(n);return Er(n,e)}function Gh(n,e){let t=en(n)?n:()=>n,r=i=>i.error(t());return new on(e?i=>e.schedule(r,0,i):r)}function i2(n){return!!n&&(n instanceof on||en(n.lift)&&en(n.subscribe))}var aa=Vh(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Nv(n,e){let t=typeof e=="object";return new Promise((r,i)=>{let o=new Hl({next:s=>{r(s),o.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new aa)}});n.subscribe(o)})}function vn(n,e){return In((t,r)=>{let i=0;t.subscribe(gn(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:C7}=Array;function E7(n,e){return C7(e)?n(...e):n(e)}function kv(n){return vn(e=>E7(n,e))}var{isArray:I7}=Array,{getPrototypeOf:x7,prototype:S7,keys:D7}=Object;function Ov(n){if(n.length===1){let e=n[0];if(I7(e))return{args:e,keys:null};if(T7(e)){let t=D7(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function T7(n){return n&&typeof n=="object"&&x7(n)===S7}function Rv(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Lv(...n){let e=Wl(n),t=wv(n),{args:r,keys:i}=Ov(n);if(r.length===0)return Er([],e);let o=new on(A7(r,e,i?s=>Rv(i,s):is));return t?o.pipe(kv(t)):o}function A7(n,e,t=is){return r=>{M5(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)M5(e,()=>{let l=Er(n[c],e),u=!1;l.subscribe(gn(r,m=>{o[c]=m,u||(u=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function M5(n,e,t){n?Mo(t,n,e):e()}function P5(n,e,t,r,i,o,s,a){let c=[],l=0,u=0,m=!1,_=()=>{m&&!c.length&&!l&&e.complete()},p=k=>l<r?D(k):c.push(k),D=k=>{o&&e.next(k),l++;let L=!1;Qr(t(k,u++)).subscribe(gn(e,R=>{i?.(R),o?p(R):e.next(R)},()=>{L=!0},void 0,()=>{if(L)try{for(l--;c.length&&l<r;){let R=c.shift();s?Mo(e,s,()=>D(R)):D(R)}_()}catch(R){e.error(R)}}))};return n.subscribe(gn(e,p,()=>{m=!0,_()})),()=>{a?.()}}function li(n,e,t=1/0){return en(e)?li((r,i)=>vn((o,s)=>e(r,o,i,s))(Qr(n(r,i))),t):(typeof e=="number"&&(t=e),In((r,i)=>P5(r,i,n,t)))}function N5(n=1/0){return li(is,n)}function k5(){return N5(1)}function Kh(...n){return k5()(Er(n,Wl(n)))}function im(n){return new on(e=>{Qr(n()).subscribe(e)})}function o2(...n){let e=wv(n),{args:t,keys:r}=Ov(n),i=new on(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let u=0;u<s;u++){let m=!1;Qr(t[u]).subscribe(gn(o,_=>{m||(m=!0,l--),a[u]=_},()=>c--,void 0,()=>{(!c||!m)&&(l||o.next(r?Rv(r,a):a),o.complete())}))}});return e?i.pipe(kv(e)):i}function Os(n,e){return In((t,r)=>{let i=0;t.subscribe(gn(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Yl(n){return In((e,t)=>{let r=null,i=!1,o;r=e.subscribe(gn(t,void 0,void 0,s=>{o=Qr(n(s,Yl(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function O5(n,e,t,r,i){return(o,s)=>{let a=t,c=e,l=0;o.subscribe(gn(s,u=>{let m=l++;c=a?n(c,u,m):(a=!0,u),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function Yh(n,e){return en(e)?li(n,e,1):li(n,1)}function Ql(n){return In((e,t)=>{let r=!1;e.subscribe(gn(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Rs(n){return n<=0?()=>Ao:In((e,t)=>{let r=0;e.subscribe(gn(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Fv(n=M7){return In((e,t)=>{let r=!1;e.subscribe(gn(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function M7(){return new aa}function om(n){return In((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Vc(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Os((i,o)=>n(i,o,r)):is,Rs(1),t?Ql(e):Fv(()=>new aa))}function Qh(n){return n<=0?()=>Ao:In((e,t)=>{let r=[];e.subscribe(gn(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function s2(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Os((i,o)=>n(i,o,r)):is,Qh(1),t?Ql(e):Fv(()=>new aa))}function a2(n,e){return In(O5(n,e,arguments.length>=2,!0))}function c2(...n){let e=Wl(n);return In((t,r)=>{(e?Kh(n,t,e):Kh(n,t)).subscribe(r)})}function Po(n,e){return In((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(gn(r,c=>{i?.unsubscribe();let l=0,u=o++;Qr(n(c,u)).subscribe(i=gn(r,m=>r.next(e?e(c,m,u,l++):m),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Vv(n){return In((e,t)=>{Qr(n).subscribe(gn(t,()=>t.complete(),nm)),!t.closed&&e.subscribe(t)})}function hi(n,e,t){let r=en(n)||e||t?{next:n,error:e,complete:t}:n;return r?In((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(gn(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):is}function R5(n){let e=cn(null);try{return n()}finally{cn(e)}}var dd=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},w2=new dd("20.3.15");var zv="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",rt=class extends Error{code;constructor(e,t){super(Jh(e,t)),this.code=e}};function P7(n){return`NG0${Math.abs(n)}`}function Jh(n,e){return`${P7(n)}${e?": "+e:""}`}var zc=globalThis;function On(n){for(let e in n)if(n[e]===On)return e;throw Error("")}function V5(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Bc(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Bc).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function C2(n,e){return n?e?`${n} ${e}`:n:e||""}var N7=On({__forward_ref__:On});function Oi(n){return n.__forward_ref__=Oi,n.toString=function(){return Bc(this())},n}function Ni(n){return E2(n)?n():n}function E2(n){return typeof n=="function"&&n.hasOwnProperty(N7)&&n.__forward_ref__===Oi}function yt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function za(n){return{providers:n.providers||[],imports:n.imports||[]}}function lm(n){return k7(n,$v)}function I2(n){return lm(n)!==null}function k7(n,e){return n.hasOwnProperty(e)&&n[e]||null}function O7(n){let e=n?.[$v]??null;return e||null}function u2(n){return n&&n.hasOwnProperty(Bv)?n[Bv]:null}var $v=On({\u0275prov:On}),Bv=On({\u0275inj:On}),ht=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=yt({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function x2(n){return n&&!!n.\u0275providers}var S2=On({\u0275cmp:On}),D2=On({\u0275dir:On}),T2=On({\u0275pipe:On}),A2=On({\u0275mod:On}),am=On({\u0275fac:On}),md=On({__NG_ELEMENT_ID__:On}),L5=On({__NG_ENV_ID__:On});function No(n){return typeof n=="string"?n:n==null?"":String(n)}function j5(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():No(n)}var B5=On({ngErrorCode:On}),R7=On({ngErrorMessage:On}),L7=On({ngTokenPath:On});function M2(n,e){return U5("",-200,e)}function qv(n,e){throw new rt(-201,!1)}function U5(n,e,t){let r=new rt(e,n);return r[B5]=e,r[R7]=n,t&&(r[L7]=t),r}function F7(n){return n[B5]}var d2;function z5(){return d2}function fo(n){let e=d2;return d2=n,e}function P2(n,e,t){let r=lm(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;qv(n,"Injector")}var V7={},ud=V7,h2="__NG_DI_FLAG__",f2=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=hd(t)||0;try{return this.injector.get(e,r&8?null:ud,r)}catch(i){if(Nh(i))return i;throw i}}};function j7(n,e=0){let t=nv();if(t===void 0)throw new rt(-203,!1);if(t===null)return P2(n,void 0,e);{let r=B7(e),i=t.retrieve(n,r);if(Nh(i)){if(r.optional)return null;throw i}return i}}function Ot(n,e=0){return(z5()||j7)(Ni(n),e)}function Le(n,e){return Ot(n,hd(e))}function hd(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function B7(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function p2(n){let e=[];for(let t=0;t<n.length;t++){let r=Ni(n[t]);if(Array.isArray(r)){if(r.length===0)throw new rt(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],c=U7(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(Ot(i,o))}else e.push(Ot(r))}return e}function $5(n,e){return n[h2]=e,n.prototype[h2]=e,n}function U7(n){return n[h2]}function Zl(n,e){let t=n.hasOwnProperty(am);return t?n[am]:null}function Hv(n,e){n.forEach(t=>Array.isArray(t)?Hv(t,e):e(t))}function N2(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function um(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function q5(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function H5(n,e,t){let r=Xh(n,e);return r>=0?n[r|1]=t:(r=~r,q5(n,r,e,t)),r}function Wv(n,e){let t=Xh(n,e);if(t>=0)return n[t|1]}function Xh(n,e){return z7(n,e,1)}function z7(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Xl={},os=[],$c=new ht(""),k2=new ht("",-1),O2=new ht(""),cm=class{get(e,t=ud){if(t===ud){let i=U5("",-201);throw i.name="\u0275NotFound",i}return t}};function R2(n){return n[A2]||null}function eu(n){return n[S2]||null}function L2(n){return n[D2]||null}function W5(n){return n[T2]||null}function ss(n){return{\u0275providers:n}}function G5(n){return ss([{provide:$c,multi:!0,useValue:n}])}function K5(...n){return{\u0275providers:F2(!0,n),\u0275fromNgModule:!0}}function F2(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Hv(e,s=>{let a=s;Uv(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Y5(i,o),t}function Y5(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];V2(i,o=>{e(o,r)})}}function Uv(n,e,t,r){if(n=Ni(n),!n)return!1;let i=null,o=u2(n),s=!o&&eu(n);if(!o&&!s){let c=n.ngModule;if(o=u2(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)Uv(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Hv(o.imports,u=>{Uv(u,e,t,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&Y5(l,e)}if(!a){let l=Zl(i)||(()=>new i);e({provide:i,useFactory:l,deps:os},i),e({provide:O2,useValue:i,multi:!0},i),e({provide:$c,useValue:()=>Ot(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=n;V2(c,u=>{e(u,l)})}}else return!1;return i!==n&&n.providers!==void 0}function V2(n,e){for(let t of n)x2(t)&&(t=t.\u0275providers),Array.isArray(t)?V2(t,e):e(t)}var $7=On({provide:String,useValue:On});function Q5(n){return n!==null&&typeof n=="object"&&$7 in n}function q7(n){return!!(n&&n.useExisting)}function H7(n){return!!(n&&n.useFactory)}function fd(n){return typeof n=="function"}function Z5(n){return!!n.useClass}var dm=new ht(""),jv={},F5={},l2;function hm(){return l2===void 0&&(l2=new cm),l2}var hr=class{},pd=class extends hr{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,g2(e,s=>this.processProvider(s)),this.records.set(k2,Zh(void 0,this)),i.has("environment")&&this.records.set(hr,Zh(void 0,this));let o=this.records.get(dm);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(O2,os,{self:!0}))}retrieve(e,t){let r=hd(t)||0;try{return this.get(e,ud,r)}catch(i){if(Nh(i))return i;throw i}}destroy(){sm(this),this._destroyed=!0;let e=cn(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),cn(e)}}onDestroy(e){return sm(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){sm(this);let t=Ua(this),r=fo(void 0),i;try{return e()}finally{Ua(t),fo(r)}}get(e,t=ud,r){if(sm(this),e.hasOwnProperty(L5))return e[L5](this);let i=hd(r),o,s=Ua(this),a=fo(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let u=Q7(e)&&lm(e);u&&this.injectableDefInScope(u)?l=Zh(m2(e),jv):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let c=i&2?hm():this.parent;return t=i&8&&t===ud?null:t,c.get(e,t)}catch(c){let l=F7(c);throw l===-200||l===-201?new rt(l,null):c}finally{fo(a),Ua(s)}}resolveInjectorInitializers(){let e=cn(null),t=Ua(this),r=fo(void 0),i;try{let o=this.get($c,os,{self:!0});for(let s of o)s()}finally{Ua(t),fo(r),cn(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Bc(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Ni(e);let t=fd(e)?e:Ni(e&&e.provide),r=G7(e);if(!fd(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Zh(void 0,jv,!0),i.factory=()=>p2(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=cn(null);try{if(t.value===F5)throw M2(Bc(e));return t.value===jv&&(t.value=F5,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&Y7(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{cn(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Ni(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function m2(n){let e=lm(n),t=e!==null?e.factory:Zl(n);if(t!==null)return t;if(n instanceof ht)throw new rt(204,!1);if(n instanceof Function)return W7(n);throw new rt(204,!1)}function W7(n){if(n.length>0)throw new rt(204,!1);let t=O7(n);return t!==null?()=>t.factory(n):()=>new n}function G7(n){if(Q5(n))return Zh(void 0,n.useValue);{let e=j2(n);return Zh(e,jv)}}function j2(n,e,t){let r;if(fd(n)){let i=Ni(n);return Zl(i)||m2(i)}else if(Q5(n))r=()=>Ni(n.useValue);else if(H7(n))r=()=>n.useFactory(...p2(n.deps||[]));else if(q7(n))r=(i,o)=>Ot(Ni(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=Ni(n&&(n.useClass||n.provide));if(K7(n))r=()=>new i(...p2(n.deps));else return Zl(i)||m2(i)}return r}function sm(n){if(n.destroyed)throw new rt(205,!1)}function Zh(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function K7(n){return!!n.deps}function Y7(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function Q7(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function g2(n,e){for(let t of n)Array.isArray(t)?g2(t,e):t&&x2(t)?g2(t.\u0275providers,e):e(t)}function Ir(n,e){let t;n instanceof pd?(sm(n),t=n):t=new f2(n);let r,i=Ua(t),o=fo(void 0);try{return e()}finally{Ua(i),fo(o)}}function J5(){return z5()!==void 0||nv()!=null}var la=0,Kt=1,Gt=2,ki=3,Ls=4,Fs=5,fm=6,ef=7,Gi=8,tu=9,$a=10,xr=11,tf=12,B2=13,gd=14,Vs=15,vd=16,yd=17,_d=18,pm=19,U2=20,jc=21,Gv=22,mm=23,as=24,bd=25,gm=26,Ri=27,X5=1;var nu=7,vm=8,ym=9,ko=10;function qa(n){return Array.isArray(n)&&typeof n[X5]=="object"}function ua(n){return Array.isArray(n)&&n[X5]===!0}function z2(n){return(n.flags&4)!==0}function ru(n){return n.componentOffset>-1}function nf(n){return(n.flags&1)===1}function Ha(n){return!!n.template}function rf(n){return(n[Gt]&512)!==0}function wd(n){return(n[Gt]&256)===256}var eM="svg",tM="math";function js(n){for(;Array.isArray(n);)n=n[la];return n}function $2(n,e){return js(e[n])}function da(n,e){return js(e[n.index])}function Kv(n,e){return n.data[e]}function q2(n,e){return n[e]}function H2(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Bs(n,e){let t=e[n];return qa(t)?t:t[la]}function Yv(n){return(n[Gt]&128)===128}function nM(n){return ua(n[ki])}function _m(n,e){return e==null?null:n[e]}function W2(n){n[yd]=0}function G2(n){n[Gt]&1024||(n[Gt]|=1024,Yv(n)&&of(n))}function rM(n,e){for(;n>0;)e=e[gd],n--;return e}function bm(n){return!!(n[Gt]&9216||n[as]?.dirty)}function Qv(n){n[$a].changeDetectionScheduler?.notify(8),n[Gt]&64&&(n[Gt]|=1024),bm(n)&&of(n)}function of(n){n[$a].changeDetectionScheduler?.notify(0);let e=Jl(n);for(;e!==null&&!(e[Gt]&8192||(e[Gt]|=8192,!Yv(e)));)e=Jl(e)}function K2(n,e){if(wd(n))throw new rt(911,!1);n[jc]===null&&(n[jc]=[]),n[jc].push(e)}function iM(n,e){if(n[jc]===null)return;let t=n[jc].indexOf(e);t!==-1&&n[jc].splice(t,1)}function Jl(n){let e=n[ki];return ua(e)?e[ki]:e}function oM(n){return n[ef]??=[]}function sM(n){return n.cleanup??=[]}var dn={lFrame:EM(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var v2=!1;function aM(){return dn.lFrame.elementDepthCount}function cM(){dn.lFrame.elementDepthCount++}function lM(){dn.lFrame.elementDepthCount--}function Zv(){return dn.bindingsEnabled}function uM(){return dn.skipHydrationRootTNode!==null}function dM(n){return dn.skipHydrationRootTNode===n}function hM(){dn.skipHydrationRootTNode=null}function Tn(){return dn.lFrame.lView}function po(){return dn.lFrame.tView}function le(n){return dn.lFrame.contextLView=n,n[Gi]}function ue(n){return dn.lFrame.contextLView=null,n}function Li(){let n=Y2();for(;n!==null&&n.type===64;)n=n.parent;return n}function Y2(){return dn.lFrame.currentTNode}function fM(){let n=dn.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function sf(n,e){let t=dn.lFrame;t.currentTNode=n,t.isParent=e}function Q2(){return dn.lFrame.isParent}function pM(){dn.lFrame.isParent=!1}function mM(){return dn.lFrame.contextLView}function Z2(){return v2}function J2(n){let e=v2;return v2=n,e}function gM(){let n=dn.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Jv(){return dn.lFrame.bindingIndex}function vM(n){return dn.lFrame.bindingIndex=n}function wm(){return dn.lFrame.bindingIndex++}function Cm(n){let e=dn.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function yM(){return dn.lFrame.inI18n}function _M(n,e){let t=dn.lFrame;t.bindingIndex=t.bindingRootIndex=n,Xv(e)}function bM(){return dn.lFrame.currentDirectiveIndex}function Xv(n){dn.lFrame.currentDirectiveIndex=n}function wM(n){let e=dn.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function X2(n){dn.lFrame.currentQueryIndex=n}function Z7(n){let e=n[Kt];return e.type===2?e.declTNode:e.type===1?n[Fs]:null}function eC(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=Z7(o),i===null||(o=o[gd],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=dn.lFrame=CM();return r.currentTNode=e,r.lView=n,!0}function ey(n){let e=CM(),t=n[Kt];dn.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function CM(){let n=dn.lFrame,e=n===null?null:n.child;return e===null?EM(n):e}function EM(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function IM(){let n=dn.lFrame;return dn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var tC=IM;function ty(){let n=IM();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function xM(n){return(dn.lFrame.contextLView=rM(n,dn.lFrame.contextLView))[Gi]}function Wa(){return dn.lFrame.selectedIndex}function iu(n){dn.lFrame.selectedIndex=n}function ny(){let n=dn.lFrame;return Kv(n.tView,n.selectedIndex)}function SM(){return dn.lFrame.currentNamespace}var DM=!0;function ry(){return DM}function Em(n){DM=n}function y2(n,e=null,t=null,r){let i=nC(n,e,t,r);return i.resolveInjectorInitializers(),i}function nC(n,e=null,t=null,r,i=new Set){let o=[t||os,K5(n)];return r=r||(typeof n=="object"?void 0:Bc(n)),new pd(o,e||hm(),r||null,i)}var Ur=class n{static THROW_IF_NOT_FOUND=ud;static NULL=new cm;static create(e,t){if(Array.isArray(e))return y2({name:""},t,e,"");{let r=e.name??"";return y2({name:r},e.parent,e.providers,r)}}static \u0275prov=yt({token:n,providedIn:"any",factory:()=>Ot(k2)});static __NG_ELEMENT_ID__=-1},fi=new ht(""),ha=(()=>{class n{static __NG_ELEMENT_ID__=J7;static __NG_ENV_ID__=t=>t}return n})(),_2=class extends ha{_lView;constructor(e){super(),this._lView=e}get destroyed(){return wd(this._lView)}onDestroy(e){let t=this._lView;return K2(t,e),()=>iM(t,e)}};function J7(){return new _2(Tn())}var ca=class{_console=console;handleError(e){this._console.error("ERROR",e)}},mo=new ht("",{providedIn:"root",factory:()=>{let n=Le(hr),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(ca),e.handleError(t))}}}),TM={provide:$c,useValue:()=>void Le(ca),multi:!0},X7=new ht("",{providedIn:"root",factory:()=>{let n=Le(fi).defaultView;if(!n)return;let e=Le(mo),t=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),Le(ha).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",t)})}});function rC(){return ss([G5(()=>void Le(X7))])}function iC(n){return typeof n=="function"&&n[Wi]!==void 0}function Us(n,e){let[t,r,i]=$w(n,e?.equal),o=t,s=o[Wi];return o.set=r,o.update=i,o.asReadonly=AM.bind(o),o}function AM(){let n=this[Wi];if(n.readonlyFn===void 0){let e=()=>this();e[Wi]=n,n.readonlyFn=e}return n.readonlyFn}function oC(n){return iC(n)&&typeof n.set=="function"}var iy=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=ej}return n})();function ej(){return new iy(Tn(),Li())}var Uc=class{},Im=new ht("",{providedIn:"root",factory:()=>!1});var sC=new ht(""),aC=new ht(""),Ga=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Pi(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new on(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=yt({token:n,providedIn:"root",factory:()=>new n})}return n})(),af=(()=>{class n{internalPendingTasks=Le(Ga);scheduler=Le(Uc);errorHandler=Le(mo);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=yt({token:n,providedIn:"root",factory:()=>new n})}return n})();function xm(...n){}var cC=(()=>{class n{static \u0275prov=yt({token:n,providedIn:"root",factory:()=>new b2})}return n})(),b2=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function pf(n){return{toString:n}.toString()}var oy="__parameters__";function cj(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function lj(n,e,t){return pf(()=>{let r=cj(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,u){let m=c.hasOwnProperty(oy)?c[oy]:Object.defineProperty(c,oy,{value:[]})[oy];for(;m.length<=u;)m.push(null);return(m[u]=m[u]||[]).push(s),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var cs=$5(lj("Optional"),8);function uj(n){return typeof n=="function"}var hy=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function cP(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Hc=(()=>{let n=()=>lP;return n.ngInherit=!0,n})();function lP(n){return n.type.prototype.ngOnChanges&&(n.setInput=hj),dj}function dj(){let n=dP(this),e=n?.current;if(e){let t=n.previous;if(t===Xl)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function hj(n,e,t,r,i){let o=this.declaredInputs[r],s=dP(n)||fj(n,{previous:Xl,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new hy(l&&l.currentValue,t,c===Xl),cP(n,e,i,t)}var uP="__ngSimpleChanges__";function dP(n){return n[uP]||null}function fj(n,e){return n[uP]=e}var MM=[];var Bn=function(n,e=null,t){for(let r=0;r<MM.length;r++){let i=MM[r];i(n,e,t)}};function pj(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=lP(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function hP(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function ly(n,e,t){fP(n,e,3,t)}function uy(n,e,t,r){(n[Gt]&3)===t&&fP(n,e,t,r)}function lC(n,e){let t=n[Gt];(t&3)===e&&(t&=16383,t+=1,n[Gt]=t)}function fP(n,e,t,r){let i=r!==void 0?n[yd]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[yd]+=65536),(a<o||o==-1)&&(mj(n,t,e,c),n[yd]=(n[yd]&4294901760)+c+2),c++}function PM(n,e){Bn(4,n,e);let t=cn(null);try{e.call(n)}finally{cn(t),Bn(5,n,e)}}function mj(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[Gt]>>14<n[yd]>>16&&(n[Gt]&3)===e&&(n[Gt]+=16384,PM(a,o)):PM(a,o)}var lf=-1,Ed=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function gj(n){return(n.flags&8)!==0}function vj(n){return(n.flags&16)!==0}function yj(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];_j(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function pP(n){return n===3||n===4||n===6}function _j(n){return n.charCodeAt(0)===64}function Tm(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?NM(n,t,i,null,e[++r]):NM(n,t,i,null,null))}}return n}function NM(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function mP(n){return n!==lf}function fy(n){return n&32767}function bj(n){return n>>16}function py(n,e){let t=bj(n),r=e;for(;t>0;)r=r[gd],t--;return r}var bC=!0;function my(n){let e=bC;return bC=n,e}var wj=256,gP=wj-1,vP=5,Cj=0,Ka={};function Ej(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(md)&&(r=t[md]),r==null&&(r=t[md]=Cj++);let i=r&gP,o=1<<i;e.data[n+(i>>vP)]|=o}function gy(n,e){let t=yP(n,e);if(t!==-1)return t;let r=e[Kt];r.firstCreatePass&&(n.injectorIndex=e.length,uC(r.data,n),uC(e,null),uC(r.blueprint,null));let i=jC(n,e),o=n.injectorIndex;if(mP(i)){let s=fy(i),a=py(i,e),c=a[Kt].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function uC(n,e){n.push(0,0,0,0,0,0,0,0,e)}function yP(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function jC(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=EP(i),r===null)return lf;if(t++,i=i[gd],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return lf}function wC(n,e,t){Ej(n,e,t)}function Ij(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(pP(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function _P(n,e,t){if(t&8||n!==void 0)return n;qv(e,"NodeInjector")}function bP(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[tu],o=fo(void 0);try{return i?i.get(e,r,t&8):P2(e,r,t&8)}finally{fo(o)}}return _P(r,e,t)}function wP(n,e,t,r=0,i){if(n!==null){if(e[Gt]&2048&&!(r&2)){let s=Aj(n,e,t,r,Ka);if(s!==Ka)return s}let o=CP(n,e,t,r,Ka);if(o!==Ka)return o}return bP(e,t,r,i)}function CP(n,e,t,r,i){let o=Dj(t);if(typeof o=="function"){if(!eC(e,n,r))return r&1?_P(i,t,r):bP(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))qv(t);else return s}finally{tC()}}else if(typeof o=="number"){let s=null,a=yP(n,e),c=lf,l=r&1?e[Vs][Fs]:null;for((a===-1||r&4)&&(c=a===-1?jC(n,e):e[a+8],c===lf||!OM(r,!1)?a=-1:(s=e[Kt],a=fy(c),e=py(c,e)));a!==-1;){let u=e[Kt];if(kM(o,a,u.data)){let m=xj(a,e,t,s,r,l);if(m!==Ka)return m}c=e[a+8],c!==lf&&OM(r,e[Kt].data[a+8]===l)&&kM(o,a,e)?(s=u,a=fy(c),e=py(c,e)):a=-1}}return i}function xj(n,e,t,r,i,o){let s=e[Kt],a=s.data[n+8],c=r==null?ru(a)&&bC:r!=s&&(a.type&3)!==0,l=i&1&&o===a,u=Sj(a,s,t,c,l);return u!==null?vy(e,s,u,a,i):Ka}function Sj(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,l=n.directiveEnd,u=o>>20,m=r?a:a+u,_=i?a+u:l;for(let p=m;p<_;p++){let D=s[p];if(p<c&&t===D||p>=c&&D.type===t)return p}if(i){let p=s[c];if(p&&Ha(p)&&p.type===t)return c}return null}function vy(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof Ed){let a=o;if(a.resolving){let p=j5(s[t]);throw M2(p)}let c=my(a.canSeeViewProviders);a.resolving=!0;let l=s[t].type||s[t],u,m=a.injectImpl?fo(a.injectImpl):null,_=eC(n,r,0);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&pj(t,s[t],e)}finally{m!==null&&fo(m),my(c),a.resolving=!1,tC()}}return o}function Dj(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(md)?n[md]:void 0;return typeof e=="number"?e>=0?e&gP:Tj:e}function kM(n,e,t){let r=1<<n;return!!(t[e+(n>>vP)]&r)}function OM(n,e){return!(n&2)&&!(n&1&&e)}var Cd=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return wP(this._tNode,this._lView,e,hd(r),t)}};function Tj(){return new Cd(Li(),Tn())}function Oo(n){return pf(()=>{let e=n.prototype.constructor,t=e[am]||CC(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[am]||CC(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function CC(n){return E2(n)?()=>{let e=CC(Ni(n));return e&&e()}:Zl(n)}function Aj(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[Gt]&2048&&!rf(s);){let a=CP(o,s,t,r|2,Ka);if(a!==Ka)return a;let c=o.parent;if(!c){let l=s[U2];if(l){let u=l.get(t,Ka,r);if(u!==Ka)return u}c=EP(s),s=s[gd]}o=c}return i}function EP(n){let e=n[Kt],t=e.type;return t===2?e.declTNode:t===1?n[Fs]:null}function km(n){return Ij(Li(),n)}function Mj(){return Ay(Li(),Tn())}function Ay(n,e){return new pa(da(n,e))}var pa=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=Mj}return n})();function IP(n){return(n.flags&128)===128}var BC=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(BC||{}),xP=new Map,Pj=0;function Nj(){return Pj++}function kj(n){xP.set(n[pm],n)}function EC(n){xP.delete(n[pm])}var RM="__ngContext__";function uf(n,e){qa(e)?(n[RM]=e[pm],kj(e)):n[RM]=e}function SP(n){return TP(n[tf])}function DP(n){return TP(n[Ls])}function TP(n){for(;n!==null&&!ua(n);)n=n[Ls];return n}var IC;function UC(n){IC=n}function AP(){if(IC!==void 0)return IC;if(typeof document<"u")return document;throw new rt(210,!1)}var My=new ht("",{providedIn:"root",factory:()=>Oj}),Oj="ng",Py=new ht(""),Dd=new ht("",{providedIn:"platform",factory:()=>"unknown"});var Ny=new ht("",{providedIn:"root",factory:()=>AP().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Rj="h",Lj="b";var MP=!1,PP=new ht("",{providedIn:"root",factory:()=>MP});var Fj=(n,e,t,r)=>{};function Vj(n,e,t,r){Fj(n,e,t,r)}function zC(n){return(n.flags&32)===32}var jj=()=>null;function NP(n,e,t=!1){return jj(n,e,t)}function kP(n,e){let t=n.contentQueries;if(t!==null){let r=cn(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];X2(o),a.contentQueries(2,e[s],s)}}}finally{cn(r)}}}function xC(n,e,t){X2(0);let r=cn(null);try{e(n,t)}finally{cn(r)}}function $C(n,e,t){if(z2(e)){let r=cn(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{cn(r)}}}var qc=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(qc||{});var sy;function Bj(){if(sy===void 0&&(sy=null,zc.trustedTypes))try{sy=zc.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return sy}function LM(n){return Bj()?.createScriptURL(n)||n}var yy=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${zv})`}};function ky(n){return n instanceof yy?n.changingThisBreaksApplicationSecurity:n}function qC(n,e){let t=OP(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${zv})`)}return t===e}function OP(n){return n instanceof yy&&n.getTypeName()||null}var Uj=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function RP(n){return n=String(n),n.match(Uj)?n:"unsafe:"+n}var zj=/^>|^->|<!--|-->|--!>|<!-$/g,$j=/(<|>)/g,qj="\u200B$1\u200B";function Hj(n){return n.replace(zj,e=>e.replace($j,qj))}function Wj(n,e){return n.createText(e)}function Gj(n,e,t){n.setValue(e,t)}function Kj(n,e){return n.createComment(Hj(e))}function LP(n,e,t){return n.createElement(e,t)}function _y(n,e,t,r,i){n.insertBefore(e,t,r,i)}function FP(n,e,t){n.appendChild(e,t)}function FM(n,e,t,r,i){r!==null?_y(n,e,t,r,i):FP(n,e,t)}function Yj(n,e,t,r){n.removeChild(null,e,t,r)}function Qj(n,e,t){n.setAttribute(e,"style",t)}function Zj(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function VP(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&yj(n,e,r),i!==null&&Zj(n,e,i),o!==null&&Qj(n,e,o)}var Oy=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(Oy||{});function jP(n){let e=UP();return e?e.sanitize(Oy.URL,n)||"":qC(n,"URL")?ky(n):RP(No(n))}function BP(n){let e=UP();if(e)return LM(e.sanitize(Oy.RESOURCE_URL,n)||"");if(qC(n,"ResourceURL"))return LM(ky(n));throw new rt(904,!1)}function Jj(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?BP:jP}function HC(n,e,t){return Jj(e,t)(n)}function UP(){let n=Tn();return n&&n[$a].sanitizer}function zP(n){return n instanceof Function?n():n}function Xj(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var $P="ng-template";function eB(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Xj(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(WC(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function WC(n){return n.type===4&&n.value!==$P}function tB(n,e,t){let r=n.type===4&&!t?$P:n.value;return e===r}function nB(n,e,t){let r=4,i=n.attrs,o=i!==null?oB(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!fa(r)&&!fa(c))return!1;if(s&&fa(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!tB(n,c,t)||c===""&&e.length===1){if(fa(r))return!1;s=!0}}else if(r&8){if(i===null||!eB(n,i,c,t)){if(fa(r))return!1;s=!0}}else{let l=e[++a],u=rB(c,i,WC(n),t);if(u===-1){if(fa(r))return!1;s=!0;continue}if(l!==""){let m;if(u>o?m="":m=i[u+1].toLowerCase(),r&2&&l!==m){if(fa(r))return!1;s=!0}}}}return fa(r)||s}function fa(n){return(n&1)===0}function rB(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return sB(e,n)}function iB(n,e,t=!1){for(let r=0;r<e.length;r++)if(nB(n,e[r],t))return!0;return!1}function oB(n){for(let e=0;e<n.length;e++){let t=n[e];if(pP(t))return e}return n.length}function sB(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function VM(n,e){return n?":not("+e.trim()+")":e}function aB(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!fa(s)&&(e+=VM(o,i),i=""),r=s,o=o||!fa(r);t++}return i!==""&&(e+=VM(o,i)),e}function cB(n){return n.map(aB).join(",")}function lB(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!fa(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var go={};function GC(n,e,t,r,i,o,s,a,c,l,u){let m=Ri+r,_=m+i,p=uB(m,_),D=typeof l=="function"?l():l;return p[Kt]={type:n,blueprint:p,template:t,queries:null,viewQuery:a,declTNode:e,data:p.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:D,incompleteFirstPass:!1,ssrId:u}}function uB(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:go);return t}function dB(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=GC(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function KC(n,e,t,r,i,o,s,a,c,l,u){let m=e.blueprint.slice();return m[la]=i,m[Gt]=r|4|128|8|64|1024,(l!==null||n&&n[Gt]&2048)&&(m[Gt]|=2048),W2(m),m[ki]=m[gd]=n,m[Gi]=t,m[$a]=s||n&&n[$a],m[xr]=a||n&&n[xr],m[tu]=c||n&&n[tu]||null,m[Fs]=o,m[pm]=Nj(),m[fm]=u,m[U2]=l,m[Vs]=e.type==2?n[Vs]:m,m}function hB(n,e,t){let r=da(e,n),i=dB(t),o=n[$a].rendererFactory,s=YC(n,KC(n,i,null,qP(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function qP(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function HP(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function YC(n,e){return n[tf]?n[B2][Ls]=e:n[tf]=e,n[B2]=e,e}function I(n=1){WP(po(),Tn(),Wa()+n,!1)}function WP(n,e,t,r){if(!r)if((e[Gt]&3)===3){let o=n.preOrderCheckHooks;o!==null&&ly(e,o,t)}else{let o=n.preOrderHooks;o!==null&&uy(e,o,0,t)}iu(t)}var Ry=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Ry||{});function SC(n,e,t,r){let i=cn(null);try{let[o,s,a]=n.inputs[t],c=null;(s&Ry.SignalBased)!==0&&(c=e[o][Wi]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,o):cP(e,c,o,r)}finally{cn(i)}}var Ya=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Ya||{}),fB;function QC(n,e){return fB(n,e)}var df=new Set,Ly=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Ly||{}),Td=new ht(""),jM=new Set;function Om(n){jM.has(n)||(jM.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var GP=!1,DC=class extends Yr{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,J5()&&(this.destroyRef=Le(ha,{optional:!0})??void 0,this.pendingTasks=Le(Ga,{optional:!0})??void 0)}emit(e){let t=cn(null);try{super.next(e)}finally{cn(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Pr&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Zr=DC;function KP(n){let e,t;function r(){n=xm;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function BM(n){return queueMicrotask(()=>n()),()=>{n=xm}}var ZC="isAngularZone",by=ZC+"_ID",pB=0,Rn=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Zr(!1);onMicrotaskEmpty=new Zr(!1);onStable=new Zr(!1);onError=new Zr(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=GP}=e;if(typeof Zone>"u")throw new rt(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,vB(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(ZC)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new rt(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new rt(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,mB,xm,xm);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},mB={};function JC(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function gB(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){KP(()=>{n.callbackScheduled=!1,TC(n),n.isCheckStableRunning=!0,JC(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),TC(n)}function vB(n){let e=()=>{gB(n)},t=pB++;n._inner=n._inner.fork({name:"angular",properties:{[ZC]:!0,[by]:t,[by+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(yB(c))return r.invokeTask(o,s,a,c);try{return UM(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),zM(n)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return UM(n),r.invoke(o,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!_B(c)&&e(),zM(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,TC(n),JC(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function TC(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function UM(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function zM(n){n._nesting--,JC(n)}var wy=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Zr;onMicrotaskEmpty=new Zr;onStable=new Zr;onError=new Zr;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function yB(n){return YP(n,"__ignore_ng_zone__")}function _B(n){return YP(n,"__scheduler_tick__")}function YP(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var XC=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=yt({token:n,providedIn:"root",factory:()=>new n})}return n})(),QP=[0,1,2,3],ZP=(()=>{class n{ngZone=Le(Rn);scheduler=Le(Uc);errorHandler=Le(ca,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){Le(Td,{optional:!0})}execute(){let t=this.sequences.size>0;t&&Bn(16),this.executing=!0;for(let r of QP)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&Bn(17)}register(t){let{view:r}=t;r!==void 0?((r[bd]??=[]).push(t),of(r),r[Gt]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Ly.AFTER_NEXT_RENDER,t):t()}static \u0275prov=yt({token:n,providedIn:"root",factory:()=>new n})}return n})(),Cy=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[bd];e&&(this.view[bd]=e.filter(t=>t!==this))}};function Fy(n,e){let t=e?.injector??Le(Ur);return Om("NgAfterNextRender"),wB(n,t,e,!0)}function bB(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function wB(n,e,t,r){let i=e.get(XC);i.impl??=e.get(ZP);let o=e.get(Td,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(ha):null,a=e.get(iy,null,{optional:!0}),c=new Cy(i.impl,bB(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(c),c}var CB=new ht("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function JP(n,e,t){let r=n.get(CB);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function EB(n,e){for(let[t,r]of e)JP(n,r.animateFns)}function $M(n,e,t,r){let i=n?.[gm]?.enter;e!==null&&i&&i.has(t.index)&&EB(r,i)}function cf(n,e,t,r,i,o,s,a){if(i!=null){let c,l=!1;ua(i)?c=i:qa(i)&&(l=!0,i=i[la]);let u=js(i);n===0&&r!==null?($M(a,r,o,t),s==null?FP(e,r,u):_y(e,r,u,s||null,!0)):n===1&&r!==null?($M(a,r,o,t),_y(e,r,u,s||null,!0)):n===2?qM(a,o,t,m=>{Yj(e,u,l,m)}):n===3&&qM(a,o,t,()=>{e.destroyNode(u)}),c!=null&&LB(e,n,t,c,o,r,s)}}function IB(n,e){XP(n,e),e[la]=null,e[Fs]=null}function xB(n,e,t,r,i,o){r[la]=i,r[Fs]=e,Vy(n,r,t,1,i,o)}function XP(n,e){e[$a].changeDetectionScheduler?.notify(9),Vy(n,e,e[xr],2,null,null)}function SB(n){let e=n[tf];if(!e)return dC(n[Kt],n);for(;e;){let t=null;if(qa(e))t=e[tf];else{let r=e[ko];r&&(t=r)}if(!t){for(;e&&!e[Ls]&&e!==n;)qa(e)&&dC(e[Kt],e),e=e[ki];e===null&&(e=n),qa(e)&&dC(e[Kt],e),t=e&&e[Ls]}e=t}}function eE(n,e){let t=n[ym],r=t.indexOf(e);t.splice(r,1)}function eN(n,e){if(wd(e))return;let t=e[xr];t.destroyNode&&Vy(n,e,t,3,null,null),SB(e)}function dC(n,e){if(wd(e))return;let t=cn(null);try{e[Gt]&=-129,e[Gt]|=256,e[as]&&tm(e[as]),AB(n,e),TB(n,e),e[Kt].type===1&&e[xr].destroy();let r=e[vd];if(r!==null&&ua(e[ki])){r!==e[ki]&&eE(r,e);let i=e[_d];i!==null&&i.detachView(n)}EC(e)}finally{cn(t)}}function qM(n,e,t,r){let i=n?.[gm];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&df.add(n),JP(t,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let c=0;c<s.animateFns.length;c++){let l=s.animateFns[c],{promise:u}=l();a.push(u)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),DB(n,r)}else n&&df.delete(n),r(!1)},i)}function DB(n,e){let t=n[gm]?.running;if(t){t.then(()=>{n[gm].running=void 0,df.delete(n),e(!0)});return}e(!1)}function TB(n,e){let t=n.cleanup,r=e[ef];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[ef]=null);let i=e[jc];if(i!==null){e[jc]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[mm];if(o!==null){e[mm]=null;for(let s of o)s.destroy()}}function AB(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Ed)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];Bn(4,a,c);try{c.call(a)}finally{Bn(5,a,c)}}else{Bn(4,i,o);try{o.call(i)}finally{Bn(5,i,o)}}}}}function MB(n,e,t){return PB(n,e.parent,t)}function PB(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[la];if(ru(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===qc.None||i===qc.Emulated)return null}return da(r,t)}function NB(n,e,t){return OB(n,e,t)}function kB(n,e,t){return n.type&40?da(n,t):null}var OB=kB,HM;function tE(n,e,t,r){let i=MB(n,r,e),o=e[xr],s=r.parent||e[Fs],a=NB(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)FM(o,i,t[c],a,!1);else FM(o,i,t,a,!1);HM!==void 0&&HM(o,r,e,t,i)}function Sm(n,e){if(e!==null){let t=e.type;if(t&3)return da(e,n);if(t&4)return AC(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Sm(n,r);{let i=n[e.index];return ua(i)?AC(-1,i):js(i)}}else{if(t&128)return Sm(n,e.next);if(t&32)return QC(e,n)()||js(n[e.index]);{let r=tN(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Jl(n[Vs]);return Sm(i,r)}else return Sm(n,e.next)}}}return null}function tN(n,e){if(e!==null){let r=n[Vs][Fs],i=e.projection;return r.projection[i]}return null}function AC(n,e){let t=ko+n+1;if(t<e.length){let r=e[t],i=r[Kt].firstChild;if(i!==null)return Sm(r,i)}return e[nu]}function nE(n,e,t,r,i,o,s){for(;t!=null;){let a=r[tu];if(t.type===128){t=t.next;continue}let c=r[t.index],l=t.type;if(s&&e===0&&(c&&uf(js(c),r),t.flags|=2),!zC(t))if(l&8)nE(n,e,t.child,r,i,o,!1),cf(e,n,a,i,c,t,o,r);else if(l&32){let u=QC(t,r),m;for(;m=u();)cf(e,n,a,i,m,t,o,r);cf(e,n,a,i,c,t,o,r)}else l&16?RB(n,e,r,t,i,o):cf(e,n,a,i,c,t,o,r);t=s?t.projectionNext:t.next}}function Vy(n,e,t,r,i,o){nE(t,r,n.firstChild,e,i,o,!1)}function RB(n,e,t,r,i,o){let s=t[Vs],c=s[Fs].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];cf(e,n,t[tu],i,u,r,o,t)}else{let l=c,u=s[ki];IP(r)&&(l.flags|=128),nE(n,e,l,u,i,o,!0)}}function LB(n,e,t,r,i,o,s){let a=r[nu],c=js(r);a!==c&&cf(e,n,t,o,a,i,s);for(let l=ko;l<r.length;l++){let u=r[l];Vy(u[Kt],u,n,e,o,a)}}function FB(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Ya.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Ya.Important),n.setStyle(t,r,i,o))}}function nN(n,e,t,r,i){let o=Wa(),s=r&2;try{iu(-1),s&&e.length>Ri&&WP(n,e,Ri,!1),Bn(s?2:0,i,t),t(r,i)}finally{iu(o),Bn(s?3:1,i,t)}}function jy(n,e,t){qB(n,e,t),(t.flags&64)===64&&HB(n,e,t)}function rE(n,e,t=da){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function VB(n,e,t,r){let o=r.get(PP,MP)||t===qc.ShadowDom,s=n.selectRootElement(e,o);return jB(s),s}function jB(n){BB(n)}var BB=()=>null;function UB(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function rN(n,e,t,r,i,o){let s=e[Kt];if(oE(n,s,e,t,r)){ru(n)&&$B(e,n.index);return}n.type&3&&(t=UB(t)),zB(n,e,t,r,i,o)}function zB(n,e,t,r,i,o){if(n.type&3){let s=da(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function $B(n,e){let t=Bs(e,n);t[Gt]&16||(t[Gt]|=64)}function qB(n,e,t){let r=t.directiveStart,i=t.directiveEnd;ru(t)&&hB(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||gy(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],c=vy(e,n,s,t);if(uf(c,e),o!==null&&YB(e,s-r,c,a,t,o),Ha(a)){let l=Bs(t.index,e);l[Gi]=vy(e,n,s,t)}}}function HB(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=bM();try{iu(o);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];Xv(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&WB(c,l)}}finally{iu(-1),Xv(s)}}function WB(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function iE(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];iB(e,o.selectors,!1)&&(r??=[],Ha(o)?r.unshift(o):r.push(o))}return r}function GB(n,e,t,r,i,o){let s=da(n,e);KB(e[xr],s,o,n.value,t,r,i)}function KB(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?No(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function YB(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],l=s[a+1];SC(r,t,c,l)}}function iN(n,e,t,r,i){let o=Ri+t,s=e[Kt],a=i(s,e,n,r,t);e[o]=a,sf(n,!0);let c=n.type===2;return c?(VP(e[xr],a,n),(aM()===0||nf(n))&&uf(a,e),cM()):uf(a,e),ry()&&(!c||!zC(n))&&tE(s,e,a,n),n}function oN(n){let e=n;return Q2()?pM():(e=e.parent,sf(e,!1)),e}function QB(n,e){let t=n[tu];if(!t)return;let r;try{r=t.get(mo,null)}catch{r=null}r?.(e)}function oE(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let l=s[c],u=s[c+1],m=e.data[l];SC(m,t[l],u,i),a=!0}if(o)for(let c of o){let l=t[c],u=e.data[c];SC(u,l,r,i),a=!0}return a}function ZB(n,e){let t=Bs(e,n),r=t[Kt];JB(r,t);let i=t[la];i!==null&&t[fm]===null&&(t[fm]=NP(i,t[tu])),Bn(18),sE(r,t,t[Gi]),Bn(19,t[Gi])}function JB(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function sE(n,e,t){ey(e);try{let r=n.viewQuery;r!==null&&xC(1,r,t);let i=n.template;i!==null&&nN(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[_d]?.finishViewCreation(n),n.staticContentQueries&&kP(n,e),n.staticViewQueries&&xC(2,n.viewQuery,t);let o=n.components;o!==null&&XB(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Gt]&=-5,ty()}}function XB(n,e){for(let t=0;t<e.length;t++)ZB(n,e[t])}function eU(n,e,t,r){let i=cn(null);try{let o=e.tView,a=n[Gt]&4096?4096:16,c=KC(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[vd]=l;let u=n[_d];return u!==null&&(c[_d]=u.createEmbeddedView(o)),sE(o,c,t),c}finally{cn(i)}}function WM(n,e){return!e||e.firstChild===null||IP(n)}function Am(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(js(o)),ua(o)&&sN(o,r);let s=t.type;if(s&8)Am(n,e,t.child,r);else if(s&32){let a=QC(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=tN(e,t);if(Array.isArray(a))r.push(...a);else{let c=Jl(e[Vs]);Am(c[Kt],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function sN(n,e){for(let t=ko;t<n.length;t++){let r=n[t],i=r[Kt].firstChild;i!==null&&Am(r[Kt],r,i,e)}n[nu]!==n[la]&&e.push(n[nu])}function aN(n){if(n[bd]!==null){for(let e of n[bd])e.impl.addSequence(e);n[bd].length=0}}var cN=[];function tU(n){return n[as]??nU(n)}function nU(n){let e=cN.pop()??Object.create(iU);return e.lView=n,e}function rU(n){n.lView[as]!==n&&(n.lView=null,cN.push(n))}var iU=ft(Ie({},kh),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{of(n.lView)},consumerOnSignalRead(){this.lView[as]=this}});function oU(n){let e=n[as]??Object.create(sU);return e.lView=n,e}var sU=ft(Ie({},kh),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Jl(n.lView);for(;e&&!lN(e[Kt]);)e=Jl(e);e&&G2(e)},consumerOnSignalRead(){this.lView[as]=this}});function lN(n){return n.type!==2}function uN(n){if(n[mm]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[mm])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[Gt]&8192)}}var aU=100;function dN(n,e=0){let r=n[$a].rendererFactory,i=!1;i||r.begin?.();try{cU(n,e)}finally{i||r.end?.()}}function cU(n,e){let t=Z2();try{J2(!0),MC(n,e);let r=0;for(;bm(n);){if(r===aU)throw new rt(103,!1);r++,MC(n,1)}}finally{J2(t)}}function lU(n,e,t,r){if(wd(e))return;let i=e[Gt],o=!1,s=!1;ey(e);let a=!0,c=null,l=null;o||(lN(n)?(l=tU(e),c=Rh(l)):av()===null?(a=!1,l=oU(e),c=Rh(l)):e[as]&&(tm(e[as]),e[as]=null));try{W2(e),vM(n.bindingStartIndex),t!==null&&nN(n,e,t,2,r);let u=(i&3)===3;if(!o)if(u){let p=n.preOrderCheckHooks;p!==null&&ly(e,p,null)}else{let p=n.preOrderHooks;p!==null&&uy(e,p,0,null),lC(e,0)}if(s||uU(e),uN(e),hN(e,0),n.contentQueries!==null&&kP(n,e),!o)if(u){let p=n.contentCheckHooks;p!==null&&ly(e,p)}else{let p=n.contentHooks;p!==null&&uy(e,p,1),lC(e,1)}hU(n,e);let m=n.components;m!==null&&pN(e,m,0);let _=n.viewQuery;if(_!==null&&xC(2,_,r),!o)if(u){let p=n.viewCheckHooks;p!==null&&ly(e,p)}else{let p=n.viewHooks;p!==null&&uy(e,p,2),lC(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Gv]){for(let p of e[Gv])p();e[Gv]=null}o||(aN(e),e[Gt]&=-73)}catch(u){throw o||of(e),u}finally{l!==null&&(Xp(l,c),a&&rU(l)),ty()}}function hN(n,e){for(let t=SP(n);t!==null;t=DP(t))for(let r=ko;r<t.length;r++){let i=t[r];fN(i,e)}}function uU(n){for(let e=SP(n);e!==null;e=DP(e)){if(!(e[Gt]&2))continue;let t=e[ym];for(let r=0;r<t.length;r++){let i=t[r];G2(i)}}}function dU(n,e,t){Bn(18);let r=Bs(e,n);fN(r,t),Bn(19,r[Gi])}function fN(n,e){Yv(n)&&MC(n,e)}function MC(n,e){let r=n[Kt],i=n[Gt],o=n[as],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&em(o)),s||=!1,o&&(o.dirty=!1),n[Gt]&=-9217,s)lU(r,n,r.template,n[Gi]);else if(i&8192){let a=cn(null);try{uN(n),hN(n,1);let c=r.components;c!==null&&pN(n,c,1),aN(n)}finally{cn(a)}}}function pN(n,e,t){for(let r=0;r<e.length;r++)dU(n,e[r],t)}function hU(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)iu(~i);else{let o=i,s=t[++r],a=t[++r];_M(s,o);let c=e[o];Bn(24,c),a(2,c),Bn(25,c)}}}finally{iu(-1)}}function aE(n,e){let t=Z2()?64:1088;for(n[$a].changeDetectionScheduler?.notify(e);n;){n[Gt]|=t;let r=Jl(n);if(rf(n)&&!r)return n;n=r}return null}function mN(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function fU(n,e,t,r=!0){let i=e[Kt];if(pU(i,e,n,t),r){let s=AC(t,n),a=e[xr],c=a.parentNode(n[nu]);c!==null&&xB(i,n[Fs],a,e,c,s)}let o=e[fm];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function PC(n,e){if(n.length<=ko)return;let t=ko+e,r=n[t];if(r){let i=r[vd];i!==null&&i!==n&&eE(i,r),e>0&&(n[t-1][Ls]=r[Ls]);let o=um(n,ko+e);IB(r[Kt],r);let s=o[_d];s!==null&&s.detachView(o[Kt]),r[ki]=null,r[Ls]=null,r[Gt]&=-129}return r}function pU(n,e,t,r){let i=ko+r,o=t.length;r>0&&(t[i-1][Ls]=e),r<o-ko?(e[Ls]=t[i],N2(t,ko+r,e)):(t.push(e),e[Ls]=null),e[ki]=t;let s=e[vd];s!==null&&t!==s&&gN(s,e);let a=e[_d];a!==null&&a.insertView(n),Qv(e),e[Gt]|=128}function gN(n,e){let t=n[ym],r=e[ki];if(qa(r))n[Gt]|=2;else{let i=r[ki][Vs];e[Vs]!==i&&(n[Gt]|=2)}t===null?n[ym]=[e]:t.push(e)}var ou=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[Kt];return Am(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Gi]}set context(e){this._lView[Gi]=e}get destroyed(){return wd(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ki];if(ua(e)){let t=e[vm],r=t?t.indexOf(this):-1;r>-1&&(PC(e,r),um(t,r))}this._attachedToViewContainer=!1}eN(this._lView[Kt],this._lView)}onDestroy(e){K2(this._lView,e)}markForCheck(){aE(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Gt]&=-129}reattach(){Qv(this._lView),this._lView[Gt]|=128}detectChanges(){this._lView[Gt]|=1024,dN(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new rt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=rf(this._lView),t=this._lView[vd];t!==null&&!e&&eE(t,this._lView),XP(this._lView[Kt],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new rt(902,!1);this._appRef=e;let t=rf(this._lView),r=this._lView[vd];r!==null&&!t&&gN(r,this._lView),Qv(this._lView)}};var Rm=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=mU;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=eU(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new ou(o)}}return n})();function mU(){return vN(Li(),Tn())}function vN(n,e){return n.type&4?new Rm(e,n,Ay(n,e)):null}function cE(n,e,t,r,i){let o=n.data[e];if(o===null)o=gU(n,e,t,r,i),yM()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=fM();o.injectorIndex=s===null?-1:s.injectorIndex}return sf(o,!0),o}function gU(n,e,t,r,i){let o=Y2(),s=Q2(),a=s?o:o&&o.parent,c=n.data[e]=yU(n,a,t,e,r,i);return vU(n,c,o,s),c}function vU(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function yU(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return uM()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var kfe=new RegExp(`^(\\d+)*(${Lj}|${Rj})*(.*)`);var _U=()=>null;function GM(n,e){return _U(n,e)}var yN=class{},By=class{},NC=class{resolveComponentFactory(e){throw new rt(917,!1)}},Lm=class{static NULL=new NC},Id=class{},Qa=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>bU()}return n})();function bU(){let n=Tn(),e=Li(),t=Bs(e.index,n);return(qa(t)?t:n)[xr]}var _N=(()=>{class n{static \u0275prov=yt({token:n,providedIn:"root",factory:()=>null})}return n})();var dy={},kC=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,dy,r);return i!==dy||t===dy?i:this.parentInjector.get(e,t,r)}};function KM(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=C2(i,a);else if(o==2){let c=a,l=e[++s];r=C2(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Je(n,e=0){let t=Tn();if(t===null)return Ot(n,e);let r=Li();return wP(r,t,Ni(n),e)}function bN(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,c=null,l=null;for(let u of s)if(u.resolveHostDirectives!==null){[a,c,l]=u.resolveHostDirectives(s);break}EU(n,e,t,a,o,c,l)}o!==null&&r!==null&&wU(t,r,o)}function wU(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new rt(-301,!1);r.push(e[i],o)}}function CU(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function EU(n,e,t,r,i,o,s){let a=r.length,c=!1;for(let _=0;_<a;_++){let p=r[_];!c&&Ha(p)&&(c=!0,CU(n,t,_)),wC(gy(t,e),n,p.type)}AU(t,n.data.length,a);for(let _=0;_<a;_++){let p=r[_];p.providersResolver&&p.providersResolver(p)}let l=!1,u=!1,m=HP(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let _=0;_<a;_++){let p=r[_];if(t.mergedAttrs=Tm(t.mergedAttrs,p.hostAttrs),xU(n,t,e,m,p),TU(m,p,i),s!==null&&s.has(p)){let[k,L]=s.get(p);t.directiveToIndex.set(p.type,[m,k+t.directiveStart,L+t.directiveStart])}else(o===null||!o.has(p))&&t.directiveToIndex.set(p.type,m);p.contentQueries!==null&&(t.flags|=4),(p.hostBindings!==null||p.hostAttrs!==null||p.hostVars!==0)&&(t.flags|=64);let D=p.type.prototype;!l&&(D.ngOnChanges||D.ngOnInit||D.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!u&&(D.ngOnChanges||D.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),u=!0),m++}IU(n,t,o)}function IU(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))YM(0,e,i,r),YM(1,e,i,r),ZM(e,r,!1);else{let o=t.get(i);QM(0,e,o,r),QM(1,e,o,r),ZM(e,r,!0)}}}function YM(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),wN(e,o)}}function QM(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),wN(e,s)}}function wN(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function ZM(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||WC(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let l=i[c];for(let u of l)if(u===e){s??=[],s.push(c,r[a+1]);break}}else if(t&&o.hasOwnProperty(c)){let l=o[c];for(let u=0;u<l.length;u+=2)if(l[u]===e){s??=[],s.push(l[u+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function xU(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Zl(i.type,!0)),s=new Ed(o,Ha(i),Je,null);n.blueprint[r]=s,t[r]=s,SU(n,e,r,HP(n,t,i.hostVars,go),i)}function SU(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;DU(s)!=a&&s.push(a),s.push(t,r,o)}}function DU(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function TU(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Ha(e)&&(t[""]=n)}}function AU(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function lE(n,e,t,r,i,o,s,a){let c=e[Kt],l=c.consts,u=_m(l,s),m=cE(c,n,t,r,u);return o&&bN(c,e,m,_m(l,a),i),m.mergedAttrs=Tm(m.mergedAttrs,m.attrs),m.attrs!==null&&KM(m,m.attrs,!1),m.mergedAttrs!==null&&KM(m,m.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,m),m}function uE(n,e){hP(n,e),z2(e)&&n.queries.elementEnd(e)}function dE(n){return EN(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function CN(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function EN(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function MU(n,e,t){return n[e]=t}function su(n,e,t){if(t===go)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Mm(n,e,t,r){let i=su(n,e,t);return su(n,e+1,r)||i}function PU(n,e,t,r,i){let o=Mm(n,e,t,r);return su(n,e+2,i)||o}function NU(n,e,t,r,i,o){let s=Mm(n,e,t,r);return Mm(n,e+2,i,o)||s}function hC(n,e,t){return function r(i){let o=ru(n)?Bs(n.index,e):e;aE(o,5);let s=e[Gi],a=JM(e,s,t,i),c=r.__ngNextListenerFn__;for(;c;)a=JM(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function JM(n,e,t,r){let i=cn(null);try{return Bn(6,e,t),t(r)!==!1}catch(o){return QB(n,o),!1}finally{Bn(7,e,t),cn(i)}}function kU(n,e,t,r,i,o,s,a){let c=nf(n),l=!1,u=null;if(!r&&c&&(u=RU(e,t,o,n.index)),u!==null){let m=u.__ngLastListenerFn__||u;m.__ngNextListenerFn__=s,u.__ngLastListenerFn__=s,l=!0}else{let m=da(n,t),_=r?r(m):m;Vj(t,_,o,a);let p=i.listen(_,o,a);if(!OU(o)){let D=r?k=>r(js(k[n.index])):n.index;IN(D,e,t,o,a,p,!1)}}return l}function OU(n){return n.startsWith("animation")||n.startsWith("transition")}function RU(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[ef],c=i[o+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function IN(n,e,t,r,i,o,s){let a=e.firstCreatePass?sM(e):null,c=oM(t),l=c.length;c.push(i,o),a&&a.push(r,n,l,(l+1)*(s?-1:1))}function XM(n,e,t,r,i,o){let s=e[t],a=e[Kt],l=a.data[t].outputs[r],m=s[l].subscribe(o);IN(n.index,a,e,i,o,m,!0)}var OC=Symbol("BINDING");var Ey=class extends Lm{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=eu(e);return new hf(t,this.ngModule)}};function LU(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&Ry.SignalBased)!==0};return i&&(o.transform=i),o})}function FU(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function VU(n,e,t){let r=e instanceof hr?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new kC(t,r):t}function jU(n){let e=n.get(Id,null);if(e===null)throw new rt(407,!1);let t=n.get(_N,null),r=n.get(Uc,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function BU(n,e){let t=xN(n);return LP(e,t,t==="svg"?eM:t==="math"?tM:null)}function xN(n){return(n.selectors[0][0]||"div").toLowerCase()}var hf=class extends By{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=LU(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=FU(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=cB(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){Bn(22);let a=cn(null);try{let c=this.componentDef,l=UU(r,c,s,o),u=VU(c,i||this.ngModule,e),m=jU(u),_=m.rendererFactory.createRenderer(null,c),p=r?VB(_,r,c.encapsulation,u):BU(c,_),D=s?.some(eP)||o?.some(R=>typeof R!="function"&&R.bindings.some(eP)),k=KC(null,l,null,512|qP(c),null,null,m,_,u,null,NP(p,u,!0));k[Ri]=p,ey(k);let L=null;try{let R=lE(Ri,k,2,"#host",()=>l.directiveRegistry,!0,0);VP(_,p,R),uf(p,k),jy(l,k,R),$C(l,R,k),uE(l,R),t!==void 0&&$U(R,this.ngContentSelectors,t),L=Bs(R.index,k),k[Gi]=L[Gi],sE(l,k,null)}catch(R){throw L!==null&&EC(L),EC(k),R}finally{Bn(23),ty()}return new Iy(this.componentType,k,!!D)}finally{cn(a)}}};function UU(n,e,t,r){let i=n?["ng-version","20.3.15"]:lB(e.selectors[0]),o=null,s=null,a=0;if(t)for(let u of t)a+=u[OC].requiredVars,u.create&&(u.targetIdx=0,(o??=[]).push(u)),u.update&&(u.targetIdx=0,(s??=[]).push(u));if(r)for(let u=0;u<r.length;u++){let m=r[u];if(typeof m!="function")for(let _ of m.bindings){a+=_[OC].requiredVars;let p=u+1;_.create&&(_.targetIdx=p,(o??=[]).push(_)),_.update&&(_.targetIdx=p,(s??=[]).push(_))}}let c=[e];if(r)for(let u of r){let m=typeof u=="function"?u:u.type,_=L2(m);c.push(_)}return GC(0,null,zU(o,s),1,a,c,null,null,null,[i],null)}function zU(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function eP(n){let e=n[OC].kind;return e==="input"||e==="twoWay"}var Iy=class extends yN{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=Kv(t[Kt],Ri),this.location=Ay(this._tNode,t),this.instance=Bs(this._tNode.index,t)[Gi],this.hostView=this.changeDetectorRef=new ou(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=oE(r,i[Kt],i,e,t);this.previousInputValues.set(e,t);let s=Bs(r.index,i);aE(s,1)}get injector(){return new Cd(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function $U(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Ad=(()=>{class n{static __NG_ELEMENT_ID__=qU}return n})();function qU(){let n=Li();return WU(n,Tn())}var HU=Ad,SN=class extends HU{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Ay(this._hostTNode,this._hostLView)}get injector(){return new Cd(this._hostTNode,this._hostLView)}get parentInjector(){let e=jC(this._hostTNode,this._hostLView);if(mP(e)){let t=py(e,this._hostLView),r=fy(e),i=t[Kt].data[r+8];return new Cd(i,t)}else return new Cd(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=tP(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-ko}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=GM(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,WM(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let c=e&&!uj(e),l;if(c)l=t;else{let L=t||{};l=L.index,r=L.injector,i=L.projectableNodes,o=L.environmentInjector||L.ngModuleRef,s=L.directives,a=L.bindings}let u=c?e:new hf(eu(e)),m=r||this.parentInjector;if(!o&&u.ngModule==null){let R=(c?m:this.parentInjector).get(hr,null);R&&(o=R)}let _=eu(u.componentType??{}),p=GM(this._lContainer,_?.id??null),D=p?.firstChild??null,k=u.create(m,i,D,o,s,a);return this.insertImpl(k.hostView,l,WM(this._hostTNode,p)),k}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(nM(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[ki],l=new SN(c,c[Fs],c[ki]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return fU(s,i,o,r),e.attachToViewContainerRef(),N2(fC(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=tP(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=PC(this._lContainer,t);r&&(um(fC(this._lContainer),t),eN(r[Kt],r))}detach(e){let t=this._adjustIndex(e,-1),r=PC(this._lContainer,t);return r&&um(fC(this._lContainer),t)!=null?new ou(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function tP(n){return n[vm]}function fC(n){return n[vm]||(n[vm]=[])}function WU(n,e){let t,r=e[n.index];return ua(r)?t=r:(t=mN(r,e,null,n),e[n.index]=t,YC(e,t)),KU(t,e,n,r),new SN(t,n,e)}function GU(n,e){let t=n[xr],r=t.createComment(""),i=da(e,n),o=t.parentNode(i);return _y(t,o,r,t.nextSibling(i),!1),r}var KU=ZU,YU=()=>!1;function QU(n,e,t){return YU(n,e,t)}function ZU(n,e,t,r){if(n[nu])return;let i;t.type&8?i=js(r):i=GU(e,t),n[nu]=i}var xd=class{},Uy=class{};var xy=class extends xd{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Ey(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=R2(e);this._bootstrapComponents=zP(o.bootstrap),this._r3Injector=nC(e,t,[{provide:xd,useValue:this},{provide:Lm,useValue:this.componentFactoryResolver},...r],Bc(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Sy=class extends Uy{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new xy(this.moduleType,e,[])}};var Pm=class extends xd{injector;componentFactoryResolver=new Ey(this);instance=null;constructor(e){super();let t=new pd([...e.providers,{provide:xd,useValue:this},{provide:Lm,useValue:this.componentFactoryResolver}],e.parent||hm(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Fm(n,e,t=null){return new Pm({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var JU=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=F2(!1,t.type),i=r.length>0?Fm([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=yt({token:n,providedIn:"environment",factory:()=>new n(Ot(hr))})}return n})();function Jn(n){return pf(()=>{let e=DN(n),t=ft(Ie({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===BC.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(JU).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||qc.Emulated,styles:n.styles||os,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Om("NgStandalone"),TN(t);let r=n.dependencies;return t.directiveDefs=nP(r,XU),t.pipeDefs=nP(r,W5),t.id=n9(t),t})}function XU(n){return eu(n)||L2(n)}function Wc(n){return pf(()=>({type:n.type,bootstrap:n.bootstrap||os,declarations:n.declarations||os,imports:n.imports||os,exports:n.exports||os,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function e9(n,e){if(n==null)return Xl;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=Ry.None,c=null),t[o]=[r,a,c],e[o]=s}return t}function t9(n){if(n==null)return Xl;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Un(n){return pf(()=>{let e=DN(n);return TN(e),e})}function hE(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function DN(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Xl,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||os,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:e9(n.inputs,e),outputs:t9(n.outputs),debugInfo:null}}function TN(n){n.features?.forEach(e=>e(n))}function nP(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function n9(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function r9(n){return Object.getPrototypeOf(n.prototype).constructor}function pi(n){let e=r9(n.type),t=!0,r=[n];for(;e;){let i;if(Ha(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new rt(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=pC(n.inputs),s.declaredInputs=pC(n.declaredInputs),s.outputs=pC(n.outputs);let a=i.hostBindings;a&&c9(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&s9(n,c),l&&a9(n,l),i9(n,i),V5(n.outputs,i.outputs),Ha(i)&&i.data.animation){let u=n.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===pi&&(t=!1)}}e=Object.getPrototypeOf(e)}o9(r)}function i9(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function o9(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Tm(i.hostAttrs,t=Tm(t,i.hostAttrs))}}function pC(n){return n===Xl?{}:n===os?[]:n}function s9(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function a9(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function c9(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function l9(n,e,t,r,i,o,s,a){if(t.firstCreatePass){n.mergedAttrs=Tm(n.mergedAttrs,n.attrs);let u=n.tView=GC(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),u.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),sf(n,!1);let c=d9(t,e,n,r);ry()&&tE(t,e,c,n),uf(c,e);let l=mN(c,e,c,n);e[r+Ri]=l,YC(e,l),QU(l,n,e)}function u9(n,e,t,r,i,o,s,a,c,l,u){let m=t+Ri,_;return e.firstCreatePass?(_=cE(e,m,4,s||null,a||null),Zv()&&bN(e,n,_,_m(e.consts,l),iE),hP(e,_)):_=e.data[m],l9(_,n,e,t,r,i,o,c),nf(_)&&jy(e,n,_),l!=null&&rE(n,_,u),_}function Fe(n,e,t,r,i,o,s,a){let c=Tn(),l=po(),u=_m(l.consts,o);return u9(c,l,n,e,t,r,i,u,void 0,s,a),Fe}var d9=h9;function h9(n,e,t,r){return Em(!0),e[xr].createComment("")}var fE=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var pE=new ht("");function au(n){return!!n&&typeof n.then=="function"}function mE(n){return!!n&&typeof n.subscribe=="function"}var AN=new ht("");var gE=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=Le(AN,{optional:!0})??[];injector=Le(Ur);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=Ir(this.injector,i);if(au(o))t.push(o);else if(mE(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),zy=new ht("");function MN(){zw(()=>{let n="";throw new rt(600,n)})}function PN(n){return n.isBoundToModule}var f9=10;var Gc=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=Le(mo);afterRenderManager=Le(XC);zonelessEnabled=Le(Im);rootEffectScheduler=Le(cC);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Yr;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=Le(Ga);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(vn(t=>!t))}constructor(){Le(Td,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=Le(hr);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Ur.NULL){return this._injector.get(Rn).run(()=>{Bn(10);let s=t instanceof By;if(!this._injector.get(gE).done){let D="";throw new rt(405,D)}let c;s?c=t:c=this._injector.get(Lm).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let l=PN(c)?void 0:this._injector.get(xd),u=r||c.selector,m=c.create(i,[],u,l),_=m.location.nativeElement,p=m.injector.get(pE,null);return p?.registerApplication(_),m.onDestroy(()=>{this.detachView(m.hostView),Dm(this.components,m),p?.unregisterApplication(_)}),this._loadComponent(m),Bn(11,m),m})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Bn(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Ly.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new rt(101,!1);let t=cn(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,cn(t),this.afterTick.next(),Bn(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Id,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<f9;)Bn(14),this.synchronizeOnce(),Bn(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!bm(i))continue;let o=r&&!this.zonelessEnabled?0:1;dN(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>bm(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Dm(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(zy,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Dm(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new rt(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Dm(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Kc(n,e,t,r){let i=Tn(),o=wm();if(su(i,o,e)){let s=po(),a=ny();GB(a,i,n,e,t,r)}return Kc}var Bfe=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function ie(n,e,t){let r=Tn(),i=wm();if(su(r,i,e)){let o=po(),s=ny();rN(s,r,n,e,r[xr],t)}return ie}function rP(n,e,t,r,i){oE(e,n,t,i?"class":"style",r)}function v(n,e,t,r){let i=Tn(),o=i[Kt],s=n+Ri,a=o.firstCreatePass?lE(s,i,2,e,iE,Zv(),t,r):o.data[s];if(iN(a,i,n,e,p9),nf(a)){let c=i[Kt];jy(c,i,a),$C(c,a,i)}return r!=null&&rE(i,a),v}function g(){let n=po(),e=Li(),t=oN(e);return n.firstCreatePass&&uE(n,t),dM(t)&&hM(),lM(),t.classesWithoutHost!=null&&gj(t)&&rP(n,t,Tn(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&vj(t)&&rP(n,t,Tn(),t.stylesWithoutHost,!1),g}function Fi(n,e,t,r){return v(n,e,t,r),g(),Fi}var p9=(n,e,t,r,i)=>(Em(!0),LP(e[xr],r,SM()));function $y(n,e,t){let r=Tn(),i=r[Kt],o=n+Ri,s=i.firstCreatePass?lE(o,r,8,"ng-container",iE,Zv(),e,t):i.data[o];if(iN(s,r,n,"ng-container",m9),nf(s)){let a=r[Kt];jy(a,r,s),$C(a,s,r)}return t!=null&&rE(r,s),$y}function qy(){let n=po(),e=Li(),t=oN(e);return n.firstCreatePass&&uE(n,t),qy}var m9=(n,e,t,r,i)=>(Em(!0),Kj(e[xr],""));function at(){return Tn()}var ay=void 0;function g9(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var v9=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ay,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ay,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ay,"{1} 'at' {0}",ay],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",g9],mC={};function ls(n){let e=y9(n),t=iP(e);if(t)return t;let r=e.split("-")[0];if(t=iP(r),t)return t;if(r==="en")return v9;throw new rt(701,!1)}function iP(n){return n in mC||(mC[n]=zc.ng&&zc.ng.common&&zc.ng.common.locales&&zc.ng.common.locales[n]),mC[n]}var zr=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(zr||{});function y9(n){return n.toLowerCase().replace(/_/g,"-")}var Vm="en-US";var _9=Vm;function NN(n){typeof n=="string"&&(_9=n.toLowerCase().replace(/_/g,"-"))}function me(n,e,t){let r=Tn(),i=po(),o=Li();return kN(i,r,r[xr],o,n,e,t),me}function kN(n,e,t,r,i,o,s){let a=!0,c=null;if((r.type&3||s)&&(c??=hC(r,e,o),kU(r,n,e,s,t,i,o,c)&&(a=!1)),a){let l=r.outputs?.[i],u=r.hostDirectiveOutputs?.[i];if(u&&u.length)for(let m=0;m<u.length;m+=2){let _=u[m],p=u[m+1];c??=hC(r,e,o),XM(r,e,_,p,i,c)}if(l&&l.length)for(let m of l)c??=hC(r,e,o),XM(r,e,m,i,i,c)}}function Z(n=1){return xM(n)}function vE(n){let e=mM();return q2(e,Ri+n)}function cy(n,e){return n<<17|e<<2}function Sd(n){return n>>17&32767}function b9(n){return(n&2)==2}function w9(n,e){return n&131071|e<<17}function RC(n){return n|2}function ff(n){return(n&131068)>>2}function gC(n,e){return n&-131069|e<<2}function C9(n){return(n&1)===1}function LC(n){return n|1}function E9(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Sd(s),c=ff(s);n[r]=t;let l=!1,u;if(Array.isArray(t)){let m=t;u=m[1],(u===null||Xh(m,u)>0)&&(l=!0)}else u=t;if(i)if(c!==0){let _=Sd(n[a+1]);n[r+1]=cy(_,a),_!==0&&(n[_+1]=gC(n[_+1],r)),n[a+1]=w9(n[a+1],r)}else n[r+1]=cy(a,0),a!==0&&(n[a+1]=gC(n[a+1],r)),a=r;else n[r+1]=cy(c,0),a===0?a=r:n[c+1]=gC(n[c+1],r),c=r;l&&(n[r+1]=RC(n[r+1])),oP(n,u,r,!0),oP(n,u,r,!1),I9(e,u,n,r,o),s=cy(a,c),o?e.classBindings=s:e.styleBindings=s}function I9(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Xh(o,e)>=0&&(t[r+1]=LC(t[r+1]))}function oP(n,e,t,r){let i=n[t+1],o=e===null,s=r?Sd(i):ff(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],l=n[s+1];x9(c,e)&&(a=!0,n[s+1]=r?LC(l):RC(l)),s=r?Sd(l):ff(l)}a&&(n[t+1]=r?RC(i):LC(i))}function x9(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Xh(n,e)>=0:!1}function Md(n,e,t){return ON(n,e,t,!1),Md}function kt(n,e){return ON(n,e,null,!0),kt}function ON(n,e,t,r){let i=Tn(),o=po(),s=Cm(2);if(o.firstUpdatePass&&D9(o,n,s,r),e!==go&&su(i,s,e)){let a=o.data[Wa()];N9(o,a,i,i[xr],n,i[s+1]=k9(e,t),r,s)}}function S9(n,e){return e>=n.expandoStartIndex}function D9(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Wa()],s=S9(n,t);O9(o,r)&&e===null&&!s&&(e=!1),e=T9(i,o,e,r),E9(i,o,e,t,s,r)}}function T9(n,e,t,r){let i=wM(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=vC(null,n,e,t,r),t=Nm(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=vC(i,n,e,t,r),o===null){let c=A9(n,e,r);c!==void 0&&Array.isArray(c)&&(c=vC(null,n,e,c[1],r),c=Nm(c,e.attrs,r),M9(n,e,r,c))}else o=P9(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function A9(n,e,t){let r=t?e.classBindings:e.styleBindings;if(ff(r)!==0)return n[Sd(r)]}function M9(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Sd(i)]=r}function P9(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Nm(r,s,t)}return Nm(r,e.attrs,t)}function vC(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Nm(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Nm(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),H5(n,s,t?!0:e[++o]))}return n===void 0?null:n}function N9(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],u=C9(l)?sP(c,e,t,i,ff(l),s):void 0;if(!Dy(u)){Dy(o)||b9(l)&&(o=sP(c,null,t,i,a,s));let m=$2(Wa(),t);FB(r,s,m,i,o)}}function sP(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),u=l?c[1]:c,m=u===null,_=t[i+1];_===go&&(_=m?os:void 0);let p=m?Wv(_,r):u===r?_:void 0;if(l&&!Dy(p)&&(p=Wv(c,r)),Dy(p)&&(a=p,s))return a;let D=n[i+1];i=s?Sd(D):ff(D)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=Wv(c,r))}return a}function Dy(n){return n!==void 0}function k9(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Bc(ky(n)))),n}function O9(n,e){return(n.flags&(e?8:16))!==0}function w(n,e=""){let t=Tn(),r=po(),i=n+Ri,o=r.firstCreatePass?cE(r,i,1,e,null):r.data[i],s=R9(r,t,o,e,n);t[i]=s,ry()&&tE(r,t,s,o),sf(o,!1)}var R9=(n,e,t,r,i)=>(Em(!0),Wj(e[xr],r));function L9(n,e,t,r=""){return su(n,wm(),t)?e+No(t)+r:go}function F9(n,e,t,r,i,o=""){let s=Jv(),a=Mm(n,s,t,i);return Cm(2),a?e+No(t)+r+No(i)+o:go}function V9(n,e,t,r,i,o,s,a=""){let c=Jv(),l=PU(n,c,t,i,s);return Cm(3),l?e+No(t)+r+No(i)+o+No(s)+a:go}function j9(n,e,t,r,i,o,s,a,c,l=""){let u=Jv(),m=NU(n,u,t,i,s,c);return Cm(4),m?e+No(t)+r+No(i)+o+No(s)+a+No(c)+l:go}function Ve(n){return Oe("",n),Ve}function Oe(n,e,t){let r=Tn(),i=L9(r,n,e,t);return i!==go&&Wy(r,Wa(),i),Oe}function Ro(n,e,t,r,i){let o=Tn(),s=F9(o,n,e,t,r,i);return s!==go&&Wy(o,Wa(),s),Ro}function Pd(n,e,t,r,i,o,s){let a=Tn(),c=V9(a,n,e,t,r,i,o,s);return c!==go&&Wy(a,Wa(),c),Pd}function Hy(n,e,t,r,i,o,s,a,c){let l=Tn(),u=j9(l,n,e,t,r,i,o,s,a,c);return u!==go&&Wy(l,Wa(),u),Hy}function Wy(n,e,t){let r=$2(e,n);Gj(n[xr],r,t)}function Ke(n,e,t){oC(e)&&(e=e());let r=Tn(),i=wm();if(su(r,i,e)){let o=po(),s=ny();rN(s,r,n,e,r[xr],t)}return Ke}function Qe(n,e){let t=oC(n);return t&&n.set(e),t}function Ye(n,e){let t=Tn(),r=po(),i=Li();return kN(r,t,t[xr],i,n,e),Ye}function B9(n,e,t){let r=po();if(r.firstCreatePass){let i=Ha(n);FC(t,r.data,r.blueprint,i,!0),FC(e,r.data,r.blueprint,i,!1)}}function FC(n,e,t,r,i){if(n=Ni(n),Array.isArray(n))for(let o=0;o<n.length;o++)FC(n[o],e,t,r,i);else{let o=po(),s=Tn(),a=Li(),c=fd(n)?n:Ni(n.provide),l=j2(n),u=a.providerIndexes&1048575,m=a.directiveStart,_=a.providerIndexes>>20;if(fd(n)||!n.multi){let p=new Ed(l,i,Je,null),D=_C(c,e,i?u:u+_,m);D===-1?(wC(gy(a,s),o,c),yC(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(p),s.push(p)):(t[D]=p,s[D]=p)}else{let p=_C(c,e,u+_,m),D=_C(c,e,u,u+_),k=p>=0&&t[p],L=D>=0&&t[D];if(i&&!L||!i&&!k){wC(gy(a,s),o,c);let R=$9(i?z9:U9,t.length,i,r,l,n);!i&&L&&(t[D].providerFactory=R),yC(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(R),s.push(R)}else{let R=RN(t[i?D:p],l,!i&&r);yC(o,n,p>-1?p:D,R)}!i&&r&&L&&t[D].componentProviders++}}}function yC(n,e,t,r){let i=fd(e),o=Z5(e);if(i||o){let c=(o?Ni(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let u=l.indexOf(t);u===-1?l.push(t,[r,c]):l[u+1].push(r,c)}else l.push(t,c)}}}function RN(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function _C(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function U9(n,e,t,r,i){return VC(this.multi,[])}function z9(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=vy(r,r[Kt],this.providerFactory.index,i);s=c.slice(0,a),VC(o,s);for(let l=a;l<c.length;l++)s.push(c[l])}else s=[],VC(o,s);return s}function VC(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function $9(n,e,t,r,i,o){let s=new Ed(n,t,Je,null);return s.multi=[],s.index=e,s.componentProviders=0,RN(s,i,r&&!t),s}function Lo(n,e=[]){return t=>{t.providersResolver=(r,i)=>B9(r,i?i(n):n,e)}}function q9(n,e){let t=n[e];return t===go?void 0:t}function H9(n,e,t,r,i,o,s){let a=e+t;return Mm(n,a,i,o)?MU(n,a+2,s?r.call(s,i,o):r(i,o)):q9(n,a+2)}function cu(n,e){let t=po(),r,i=n+Ri;t.firstCreatePass?(r=W9(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Zl(r.type,!0)),s,a=fo(Je);try{let c=my(!1),l=o();return my(c),H2(t,Tn(),i,l),l}finally{fo(a)}}function W9(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function lu(n,e,t,r){let i=n+Ri,o=Tn(),s=q2(o,i);return G9(o,i)?H9(o,gM(),e,s.transform,t,r,s):s.transform(t,r)}function G9(n,e){return n[Kt].data[e].pure}function yE(n,e){return vN(n,e)}var Ty=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},_E=(()=>{class n{compileModuleSync(t){return new Sy(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=R2(t),o=zP(i.declarations).reduce((s,a)=>{let c=eu(a);return c&&s.push(new hf(c)),s},[]);return new Ty(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var K9=(()=>{class n{zone=Le(Rn);changeDetectionScheduler=Le(Uc);applicationRef=Le(Gc);applicationErrorHandler=Le(mo);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),LN=new ht("",{factory:()=>!1});function bE({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Rn(ft(Ie({},CE()),{scheduleInRootZone:t})),[{provide:Rn,useFactory:n},{provide:$c,multi:!0,useFactory:()=>{let r=Le(K9,{optional:!0});return()=>r.initialize()}},{provide:$c,multi:!0,useFactory:()=>{let r=Le(Y9);return()=>{r.initialize()}}},e===!0?{provide:sC,useValue:!0}:[],{provide:aC,useValue:t??GP},{provide:mo,useFactory:()=>{let r=Le(Rn),i=Le(hr),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(ca),o.handleError(s))})}}}]}function wE(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=bE({ngZoneFactory:()=>{let i=CE(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Om("NgZone_CoalesceEvent"),new Rn(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return ss([{provide:LN,useValue:!0},{provide:Im,useValue:!1},r])}function CE(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var Y9=(()=>{class n{subscription=new Pr;initialized=!1;zone=Le(Rn);pendingTasks=Le(Ga);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Rn.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Rn.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var FN=(()=>{class n{applicationErrorHandler=Le(mo);appRef=Le(Gc);taskService=Le(Ga);ngZone=Le(Rn);zonelessEnabled=Le(Im);tracing=Le(Td,{optional:!0});disableScheduling=Le(sC,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Pr;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(by):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(Le(aC,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof wy||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?BM:KP;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(by+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,BM(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Q9(){return typeof $localize<"u"&&$localize.locale||Vm}var jm=new ht("",{providedIn:"root",factory:()=>Le(jm,{optional:!0,skipSelf:!0})||Q9()});function mi(n){return R5(n)}function mf(n,e){return dv(n,e?.equal)}var VN=class{[Wi];constructor(e){this[Wi]=e}destroy(){this[Wi].destroy()}};var zN=Symbol("InputSignalNode#UNSET"),fz=ft(Ie({},hv),{transformFn:void 0,applyValueToInputSignal(n,e){Fh(n,e)}});function $N(n,e){let t=Object.create(fz);t.value=n,t.transformFn=e?.transform;function r(){if(Oh(t),t.value===zN){let i=null;throw new rt(-950,i)}return t.value}return r[Wi]=t,r}var Ky=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>km(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},pz=new ht("");pz.__NG_ELEMENT_ID__=n=>{let e=Li();if(e===null)throw new rt(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new rt(204,!1)};function jN(n,e){return $N(n,e)}function mz(n){return $N(zN,n)}var qN=(jN.required=mz,jN);var EE=new ht(""),gz=new ht("");function Bm(n){return!n.moduleRef}function vz(n){let e=Bm(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Rn);return t.run(()=>{Bm(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(mo),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Bm(n)){let o=()=>e.destroy(),s=n.platformInjector.get(EE);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(EE);s.add(o),n.moduleRef.onDestroy(()=>{Dm(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return _z(r,t,()=>{let o=e.get(Ga),s=o.add(),a=e.get(gE);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(jm,Vm);if(NN(c||Vm),!e.get(gz,!0))return Bm(n)?e.get(Gc):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Bm(n)){let u=e.get(Gc);return n.rootComponent!==void 0&&u.bootstrap(n.rootComponent),u}else return yz?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var yz;function _z(n,e,t){try{let r=t();return au(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var Gy=null;function bz(n=[],e){return Ur.create({name:e,providers:[{provide:dm,useValue:"platform"},{provide:EE,useValue:new Set([()=>Gy=null])},...n]})}function wz(n=[]){if(Gy)return Gy;let e=bz(n);return Gy=e,MN(),Cz(e),e}function Cz(n){let e=n.get(Py,null);Ir(n,()=>{e?.forEach(t=>t())})}function TE(){return!1}var Nd=(()=>{class n{static __NG_ELEMENT_ID__=Ez}return n})();function Ez(n){return Iz(Li(),Tn(),(n&16)===16)}function Iz(n,e,t){if(ru(n)&&!t){let r=Bs(n.index,e);return new ou(r,r)}else if(n.type&175){let r=e[Vs];return new ou(r,e)}return null}var IE=class{constructor(){}supports(e){return dE(e)}create(e){return new xE(e)}},xz=(n,e)=>e,xE=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||xz}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<BN(r,i,o)?t:r,a=BN(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,u=c-i;if(l!=u){for(let _=0;_<l;_++){let p=_<o.length?o[_]:o[_]=0,D=p+_;u<=D&&D<l&&(o[_]=p+1)}let m=s.previousIndex;o[m]=u-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!dE(e))throw new rt(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,CN(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new SE(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Yy),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Yy),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},SE=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},DE=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Yy=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new DE,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function BN(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function UN(){return new AE([new IE])}var AE=(()=>{class n{factories;static \u0275prov=yt({token:n,providedIn:"root",factory:UN});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=Le(n,{optional:!0,skipSelf:!0});return n.create(t,r||UN())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new rt(901,!1)}}return n})();function HN(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;Bn(8);try{let o=i?.injector??wz(r),s=[bE({}),{provide:Uc,useExisting:FN},TM,...t||[]],a=new Pm({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return vz({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Bn(9)}}function kd(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var KN=null;function $s(){return KN}function ME(n){KN??=n}var Um=class{},PE=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:()=>Le(YN),providedIn:"platform"})}return n})();var YN=(()=>{class n extends PE{_location;_history;_doc=Le(fi);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return $s().getBaseHref(this._doc)}onPopState(t){let r=$s().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=$s().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function QN(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function WN(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function uu(n){return n&&n[0]!=="?"?`?${n}`:n}var gf=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:()=>Le(JN),providedIn:"root"})}return n})(),ZN=new ht(""),JN=(()=>{class n extends gf{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Le(fi).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return QN(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+uu(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+uu(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+uu(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(Ot(PE),Ot(ZN,8))};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),vf=(()=>{class n{_subject=new Yr;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=Tz(WN(GN(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+uu(r))}normalize(t){return n.stripTrailingSlash(Dz(this._basePath,GN(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+uu(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+uu(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=uu;static joinWithSlash=QN;static stripTrailingSlash=WN;static \u0275fac=function(r){return new(r||n)(Ot(gf))};static \u0275prov=yt({token:n,factory:()=>Sz(),providedIn:"root"})}return n})();function Sz(){return new vf(Ot(gf))}function Dz(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function GN(n){return n.replace(/\/index.html$/,"")}function Tz(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Ki=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})(Ki||{}),Kn=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(Kn||{}),Fo=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})(Fo||{}),Qc={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function nk(n){return ls(n)[zr.LocaleId]}function rk(n,e,t){let r=ls(n),i=[r[zr.DayPeriodsFormat],r[zr.DayPeriodsStandalone]],o=qs(i,e);return qs(o,t)}function ik(n,e,t){let r=ls(n),i=[r[zr.DaysFormat],r[zr.DaysStandalone]],o=qs(i,e);return qs(o,t)}function ok(n,e,t){let r=ls(n),i=[r[zr.MonthsFormat],r[zr.MonthsStandalone]],o=qs(i,e);return qs(o,t)}function sk(n,e){let r=ls(n)[zr.Eras];return qs(r,e)}function zm(n,e){let t=ls(n);return qs(t[zr.DateFormat],e)}function $m(n,e){let t=ls(n);return qs(t[zr.TimeFormat],e)}function qm(n,e){let r=ls(n)[zr.DateTimeFormat];return qs(r,e)}function Hm(n,e){let t=ls(n),r=t[zr.NumberSymbols][e];if(typeof r>"u"){if(e===Qc.CurrencyDecimal)return t[zr.NumberSymbols][Qc.Decimal];if(e===Qc.CurrencyGroup)return t[zr.NumberSymbols][Qc.Group]}return r}function ak(n){if(!n[zr.ExtraData])throw new rt(2303,!1)}function ck(n){let e=ls(n);return ak(e),(e[zr.ExtraData][2]||[]).map(r=>typeof r=="string"?NE(r):[NE(r[0]),NE(r[1])])}function lk(n,e,t){let r=ls(n);ak(r);let i=[r[zr.ExtraData][0],r[zr.ExtraData][1]],o=qs(i,e)||[];return qs(o,t)||[]}function qs(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new rt(2304,!1)}function NE(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var Az=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Qy={},Mz=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function uk(n,e,t,r){let i=jz(n);e=Yc(t,e)||e;let s=[],a;for(;e;)if(a=Mz.exec(e),a){s=s.concat(a.slice(1));let u=s.pop();if(!u)break;e=u}else{s.push(e);break}let c=i.getTimezoneOffset();r&&(c=hk(r,c),i=Vz(i,r));let l="";return s.forEach(u=>{let m=Lz(u);l+=m?m(i,t,c):u==="''"?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function t_(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Yc(n,e){let t=nk(n);if(Qy[t]??={},Qy[t][e])return Qy[t][e];let r="";switch(e){case"shortDate":r=zm(n,Fo.Short);break;case"mediumDate":r=zm(n,Fo.Medium);break;case"longDate":r=zm(n,Fo.Long);break;case"fullDate":r=zm(n,Fo.Full);break;case"shortTime":r=$m(n,Fo.Short);break;case"mediumTime":r=$m(n,Fo.Medium);break;case"longTime":r=$m(n,Fo.Long);break;case"fullTime":r=$m(n,Fo.Full);break;case"short":let i=Yc(n,"shortTime"),o=Yc(n,"shortDate");r=Zy(qm(n,Fo.Short),[i,o]);break;case"medium":let s=Yc(n,"mediumTime"),a=Yc(n,"mediumDate");r=Zy(qm(n,Fo.Medium),[s,a]);break;case"long":let c=Yc(n,"longTime"),l=Yc(n,"longDate");r=Zy(qm(n,Fo.Long),[c,l]);break;case"full":let u=Yc(n,"fullTime"),m=Yc(n,"fullDate");r=Zy(qm(n,Fo.Full),[u,m]);break}return r&&(Qy[t][e]=r),r}function Zy(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function ma(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function Pz(n,e){return ma(n,3).substring(0,e)}function Jr(n,e,t=0,r=!1,i=!1){return function(o,s){let a=Nz(n,o);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return Pz(a,e);let c=Hm(s,Qc.MinusSign);return ma(a,e,c,r,i)}}function Nz(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new rt(2301,!1)}}function rr(n,e,t=Ki.Format,r=!1){return function(i,o){return kz(i,o,n,e,t,r)}}function kz(n,e,t,r,i,o){switch(t){case 2:return ok(e,i,r)[n.getMonth()];case 1:return ik(e,i,r)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(o){let l=ck(e),u=lk(e,i,r),m=l.findIndex(_=>{if(Array.isArray(_)){let[p,D]=_,k=s>=p.hours&&a>=p.minutes,L=s<D.hours||s===D.hours&&a<D.minutes;if(p.hours<D.hours){if(k&&L)return!0}else if(k||L)return!0}else if(_.hours===s&&_.minutes===a)return!0;return!1});if(m!==-1)return u[m]}return rk(e,i,r)[s<12?0:1];case 3:return sk(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new rt(2302,!1)}}function Jy(n){return function(e,t,r){let i=-1*r,o=Hm(t,Qc.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+ma(s,2,o)+ma(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+ma(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+ma(s,2,o)+":"+ma(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+ma(s,2,o)+":"+ma(Math.abs(i%60),2,o);default:throw new rt(2310,!1)}}}var Oz=0,e_=4;function Rz(n){let e=t_(n,Oz,1).getDay();return t_(n,0,1+(e<=e_?e_:e_+7)-e)}function dk(n){let e=n.getDay(),t=e===0?-3:e_-e;return t_(n.getFullYear(),n.getMonth(),n.getDate()+t)}function kE(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=dk(t),s=Rz(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return ma(i,n,Hm(r,Qc.MinusSign))}}function Xy(n,e=!1){return function(t,r){let o=dk(t).getFullYear();return ma(o,n,Hm(r,Qc.MinusSign),e)}}var OE={};function Lz(n){if(OE[n])return OE[n];let e;switch(n){case"G":case"GG":case"GGG":e=rr(3,Kn.Abbreviated);break;case"GGGG":e=rr(3,Kn.Wide);break;case"GGGGG":e=rr(3,Kn.Narrow);break;case"y":e=Jr(0,1,0,!1,!0);break;case"yy":e=Jr(0,2,0,!0,!0);break;case"yyy":e=Jr(0,3,0,!1,!0);break;case"yyyy":e=Jr(0,4,0,!1,!0);break;case"Y":e=Xy(1);break;case"YY":e=Xy(2,!0);break;case"YYY":e=Xy(3);break;case"YYYY":e=Xy(4);break;case"M":case"L":e=Jr(1,1,1);break;case"MM":case"LL":e=Jr(1,2,1);break;case"MMM":e=rr(2,Kn.Abbreviated);break;case"MMMM":e=rr(2,Kn.Wide);break;case"MMMMM":e=rr(2,Kn.Narrow);break;case"LLL":e=rr(2,Kn.Abbreviated,Ki.Standalone);break;case"LLLL":e=rr(2,Kn.Wide,Ki.Standalone);break;case"LLLLL":e=rr(2,Kn.Narrow,Ki.Standalone);break;case"w":e=kE(1);break;case"ww":e=kE(2);break;case"W":e=kE(1,!0);break;case"d":e=Jr(2,1);break;case"dd":e=Jr(2,2);break;case"c":case"cc":e=Jr(7,1);break;case"ccc":e=rr(1,Kn.Abbreviated,Ki.Standalone);break;case"cccc":e=rr(1,Kn.Wide,Ki.Standalone);break;case"ccccc":e=rr(1,Kn.Narrow,Ki.Standalone);break;case"cccccc":e=rr(1,Kn.Short,Ki.Standalone);break;case"E":case"EE":case"EEE":e=rr(1,Kn.Abbreviated);break;case"EEEE":e=rr(1,Kn.Wide);break;case"EEEEE":e=rr(1,Kn.Narrow);break;case"EEEEEE":e=rr(1,Kn.Short);break;case"a":case"aa":case"aaa":e=rr(0,Kn.Abbreviated);break;case"aaaa":e=rr(0,Kn.Wide);break;case"aaaaa":e=rr(0,Kn.Narrow);break;case"b":case"bb":case"bbb":e=rr(0,Kn.Abbreviated,Ki.Standalone,!0);break;case"bbbb":e=rr(0,Kn.Wide,Ki.Standalone,!0);break;case"bbbbb":e=rr(0,Kn.Narrow,Ki.Standalone,!0);break;case"B":case"BB":case"BBB":e=rr(0,Kn.Abbreviated,Ki.Format,!0);break;case"BBBB":e=rr(0,Kn.Wide,Ki.Format,!0);break;case"BBBBB":e=rr(0,Kn.Narrow,Ki.Format,!0);break;case"h":e=Jr(3,1,-12);break;case"hh":e=Jr(3,2,-12);break;case"H":e=Jr(3,1);break;case"HH":e=Jr(3,2);break;case"m":e=Jr(4,1);break;case"mm":e=Jr(4,2);break;case"s":e=Jr(5,1);break;case"ss":e=Jr(5,2);break;case"S":e=Jr(6,1);break;case"SS":e=Jr(6,2);break;case"SSS":e=Jr(6,3);break;case"Z":case"ZZ":case"ZZZ":e=Jy(0);break;case"ZZZZZ":e=Jy(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Jy(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=Jy(2);break;default:return null}return OE[n]=e,e}function hk(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function Fz(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function Vz(n,e,t){let i=n.getTimezoneOffset(),o=hk(e,i);return Fz(n,-1*(o-i))}function jz(n){if(XN(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return t_(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(Az))return Bz(r)}let e=new Date(n);if(!XN(e))throw new rt(2311,!1);return e}function Bz(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),l=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,c,l),e}function XN(n){return n instanceof Date&&!isNaN(n.valueOf())}var n_=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Nr=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new n_(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),ek(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);ek(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(Je(Ad),Je(Rm),Je(AE))};static \u0275dir=Un({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function ek(n,e){n.context.$implicit=e.item}var lr=(()=>{class n{_viewContainer;_context=new r_;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){tk(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){tk(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(Je(Ad),Je(Rm))};static \u0275dir=Un({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),r_=class{$implicit=null;ngIf=null};function tk(n,e){if(n&&!n.createEmbeddedView)throw new rt(2020,!1)}function Uz(n,e){return new rt(2100,!1)}var zz="mediumDate",fk=new ht(""),pk=new ht(""),Od=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??zz,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return uk(t,s,o||this.locale,a)}catch(s){throw Uz(n,s.message)}}static \u0275fac=function(r){return new(r||n)(Je(jm,16),Je(fk,24),Je(pk,24))};static \u0275pipe=hE({name:"date",type:n,pure:!0})}return n})();var ir=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Wc({type:n});static \u0275inj=za({})}return n})();function RE(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Wm=class{};var mk="browser";var Gm=class{_doc;constructor(e){this._doc=e}manager},i_=(()=>{class n extends Gm{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(Ot(fi))};static \u0275prov=yt({token:n,factory:n.\u0275fac})}return n})(),s_=new ht(""),BE=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(s=>{s.manager=this});let i=t.filter(s=>!(s instanceof i_));this._plugins=i.slice().reverse();let o=t.find(s=>s instanceof i_);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new rt(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(Ot(s_),Ot(Rn))};static \u0275prov=yt({token:n,factory:n.\u0275fac})}return n})(),LE="ng-app-id";function gk(n){for(let e of n)e.remove()}function vk(n,e){let t=e.createElement("style");return t.textContent=n,t}function $z(n,e,t,r){let i=n.head?.querySelectorAll(`style[${LE}="${e}"],link[${LE}="${e}"]`);if(i)for(let o of i)o.removeAttribute(LE),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function VE(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var UE=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,$z(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,vk);r?.forEach(i=>this.addUsage(i,this.external,VE))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(gk(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])gk(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,vk(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,VE(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(Ot(fi),Ot(My),Ot(Ny,8),Ot(Dd))};static \u0275prov=yt({token:n,factory:n.\u0275fac})}return n})(),FE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},zE=/%COMP%/g;var _k="%COMP%",qz=`_nghost-${_k}`,Hz=`_ngcontent-${_k}`,Wz=!0,Gz=new ht("",{providedIn:"root",factory:()=>Wz});function Kz(n){return Hz.replace(zE,n)}function Yz(n){return qz.replace(zE,n)}function bk(n,e){return e.map(t=>t.replace(zE,n))}var $E=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,c=null,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=c,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new Km(t,s,a,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof o_?i.applyToHost(t):i instanceof Ym&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,m=this.platformIsServer,_=this.tracingService;switch(r.encapsulation){case qc.Emulated:o=new o_(c,l,r,this.appId,u,s,a,m,_);break;case qc.ShadowDom:return new jE(c,l,t,r,s,a,this.nonce,m,_);default:o=new Ym(c,l,r,u,s,a,m,_);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(Ot(BE),Ot(UE),Ot(My),Ot(Gz),Ot(fi),Ot(Rn),Ot(Ny),Ot(Td,8))};static \u0275prov=yt({token:n,factory:n.\u0275fac})}return n})(),Km=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(FE[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(yk(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(yk(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new rt(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=FE[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=FE[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Ya.DashCase|Ya.Important)?e.style.setProperty(t,r,i&Ya.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Ya.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=$s().getGlobalEventTarget(this.doc,e),!e))throw new rt(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function yk(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var jE=class extends Km{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,c,l){super(e,o,s,c,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=i.styles;u=bk(i.id,u);for(let _ of u){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=_,this.shadowRoot.appendChild(p)}let m=i.getExternalStyles?.();if(m)for(let _ of m){let p=VE(_,o);a&&p.setAttribute("nonce",a),this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ym=class extends Km{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,c,l){super(e,o,s,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let u=r.styles;this.styles=l?bk(l,u):u,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&df.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},o_=class extends Ym{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,c,l){let u=i+"-"+r.id;super(e,t,r,o,s,a,c,l,u),this.contentAttr=Kz(u),this.hostAttr=Yz(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var a_=class n extends Um{supportsDOMEvents=!0;static makeCurrent(){ME(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=Qz();return t==null?null:Zz(t)}resetBaseElement(){Qm=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return RE(document.cookie,e)}},Qm=null;function Qz(){return Qm=Qm||document.head.querySelector("base"),Qm?Qm.getAttribute("href"):null}function Zz(n){return new URL(n,document.baseURI).pathname}var Jz=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac})}return n})(),wk=["alt","control","meta","shift"],Xz={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},e$={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Ck=(()=>{class n extends Gm{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>$s().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),wk.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=Xz[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),wk.forEach(s=>{if(s!==i){let a=e$[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(Ot(fi))};static \u0275prov=yt({token:n,factory:n.\u0275fac})}return n})();function qE(n,e,t){let r=Ie({rootComponent:n,platformRef:t?.platformRef},t$(e));return HN(r)}function t$(n){return{appProviders:[...s$,...n?.providers??[]],platformProviders:o$}}function n$(){a_.makeCurrent()}function r$(){return new ca}function i$(){return UC(document),document}var o$=[{provide:Dd,useValue:mk},{provide:Py,useValue:n$,multi:!0},{provide:fi,useFactory:i$}];var s$=[{provide:dm,useValue:"root"},{provide:ca,useFactory:r$},{provide:s_,useClass:i_,multi:!0,deps:[fi]},{provide:s_,useClass:Ck,multi:!0,deps:[fi]},$E,UE,BE,{provide:Id,useExisting:$E},{provide:Wm,useClass:Jz},[]];var Ek=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(Ot(fi))};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Yt="primary",dg=Symbol("RouteTitle"),YE=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Fd(n){return new YE(n)}function Pk(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function c$(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Za(n[t],e[t]))return!1;return!0}function Za(n,e){let t=n?QE(n):void 0,r=e?QE(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!Nk(n[i],e[i]))return!1;return!0}function QE(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Nk(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function kk(n){return n.length>0?n[n.length-1]:null}function Xc(n){return i2(n)?n:au(n)?Er(Promise.resolve(n)):qt(n)}var l$={exact:Rk,subset:Lk},Ok={exact:u$,subset:d$,ignored:()=>!0};function Ik(n,e,t){return l$[t.paths](n.root,e.root,t.matrixParams)&&Ok[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function u$(n,e){return Za(n,e)}function Rk(n,e,t){if(!Rd(n.segments,e.segments)||!u_(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!Rk(n.children[r],e.children[r],t))return!1;return!0}function d$(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Nk(n[t],e[t]))}function Lk(n,e,t){return Fk(n,e,e.segments,t)}function Fk(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Rd(i,t)||e.hasChildren()||!u_(i,t,r))}else if(n.segments.length===t.length){if(!Rd(n.segments,t)||!u_(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!Lk(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Rd(n.segments,i)||!u_(n.segments,i,r)||!n.children[Yt]?!1:Fk(n.children[Yt],e,o,r)}}function u_(n,e,t){return e.every((r,i)=>Ok[t](n[i].parameters,r.parameters))}var Xa=class{root;queryParams;fragment;_queryParamMap;constructor(e=new An([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Fd(this.queryParams),this._queryParamMap}toString(){return p$.serialize(this)}},An=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return d_(this)}},du=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Fd(this.parameters),this._parameterMap}toString(){return jk(this)}};function h$(n,e){return Rd(n,e)&&n.every((t,r)=>Za(t.parameters,e[r].parameters))}function Rd(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function f$(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Yt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Yt&&(t=t.concat(e(i,r)))}),t}var hg=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:()=>new Vd,providedIn:"root"})}return n})(),Vd=class{parse(e){let t=new JE(e);return new Xa(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Zm(e.root,!0)}`,r=v$(e.queryParams),i=typeof e.fragment=="string"?`#${m$(e.fragment)}`:"";return`${t}${r}${i}`}},p$=new Vd;function d_(n){return n.segments.map(e=>jk(e)).join("/")}function Zm(n,e){if(!n.hasChildren())return d_(n);if(e){let t=n.children[Yt]?Zm(n.children[Yt],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==Yt&&r.push(`${i}:${Zm(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=f$(n,(r,i)=>i===Yt?[Zm(n.children[Yt],!1)]:[`${i}:${Zm(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Yt]!=null?`${d_(n)}/${t[0]}`:`${d_(n)}/(${t.join("//")})`}}function Vk(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function c_(n){return Vk(n).replace(/%3B/gi,";")}function m$(n){return encodeURI(n)}function ZE(n){return Vk(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function h_(n){return decodeURIComponent(n)}function xk(n){return h_(n.replace(/\+/g,"%20"))}function jk(n){return`${ZE(n.path)}${g$(n.parameters)}`}function g$(n){return Object.entries(n).map(([e,t])=>`;${ZE(e)}=${ZE(t)}`).join("")}function v$(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${c_(t)}=${c_(i)}`).join("&"):`${c_(t)}=${c_(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var y$=/^[^\/()?;#]+/;function HE(n){let e=n.match(y$);return e?e[0]:""}var _$=/^[^\/()?;=#]+/;function b$(n){let e=n.match(_$);return e?e[0]:""}var w$=/^[^=?&#]+/;function C$(n){let e=n.match(w$);return e?e[0]:""}var E$=/^[^&#]+/;function I$(n){let e=n.match(E$);return e?e[0]:""}var JE=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new An([],{}):new An([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Yt]=new An(e,t)),r}parseSegment(){let e=HE(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new rt(4009,!1);return this.capture(e),new du(h_(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=b$(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=HE(this.remaining);i&&(r=i,this.capture(r))}e[h_(t)]=h_(r)}parseQueryParam(e){let t=C$(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=I$(this.remaining);s&&(r=s,this.capture(r))}let i=xk(t),o=xk(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=HE(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new rt(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Yt);let s=this.parseChildren();t[o??Yt]=Object.keys(s).length===1&&s[Yt]?s[Yt]:new An([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new rt(4011,!1)}};function Bk(n){return n.segments.length>0?new An([],{[Yt]:n}):n}function Uk(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=Uk(i);if(r===Yt&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new An(n.segments,e);return x$(t)}function x$(n){if(n.numberOfChildren===1&&n.children[Yt]){let e=n.children[Yt];return new An(n.segments.concat(e.segments),e.children)}return n}function hu(n){return n instanceof Xa}function zk(n,e,t=null,r=null){let i=$k(n);return qk(i,e,t,r)}function $k(n){let e;function t(o){let s={};for(let c of o.children){let l=t(c);s[c.outlet]=l}let a=new An(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=Bk(r);return e??i}function qk(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return WE(i,i,i,t,r);let o=S$(e);if(o.toRoot())return WE(i,i,new An([],{}),t,r);let s=D$(o,i,n),a=s.processChildren?Xm(s.segmentGroup,s.index,o.commands):Wk(s.segmentGroup,s.index,o.commands);return WE(i,s.segmentGroup,a,t,r)}function f_(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function ng(n){return typeof n=="object"&&n!=null&&n.outlets}function WE(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let s;n===e?s=t:s=Hk(n,e,t);let a=Bk(Uk(s));return new Xa(a,o,i)}function Hk(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=Hk(o,e,t)}),new An(n.segments,r)}var p_=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&f_(r[0]))throw new rt(4003,!1);let i=r.find(ng);if(i&&i!==kk(r))throw new rt(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function S$(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new p_(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new p_(t,e,r)}var bf=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function D$(n,e,t){if(n.isAbsolute)return new bf(e,!0,0);if(!t)return new bf(e,!1,NaN);if(t.parent===null)return new bf(t,!0,0);let r=f_(n.commands[0])?0:1,i=t.segments.length-1+r;return T$(t,i,n.numberOfDoubleDots)}function T$(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new rt(4005,!1);i=r.segments.length}return new bf(r,!1,i-o)}function A$(n){return ng(n[0])?n[0].outlets:{[Yt]:n}}function Wk(n,e,t){if(n??=new An([],{}),n.segments.length===0&&n.hasChildren())return Xm(n,e,t);let r=M$(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new An(n.segments.slice(0,r.pathIndex),{});return o.children[Yt]=new An(n.segments.slice(r.pathIndex),n.children),Xm(o,0,i)}else return r.match&&i.length===0?new An(n.segments,{}):r.match&&!n.hasChildren()?XE(n,e,t):r.match?Xm(n,0,i):XE(n,e,t)}function Xm(n,e,t){if(t.length===0)return new An(n.segments,{});{let r=A$(t),i={};if(Object.keys(r).some(o=>o!==Yt)&&n.children[Yt]&&n.numberOfChildren===1&&n.children[Yt].segments.length===0){let o=Xm(n.children[Yt],e,t);return new An(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=Wk(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new An(n.segments,i)}}function M$(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(ng(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!Dk(c,l,s))return o;r+=2}else{if(!Dk(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function XE(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(ng(o)){let c=P$(o.outlets);return new An(r,c)}if(i===0&&f_(t[0])){let c=n.segments[e];r.push(new du(c.path,Sk(t[0]))),i++;continue}let s=ng(o)?o.outlets[Yt]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&f_(a)?(r.push(new du(s,Sk(a))),i+=2):(r.push(new du(s,{})),i++)}return new An(r,{})}function P$(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=XE(new An([],{}),0,r))}),e}function Sk(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function Dk(n,e,t){return n==t.path&&Za(e,t.parameters)}var eg="imperative",gi=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(gi||{}),hs=class{id;url;constructor(e,t){this.id=e,this.url=t}},jd=class extends hs{type=gi.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ec=class extends hs{urlAfterRedirects;type=gi.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},vo=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(vo||{}),rg=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(rg||{}),Ja=class extends hs{reason;code;type=gi.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Zc=class extends hs{reason;code;type=gi.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Cf=class extends hs{error;target;type=gi.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},ig=class extends hs{urlAfterRedirects;state;type=gi.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},m_=class extends hs{urlAfterRedirects;state;type=gi.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},g_=class extends hs{urlAfterRedirects;state;shouldActivate;type=gi.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},v_=class extends hs{urlAfterRedirects;state;type=gi.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},y_=class extends hs{urlAfterRedirects;state;type=gi.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},__=class{route;type=gi.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},b_=class{route;type=gi.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},w_=class{snapshot;type=gi.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},C_=class{snapshot;type=gi.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},E_=class{snapshot;type=gi.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},I_=class{snapshot;type=gi.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var og=class{},Ef=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function N$(n){return!(n instanceof og)&&!(n instanceof Ef)}function k$(n,e){return n.providers&&!n._injector&&(n._injector=Fm(n.providers,e,`Route: ${n.path}`)),n._injector??e}function ga(n){return n.outlet||Yt}function O$(n,e){let t=n.filter(r=>ga(r)===e);return t.push(...n.filter(r=>ga(r)!==e)),t}function Sf(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var x_=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Sf(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Df(this.rootInjector)}},Df=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new x_(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(Ot(hr))};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),S_=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=eI(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=eI(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=tI(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return tI(e,this._root).map(t=>t.value)}};function eI(n,e){if(n===e.value)return e;for(let t of e.children){let r=eI(n,t);if(r)return r}return null}function tI(n,e){if(n===e.value)return[e];for(let t of e.children){let r=tI(n,t);if(r.length)return r.unshift(e),r}return[]}var ds=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function _f(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var sg=class extends S_{snapshot;constructor(e,t){super(e),this.snapshot=t,lI(this,e)}toString(){return this.snapshot.toString()}};function Gk(n){let e=R$(n),t=new Pi([new du("",{})]),r=new Pi({}),i=new Pi({}),o=new Pi({}),s=new Pi(""),a=new Jc(t,r,o,s,i,Yt,n,e.root);return a.snapshot=e.root,new sg(new ds(a,[]),e)}function R$(n){let e={},t={},r={},o=new Ld([],e,r,"",t,Yt,n,null,{});return new ag("",new ds(o,[]))}var Jc=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(vn(l=>l[dg]))??qt(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(vn(e=>Fd(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(vn(e=>Fd(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function D_(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:Ie(Ie({},e.params),n.params),data:Ie(Ie({},e.data),n.data),resolve:Ie(Ie(Ie(Ie({},n.data),e.data),i?.data),n._resolvedData)}:r={params:Ie({},n.params),data:Ie({},n.data),resolve:Ie(Ie({},n.data),n._resolvedData??{})},i&&Yk(i)&&(r.resolve[dg]=i.title),r}var Ld=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[dg]}constructor(e,t,r,i,o,s,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Fd(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Fd(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},ag=class extends S_{url;constructor(e,t){super(t),this.url=e,lI(this,t)}toString(){return Kk(this._root)}};function lI(n,e){e.value._routerState=n,e.children.forEach(t=>lI(n,t))}function Kk(n){let e=n.children.length>0?` { ${n.children.map(Kk).join(", ")} } `:"";return`${n.value}${e}`}function GE(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Za(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Za(e.params,t.params)||n.paramsSubject.next(t.params),c$(e.url,t.url)||n.urlSubject.next(t.url),Za(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function nI(n,e){let t=Za(n.params,e.params)&&h$(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||nI(n.parent,e.parent))}function Yk(n){return typeof n.title=="string"||n.title===null}var Qk=new ht(""),fg=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Yt;activateEvents=new Zr;deactivateEvents=new Zr;attachEvents=new Zr;detachEvents=new Zr;routerOutletData=qN();parentContexts=Le(Df);location=Le(Ad);changeDetector=Le(Nd);inputBinder=Le(P_,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new rt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new rt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new rt(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new rt(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new rI(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Un({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Hc]})}return n})(),rI=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Jc?this.route:e===Df?this.childContexts:e===Qk?this.outletData:this.parent.get(e,t)}},P_=new ht("");var uI=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Jn({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Fi(0,"router-outlet")},dependencies:[fg],encapsulation:2})}return n})();function dI(n){let e=n.children&&n.children.map(dI),t=e?ft(Ie({},n),{children:e}):Ie({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Yt&&(t.component=uI),t}function L$(n,e,t){let r=cg(n,e._root,t?t._root:void 0);return new sg(r,e)}function cg(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=F$(n,e,t);return new ds(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>cg(n,a)),s}}let r=V$(e.value),i=e.children.map(o=>cg(n,o));return new ds(r,i)}}function F$(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return cg(n,r,i);return cg(n,r)})}function V$(n){return new Jc(new Pi(n.url),new Pi(n.params),new Pi(n.queryParams),new Pi(n.fragment),new Pi(n.data),n.outlet,n.component,n)}var If=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},Zk="ngNavigationCancelingError";function T_(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=hu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Jk(!1,vo.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function Jk(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[Zk]=!0,t.cancellationCode=e,t}function j$(n){return Xk(n)&&hu(n.url)}function Xk(n){return!!n&&n[Zk]}var B$=(n,e,t,r)=>vn(i=>(new iI(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),iI=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),GE(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=_f(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=_f(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=_f(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=_f(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new I_(o.value.snapshot))}),e.children.length&&this.forwardEvent(new C_(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(GE(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),GE(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},A_=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},wf=class{component;route;constructor(e,t){this.component=e,this.route=t}};function U$(n,e,t){let r=n._root,i=e?e._root:null;return Jm(r,i,t,[r.value])}function z$(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Tf(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!I2(n)?n:e.get(n):r}function Jm(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=_f(e);return n.children.forEach(s=>{$$(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>tg(a,t.getContext(s),i)),i}function $$(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=q$(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new A_(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Jm(n,e,a?a.children:null,r,i):Jm(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new wf(a.outlet.component,s))}else s&&tg(e,a,i),i.canActivateChecks.push(new A_(r)),o.component?Jm(n,null,a?a.children:null,r,i):Jm(n,null,t,r,i);return i}function q$(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Rd(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Rd(n.url,e.url)||!Za(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!nI(n,e)||!Za(n.queryParams,e.queryParams);case"paramsChange":default:return!nI(n,e)}}function tg(n,e,t){let r=_f(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?tg(s,e.children.getContext(o),t):tg(s,null,t):tg(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new wf(e.outlet.component,i)):t.canDeactivateChecks.push(new wf(null,i)):t.canDeactivateChecks.push(new wf(null,i))}function pg(n){return typeof n=="function"}function H$(n){return typeof n=="boolean"}function W$(n){return n&&pg(n.canLoad)}function G$(n){return n&&pg(n.canActivate)}function K$(n){return n&&pg(n.canActivateChild)}function Y$(n){return n&&pg(n.canDeactivate)}function Q$(n){return n&&pg(n.canMatch)}function eO(n){return n instanceof aa||n?.name==="EmptyError"}var l_=Symbol("INITIAL_VALUE");function xf(){return Po(n=>Lv(n.map(e=>e.pipe(Rs(1),c2(l_)))).pipe(vn(e=>{for(let t of e)if(t!==!0){if(t===l_)return l_;if(t===!1||Z$(t))return t}return!0}),Os(e=>e!==l_),Rs(1)))}function Z$(n){return hu(n)||n instanceof If}function J$(n,e){return li(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?qt(ft(Ie({},t),{guardsResult:!0})):X$(s,r,i,n).pipe(li(a=>a&&H$(a)?eq(r,o,n,e):qt(a)),vn(a=>ft(Ie({},t),{guardsResult:a})))})}function X$(n,e,t,r){return Er(n).pipe(li(i=>oq(i.component,i.route,t,e,r)),Vc(i=>i!==!0,!0))}function eq(n,e,t,r){return Er(e).pipe(Yh(i=>Kh(nq(i.route.parent,r),tq(i.route,r),iq(n,i.path,t),rq(n,i.route,t))),Vc(i=>i!==!0,!0))}function tq(n,e){return n!==null&&e&&e(new E_(n)),qt(!0)}function nq(n,e){return n!==null&&e&&e(new w_(n)),qt(!0)}function rq(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return qt(!0);let i=r.map(o=>im(()=>{let s=Sf(e)??t,a=Tf(o,s),c=G$(a)?a.canActivate(e,n):Ir(s,()=>a(e,n));return Xc(c).pipe(Vc())}));return qt(i).pipe(xf())}function iq(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>z$(s)).filter(s=>s!==null).map(s=>im(()=>{let a=s.guards.map(c=>{let l=Sf(s.node)??t,u=Tf(c,l),m=K$(u)?u.canActivateChild(r,n):Ir(l,()=>u(r,n));return Xc(m).pipe(Vc())});return qt(a).pipe(xf())}));return qt(o).pipe(xf())}function oq(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return qt(!0);let s=o.map(a=>{let c=Sf(e)??i,l=Tf(a,c),u=Y$(l)?l.canDeactivate(n,e,t,r):Ir(c,()=>l(n,e,t,r));return Xc(u).pipe(Vc())});return qt(s).pipe(xf())}function sq(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return qt(!0);let o=i.map(s=>{let a=Tf(s,n),c=W$(a)?a.canLoad(e,t):Ir(n,()=>a(e,t));return Xc(c)});return qt(o).pipe(xf(),tO(r))}function tO(n){return Qw(hi(e=>{if(typeof e!="boolean")throw T_(n,e)}),vn(e=>e===!0))}function aq(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return qt(!0);let o=i.map(s=>{let a=Tf(s,n),c=Q$(a)?a.canMatch(e,t):Ir(n,()=>a(e,t));return Xc(c)});return qt(o).pipe(xf(),tO(r))}var lg=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},ug=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function yf(n){return Gh(new lg(n))}function cq(n){return Gh(new rt(4e3,!1))}function lq(n){return Gh(Jk(!1,vo.GuardRejected))}var oI=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return qt(r);if(i.numberOfChildren>1||!i.children[Yt])return cq(`${e.redirectTo}`);i=i.children[Yt]}}applyRedirectCommands(e,t,r,i,o){return uq(t,i,o).pipe(vn(s=>{if(s instanceof Xa)throw new ug(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new ug(a);return a}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Xa(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new An(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new rt(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function uq(n,e,t){if(typeof n=="string")return qt(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:l,data:u,title:m}=e;return Xc(Ir(t,()=>r({params:l,data:u,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:m})))}var sI={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function dq(n,e,t,r,i){let o=nO(n,e,t);return o.matched?(r=k$(e,r),aq(r,e,t,i).pipe(vn(s=>s===!0?o:Ie({},sI)))):qt(o)}function nO(n,e,t){if(e.path==="**")return hq(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?Ie({},sI):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Pk)(t,n,e);if(!i)return Ie({},sI);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?Ie(Ie({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function hq(n){return{matched:!0,parameters:n.length>0?kk(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function Tk(n,e,t,r){return t.length>0&&mq(n,t,r)?{segmentGroup:new An(e,pq(r,new An(t,n.children))),slicedSegments:[]}:t.length===0&&gq(n,t,r)?{segmentGroup:new An(n.segments,fq(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new An(n.segments,n.children),slicedSegments:t}}function fq(n,e,t,r){let i={};for(let o of t)if(N_(n,e,o)&&!r[ga(o)]){let s=new An([],{});i[ga(o)]=s}return Ie(Ie({},r),i)}function pq(n,e){let t={};t[Yt]=e;for(let r of n)if(r.path===""&&ga(r)!==Yt){let i=new An([],{});t[ga(r)]=i}return t}function mq(n,e,t){return t.some(r=>N_(n,e,r)&&ga(r)!==Yt)}function gq(n,e,t){return t.some(r=>N_(n,e,r))}function N_(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function vq(n,e,t){return e.length===0&&!n.children[t]}var aI=class{};function yq(n,e,t,r,i,o,s="emptyOnly"){return new cI(n,e,t,r,i,s,o).recognize()}var _q=31,cI=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new oI(this.urlSerializer,this.urlTree)}noMatchError(e){return new rt(4002,`'${e.segmentGroup}'`)}recognize(){let e=Tk(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(vn(({children:t,rootSnapshot:r})=>{let i=new ds(r,t),o=new ag("",i),s=zk(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Ld([],Object.freeze({}),Object.freeze(Ie({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Yt,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Yt,t).pipe(vn(r=>({children:r,rootSnapshot:t})),Yl(r=>{if(r instanceof ug)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof lg?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(vn(s=>s instanceof ds?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Er(o).pipe(Yh(s=>{let a=r.children[s],c=O$(t,s);return this.processSegmentGroup(e,c,a,s,i)}),a2((s,a)=>(s.push(...a),s)),Ql(null),s2(),li(s=>{if(s===null)return yf(r);let a=rO(s);return bq(a),qt(a)}))}processSegment(e,t,r,i,o,s,a){return Er(t).pipe(Yh(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(Yl(l=>{if(l instanceof lg)return qt(null);throw l}))),Vc(c=>!!c),Yl(c=>{if(eO(c))return vq(r,i,o)?qt(new aI):yf(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return ga(r)!==s&&(s===Yt||!N_(i,o,r))?yf(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):yf(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:m,remainingSegments:_}=nO(t,i,o);if(!c)return yf(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>_q&&(this.allowRedirects=!1));let p=new Ld(o,l,Object.freeze(Ie({},this.urlTree.queryParams)),this.urlTree.fragment,Ak(i),ga(i),i.component??i._loadedComponent??null,i,Mk(i)),D=D_(p,a,this.paramsInheritanceStrategy);return p.params=Object.freeze(D.params),p.data=Object.freeze(D.data),this.applyRedirects.applyRedirectCommands(u,i.redirectTo,m,p,e).pipe(Po(L=>this.applyRedirects.lineralizeSegments(i,L)),li(L=>this.processSegment(e,r,t,L.concat(_),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=dq(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Po(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Po(({routes:l})=>{let u=r._loadedInjector??e,{parameters:m,consumedSegments:_,remainingSegments:p}=c,D=new Ld(_,m,Object.freeze(Ie({},this.urlTree.queryParams)),this.urlTree.fragment,Ak(r),ga(r),r.component??r._loadedComponent??null,r,Mk(r)),k=D_(D,s,this.paramsInheritanceStrategy);D.params=Object.freeze(k.params),D.data=Object.freeze(k.data);let{segmentGroup:L,slicedSegments:R}=Tk(t,_,p,l);if(R.length===0&&L.hasChildren())return this.processChildren(u,l,L,D).pipe(vn(ee=>new ds(D,ee)));if(l.length===0&&R.length===0)return qt(new ds(D,[]));let X=ga(r)===o;return this.processSegment(u,l,L,R,X?Yt:o,!0,D).pipe(vn(ee=>new ds(D,ee instanceof ds?[ee]:[])))}))):yf(t)))}getChildConfig(e,t,r){return t.children?qt({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?qt({routes:t._loadedRoutes,injector:t._loadedInjector}):sq(e,t,r,this.urlSerializer).pipe(li(i=>i?this.configLoader.loadChildren(e,t).pipe(hi(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):lq(t))):qt({routes:[],injector:e})}};function bq(n){n.sort((e,t)=>e.value.outlet===Yt?-1:t.value.outlet===Yt?1:e.value.outlet.localeCompare(t.value.outlet))}function wq(n){let e=n.value.routeConfig;return e&&e.path===""}function rO(n){let e=[],t=new Set;for(let r of n){if(!wq(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=rO(r.children);e.push(new ds(r.value,i))}return e.filter(r=>!t.has(r))}function Ak(n){return n.data||{}}function Mk(n){return n.resolve||{}}function Cq(n,e,t,r,i,o){return li(s=>yq(n,e,t,r,s.extractedUrl,i,o).pipe(vn(({state:a,tree:c})=>ft(Ie({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function Eq(n,e){return li(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return qt(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of iO(c))s.add(l);let a=0;return Er(s).pipe(Yh(c=>o.has(c)?Iq(c,r,n,e):(c.data=D_(c,c.parent,n).resolve,qt(void 0))),hi(()=>a++),Qh(1),li(c=>a===s.size?qt(t):Ao))})}function iO(n){let e=n.children.map(t=>iO(t)).flat();return[n,...e]}function Iq(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!Yk(i)&&(o[dg]=i.title),im(()=>(n.data=D_(n,n.parent,t).resolve,xq(o,n,e,r).pipe(vn(s=>(n._resolvedData=s,n.data=Ie(Ie({},n.data),s),null)))))}function xq(n,e,t,r){let i=QE(n);if(i.length===0)return qt({});let o={};return Er(i).pipe(li(s=>Sq(n[s],e,t,r).pipe(Vc(),hi(a=>{if(a instanceof If)throw T_(new Vd,a);o[s]=a}))),Qh(1),vn(()=>o),Yl(s=>eO(s)?Ao:Gh(s)))}function Sq(n,e,t,r){let i=Sf(e)??r,o=Tf(n,i),s=o.resolve?o.resolve(e,t):Ir(i,()=>o(e,t));return Xc(s)}function KE(n){return Po(e=>{let t=n(e);return t?Er(t).pipe(vn(()=>e)):qt(e)})}var hI=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Yt);return r}getResolvedTitleForRoute(t){return t.data[dg]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:()=>Le(oO),providedIn:"root"})}return n})(),oO=(()=>{class n extends hI{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(Ot(Ek))};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Af=new ht("",{providedIn:"root",factory:()=>({})}),mg=new ht(""),sO=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=Le(_E);loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return qt(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Xc(Ir(t,()=>r.loadComponent())).pipe(vn(cO),Po(lO),hi(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),om(()=>{this.componentLoaders.delete(r)})),o=new $h(i,()=>new Yr).pipe(zh());return this.componentLoaders.set(r,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return qt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=aO(r,this.compiler,t,this.onLoadEndListener).pipe(om(()=>{this.childrenLoaders.delete(r)})),s=new $h(o,()=>new Yr).pipe(zh());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function aO(n,e,t,r){return Xc(Ir(t,()=>n.loadChildren())).pipe(vn(cO),Po(lO),li(i=>i instanceof Uy||Array.isArray(i)?qt(i):Er(e.compileModuleAsync(i))),vn(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(mg,[],{optional:!0,self:!0}).flat()),{routes:s.map(dI),injector:o}}))}function Dq(n){return n&&typeof n=="object"&&"default"in n}function cO(n){return Dq(n)?n.default:n}function lO(n){return qt(n)}var k_=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:()=>Le(Tq),providedIn:"root"})}return n})(),Tq=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),uO=new ht("");var dO=new ht(""),hO=(()=>{class n{currentNavigation=Us(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new Yr;transitionAbortWithErrorSubject=new Yr;configLoader=Le(sO);environmentInjector=Le(hr);destroyRef=Le(ha);urlSerializer=Le(hg);rootContexts=Le(Df);location=Le(vf);inputBindingEnabled=Le(P_,{optional:!0})!==null;titleStrategy=Le(hI);options=Le(Af,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=Le(k_);createViewTransition=Le(uO,{optional:!0});navigationErrorHandler=Le(dO,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>qt(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new __(i)),r=i=>this.events.next(new b_(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;mi(()=>{this.transitions?.next(ft(Ie({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(t){return this.transitions=new Pi(null),this.transitions.pipe(Os(r=>r!==null),Po(r=>{let i=!1;return qt(r).pipe(Po(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",vo.SupersededByNewNavigation),Ao;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?ft(Ie({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new Zc(o.id,this.urlSerializer.serialize(o.rawUrl),"",rg.IgnoredSameUrlNavigation)),o.resolve(!1),Ao;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return qt(o).pipe(Po(c=>(this.events.next(new jd(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?Ao:Promise.resolve(c))),Cq(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),hi(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation.update(u=>(u.finalUrl=c.urlAfterRedirects,u));let l=new ig(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:c,extractedUrl:l,source:u,restoredState:m,extras:_}=o,p=new jd(c,this.urlSerializer.serialize(l),u,m);this.events.next(p);let D=Gk(this.rootComponentType).snapshot;return this.currentTransition=r=ft(Ie({},o),{targetSnapshot:D,urlAfterRedirects:l,extras:ft(Ie({},_),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(k=>(k.finalUrl=l,k)),qt(r)}else return this.events.next(new Zc(o.id,this.urlSerializer.serialize(o.extractedUrl),"",rg.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Ao}),hi(o=>{let s=new m_(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),vn(o=>(this.currentTransition=r=ft(Ie({},o),{guards:U$(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),J$(this.environmentInjector,o=>this.events.next(o)),hi(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw T_(this.urlSerializer,o.guardsResult);let s=new g_(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),Os(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",vo.GuardRejected),!1)),KE(o=>{if(o.guards.canActivateChecks.length!==0)return qt(o).pipe(hi(s=>{let a=new v_(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Po(s=>{let a=!1;return qt(s).pipe(Eq(this.paramsInheritanceStrategy,this.environmentInjector),hi({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",vo.NoDataFromResolver)}}))}),hi(s=>{let a=new y_(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),KE(o=>{let s=a=>{let c=[];if(a.routeConfig?.loadComponent){let l=Sf(a)??this.environmentInjector;c.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(hi(u=>{a.component=u}),vn(()=>{})))}for(let l of a.children)c.push(...s(l));return c};return Lv(s(o.targetSnapshot.root)).pipe(Ql(null),Rs(1))}),KE(()=>this.afterPreactivation()),Po(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?Er(a).pipe(vn(()=>r)):qt(r)}),vn(o=>{let s=L$(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=ft(Ie({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),hi(()=>{this.events.next(new og)}),B$(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Rs(1),Vv(new on(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(Os(()=>!i&&!r.targetRouterState),hi(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",vo.Aborted)}))),hi({next:o=>{i=!0,this.lastSuccessfulNavigation=mi(this.currentNavigation),this.events.next(new ec(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Vv(this.transitionAbortWithErrorSubject.pipe(hi(o=>{throw o}))),om(()=>{i||this.cancelNavigationTransition(r,"",vo.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Yl(o=>{if(this.destroyed)return r.resolve(!1),Ao;if(i=!0,Xk(o))this.events.next(new Ja(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),j$(o)?this.events.next(new Ef(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new Cf(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=Ir(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof If){let{message:c,cancellationCode:l}=T_(this.urlSerializer,a);this.events.next(new Ja(r.id,this.urlSerializer.serialize(r.extractedUrl),c,l)),this.events.next(new Ef(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return Ao}))}))}cancelNavigationTransition(t,r,i){let o=new Ja(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=mi(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Aq(n){return n!==eg}var fO=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:()=>Le(Mq),providedIn:"root"})}return n})(),M_=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},Mq=(()=>{class n extends M_{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Oo(n)))(i||n)}})();static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pO=(()=>{class n{urlSerializer=Le(hg);options=Le(Af,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=Le(vf);urlHandlingStrategy=Le(k_);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Xa;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof Xa?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=Gk(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:()=>Le(Pq),providedIn:"root"})}return n})(),Pq=(()=>{class n extends pO{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof jd?this.updateStateMemento():t instanceof Zc?this.commitTransition(r):t instanceof ig?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof og?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Ja&&t.code!==vo.SupersededByNewNavigation&&t.code!==vo.Redirect?this.restoreHistory(r):t instanceof Cf?this.restoreHistory(r,!0):t instanceof ec&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,c=Ie(Ie({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=Ie(Ie({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Oo(n)))(i||n)}})();static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function fI(n,e){n.events.pipe(Os(t=>t instanceof ec||t instanceof Ja||t instanceof Cf||t instanceof Zc),vn(t=>t instanceof ec||t instanceof Zc?0:(t instanceof Ja?t.code===vo.Redirect||t.code===vo.SupersededByNewNavigation:!1)?2:1),Os(t=>t!==2),Rs(1)).subscribe(()=>{e()})}var Nq={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},kq={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Hs=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=Le(fE);stateManager=Le(pO);options=Le(Af,{optional:!0})||{};pendingTasks=Le(Ga);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=Le(hO);urlSerializer=Le(hg);location=Le(vf);urlHandlingStrategy=Le(k_);injector=Le(hr);_events=new Yr;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=Le(fO);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=Le(mg,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!Le(P_,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Pr;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=mi(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Ja&&r.code!==vo.Redirect&&r.code!==vo.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof ec)this.navigated=!0;else if(r instanceof Ef){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=Ie({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Aq(i.source)},s);this.scheduleNavigation(a,eg,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}N$(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),eg,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=Ie({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get(mo)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return mi(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(dI),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=Ie(Ie({},this.currentUrlTree.queryParams),o);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}u!==null&&(u=this.removeEmptyProps(u));let m;try{let _=i?i.snapshot:this.routerState.snapshot.root;m=$k(_)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),m=this.currentUrlTree.root}return qk(m,t,u,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=hu(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,eg,null,r)}navigate(t,r={skipLocationChange:!1}){return Oq(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(Jh(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=Ie({},Nq):r===!1?i=Ie({},kq):i=r,hu(t))return Ik(this.currentUrlTree,t,i);let o=this.parseUrl(t);return Ik(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((m,_)=>{a=m,c=_});let u=this.pendingTasks.add();return fI(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(m=>Promise.reject(m))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Oq(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new rt(4008,!1)}var O_=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Us(null);get href(){return mi(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Yr;applicationErrorHandler=Le(mo);options=Le(Af,{optional:!0});constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(Le(new Ky("href"),{optional:!0}));let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof ec&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(hu(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:hu(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(Je(Hs),Je(Jc),km("tabindex"),Je(Qa),Je(pa),Je(gf))};static \u0275dir=Un({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&me("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Kc("href",i.reactiveHref(),HC)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",kd],skipLocationChange:[2,"skipLocationChange","skipLocationChange",kd],replaceUrl:[2,"replaceUrl","replaceUrl",kd],routerLink:"routerLink"},features:[Hc]})}return n})();var Lq=new ht("");function pI(n,...e){return ss([{provide:mg,multi:!0,useValue:n},[],{provide:Jc,useFactory:Fq,deps:[Hs]},{provide:zy,multi:!0,useFactory:Vq},e.map(t=>t.\u0275providers)])}function Fq(n){return n.routerState.root}function Vq(){let n=Le(Ur);return e=>{let t=n.get(Gc);if(e!==t.components[0])return;let r=n.get(Hs),i=n.get(jq);n.get(Bq)===1&&r.initialNavigation(),n.get(Uq,null,{optional:!0})?.setUpPreloading(),n.get(Lq,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var jq=new ht("",{factory:()=>new Yr}),Bq=new ht("",{providedIn:"root",factory:()=>1});var Uq=new ht("");var gO=()=>{};var _O=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},zq=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},R_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,c=i+2<n.length,l=c?n[i+2]:0,u=o>>2,m=(o&3)<<4|a>>4,_=(a&15)<<2|l>>6,p=l&63;c||(p=64,s||(_=64)),r.push(t[u],t[m],t[_],t[p])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(_O(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):zq(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let m=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||m==null)throw new gI;let _=o<<2|a>>4;if(r.push(_),l!==64){let p=a<<4&240|l>>2;if(r.push(p),m!==64){let D=l<<6&192|m;r.push(D)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},gI=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},$q=function(n){let e=_O(n);return R_.encodeByteArray(e,!0)},vg=function(n){return $q(n).replace(/\./g,"")},L_=function(n){try{return R_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function yI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var qq=()=>yI().__FIREBASE_DEFAULTS__,Hq=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Wq=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&L_(n[1]);return e&&JSON.parse(e)},F_=()=>{try{return gO()||qq()||Hq()||Wq()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},_I=n=>{var e,t;return(t=(e=F_())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},bO=n=>{let e=_I(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},bI=()=>{var n;return(n=F_())===null||n===void 0?void 0:n.config},wI=n=>{var e;return(e=F_())===null||e===void 0?void 0:e[`_${n}`]};var Bd=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function fu(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function V_(n){return F(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function wO(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[vg(JSON.stringify(t)),vg(JSON.stringify(s)),""].join(".")}var gg={};function Gq(){let n={prod:[],emulator:[]};for(let e of Object.keys(gg))gg[e]?n.emulator.push(e):n.prod.push(e);return n}function Kq(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var vO=!1;function j_(n,e){if(typeof window>"u"||typeof document>"u"||!fu(window.location.host)||gg[n]===e||gg[n]||vO)return;gg[n]=e;function t(_){return`__firebase__banner__${_}`}let r="__firebase__banner",o=Gq().prod.length>0;function s(){let _=document.getElementById(r);_&&_.remove()}function a(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function c(_,p){_.setAttribute("width","24"),_.setAttribute("id",p),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function l(){let _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{vO=!0,s()},_}function u(_,p){_.setAttribute("id",p),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function m(){let _=Kq(r),p=t("text"),D=document.getElementById(p)||document.createElement("span"),k=t("learnmore"),L=document.getElementById(k)||document.createElement("a"),R=t("preprendIcon"),X=document.getElementById(R)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){let ee=_.element;a(ee),u(L,k);let J=l();c(X,R),ee.append(X,D,L,J),document.body.appendChild(ee)}o?(D.innerText="Preview backend disconnected.",X.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(X.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}function vi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function CO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vi())}function Yq(){var n;let e=(n=F_())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function EO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function IO(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function xO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function SO(){let n=vi();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function DO(){return!Yq()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yg(){try{return typeof indexedDB=="object"}catch{return!1}}function TO(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var Qq="FirebaseError",fs=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Qq,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,va.prototype.create)}},va=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?Zq(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new fs(i,a,r)}};function Zq(n,e){return n.replace(Jq,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var Jq=/\{\$([^}]+)}/g;function AO(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function tc(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(yO(o)&&yO(s)){if(!tc(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function yO(n){return n!==null&&typeof n=="object"}function _g(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Mf(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Pf(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function MO(n,e){let t=new vI(n,e);return t.subscribe.bind(t)}var vI=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Xq(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=mI),i.error===void 0&&(i.error=mI),i.complete===void 0&&(i.complete=mI);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Xq(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function mI(){}var Jbe=14400*1e3;function $r(n){return n&&n._delegate?n._delegate:n}var yo=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ud="[DEFAULT]";var CI=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Bd;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(tH(e))try{this.getOrInitializeService({instanceIdentifier:Ud})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Ud){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return F(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Ud){return this.instances.has(e)}getOptions(e=Ud){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:eH(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ud){return this.component?this.component.multipleInstances?e:Ud:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function eH(n){return n===Ud?void 0:n}function tH(n){return n.instantiationMode==="EAGER"}var B_=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new CI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var nH=[],fn=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(fn||{}),rH={debug:fn.DEBUG,verbose:fn.VERBOSE,info:fn.INFO,warn:fn.WARN,error:fn.ERROR,silent:fn.SILENT},iH=fn.INFO,oH={[fn.DEBUG]:"log",[fn.VERBOSE]:"log",[fn.INFO]:"info",[fn.WARN]:"warn",[fn.ERROR]:"error"},sH=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=oH[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},nc=class{constructor(e){this.name=e,this._logLevel=iH,this._logHandler=sH,this._userLogHandler=null,nH.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in fn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?rH[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,fn.DEBUG,...e),this._logHandler(this,fn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,fn.VERBOSE,...e),this._logHandler(this,fn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,fn.INFO,...e),this._logHandler(this,fn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,fn.WARN,...e),this._logHandler(this,fn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,fn.ERROR,...e),this._logHandler(this,fn.ERROR,...e)}};var aH=(n,e)=>e.some(t=>n instanceof t),PO,NO;function cH(){return PO||(PO=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lH(){return NO||(NO=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var kO=new WeakMap,II=new WeakMap,OO=new WeakMap,EI=new WeakMap,SI=new WeakMap;function uH(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(rc(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&kO.set(t,n)}).catch(()=>{}),SI.set(e,n),e}function dH(n){if(II.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});II.set(n,e)}var xI={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return II.get(n);if(e==="objectStoreNames")return n.objectStoreNames||OO.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return rc(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function RO(n){xI=n(xI)}function hH(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(U_(this),e,...t);return OO.set(r,e.sort?e.sort():[e]),rc(r)}:lH().includes(n)?function(...e){return n.apply(U_(this),e),rc(kO.get(this))}:function(...e){return rc(n.apply(U_(this),e))}}function fH(n){return typeof n=="function"?hH(n):(n instanceof IDBTransaction&&dH(n),aH(n,cH())?new Proxy(n,xI):n)}function rc(n){if(n instanceof IDBRequest)return uH(n);if(EI.has(n))return EI.get(n);let e=fH(n);return e!==n&&(EI.set(n,e),SI.set(e,n)),e}var U_=n=>SI.get(n);function FO(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=rc(s);return r&&s.addEventListener("upgradeneeded",c=>{r(rc(s.result),c.oldVersion,c.newVersion,rc(s.transaction),c)}),t&&s.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var pH=["get","getKey","getAll","getAllKeys","count"],mH=["put","add","delete","clear"],DI=new Map;function LO(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(DI.get(e))return DI.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=mH.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||pH.includes(t)))return;let o=function(s,...a){return F(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&c.done]))[0]})};return DI.set(e,o),o}RO(n=>ft(Ie({},n),{get:(e,t,r)=>LO(e,t)||n.get(e,t,r),has:(e,t)=>!!LO(e,t)||n.has(e,t)}));var AI=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(gH(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function gH(n){let e=n.getComponent();return e?.type==="VERSION"}var MI="@firebase/app",VO="0.13.2";var el=new nc("@firebase/app"),vH="@firebase/app-compat",yH="@firebase/analytics-compat",_H="@firebase/analytics",bH="@firebase/app-check-compat",wH="@firebase/app-check",CH="@firebase/auth",EH="@firebase/auth-compat",IH="@firebase/database",xH="@firebase/data-connect",SH="@firebase/database-compat",DH="@firebase/functions",TH="@firebase/functions-compat",AH="@firebase/installations",MH="@firebase/installations-compat",PH="@firebase/messaging",NH="@firebase/messaging-compat",kH="@firebase/performance",OH="@firebase/performance-compat",RH="@firebase/remote-config",LH="@firebase/remote-config-compat",FH="@firebase/storage",VH="@firebase/storage-compat",jH="@firebase/firestore",BH="@firebase/ai",UH="@firebase/firestore-compat",zH="firebase",$H="11.10.0";var PI="[DEFAULT]",qH={[MI]:"fire-core",[vH]:"fire-core-compat",[_H]:"fire-analytics",[yH]:"fire-analytics-compat",[wH]:"fire-app-check",[bH]:"fire-app-check-compat",[CH]:"fire-auth",[EH]:"fire-auth-compat",[IH]:"fire-rtdb",[xH]:"fire-data-connect",[SH]:"fire-rtdb-compat",[DH]:"fire-fn",[TH]:"fire-fn-compat",[AH]:"fire-iid",[MH]:"fire-iid-compat",[PH]:"fire-fcm",[NH]:"fire-fcm-compat",[kH]:"fire-perf",[OH]:"fire-perf-compat",[RH]:"fire-rc",[LH]:"fire-rc-compat",[FH]:"fire-gcs",[VH]:"fire-gcs-compat",[jH]:"fire-fst",[UH]:"fire-fst-compat",[BH]:"fire-vertex","fire-js":"fire-js",[zH]:"fire-js-all"};var bg=new Map,HH=new Map,NI=new Map;function jO(n,e){try{n.container.addComponent(e)}catch(t){el.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ya(n){let e=n.name;if(NI.has(e))return el.debug(`There were multiple attempts to register component ${e}.`),!1;NI.set(e,n);for(let t of bg.values())jO(t,n);for(let t of HH.values())jO(t,n);return!0}function Nf(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Vo(n){return n==null?!1:n.settings!==void 0}var WH={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},pu=new va("app","Firebase",WH);var kI=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new yo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw pu.create("app-deleted",{appName:this._name})}};var mu=$H;function LI(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:PI,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw pu.create("bad-app-name",{appName:String(i)});if(t||(t=bI()),!t)throw pu.create("no-options");let o=bg.get(i);if(o){if(tc(t,o.options)&&tc(r,o.config))return o;throw pu.create("duplicate-app",{appName:i})}let s=new B_(i);for(let c of NI.values())s.addComponent(c);let a=new kI(t,r,s);return bg.set(i,a),a}function zd(n=PI){let e=bg.get(n);if(!e&&n===PI&&bI())return LI();if(!e)throw pu.create("no-app",{appName:n});return e}function z_(){return Array.from(bg.values())}function kr(n,e,t){var r;let i=(r=qH[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),el.warn(a.join(" "));return}ya(new yo(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var GH="firebase-heartbeat-database",KH=1,wg="firebase-heartbeat-store",TI=null;function $O(){return TI||(TI=FO(GH,KH,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(wg)}catch(t){console.warn(t)}}}}).catch(n=>{throw pu.create("idb-open",{originalErrorMessage:n.message})})),TI}function YH(n){return F(this,null,function*(){try{let t=(yield $O()).transaction(wg),r=yield t.objectStore(wg).get(qO(n));return yield t.done,r}catch(e){if(e instanceof fs)el.warn(e.message);else{let t=pu.create("idb-get",{originalErrorMessage:e?.message});el.warn(t.message)}}})}function BO(n,e){return F(this,null,function*(){try{let r=(yield $O()).transaction(wg,"readwrite");yield r.objectStore(wg).put(e,qO(n)),yield r.done}catch(t){if(t instanceof fs)el.warn(t.message);else{let r=pu.create("idb-set",{originalErrorMessage:t?.message});el.warn(r.message)}}})}function qO(n){return`${n.name}!${n.options.appId}`}var QH=1024,ZH=30,OI=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new RI(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return F(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=UO();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>ZH){let s=XH(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){el.warn(r)}})}getHeartbeatsHeader(){return F(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=UO(),{heartbeatsToSend:r,unsentEntries:i}=JH(this._heartbeatsCache.heartbeats),o=vg(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return el.warn(t),""}})}};function UO(){return new Date().toISOString().substring(0,10)}function JH(n,e=QH){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),zO(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),zO(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var RI=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return F(this,null,function*(){return yg()?TO().then(()=>!0).catch(()=>!1):!1})}read(){return F(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield YH(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return F(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return BO(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return F(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return BO(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function zO(n){return vg(JSON.stringify({version:2,heartbeats:n})).length}function XH(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function eW(n){ya(new yo("platform-logger",e=>new AI(e),"PRIVATE")),ya(new yo("heartbeat",e=>new OI(e),"PRIVATE")),kr(MI,VO,n),kr(MI,VO,"esm2017"),kr("fire-js","")}eW("");var tW="firebase",nW="11.10.0";kr(tW,nW,"app");function HO(n){n===void 0&&(n=Le(Ur));let e=n.get(af);return t=>new on(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:c=>{r.next(c),s()},complete:()=>{r.complete(),s()},error:c=>{r.error(c),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var gu=new dd("ANGULARFIRE2_VERSION");function Cg(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Of=(n,e)=>{let t=e?[e]:z_(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},kf=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(kf||{}),WO=TE()&&typeof Zone<"u"?kf.WARN:kf.SILENT;var $_=class{zone;delegate;constructor(e,t=n2){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},vu=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=Le(Rn);this.outsideAngular=t.runOutsideAngular(()=>new $_(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new $_(typeof Zone>"u"?void 0:Zone.current,t2))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),GO=!1;function rW(n,e){!GO&&(WO>kf.SILENT||TE())&&(GO=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),WO>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function iW(n){let e=Le(Rn,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function $d(n){let e=Le(Rn,{optional:!0});return e?e.run(()=>n()):n()}var oW=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),Ir(t,()=>$d(()=>n.apply(void 0,r)))),fr=(n,e,t)=>(t||=e?kf.WARN:kf.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=Le(vu),s=Le(af),a=Le(hr)}catch{return rW(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=$d(()=>s.add())),i[l]=oW(i[l],r,a));let c=iW(()=>n.apply(this,i));return e?c instanceof on?c.pipe(Kl(o.outsideAngular),Gl(o.insideAngular),HO(a)):c instanceof Promise?$d(()=>{let l=s.add();return new Promise((u,m)=>{c.then(_=>Ir(a,()=>$d(()=>u(_))),_=>Ir(a,()=>$d(()=>m(_)))).finally(l)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:$d(()=>c):c instanceof on?c.pipe(Kl(o.outsideAngular),Gl(o.insideAngular)):$d(()=>c)});var tl=class{constructor(e){return e}},qd=class{constructor(){return z_()}};function sW(n){return n&&n.length===1?n[0]:new tl(zd())}var FI=new ht("angularfire2._apps"),aW={provide:tl,useFactory:sW,deps:[[new cs,FI]]},cW={provide:qd,deps:[[new cs,FI]]};function lW(n){return(e,t)=>{let r=t.get(Dd);kr("angularfire",gu.full,"core"),kr("angularfire",gu.full,"app"),kr("angular",w2.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new tl(i)}}function KO(n,...e){return ss([aW,cW,{provide:FI,useFactory:lW(n),multi:!0,deps:[Rn,Ur,vu,...e]}])}var YO=fr(LI,!0);var uW=new Map,dW={activated:!1,tokenObservers:[]},hW={initialized:!1,enabled:!1};function _a(n){return uW.get(n)||Object.assign({},dW)}function XO(){return hW}var fW="https://content-firebaseappcheck.googleapis.com/v1";var pW="exchangeDebugToken",QO={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},t2e=1440*60*1e3;var BI=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return F(this,null,function*(){this.stop();try{this.pending=new Bd,this.pending.promise.catch(t=>{}),yield mW(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Bd,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function mW(n){return new Promise(e=>{setTimeout(e,n)})}var gW={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},yu=new va("appCheck","AppCheck",gW);function eR(n){if(!_a(n).activated)throw yu.create("use-before-activation",{appName:n.name})}function tR(r,i){return F(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let p=yield s.getHeartbeatsHeader();p&&(o["X-Firebase-Client"]=p)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(p){throw yu.create("fetch-network-error",{originalErrorMessage:p?.message})}if(c.status!==200)throw yu.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(p){throw yu.create("fetch-parse-error",{originalErrorMessage:p?.message})}let u=l.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw yu.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let m=Number(u[1])*1e3,_=Date.now();return{token:l.token,expireTimeMillis:_+m,issuedAtTimeMillis:_}})}function nR(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${fW}/projects/${t}/apps/${r}:${pW}?key=${i}`,body:{debug_token:e}}}var vW="firebase-app-check-database",yW=1,UI="firebase-app-check-store";var q_=null;function _W(){return q_||(q_=new Promise((n,e)=>{try{let t=indexedDB.open(vW,yW);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(yu.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(UI,{keyPath:"compositeKey"})}}}catch(t){e(yu.create("storage-open",{originalErrorMessage:t?.message}))}}),q_)}function bW(n,e){return wW(CW(n),e)}function wW(n,e){return F(this,null,function*(){let r=(yield _W()).transaction(UI,"readwrite"),o=r.objectStore(UI).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(yu.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function CW(n){return`${n.options.appId}-${n.name}`}var Eg=new nc("@firebase/app-check");function VI(n,e){return yg()?bW(n,e).catch(t=>{Eg.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function rR(){return XO().enabled}function iR(){return F(this,null,function*(){let n=XO();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var EW={error:"UNKNOWN_ERROR"};function IW(n){return R_.encodeString(JSON.stringify(n),!1)}function zI(n,e=!1,t=!1){return F(this,null,function*(){let r=n.app;eR(r);let i=_a(r),o=i.token,s;if(o&&!Ig(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(Ig(l)?o=l:yield VI(r,void 0))}if(!e&&o&&Ig(o))return{token:o.token};let a=!1;if(rR())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=tR(nR(r,yield iR()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield VI(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Eg.warn(l.message):t&&Eg.error(l),jI(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield _a(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Eg.warn(l.message):t&&Eg.error(l),s=l}let c;return o?s?Ig(o)?c={token:o.token,internalError:s}:c=jI(s):(c={token:o.token},i.token=o,yield VI(r,o)):c=jI(s),a&&TW(r,c),c})}function xW(n){return F(this,null,function*(){let e=n.app;eR(e);let{provider:t}=_a(e);if(rR()){let r=yield iR(),{token:i}=yield tR(nR(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function SW(n,e,t,r){let{app:i}=n,o=_a(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Ig(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),ZO(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>ZO(n))}function oR(n,e){let t=_a(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function ZO(n){let{app:e}=n,t=_a(e),r=t.tokenRefresher;r||(r=DW(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function DW(n){let{app:e}=n;return new BI(()=>F(null,null,function*(){let t=_a(e),r;if(t.token?r=yield zI(n,!0):r=yield zI(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=_a(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},QO.RETRIAL_MIN_WAIT,QO.RETRIAL_MAX_WAIT)}function TW(n,e){let t=_a(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Ig(n){return n.expireTimeMillis-Date.now()>0}function jI(n){return{token:IW(EW),error:n}}var $I=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=_a(this.app);for(let t of e)oR(this.app,t.next);return Promise.resolve()}};function AW(n,e){return new $I(n,e)}function MW(n){return{getToken:e=>zI(n,e),getLimitedUseToken:()=>xW(n),addTokenListener:e=>SW(n,"INTERNAL",e),removeTokenListener:e=>oR(n.app,e)}}var PW="@firebase/app-check",NW="0.10.1";var kW="app-check",JO="app-check-internal";function OW(){ya(new yo(kW,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return AW(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(JO).initialize()})),ya(new yo(JO,n=>{let e=n.getProvider("app-check").getImmediate();return MW(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),kr(PW,NW)}OW();var RW="app-check";var Rf=class{constructor(){return Of(RW)}};var LW=["localhost","0.0.0.0","127.0.0.1"],p2e=typeof window<"u"&&LW.includes(window.location.hostname);function wR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var CR=wR,ER=new va("auth","Firebase",wR());var Q_=new nc("@firebase/auth");function FW(n,...e){Q_.logLevel<=fn.WARN&&Q_.warn(`Auth (${mu}): ${n}`,...e)}function W_(n,...e){Q_.logLevel<=fn.ERROR&&Q_.error(`Auth (${mu}): ${n}`,...e)}function oc(n,...e){throw px(n,...e)}function Hd(n,...e){return px(n,...e)}function IR(n,e,t){let r=Object.assign(Object.assign({},CR()),{[e]:t});return new va("auth","Firebase",r).create(e,{appName:n.name})}function il(n){return IR(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function px(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return ER.create(n,...e)}function jt(n,e,...t){if(!n)throw px(e,...t)}function nl(n){let e="INTERNAL ASSERTION FAILED: "+n;throw W_(e),new Error(e)}function wu(n,e){n||nl(e)}function GI(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function VW(){return sR()==="http:"||sR()==="https:"}function sR(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function jW(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(VW()||IO()||"connection"in navigator)?navigator.onLine:!0}function BW(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Wd=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,wu(t>e,"Short delay should be less than long delay!"),this.isMobile=CO()||xO()}get(){return jW()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function mx(n,e){wu(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Z_=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;nl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;nl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;nl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var UW={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var zW=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],$W=new Wd(3e4,6e4);function Cu(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Eu(o,s,a,c){return F(this,arguments,function*(n,e,t,r,i={}){return xR(n,i,()=>F(null,null,function*(){let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});let m=_g(Object.assign({key:n.config.apiKey},u)).slice(1),_=yield n._getAdditionalHeaders();_["Content-Type"]="application/json",n.languageCode&&(_["X-Firebase-Locale"]=n.languageCode);let p=Object.assign({method:e,headers:_},l);return EO()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&fu(n.emulatorConfig.host)&&(p.credentials="include"),Z_.fetch()(yield SR(n,n.config.apiHost,t,m),p)}))})}function xR(n,e,t){return F(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},UW),e);try{let i=new KI(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw H_(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw H_(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw H_(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw H_(n,"user-disabled",s);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw IR(n,u,l);oc(n,u)}}catch(i){if(i instanceof fs)throw i;oc(n,"network-request-failed",{message:String(i)})}})}function kg(o,s,a,c){return F(this,arguments,function*(n,e,t,r,i={}){let l=yield Eu(n,e,t,r,i);return"mfaPendingCredential"in l&&oc(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function SR(n,e,t,r){return F(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?mx(n.config,i):`${n.config.apiScheme}://${i}`;return zW.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function qW(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var KI=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Hd(this.auth,"network-request-failed")),$W.get())})}};function H_(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Hd(n,e,r);return i.customData._tokenResponse=t,i}function aR(n){return n!==void 0&&n.enterprise!==void 0}var YI=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return qW(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function HW(n,e){return F(this,null,function*(){return Eu(n,"GET","/v2/recaptchaConfig",Cu(n,e))})}function WW(n,e){return F(this,null,function*(){return Eu(n,"POST","/v1/accounts:delete",e)})}function J_(n,e){return F(this,null,function*(){return Eu(n,"POST","/v1/accounts:lookup",e)})}function Sg(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function gx(n,e=!1){return F(this,null,function*(){let t=$r(n),r=yield t.getIdToken(e),i=vx(r);jt(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Sg(qI(i.auth_time)),issuedAtTime:Sg(qI(i.iat)),expirationTime:Sg(qI(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function qI(n){return Number(n)*1e3}function vx(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return W_("JWT malformed, contained fewer than 3 sections"),null;try{let i=L_(t);return i?JSON.parse(i):(W_("Failed to decode base64 JWT payload"),null)}catch(i){return W_("Caught error parsing JWT payload as JSON",i?.toString()),null}}function cR(n){let e=vx(n);return jt(e,"internal-error"),jt(typeof e.exp<"u","internal-error"),jt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Tg(n,e,t=!1){return F(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof fs&&GW(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function GW({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var QI=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>F(this,null,function*(){yield this.iteration()}),t)}iteration(){return F(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Ag=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sg(this.lastLoginAt),this.creationTime=Sg(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function X_(n){return F(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Tg(n,J_(t,{idToken:r}));jt(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?DR(o.providerUserInfo):[],a=KW(n.providerData,s),c=n.isAnonymous,l=!(n.email&&o.passwordHash)&&!a?.length,u=c?l:!1,m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Ag(o.createdAt,o.lastLoginAt),isAnonymous:u};Object.assign(n,m)})}function yx(n){return F(this,null,function*(){let e=$r(n);yield X_(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function KW(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function DR(n){return n.map(e=>{var{providerId:t}=e,r=r2(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function YW(n,e){return F(this,null,function*(){let t=yield xR(n,{},()=>F(null,null,function*(){let r=_g({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield SR(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&fu(n.emulatorConfig.host)&&(c.credentials="include"),Z_.fetch()(s,c)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function QW(n,e){return F(this,null,function*(){return Eu(n,"POST","/v2/accounts:revokeToken",Cu(n,e))})}var Dg=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){jt(e.idToken,"internal-error"),jt(typeof e.idToken<"u","internal-error"),jt(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):cR(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){jt(e.length!==0,"internal-error");let t=cR(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return F(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(jt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return F(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield YW(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(jt(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(jt(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(jt(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return nl("not implemented")}};function _u(n,e){jt(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var bu=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=r2(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new QI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Ag(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return F(this,null,function*(){let t=yield Tg(this,this.stsTokenManager.getToken(this.auth,e));return jt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return gx(this,e)}reload(){return yx(this)}_assign(e){this!==e&&(jt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){jt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return F(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield X_(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return F(this,null,function*(){if(Vo(this.auth.app))return Promise.reject(il(this.auth));let e=yield this.getIdToken();return yield Tg(this,WW(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,c,l,u;let m=(r=t.displayName)!==null&&r!==void 0?r:void 0,_=(i=t.email)!==null&&i!==void 0?i:void 0,p=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,D=(s=t.photoURL)!==null&&s!==void 0?s:void 0,k=(a=t.tenantId)!==null&&a!==void 0?a:void 0,L=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,R=(l=t.createdAt)!==null&&l!==void 0?l:void 0,X=(u=t.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:ee,emailVerified:J,isAnonymous:_e,providerData:Ce,stsTokenManager:H}=t;jt(ee&&H,e,"internal-error");let N=Dg.fromJSON(this.name,H);jt(typeof ee=="string",e,"internal-error"),_u(m,e.name),_u(_,e.name),jt(typeof J=="boolean",e,"internal-error"),jt(typeof _e=="boolean",e,"internal-error"),_u(p,e.name),_u(D,e.name),_u(k,e.name),_u(L,e.name),_u(R,e.name),_u(X,e.name);let T=new n({uid:ee,auth:e,email:_,emailVerified:J,displayName:m,isAnonymous:_e,photoURL:D,phoneNumber:p,tenantId:k,stsTokenManager:N,createdAt:R,lastLoginAt:X});return Ce&&Array.isArray(Ce)&&(T.providerData=Ce.map(U=>Object.assign({},U))),L&&(T._redirectEventId=L),T}static _fromIdTokenResponse(e,t,r=!1){return F(this,null,function*(){let i=new Dg;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield X_(o),o})}static _fromGetAccountInfoResponse(e,t,r){return F(this,null,function*(){let i=t.users[0];jt(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?DR(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Dg;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Ag(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,l),c})}};var lR=new Map;function rl(n){wu(n instanceof Function,"Expected a class definition");let e=lR.get(n);return e?(wu(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,lR.set(n,e),e)}var ZW=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return F(this,null,function*(){return!0})}_set(t,r){return F(this,null,function*(){this.storage[t]=r})}_get(t){return F(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return F(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),ZI=ZW;function G_(n,e,t){return`firebase:${n}:${e}:${t}`}var e1=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=G_(this.userKey,i.apiKey,o),this.fullPersistenceKey=G_("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return F(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield J_(this.auth,{idToken:e}).catch(()=>{});return t?bu._fromGetAccountInfoResponse(this.auth,t,e):null}return bu._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return F(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return F(this,null,function*(){if(!t.length)return new n(rl(ZI),e,r);let i=(yield Promise.all(t.map(l=>F(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||rl(ZI),s=G_(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let u=yield l._get(s);if(u){let m;if(typeof u=="string"){let _=yield J_(e,{idToken:u}).catch(()=>{});if(!_)break;m=yield bu._fromGetAccountInfoResponse(e,_,u)}else m=bu._fromJSON(e,u);l!==o&&(a=m),o=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new n(o,e,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(l=>F(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new n(o,e,r))})}};function uR(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(PR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(TR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(kR(e))return"Blackberry";if(OR(e))return"Webos";if(AR(e))return"Safari";if((e.includes("chrome/")||MR(e))&&!e.includes("edge/"))return"Chrome";if(NR(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function TR(n=vi()){return/firefox\//i.test(n)}function AR(n=vi()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function MR(n=vi()){return/crios\//i.test(n)}function PR(n=vi()){return/iemobile/i.test(n)}function NR(n=vi()){return/android/i.test(n)}function kR(n=vi()){return/blackberry/i.test(n)}function OR(n=vi()){return/webos/i.test(n)}function _x(n=vi()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function JW(n=vi()){var e;return _x(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function XW(){return SO()&&document.documentMode===10}function RR(n=vi()){return _x(n)||NR(n)||OR(n)||kR(n)||/windows phone/i.test(n)||PR(n)}function LR(n,e=[]){let t;switch(n){case"Browser":t=uR(vi());break;case"Worker":t=`${uR(vi())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${mu}/${r}`}var JI=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return F(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function eG(t){return F(this,arguments,function*(n,e={}){return Eu(n,"GET","/v2/passwordPolicy",Cu(n,e))})}var tG=6,XI=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:tG,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var ex=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new t1(this),this.idTokenSubscription=new t1(this),this.beforeStateQueue=new JI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ER,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=rl(t)),this._initializationPromise=this.queue(()=>F(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield e1.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return F(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return F(this,null,function*(){try{let t=yield J_(this,{idToken:e}),r=yield bu._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return F(this,null,function*(){var t;if(Vo(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return jt(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return F(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return F(this,null,function*(){try{yield X_(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=BW()}_delete(){return F(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return F(this,null,function*(){if(Vo(this.app))return Promise.reject(il(this));let t=e?$r(e):null;return t&&jt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return F(this,null,function*(){if(!this._deleted)return e&&jt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>F(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return F(this,null,function*(){return Vo(this.app)?Promise.reject(il(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Vo(this.app)?Promise.reject(il(this)):this.queue(()=>F(this,null,function*(){yield this.assertedPersistence.setPersistence(rl(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return F(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return F(this,null,function*(){let e=yield eG(this),t=new XI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new va("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return F(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield QW(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return F(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return F(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&rl(e)||this._popupRedirectResolver;jt(t,this,"argument-error"),this.redirectPersistenceManager=yield e1.create(this,[rl(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return F(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>F(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return F(this,null,function*(){if(e===this.currentUser)return this.queue(()=>F(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(jt(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(t);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return F(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return jt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=LR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return F(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return F(this,null,function*(){var e;if(Vo(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&FW(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Kd(n){return $r(n)}var t1=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=MO(t=>this.observer=t)}get next(){return jt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var c1={loadJS(){return F(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function nG(n){c1=n}function FR(n){return c1.loadJS(n)}function rG(){return c1.recaptchaEnterpriseScript}function iG(){return c1.gapiScript}function VR(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var tx=class{constructor(){this.enterprise=new nx}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},nx=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var oG="recaptcha-enterprise",jR="NO_RECAPTCHA",rx=class{constructor(e){this.type=oG,this.auth=Kd(e)}verify(e="verify",t=!1){return F(this,null,function*(){function r(o){return F(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>F(null,null,function*(){HW(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new YI(c);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(c=>{a(c)})}))})}function i(o,s,a){let c=window.grecaptcha;aR(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(jR)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new tx().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&aR(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=rG();c.length!==0&&(c+=a),FR(c).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})})}};function xg(n,e,t,r=!1,i=!1){return F(this,null,function*(){let o=new rx(n),s;if(i)s=jR;else try{s=yield o.verify(t)}catch{s=yield o.verify(t,!0)}let a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let c=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function ix(n,e,t,r,i){return F(this,null,function*(){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield xg(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(a=>F(null,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let c=yield xg(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=yield xg(n,e,t);return r(n,a).catch(c=>F(null,null,function*(){var l;if(((l=n._getRecaptchaConfig())===null||l===void 0?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let u=yield xg(n,e,t,!1,!0);return r(n,u)}return Promise.reject(c)}))}else{let a=yield xg(n,e,t,!1,!0);return r(n,a)}else return Promise.reject(i+" provider is not supported.")})}function bx(n,e){let t=Nf(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(tc(o,e??{}))return i;oc(i,"already-initialized")}return t.initialize({options:e})}function sG(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(rl);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function wx(n,e,t){let r=Kd(n);jt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=BR(e),{host:s,port:a}=aG(e),c=a===null?"":`:${a}`,l={url:`${o}//${s}${c}/`},u=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){jt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),jt(tc(l,r.config.emulator)&&tc(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,fu(s)?(V_(`${o}//${s}${c}`),j_("Auth",!0)):i||cG()}function BR(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function aG(n){let e=BR(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:dR(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:dR(s)}}}function dR(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function cG(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Mg=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return nl("not implemented")}_getIdTokenResponse(e){return nl("not implemented")}_linkToIdToken(e,t){return nl("not implemented")}_getReauthenticationResolver(e){return nl("not implemented")}};function lG(n,e){return F(this,null,function*(){return Eu(n,"POST","/v1/accounts:signUp",e)})}function uG(n,e){return F(this,null,function*(){return kg(n,"POST","/v1/accounts:signInWithPassword",Cu(n,e))})}function dG(n,e){return F(this,null,function*(){return kg(n,"POST","/v1/accounts:signInWithEmailLink",Cu(n,e))})}function hG(n,e){return F(this,null,function*(){return kg(n,"POST","/v1/accounts:signInWithEmailLink",Cu(n,e))})}var Pg=class n extends Mg{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return F(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ix(e,t,"signInWithPassword",uG,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return dG(e,{email:this._email,oobCode:this._password});default:oc(e,"internal-error")}})}_linkToIdToken(e,t){return F(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ix(e,r,"signUpPassword",lG,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return hG(e,{idToken:t,email:this._email,oobCode:this._password});default:oc(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function HI(n,e){return F(this,null,function*(){return kg(n,"POST","/v1/accounts:signInWithIdp",Cu(n,e))})}function fG(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function pG(n){let e=Mf(Pf(n)).link,t=e?Mf(Pf(e)).deep_link_id:null,r=Mf(Pf(n)).deep_link_id;return(r?Mf(Pf(r)).link:null)||r||t||e||n}var n1=class n{constructor(e){var t,r,i,o,s,a;let c=Mf(Pf(e)),l=(t=c.apiKey)!==null&&t!==void 0?t:null,u=(r=c.oobCode)!==null&&r!==void 0?r:null,m=fG((i=c.mode)!==null&&i!==void 0?i:null);jt(l&&u&&m,"argument-error"),this.apiKey=l,this.operation=m,this.code=u,this.continueUrl=(o=c.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=c.lang)!==null&&s!==void 0?s:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=pG(e);try{return new n(t)}catch{return null}}};var UR=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Pg._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=n1.parseLink(r);return jt(i,"argument-error"),Pg._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),r1=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var ox=class extends r1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function mG(n,e){return F(this,null,function*(){return kg(n,"POST","/v1/accounts:signUp",Cu(n,e))})}var Lf=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return F(this,null,function*(){let o=yield bu._fromIdTokenResponse(e,r,i),s=hR(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return F(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=hR(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function hR(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var sx=class n extends fs{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function zR(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?sx._fromErrorAndOperation(n,o,e,r):o})}function gG(n,e,t=!1){return F(this,null,function*(){let r=yield Tg(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Lf._forOperation(n,"link",r)})}function vG(n,e,t=!1){return F(this,null,function*(){let{auth:r}=n;if(Vo(r.app))return Promise.reject(il(r));let i="reauthenticate";try{let o=yield Tg(n,zR(r,i,e,n),t);jt(o.idToken,r,"internal-error");let s=vx(o.idToken);jt(s,r,"internal-error");let{sub:a}=s;return jt(n.uid===a,r,"user-mismatch"),Lf._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&oc(r,"user-mismatch"),o}})}function $R(n,e,t=!1){return F(this,null,function*(){if(Vo(n.app))return Promise.reject(il(n));let r="signIn",i=yield zR(n,r,e),o=yield Lf._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function Cx(n,e){return F(this,null,function*(){return $R(Kd(n),e)})}function qR(n){return F(this,null,function*(){let e=Kd(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Ex(n,e,t){return F(this,null,function*(){if(Vo(n.app))return Promise.reject(il(n));let r=Kd(n),s=yield ix(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",mG,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&qR(n),c}),a=yield Lf._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function Ix(n,e,t){return Vo(n.app)?Promise.reject(il(n)):Cx($r(n),UR.credential(e,t)).catch(r=>F(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&qR(n),r}))}function xx(n,e){return $r(n).setPersistence(e)}function Og(n,e,t,r){return $r(n).onIdTokenChanged(e,t,r)}function Sx(n,e,t){return $r(n).beforeAuthStateChanged(e,t)}function Dx(n){return $r(n).signOut()}var i1="__sak";var o1=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(i1,"1"),this.storage.removeItem(i1),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var yG=1e3,_G=10,bG=(()=>{class n extends o1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=RR(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);XW()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,_G):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},yG)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return F(this,null,function*(){yield ql(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return F(this,null,function*(){let r=yield ql(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return F(this,null,function*(){yield ql(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),l1=bG;var wG=(()=>{class n extends o1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),Tx=wG;function CG(n){return Promise.all(n.map(e=>F(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var EG=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return F(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(u=>F(this,null,function*(){return u(r.origin,s)})),l=yield CG(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function HR(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var ax=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return F(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let l=HR("",20);i.port1.start();let u=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(m){let _=m;if(_.data.eventId===l)switch(_.data.status){case"ack":clearTimeout(u),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(_.data.response);break;default:clearTimeout(u),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function ic(){return window}function IG(n){ic().location.href=n}function WR(){return typeof ic().WorkerGlobalScope<"u"&&typeof ic().importScripts=="function"}function xG(){return F(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function SG(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function DG(){return WR()?self:null}var GR="firebaseLocalStorageDb",TG=1,s1="firebaseLocalStorage",KR="fbase_key",Gd=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function u1(n,e){return n.transaction([s1],e?"readwrite":"readonly").objectStore(s1)}function AG(){let n=indexedDB.deleteDatabase(GR);return new Gd(n).toPromise()}function cx(){let n=indexedDB.open(GR,TG);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(s1,{keyPath:KR})}catch(i){t(i)}}),n.addEventListener("success",()=>F(null,null,function*(){let r=n.result;r.objectStoreNames.contains(s1)?e(r):(r.close(),yield AG(),e(yield cx()))}))})}function fR(n,e,t){return F(this,null,function*(){let r=u1(n,!0).put({[KR]:e,value:t});return new Gd(r).toPromise()})}function MG(n,e){return F(this,null,function*(){let t=u1(n,!1).get(e),r=yield new Gd(t).toPromise();return r===void 0?null:r.value})}function pR(n,e){let t=u1(n,!0).delete(e);return new Gd(t).toPromise()}var PG=800,NG=3,kG=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return F(this,null,function*(){return this.db?this.db:(this.db=yield cx(),this.db)})}_withRetries(t){return F(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>NG)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return F(this,null,function*(){return WR()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return F(this,null,function*(){this.receiver=EG._getInstance(DG()),this.receiver._subscribe("keyChanged",(t,r)=>F(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>F(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return F(this,null,function*(){var t,r;if(this.activeServiceWorker=yield xG(),!this.activeServiceWorker)return;this.sender=new ax(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return F(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||SG()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return F(this,null,function*(){try{if(!indexedDB)return!1;let t=yield cx();return yield fR(t,i1,"1"),yield pR(t,i1),!0}catch{}return!1})}_withPendingWrite(t){return F(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return F(this,null,function*(){return this._withPendingWrite(()=>F(this,null,function*(){return yield this._withRetries(i=>fR(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return F(this,null,function*(){let r=yield this._withRetries(i=>MG(i,t));return this.localCache[t]=r,r})}_remove(t){return F(this,null,function*(){return this._withPendingWrite(()=>F(this,null,function*(){return yield this._withRetries(r=>pR(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return F(this,null,function*(){let t=yield this._withRetries(o=>{let s=u1(o,!1).getAll();return new Gd(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>F(this,null,function*(){return this._poll()}),PG)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),YR=kG;var C2e=VR("rcb"),E2e=new Wd(3e4,6e4);function OG(n,e){return e?rl(e):(jt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Ng=class extends Mg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return HI(e,this._buildIdpRequest())}_linkToIdToken(e,t){return HI(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return HI(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function RG(n){return $R(n.auth,new Ng(n),n.bypassAuthState)}function LG(n){let{auth:e,user:t}=n;return jt(t,e,"internal-error"),vG(t,new Ng(n),n.bypassAuthState)}function FG(n){return F(this,null,function*(){let{auth:e,user:t}=n;return jt(t,e,"internal-error"),gG(t,new Ng(n),n.bypassAuthState)})}var lx=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>F(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return F(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return RG;case"linkViaPopup":case"linkViaRedirect":return FG;case"reauthViaPopup":case"reauthViaRedirect":return LG;default:oc(this.auth,"internal-error")}}resolve(e){wu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){wu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var I2e=new Wd(2e3,1e4);var VG="pendingRedirect",K_=new Map,ux=class n extends lx{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return F(this,null,function*(){let e=K_.get(this.auth._key());if(!e){try{let r=(yield jG(this.resolver,this.auth))?yield ql(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}K_.set(this.auth._key(),e)}return this.bypassAuthState||K_.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return F(this,null,function*(){if(e.type==="signInViaRedirect")return ql(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,ql(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return F(this,null,function*(){})}cleanUp(){}};function jG(n,e){return F(this,null,function*(){let t=zG(e),r=UG(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function BG(n,e){K_.set(n._key(),e)}function UG(n){return rl(n._redirectPersistence)}function zG(n){return G_(VG,n.config.apiKey,n.name)}function $G(n,e,t=!1){return F(this,null,function*(){if(Vo(n.app))return Promise.reject(il(n));let r=Kd(n),i=OG(r,e),s=yield new ux(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var qG=600*1e3,dx=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!HG(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!QR(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Hd(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=qG&&this.cachedEventUids.clear(),this.cachedEventUids.has(mR(e))}saveEventToCache(e){this.cachedEventUids.add(mR(e)),this.lastProcessedEventTime=Date.now()}};function mR(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function QR({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function HG(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return QR(n);default:return!1}}function WG(t){return F(this,arguments,function*(n,e={}){return Eu(n,"GET","/v1/projects",e)})}var GG=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,KG=/^https?/;function YG(n){return F(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield WG(n);for(let t of e)try{if(QG(t))return}catch{}oc(n,"unauthorized-domain")})}function QG(n){let e=GI(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!KG.test(t))return!1;if(GG.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var ZG=new Wd(3e4,6e4);function gR(){let n=ic().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function JG(n){return new Promise((e,t)=>{var r,i,o;function s(){gR(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{gR(),t(Hd(n,"network-request-failed"))},timeout:ZG.get()})}if(!((i=(r=ic().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=ic().gapi)===null||o===void 0)&&o.load)s();else{let a=VR("iframefcb");return ic()[a]=()=>{gapi.load?s():t(Hd(n,"network-request-failed"))},FR(`${iG()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw Y_=null,e})}var Y_=null;function XG(n){return Y_=Y_||JG(n),Y_}var eK=new Wd(5e3,15e3),tK="__/auth/iframe",nK="emulator/auth/iframe",rK={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},iK=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function oK(n){let e=n.config;jt(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?mx(e,nK):`https://${n.config.authDomain}/${tK}`,r={apiKey:e.apiKey,appName:n.name,v:mu},i=iK.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${_g(r).slice(1)}`}function sK(n){return F(this,null,function*(){let e=yield XG(n),t=ic().gapi;return jt(t,n,"internal-error"),e.open({where:document.body,url:oK(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rK,dontclear:!0},r=>new Promise((i,o)=>F(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Hd(n,"network-request-failed"),a=ic().setTimeout(()=>{o(s)},eK.get());function c(){ic().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})})))})}var aK={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cK=500,lK=600,uK="_blank",dK="http://localhost",a1=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function hK(n,e,t,r=cK,i=lK){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},aK),{width:r.toString(),height:i.toString(),top:o,left:s}),l=vi().toLowerCase();t&&(a=MR(l)?uK:t),TR(l)&&(e=e||dK,c.scrollbars="yes");let u=Object.entries(c).reduce((_,[p,D])=>`${_}${p}=${D},`,"");if(JW(l)&&a!=="_self")return fK(e||"",a),new a1(null);let m=window.open(e||"",a,u);jt(m,n,"popup-blocked");try{m.focus()}catch{}return new a1(m)}function fK(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var pK="__/auth/handler",mK="emulator/auth/handler",gK=encodeURIComponent("fac");function vR(n,e,t,r,i,o){return F(this,null,function*(){jt(n.config.authDomain,n,"auth-domain-config-required"),jt(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:mu,eventId:i};if(e instanceof r1){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",AO(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[u,m]of Object.entries(o||{}))s[u]=m}if(e instanceof ox){let u=e.getScopes().filter(m=>m!=="");u.length>0&&(s.scopes=u.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let u of Object.keys(a))a[u]===void 0&&delete a[u];let c=yield n._getAppCheckToken(),l=c?`#${gK}=${encodeURIComponent(c)}`:"";return`${vK(n)}?${_g(a).slice(1)}${l}`})}function vK({config:n}){return n.emulator?mx(n,mK):`https://${n.authDomain}/${pK}`}var WI="webStorageSupport",hx=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Tx,this._completeRedirectFn=$G,this._overrideRedirectResult=BG}_openPopup(e,t,r,i){return F(this,null,function*(){var o;wu((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield vR(e,t,r,GI(),i);return hK(e,s,HR())})}_openRedirect(e,t,r,i){return F(this,null,function*(){yield this._originValidation(e);let o=yield vR(e,t,r,GI(),i);return IG(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(wu(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return F(this,null,function*(){let t=yield sK(e),r=new dx(e);return t.register("authEvent",i=>(jt(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(WI,{type:WI},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[WI];s!==void 0&&t(!!s),oc(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=YG(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return RR()||AR()||_x()}},ZR=hx;var yR="@firebase/auth",_R="1.10.8";var fx=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return F(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){jt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function yK(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _K(n){ya(new yo("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;jt(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:LR(n)},l=new ex(r,i,o,c);return sG(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ya(new yo("auth-internal",e=>{let t=Kd(e.getProvider("auth").getImmediate());return(r=>new fx(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),kr(yR,_R,yK(n)),kr(yR,_R,"esm2017")}var bK=300,wK=wI("authIdTokenMaxAge")||bK,bR=null,CK=n=>e=>F(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>wK)return;let i=t?.token;bR!==i&&(bR=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Ax(n=zd()){let e=Nf(n,"auth");if(e.isInitialized())return e.getImmediate();let t=bx(n,{popupRedirectResolver:ZR,persistence:[YR,l1,Tx]}),r=wI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=CK(o.toString());Sx(t,s,()=>s(t.currentUser)),Og(t,a=>s(a))}}let i=_I("auth");return i&&wx(t,`http://${i}`),t}function EK(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}nG({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Hd("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",EK().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_K("Browser");function e3(n){return new on(function(e){var t=Og(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var t3="auth",Yd=class{constructor(e){return e}},Rg=class{constructor(){return Of(t3)}};var Mx=new ht("angularfire2.auth-instances");function lY(n,e){let t=Cg(t3,n,e);return t&&new Yd(t)}function uY(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Yd(r)}}var dY={provide:Rg,deps:[[new cs,Mx]]},hY={provide:Yd,useFactory:lY,deps:[[new cs,Mx],tl]};function n3(n,...e){return kr("angularfire",gu.full,"auth"),ss([hY,dY,{provide:Mx,useFactory:uY(n),multi:!0,deps:[Rn,Ur,vu,qd,[new cs,Rf],...e]}])}var r3=fr(e3,!0);var i3=fr(Ex,!0,2);var o3=fr(Ax,!0);var s3=fr(xx,!0);var a3=fr(Ix,!0,2);var c3=fr(Dx,!0,2);var l3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},u3={};var ol,Px;(function(){var n;function e(H,N){function T(){}T.prototype=N.prototype,H.D=N.prototype,H.prototype=new T,H.prototype.constructor=H,H.C=function(U,x,A){for(var M=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)M[ne-2]=arguments[ne];return N.prototype[x].apply(U,M)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(H,N,T){T||(T=0);var U=Array(16);if(typeof N=="string")for(var x=0;16>x;++x)U[x]=N.charCodeAt(T++)|N.charCodeAt(T++)<<8|N.charCodeAt(T++)<<16|N.charCodeAt(T++)<<24;else for(x=0;16>x;++x)U[x]=N[T++]|N[T++]<<8|N[T++]<<16|N[T++]<<24;N=H.g[0],T=H.g[1],x=H.g[2];var A=H.g[3],M=N+(A^T&(x^A))+U[0]+3614090360&4294967295;N=T+(M<<7&4294967295|M>>>25),M=A+(x^N&(T^x))+U[1]+3905402710&4294967295,A=N+(M<<12&4294967295|M>>>20),M=x+(T^A&(N^T))+U[2]+606105819&4294967295,x=A+(M<<17&4294967295|M>>>15),M=T+(N^x&(A^N))+U[3]+3250441966&4294967295,T=x+(M<<22&4294967295|M>>>10),M=N+(A^T&(x^A))+U[4]+4118548399&4294967295,N=T+(M<<7&4294967295|M>>>25),M=A+(x^N&(T^x))+U[5]+1200080426&4294967295,A=N+(M<<12&4294967295|M>>>20),M=x+(T^A&(N^T))+U[6]+2821735955&4294967295,x=A+(M<<17&4294967295|M>>>15),M=T+(N^x&(A^N))+U[7]+4249261313&4294967295,T=x+(M<<22&4294967295|M>>>10),M=N+(A^T&(x^A))+U[8]+1770035416&4294967295,N=T+(M<<7&4294967295|M>>>25),M=A+(x^N&(T^x))+U[9]+2336552879&4294967295,A=N+(M<<12&4294967295|M>>>20),M=x+(T^A&(N^T))+U[10]+4294925233&4294967295,x=A+(M<<17&4294967295|M>>>15),M=T+(N^x&(A^N))+U[11]+2304563134&4294967295,T=x+(M<<22&4294967295|M>>>10),M=N+(A^T&(x^A))+U[12]+1804603682&4294967295,N=T+(M<<7&4294967295|M>>>25),M=A+(x^N&(T^x))+U[13]+4254626195&4294967295,A=N+(M<<12&4294967295|M>>>20),M=x+(T^A&(N^T))+U[14]+2792965006&4294967295,x=A+(M<<17&4294967295|M>>>15),M=T+(N^x&(A^N))+U[15]+1236535329&4294967295,T=x+(M<<22&4294967295|M>>>10),M=N+(x^A&(T^x))+U[1]+4129170786&4294967295,N=T+(M<<5&4294967295|M>>>27),M=A+(T^x&(N^T))+U[6]+3225465664&4294967295,A=N+(M<<9&4294967295|M>>>23),M=x+(N^T&(A^N))+U[11]+643717713&4294967295,x=A+(M<<14&4294967295|M>>>18),M=T+(A^N&(x^A))+U[0]+3921069994&4294967295,T=x+(M<<20&4294967295|M>>>12),M=N+(x^A&(T^x))+U[5]+3593408605&4294967295,N=T+(M<<5&4294967295|M>>>27),M=A+(T^x&(N^T))+U[10]+38016083&4294967295,A=N+(M<<9&4294967295|M>>>23),M=x+(N^T&(A^N))+U[15]+3634488961&4294967295,x=A+(M<<14&4294967295|M>>>18),M=T+(A^N&(x^A))+U[4]+3889429448&4294967295,T=x+(M<<20&4294967295|M>>>12),M=N+(x^A&(T^x))+U[9]+568446438&4294967295,N=T+(M<<5&4294967295|M>>>27),M=A+(T^x&(N^T))+U[14]+3275163606&4294967295,A=N+(M<<9&4294967295|M>>>23),M=x+(N^T&(A^N))+U[3]+4107603335&4294967295,x=A+(M<<14&4294967295|M>>>18),M=T+(A^N&(x^A))+U[8]+1163531501&4294967295,T=x+(M<<20&4294967295|M>>>12),M=N+(x^A&(T^x))+U[13]+2850285829&4294967295,N=T+(M<<5&4294967295|M>>>27),M=A+(T^x&(N^T))+U[2]+4243563512&4294967295,A=N+(M<<9&4294967295|M>>>23),M=x+(N^T&(A^N))+U[7]+1735328473&4294967295,x=A+(M<<14&4294967295|M>>>18),M=T+(A^N&(x^A))+U[12]+2368359562&4294967295,T=x+(M<<20&4294967295|M>>>12),M=N+(T^x^A)+U[5]+4294588738&4294967295,N=T+(M<<4&4294967295|M>>>28),M=A+(N^T^x)+U[8]+2272392833&4294967295,A=N+(M<<11&4294967295|M>>>21),M=x+(A^N^T)+U[11]+1839030562&4294967295,x=A+(M<<16&4294967295|M>>>16),M=T+(x^A^N)+U[14]+4259657740&4294967295,T=x+(M<<23&4294967295|M>>>9),M=N+(T^x^A)+U[1]+2763975236&4294967295,N=T+(M<<4&4294967295|M>>>28),M=A+(N^T^x)+U[4]+1272893353&4294967295,A=N+(M<<11&4294967295|M>>>21),M=x+(A^N^T)+U[7]+4139469664&4294967295,x=A+(M<<16&4294967295|M>>>16),M=T+(x^A^N)+U[10]+3200236656&4294967295,T=x+(M<<23&4294967295|M>>>9),M=N+(T^x^A)+U[13]+681279174&4294967295,N=T+(M<<4&4294967295|M>>>28),M=A+(N^T^x)+U[0]+3936430074&4294967295,A=N+(M<<11&4294967295|M>>>21),M=x+(A^N^T)+U[3]+3572445317&4294967295,x=A+(M<<16&4294967295|M>>>16),M=T+(x^A^N)+U[6]+76029189&4294967295,T=x+(M<<23&4294967295|M>>>9),M=N+(T^x^A)+U[9]+3654602809&4294967295,N=T+(M<<4&4294967295|M>>>28),M=A+(N^T^x)+U[12]+3873151461&4294967295,A=N+(M<<11&4294967295|M>>>21),M=x+(A^N^T)+U[15]+530742520&4294967295,x=A+(M<<16&4294967295|M>>>16),M=T+(x^A^N)+U[2]+3299628645&4294967295,T=x+(M<<23&4294967295|M>>>9),M=N+(x^(T|~A))+U[0]+4096336452&4294967295,N=T+(M<<6&4294967295|M>>>26),M=A+(T^(N|~x))+U[7]+1126891415&4294967295,A=N+(M<<10&4294967295|M>>>22),M=x+(N^(A|~T))+U[14]+2878612391&4294967295,x=A+(M<<15&4294967295|M>>>17),M=T+(A^(x|~N))+U[5]+4237533241&4294967295,T=x+(M<<21&4294967295|M>>>11),M=N+(x^(T|~A))+U[12]+1700485571&4294967295,N=T+(M<<6&4294967295|M>>>26),M=A+(T^(N|~x))+U[3]+2399980690&4294967295,A=N+(M<<10&4294967295|M>>>22),M=x+(N^(A|~T))+U[10]+4293915773&4294967295,x=A+(M<<15&4294967295|M>>>17),M=T+(A^(x|~N))+U[1]+2240044497&4294967295,T=x+(M<<21&4294967295|M>>>11),M=N+(x^(T|~A))+U[8]+1873313359&4294967295,N=T+(M<<6&4294967295|M>>>26),M=A+(T^(N|~x))+U[15]+4264355552&4294967295,A=N+(M<<10&4294967295|M>>>22),M=x+(N^(A|~T))+U[6]+2734768916&4294967295,x=A+(M<<15&4294967295|M>>>17),M=T+(A^(x|~N))+U[13]+1309151649&4294967295,T=x+(M<<21&4294967295|M>>>11),M=N+(x^(T|~A))+U[4]+4149444226&4294967295,N=T+(M<<6&4294967295|M>>>26),M=A+(T^(N|~x))+U[11]+3174756917&4294967295,A=N+(M<<10&4294967295|M>>>22),M=x+(N^(A|~T))+U[2]+718787259&4294967295,x=A+(M<<15&4294967295|M>>>17),M=T+(A^(x|~N))+U[9]+3951481745&4294967295,H.g[0]=H.g[0]+N&4294967295,H.g[1]=H.g[1]+(x+(M<<21&4294967295|M>>>11))&4294967295,H.g[2]=H.g[2]+x&4294967295,H.g[3]=H.g[3]+A&4294967295}r.prototype.u=function(H,N){N===void 0&&(N=H.length);for(var T=N-this.blockSize,U=this.B,x=this.h,A=0;A<N;){if(x==0)for(;A<=T;)i(this,H,A),A+=this.blockSize;if(typeof H=="string"){for(;A<N;)if(U[x++]=H.charCodeAt(A++),x==this.blockSize){i(this,U),x=0;break}}else for(;A<N;)if(U[x++]=H[A++],x==this.blockSize){i(this,U),x=0;break}}this.h=x,this.o+=N},r.prototype.v=function(){var H=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);H[0]=128;for(var N=1;N<H.length-8;++N)H[N]=0;var T=8*this.o;for(N=H.length-8;N<H.length;++N)H[N]=T&255,T/=256;for(this.u(H),H=Array(16),N=T=0;4>N;++N)for(var U=0;32>U;U+=8)H[T++]=this.g[N]>>>U&255;return H};function o(H,N){var T=a;return Object.prototype.hasOwnProperty.call(T,H)?T[H]:T[H]=N(H)}function s(H,N){this.h=N;for(var T=[],U=!0,x=H.length-1;0<=x;x--){var A=H[x]|0;U&&A==N||(T[x]=A,U=!1)}this.g=T}var a={};function c(H){return-128<=H&&128>H?o(H,function(N){return new s([N|0],0>N?-1:0)}):new s([H|0],0>H?-1:0)}function l(H){if(isNaN(H)||!isFinite(H))return m;if(0>H)return L(l(-H));for(var N=[],T=1,U=0;H>=T;U++)N[U]=H/T|0,T*=4294967296;return new s(N,0)}function u(H,N){if(H.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(H.charAt(0)=="-")return L(u(H.substring(1),N));if(0<=H.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=l(Math.pow(N,8)),U=m,x=0;x<H.length;x+=8){var A=Math.min(8,H.length-x),M=parseInt(H.substring(x,x+A),N);8>A?(A=l(Math.pow(N,A)),U=U.j(A).add(l(M))):(U=U.j(T),U=U.add(l(M)))}return U}var m=c(0),_=c(1),p=c(16777216);n=s.prototype,n.m=function(){if(k(this))return-L(this).m();for(var H=0,N=1,T=0;T<this.g.length;T++){var U=this.i(T);H+=(0<=U?U:4294967296+U)*N,N*=4294967296}return H},n.toString=function(H){if(H=H||10,2>H||36<H)throw Error("radix out of range: "+H);if(D(this))return"0";if(k(this))return"-"+L(this).toString(H);for(var N=l(Math.pow(H,6)),T=this,U="";;){var x=J(T,N).g;T=R(T,x.j(N));var A=((0<T.g.length?T.g[0]:T.h)>>>0).toString(H);if(T=x,D(T))return A+U;for(;6>A.length;)A="0"+A;U=A+U}},n.i=function(H){return 0>H?0:H<this.g.length?this.g[H]:this.h};function D(H){if(H.h!=0)return!1;for(var N=0;N<H.g.length;N++)if(H.g[N]!=0)return!1;return!0}function k(H){return H.h==-1}n.l=function(H){return H=R(this,H),k(H)?-1:D(H)?0:1};function L(H){for(var N=H.g.length,T=[],U=0;U<N;U++)T[U]=~H.g[U];return new s(T,~H.h).add(_)}n.abs=function(){return k(this)?L(this):this},n.add=function(H){for(var N=Math.max(this.g.length,H.g.length),T=[],U=0,x=0;x<=N;x++){var A=U+(this.i(x)&65535)+(H.i(x)&65535),M=(A>>>16)+(this.i(x)>>>16)+(H.i(x)>>>16);U=M>>>16,A&=65535,M&=65535,T[x]=M<<16|A}return new s(T,T[T.length-1]&-2147483648?-1:0)};function R(H,N){return H.add(L(N))}n.j=function(H){if(D(this)||D(H))return m;if(k(this))return k(H)?L(this).j(L(H)):L(L(this).j(H));if(k(H))return L(this.j(L(H)));if(0>this.l(p)&&0>H.l(p))return l(this.m()*H.m());for(var N=this.g.length+H.g.length,T=[],U=0;U<2*N;U++)T[U]=0;for(U=0;U<this.g.length;U++)for(var x=0;x<H.g.length;x++){var A=this.i(U)>>>16,M=this.i(U)&65535,ne=H.i(x)>>>16,be=H.i(x)&65535;T[2*U+2*x]+=M*be,X(T,2*U+2*x),T[2*U+2*x+1]+=A*be,X(T,2*U+2*x+1),T[2*U+2*x+1]+=M*ne,X(T,2*U+2*x+1),T[2*U+2*x+2]+=A*ne,X(T,2*U+2*x+2)}for(U=0;U<N;U++)T[U]=T[2*U+1]<<16|T[2*U];for(U=N;U<2*N;U++)T[U]=0;return new s(T,0)};function X(H,N){for(;(H[N]&65535)!=H[N];)H[N+1]+=H[N]>>>16,H[N]&=65535,N++}function ee(H,N){this.g=H,this.h=N}function J(H,N){if(D(N))throw Error("division by zero");if(D(H))return new ee(m,m);if(k(H))return N=J(L(H),N),new ee(L(N.g),L(N.h));if(k(N))return N=J(H,L(N)),new ee(L(N.g),N.h);if(30<H.g.length){if(k(H)||k(N))throw Error("slowDivide_ only works with positive integers.");for(var T=_,U=N;0>=U.l(H);)T=_e(T),U=_e(U);var x=Ce(T,1),A=Ce(U,1);for(U=Ce(U,2),T=Ce(T,2);!D(U);){var M=A.add(U);0>=M.l(H)&&(x=x.add(T),A=M),U=Ce(U,1),T=Ce(T,1)}return N=R(H,x.j(N)),new ee(x,N)}for(x=m;0<=H.l(N);){for(T=Math.max(1,Math.floor(H.m()/N.m())),U=Math.ceil(Math.log(T)/Math.LN2),U=48>=U?1:Math.pow(2,U-48),A=l(T),M=A.j(N);k(M)||0<M.l(H);)T-=U,A=l(T),M=A.j(N);D(A)&&(A=_),x=x.add(A),H=R(H,M)}return new ee(x,H)}n.A=function(H){return J(this,H).h},n.and=function(H){for(var N=Math.max(this.g.length,H.g.length),T=[],U=0;U<N;U++)T[U]=this.i(U)&H.i(U);return new s(T,this.h&H.h)},n.or=function(H){for(var N=Math.max(this.g.length,H.g.length),T=[],U=0;U<N;U++)T[U]=this.i(U)|H.i(U);return new s(T,this.h|H.h)},n.xor=function(H){for(var N=Math.max(this.g.length,H.g.length),T=[],U=0;U<N;U++)T[U]=this.i(U)^H.i(U);return new s(T,this.h^H.h)};function _e(H){for(var N=H.g.length+1,T=[],U=0;U<N;U++)T[U]=H.i(U)<<1|H.i(U-1)>>>31;return new s(T,H.h)}function Ce(H,N){var T=N>>5;N%=32;for(var U=H.g.length-T,x=[],A=0;A<U;A++)x[A]=0<N?H.i(A+T)>>>N|H.i(A+T+1)<<32-N:H.i(A+T);return new s(x,H.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Px=u3.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=u,ol=u3.Integer=s}).apply(typeof l3<"u"?l3:typeof self<"u"?self:typeof window<"u"?window:{});var d1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},sl={};var Nx,pY,Ff,kx,Lg,h1,Ox,Rx,Lx;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,C,S){return h==Array.prototype||h==Object.prototype||(h[C]=S.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof d1=="object"&&d1];for(var C=0;C<h.length;++C){var S=h[C];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var r=t(this);function i(h,C){if(C)e:{var S=r;h=h.split(".");for(var z=0;z<h.length-1;z++){var ce=h[z];if(!(ce in S))break e;S=S[ce]}h=h[h.length-1],z=S[h],C=C(z),C!=z&&C!=null&&e(S,h,{configurable:!0,writable:!0,value:C})}}function o(h,C){h instanceof String&&(h+="");var S=0,z=!1,ce={next:function(){if(!z&&S<h.length){var we=S++;return{value:C(we,h[we]),done:!1}}return z=!0,{done:!0,value:void 0}}};return ce[Symbol.iterator]=function(){return ce},ce}i("Array.prototype.values",function(h){return h||function(){return o(this,function(C,S){return S})}});var s=s||{},a=this||self;function c(h){var C=typeof h;return C=C!="object"?C:h?Array.isArray(h)?"array":C:"null",C=="array"||C=="object"&&typeof h.length=="number"}function l(h){var C=typeof h;return C=="object"&&h!=null||C=="function"}function u(h,C,S){return h.call.apply(h.bind,arguments)}function m(h,C,S){if(!h)throw Error();if(2<arguments.length){var z=Array.prototype.slice.call(arguments,2);return function(){var ce=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ce,z),h.apply(C,ce)}}return function(){return h.apply(C,arguments)}}function _(h,C,S){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:m,_.apply(null,arguments)}function p(h,C){var S=Array.prototype.slice.call(arguments,1);return function(){var z=S.slice();return z.push.apply(z,arguments),h.apply(this,z)}}function D(h,C){function S(){}S.prototype=C.prototype,h.aa=C.prototype,h.prototype=new S,h.prototype.constructor=h,h.Qb=function(z,ce,we){for(var Ge=Array(arguments.length-2),Sn=2;Sn<arguments.length;Sn++)Ge[Sn-2]=arguments[Sn];return C.prototype[ce].apply(z,Ge)}}function k(h){let C=h.length;if(0<C){let S=Array(C);for(let z=0;z<C;z++)S[z]=h[z];return S}return[]}function L(h,C){for(let S=1;S<arguments.length;S++){let z=arguments[S];if(c(z)){let ce=h.length||0,we=z.length||0;h.length=ce+we;for(let Ge=0;Ge<we;Ge++)h[ce+Ge]=z[Ge]}else h.push(z)}}class R{constructor(C,S){this.i=C,this.j=S,this.h=0,this.g=null}get(){let C;return 0<this.h?(this.h--,C=this.g,this.g=C.next,C.next=null):C=this.i(),C}}function X(h){return/^[\s\xa0]*$/.test(h)}function ee(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function J(h){return J[" "](h),h}J[" "]=function(){};var _e=ee().indexOf("Gecko")!=-1&&!(ee().toLowerCase().indexOf("webkit")!=-1&&ee().indexOf("Edge")==-1)&&!(ee().indexOf("Trident")!=-1||ee().indexOf("MSIE")!=-1)&&ee().indexOf("Edge")==-1;function Ce(h,C,S){for(let z in h)C.call(S,h[z],z,h)}function H(h,C){for(let S in h)C.call(void 0,h[S],S,h)}function N(h){let C={};for(let S in h)C[S]=h[S];return C}let T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(h,C){let S,z;for(let ce=1;ce<arguments.length;ce++){z=arguments[ce];for(S in z)h[S]=z[S];for(let we=0;we<T.length;we++)S=T[we],Object.prototype.hasOwnProperty.call(z,S)&&(h[S]=z[S])}}function x(h){var C=1;h=h.split(":");let S=[];for(;0<C&&h.length;)S.push(h.shift()),C--;return h.length&&S.push(h.join(":")),S}function A(h){a.setTimeout(()=>{throw h},0)}function M(){var h=Te;let C=null;return h.g&&(C=h.g,h.g=h.g.next,h.g||(h.h=null),C.next=null),C}class ne{constructor(){this.h=this.g=null}add(C,S){let z=be.get();z.set(C,S),this.h?this.h.next=z:this.g=z,this.h=z}}var be=new R(()=>new De,h=>h.reset());class De{constructor(){this.next=this.g=this.h=null}set(C,S){this.h=C,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let Se,ge=!1,Te=new ne,We=()=>{let h=a.Promise.resolve(void 0);Se=()=>{h.then(Be)}};var Be=()=>{for(var h;h=M();){try{h.h.call(h.g)}catch(S){A(S)}var C=be;C.j(h),100>C.h&&(C.h++,h.next=C.g,C.g=h)}ge=!1};function j(){this.s=this.s,this.C=this.C}j.prototype.s=!1,j.prototype.ma=function(){this.s||(this.s=!0,this.N())},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Q(h,C){this.type=h,this.g=this.target=C,this.defaultPrevented=!1}Q.prototype.h=function(){this.defaultPrevented=!0};var te=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,C=Object.defineProperty({},"passive",{get:function(){h=!0}});try{let S=()=>{};a.addEventListener("test",S,C),a.removeEventListener("test",S,C)}catch{}return h})();function oe(h,C){if(Q.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var S=this.type=h.type,z=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=C,C=h.relatedTarget){if(_e){e:{try{J(C.nodeName);var ce=!0;break e}catch{}ce=!1}ce||(C=null)}}else S=="mouseover"?C=h.fromElement:S=="mouseout"&&(C=h.toElement);this.relatedTarget=C,z?(this.clientX=z.clientX!==void 0?z.clientX:z.pageX,this.clientY=z.clientY!==void 0?z.clientY:z.pageY,this.screenX=z.screenX||0,this.screenY=z.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:de[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&oe.aa.h.call(this)}}D(oe,Q);var de={2:"touch",3:"pen",4:"mouse"};oe.prototype.h=function(){oe.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var pe="closure_listenable_"+(1e6*Math.random()|0),Ee=0;function xe(h,C,S,z,ce){this.listener=h,this.proxy=null,this.src=C,this.type=S,this.capture=!!z,this.ha=ce,this.key=++Ee,this.da=this.fa=!1}function Ne(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function qe(h){this.src=h,this.g={},this.h=0}qe.prototype.add=function(h,C,S,z,ce){var we=h.toString();h=this.g[we],h||(h=this.g[we]=[],this.h++);var Ge=et(h,C,z,ce);return-1<Ge?(C=h[Ge],S||(C.fa=!1)):(C=new xe(C,this.src,we,!!z,ce),C.fa=S,h.push(C)),C};function nt(h,C){var S=C.type;if(S in h.g){var z=h.g[S],ce=Array.prototype.indexOf.call(z,C,void 0),we;(we=0<=ce)&&Array.prototype.splice.call(z,ce,1),we&&(Ne(C),h.g[S].length==0&&(delete h.g[S],h.h--))}}function et(h,C,S,z){for(var ce=0;ce<h.length;++ce){var we=h[ce];if(!we.da&&we.listener==C&&we.capture==!!S&&we.ha==z)return ce}return-1}var vt="closure_lm_"+(1e6*Math.random()|0),W={};function Xe(h,C,S,z,ce){if(z&&z.once)return ze(h,C,S,z,ce);if(Array.isArray(C)){for(var we=0;we<C.length;we++)Xe(h,C[we],S,z,ce);return null}return S=Bt(S),h&&h[pe]?h.K(C,S,l(z)?!!z.capture:!!z,ce):Jt(h,C,S,!1,z,ce)}function Jt(h,C,S,z,ce,we){if(!C)throw Error("Invalid event type");var Ge=l(ce)?!!ce.capture:!!ce,Sn=wn(h);if(Sn||(h[vt]=Sn=new qe(h)),S=Sn.add(C,S,z,Ge,we),S.proxy)return S;if(z=Tt(),S.proxy=z,z.src=h,z.listener=S,h.addEventListener)te||(ce=Ge),ce===void 0&&(ce=!1),h.addEventListener(C.toString(),z,ce);else if(h.attachEvent)h.attachEvent(It(C.toString()),z);else if(h.addListener&&h.removeListener)h.addListener(z);else throw Error("addEventListener and attachEvent are unavailable.");return S}function Tt(){function h(S){return C.call(h.src,h.listener,S)}let C=Ct;return h}function ze(h,C,S,z,ce){if(Array.isArray(C)){for(var we=0;we<C.length;we++)ze(h,C[we],S,z,ce);return null}return S=Bt(S),h&&h[pe]?h.L(C,S,l(z)?!!z.capture:!!z,ce):Jt(h,C,S,!0,z,ce)}function St(h,C,S,z,ce){if(Array.isArray(C))for(var we=0;we<C.length;we++)St(h,C[we],S,z,ce);else z=l(z)?!!z.capture:!!z,S=Bt(S),h&&h[pe]?(h=h.i,C=String(C).toString(),C in h.g&&(we=h.g[C],S=et(we,S,z,ce),-1<S&&(Ne(we[S]),Array.prototype.splice.call(we,S,1),we.length==0&&(delete h.g[C],h.h--)))):h&&(h=wn(h))&&(C=h.g[C.toString()],h=-1,C&&(h=et(C,S,z,ce)),(S=-1<h?C[h]:null)&&ot(S))}function ot(h){if(typeof h!="number"&&h&&!h.da){var C=h.src;if(C&&C[pe])nt(C.i,h);else{var S=h.type,z=h.proxy;C.removeEventListener?C.removeEventListener(S,z,h.capture):C.detachEvent?C.detachEvent(It(S),z):C.addListener&&C.removeListener&&C.removeListener(z),(S=wn(C))?(nt(S,h),S.h==0&&(S.src=null,C[vt]=null)):Ne(h)}}}function It(h){return h in W?W[h]:W[h]="on"+h}function Ct(h,C){if(h.da)h=!0;else{C=new oe(C,this);var S=h.listener,z=h.ha||h.src;h.fa&&ot(h),h=S.call(z,C)}return h}function wn(h){return h=h[vt],h instanceof qe?h:null}var ln="__closure_events_fn_"+(1e9*Math.random()>>>0);function Bt(h){return typeof h=="function"?h:(h[ln]||(h[ln]=function(C){return h.handleEvent(C)}),h[ln])}function Pt(){j.call(this),this.i=new qe(this),this.M=this,this.F=null}D(Pt,j),Pt.prototype[pe]=!0,Pt.prototype.removeEventListener=function(h,C,S,z){St(this,h,C,S,z)};function Nt(h,C){var S,z=h.F;if(z)for(S=[];z;z=z.F)S.push(z);if(h=h.M,z=C.type||C,typeof C=="string")C=new Q(C,h);else if(C instanceof Q)C.target=C.target||h;else{var ce=C;C=new Q(z,h),U(C,ce)}if(ce=!0,S)for(var we=S.length-1;0<=we;we--){var Ge=C.g=S[we];ce=lt(Ge,z,!0,C)&&ce}if(Ge=C.g=h,ce=lt(Ge,z,!0,C)&&ce,ce=lt(Ge,z,!1,C)&&ce,S)for(we=0;we<S.length;we++)Ge=C.g=S[we],ce=lt(Ge,z,!1,C)&&ce}Pt.prototype.N=function(){if(Pt.aa.N.call(this),this.i){var h=this.i,C;for(C in h.g){for(var S=h.g[C],z=0;z<S.length;z++)Ne(S[z]);delete h.g[C],h.h--}}this.F=null},Pt.prototype.K=function(h,C,S,z){return this.i.add(String(h),C,!1,S,z)},Pt.prototype.L=function(h,C,S,z){return this.i.add(String(h),C,!0,S,z)};function lt(h,C,S,z){if(C=h.i.g[String(C)],!C)return!0;C=C.concat();for(var ce=!0,we=0;we<C.length;++we){var Ge=C[we];if(Ge&&!Ge.da&&Ge.capture==S){var Sn=Ge.listener,wr=Ge.ha||Ge.src;Ge.fa&&nt(h.i,Ge),ce=Sn.call(wr,z)!==!1&&ce}}return ce&&!z.defaultPrevented}function Ht(h,C,S){if(typeof h=="function")S&&(h=_(h,S));else if(h&&typeof h.handleEvent=="function")h=_(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(C)?-1:a.setTimeout(h,C||0)}function gt(h){h.g=Ht(()=>{h.g=null,h.i&&(h.i=!1,gt(h))},h.l);let C=h.h;h.h=null,h.m.apply(null,C)}class yr extends j{constructor(C,S){super(),this.m=C,this.l=S,this.h=null,this.i=!1,this.g=null}j(C){this.h=arguments,this.g?this.i=!0:gt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function un(h){j.call(this),this.h=h,this.g={}}D(un,j);var nn=[];function rn(h){Ce(h.g,function(C,S){this.g.hasOwnProperty(S)&&ot(C)},h),h.g={}}un.prototype.N=function(){un.aa.N.call(this),rn(this)},un.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zn=a.JSON.stringify,xt=a.JSON.parse,$n=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function At(){}At.prototype.h=null;function $t(h){return h.h||(h.h=h.i())}function Yn(){}var Wt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Dt(){Q.call(this,"d")}D(Dt,Q);function Cn(){Q.call(this,"c")}D(Cn,Q);var no={},ri=null;function wo(){return ri=ri||new Pt}no.La="serverreachability";function zo(h){Q.call(this,no.La,h)}D(zo,Q);function Et(h){let C=wo();Nt(C,new zo(C))}no.STAT_EVENT="statevent";function Es(h,C){Q.call(this,no.STAT_EVENT,h),this.stat=C}D(Es,Q);function sr(h){let C=wo();Nt(C,new Es(C,h))}no.Ma="timingevent";function ro(h,C){Q.call(this,no.Ma,h),this.size=C}D(ro,Q);function ui(h,C){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},C)}function qn(){this.g=!0}qn.prototype.xa=function(){this.g=!1};function Gr(h,C,S,z,ce,we){h.info(function(){if(h.g)if(we)for(var Ge="",Sn=we.split("&"),wr=0;wr<Sn.length;wr++){var Vt=Sn[wr].split("=");if(1<Vt.length){var tr=Vt[0];Vt=Vt[1];var Cr=tr.split("_");Ge=2<=Cr.length&&Cr[1]=="type"?Ge+(tr+"="+Vt+"&"):Ge+(tr+"=redacted&")}}else Ge=null;else Ge=we;return"XMLHTTP REQ ("+z+") [attempt "+ce+"]: "+C+`
`+S+`
`+Ge})}function ii(h,C,S,z,ce,we,Ge){h.info(function(){return"XMLHTTP RESP ("+z+") [ attempt "+ce+"]: "+C+`
`+S+`
`+we+" "+Ge})}function Co(h,C,S,z){h.info(function(){return"XMLHTTP TEXT ("+C+"): "+$o(h,S)+(z?" "+z:"")})}function Ma(h,C){h.info(function(){return"TIMEOUT: "+C})}qn.prototype.info=function(){};function $o(h,C){if(!h.g)return C;if(!C)return null;try{var S=JSON.parse(C);if(S){for(h=0;h<S.length;h++)if(Array.isArray(S[h])){var z=S[h];if(!(2>z.length)){var ce=z[1];if(Array.isArray(ce)&&!(1>ce.length)){var we=ce[0];if(we!="noop"&&we!="stop"&&we!="close")for(var Ge=1;Ge<ce.length;Ge++)ce[Ge]=""}}}}return zn(S)}catch{return C}}var io={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Eo={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},oo;function Si(){}D(Si,At),Si.prototype.g=function(){return new XMLHttpRequest},Si.prototype.i=function(){return{}},oo=new Si;function Ui(h,C,S,z){this.j=h,this.i=C,this.l=S,this.R=z||1,this.U=new un(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new qo}function qo(){this.i=null,this.g="",this.h=!1}var Pa={},Na={};function ka(h,C,S){h.L=1,h.v=Sc(Io(C)),h.m=S,h.P=!0,Ec(h,null)}function Ec(h,C){h.F=Date.now(),Ic(h),h.A=Io(h.v);var S=h.A,z=h.R;Array.isArray(z)||(z=[String(z)]),Ft(S.i,"t",z),h.C=0,S=h.j.J,h.h=new qo,h.g=br(h.j,S?C:null,!h.m),0<h.O&&(h.M=new yr(_(h.Y,h,h.g),h.O)),C=h.U,S=h.g,z=h.ca;var ce="readystatechange";Array.isArray(ce)||(ce&&(nn[0]=ce.toString()),ce=nn);for(var we=0;we<ce.length;we++){var Ge=Xe(S,ce[we],z||C.handleEvent,!1,C.h||C);if(!Ge)break;C.g[Ge.key]=Ge}C=h.H?N(h.H):{},h.m?(h.u||(h.u="POST"),C["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,C)):(h.u="GET",h.g.ea(h.A,h.u,null,C)),Et(),Gr(h.i,h.u,h.A,h.l,h.R,h.m)}Ui.prototype.ca=function(h){h=h.target;let C=this.M;C&&xo(h)==3?C.j():this.Y(h)},Ui.prototype.Y=function(h){try{if(h==this.g)e:{let Cr=xo(this.g);var C=this.g.Ba();let na=this.g.Z();if(!(3>Cr)&&(Cr!=3||this.g&&(this.h.h||this.g.oa()||ed(this.g)))){this.J||Cr!=4||C==7||(C==8||0>=na?Et(3):Et(2)),zi(this);var S=this.g.Z();this.X=S;t:if(Ch(this)){var z=ed(this.g);h="";var ce=z.length,we=xo(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Is(this),Zs(this);var Ge="";break t}this.h.i=new a.TextDecoder}for(C=0;C<ce;C++)this.h.h=!0,h+=this.h.i.decode(z[C],{stream:!(we&&C==ce-1)});z.length=0,this.h.g+=h,this.C=0,Ge=this.h.g}else Ge=this.g.oa();if(this.o=S==200,ii(this.i,this.u,this.A,this.l,this.R,Cr,S),this.o){if(this.T&&!this.K){t:{if(this.g){var Sn,wr=this.g;if((Sn=wr.g?wr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!X(Sn)){var Vt=Sn;break t}}Vt=null}if(S=Vt)Co(this.i,this.l,S,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xc(this,S);else{this.o=!1,this.s=3,sr(12),Is(this),Zs(this);break e}}if(this.P){S=!0;let dr;for(;!this.J&&this.C<Ge.length;)if(dr=Wu(this,Ge),dr==Na){Cr==4&&(this.s=4,sr(14),S=!1),Co(this.i,this.l,null,"[Incomplete Response]");break}else if(dr==Pa){this.s=4,sr(15),Co(this.i,this.l,Ge,"[Invalid Chunk]"),S=!1;break}else Co(this.i,this.l,dr,null),xc(this,dr);if(Ch(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Cr!=4||Ge.length!=0||this.h.h||(this.s=1,sr(16),S=!1),this.o=this.o&&S,!S)Co(this.i,this.l,Ge,"[Invalid Chunked Response]"),Is(this),Zs(this);else if(0<Ge.length&&!this.W){this.W=!0;var tr=this.j;tr.g==this&&tr.ba&&!tr.M&&(tr.j.info("Great, no buffering proxy detected. Bytes received: "+Ge.length),dt(tr),tr.M=!0,sr(11))}}else Co(this.i,this.l,Ge,null),xc(this,Ge);Cr==4&&Is(this),this.o&&!this.J&&(Cr==4?mn(this.j,this):(this.o=!1,Ic(this)))}else ea(this.g),S==400&&0<Ge.indexOf("Unknown SID")?(this.s=3,sr(12)):(this.s=0,sr(13)),Is(this),Zs(this)}}}catch{}finally{}};function Ch(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Wu(h,C){var S=h.C,z=C.indexOf(`
`,S);return z==-1?Na:(S=Number(C.substring(S,z)),isNaN(S)?Pa:(z+=1,z+S>C.length?Na:(C=C.slice(z,z+S),h.C=z+S,C)))}Ui.prototype.cancel=function(){this.J=!0,Is(this)};function Ic(h){h.S=Date.now()+h.I,Gu(h,h.I)}function Gu(h,C){if(h.B!=null)throw Error("WatchDog timer not null");h.B=ui(_(h.ba,h),C)}function zi(h){h.B&&(a.clearTimeout(h.B),h.B=null)}Ui.prototype.ba=function(){this.B=null;let h=Date.now();0<=h-this.S?(Ma(this.i,this.A),this.L!=2&&(Et(),sr(17)),Is(this),this.s=2,Zs(this)):Gu(this,this.S-h)};function Zs(h){h.j.G==0||h.J||mn(h.j,h)}function Is(h){zi(h);var C=h.M;C&&typeof C.ma=="function"&&C.ma(),h.M=null,rn(h.U),h.g&&(C=h.g,h.g=null,C.abort(),C.ma())}function xc(h,C){try{var S=h.j;if(S.G!=0&&(S.g==h||Oa(S.h,h))){if(!h.K&&Oa(S.h,h)&&S.G==3){try{var z=S.Da.g.parse(C)}catch{z=null}if(Array.isArray(z)&&z.length==3){var ce=z;if(ce[0]==0){e:if(!S.u){if(S.g)if(S.g.F+3e3<h.F)Ut(S),Pc(S);else break e;st(S),sr(18)}}else S.za=ce[1],0<S.za-S.T&&37500>ce[2]&&S.F&&S.v==0&&!S.C&&(S.C=ui(_(S.Za,S),6e3));if(1>=Ho(S.h)&&S.ca){try{S.ca()}catch{}S.ca=void 0}}else Wn(S,11)}else if((h.K||S.g==h)&&Ut(S),!X(C))for(ce=S.Da.g.parse(C),C=0;C<ce.length;C++){let Vt=ce[C];if(S.T=Vt[0],Vt=Vt[1],S.G==2)if(Vt[0]=="c"){S.K=Vt[1],S.ia=Vt[2];let tr=Vt[3];tr!=null&&(S.la=tr,S.j.info("VER="+S.la));let Cr=Vt[4];Cr!=null&&(S.Aa=Cr,S.j.info("SVER="+S.Aa));let na=Vt[5];na!=null&&typeof na=="number"&&0<na&&(z=1.5*na,S.L=z,S.j.info("backChannelRequestTimeoutMs_="+z)),z=S;let dr=h.g;if(dr){let Ms=dr.g?dr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ms){var we=z.h;we.g||Ms.indexOf("spdy")==-1&&Ms.indexOf("quic")==-1&&Ms.indexOf("h2")==-1||(we.j=we.l,we.g=new Set,we.h&&(Qu(we,we.h),we.h=null))}if(z.D){let Nc=dr.g?dr.g.getResponseHeader("X-HTTP-Session-Id"):null;Nc&&(z.ya=Nc,Nn(z.I,z.D,Nc))}}S.G=3,S.l&&S.l.ua(),S.ba&&(S.R=Date.now()-h.F,S.j.info("Handshake RTT: "+S.R+"ms")),z=S;var Ge=h;if(z.qa=Tr(z,z.J?z.ia:null,z.W),Ge.K){_r(z.h,Ge);var Sn=Ge,wr=z.L;wr&&(Sn.I=wr),Sn.B&&(zi(Sn),Ic(Sn)),z.g=Ge}else je(z);0<S.i.length&&P(S)}else Vt[0]!="stop"&&Vt[0]!="close"||Wn(S,7);else S.G==3&&(Vt[0]=="stop"||Vt[0]=="close"?Vt[0]=="stop"?Wn(S,7):ta(S):Vt[0]!="noop"&&S.l&&S.l.ta(Vt),S.v=0)}}Et(4)}catch{}}var Eh=class{constructor(h,C){this.g=h,this.map=C}};function Ku(h){this.l=h||10,a.PerformanceNavigationTiming?(h=a.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Yu(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Ho(h){return h.h?1:h.g?h.g.size:0}function Oa(h,C){return h.h?h.h==C:h.g?h.g.has(C):!1}function Qu(h,C){h.g?h.g.add(C):h.h=C}function _r(h,C){h.h&&h.h==C?h.h=null:h.g&&h.g.has(C)&&h.g.delete(C)}Ku.prototype.cancel=function(){if(this.i=Zu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let h of this.g.values())h.cancel();this.g.clear()}};function Zu(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let C=h.i;for(let S of h.g.values())C=C.concat(S.D);return C}return k(h.i)}function xs(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(c(h)){for(var C=[],S=h.length,z=0;z<S;z++)C.push(h[z]);return C}C=[],S=0;for(z in h)C[S++]=h[z];return C}function El(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(c(h)||typeof h=="string"){var C=[];h=h.length;for(var S=0;S<h;S++)C.push(S);return C}C=[],S=0;for(let z in h)C[S++]=z;return C}}}function Ju(h,C){if(h.forEach&&typeof h.forEach=="function")h.forEach(C,void 0);else if(c(h)||typeof h=="string")Array.prototype.forEach.call(h,C,void 0);else for(var S=El(h),z=xs(h),ce=z.length,we=0;we<ce;we++)C.call(void 0,z[we],S&&S[we],h)}var so=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Lr(h,C){if(h){h=h.split("&");for(var S=0;S<h.length;S++){var z=h[S].indexOf("="),ce=null;if(0<=z){var we=h[S].substring(0,z);ce=h[S].substring(z+1)}else we=h[S];C(we,ce?decodeURIComponent(ce.replace(/\+/g," ")):"")}}}function Di(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Di){this.h=h.h,Il(this,h.j),this.o=h.o,this.g=h.g,xl(this,h.s),this.l=h.l;var C=h.i,S=new Dc;S.i=C.i,C.g&&(S.g=new Map(C.g),S.h=C.h),Wo(this,S),this.m=h.m}else h&&(C=String(h).match(so))?(this.h=!1,Il(this,C[1]||"",!0),this.o=Ss(C[2]||""),this.g=Ss(C[3]||"",!0),xl(this,C[4]),this.l=Ss(C[5]||"",!0),Wo(this,C[6]||"",!0),this.m=Ss(C[7]||"")):(this.h=!1,this.i=new Dc(null,this.h))}Di.prototype.toString=function(){var h=[],C=this.j;C&&h.push(Go(C,Ih,!0),":");var S=this.g;return(S||C=="file")&&(h.push("//"),(C=this.o)&&h.push(Go(C,Ih,!0),"@"),h.push(encodeURIComponent(String(S)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.s,S!=null&&h.push(":",String(S))),(S=this.l)&&(this.g&&S.charAt(0)!="/"&&h.push("/"),h.push(Go(S,S.charAt(0)=="/"?Xu:Op,!0))),(S=this.i.toString())&&h.push("?",S),(S=this.m)&&h.push("#",Go(S,Ko)),h.join("")};function Io(h){return new Di(h)}function Il(h,C,S){h.j=S?Ss(C,!0):C,h.j&&(h.j=h.j.replace(/:$/,""))}function xl(h,C){if(C){if(C=Number(C),isNaN(C)||0>C)throw Error("Bad port number "+C);h.s=C}else h.s=null}function Wo(h,C,S){C instanceof Dc?(h.i=C,Rp(h.i,h.h)):(S||(C=Go(C,xh)),h.i=new Dc(C,h.h))}function Nn(h,C,S){h.i.set(C,S)}function Sc(h){return Nn(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Ss(h,C){return h?C?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Go(h,C,S){return typeof h=="string"?(h=encodeURI(h).replace(C,kp),S&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function kp(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Ih=/[#\/\?@]/g,Op=/[#\?:]/g,Xu=/[#\?]/g,xh=/[#\?@]/g,Ko=/#/g;function Dc(h,C){this.h=this.g=null,this.i=h||null,this.j=!!C}function $i(h){h.g||(h.g=new Map,h.h=0,h.i&&Lr(h.i,function(C,S){h.add(decodeURIComponent(C.replace(/\+/g," ")),S)}))}n=Dc.prototype,n.add=function(h,C){$i(this),this.i=null,h=Ra(this,h);var S=this.g.get(h);return S||this.g.set(h,S=[]),S.push(C),this.h+=1,this};function Sl(h,C){$i(h),C=Ra(h,C),h.g.has(C)&&(h.i=null,h.h-=h.g.get(C).length,h.g.delete(C))}function Sh(h,C){return $i(h),C=Ra(h,C),h.g.has(C)}n.forEach=function(h,C){$i(this),this.g.forEach(function(S,z){S.forEach(function(ce){h.call(C,ce,z,this)},this)},this)},n.na=function(){$i(this);let h=Array.from(this.g.values()),C=Array.from(this.g.keys()),S=[];for(let z=0;z<C.length;z++){let ce=h[z];for(let we=0;we<ce.length;we++)S.push(C[z])}return S},n.V=function(h){$i(this);let C=[];if(typeof h=="string")Sh(this,h)&&(C=C.concat(this.g.get(Ra(this,h))));else{h=Array.from(this.g.values());for(let S=0;S<h.length;S++)C=C.concat(h[S])}return C},n.set=function(h,C){return $i(this),this.i=null,h=Ra(this,h),Sh(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[C]),this.h+=1,this},n.get=function(h,C){return h?(h=this.V(h),0<h.length?String(h[0]):C):C};function Ft(h,C,S){Sl(h,C),0<S.length&&(h.i=null,h.g.set(Ra(h,C),k(S)),h.h+=S.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let h=[],C=Array.from(this.g.keys());for(var S=0;S<C.length;S++){var z=C[S];let we=encodeURIComponent(String(z)),Ge=this.V(z);for(z=0;z<Ge.length;z++){var ce=we;Ge[z]!==""&&(ce+="="+encodeURIComponent(String(Ge[z]))),h.push(ce)}}return this.i=h.join("&")};function Ra(h,C){return C=String(C),h.j&&(C=C.toLowerCase()),C}function Rp(h,C){C&&!h.j&&($i(h),h.i=null,h.g.forEach(function(S,z){var ce=z.toLowerCase();z!=ce&&(Sl(this,z),Ft(this,ce,S))},h)),h.j=C}function Lp(h,C){let S=new qn;if(a.Image){let z=new Image;z.onload=p(di,S,"TestLoadImage: loaded",!0,C,z),z.onerror=p(di,S,"TestLoadImage: error",!1,C,z),z.onabort=p(di,S,"TestLoadImage: abort",!1,C,z),z.ontimeout=p(di,S,"TestLoadImage: timeout",!1,C,z),a.setTimeout(function(){z.ontimeout&&z.ontimeout()},1e4),z.src=h}else C(!1)}function Js(h,C){let S=new qn,z=new AbortController,ce=setTimeout(()=>{z.abort(),di(S,"TestPingServer: timeout",!1,C)},1e4);fetch(h,{signal:z.signal}).then(we=>{clearTimeout(ce),we.ok?di(S,"TestPingServer: ok",!0,C):di(S,"TestPingServer: server error",!1,C)}).catch(()=>{clearTimeout(ce),di(S,"TestPingServer: error",!1,C)})}function di(h,C,S,z,ce){try{ce&&(ce.onload=null,ce.onerror=null,ce.onabort=null,ce.ontimeout=null),z(S)}catch{}}function Fp(){this.g=new $n}function Vp(h,C,S){let z=S||"";try{Ju(h,function(ce,we){let Ge=ce;l(ce)&&(Ge=zn(ce)),C.push(z+we+"="+encodeURIComponent(Ge))})}catch(ce){throw C.push(z+"type="+encodeURIComponent("_badmap")),ce}}function Ds(h){this.l=h.Ub||null,this.j=h.eb||!1}D(Ds,At),Ds.prototype.g=function(){return new La(this.l,this.j)},Ds.prototype.i=(function(h){return function(){return h}})({});function La(h,C){Pt.call(this),this.D=h,this.o=C,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(La,Pt),n=La.prototype,n.open=function(h,C){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=C,this.readyState=1,ao(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let C={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(C.body=h),(this.D||a).fetch(new Request(this.A,C)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Tc(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ao(this)),this.g&&(this.readyState=3,ao(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Fa(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Fa(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var C=h.value?h.value:new Uint8Array(0);(C=this.v.decode(C,{stream:!h.done}))&&(this.response=this.responseText+=C)}h.done?Tc(this):ao(this),this.readyState==3&&Fa(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Tc(this))},n.Qa=function(h){this.g&&(this.response=h,Tc(this))},n.ga=function(){this.g&&Tc(this)};function Tc(h){h.readyState=4,h.l=null,h.j=null,h.v=null,ao(h)}n.setRequestHeader=function(h,C){this.u.append(h,C)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let h=[],C=this.h.entries();for(var S=C.next();!S.done;)S=S.value,h.push(S[0]+": "+S[1]),S=C.next();return h.join(`\r
`)};function ao(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(La.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Dh(h){let C="";return Ce(h,function(S,z){C+=z,C+=":",C+=S,C+=`\r
`}),C}function Ac(h,C,S){e:{for(z in S){var z=!1;break e}z=!0}z||(S=Dh(S),typeof h=="string"?S!=null&&encodeURIComponent(String(S)):Nn(h,C,S))}function Hn(h){Pt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(Hn,Pt);var Th=/^https?$/i,Xs=["POST","PUT"];n=Hn.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,C,S,z){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);C=C?C.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():oo.g(),this.v=this.o?$t(this.o):$t(oo),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(C,String(h),!0),this.B=!1}catch(we){Dl(this,we);return}if(h=S||"",S=new Map(this.headers),z)if(Object.getPrototypeOf(z)===Object.prototype)for(var ce in z)S.set(ce,z[ce]);else if(typeof z.keys=="function"&&typeof z.get=="function")for(let we of z.keys())S.set(we,z.get(we));else throw Error("Unknown input type for opt_headers: "+String(z));z=Array.from(S.keys()).find(we=>we.toLowerCase()=="content-type"),ce=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Xs,C,void 0))||z||ce||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[we,Ge]of S)this.g.setRequestHeader(we,Ge);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Al(this),this.u=!0,this.g.send(h),this.u=!1}catch(we){Dl(this,we)}};function Dl(h,C){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=C,h.m=5,Mc(h),Ts(h)}function Mc(h){h.A||(h.A=!0,Nt(h,"complete"),Nt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Nt(this,"complete"),Nt(this,"abort"),Ts(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ts(this,!0)),Hn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Tl(this):this.bb())},n.bb=function(){Tl(this)};function Tl(h){if(h.h&&typeof s<"u"&&(!h.v[1]||xo(h)!=4||h.Z()!=2)){if(h.u&&xo(h)==4)Ht(h.Ea,0,h);else if(Nt(h,"readystatechange"),xo(h)==4){h.h=!1;try{let Ge=h.Z();e:switch(Ge){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var C=!0;break e;default:C=!1}var S;if(!(S=C)){var z;if(z=Ge===0){var ce=String(h.D).match(so)[1]||null;!ce&&a.self&&a.self.location&&(ce=a.self.location.protocol.slice(0,-1)),z=!Th.test(ce?ce.toLowerCase():"")}S=z}if(S)Nt(h,"complete"),Nt(h,"success");else{h.m=6;try{var we=2<xo(h)?h.g.statusText:""}catch{we=""}h.l=we+" ["+h.Z()+"]",Mc(h)}}finally{Ts(h)}}}}function Ts(h,C){if(h.g){Al(h);let S=h.g,z=h.v[0]?()=>{}:null;h.g=null,h.v=null,C||Nt(h,"ready");try{S.onreadystatechange=z}catch{}}}function Al(h){h.I&&(a.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function xo(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<xo(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var C=this.g.responseText;return h&&C.indexOf(h)==0&&(C=C.substring(h.length)),xt(C)}};function ed(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function ea(h){let C={};h=(h.g&&2<=xo(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let z=0;z<h.length;z++){if(X(h[z]))continue;var S=x(h[z]);let ce=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();let we=C[ce]||[];C[ce]=we,we.push(S)}H(C,function(z){return z.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function co(h,C,S){return S&&S.internalChannelParams&&S.internalChannelParams[h]||C}function td(h){this.Aa=0,this.i=[],this.j=new qn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=co("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=co("baseRetryDelayMs",5e3,h),this.cb=co("retryDelaySeedMs",1e4,h),this.Wa=co("forwardChannelMaxRetries",2,h),this.wa=co("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Ku(h&&h.concurrentRequestLimit),this.Da=new Fp,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=td.prototype,n.la=8,n.G=1,n.connect=function(h,C,S,z){sr(0),this.W=h,this.H=C||{},S&&z!==void 0&&(this.H.OSID=S,this.H.OAID=z),this.F=this.X,this.I=Tr(this,null,this.W),P(this)};function ta(h){if(y(h),h.G==3){var C=h.U++,S=Io(h.I);if(Nn(S,"SID",h.K),Nn(S,"RID",C),Nn(S,"TYPE","terminate"),he(h,S),C=new Ui(h,h.j,C),C.L=2,C.v=Sc(Io(S)),S=!1,a.navigator&&a.navigator.sendBeacon)try{S=a.navigator.sendBeacon(C.v.toString(),"")}catch{}!S&&a.Image&&(new Image().src=C.v,S=!0),S||(C.g=br(C.j,null),C.g.ea(C.v)),C.F=Date.now(),Ic(C)}Fn(h)}function Pc(h){h.g&&(dt(h),h.g.cancel(),h.g=null)}function y(h){Pc(h),h.u&&(a.clearTimeout(h.u),h.u=null),Ut(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&a.clearTimeout(h.s),h.s=null)}function P(h){if(!Yu(h.h)&&!h.s){h.s=!0;var C=h.Ga;Se||We(),ge||(Se(),ge=!0),Te.add(C,h),h.B=0}}function G(h,C){return Ho(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=C.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=ui(_(h.Ga,h,C),er(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;let ce=new Ui(this,this.j,h),we=this.o;if(this.S&&(we?(we=N(we),U(we,this.S)):we=this.S),this.m!==null||this.O||(ce.H=we,we=null),this.P)e:{for(var C=0,S=0;S<this.i.length;S++){t:{var z=this.i[S];if("__data__"in z.map&&(z=z.map.__data__,typeof z=="string")){z=z.length;break t}z=void 0}if(z===void 0)break;if(C+=z,4096<C){C=S;break e}if(C===4096||S===this.i.length-1){C=S+1;break e}}C=1e3}else C=1e3;C=Me(this,ce,C),S=Io(this.I),Nn(S,"RID",h),Nn(S,"CVER",22),this.D&&Nn(S,"X-HTTP-Session-Id",this.D),he(this,S),we&&(this.O?C="headers="+encodeURIComponent(String(Dh(we)))+"&"+C:this.m&&Ac(S,this.m,we)),Qu(this.h,ce),this.Ua&&Nn(S,"TYPE","init"),this.P?(Nn(S,"$req",C),Nn(S,"SID","null"),ce.T=!0,ka(ce,S,null)):ka(ce,S,C),this.G=2}}else this.G==3&&(h?re(this,h):this.i.length==0||Yu(this.h)||re(this))};function re(h,C){var S;C?S=C.l:S=h.U++;let z=Io(h.I);Nn(z,"SID",h.K),Nn(z,"RID",S),Nn(z,"AID",h.T),he(h,z),h.m&&h.o&&Ac(z,h.m,h.o),S=new Ui(h,h.j,S,h.B+1),h.m===null&&(S.H=h.o),C&&(h.i=C.D.concat(h.i)),C=Me(h,S,1e3),S.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Qu(h.h,S),ka(S,z,C)}function he(h,C){h.H&&Ce(h.H,function(S,z){Nn(C,z,S)}),h.l&&Ju({},function(S,z){Nn(C,z,S)})}function Me(h,C,S){S=Math.min(h.i.length,S);var z=h.l?_(h.l.Na,h.l,h):null;e:{var ce=h.i;let we=-1;for(;;){let Ge=["count="+S];we==-1?0<S?(we=ce[0].g,Ge.push("ofs="+we)):we=0:Ge.push("ofs="+we);let Sn=!0;for(let wr=0;wr<S;wr++){let Vt=ce[wr].g,tr=ce[wr].map;if(Vt-=we,0>Vt)we=Math.max(0,ce[wr].g-100),Sn=!1;else try{Vp(tr,Ge,"req"+Vt+"_")}catch{z&&z(tr)}}if(Sn){z=Ge.join("&");break e}}}return h=h.i.splice(0,S),C.D=h,z}function je(h){if(!h.g&&!h.u){h.Y=1;var C=h.Fa;Se||We(),ge||(Se(),ge=!0),Te.add(C,h),h.v=0}}function st(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=ui(_(h.Fa,h),er(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,Lt(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=ui(_(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,sr(10),Pc(this),Lt(this))};function dt(h){h.A!=null&&(a.clearTimeout(h.A),h.A=null)}function Lt(h){h.g=new Ui(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var C=Io(h.qa);Nn(C,"RID","rpc"),Nn(C,"SID",h.K),Nn(C,"AID",h.T),Nn(C,"CI",h.F?"0":"1"),!h.F&&h.ja&&Nn(C,"TO",h.ja),Nn(C,"TYPE","xmlhttp"),he(h,C),h.m&&h.o&&Ac(C,h.m,h.o),h.L&&(h.g.I=h.L);var S=h.g;h=h.ia,S.L=1,S.v=Sc(Io(C)),S.m=null,S.P=!0,Ec(S,h)}n.Za=function(){this.C!=null&&(this.C=null,Pc(this),st(this),sr(19))};function Ut(h){h.C!=null&&(a.clearTimeout(h.C),h.C=null)}function mn(h,C){var S=null;if(h.g==C){Ut(h),dt(h),h.g=null;var z=2}else if(Oa(h.h,C))S=C.D,_r(h.h,C),z=1;else return;if(h.G!=0){if(C.o)if(z==1){S=C.m?C.m.length:0,C=Date.now()-C.F;var ce=h.B;z=wo(),Nt(z,new ro(z,S)),P(h)}else je(h);else if(ce=C.s,ce==3||ce==0&&0<C.X||!(z==1&&G(h,C)||z==2&&st(h)))switch(S&&0<S.length&&(C=h.h,C.i=C.i.concat(S)),ce){case 1:Wn(h,5);break;case 4:Wn(h,10);break;case 3:Wn(h,6);break;default:Wn(h,2)}}}function er(h,C){let S=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(S*=2),S*C}function Wn(h,C){if(h.j.info("Error code "+C),C==2){var S=_(h.fb,h),z=h.Xa;let ce=!z;z=new Di(z||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Il(z,"https"),Sc(z),ce?Lp(z.toString(),S):Js(z.toString(),S)}else sr(2);h.G=0,h.l&&h.l.sa(C),Fn(h),y(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),sr(2)):(this.j.info("Failed to ping google.com"),sr(1))};function Fn(h){if(h.G=0,h.ka=[],h.l){let C=Zu(h.h);(C.length!=0||h.i.length!=0)&&(L(h.ka,C),L(h.ka,h.i),h.h.i.length=0,k(h.i),h.i.length=0),h.l.ra()}}function Tr(h,C,S){var z=S instanceof Di?Io(S):new Di(S);if(z.g!="")C&&(z.g=C+"."+z.g),xl(z,z.s);else{var ce=a.location;z=ce.protocol,C=C?C+"."+ce.hostname:ce.hostname,ce=+ce.port;var we=new Di(null);z&&Il(we,z),C&&(we.g=C),ce&&xl(we,ce),S&&(we.l=S),z=we}return S=h.D,C=h.ya,S&&C&&Nn(z,S,C),Nn(z,"VER",h.la),he(h,z),z}function br(h,C,S){if(C&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return C=h.Ca&&!h.pa?new Hn(new Ds({eb:S})):new Hn(h.pa),C.Ha(h.J),C}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Kr(){}n=Kr.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function So(){}So.prototype.g=function(h,C){return new ar(h,C)};function ar(h,C){Pt.call(this),this.g=new td(C),this.l=h,this.h=C&&C.messageUrlParams||null,h=C&&C.messageHeaders||null,C&&C.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=C&&C.initMessageHeaders||null,C&&C.messageContentType&&(h?h["X-WebChannel-Content-Type"]=C.messageContentType:h={"X-WebChannel-Content-Type":C.messageContentType}),C&&C.va&&(h?h["X-WebChannel-Client-Profile"]=C.va:h={"X-WebChannel-Client-Profile":C.va}),this.g.S=h,(h=C&&C.Sb)&&!X(h)&&(this.g.m=h),this.v=C&&C.supportsCrossDomainXhr||!1,this.u=C&&C.sendRawJson||!1,(C=C&&C.httpSessionIdParam)&&!X(C)&&(this.g.D=C,h=this.h,h!==null&&C in h&&(h=this.h,C in h&&delete h[C])),this.j=new Yo(this)}D(ar,Pt),ar.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ar.prototype.close=function(){ta(this.g)},ar.prototype.o=function(h){var C=this.g;if(typeof h=="string"){var S={};S.__data__=h,h=S}else this.u&&(S={},S.__data__=zn(h),h=S);C.i.push(new Eh(C.Ya++,h)),C.G==3&&P(C)},ar.prototype.N=function(){this.g.l=null,delete this.j,ta(this.g),delete this.g,ar.aa.N.call(this)};function As(h){Dt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var C=h.__sm__;if(C){e:{for(let S in C){h=S;break e}h=void 0}(this.i=h)&&(h=this.i,C=C!==null&&h in C?C[h]:void 0),this.data=C}else this.data=h}D(As,Dt);function Ml(){Cn.call(this),this.status=1}D(Ml,Cn);function Yo(h){this.g=h}D(Yo,Kr),Yo.prototype.ua=function(){Nt(this.g,"a")},Yo.prototype.ta=function(h){Nt(this.g,new As(h))},Yo.prototype.sa=function(h){Nt(this.g,new Ml)},Yo.prototype.ra=function(){Nt(this.g,"b")},So.prototype.createWebChannel=So.prototype.g,ar.prototype.send=ar.prototype.o,ar.prototype.open=ar.prototype.m,ar.prototype.close=ar.prototype.close,Lx=sl.createWebChannelTransport=function(){return new So},Rx=sl.getStatEventTarget=function(){return wo()},Ox=sl.Event=no,h1=sl.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},io.NO_ERROR=0,io.TIMEOUT=8,io.HTTP_ERROR=6,Lg=sl.ErrorCode=io,Eo.COMPLETE="complete",kx=sl.EventType=Eo,Yn.EventType=Wt,Wt.OPEN="a",Wt.CLOSE="b",Wt.ERROR="c",Wt.MESSAGE="d",Pt.prototype.listen=Pt.prototype.K,Ff=sl.WebChannel=Yn,pY=sl.FetchXmlHttpFactory=Ds,Hn.prototype.listenOnce=Hn.prototype.L,Hn.prototype.getLastError=Hn.prototype.Ka,Hn.prototype.getLastErrorCode=Hn.prototype.Ba,Hn.prototype.getStatus=Hn.prototype.Z,Hn.prototype.getResponseJson=Hn.prototype.Oa,Hn.prototype.getResponseText=Hn.prototype.oa,Hn.prototype.send=Hn.prototype.ea,Hn.prototype.setWithCredentials=Hn.prototype.Ha,Nx=sl.XhrIo=Hn}).apply(typeof d1<"u"?d1:typeof self<"u"?self:typeof window<"u"?window:{});var d3="@firebase/firestore",h3="4.8.0";var yi=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};yi.UNAUTHENTICATED=new yi(null),yi.GOOGLE_CREDENTIALS=new yi("google-credentials-uid"),yi.FIRST_PARTY=new yi("first-party-uid"),yi.MOCK_USER=new yi("mock-user");var ip="11.10.0";var eh=new nc("@firebase/firestore");function Vf(){return eh.logLevel}function it(n,...e){if(eh.logLevel<=fn.DEBUG){let t=e.map(ID);eh.debug(`Firestore (${ip}): ${n}`,...t)}}function al(n,...e){if(eh.logLevel<=fn.ERROR){let t=e.map(ID);eh.error(`Firestore (${ip}): ${n}`,...t)}}function Tu(n,...e){if(eh.logLevel<=fn.WARN){let t=e.map(ID);eh.warn(`Firestore (${ip}): ${n}`,...t)}}function ID(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Rt(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,r4(n,r,t)}function r4(n,e,t){let r=`FIRESTORE (${ip}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw al(r),new Error(r)}function Ln(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||r4(e,i,r)}function Qt(n,e){return n}var Re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},tt=class extends fs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ba=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var _1=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Ux=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(yi.UNAUTHENTICATED))}shutdown(){}},zx=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},$x=class{constructor(e){this.t=e,this.currentUser=yi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ln(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new ba;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ba,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>F(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{it("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(it("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ba)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(it("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ln(typeof r.accessToken=="string",31837,{l:r}),new _1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Ln(e===null||typeof e=="string",2055,{h:e}),new yi(e)}},qx=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=yi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},Hx=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new qx(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(yi.FIRST_PARTY))}shutdown(){}invalidateToken(){}},b1=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Wx=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Vo(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ln(this.o===void 0,3512);let r=o=>{o.error!=null&&it("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,it("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{it("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):it("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new b1(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ln(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new b1(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function mY(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function i4(){return new TextEncoder}var zg=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=mY(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function hn(n,e){return n<e?-1:n>e?1:0}function Gx(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return hn(r,i);{let o=i4(),s=gY(o.encode(f3(n,t)),o.encode(f3(e,t)));return s!==0?s:hn(r,i)}}t+=r>65535?2:1}return hn(n.length,e.length)}function f3(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function gY(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return hn(n[t],e[t]);return hn(n.length,e.length)}function Wf(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var p3="__name__",w1=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Rt(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Rt(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return hn(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):Gx(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ol.fromString(e.substring(4,e.length-2))}},mr=class n extends w1{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new tt(Re.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},vY=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ms=class n extends w1{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return vY.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===p3}static keyField(){return new n([p3])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new tt(Re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new tt(Re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new tt(Re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new tt(Re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Mt=class n{constructor(e){this.path=e}static fromPath(e){return new n(mr.fromString(e))}static fromName(e){return new n(mr.fromString(e).popFirst(5))}static empty(){return new n(mr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&mr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return mr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new mr(e.slice()))}};function o4(n,e,t){if(!t)throw new tt(Re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function yY(n,e,t,r){if(e===!0&&r===!0)throw new tt(Re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function m3(n){if(!Mt.isDocumentKey(n))throw new tt(Re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function g3(n){if(Mt.isDocumentKey(n))throw new tt(Re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function s4(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function tb(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Rt(12329,{type:typeof n})}function wa(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new tt(Re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=tb(n);throw new tt(Re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function _Y(n,e){if(e<=0)throw new tt(Re.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function ni(n,e){let t={typeString:n};return e&&(t.value=e),t}function t0(n,e){if(!s4(n))throw new tt(Re.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new tt(Re.INVALID_ARGUMENT,t);return!0}var v3=-62135596800,y3=1e6,wt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*y3);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new tt(Re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new tt(Re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<v3)throw new tt(Re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new tt(Re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/y3}_compareTo(e){return this.seconds===e.seconds?hn(this.nanoseconds,e.nanoseconds):hn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(t0(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-v3;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};wt._jsonSchemaVersion="firestore/timestamp/1.0",wt._jsonSchema={type:ni("string",wt._jsonSchemaVersion),seconds:ni("number"),nanoseconds:ni("number")};var tn=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new wt(0,0))}static max(){return new n(new wt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var $g=-1,Kx=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};Kx.UNKNOWN_ID=-1;function bY(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=tn.fromTimestamp(r===1e9?new wt(t+1,0):new wt(t,r));return new th(i,Mt.empty(),e)}function wY(n){return new th(n.readTime,n.key,$g)}var th=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(tn.min(),Mt.empty(),$g)}static max(){return new n(tn.max(),Mt.empty(),$g)}};function CY(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Mt.comparator(n.documentKey,e.documentKey),t!==0?t:hn(n.largestBatchId,e.largestBatchId))}var EY="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Yx=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function op(n){return F(this,null,function*(){if(n.code!==Re.FAILED_PRECONDITION||n.message!==EY)throw n;it("LocalStore","Unexpectedly lost primary lease")})}var $e=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Rt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;t(e[l]).next(u=>{s[l]=u,++a,a===o&&r(s)},u=>i(u))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function IY(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function sp(n){return n.name==="IndexedDbTransactionError"}var xD=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),SD=-1;function nb(n){return n==null}function qg(n){return n===0&&1/n==-1/0}function xY(n){return typeof n=="number"&&Number.isInteger(n)&&!qg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var a4="";function SY(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=_3(e)),e=DY(n.get(t),e);return _3(e)}function DY(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case a4:t+="";break;default:t+=o}}return t}function _3(n){return n+a4+""}var TY="remoteDocuments",c4="owner";var l4="mutationQueues";var u4="mutations";var d4="documentMutations",AY="remoteDocumentsV14";var h4="remoteDocumentGlobal";var f4="targets";var p4="targetDocuments";var m4="targetGlobal",g4="collectionParents";var v4="clientMetadata";var y4="bundles";var _4="namedQueries";var MY="indexConfiguration";var PY="indexState";var NY="indexEntries";var b4="documentOverlays";var kY="globals";var OY=[l4,u4,d4,TY,f4,c4,m4,p4,v4,h4,g4,y4,_4],ACe=[...OY,b4],RY=[l4,u4,d4,AY,f4,c4,m4,p4,v4,h4,g4,y4,_4,b4],LY=RY,FY=[...LY,MY,PY,NY];var MCe=[...FY,kY];function b3(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ou(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function w4(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Or=class n{constructor(e,t){this.comparator=e,this.root=t||sc.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,sc.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sc.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zf(this.root,e,this.comparator,!1)}getReverseIterator(){return new zf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zf(this.root,e,this.comparator,!0)}},zf=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},sc=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Rt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Rt(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw Rt(27949);return e+(this.isRed()?0:1)}};sc.EMPTY=null,sc.RED=!0,sc.BLACK=!1;sc.EMPTY=new class{constructor(){this.size=0}get key(){throw Rt(57766)}get value(){throw Rt(16141)}get color(){throw Rt(16727)}get left(){throw Rt(29726)}get right(){throw Rt(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new sc(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var _i=class n{constructor(e){this.comparator=e,this.data=new Or(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new C1(this.data.getIterator())}getIteratorFrom(e){return new C1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},C1=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Gs=class n{constructor(e){this.fields=e,e.sort(ms.comparator)}static empty(){return new n([])}unionWith(e){let t=new _i(ms.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Wf(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var E1=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Qi=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new E1("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return hn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Qi.EMPTY_BYTE_STRING=new Qi("");var VY=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function cl(n){if(Ln(!!n,39018),typeof n=="string"){let e=0,t=VY.exec(n);if(Ln(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:pr(n.seconds),nanos:pr(n.nanos)}}function pr(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ll(n){return typeof n=="string"?Qi.fromBase64String(n):Qi.fromUint8Array(n)}var C4="server_timestamp",E4="__type__",I4="__previous_value__",x4="__local_write_time__";function DD(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[E4])===null||t===void 0?void 0:t.stringValue)===C4}function rb(n){let e=n.mapValue.fields[I4];return DD(e)?rb(e):e}function Hg(n){let e=cl(n.mapValue.fields[x4].timestampValue);return new wt(e.seconds,e.nanos)}var Qx=class{constructor(e,t,r,i,o,s,a,c,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l,this.isUsingEmulator=u}},I1="(default)",x1=class n{constructor(e,t){this.projectId=e,this.database=t||I1}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===I1}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var TD="__type__",S4="__max__",f1={mapValue:{fields:{__type__:{stringValue:S4}}}},AD="__vector__",Gf="value";function Au(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?DD(n)?4:T4(n)?9007199254740991:D4(n)?10:11:Rt(28295,{value:n})}function uc(n,e){if(n===e)return!0;let t=Au(n);if(t!==Au(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Hg(n).isEqual(Hg(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=cl(i.timestampValue),a=cl(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return ll(i.bytesValue).isEqual(ll(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return pr(i.geoPointValue.latitude)===pr(o.geoPointValue.latitude)&&pr(i.geoPointValue.longitude)===pr(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return pr(i.integerValue)===pr(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=pr(i.doubleValue),a=pr(o.doubleValue);return s===a?qg(s)===qg(a):isNaN(s)&&isNaN(a)}return!1})(n,e);case 9:return Wf(n.arrayValue.values||[],e.arrayValue.values||[],uc);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(b3(s)!==b3(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!uc(s[c],a[c])))return!1;return!0})(n,e);default:return Rt(52216,{left:n})}}function Wg(n,e){return(n.values||[]).find(t=>uc(t,e))!==void 0}function Kf(n,e){if(n===e)return 0;let t=Au(n),r=Au(e);if(t!==r)return hn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return hn(n.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=pr(o.integerValue||o.doubleValue),c=pr(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return w3(n.timestampValue,e.timestampValue);case 4:return w3(Hg(n),Hg(e));case 5:return Gx(n.stringValue,e.stringValue);case 6:return(function(o,s){let a=ll(o),c=ll(s);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let u=hn(a[l],c[l]);if(u!==0)return u}return hn(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=hn(pr(o.latitude),pr(s.latitude));return a!==0?a:hn(pr(o.longitude),pr(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return C3(n.arrayValue,e.arrayValue);case 10:return(function(o,s){var a,c,l,u;let m=o.fields||{},_=s.fields||{},p=(a=m[Gf])===null||a===void 0?void 0:a.arrayValue,D=(c=_[Gf])===null||c===void 0?void 0:c.arrayValue,k=hn(((l=p?.values)===null||l===void 0?void 0:l.length)||0,((u=D?.values)===null||u===void 0?void 0:u.length)||0);return k!==0?k:C3(p,D)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===f1.mapValue&&s===f1.mapValue)return 0;if(o===f1.mapValue)return 1;if(s===f1.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let m=0;m<c.length&&m<u.length;++m){let _=Gx(c[m],u[m]);if(_!==0)return _;let p=Kf(a[c[m]],l[u[m]]);if(p!==0)return p}return hn(c.length,u.length)})(n.mapValue,e.mapValue);default:throw Rt(23264,{le:t})}}function w3(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return hn(n,e);let t=cl(n),r=cl(e),i=hn(t.seconds,r.seconds);return i!==0?i:hn(t.nanos,r.nanos)}function C3(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Kf(t[i],r[i]);if(o)return o}return hn(t.length,r.length)}function Yf(n){return Zx(n)}function Zx(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=cl(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ll(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Mt.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=Zx(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Zx(t.fields[s])}`;return i+"}"})(n.mapValue):Rt(61005,{value:n})}function g1(n){switch(Au(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=rb(n);return e?16+g1(e):16;case 5:return 2*n.stringValue.length;case 6:return ll(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+g1(o),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Ou(r.fields,(o,s)=>{i+=o.length+g1(s)}),i})(n.mapValue);default:throw Rt(13486,{value:n})}}function E3(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Jx(n){return!!n&&"integerValue"in n}function MD(n){return!!n&&"arrayValue"in n}function I3(n){return!!n&&"nullValue"in n}function x3(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function v1(n){return!!n&&"mapValue"in n}function D4(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[TD])===null||t===void 0?void 0:t.stringValue)===AD}function Vg(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Ou(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Vg(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Vg(n.arrayValue.values[t]);return e}return Object.assign({},n)}function T4(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===S4}var NCe={mapValue:{fields:{[TD]:{stringValue:AD},[Gf]:{arrayValue:{}}}}};var ps=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!v1(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vg(t)}setAll(e){let t=ms.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Vg(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());v1(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return uc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];v1(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ou(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Vg(this.value))}};function A4(n){let e=[];return Ou(n.fields,(t,r)=>{let i=new ms([t]);if(v1(r)){let o=A4(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Gs(e)}var Ca=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,tn.min(),tn.min(),tn.min(),ps.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,tn.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,tn.min(),tn.min(),ps.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,tn.min(),tn.min(),ps.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(tn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ps.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ps.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=tn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Qf=class{constructor(e,t){this.position=e,this.inclusive=t}};function S3(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=Mt.comparator(Mt.fromName(s.referenceValue),t.key):r=Kf(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function D3(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!uc(n.position[t],e.position[t]))return!1;return!0}var nh=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function jY(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var S1=class{},ti=class n extends S1{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new eS(e,t,r):t==="array-contains"?new rS(e,r):t==="in"?new iS(e,r):t==="not-in"?new oS(e,r):t==="array-contains-any"?new sS(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new tS(e,r):new nS(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Kf(t,this.value)):t!==null&&Au(this.value)===Au(t)&&this.matchesComparison(Kf(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Rt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ea=class n extends S1{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return M4(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function M4(n){return n.op==="and"}function P4(n){return BY(n)&&M4(n)}function BY(n){for(let e of n.filters)if(e instanceof Ea)return!1;return!0}function Xx(n){if(n instanceof ti)return n.field.canonicalString()+n.op.toString()+Yf(n.value);if(P4(n))return n.filters.map(e=>Xx(e)).join(",");{let e=n.filters.map(t=>Xx(t)).join(",");return`${n.op}(${e})`}}function N4(n,e){return n instanceof ti?(function(r,i){return i instanceof ti&&r.op===i.op&&r.field.isEqual(i.field)&&uc(r.value,i.value)})(n,e):n instanceof Ea?(function(r,i){return i instanceof Ea&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&N4(s,i.filters[a]),!0):!1})(n,e):void Rt(19439)}function k4(n){return n instanceof ti?(function(t){return`${t.field.canonicalString()} ${t.op} ${Yf(t.value)}`})(n):n instanceof Ea?(function(t){return t.op.toString()+" {"+t.getFilters().map(k4).join(" ,")+"}"})(n):"Filter"}var eS=class extends ti{constructor(e,t,r){super(e,t,r),this.key=Mt.fromName(r.referenceValue)}matches(e){let t=Mt.comparator(e.key,this.key);return this.matchesComparison(t)}},tS=class extends ti{constructor(e,t){super(e,"in",t),this.keys=O4("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},nS=class extends ti{constructor(e,t){super(e,"not-in",t),this.keys=O4("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function O4(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Mt.fromName(r.referenceValue))}var rS=class extends ti{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return MD(t)&&Wg(t.arrayValue,this.value)}},iS=class extends ti{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Wg(this.value.arrayValue,t)}},oS=class extends ti{constructor(e,t){super(e,"not-in",t)}matches(e){if(Wg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Wg(this.value.arrayValue,t)}},sS=class extends ti{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!MD(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Wg(this.value.arrayValue,r))}};var aS=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function T3(n,e=null,t=[],r=[],i=null,o=null,s=null){return new aS(n,e,t,r,i,o,s)}function PD(n){let e=Qt(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Xx(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),nb(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Yf(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Yf(r)).join(",")),e.Pe=t}return e.Pe}function ND(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!jY(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!N4(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!D3(n.startAt,e.startAt)&&D3(n.endAt,e.endAt)}function cS(n){return Mt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Mu=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function UY(n,e,t,r,i,o,s,a){return new Mu(n,e,t,r,i,o,s,a)}function kD(n){return new Mu(n)}function A3(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function R4(n){return n.collectionGroup!==null}function jg(n){let e=Qt(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new _i(ms.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new nh(o,r))}),t.has(ms.keyField().canonicalString())||e.Te.push(new nh(ms.keyField(),r))}return e.Te}function ac(n){let e=Qt(n);return e.Ie||(e.Ie=zY(e,jg(n))),e.Ie}function zY(n,e){if(n.limitType==="F")return T3(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new nh(i.field,o)});let t=n.endAt?new Qf(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Qf(n.startAt.position,n.startAt.inclusive):null;return T3(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function lS(n,e){let t=n.filters.concat([e]);return new Mu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function D1(n,e,t){return new Mu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ib(n,e){return ND(ac(n),ac(e))&&n.limitType===e.limitType}function L4(n){return`${PD(ac(n))}|lt:${n.limitType}`}function jf(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>k4(i)).join(", ")}]`),nb(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Yf(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Yf(i)).join(",")),`Target(${r})`})(ac(n))}; limitType=${n.limitType})`}function ob(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Mt.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of jg(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,c){let l=S3(s,a,c);return s.inclusive?l<=0:l<0})(r.startAt,jg(r),i)||r.endAt&&!(function(s,a,c){let l=S3(s,a,c);return s.inclusive?l>=0:l>0})(r.endAt,jg(r),i))})(n,e)}function $Y(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function F4(n){return(e,t)=>{let r=!1;for(let i of jg(n)){let o=qY(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function qY(n,e,t){let r=n.field.isKeyField()?Mt.comparator(e.key,t.key):(function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?Kf(c,l):Rt(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Rt(19790,{direction:n.dir})}}var ul=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ou(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return w4(this.inner)}size(){return this.innerSize}};var HY=new Or(Mt.comparator);function dl(){return HY}var V4=new Or(Mt.comparator);function Fg(...n){let e=V4;for(let t of n)e=e.insert(t.key,t);return e}function j4(n){let e=V4;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Qd(){return Bg()}function B4(){return Bg()}function Bg(){return new ul(n=>n.toString(),(n,e)=>n.isEqual(e))}var WY=new Or(Mt.comparator),GY=new _i(Mt.comparator);function yn(...n){let e=GY;for(let t of n)e=e.add(t);return e}var KY=new _i(hn);function YY(){return KY}function OD(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qg(e)?"-0":e}}function U4(n){return{integerValue:""+n}}function QY(n,e){return xY(e)?U4(e):OD(n,e)}var Zf=class{constructor(){this._=void 0}};function ZY(n,e,t){return n instanceof Jf?(function(i,o){let s={fields:{[E4]:{stringValue:C4},[x4]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&DD(o)&&(o=rb(o)),o&&(s.fields[I4]=o),{mapValue:s}})(t,e):n instanceof rh?$4(n,e):n instanceof ih?q4(n,e):(function(i,o){let s=z4(i,o),a=M3(s)+M3(i.Ee);return Jx(s)&&Jx(i.Ee)?U4(a):OD(i.serializer,a)})(n,e)}function JY(n,e,t){return n instanceof rh?$4(n,e):n instanceof ih?q4(n,e):t}function z4(n,e){return n instanceof Xf?(function(r){return Jx(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var Jf=class extends Zf{},rh=class extends Zf{constructor(e){super(),this.elements=e}};function $4(n,e){let t=H4(e);for(let r of n.elements)t.some(i=>uc(i,r))||t.push(r);return{arrayValue:{values:t}}}var ih=class extends Zf{constructor(e){super(),this.elements=e}};function q4(n,e){let t=H4(e);for(let r of n.elements)t=t.filter(i=>!uc(i,r));return{arrayValue:{values:t}}}var Xf=class extends Zf{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function M3(n){return pr(n.integerValue||n.doubleValue)}function H4(n){return MD(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function XY(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof rh&&i instanceof rh||r instanceof ih&&i instanceof ih?Wf(r.elements,i.elements,uc):r instanceof Xf&&i instanceof Xf?uc(r.Ee,i.Ee):r instanceof Jf&&i instanceof Jf})(n.transform,e.transform)}var uS=class{constructor(e,t){this.version=e,this.transformResults=t}},cc=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function y1(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var ep=class{};function W4(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Gg(n.key,cc.none()):new oh(n.key,n.data,cc.none());{let t=n.data,r=ps.empty(),i=new _i(ms.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new dc(n.key,r,new Gs(i.toArray()),cc.none())}}function eQ(n,e,t){n instanceof oh?(function(i,o,s){let a=i.value.clone(),c=N3(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(n,e,t):n instanceof dc?(function(i,o,s){if(!y1(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=N3(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(G4(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(n,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function Ug(n,e,t,r){return n instanceof oh?(function(o,s,a,c){if(!y1(o.precondition,s))return a;let l=o.value.clone(),u=k3(o.fieldTransforms,c,s);return l.setAll(u),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(n,e,t,r):n instanceof dc?(function(o,s,a,c){if(!y1(o.precondition,s))return a;let l=k3(o.fieldTransforms,c,s),u=s.data;return u.setAll(G4(o)),u.setAll(l),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(m=>m.field))})(n,e,t,r):(function(o,s,a){return y1(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(n,e,t)}function tQ(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=z4(r.transform,i||null);o!=null&&(t===null&&(t=ps.empty()),t.set(r.field,o))}return t||null}function P3(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Wf(r,i,(o,s)=>XY(o,s))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var oh=class extends ep{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},dc=class extends ep{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function G4(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function N3(n,e,t){let r=new Map;Ln(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,JY(s,a,t[i]))}return r}function k3(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,ZY(o,s,e))}return r}var Gg=class extends ep{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},dS=class extends ep{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var hS=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&eQ(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ug(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Ug(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=B4();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=W4(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(tn.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),yn())}isEqual(e){return this.batchId===e.batchId&&Wf(this.mutations,e.mutations,(t,r)=>P3(t,r))&&Wf(this.baseMutations,e.baseMutations,(t,r)=>P3(t,r))}},fS=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ln(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return WY})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var pS=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var mS=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Xr,xn;function nQ(n){switch(n){case Re.OK:return Rt(64938);case Re.CANCELLED:case Re.UNKNOWN:case Re.DEADLINE_EXCEEDED:case Re.RESOURCE_EXHAUSTED:case Re.INTERNAL:case Re.UNAVAILABLE:case Re.UNAUTHENTICATED:return!1;case Re.INVALID_ARGUMENT:case Re.NOT_FOUND:case Re.ALREADY_EXISTS:case Re.PERMISSION_DENIED:case Re.FAILED_PRECONDITION:case Re.ABORTED:case Re.OUT_OF_RANGE:case Re.UNIMPLEMENTED:case Re.DATA_LOSS:return!0;default:return Rt(15467,{code:n})}}function K4(n){if(n===void 0)return al("GRPC error has no .code"),Re.UNKNOWN;switch(n){case Xr.OK:return Re.OK;case Xr.CANCELLED:return Re.CANCELLED;case Xr.UNKNOWN:return Re.UNKNOWN;case Xr.DEADLINE_EXCEEDED:return Re.DEADLINE_EXCEEDED;case Xr.RESOURCE_EXHAUSTED:return Re.RESOURCE_EXHAUSTED;case Xr.INTERNAL:return Re.INTERNAL;case Xr.UNAVAILABLE:return Re.UNAVAILABLE;case Xr.UNAUTHENTICATED:return Re.UNAUTHENTICATED;case Xr.INVALID_ARGUMENT:return Re.INVALID_ARGUMENT;case Xr.NOT_FOUND:return Re.NOT_FOUND;case Xr.ALREADY_EXISTS:return Re.ALREADY_EXISTS;case Xr.PERMISSION_DENIED:return Re.PERMISSION_DENIED;case Xr.FAILED_PRECONDITION:return Re.FAILED_PRECONDITION;case Xr.ABORTED:return Re.ABORTED;case Xr.OUT_OF_RANGE:return Re.OUT_OF_RANGE;case Xr.UNIMPLEMENTED:return Re.UNIMPLEMENTED;case Xr.DATA_LOSS:return Re.DATA_LOSS;default:return Rt(39323,{code:n})}}(xn=Xr||(Xr={}))[xn.OK=0]="OK",xn[xn.CANCELLED=1]="CANCELLED",xn[xn.UNKNOWN=2]="UNKNOWN",xn[xn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xn[xn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xn[xn.NOT_FOUND=5]="NOT_FOUND",xn[xn.ALREADY_EXISTS=6]="ALREADY_EXISTS",xn[xn.PERMISSION_DENIED=7]="PERMISSION_DENIED",xn[xn.UNAUTHENTICATED=16]="UNAUTHENTICATED",xn[xn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xn[xn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xn[xn.ABORTED=10]="ABORTED",xn[xn.OUT_OF_RANGE=11]="OUT_OF_RANGE",xn[xn.UNIMPLEMENTED=12]="UNIMPLEMENTED",xn[xn.INTERNAL=13]="INTERNAL",xn[xn.UNAVAILABLE=14]="UNAVAILABLE",xn[xn.DATA_LOSS=15]="DATA_LOSS";var O3=null;var rQ=new ol([4294967295,4294967295],0);function R3(n){let e=i4().encode(n),t=new Px;return t.update(e),new Uint8Array(t.digest())}function L3(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ol([t,r],0),new ol([i,o],0)]}var gS=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Zd(`Invalid padding: ${t}`);if(r<0)throw new Zd(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Zd(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Zd(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=ol.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(ol.fromNumber(r)));return i.compare(rQ)===1&&(i=new ol([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=R3(e),[r,i]=L3(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let t=R3(e),[r,i]=L3(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Zd=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var T1=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Kg.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(tn.min(),i,new Or(hn),dl(),yn())}},Kg=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,yn(),yn(),yn())}};var $f=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},A1=class{constructor(e,t){this.targetId=e,this.De=t}},M1=class{constructor(e,t,r=Qi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},P1=class{constructor(){this.ve=0,this.Ce=F3(),this.Fe=Qi.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=yn(),t=yn(),r=yn();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Rt(38017,{changeType:o})}}),new Kg(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=F3()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ln(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},vS=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=dl(),this.je=p1(),this.Je=p1(),this.He=new Or(hn)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:Rt(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(cS(o))if(r===0){let s=new Mt(o.path);this.Xe(t,s,Ca.newNoDocument(s,tn.min()))}else Ln(r===1,20013,{expectedCount:r});else{let s=this.ot(t);if(s!==r){let a=this._t(e),c=a?this.ut(a,e,s):1;if(c!==0){this.rt(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,l)}O3?.ct((function(u,m,_,p,D){var k,L,R,X,ee,J;let _e={localCacheCount:u,existenceFilterCount:m.count,databaseId:_.database,projectId:_.projectId},Ce=m.unchangedNames;return Ce&&(_e.bloomFilter={applied:D===0,hashCount:(k=Ce?.hashCount)!==null&&k!==void 0?k:0,bitmapLength:(X=(R=(L=Ce?.bits)===null||L===void 0?void 0:L.bitmap)===null||R===void 0?void 0:R.length)!==null&&X!==void 0?X:0,padding:(J=(ee=Ce?.bits)===null||ee===void 0?void 0:ee.padding)!==null&&J!==void 0?J:0,mightContain:H=>{var N;return(N=p?.mightContain(H))!==null&&N!==void 0&&N}}),_e})(s,e.De,this.We.lt(),a,c))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=ll(r).toUint8Array()}catch(c){if(c instanceof E1)return Tu("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new gS(s,i,o)}catch(c){return Tu(c instanceof Zd?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&cS(a.target)){let c=new Mt(a.target.path);this.Tt(c).has(s)||this.It(s,c)||this.Xe(s,c,Ca.newNoDocument(c,e))}o.Ne&&(t.set(s,o.Le()),o.ke())}});let r=yn();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.st(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new T1(e,t,this.He,this.ze,r);return this.ze=dl(),this.je=p1(),this.Je=p1(),this.He=new Or(hn),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new P1,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new _i(hn),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new _i(hn),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||it("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new P1),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function p1(){return new Or(Mt.comparator)}function F3(){return new Or(Mt.comparator)}var iQ={asc:"ASCENDING",desc:"DESCENDING"},oQ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sQ={and:"AND",or:"OR"},yS=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function _S(n,e){return n.useProto3Json||nb(e)?e:{value:e}}function N1(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Y4(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function aQ(n,e){return N1(n,e.toTimestamp())}function lc(n){return Ln(!!n,49232),tn.fromTimestamp((function(t){let r=cl(t);return new wt(r.seconds,r.nanos)})(n))}function RD(n,e){return bS(n,e).canonicalString()}function bS(n,e){let t=(function(i){return new mr(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Q4(n){let e=mr.fromString(n);return Ln(tL(e),10190,{key:e.toString()}),e}function wS(n,e){return RD(n.databaseId,e.path)}function Fx(n,e){let t=Q4(e);if(t.get(1)!==n.databaseId.projectId)throw new tt(Re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new tt(Re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Mt(J4(t))}function Z4(n,e){return RD(n.databaseId,e)}function cQ(n){let e=Q4(n);return e.length===4?mr.emptyPath():J4(e)}function CS(n){return new mr(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function J4(n){return Ln(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function V3(n,e,t){return{name:wS(n,e),fields:t.value.mapValue.fields}}function lQ(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Rt(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,u){return l.useProto3Json?(Ln(u===void 0||typeof u=="string",58123),Qi.fromBase64String(u||"")):(Ln(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),Qi.fromUint8Array(u||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(l){let u=l.code===void 0?Re.UNKNOWN:K4(l.code);return new tt(u,l.message||"")})(s);t=new M1(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Fx(n,r.document.name),o=lc(r.document.updateTime),s=r.document.createTime?lc(r.document.createTime):tn.min(),a=new ps({mapValue:{fields:r.document.fields}}),c=Ca.newFoundDocument(i,o,s,a),l=r.targetIds||[],u=r.removedTargetIds||[];t=new $f(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Fx(n,r.document),o=r.readTime?lc(r.readTime):tn.min(),s=Ca.newNoDocument(i,o),a=r.removedTargetIds||[];t=new $f([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Fx(n,r.document),o=r.removedTargetIds||[];t=new $f([],o,i,null)}else{if(!("filter"in e))return Rt(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new mS(i,o),a=r.targetId;t=new A1(a,s)}}return t}function uQ(n,e){let t;if(e instanceof oh)t={update:V3(n,e.key,e.value)};else if(e instanceof Gg)t={delete:wS(n,e.key)};else if(e instanceof dc)t={update:V3(n,e.key,e.data),updateMask:_Q(e.fieldMask)};else{if(!(e instanceof dS))return Rt(16599,{Rt:e.type});t={verify:wS(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof Jf)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof rh)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ih)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Xf)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw Rt(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:aQ(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Rt(27497)})(n,e.precondition)),t}function dQ(n,e){return n&&n.length>0?(Ln(e!==void 0,14353),n.map(t=>(function(i,o){let s=i.updateTime?lc(i.updateTime):lc(o);return s.isEqual(tn.min())&&(s=lc(o)),new uS(s,i.transformResults||[])})(t,e))):[]}function hQ(n,e){return{documents:[Z4(n,e.path)]}}function fQ(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Z4(n,i);let o=(function(l){if(l.length!==0)return eL(Ea.create(l,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(u=>(function(_){return{field:Bf(_.field),direction:gQ(_.dir)}})(u))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=_S(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:t,parent:i}}function pQ(n){let e=cQ(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Ln(r===1,65062);let u=t.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let o=[];t.where&&(o=(function(m){let _=X4(m);return _ instanceof Ea&&P4(_)?_.getFilters():[_]})(t.where));let s=[];t.orderBy&&(s=(function(m){return m.map(_=>(function(D){return new nh(Uf(D.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(D.direction))})(_))})(t.orderBy));let a=null;t.limit&&(a=(function(m){let _;return _=typeof m=="object"?m.value:m,nb(_)?null:_})(t.limit));let c=null;t.startAt&&(c=(function(m){let _=!!m.before,p=m.values||[];return new Qf(p,_)})(t.startAt));let l=null;return t.endAt&&(l=(function(m){let _=!m.before,p=m.values||[];return new Qf(p,_)})(t.endAt)),UY(e,i,s,o,a,"F",c,l)}function mQ(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Rt(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function X4(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Uf(t.unaryFilter.field);return ti.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Uf(t.unaryFilter.field);return ti.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Uf(t.unaryFilter.field);return ti.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Uf(t.unaryFilter.field);return ti.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Rt(61313);default:return Rt(60726)}})(n):n.fieldFilter!==void 0?(function(t){return ti.create(Uf(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Rt(58110);default:return Rt(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ea.create(t.compositeFilter.filters.map(r=>X4(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Rt(1026)}})(t.compositeFilter.op))})(n):Rt(30097,{filter:n})}function gQ(n){return iQ[n]}function vQ(n){return oQ[n]}function yQ(n){return sQ[n]}function Bf(n){return{fieldPath:n.canonicalString()}}function Uf(n){return ms.fromServerFormat(n.fieldPath)}function eL(n){return n instanceof ti?(function(t){if(t.op==="=="){if(x3(t.value))return{unaryFilter:{field:Bf(t.field),op:"IS_NAN"}};if(I3(t.value))return{unaryFilter:{field:Bf(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(x3(t.value))return{unaryFilter:{field:Bf(t.field),op:"IS_NOT_NAN"}};if(I3(t.value))return{unaryFilter:{field:Bf(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bf(t.field),op:vQ(t.op),value:t.value}}})(n):n instanceof Ea?(function(t){let r=t.getFilters().map(i=>eL(i));return r.length===1?r[0]:{compositeFilter:{op:yQ(t.op),filters:r}}})(n):Rt(54877,{filter:n})}function _Q(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function tL(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Yg=class n{constructor(e,t,r,i,o=tn.min(),s=tn.min(),a=Qi.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var ES=class{constructor(e){this.gt=e}};function bQ(n){let e=pQ({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?D1(e,e.limit,"L"):e}var k1=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(pr(e.integerValue));else if("doubleValue"in e){let r=pr(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),qg(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=cl(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(ll(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?T4(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):D4(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):Rt(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let s=Gf,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(pr(a)),this.xt(s,t),this.Dt(o[s],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),Mt.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};k1.Ut=new k1;var IS=class{constructor(){this.Dn=new xS}addToCollectionParentIndex(e,t){return this.Dn.add(t),$e.resolve()}getCollectionParents(e,t){return $e.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return $e.resolve()}deleteFieldIndex(e,t){return $e.resolve()}deleteAllFieldIndexes(e){return $e.resolve()}createTargetIndexes(e,t){return $e.resolve()}getDocumentsMatchingTarget(e,t){return $e.resolve(null)}getIndexType(e,t){return $e.resolve(0)}getFieldIndexes(e,t){return $e.resolve([])}getNextCollectionGroupToUpdate(e){return $e.resolve(null)}getMinOffset(e,t){return $e.resolve(th.min())}getMinOffsetFromCollectionGroup(e,t){return $e.resolve(th.min())}updateCollectionGroup(e,t,r){return $e.resolve()}updateIndexEntries(e,t){return $e.resolve()}},xS=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new _i(mr.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new _i(mr.comparator)).toArray()}};var kCe=new Uint8Array(0);var j3={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},nL=41943040,Ws=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Ws.DEFAULT_COLLECTION_PERCENTILE=10,Ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ws.DEFAULT=new Ws(nL,Ws.DEFAULT_COLLECTION_PERCENTILE,Ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ws.DISABLED=new Ws(-1,0,0);var Qg=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var B3="LruGarbageCollector",wQ=1048576;function U3([n,e],[t,r]){let i=hn(n,t);return i===0?hn(e,r):i}var SS=class{constructor(e){this.Tr=e,this.buffer=new _i(U3),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();U3(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},DS=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){it(B3,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>F(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){sp(t)?it(B3,"Ignoring IndexedDB error during garbage collection: ",t):yield op(t)}yield this.Rr(3e5)}))}},TS=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return $e.resolve(xD.ue);let r=new SS(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(it("LruGarbageCollector","Garbage collection skipped; disabled"),$e.resolve(j3)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(it("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),j3):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,s,a,c,l,u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(it("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,s=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,a=Date.now(),this.removeTargets(e,r,t))).next(m=>(o=m,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(l=Date.now(),Vf()<=fn.DEBUG&&it("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-u}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${m} documents in `+(l-c)+`ms
Total Duration: ${l-u}ms`),$e.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:m})))}};function CQ(n,e){return new TS(n,e)}var AS=class{constructor(){this.changes=new ul(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ca.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?$e.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var MS=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var PS=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Ug(r.mutation,i,Gs.empty(),wt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,yn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=yn()){let i=Qd();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Fg();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Qd();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,yn()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=dl(),s=Bg(),a=(function(){return Bg()})();return t.forEach((c,l)=>{let u=r.get(l.key);i.has(l.key)&&(u===void 0||u.mutation instanceof dc)?o=o.insert(l.key,l):u!==void 0?(s.set(l.key,u.mutation.getFieldMask()),Ug(u.mutation,l,u.mutation.getFieldMask(),wt.now())):s.set(l.key,Gs.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,u)=>s.set(l,u)),t.forEach((l,u)=>{var m;return a.set(l,new MS(u,(m=s.get(l))!==null&&m!==void 0?m:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Bg(),i=new Or((s,a)=>s-a),o=yn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let u=r.get(c)||Gs.empty();u=a.applyToLocalView(l,u),r.set(c,u);let m=(i.get(a.batchId)||yn()).add(c);i=i.insert(a.batchId,m)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,u=c.value,m=B4();u.forEach(_=>{if(!o.has(_)){let p=W4(t.get(_),r.get(_));p!==null&&m.set(_,p),o=o.add(_)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,m))}return $e.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(s){return Mt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):R4(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):$e.resolve(Qd()),a=$g,c=o;return s.next(l=>$e.forEach(l,(u,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),o.get(u)?$e.resolve():this.remoteDocumentCache.getEntry(e,u).next(_=>{c=c.insert(u,_)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,yn())).next(u=>({batchId:a,changes:j4(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Mt(t)).next(r=>{let i=Fg();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Fg();return this.indexManager.getCollectionParents(e,o).next(a=>$e.forEach(a,c=>{let l=(function(m,_){return new Mu(_,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)})(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(u=>{u.forEach((m,_)=>{s=s.insert(m,_)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,l)=>{let u=l.getKey();s.get(u)===null&&(s=s.insert(u,Ca.newInvalidDocument(u)))});let a=Fg();return s.forEach((c,l)=>{let u=o.get(c);u!==void 0&&Ug(u.mutation,l,Gs.empty(),wt.now()),ob(t,l)&&(a=a.insert(c,l))}),a})}};var NS=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return $e.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:lc(i.createTime)}})(t)),$e.resolve()}getNamedQuery(e,t){return $e.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:bQ(i.bundledQuery),readTime:lc(i.readTime)}})(t)),$e.resolve()}};var kS=class{constructor(){this.overlays=new Or(Mt.comparator),this.kr=new Map}getOverlay(e,t){return $e.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Qd();return $e.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),$e.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),$e.resolve()}getOverlaysForCollection(e,t,r){let i=Qd(),o=t.length+1,s=new Mt(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return $e.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Or((l,u)=>l-u),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let u=o.get(l.largestBatchId);u===null&&(u=Qd(),o=o.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}let a=Qd(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=i)););return $e.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new pS(t,r));let o=this.kr.get(t);o===void 0&&(o=yn(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var OS=class{constructor(){this.sessionToken=Qi.EMPTY_BYTE_STRING}getSessionToken(e){return $e.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,$e.resolve()}};var Zg=class{constructor(){this.qr=new _i(ei.Qr),this.$r=new _i(ei.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new ei(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new ei(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new Mt(new mr([])),r=new ei(t,e),i=new ei(t,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new Mt(new mr([])),r=new ei(t,e),i=new ei(t,e+1),o=yn();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new ei(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},ei=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Mt.comparator(e.key,t.key)||hn(e.Hr,t.Hr)}static Ur(e,t){return hn(e.Hr,t.Hr)||Mt.comparator(e.key,t.key)}};var RS=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new _i(ei.Qr)}checkEmpty(e){return $e.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new hS(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new ei(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return $e.resolve(s)}lookupMutationBatch(e,t){return $e.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return $e.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return $e.resolve(this.mutationQueue.length===0?SD:this.er-1)}getAllMutationBatches(e){return $e.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new ei(t,0),i=new ei(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),$e.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _i(hn);return t.forEach(i=>{let o=new ei(i,0),s=new ei(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),$e.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;Mt.isDocumentKey(o)||(o=o.child(""));let s=new ei(new Mt(o),0),a=new _i(hn);return this.Yr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.Hr)),!0)},s),$e.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Ln(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return $e.forEach(t.mutations,i=>{let o=new ei(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new ei(t,0),i=this.Yr.firstAfterOrEqual(r);return $e.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,$e.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var LS=class{constructor(e){this.ni=e,this.docs=(function(){return new Or(Mt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return $e.resolve(r?r.document.mutableCopy():Ca.newInvalidDocument(t))}getEntries(e,t){let r=dl();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Ca.newInvalidDocument(i))}),$e.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=dl(),s=t.path,a=new Mt(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:u}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||CY(wY(u),r)<=0||(i.has(u.key)||ob(t,u))&&(o=o.insert(u.key,u.mutableCopy()))}return $e.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Rt(9500)}ri(e,t){return $e.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new FS(this)}getSize(e){return $e.resolve(this.size)}},FS=class extends AS{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),$e.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var VS=class{constructor(e){this.persistence=e,this.ii=new ul(t=>PD(t),ND),this.lastRemoteSnapshotVersion=tn.min(),this.highestTargetId=0,this.si=0,this.oi=new Zg,this.targetCount=0,this._i=Qg.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),$e.resolve()}getLastRemoteSnapshotVersion(e){return $e.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $e.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),$e.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),$e.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new Qg(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,$e.resolve()}updateTargetData(e,t){return this.hr(t),$e.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,$e.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),$e.waitFor(o).next(()=>i)}getTargetCount(e){return $e.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return $e.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),$e.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),$e.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),$e.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return $e.resolve(r)}containsKey(e,t){return $e.resolve(this.oi.containsKey(t))}};var O1=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new xD(0),this.ci=!1,this.ci=!0,this.li=new OS,this.referenceDelegate=e(this),this.hi=new VS(this),this.indexManager=new IS,this.remoteDocumentCache=(function(i){return new LS(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new ES(t),this.Ti=new NS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new kS,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new RS(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){it("MemoryPersistence","Starting transaction:",e);let i=new jS(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return $e.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},jS=class extends Yx{constructor(e){super(),this.currentSequenceNumber=e}},BS=class n{constructor(e){this.persistence=e,this.Ai=new Zg,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw Rt(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),$e.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),$e.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),$e.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $e.forEach(this.mi,r=>{let i=Mt.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,tn.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return $e.or([()=>$e.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},R1=class n{constructor(e,t){this.persistence=e,this.gi=new ul(r=>SY(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=CQ(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return $e.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return $e.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?$e.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,tn.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),$e.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),$e.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),$e.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),$e.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=g1(e.data.value)),t}Sr(e,t,r){return $e.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return $e.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var US=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=yn(),i=yn();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var zS=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var $S=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return DO()?8:IY(vi())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new zS;return this.ws(e,t,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,t,s,a.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Vf()<=fn.DEBUG&&it("QueryEngine","SDK will not create cache indexes for query:",jf(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),$e.resolve()):(Vf()<=fn.DEBUG&&it("QueryEngine","Query:",jf(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Vf()<=fn.DEBUG&&it("QueryEngine","The SDK decides to create cache indexes for query:",jf(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ac(t))):$e.resolve())}ps(e,t){if(A3(t))return $e.resolve(null);let r=ac(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=D1(t,null,"F"),r=ac(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=yn(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.bs(t,a);return this.Ds(t,l,s,c.readTime)?this.ps(e,D1(t,null,"F")):this.vs(e,l,t,c)}))})))}ys(e,t,r,i){return A3(t)||i.isEqual(tn.min())?$e.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ds(t,s,r,i)?$e.resolve(null):(Vf()<=fn.DEBUG&&it("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),jf(t)),this.vs(e,s,t,bY(i,$g)).next(a=>a))})}bs(e,t){let r=new _i(F4(e));return t.forEach((i,o)=>{ob(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return Vf()<=fn.DEBUG&&it("QueryEngine","Using full collection scan to execute query:",jf(t)),this.gs.getDocumentsMatchingQuery(e,t,th.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var LD="LocalStore",EQ=3e8,qS=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new Or(hn),this.Ms=new ul(o=>PD(o),ND),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new PS(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function IQ(n,e,t,r){return new qS(n,e,t,r)}function rL(n,e){return F(this,null,function*(){let t=Qt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=yn();for(let l of i){s.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}for(let l of o){a.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}return t.localDocuments.getDocuments(r,c).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function xQ(n,e){let t=Qt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return(function(a,c,l,u){let m=l.batch,_=m.keys(),p=$e.resolve();return _.forEach(D=>{p=p.next(()=>u.getEntry(c,D)).next(k=>{let L=l.docVersions.get(D);Ln(L!==null,48541),k.version.compareTo(L)<0&&(m.applyToRemoteDocument(k,l),k.isValidDocument()&&(k.setReadTime(l.commitVersion),u.addEntry(k)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(c,m))})(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=yn();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function iL(n){let e=Qt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function SQ(n,e){let t=Qt(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((u,m)=>{let _=i.get(m);if(!_)return;a.push(t.hi.removeMatchingKeys(o,u.removedDocuments,m).next(()=>t.hi.addMatchingKeys(o,u.addedDocuments,m)));let p=_.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(m)!==null?p=p.withResumeToken(Qi.EMPTY_BYTE_STRING,tn.min()).withLastLimboFreeSnapshotVersion(tn.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,r)),i=i.insert(m,p),(function(k,L,R){return k.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=EQ?!0:R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size>0})(_,p,u)&&a.push(t.hi.updateTargetData(o,p))});let c=dl(),l=yn();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,u))}),a.push(DQ(o,s,e.documentUpdates).next(u=>{c=u.Ls,l=u.ks})),!r.isEqual(tn.min())){let u=t.hi.getLastRemoteSnapshotVersion(o).next(m=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(u)}return $e.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(t.Fs=i,o))}function DQ(n,e,t){let r=yn(),i=yn();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=dl();return t.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(tn.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):it(LD,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ls:s,ks:i}})}function TQ(n,e){let t=Qt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=SD),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function AQ(n,e){let t=Qt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,$e.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new Yg(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}function HS(n,e,t){return F(this,null,function*(){let r=Qt(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!sp(s))throw s;it(LD,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function z3(n,e,t){let r=Qt(n),i=tn.min(),o=yn();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(c,l,u){let m=Qt(c),_=m.Ms.get(u);return _!==void 0?$e.resolve(m.Fs.get(_)):m.hi.getTargetData(l,u)})(r,s,ac(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:tn.min(),t?o:yn())).next(a=>(MQ(r,$Y(e),a),{documents:a,qs:o})))}function MQ(n,e,t){let r=n.xs.get(e)||tn.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}var L1=class{constructor(){this.activeTargetIds=YY()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var WS=class{constructor(){this.Fo=new L1,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new L1,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var GS=class{xo(e){}shutdown(){}};var $3="ConnectivityMonitor",F1=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){it($3,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){it($3,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var m1=null;function KS(){return m1===null?m1=(function(){return 268435456+Math.round(2147483648*Math.random())})():m1++,"0x"+m1.toString(16)}var Vx="RestConnection",PQ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},YS=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===I1?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=KS(),a=this.Go(e,t.toUriEncodedString());it(Vx,`Sending RPC '${e}' ${s}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,o);let{host:l}=new URL(a),u=fu(l);return this.jo(e,a,c,r,u).then(m=>(it(Vx,`Received RPC '${e}' ${s}: `,m),m),m=>{throw Tu(Vx,`RPC '${e}' ${s} failed with error: `,m,"url: ",a,"request:",r),m})}Jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ip})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=PQ[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var QS=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var Yi="WebChannelConnection",ZS=class extends YS{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let s=KS();return new Promise((a,c)=>{let l=new Nx;l.setWithCredentials(!0),l.listenOnce(kx.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Lg.NO_ERROR:let m=l.getResponseJson();it(Yi,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(m)),a(m);break;case Lg.TIMEOUT:it(Yi,`RPC '${e}' ${s} timed out`),c(new tt(Re.DEADLINE_EXCEEDED,"Request time out"));break;case Lg.HTTP_ERROR:let _=l.getStatus();if(it(Yi,`RPC '${e}' ${s} failed with status:`,_,"response text:",l.getResponseText()),_>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);let D=p?.error;if(D&&D.status&&D.message){let k=(function(R){let X=R.toLowerCase().replace(/_/g,"-");return Object.values(Re).indexOf(X)>=0?X:Re.UNKNOWN})(D.status);c(new tt(k,D.message))}else c(new tt(Re.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new tt(Re.UNAVAILABLE,"Connection failed."));break;default:Rt(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{it(Yi,`RPC '${e}' ${s} completed.`)}});let u=JSON.stringify(i);it(Yi,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",u,r,15)})}P_(e,t,r){let i=KS(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Lx(),a=Rx(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let u=o.join("");it(Yi,`Creating RPC '${e}' stream ${i}: ${u}`,c);let m=s.createWebChannel(u,c);this.T_(m);let _=!1,p=!1,D=new QS({Ho:L=>{p?it(Yi,`Not sending because RPC '${e}' stream ${i} is closed:`,L):(_||(it(Yi,`Opening RPC '${e}' stream ${i} transport.`),m.open(),_=!0),it(Yi,`RPC '${e}' stream ${i} sending:`,L),m.send(L))},Yo:()=>m.close()}),k=(L,R,X)=>{L.listen(R,ee=>{try{X(ee)}catch(J){setTimeout(()=>{throw J},0)}})};return k(m,Ff.EventType.OPEN,()=>{p||(it(Yi,`RPC '${e}' stream ${i} transport opened.`),D.s_())}),k(m,Ff.EventType.CLOSE,()=>{p||(p=!0,it(Yi,`RPC '${e}' stream ${i} transport closed`),D.__(),this.I_(m))}),k(m,Ff.EventType.ERROR,L=>{p||(p=!0,Tu(Yi,`RPC '${e}' stream ${i} transport errored. Name:`,L.name,"Message:",L.message),D.__(new tt(Re.UNAVAILABLE,"The operation could not be completed")))}),k(m,Ff.EventType.MESSAGE,L=>{var R;if(!p){let X=L.data[0];Ln(!!X,16349);let ee=X,J=ee?.error||((R=ee[0])===null||R===void 0?void 0:R.error);if(J){it(Yi,`RPC '${e}' stream ${i} received error:`,J);let _e=J.status,Ce=(function(T){let U=Xr[T];if(U!==void 0)return K4(U)})(_e),H=J.message;Ce===void 0&&(Ce=Re.INTERNAL,H="Unknown error status: "+_e+" with message "+J.message),p=!0,D.__(new tt(Ce,H)),m.close()}else it(Yi,`RPC '${e}' stream ${i} received:`,X),D.a_(X)}}),k(a,Ox.STAT_EVENT,L=>{L.stat===h1.PROXY?it(Yi,`RPC '${e}' stream ${i} detected buffering proxy`):L.stat===h1.NOPROXY&&it(Yi,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{D.o_()},0),D}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function jx(){return typeof document<"u"?document:null}function sb(n){return new yS(n,!0)}var V1=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&it("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var q3="PersistentStream",j1=class{constructor(e,t,r,i,o,s,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new V1(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return F(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return F(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return F(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===Re.RESOURCE_EXHAUSTED?(al(t.toString()),al("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===Re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new tt(Re.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>F(this,null,function*(){this.state=0,this.start()}))}G_(e){return it(q3,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(it(q3,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},JS=class extends j1{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=lQ(this.serializer,e),r=(function(o){if(!("targetChange"in o))return tn.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?tn.min():s.readTime?lc(s.readTime):tn.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=CS(this.serializer),t.addTarget=(function(o,s){let a,c=s.target;if(a=cS(c)?{documents:hQ(o,c)}:{query:fQ(o,c).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=Y4(o,s.resumeToken);let l=_S(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(tn.min())>0){a.readTime=N1(o,s.snapshotVersion.toTimestamp());let l=_S(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=mQ(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=CS(this.serializer),t.removeTarget=e,this.k_(t)}},XS=class extends j1{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Ln(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ln(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ln(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=dQ(e.writeResults,e.commitTime),r=lc(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=CS(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>uQ(this.serializer,r))};this.k_(t)}};var eD=class{},tD=class extends eD{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new tt(Re.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,bS(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new tt(Re.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,bS(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new tt(Re.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},nD=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(al(t),this._a=!1):it("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var sh="RemoteStore",rD=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>F(this,null,function*(){ah(this)&&(it(sh,"Restarting streams for network reachability change."),yield(function(c){return F(this,null,function*(){let l=Qt(c);l.Ia.add(4),yield n0(l),l.Aa.set("Unknown"),l.Ia.delete(4),yield ab(l)})})(this))}))}),this.Aa=new nD(r,i)}};function ab(n){return F(this,null,function*(){if(ah(n))for(let e of n.da)yield e(!0)})}function n0(n){return F(this,null,function*(){for(let e of n.da)yield e(!1)})}function oL(n,e){let t=Qt(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),BD(t)?jD(t):ap(t).x_()&&VD(t,e))}function FD(n,e){let t=Qt(n),r=ap(t);t.Ta.delete(e),r.x_()&&sL(t,e),t.Ta.size===0&&(r.x_()?r.B_():ah(t)&&t.Aa.set("Unknown"))}function VD(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(tn.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ap(n).H_(e)}function sL(n,e){n.Ra.$e(e),ap(n).Y_(e)}function jD(n){n.Ra=new vS({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),ap(n).start(),n.Aa.aa()}function BD(n){return ah(n)&&!ap(n).M_()&&n.Ta.size>0}function ah(n){return Qt(n).Ia.size===0}function aL(n){n.Ra=void 0}function NQ(n){return F(this,null,function*(){n.Aa.set("Online")})}function kQ(n){return F(this,null,function*(){n.Ta.forEach((e,t)=>{VD(n,e)})})}function OQ(n,e){return F(this,null,function*(){aL(n),BD(n)?(n.Aa.la(e),jD(n)):n.Aa.set("Unknown")})}function RQ(n,e,t){return F(this,null,function*(){if(n.Aa.set("Online"),e instanceof M1&&e.state===2&&e.cause)try{yield(function(i,o){return F(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})})(n,e)}catch(r){it(sh,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield B1(n,r)}else if(e instanceof $f?n.Ra.Ye(e):e instanceof A1?n.Ra.it(e):n.Ra.et(e),!t.isEqual(tn.min()))try{let r=yield iL(n.localStore);t.compareTo(r)>=0&&(yield(function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let u=o.Ta.get(l);u&&o.Ta.set(l,u.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let u=o.Ta.get(c);if(!u)return;o.Ta.set(c,u.withResumeToken(Qi.EMPTY_BYTE_STRING,u.snapshotVersion)),sL(o,c);let m=new Yg(u.target,c,l,u.sequenceNumber);VD(o,m)}),o.remoteSyncer.applyRemoteEvent(a)})(n,t))}catch(r){it(sh,"Failed to raise snapshot:",r),yield B1(n,r)}})}function B1(n,e,t){return F(this,null,function*(){if(!sp(e))throw e;n.Ia.add(1),yield n0(n),n.Aa.set("Offline"),t||(t=()=>iL(n.localStore)),n.asyncQueue.enqueueRetryable(()=>F(null,null,function*(){it(sh,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield ab(n)}))})}function cL(n,e){return e().catch(t=>B1(n,t,e))}function cb(n){return F(this,null,function*(){let e=Qt(n),t=Pu(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:SD;for(;LQ(e);)try{let i=yield TQ(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,FQ(e,i)}catch(i){yield B1(e,i)}lL(e)&&uL(e)})}function LQ(n){return ah(n)&&n.Pa.length<10}function FQ(n,e){n.Pa.push(e);let t=Pu(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function lL(n){return ah(n)&&!Pu(n).M_()&&n.Pa.length>0}function uL(n){Pu(n).start()}function VQ(n){return F(this,null,function*(){Pu(n).na()})}function jQ(n){return F(this,null,function*(){let e=Pu(n);for(let t of n.Pa)e.X_(t.mutations)})}function BQ(n,e,t){return F(this,null,function*(){let r=n.Pa.shift(),i=fS.from(r,e,t);yield cL(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield cb(n)})}function UQ(n,e){return F(this,null,function*(){e&&Pu(n).Z_&&(yield(function(r,i){return F(this,null,function*(){if((function(s){return nQ(s)&&s!==Re.ABORTED})(i.code)){let o=r.Pa.shift();Pu(r).N_(),yield cL(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield cb(r)}})})(n,e)),lL(n)&&uL(n)})}function H3(n,e){return F(this,null,function*(){let t=Qt(n);t.asyncQueue.verifyOperationInProgress(),it(sh,"RemoteStore received new credentials");let r=ah(t);t.Ia.add(3),yield n0(t),r&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield ab(t)})}function zQ(n,e){return F(this,null,function*(){let t=Qt(n);e?(t.Ia.delete(2),yield ab(t)):e||(t.Ia.add(2),yield n0(t),t.Aa.set("Unknown"))})}function ap(n){return n.Va||(n.Va=(function(t,r,i){let o=Qt(t);return o.ia(),new JS(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:NQ.bind(null,n),e_:kQ.bind(null,n),n_:OQ.bind(null,n),J_:RQ.bind(null,n)}),n.da.push(e=>F(null,null,function*(){e?(n.Va.N_(),BD(n)?jD(n):n.Aa.set("Unknown")):(yield n.Va.stop(),aL(n))}))),n.Va}function Pu(n){return n.ma||(n.ma=(function(t,r,i){let o=Qt(t);return o.ia(),new XS(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:VQ.bind(null,n),n_:UQ.bind(null,n),ea:jQ.bind(null,n),ta:BQ.bind(null,n)}),n.da.push(e=>F(null,null,function*(){e?(n.ma.N_(),yield cb(n)):(yield n.ma.stop(),n.Pa.length>0&&(it(sh,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var iD=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ba,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new tt(Re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function UD(n,e){if(al("AsyncQueue",`${e}: ${n}`),sp(n))return new tt(Re.UNAVAILABLE,`${e}: ${n}`);throw n}var U1=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Mt.comparator(t.key,r.key):(t,r)=>Mt.comparator(t.key,r.key),this.keyedMap=Fg(),this.sortedSet=new Or(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var z1=class{constructor(){this.fa=new Or(Mt.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Rt(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},tp=class n{constructor(e,t,r,i,o,s,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,U1.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ib(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var oD=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},sD=class{constructor(){this.queries=W3(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=Qt(t),o=i.queries;i.queries=W3(),o.forEach((s,a)=>{for(let c of a.wa)c.onError(r)})})(this,new tt(Re.ABORTED,"Firestore shutting down"))}};function W3(){return new ul(n=>L4(n),ib)}function dL(n,e){return F(this,null,function*(){let t=Qt(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new oD,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield t.onListen(i,!0);break;case 1:o.ya=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=UD(s,`Initialization of query '${jf(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&zD(t)})}function hL(n,e){return F(this,null,function*(){let t=Qt(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function $Q(n,e){let t=Qt(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&zD(t)}function qQ(n,e,t){let r=Qt(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function zD(n){n.Da.forEach(e=>{e.next()})}var aD,G3;(G3=aD||(aD={})).Fa="default",G3.Cache="cache";var $1=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new tp(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=tp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==aD.Cache}};var q1=class{constructor(e){this.key=e}},H1=class{constructor(e){this.key=e}},cD=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=yn(),this.mutatedKeys=yn(),this.Xa=F4(e),this.eu=new U1(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new z1,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,m)=>{let _=i.get(u),p=ob(this.query,m)?m:null,D=!!_&&this.mutatedKeys.has(_.key),k=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations),L=!1;_&&p?_.data.isEqual(p.data)?D!==k&&(r.track({type:3,doc:p}),L=!0):this.iu(_,p)||(r.track({type:2,doc:p}),L=!0,(c&&this.Xa(p,c)>0||l&&this.Xa(p,l)<0)&&(a=!0)):!_&&p?(r.track({type:0,doc:p}),L=!0):_&&!p&&(r.track({type:1,doc:_}),L=!0,(c||l)&&(a=!0)),L&&(p?(s=s.add(p),o=k?o.add(u):o.delete(u)):(s=s.delete(u),o=o.delete(u)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let u=this.query.limitType==="F"?s.last():s.first();s=s.delete(u.key),o=o.delete(u.key),r.track({type:1,doc:u})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((u,m)=>(function(p,D){let k=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Rt(20277,{At:L})}};return k(p)-k(D)})(u.type,m.type)||this.Xa(u.doc,m.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,l=c!==this.Ya;return this.Ya=c,s.length!==0||l?{snapshot:new tp(this.query,e.eu,o,s,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new z1,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=yn(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new H1(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new q1(r))}),t}uu(e){this.Ha=e.qs,this.Za=yn();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return tp.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},$D="SyncEngine",lD=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},uD=class{constructor(e){this.key=e,this.lu=!1}},dD=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new ul(a=>L4(a),ib),this.Tu=new Map,this.Iu=new Set,this.du=new Or(Mt.comparator),this.Eu=new Map,this.Au=new Zg,this.Ru={},this.Vu=new Map,this.mu=Qg.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function HQ(n,e,t=!0){return F(this,null,function*(){let r=yL(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield fL(r,e,t,!0),i})}function WQ(n,e){return F(this,null,function*(){let t=yL(n);yield fL(t,e,!0,!1)})}function fL(n,e,t,r){return F(this,null,function*(){let i=yield AQ(n.localStore,ac(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield GQ(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&oL(n.remoteStore,i),a})}function GQ(n,e,t,r,i){return F(this,null,function*(){n.gu=(m,_,p)=>(function(k,L,R,X){return F(this,null,function*(){let ee=L.view.nu(R);ee.Ds&&(ee=yield z3(k.localStore,L.query,!1).then(({documents:H})=>L.view.nu(H,ee)));let J=X&&X.targetChanges.get(L.targetId),_e=X&&X.targetMismatches.get(L.targetId)!=null,Ce=L.view.applyChanges(ee,k.isPrimaryClient,J,_e);return Y3(k,L.targetId,Ce._u),Ce.snapshot})})(n,m,_,p);let o=yield z3(n.localStore,e,!0),s=new cD(e,o.qs),a=s.nu(o.documents),c=Kg.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,c);Y3(n,t,l._u);let u=new lD(e,t,s);return n.Pu.set(e,u),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),l.snapshot})}function KQ(n,e,t){return F(this,null,function*(){let r=Qt(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!ib(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield HS(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&FD(r.remoteStore,i.targetId),hD(r,i.targetId)}).catch(op))):(hD(r,i.targetId),yield HS(r.localStore,i.targetId,!0))})}function YQ(n,e){return F(this,null,function*(){let t=Qt(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),FD(t.remoteStore,r.targetId))})}function QQ(n,e,t){return F(this,null,function*(){let r=rZ(n);try{let i=yield(function(s,a){let c=Qt(s),l=wt.now(),u=a.reduce((p,D)=>p.add(D.key),yn()),m,_;return c.persistence.runTransaction("Locally write mutations","readwrite",p=>{let D=dl(),k=yn();return c.Os.getEntries(p,u).next(L=>{D=L,D.forEach((R,X)=>{X.isValidDocument()||(k=k.add(R))})}).next(()=>c.localDocuments.getOverlayedDocuments(p,D)).next(L=>{m=L;let R=[];for(let X of a){let ee=tQ(X,m.get(X.key).overlayedDocument);ee!=null&&R.push(new dc(X.key,ee,A4(ee.value.mapValue),cc.exists(!0)))}return c.mutationQueue.addMutationBatch(p,l,R,a)}).next(L=>{_=L;let R=L.applyToLocalDocumentSet(m,k);return c.documentOverlayCache.saveOverlays(p,L.batchId,R)})}).then(()=>({batchId:_.batchId,changes:j4(m)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,c){let l=s.Ru[s.currentUser.toKey()];l||(l=new Or(hn)),l=l.insert(a,c),s.Ru[s.currentUser.toKey()]=l})(r,i.batchId,t),yield r0(r,i.changes),yield cb(r.remoteStore)}catch(i){let o=UD(i,"Failed to persist write");t.reject(o)}})}function pL(n,e){return F(this,null,function*(){let t=Qt(n);try{let r=yield SQ(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(Ln(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?Ln(s.lu,14607):i.removedDocuments.size>0&&(Ln(s.lu,42227),s.lu=!1))}),yield r0(t,r,e)}catch(r){yield op(r)}})}function K3(n,e,t){let r=Qt(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let c=Qt(s);c.onlineState=a;let l=!1;c.queries.forEach((u,m)=>{for(let _ of m.wa)_.va(a)&&(l=!0)}),l&&zD(c)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function ZQ(n,e,t){return F(this,null,function*(){let r=Qt(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Or(Mt.comparator);s=s.insert(o,Ca.newNoDocument(o,tn.min()));let a=yn().add(o),c=new T1(tn.min(),new Map,new Or(hn),s,a);yield pL(r,c),r.du=r.du.remove(o),r.Eu.delete(e),qD(r)}else yield HS(r.localStore,e,!1).then(()=>hD(r,e,t)).catch(op)})}function JQ(n,e){return F(this,null,function*(){let t=Qt(n),r=e.batch.batchId;try{let i=yield xQ(t.localStore,e);gL(t,r,null),mL(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield r0(t,i)}catch(i){yield op(i)}})}function XQ(n,e,t){return F(this,null,function*(){let r=Qt(n);try{let i=yield(function(s,a){let c=Qt(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return c.mutationQueue.lookupMutationBatch(l,a).next(m=>(Ln(m!==null,37113),u=m.keys(),c.mutationQueue.removeMutationBatch(l,m))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,u,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>c.localDocuments.getDocuments(l,u))})})(r.localStore,e);gL(r,e,t),mL(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield r0(r,i)}catch(i){yield op(i)}})}function mL(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function gL(n,e,t){let r=Qt(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function hD(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||vL(n,r)})}function vL(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(FD(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),qD(n))}function Y3(n,e,t){for(let r of t)r instanceof q1?(n.Au.addReference(r.key,e),eZ(n,r)):r instanceof H1?(it($D,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||vL(n,r.key)):Rt(19791,{yu:r})}function eZ(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(it($D,"New document in limbo: "+t),n.Iu.add(r),qD(n))}function qD(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new Mt(mr.fromString(e)),r=n.mu.next();n.Eu.set(r,new uD(t)),n.du=n.du.insert(t,r),oL(n.remoteStore,new Yg(ac(kD(t.path)),r,"TargetPurposeLimboResolution",xD.ue))}}function r0(n,e,t){return F(this,null,function*(){let r=Qt(n),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{s.push(r.gu(c,e,t).then(l=>{var u;if((l||t)&&r.isPrimaryClient){let m=l?!l.fromCache:(u=t?.targetChanges.get(c.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(l){i.push(l);let m=US.Es(c.targetId,l);o.push(m)}}))}),yield Promise.all(s),r.hu.J_(i),yield(function(c,l){return F(this,null,function*(){let u=Qt(c);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>$e.forEach(l,_=>$e.forEach(_.Is,p=>u.persistence.referenceDelegate.addReference(m,_.targetId,p)).next(()=>$e.forEach(_.ds,p=>u.persistence.referenceDelegate.removeReference(m,_.targetId,p)))))}catch(m){if(!sp(m))throw m;it(LD,"Failed to update sequence numbers: "+m)}for(let m of l){let _=m.targetId;if(!m.fromCache){let p=u.Fs.get(_),D=p.snapshotVersion,k=p.withLastLimboFreeSnapshotVersion(D);u.Fs=u.Fs.insert(_,k)}}})})(r.localStore,o))})}function tZ(n,e){return F(this,null,function*(){let t=Qt(n);if(!t.currentUser.isEqual(e)){it($D,"User change. New user:",e.toKey());let r=yield rL(t.localStore,e);t.currentUser=e,(function(o,s){o.Vu.forEach(a=>{a.forEach(c=>{c.reject(new tt(Re.CANCELLED,s))})}),o.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield r0(t,r.Bs)}})}function nZ(n,e){let t=Qt(n),r=t.Eu.get(e);if(r&&r.lu)return yn().add(r.key);{let i=yn(),o=t.Tu.get(e);if(!o)return i;for(let s of o){let a=t.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function yL(n){let e=Qt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=pL.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nZ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ZQ.bind(null,e),e.hu.J_=$Q.bind(null,e.eventManager),e.hu.pu=qQ.bind(null,e.eventManager),e}function rZ(n){let e=Qt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=JQ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=XQ.bind(null,e),e}var _L=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return F(this,null,function*(){this.serializer=sb(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,r){return null}Fu(t,r){return null}vu(t){return IQ(this.persistence,new $S,t.initialUser,this.serializer)}Du(t){return new O1(BS.Vi,this.serializer)}bu(t){return new WS}terminate(){return F(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),fD=class extends _L{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Ln(this.persistence.referenceDelegate instanceof R1,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new DS(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?Ws.withCacheSize(this.cacheSizeBytes):Ws.DEFAULT;return new O1(r=>R1.Vi(r,t),this.serializer)}};var iZ=(()=>{class n{initialize(t,r){return F(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>K3(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=tZ.bind(null,this.syncEngine),yield zQ(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return(function(){return new sD})()}createDatastore(t){let r=sb(t.databaseInfo.databaseId),i=(function(s){return new ZS(s)})(t.databaseInfo);return(function(s,a,c,l){return new tD(s,a,c,l)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,o,s,a,c){return new rD(i,o,s,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>K3(this.syncEngine,r,0),(function(){return F1.C()?new F1:new GS})())}createSyncEngine(t,r){return(function(o,s,a,c,l,u,m){let _=new dD(o,s,a,c,l,u);return m&&(_.fu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return F(this,null,function*(){var t,r;yield(function(o){return F(this,null,function*(){let s=Qt(o);it(sh,"RemoteStore shutting down."),s.Ia.add(5),yield n0(s),s.Ea.shutdown(),s.Aa.set("Unknown")})})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var W1=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):al("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Nu="FirestoreClient",pD=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=yi.UNAUTHENTICATED,this.clientId=zg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>F(this,null,function*(){it(Nu,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(it(Nu,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ba;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>F(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=UD(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Bx(n,e){return F(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),it(Nu,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>F(null,null,function*(){r.isEqual(i)||(yield rL(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{Tu("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{it("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Tu("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e})}function Q3(n,e){return F(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield oZ(n);it(Nu,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>H3(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>H3(e.remoteStore,i)),n._onlineComponents=e})}function oZ(n){return F(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){it(Nu,"Using user provided OfflineComponentProvider");try{yield Bx(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===Re.FAILED_PRECONDITION||i.code===Re.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Tu("Error using user provided cache. Falling back to memory cache: "+t),yield Bx(n,new _L)}}else it(Nu,"Using default OfflineComponentProvider"),yield Bx(n,new fD(void 0));return n._offlineComponents})}function bL(n){return F(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(it(Nu,"Using user provided OnlineComponentProvider"),yield Q3(n,n._uninitializedComponentsProvider._online)):(it(Nu,"Using default OnlineComponentProvider"),yield Q3(n,new iZ))),n._onlineComponents})}function sZ(n){return bL(n).then(e=>e.syncEngine)}function wL(n){return F(this,null,function*(){let e=yield bL(n),t=e.eventManager;return t.onListen=HQ.bind(null,e.syncEngine),t.onUnlisten=KQ.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=WQ.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=YQ.bind(null,e.syncEngine),t})}function aZ(n,e,t={}){let r=new ba;return n.asyncQueue.enqueueAndForget(()=>F(null,null,function*(){return(function(o,s,a,c,l){let u=new W1({next:_=>{u.Ou(),s.enqueueAndForget(()=>hL(o,m));let p=_.docs.has(a);!p&&_.fromCache?l.reject(new tt(Re.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&_.fromCache&&c&&c.source==="server"?l.reject(new tt(Re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(_)},error:_=>l.reject(_)}),m=new $1(kD(a.path),u,{includeMetadataChanges:!0,ka:!0});return dL(o,m)})(yield wL(n),n.asyncQueue,e,t,r)})),r.promise}function cZ(n,e,t={}){let r=new ba;return n.asyncQueue.enqueueAndForget(()=>F(null,null,function*(){return(function(o,s,a,c,l){let u=new W1({next:_=>{u.Ou(),s.enqueueAndForget(()=>hL(o,m)),_.fromCache&&c.source==="server"?l.reject(new tt(Re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(_)},error:_=>l.reject(_)}),m=new $1(a,u,{includeMetadataChanges:!0,ka:!0});return dL(o,m)})(yield wL(n),n.asyncQueue,e,t,r)})),r.promise}function CL(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var Z3=new Map;var EL="firestore.googleapis.com",J3=!0,G1=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new tt(Re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=EL,this.ssl=J3}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:J3;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=nL;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<wQ)throw new tt(Re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}yY("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=CL((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new tt(Re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new tt(Re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new tt(Re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},np=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new G1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new tt(Re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new tt(Re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new G1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Ux;switch(r.type){case"firstParty":return new Hx(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new tt(Re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return F(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=Z3.get(t);r&&(it("ComponentProvider","Removing Datastore"),Z3.delete(t),r.terminate())})(this),Promise.resolve()}};function IL(n,e,t,r={}){var i;n=wa(n,np);let o=fu(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;o&&(V_(`https://${c}`),j_("Firestore",!0)),s.host!==EL&&s.host!==c&&Tu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:c,ssl:o,emulatorOptions:r});if(!tc(l,a)&&(n._setSettings(l),r.mockUserToken)){let u,m;if(typeof r.mockUserToken=="string")u=r.mockUserToken,m=yi.MOCK_USER;else{u=wO(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new tt(Re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new yi(_)}n._authCredentials=new zx(new _1(u,m))}}var ku=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},bi=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Iu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(t0(t,n._jsonSchema))return new n(e,r||null,new Mt(mr.fromString(t.referencePath)))}};bi._jsonSchemaVersion="firestore/documentReference/1.0",bi._jsonSchema={type:ni("string",bi._jsonSchemaVersion),referencePath:ni("string")};var Iu=class n extends ku{constructor(e,t,r){super(e,t,kD(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new bi(this.firestore,null,new Mt(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function xL(n,e,...t){if(n=$r(n),o4("collection","path",e),n instanceof np){let r=mr.fromString(e,...t);return g3(r),new Iu(n,null,r)}{if(!(n instanceof bi||n instanceof Iu))throw new tt(Re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(mr.fromString(e,...t));return g3(r),new Iu(n.firestore,null,r)}}function HD(n,e,...t){if(n=$r(n),arguments.length===1&&(e=zg.newId()),o4("doc","path",e),n instanceof np){let r=mr.fromString(e,...t);return m3(r),new bi(n,null,new Mt(r))}{if(!(n instanceof bi||n instanceof Iu))throw new tt(Re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(mr.fromString(e,...t));return m3(r),new bi(n.firestore,n instanceof Iu?n.converter:null,new Mt(r))}}var X3="AsyncQueue",K1=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new V1(this,"async_queue_retry"),this.oc=()=>{let r=jx();r&&it(X3,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=jx();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=jx();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new ba;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return F(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!sp(e))throw e;it(X3,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,al("INTERNAL UNHANDLED ERROR: ",e4(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=iD.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&Rt(47125,{hc:e4(this.tc)})}verifyOperationInProgress(){}Pc(){return F(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function e4(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}var hl=class extends np{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new K1,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return F(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new K1(e),this._firestoreClient=void 0,yield e}})}};function SL(n,e){let t=typeof n=="object"?n:zd(),r=typeof n=="string"?n:e||I1,i=Nf(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=bO("firestore");o&&IL(i,...o)}return i}function WD(n){if(n._terminated)throw new tt(Re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||lZ(n),n._firestoreClient}function lZ(n){var e,t,r;let i=n._freezeSettings(),o=(function(a,c,l,u){return new Qx(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,CL(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new pD(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&(function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(n._componentsProvider))}var xu=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Qi.fromBase64String(e))}catch(t){throw new tt(Re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Qi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(t0(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};xu._jsonSchemaVersion="firestore/bytes/1.0",xu._jsonSchema={type:ni("string",xu._jsonSchemaVersion),bytes:ni("string")};var rp=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new tt(Re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ms(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Jg=class{constructor(e){this._methodName=e}};var Su=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new tt(Re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new tt(Re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return hn(this._lat,e._lat)||hn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(t0(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Su._jsonSchemaVersion="firestore/geoPoint/1.0",Su._jsonSchema={type:ni("string",Su._jsonSchemaVersion),latitude:ni("number"),longitude:ni("number")};var Du=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(t0(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new tt(Re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Du._jsonSchemaVersion="firestore/vectorValue/1.0",Du._jsonSchema={type:ni("string",Du._jsonSchemaVersion),vectorValues:ni("object")};var uZ=/^__.*__$/,mD=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new dc(e,this.data,this.fieldMask,t,this.fieldTransforms):new oh(e,this.data,t,this.fieldTransforms)}},Y1=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new dc(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function DL(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Rt(40011,{Ec:n})}}var gD=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Z1(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(DL(this.Ec)&&uZ.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},vD=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||sb(e)}Dc(e,t,r,i=!1){return new gD({Ec:e,methodName:t,bc:r,path:ms.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function lb(n){let e=n._freezeSettings(),t=sb(n._databaseId);return new vD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function TL(n,e,t,r,i,o={}){let s=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);GD("Data must be an object, but it was:",s,r);let a=AL(r,s),c,l;if(o.merge)c=new Gs(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let u=[];for(let m of o.mergeFields){let _=yD(e,m,t);if(!s.contains(_))throw new tt(Re.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);PL(u,_)||u.push(_)}c=new Gs(u),l=s.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,l=s.fieldTransforms;return new mD(new ps(a),c,l)}var Q1=class n extends Jg{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function dZ(n,e,t,r){let i=n.Dc(1,e,t);GD("Data must be an object, but it was:",i,r);let o=[],s=ps.empty();Ou(r,(c,l)=>{let u=KD(e,c,t);l=$r(l);let m=i.gc(u);if(l instanceof Q1)o.push(u);else{let _=i0(l,m);_!=null&&(o.push(u),s.set(u,_))}});let a=new Gs(o);return new Y1(s,a,i.fieldTransforms)}function hZ(n,e,t,r,i,o){let s=n.Dc(1,e,t),a=[yD(e,r,t)],c=[i];if(o.length%2!=0)throw new tt(Re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<o.length;_+=2)a.push(yD(e,o[_])),c.push(o[_+1]);let l=[],u=ps.empty();for(let _=a.length-1;_>=0;--_)if(!PL(l,a[_])){let p=a[_],D=c[_];D=$r(D);let k=s.gc(p);if(D instanceof Q1)l.push(p);else{let L=i0(D,k);L!=null&&(l.push(p),u.set(p,L))}}let m=new Gs(l);return new Y1(u,m,s.fieldTransforms)}function fZ(n,e,t,r=!1){return i0(t,n.Dc(r?4:3,e))}function i0(n,e){if(ML(n=$r(n)))return GD("Unsupported field value:",e,n),AL(n,e);if(n instanceof Jg)return(function(r,i){if(!DL(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let c=i0(a,i.yc(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=$r(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return QY(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=wt.fromDate(r);return{timestampValue:N1(i.serializer,o)}}if(r instanceof wt){let o=new wt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:N1(i.serializer,o)}}if(r instanceof Su)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof xu)return{bytesValue:Y4(i.serializer,r._byteString)};if(r instanceof bi){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:RD(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Du)return(function(s,a){return{mapValue:{fields:{[TD]:{stringValue:AD},[Gf]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return OD(a.serializer,l)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${tb(r)}`)})(n,e)}function AL(n,e){let t={};return w4(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ou(n,(r,i)=>{let o=i0(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function ML(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof wt||n instanceof Su||n instanceof xu||n instanceof bi||n instanceof Jg||n instanceof Du)}function GD(n,e,t){if(!ML(t)||!s4(t)){let r=tb(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function yD(n,e,t){if((e=$r(e))instanceof rp)return e._internalPath;if(typeof e=="string")return KD(n,e);throw Z1("Field path arguments must be of type string or ",n,!1,void 0,t)}var pZ=new RegExp("[~\\*/\\[\\]]");function KD(n,e,t){if(e.search(pZ)>=0)throw Z1(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new rp(...e.split("."))._internalPath}catch{throw Z1(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Z1(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new tt(Re.INVALID_ARGUMENT,a+n+c)}function PL(n,e){return n.some(t=>t.isEqual(e))}var J1=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new bi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new _D(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(ub("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},_D=class extends J1{data(){return super.data()}};function ub(n,e){return typeof e=="string"?KD(n,e):e instanceof rp?e._internalPath:e._delegate._internalPath}function mZ(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new tt(Re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Xg=class{},e0=class extends Xg{};function NL(n,e,...t){let r=[];e instanceof Xg&&r.push(e),r=r.concat(t),(function(o){let s=o.filter(c=>c instanceof bD).length,a=o.filter(c=>c instanceof X1).length;if(s>1||s>0&&a>0)throw new tt(Re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var X1=class n extends e0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return LL(e._query,t),new ku(e.firestore,e.converter,lS(e._query,t))}_parse(e){let t=lb(e.firestore);return(function(o,s,a,c,l,u,m){let _;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new tt(Re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){n4(m,u);let D=[];for(let k of m)D.push(t4(c,o,k));_={arrayValue:{values:D}}}else _=t4(c,o,m)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||n4(m,u),_=fZ(a,s,m,u==="in"||u==="not-in");return ti.create(l,u,_)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function kL(n,e,t){let r=e,i=ub("where",n);return X1._create(i,r,t)}var bD=class n extends Xg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Ea.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)LL(s,c),s=lS(s,c)})(e._query,t),new ku(e.firestore,e.converter,lS(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var wD=class n extends e0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(i,o,s){if(i.startAt!==null)throw new tt(Re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new tt(Re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new nh(o,s)})(e._query,this._field,this._direction);return new ku(e.firestore,e.converter,(function(i,o){let s=i.explicitOrderBy.concat([o]);return new Mu(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}};function OL(n,e="asc"){let t=e,r=ub("orderBy",n);return wD._create(r,t)}var CD=class n extends e0{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new ku(e.firestore,e.converter,D1(e._query,this._limit,this._limitType))}};function RL(n){return _Y("limit",n),CD._create("limit",n,"F")}function t4(n,e,t){if(typeof(t=$r(t))=="string"){if(t==="")throw new tt(Re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!R4(e)&&t.indexOf("/")!==-1)throw new tt(Re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(mr.fromString(t));if(!Mt.isDocumentKey(r))throw new tt(Re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return E3(n,new Mt(r))}if(t instanceof bi)return E3(n,t._key);throw new tt(Re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${tb(t)}.`)}function n4(n,e){if(!Array.isArray(n)||n.length===0)throw new tt(Re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function LL(n,e){let t=(function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new tt(Re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new tt(Re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var ED=class{convertValue(e,t="none"){switch(Au(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ll(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Rt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Ou(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Gf].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>pr(s.doubleValue));return new Du(o)}convertGeoPoint(e){return new Su(pr(e.latitude),pr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=rb(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Hg(e));default:return null}}convertTimestamp(e){let t=cl(e);return new wt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=mr.fromString(e);Ln(tL(r),9688,{name:e});let i=new x1(r.get(1),r.get(3)),o=new Mt(r.popFirst(5));return i.isEqual(t)||al(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function FL(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Jd=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Xd=class n extends J1{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new qf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(ub("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new tt(Re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Xd._jsonSchemaVersion="firestore/documentSnapshot/1.0",Xd._jsonSchema={type:ni("string",Xd._jsonSchemaVersion),bundleSource:ni("string","DocumentSnapshot"),bundleName:ni("string"),bundle:ni("string")};var qf=class extends Xd{data(e={}){return super.data(e)}},Hf=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Jd(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new qf(this._firestore,this._userDataWriter,r.key,r,new Jd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new tt(Re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new qf(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Jd(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new qf(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Jd(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,u=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),u=s.indexOf(a.doc.key)),{type:gZ(a.type),doc:c,oldIndex:l,newIndex:u}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new tt(Re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=zg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function gZ(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Rt(61501,{type:n})}}function VL(n){n=wa(n,bi);let e=wa(n.firestore,hl);return aZ(WD(e),n._key).then(t=>vZ(e,n,t))}Hf._jsonSchemaVersion="firestore/querySnapshot/1.0",Hf._jsonSchema={type:ni("string",Hf._jsonSchemaVersion),bundleSource:ni("string","QuerySnapshot"),bundleName:ni("string"),bundle:ni("string")};var eb=class extends ED{constructor(e){super(),this.firestore=e}convertBytes(e){return new xu(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new bi(this.firestore,null,t)}};function jL(n){n=wa(n,ku);let e=wa(n.firestore,hl),t=WD(e),r=new eb(e);return mZ(n._query),cZ(t,n._query).then(i=>new Hf(e,r,n,i))}function BL(n,e,t){n=wa(n,bi);let r=wa(n.firestore,hl),i=FL(n.converter,e,t);return db(r,[TL(lb(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,cc.none())])}function UL(n,e,t,...r){n=wa(n,bi);let i=wa(n.firestore,hl),o=lb(i),s;return s=typeof(e=$r(e))=="string"||e instanceof rp?hZ(o,"updateDoc",n._key,e,t,r):dZ(o,"updateDoc",n._key,e),db(i,[s.toMutation(n._key,cc.exists(!0))])}function zL(n){return db(wa(n.firestore,hl),[new Gg(n._key,cc.none())])}function $L(n,e){let t=wa(n.firestore,hl),r=HD(n),i=FL(n.converter,e);return db(t,[TL(lb(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,cc.exists(!1))]).then(()=>r)}function db(n,e){return(function(r,i){let o=new ba;return r.asyncQueue.enqueueAndForget(()=>F(null,null,function*(){return QQ(yield sZ(r),i,o)})),o.promise})(WD(n),e)}function vZ(n,e,t){let r=t.docs.get(e._key),i=new eb(n);return new Xd(n,i,e._key,r,new Jd(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){ip=i})(mu),ya(new yo("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new hl(new $x(r.getProvider("auth-internal")),new Wx(s,r.getProvider("app-check-internal")),(function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new tt(Re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new x1(l.options.projectId,u)})(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),kr(d3,h3,e),kr(d3,h3,"esm2017")})();var fl=class{constructor(e){return e}},qL="firestore",YD=class{constructor(){return Of(qL)}};var QD=new ht("angularfire2.firestore-instances");function yZ(n,e){let t=Cg(qL,n,e);return t&&new fl(t)}function _Z(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new fl(r)}}var bZ={provide:YD,deps:[[new cs,QD]]},wZ={provide:fl,useFactory:yZ,deps:[[new cs,QD],tl]};function HL(n,...e){return kr("angularfire",gu.full,"fst"),ss([wZ,bZ,{provide:QD,useFactory:_Z(n),multi:!0,deps:[Rn,Ur,vu,qd,[new cs,Rg],[new cs,Rf],...e]}])}var jo=fr($L,!0,2);var pn=fr(xL,!0,2);var hc=fr(zL,!0,2);var or=fr(HD,!0,2);var fc=fr(VL,!0);var ur=fr(jL,!0);var WL=fr(SL,!0);var hb=fr(RL,!0,2);var gs=fr(OL,!0,2),wi=fr(NL,!0,2);var GL=fr(BL,!0,2);var vs=fr(UL,!0,2);var Vi=fr(kL,!0,2);var YL={production:!1,firebase:{apiKey:"AIzaSyASoTkkqkwrFE9wF_Raz1Nly_H6vL3a-U8",authDomain:"hotel-management-system-ee8c3.firebaseapp.com",projectId:"hotel-management-system-ee8c3",storageBucket:"hotel-management-system-ee8c3.appspot.com",messagingSenderId:"1074634780596",appId:"1:1074634780596:web:e0411cc8a3b104c2408ce1"}};var gr=class n{constructor(e,t){this.firestore=e;this.envInjector=t}inCtx(e){return Ir(this.envInjector,e)}createUser(e){return F(this,null,function*(){let t=pn(this.firestore,"users");return(yield jo(t,ft(Ie({},e),{createdAt:wt.now()}))).id})}getUsers(){return F(this,null,function*(){let e=pn(this.firestore,"users");return(yield this.inCtx(()=>ur(e))).docs.map(r=>Ie({id:r.id},r.data()))})}updateUser(e,t){return F(this,null,function*(){let r=or(this.firestore,`users/${e}`);yield vs(r,t)})}deleteUser(e){return F(this,null,function*(){let t=or(this.firestore,`users/${e}`);yield hc(t)})}createMenuItem(e){return F(this,null,function*(){let t=pn(this.firestore,"menuItems");return(yield jo(t,ft(Ie({},e),{createdAt:wt.now()}))).id})}getMenuItems(){return F(this,null,function*(){let e=pn(this.firestore,"menuItems");return(yield this.inCtx(()=>ur(e))).docs.map(r=>Ie({id:r.id},r.data()))})}getActiveMenuItems(){return F(this,null,function*(){let e=pn(this.firestore,"menuItems"),t=wi(e,Vi("isActive","==",!0));return(yield this.inCtx(()=>ur(t))).docs.map(i=>Ie({id:i.id},i.data()))})}updateMenuItem(e,t){return F(this,null,function*(){let r=or(this.firestore,`menuItems/${e}`);yield vs(r,t)})}deleteMenuItem(e){return F(this,null,function*(){let t=or(this.firestore,`menuItems/${e}`);yield hc(t)})}createDeal(e){return F(this,null,function*(){let t=pn(this.firestore,"deals"),r=ft(Ie({},e),{createdAt:wt.now()});return e.startDate&&(r.startDate=wt.fromDate(e.startDate)),e.endDate&&(r.endDate=wt.fromDate(e.endDate)),(yield jo(t,r)).id})}getDeals(){return F(this,null,function*(){let e=pn(this.firestore,"deals");return(yield this.inCtx(()=>ur(e))).docs.map(r=>{let i=r.data();return ft(Ie({id:r.id},i),{startDate:i.startDate?.toDate(),endDate:i.endDate?.toDate(),createdAt:i.createdAt?.toDate()})})})}getActiveDeals(){return F(this,null,function*(){let e=yield this.getDeals(),t=new Date;return e.filter(r=>!(!r.isActive||r.startDate&&r.startDate>t||r.endDate&&r.endDate<t))})}updateDeal(e,t){return F(this,null,function*(){let r=or(this.firestore,`deals/${e}`),i=Ie({},t);t.startDate&&(i.startDate=wt.fromDate(t.startDate)),t.endDate&&(i.endDate=wt.fromDate(t.endDate)),yield vs(r,i)})}deleteDeal(e){return F(this,null,function*(){let t=or(this.firestore,`deals/${e}`);yield hc(t)})}createInventoryItem(e){return F(this,null,function*(){let t=pn(this.firestore,"inventory");return(yield jo(t,ft(Ie({},e),{createdAt:wt.now()}))).id})}getInventoryItems(){return F(this,null,function*(){let e=pn(this.firestore,"inventory");return(yield this.inCtx(()=>ur(e))).docs.map(r=>Ie({id:r.id},r.data()))})}getLowStockItems(){return F(this,null,function*(){return(yield this.getInventoryItems()).filter(t=>t.currentStock<t.lowStockThreshold)})}updateInventoryItem(e,t){return F(this,null,function*(){let r=or(this.firestore,`inventory/${e}`);yield vs(r,t)})}deleteInventoryItem(e){return F(this,null,function*(){let t=or(this.firestore,`inventory/${e}`);yield hc(t)})}updateInventoryStock(e,t){return F(this,null,function*(){let r=or(this.firestore,`inventory/${e}`),i=yield this.inCtx(()=>fc(r));if(i.exists()){let o=i.data().currentStock||0;yield vs(r,{currentStock:o+t})}})}createPurchase(e){return F(this,null,function*(){let t=pn(this.firestore,"purchases"),r=yield jo(t,ft(Ie({},e),{date:e.date?wt.fromDate(e.date):wt.now(),createdAt:wt.now()}));return yield this.updateInventoryStock(e.inventoryItemId,e.quantity),r.id})}getPurchases(){return F(this,null,function*(){let e=pn(this.firestore,"purchases"),t=wi(e,gs("date","desc"));return(yield this.inCtx(()=>ur(t))).docs.map(i=>Ie({id:i.id},i.data()))})}deletePurchase(e){return F(this,null,function*(){let t=or(this.firestore,`purchases/${e}`);yield hc(t)})}createSupplier(e){return F(this,null,function*(){let t=pn(this.firestore,"suppliers");return(yield jo(t,ft(Ie({},e),{createdAt:wt.now()}))).id})}getSuppliers(){return F(this,null,function*(){let e=pn(this.firestore,"suppliers");return(yield this.inCtx(()=>ur(e))).docs.map(r=>Ie({id:r.id},r.data()))})}createOrder(e){return F(this,null,function*(){try{let t=pn(this.firestore,"orders"),r={orderNumber:e.orderNumber,isTakeaway:e.isTakeaway,items:e.items,subtotal:e.subtotal,tax:e.tax,discount:e.discount,totalAmount:e.totalAmount,status:e.status,paymentMethod:e.paymentMethod||null,createdAt:e.createdAt?wt.fromDate(e.createdAt):wt.now(),cashierId:e.cashierId,cashierName:e.cashierName};return e.tableNumber&&(r.tableNumber=e.tableNumber),e.customerName&&(r.customerName=e.customerName),e.startedCookingAt&&(r.startedCookingAt=wt.fromDate(e.startedCookingAt)),e.readyAt&&(r.readyAt=wt.fromDate(e.readyAt)),e.completedAt&&(r.completedAt=wt.fromDate(e.completedAt)),(yield jo(t,r)).id}catch(t){throw console.error("Error creating order:",t),t}})}getMenuItem(e){return F(this,null,function*(){let t=or(this.firestore,`menuItems/${e}`),r=yield this.inCtx(()=>fc(t));return r.exists()?Ie({id:r.id},r.data()):null})}getOrders(e){return F(this,null,function*(){let t=pn(this.firestore,"orders"),r;e?r=wi(t,Vi("status","==",e)):r=wi(t,gs("createdAt","desc"));let o=(yield this.inCtx(()=>ur(r))).docs.map(s=>Ie({id:s.id},s.data()));return e&&o.sort((s,a)=>{let c=s.createdAt&&typeof s.createdAt=="object"&&"toDate"in s.createdAt?s.createdAt.toDate():new Date(s.createdAt||0);return(a.createdAt&&typeof a.createdAt=="object"&&"toDate"in a.createdAt?a.createdAt.toDate():new Date(a.createdAt||0)).getTime()-c.getTime()}),o})}getOrderByOrderNumber(e){return F(this,null,function*(){let t=pn(this.firestore,"orders"),r=wi(t,Vi("orderNumber","==",e)),i=yield this.inCtx(()=>ur(r));return i.empty?null:Ie({id:i.docs[0].id},i.docs[0].data())})}updateOrder(e,t){return F(this,null,function*(){let r=or(this.firestore,`orders/${e}`);yield vs(r,t)})}deleteOrder(e){return F(this,null,function*(){let t=or(this.firestore,`orders/${e}`);yield hc(t)})}getTodayOrders(){return F(this,null,function*(){let e=new Date;e.setHours(0,0,0,0);let t=pn(this.firestore,"orders"),r=wi(t,Vi("createdAt",">=",wt.fromDate(e)),gs("createdAt","desc"));return(yield this.inCtx(()=>ur(r))).docs.map(o=>Ie({id:o.id},o.data()))})}getActiveOrderForTable(e){return F(this,null,function*(){let t=pn(this.firestore,"orders"),r=wi(t,Vi("tableNumber","==",e),Vi("status","in",["pending","cooking","ready"]),gs("createdAt","desc"),hb(1)),i=yield this.inCtx(()=>ur(r));return i.empty?null:Ie({id:i.docs[0].id},i.docs[0].data())})}getOrdersByTable(e){return F(this,null,function*(){let t=pn(this.firestore,"orders"),r=wi(t,Vi("tableNumber","==",e),gs("createdAt","desc"));return(yield this.inCtx(()=>ur(r))).docs.map(o=>Ie({id:o.id},o.data()))})}logActivity(e){return F(this,null,function*(){let t=pn(this.firestore,"activityLogs");return(yield jo(t,ft(Ie({},e),{timestamp:wt.now()}))).id})}getRecentActivityLogs(e=10){return F(this,null,function*(){let t=pn(this.firestore,"activityLogs"),r=wi(t,gs("timestamp","desc"),hb(e));return(yield this.inCtx(()=>ur(r))).docs.map(o=>Ie({id:o.id},o.data()))})}getTodaySales(){return F(this,null,function*(){return(yield this.getTodayOrders()).filter(t=>t.status==="completed").reduce((t,r)=>t+r.totalAmount,0)})}getTodayExpenses(){return F(this,null,function*(){let e=new Date;e.setHours(0,0,0,0);let t=pn(this.firestore,"purchases"),r=wi(t,Vi("createdAt",">=",wt.fromDate(e)));return(yield this.inCtx(()=>ur(r))).docs.map(s=>s.data()).reduce((s,a)=>s+a.totalCost,0)})}getOrdersByDateRange(e,t){return F(this,null,function*(){let r=pn(this.firestore,"orders"),i=wi(r,Vi("createdAt",">=",wt.fromDate(e)),Vi("createdAt","<=",wt.fromDate(t)),gs("createdAt","desc"));return(yield this.inCtx(()=>ur(i))).docs.map(s=>Ie({id:s.id},s.data()))})}getCustomerPaymentsByDateRange(e,t){return F(this,null,function*(){let r=pn(this.firestore,"customerPayments"),i=wi(r,Vi("date",">=",wt.fromDate(e)),Vi("date","<=",wt.fromDate(t)),gs("date","desc"));return(yield this.inCtx(()=>ur(i))).docs.map(s=>Ie({id:s.id},s.data()))})}getPurchasesByDateRange(e,t){return F(this,null,function*(){let r=pn(this.firestore,"purchases"),i=wi(r,Vi("date",">=",wt.fromDate(e)),Vi("date","<=",wt.fromDate(t)),gs("date","desc"));return(yield this.inCtx(()=>ur(i))).docs.map(s=>Ie({id:s.id},s.data()))})}createInventoryAdjustment(e){return F(this,null,function*(){let t=pn(this.firestore,"inventoryAdjustments"),r=yield jo(t,ft(Ie({},e),{createdAt:wt.now()})),i=or(this.firestore,`inventory/${e.inventoryItemId}`),o=yield this.inCtx(()=>fc(i));if(o.exists()){let s=o.data().currentStock||0;yield vs(i,{currentStock:s+e.quantity})}return r.id})}getInventoryAdjustments(){return F(this,null,function*(){let e=pn(this.firestore,"inventoryAdjustments"),t=wi(e,gs("date","desc"));return(yield this.inCtx(()=>ur(t))).docs.map(i=>Ie({id:i.id},i.data()))})}getAdjustmentsByItem(e){return F(this,null,function*(){let t=pn(this.firestore,"inventoryAdjustments"),r=wi(t,Vi("inventoryItemId","==",e),gs("date","desc"));return(yield this.inCtx(()=>ur(r))).docs.map(o=>Ie({id:o.id},o.data()))})}getSettings(){return F(this,null,function*(){let e=pn(this.firestore,"settings"),t=yield this.inCtx(()=>ur(e));if(t.empty)return{currency:"PKR",currencyPosition:"before",dateFormat:"MM/DD/YYYY",taxRate:5,restaurantName:"My Restaurant"};let r=t.docs[0];return Ie({id:r.id},r.data())})}updateSettings(e){return F(this,null,function*(){let t=pn(this.firestore,"settings"),r=yield this.inCtx(()=>ur(t));if(r.empty)yield jo(t,ft(Ie({},e),{createdAt:wt.now()}));else{let i=r.docs[0].id,o=or(this.firestore,`settings/${i}`);yield vs(o,e)}})}getCreditCustomers(){return F(this,null,function*(){let e=pn(this.firestore,"creditCustomers");return(yield this.inCtx(()=>ur(e))).docs.map(r=>Ie({id:r.id},r.data()))})}addCreditCustomer(e){return F(this,null,function*(){let t=pn(this.firestore,"creditCustomers");return(yield jo(t,ft(Ie({},e),{createdAt:wt.now(),updatedAt:wt.now()}))).id})}updateCreditCustomer(e){return F(this,null,function*(){let t=or(this.firestore,`creditCustomers/${e.id}`);yield vs(t,ft(Ie({},e),{updatedAt:wt.now()}))})}deleteCreditCustomer(e){return F(this,null,function*(){let t=or(this.firestore,`creditCustomers/${e}`);yield hc(t)})}getCustomerLedger(e){return F(this,null,function*(){let t=pn(this.firestore,"customerLedger"),r=wi(t,Vi("customerId","==",e));return(yield this.inCtx(()=>ur(r))).docs.map(o=>Ie({id:o.id},o.data()))})}addLedgerEntry(e){return F(this,null,function*(){let t=pn(this.firestore,"customerLedger");return(yield jo(t,ft(Ie({},e),{createdAt:wt.now()}))).id})}recordCustomerPayment(e){return F(this,null,function*(){let t={customerId:e.customerId,customerName:e.customerName,date:e.date,referenceType:"payment",referenceNumber:`PAY-${Date.now()}`,debit:0,credit:e.amount,runningBalance:0,notes:e.notes||`Payment via ${e.paymentMode}`},r=yield this.addLedgerEntry(t),i=pn(this.firestore,"customerPayments");yield jo(i,ft(Ie({},e),{createdAt:wt.now(),ledgerId:r}));let o=or(this.firestore,`creditCustomers/${e.customerId}`),s=yield this.inCtx(()=>fc(o));if(s.exists()){let a=s.data().currentBalance||0;yield vs(o,{currentBalance:a-e.amount,updatedAt:wt.now()})}})}deleteCustomerPayment(e){return F(this,null,function*(){let t=or(this.firestore,`customerPayments/${e}`),r=yield this.inCtx(()=>fc(t));if(!r.exists())return;let i=r.data();if(i.customerId&&i.amount){let o=or(this.firestore,`creditCustomers/${i.customerId}`),s=yield this.inCtx(()=>fc(o));if(s.exists()){let a=s.data().currentBalance||0;yield vs(o,{currentBalance:a+i.amount,updatedAt:wt.now()})}}if(i.ledgerId){let o=or(this.firestore,`customerLedger/${i.ledgerId}`);try{yield hc(o)}catch{}}yield hc(t)})}getRecentCustomerPayments(e){return F(this,null,function*(){let t=pn(this.firestore,"customerPayments"),r=wi(t,gs("date","desc"),hb(e));return(yield this.inCtx(()=>ur(r))).docs.map(o=>Ie({id:o.id},o.data()))})}postBillToAccount(e,t){return F(this,null,function*(){let r={customerId:t,customerName:e.customerName||"N/A",date:e.createdAt,referenceType:"sale",referenceNumber:e.orderNumber,debit:e.totalAmount,credit:0,runningBalance:0,notes:e.isTakeaway?"Takeaway Order":`Table ${e.tableNumber}`};yield this.addLedgerEntry(r);let i=or(this.firestore,`creditCustomers/${t}`),o=yield this.inCtx(()=>fc(i));if(o.exists()){let s=o.data().currentBalance||0;yield vs(i,{currentBalance:s+e.totalAmount,updatedAt:wt.now()})}})}getAgingReport(){return F(this,null,function*(){let e=yield this.getCreditCustomers(),t=new Date,r=[];for(let i of e)if(i.currentBalance>0){let o=yield this.getCustomerLedger(i.id),s=o.filter(p=>p.referenceType==="sale"),a=0,c=0,l=0,u,m,_=o.filter(p=>p.referenceType==="payment");_.length>0&&(m=_[0].date);for(let p of s){let D=p.date instanceof Date?p.date:p.date.toDate(),k=Math.floor((t.getTime()-D.getTime())/(1e3*60*60*24));(!u||D<u)&&(u=D),k<=15?a+=p.debit:k<=30?c+=p.debit:l+=p.debit}r.push({customerId:i.id,customerName:i.name,phone:i.phone,totalBalance:i.currentBalance,current:a,overdue:c,critical:l,lastPaymentDate:m,oldestDebtDate:u})}return r})}static \u0275fac=function(t){return new(t||n)(Ot(fl),Ot(hr))};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})};var Dr=class n{constructor(e,t,r,i,o){this.auth=e;this.firestore=t;this.router=r;this.envInjector=i;this.db=o;s3(this.auth,l1).catch(s=>{console.error("Failed to set auth persistence:",s)}),this.user$=r3(this.auth),this.user$.subscribe(s=>F(this,null,function*(){s?yield this.loadUserData(s.uid):this.currentUser=null}))}user$;currentUser=null;login(e,t){return F(this,null,function*(){try{console.log("Starting login for:",e);let r=yield a3(this.auth,e,t);if(console.log("Firebase auth successful, UID:",r.user.uid),yield this.loadUserData(r.user.uid),console.log("User data loaded:",this.currentUser),!this.currentUser)throw new Error("Failed to load user profile");this.logActivity("Logged in"),console.log("Redirecting user with role:",this.currentUser.role),this.currentUser?.role==="admin"?this.router.navigate(["/dashboard"]):this.currentUser?.role==="cashier"?this.router.navigate(["/pos"]):this.currentUser?.role==="chef"?this.router.navigate(["/kitchen"]):this.currentUser?.role==="waiter"&&this.router.navigate(["/waiter"])}catch(r){throw console.error("Login error:",r),new Error(r.message)}})}loadUserData(e){return F(this,null,function*(){try{let t=or(this.firestore,`users/${e}`),r=yield Ir(this.envInjector,()=>fc(t));if(r.exists())this.currentUser=Ie({id:e},r.data());else throw console.error("User profile not found in Firestore for UID:",e),new Error("User profile not found. Please contact administrator.")}catch(t){throw console.error("Error loading user data:",t),t}})}ensureUserLoaded(e){return F(this,null,function*(){(!this.currentUser||this.currentUser.id!==e)&&(yield this.loadUserData(e))})}logout(){return F(this,null,function*(){yield c3(this.auth),this.currentUser=null,this.router.navigate(["/login"])})}isLoggedIn(){return this.currentUser!==null}hasRole(e){return this.currentUser?.role===e}createUserAccount(e,t,r){return F(this,null,function*(){try{let o=(yield i3(this.auth,e,t)).user.uid,s=or(this.firestore,`users/${o}`);return yield GL(s,ft(Ie({},r),{createdAt:new Date})),o}catch(i){throw console.error("Error creating user account:",i),new Error(i.message||"Failed to create user account")}})}logActivity(e,t){return F(this,null,function*(){if(!this.currentUser)return;let r={userId:this.currentUser.id,userName:this.currentUser.name,action:e,timestamp:new Date,details:t};try{yield this.db.logActivity(r)}catch(i){console.error("Failed to log activity:",i)}})}static \u0275fac=function(t){return new(t||n)(Ot(Yd),Ot(fl),Ot(Hs),Ot(hr),Ot(gr))};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})};var xa=()=>F(null,null,function*(){let n=Le(Dr),e=Le(Hs),t=yield Nv(n.user$.pipe(Rs(1)));return t?(yield n.ensureUserLoaded(t.uid),!0):(e.navigate(["/login"]),!1)}),Ru=()=>F(null,null,function*(){let n=Le(Dr),e=Le(Hs),t=yield Nv(n.user$.pipe(Rs(1)));return t&&(yield n.ensureUserLoaded(t.uid),n.hasRole("admin"))?!0:(e.navigate(["/"]),!1)});var oF=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(Je(Qa),Je(pa))};static \u0275dir=Un({type:n})}return n})(),hp=(()=>{class n extends oF{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Oo(n)))(i||n)}})();static \u0275dir=Un({type:n,features:[pi]})}return n})(),ch=new ht(""),CZ={provide:ch,useExisting:Oi(()=>ml),multi:!0},ml=(()=>{class n extends hp{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Oo(n)))(i||n)}})();static \u0275dir=Un({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&me("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Lo([CZ]),pi]})}return n})(),EZ={provide:ch,useExisting:Oi(()=>Ci),multi:!0};function IZ(){let n=$s()?$s().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var xZ=new ht(""),Ci=(()=>{class n extends oF{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!IZ())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(Je(Qa),Je(pa),Je(xZ,8))};static \u0275dir=Un({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&me("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Lo([EZ]),pi]})}return n})();function SZ(n){return n==null||sF(n)===0}function sF(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var fp=new ht(""),aF=new ht("");function DZ(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function TZ(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function AZ(n){return SZ(n.value)?{required:!0}:null}function MZ(n){return e=>{let t=e.value?.length??sF(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function QL(n){return null}function cF(n){return n!=null}function lF(n){return au(n)?Er(n):n}function uF(n){let e={};return n.forEach(t=>{e=t!=null?Ie(Ie({},e),t):e}),Object.keys(e).length===0?null:e}function dF(n,e){return e.map(t=>t(n))}function PZ(n){return!n.validate}function hF(n){return n.map(e=>PZ(e)?e:t=>e.validate(t))}function NZ(n){if(!n)return null;let e=n.filter(cF);return e.length==0?null:function(t){return uF(dF(t,e))}}function XD(n){return n!=null?NZ(hF(n)):null}function kZ(n){if(!n)return null;let e=n.filter(cF);return e.length==0?null:function(t){let r=dF(t,e).map(lF);return o2(r).pipe(vn(uF))}}function eT(n){return n!=null?kZ(hF(n)):null}function ZL(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function OZ(n){return n._rawValidators}function RZ(n){return n._rawAsyncValidators}function ZD(n){return n?Array.isArray(n)?n:[n]:[]}function pb(n,e){return Array.isArray(n)?n.includes(e):n===e}function JL(n,e){let t=ZD(e);return ZD(n).forEach(i=>{pb(t,i)||t.push(i)}),t}function XL(n,e){return ZD(e).filter(t=>!pb(n,t))}var mb=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=XD(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=eT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},up=class extends mb{name;get formDirective(){return null}get path(){return null}},dp=class extends mb{_parent=null;name=null;valueAccessor=null},gb=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},LZ={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},EIe=ft(Ie({},LZ),{"[class.ng-submitted]":"isSubmitted"}),Zi=(()=>{class n extends gb{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(Je(dp,2))};static \u0275dir=Un({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&kt("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[pi]})}return n})(),fF=(()=>{class n extends gb{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(Je(up,10))};static \u0275dir=Un({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&kt("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[pi]})}return n})();var o0="VALID",fb="INVALID",cp="PENDING",s0="DISABLED",Lu=class{},vb=class extends Lu{value;source;constructor(e,t){super(),this.value=e,this.source=t}},c0=class extends Lu{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},l0=class extends Lu{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},lp=class extends Lu{status;source;constructor(e,t){super(),this.status=e,this.source=t}},JD=class extends Lu{source;constructor(e){super(),this.source=e}},yb=class extends Lu{source;constructor(e){super(),this.source=e}};function pF(n){return(wb(n)?n.validators:n)||null}function FZ(n){return Array.isArray(n)?XD(n):n||null}function mF(n,e){return(wb(e)?e.asyncValidators:n)||null}function VZ(n){return Array.isArray(n)?eT(n):n||null}function wb(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function jZ(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new rt(1e3,"");if(!r[t])throw new rt(1001,"")}function BZ(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new rt(1002,"")})}var _b=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return mi(this.statusReactive)}set status(e){mi(()=>this.statusReactive.set(e))}_status=mf(()=>this.statusReactive());statusReactive=Us(void 0);get valid(){return this.status===o0}get invalid(){return this.status===fb}get pending(){return this.status==cp}get disabled(){return this.status===s0}get enabled(){return this.status!==s0}errors;get pristine(){return mi(this.pristineReactive)}set pristine(e){mi(()=>this.pristineReactive.set(e))}_pristine=mf(()=>this.pristineReactive());pristineReactive=Us(!0);get dirty(){return!this.pristine}get touched(){return mi(this.touchedReactive)}set touched(e){mi(()=>this.touchedReactive.set(e))}_touched=mf(()=>this.touchedReactive());touchedReactive=Us(!1);get untouched(){return!this.touched}_events=new Yr;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(JL(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(JL(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(XL(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(XL(e,this._rawAsyncValidators))}hasValidator(e){return pb(this._rawValidators,e)}hasAsyncValidator(e){return pb(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ft(Ie({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new l0(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new l0(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ft(Ie({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new c0(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new c0(!0,r))}markAsPending(e={}){this.status=cp;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new lp(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ft(Ie({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=s0,this.errors=null,this._forEachChild(i=>{i.disable(ft(Ie({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new vb(this.value,r)),this._events.next(new lp(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ft(Ie({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=o0,this._forEachChild(r=>{r.enable(ft(Ie({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ft(Ie({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===o0||this.status===cp)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new vb(this.value,t)),this._events.next(new lp(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ft(Ie({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?s0:o0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=cp,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=lF(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new lp(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Zr,this.statusChanges=new Zr}_calculateStatus(){return this._allControlsDisabled()?s0:this.errors?fb:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(cp)?cp:this._anyControlsHaveStatus(fb)?fb:o0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new c0(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new l0(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){wb(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=FZ(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=VZ(this._rawAsyncValidators)}},bb=class extends _b{constructor(e,t,r){super(pF(t),mF(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){BZ(this,!0,e),Object.keys(e).forEach(r=>{jZ(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new yb(this))}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Cb=new ht("",{providedIn:"root",factory:()=>Eb}),Eb="always";function UZ(n,e){return[...e.path,n]}function gF(n,e,t=Eb){vF(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),$Z(n,e),HZ(n,e),qZ(n,e),zZ(n,e)}function eF(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function zZ(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function vF(n,e){let t=OZ(n);e.validator!==null?n.setValidators(ZL(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=RZ(n);e.asyncValidator!==null?n.setAsyncValidators(ZL(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();eF(e._rawValidators,i),eF(e._rawAsyncValidators,i)}function $Z(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&yF(n,e)})}function qZ(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&yF(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function yF(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function HZ(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function WZ(n,e){n==null,vF(n,e)}function GZ(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function KZ(n){return Object.getPrototypeOf(n.constructor)===hp}function YZ(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function QZ(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Ci?t=o:KZ(o)?r=o:i=o}),i||r||t||null}var ZZ={provide:up,useExisting:Oi(()=>tT)},a0=Promise.resolve(),tT=(()=>{class n extends up{callSetDisabledState;get submitted(){return mi(this.submittedReactive)}_submitted=mf(()=>this.submittedReactive());submittedReactive=Us(!1);_directives=new Set;form;ngSubmit=new Zr;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new bb({},XD(t),eT(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){a0.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),gF(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){a0.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){a0.then(()=>{let r=this._findContainer(t.path),i=new bb({});WZ(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){a0.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){a0.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),YZ(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new JD(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(Je(fp,10),Je(aF,10),Je(Cb,8))};static \u0275dir=Un({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&me("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Lo([ZZ]),pi]})}return n})();function tF(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function nF(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var JZ=class extends _b{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(pF(t),mF(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),wb(t)&&(t.nonNullable||t.initialValueIsDefault)&&(nF(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new yb(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){tF(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){tF(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){nF(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var XZ={provide:dp,useExisting:Oi(()=>ji)},rF=Promise.resolve(),ji=(()=>{class n extends dp{_changeDetectorRef;callSetDisabledState;control=new JZ;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Zr;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=QZ(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),GZ(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){gF(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){rF.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&kd(r);rF.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?UZ(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(Je(up,9),Je(fp,10),Je(aF,10),Je(ch,10),Je(Nd,8),Je(Cb,8))};static \u0275dir=Un({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Lo([XZ]),pi,Hc]})}return n})();var _F=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Un({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),eJ={provide:ch,useExisting:Oi(()=>ys),multi:!0},ys=(()=>{class n extends hp{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Oo(n)))(i||n)}})();static \u0275dir=Un({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&me("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Lo([eJ]),pi]})}return n})(),tJ={provide:ch,useExisting:Oi(()=>u0),multi:!0};var nJ=(()=>{class n{_accessors=[];add(t,r){this._accessors.push([t,r])}remove(t){for(let r=this._accessors.length-1;r>=0;--r)if(this._accessors[r][1]===t){this._accessors.splice(r,1);return}}select(t){this._accessors.forEach(r=>{this._isSameGroup(r,t)&&r[1]!==t&&r[1].fireUncheck(t.value)})}_isSameGroup(t,r){return t[0].control?t[0]._parent===r._control._parent&&t[1].name===r.name:!1}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),u0=(()=>{class n extends hp{_registry;_injector;_state;_control;_fn;setDisabledStateFired=!1;onChange=()=>{};name;formControlName;value;callSetDisabledState=Le(Cb,{optional:!0})??Eb;constructor(t,r,i,o){super(t,r),this._registry=i,this._injector=o}ngOnInit(){this._control=this._injector.get(dp),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this.setProperty("checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}setDisabledState(t){(this.setDisabledStateFired||t||this.callSetDisabledState==="whenDisabledForLegacyCode")&&this.setProperty("disabled",t),this.setDisabledStateFired=!0}fireUncheck(t){this.writeValue(t)}_checkName(){this.name&&this.formControlName&&(this.name,this.formControlName),!this.name&&this.formControlName&&(this.name=this.formControlName)}static \u0275fac=function(r){return new(r||n)(Je(Qa),Je(pa),Je(nJ),Je(Ur))};static \u0275dir=Un({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(r,i){r&1&&me("change",function(){return i.onChange()})("blur",function(){return i.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},standalone:!1,features:[Lo([tJ]),pi]})}return n})();var rJ={provide:ch,useExisting:Oi(()=>Ks),multi:!0};function bF(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function iJ(n){return n.split(":")[0]}var Ks=(()=>{class n extends hp{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=Le(Gc).injector;destroyRef=Le(ha);cdr=Le(Nd);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Fy({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let r=this._getOptionId(t),i=bF(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=iJ(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Oo(n)))(i||n)}})();static \u0275dir=Un({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&me("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Lo([rJ]),pi]})}return n})(),pc=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(bF(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||n)(Je(pa),Je(Qa),Je(Ks,9))};static \u0275dir=Un({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),oJ={provide:ch,useExisting:Oi(()=>wF),multi:!0};function iF(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function sJ(n){return n.split(":")[0]}var wF=(()=>{class n extends hp{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],l=this._getOptionValue(c.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let l=this._getOptionValue(c.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=sJ(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Oo(n)))(i||n)}})();static \u0275dir=Un({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&me("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Lo([oJ]),pi]})}return n})(),mc=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(iF(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(iF(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(Je(pa),Je(Qa),Je(wF,9))};static \u0275dir=Un({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function aJ(n){return typeof n=="number"?n:parseInt(n,10)}function CF(n){return typeof n=="number"?n:parseFloat(n)}var Ib=(()=>{class n{_validator=QL;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):QL,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Un({type:n,features:[Hc]})}return n})(),cJ={provide:fp,useExisting:Oi(()=>lh),multi:!0},lh=(()=>{class n extends Ib{max;inputName="max";normalizeInput=t=>CF(t);createValidator=t=>TZ(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=Oo(n)))(i||n)}})();static \u0275dir=Un({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Kc("max",i._enabled?i.max:null)},inputs:{max:"max"},standalone:!1,features:[Lo([cJ]),pi]})}return n})(),lJ={provide:fp,useExisting:Oi(()=>_s),multi:!0},_s=(()=>{class n extends Ib{min;inputName="min";normalizeInput=t=>CF(t);createValidator=t=>DZ(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=Oo(n)))(i||n)}})();static \u0275dir=Un({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Kc("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[Lo([lJ]),pi]})}return n})(),uJ={provide:fp,useExisting:Oi(()=>nT),multi:!0};var nT=(()=>{class n extends Ib{required;inputName="required";normalizeInput=kd;createValidator=t=>AZ;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Oo(n)))(i||n)}})();static \u0275dir=Un({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Kc("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Lo([uJ]),pi]})}return n})();var dJ={provide:fp,useExisting:Oi(()=>rT),multi:!0},rT=(()=>{class n extends Ib{maxlength;inputName="maxlength";normalizeInput=t=>aJ(t);createValidator=t=>MZ(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=Oo(n)))(i||n)}})();static \u0275dir=Un({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Kc("maxlength",i._enabled?i.maxlength:null)},inputs:{maxlength:"maxlength"},standalone:!1,features:[Lo([dJ]),pi]})}return n})();var hJ=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Wc({type:n});static \u0275inj=za({})}return n})();var Ei=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Cb,useValue:t.callSetDisabledState??Eb}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Wc({type:n});static \u0275inj=za({imports:[hJ]})}return n})();function fJ(n,e){if(n&1&&(v(0,"div",13),w(1),g()),n&2){let t=Z();I(),Oe(" ",t.errorMessage," ")}}var xb=class n{constructor(e){this.authService=e}email="";password="";errorMessage="";isLoading=!1;onLogin(){return F(this,null,function*(){if(this.errorMessage="",!this.email||!this.password){this.errorMessage="Please enter both email and password";return}this.isLoading=!0;try{yield this.authService.login(this.email,this.password)}catch(e){this.errorMessage=e.message||"Login failed. Please try again."}finally{this.isLoading=!1}})}static \u0275fac=function(t){return new(t||n)(Je(Dr))};static \u0275cmp=Jn({type:n,selectors:[["app-login"]],decls:22,vars:7,consts:[[1,"login-container"],[1,"login-card"],[1,"login-header"],[1,"login-form",3,"ngSubmit"],[1,"form-group"],["for","email"],["type","email","id","email","name","email","placeholder","Enter your email","required","",3,"ngModelChange","ngModel","disabled"],["for","password"],["type","password","id","password","name","password","placeholder","Enter your password","required","",3,"ngModelChange","ngModel","disabled"],["class","error-message",4,"ngIf"],["type","submit",1,"login-button",3,"disabled"],[1,"forgot-password"],["href","#",3,"click"],[1,"error-message"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),w(4,"Visakh"),g(),v(5,"p"),w(6,"Please login to continue"),g()(),v(7,"form",3),me("ngSubmit",function(){return r.onLogin()}),v(8,"div",4)(9,"label",5),w(10,"Email"),g(),v(11,"input",6),Ye("ngModelChange",function(o){return Qe(r.email,o)||(r.email=o),o}),g()(),v(12,"div",4)(13,"label",7),w(14,"Password"),g(),v(15,"input",8),Ye("ngModelChange",function(o){return Qe(r.password,o)||(r.password=o),o}),g()(),Fe(16,fJ,2,1,"div",9),v(17,"button",10),w(18),g(),v(19,"div",11)(20,"a",12),me("click",function(o){return o.preventDefault()}),w(21,"Forgot Password?"),g()()()()()),t&2&&(I(11),Ke("ngModel",r.email),ie("disabled",r.isLoading),I(4),Ke("ngModel",r.password),ie("disabled",r.isLoading),I(),ie("ngIf",r.errorMessage),I(),ie("disabled",r.isLoading),I(),Oe(" ",r.isLoading?"Logging in...":"Login"," "))},dependencies:[ir,lr,Ei,_F,Ci,Zi,fF,nT,ji,tT],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2)}.login-card[_ngcontent-%COMP%]{background:#fff;border-radius:10px;box-shadow:0 10px 25px #0003;padding:40px;width:100%;max-width:400px}.login-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#333;font-size:24px;margin-bottom:10px}.login-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:14px}.login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#333;font-weight:500;font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:12px;border:1px solid #ddd;border-radius:5px;font-size:14px;transition:border-color .3s}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{background-color:#f5f5f5;cursor:not-allowed}.error-message[_ngcontent-%COMP%]{background-color:#fee;color:#c33;padding:10px;border-radius:5px;font-size:14px;border:1px solid #fcc}.login-button[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;padding:12px;border-radius:5px;font-size:16px;font-weight:500;cursor:pointer;transition:opacity .3s}.login-button[_ngcontent-%COMP%]:hover:not(:disabled){opacity:.9}.login-button[_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.6}.forgot-password[_ngcontent-%COMP%]{text-align:center;margin-top:10px}.forgot-password[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#667eea;text-decoration:none;font-size:14px}.forgot-password[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};function pJ(n,e){n&1&&(v(0,"div",4),w(1,"Loading dashboard data..."),g())}function mJ(n,e){if(n&1&&(v(0,"div",29)(1,"strong"),w(2),g(),w(3),g()),n&2){let t=e.$implicit;I(2),Ve(t.name),I(),Hy(" is below ",t.lowStockThreshold,"",t.unit," (Current: ",t.currentStock,"",t.unit,") ")}}function gJ(n,e){if(n&1&&(v(0,"div",14)(1,"h2",15),w(2,"\u{1F6A8} Low Stock Alerts"),g(),v(3,"div",27),Fe(4,mJ,4,5,"div",28),g()()),n&2){let t=Z(2);I(4),ie("ngForOf",t.lowStockItems)}}function vJ(n,e){if(n&1&&(v(0,"div",30)(1,"div",31),Fi(2,"div",32)(3,"div",33),g(),v(4,"div",34),w(5),g()()),n&2){let t=e.$implicit,r=Z(2);I(2),Md("height",t.sales/r.maxChartValue*100,"%"),ie("title","Sales: "+r.formatCurrency(t.sales)),I(),Md("height",t.expenses/r.maxChartValue*100,"%"),ie("title","Expenses: "+r.formatCurrency(t.expenses)),I(2),Ve(t.date)}}function yJ(n,e){if(n&1&&(v(0,"div",39),w(1),cu(2,"date"),g()),n&2){let t=Z().$implicit;I(),Oe(" ",lu(2,1,t.timestamp,"short")," ")}}function _J(n,e){if(n&1&&(v(0,"div",35)(1,"div",36),w(2),g(),v(3,"div",37),w(4),g(),Fe(5,yJ,3,4,"div",38),g()),n&2){let t=e.$implicit;I(2),Ve(t.userName),I(2),Ve(t.action),I(),ie("ngIf",t.timestamp)}}function bJ(n,e){n&1&&(v(0,"div",40),w(1," No recent activities "),g())}function wJ(n,e){if(n&1&&(v(0,"div")(1,"div",5)(2,"div",6)(3,"div",7),w(4,"\u{1F4B0}"),g(),v(5,"div",8)(6,"h3"),w(7,"Total Sales Today"),g(),v(8,"p",9),w(9),g()()(),v(10,"div",10)(11,"div",7),w(12,"\u{1F6D2}"),g(),v(13,"div",8)(14,"h3"),w(15,"Total Orders Today"),g(),v(16,"p",9),w(17),g()()(),v(18,"div",11)(19,"div",7),w(20,"\u{1F4CA}"),g(),v(21,"div",8)(22,"h3"),w(23,"Expenses Today"),g(),v(24,"p",9),w(25),g()()(),v(26,"div",12)(27,"div",7),w(28),g(),v(29,"div",8)(30,"h3"),w(31,"Profit Today"),g(),v(32,"p",9),w(33),g()()()(),Fe(34,gJ,5,1,"div",13),v(35,"div",14)(36,"h2",15),w(37,"\u{1F4CA} Sales vs Expenses (Last 7 Days)"),g(),v(38,"div",16)(39,"div",17)(40,"div",18),Fe(41,vJ,6,7,"div",19),g(),v(42,"div",20)(43,"div",21),Fi(44,"span",22),v(45,"span"),w(46,"Sales"),g()(),v(47,"div",21),Fi(48,"span",23),v(49,"span"),w(50,"Expenses"),g()()()()()(),v(51,"div",14)(52,"h2",15),w(53,"\u{1F4DD} Recent Activity"),g(),v(54,"div",24),Fe(55,_J,6,3,"div",25)(56,bJ,2,0,"div",26),g()()()),n&2){let t=Z();I(9),Ve(t.formatCurrency(t.totalSalesToday)),I(8),Ve(t.totalOrdersToday),I(8),Ve(t.formatCurrency(t.totalExpensesToday)),I(),kt("negative",t.profitToday<0),I(2),Ve(t.profitToday>=0?"\u{1F4C8}":"\u{1F4C9}"),I(5),Ve(t.formatCurrency(t.profitToday)),I(),ie("ngIf",t.lowStockItems.length>0),I(7),ie("ngForOf",t.chartData),I(14),ie("ngForOf",t.recentActivities),I(),ie("ngIf",t.recentActivities.length===0)}}var Sb=class n{constructor(e){this.db=e}totalSalesToday=0;totalOrdersToday=0;totalExpensesToday=0;profitToday=0;lowStockItems=[];recentActivities=[];chartData=[];maxChartValue=100;weekOrdersCount=0;weekPurchasesCount=0;weekOrderStatusCounts={};isLoading=!0;ngOnInit(){return F(this,null,function*(){yield this.loadDashboardData()})}loadDashboardData(){return F(this,null,function*(){this.isLoading=!0;try{let e=yield Promise.allSettled([this.db.getTodaySales(),this.db.getTodayExpenses(),this.db.getTodayOrders(),this.db.getLowStockItems(),this.db.getRecentActivityLogs(5)]),[t,r,i,o,s]=e;t.status==="fulfilled"?this.totalSalesToday=t.value:console.error("Failed to load today sales:",t.reason),r.status==="fulfilled"?this.totalExpensesToday=r.value:console.error("Failed to load today expenses:",r.reason),this.profitToday=this.totalSalesToday-this.totalExpensesToday,i.status==="fulfilled"?this.totalOrdersToday=i.value.length:console.error("Failed to load today orders:",i.reason),o.status==="fulfilled"?this.lowStockItems=o.value:console.error("Failed to load low stock items:",o.reason),s.status==="fulfilled"?(this.recentActivities=s.value,console.log("Recent activities loaded:",this.recentActivities.length,this.recentActivities)):console.error("Failed to load recent activities:",s.reason);try{yield this.loadChartData()}catch(a){console.error("Failed to load chart data:",a)}}catch(e){console.error("Error loading dashboard data:",e)}finally{this.isLoading=!1}})}loadChartData(){return F(this,null,function*(){this.chartData=[];let e=new Date;e.setHours(23,59,59,999);let t=new Date(e);t.setDate(e.getDate()-6),t.setHours(0,0,0,0),console.log("Loading chart data from",t,"to",e);let[r,i]=yield Promise.all([this.db.getOrdersByDateRange(t,e),this.db.getPurchasesByDateRange(t,e)]);console.log("Week orders:",r.length,r),console.log("Week purchases:",i.length,i),this.weekOrdersCount=r.length,this.weekPurchasesCount=i.length,this.weekOrderStatusCounts=r.reduce((l,u)=>(l[u.status]=(l[u.status]||0)+1,l),{});let o=l=>l?l.toDate&&typeof l.toDate=="function"?l.toDate():l instanceof Date?l:new Date(l):new Date(NaN),s=l=>{let u=l.getFullYear(),m=String(l.getMonth()+1).padStart(2,"0"),_=String(l.getDate()).padStart(2,"0");return`${u}-${m}-${_}`},a={};for(let l=0;l<7;l++){let u=new Date(t);u.setDate(t.getDate()+l);let m=s(u);a[m]={label:this.formatDate(u),sales:0,expenses:0}}for(let l of r){if(l.status!=="completed")continue;let u=o(l.createdAt),m=isNaN(u.getTime())?"":s(u);console.log("Order date:",l.createdAt,"-> parsed:",u,"-> key:",m,"-> amount:",l.totalAmount),m&&a[m]&&(a[m].sales+=l.totalAmount||0)}for(let l of i){let u=o(l.date),m=isNaN(u.getTime())?"":s(u);console.log("Purchase date:",l.date,"-> parsed:",u,"-> key:",m,"-> cost:",l.totalCost),m&&a[m]&&(a[m].expenses+=l.totalCost||0)}this.chartData=Object.keys(a).sort().map(l=>({date:a[l].label,sales:a[l].sales,expenses:a[l].expenses})),console.log("Buckets after aggregation:",JSON.stringify(a,null,2)),console.log("Chart data array:",JSON.stringify(this.chartData,null,2));let c=this.chartData.flatMap(l=>[l.sales,l.expenses]);this.maxChartValue=Math.max(...c,100),console.log("Max chart value:",this.maxChartValue,"All values:",c)})}formatDate(e){return`${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()]} ${e.getDate()}`}formatCurrency(e){return`${e.toFixed(0)}`}get debugInfo(){let e=this.chartData.filter(t=>t.sales>0||t.expenses>0);return{maxChartValue:this.maxChartValue,chartData:this.chartData,nonZeroDays:e,allValues:this.chartData.flatMap(t=>[t.sales,t.expenses]),recentCount:this.recentActivities.length,totals:{salesToday:this.totalSalesToday,expensesToday:this.totalExpensesToday,ordersToday:this.totalOrdersToday,profitToday:this.profitToday},weekOrdersCount:this.weekOrdersCount,weekPurchasesCount:this.weekPurchasesCount,weekOrderStatusCounts:this.weekOrderStatusCounts}}static \u0275fac=function(t){return new(t||n)(Je(gr))};static \u0275cmp=Jn({type:n,selectors:[["app-dashboard"]],decls:5,vars:2,consts:[[1,"dashboard-container"],[1,"page-title"],["class","loading",4,"ngIf"],[4,"ngIf"],[1,"loading"],[1,"stats-grid"],[1,"stat-card","sales"],[1,"stat-icon"],[1,"stat-content"],[1,"stat-value"],[1,"stat-card","orders"],[1,"stat-card","expenses"],[1,"stat-card","profit"],["class","section",4,"ngIf"],[1,"section"],[1,"section-title"],[1,"chart-container"],[1,"chart"],[1,"chart-bars"],["class","chart-group",4,"ngFor","ngForOf"],[1,"chart-legend"],[1,"legend-item"],[1,"legend-color","sales"],[1,"legend-color","expenses"],[1,"activity-list"],["class","activity-item",4,"ngFor","ngForOf"],["class","no-data",4,"ngIf"],[1,"alert-list"],["class","alert-item",4,"ngFor","ngForOf"],[1,"alert-item"],[1,"chart-group"],[1,"bar-container"],[1,"bar","sales-bar",3,"title"],[1,"bar","expenses-bar",3,"title"],[1,"chart-label"],[1,"activity-item"],[1,"activity-user"],[1,"activity-action"],["class","activity-time",4,"ngIf"],[1,"activity-time"],[1,"no-data"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"h1",1),w(2,"Admin Dashboard"),g(),Fe(3,pJ,2,0,"div",2)(4,wJ,57,11,"div",3),g()),t&2&&(I(3),ie("ngIf",r.isLoading),I(),ie("ngIf",!r.isLoading))},dependencies:[ir,Nr,lr,Od],styles:[".dashboard-container[_ngcontent-%COMP%]{padding:20px;max-width:1400px;margin:0 auto}.page-title[_ngcontent-%COMP%]{font-size:28px;color:#333;margin-bottom:30px}.loading[_ngcontent-%COMP%]{text-align:center;padding:40px;font-size:18px;color:#666}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin-bottom:30px}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:10px;padding:20px;display:flex;align-items:center;gap:15px;box-shadow:0 2px 8px #0000001a;transition:transform .2s}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.stat-card.sales[_ngcontent-%COMP%]{border-left:4px solid #4caf50}.stat-card.orders[_ngcontent-%COMP%]{border-left:4px solid #2196f3}.stat-card.expenses[_ngcontent-%COMP%]{border-left:4px solid #ff9800}.stat-card.profit[_ngcontent-%COMP%]{border-left:4px solid #9c27b0}.stat-card.profit.negative[_ngcontent-%COMP%]{border-left:4px solid #f44336}.stat-icon[_ngcontent-%COMP%]{font-size:40px}.stat-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:14px;color:#666;margin:0 0 5px}.stat-value[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#333;margin:0}.section[_ngcontent-%COMP%]{background:#fff;border-radius:10px;padding:20px;margin-bottom:20px;box-shadow:0 2px 8px #0000001a}.section-title[_ngcontent-%COMP%]{font-size:20px;color:#333;margin:0 0 20px}.alert-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.alert-item[_ngcontent-%COMP%]{background:#fff3cd;border:1px solid #ffc107;border-radius:5px;padding:12px;color:#856404}.chart-container[_ngcontent-%COMP%]{overflow-x:auto}.chart[_ngcontent-%COMP%]{min-width:600px;height:260px}.chart-bars[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:flex-end;height:80%;border-bottom:2px solid #ddd;padding:20px 0}.chart-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;flex:1;height:100%}.bar-container[_ngcontent-%COMP%]{display:flex;gap:5px;align-items:flex-end;height:100%;width:100%;justify-content:center}.bar[_ngcontent-%COMP%]{width:30px;border-radius:4px 4px 0 0;transition:all .3s;cursor:pointer;min-height:2px}.bar[_ngcontent-%COMP%]:hover{opacity:.8}.sales-bar[_ngcontent-%COMP%]{background:linear-gradient(180deg,#4caf50,#81c784)}.expenses-bar[_ngcontent-%COMP%]{background:linear-gradient(180deg,#ff9800,#ffb74d)}.chart-label[_ngcontent-%COMP%]{margin-top:10px;font-size:12px;color:#666;text-align:center}.chart-legend[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:30px;margin-top:20px}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px}.legend-color[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:3px}.legend-color.sales[_ngcontent-%COMP%]{background:#4caf50}.legend-color.expenses[_ngcontent-%COMP%]{background:#ff9800}.activity-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.activity-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px;background:#f5f5f5;border-radius:5px;gap:15px}.activity-user[_ngcontent-%COMP%]{font-weight:600;color:#333;min-width:120px}.activity-action[_ngcontent-%COMP%]{flex:1;color:#666}.activity-time[_ngcontent-%COMP%]{color:#999;font-size:12px;min-width:120px;text-align:right}.no-data[_ngcontent-%COMP%]{text-align:center;padding:20px;color:#999}"]})};function CJ(n,e){if(n&1&&(v(0,"option",14),w(1),g()),n&2){let t=e.$implicit;ie("value",t),I(),Ve(t)}}function EJ(n,e){if(n&1){let t=at();v(0,"tr")(1,"td"),w(2),g(),v(3,"td")(4,"span",15),w(5),g()(),v(6,"td"),w(7),g(),v(8,"td"),w(9),g(),v(10,"td")(11,"span",16),w(12),g()(),v(13,"td",17)(14,"button",18),me("click",function(){let i=le(t).$implicit,o=Z();return ue(o.openEditModal(i))}),w(15,"Edit"),g(),v(16,"button",19),me("click",function(){let i=le(t).$implicit,o=Z();return ue(o.toggleActive(i))}),w(17),g(),v(18,"button",20),me("click",function(){let i=le(t).$implicit,o=Z();return ue(o.deleteItem(i))}),w(19,"Delete"),g()()()}if(n&2){let t=e.$implicit;I(2),Ve(t.name),I(3),Ve(t.category),I(2),Ve(t.price.toFixed(0)),I(2),Oe("",t.taxRate,"%"),I(2),kt("active",t.isActive)("inactive",!t.isActive),I(),Oe(" ",t.isActive?"Active":"Inactive"," "),I(5),Oe(" ",t.isActive?"Deactivate":"Activate"," ")}}function IJ(n,e){n&1&&(v(0,"tr")(1,"td",21),w(2,"No menu items found"),g()())}function xJ(n,e){if(n&1&&(v(0,"option",14),w(1),g()),n&2){let t=e.$implicit;ie("value",t),I(),Ve(t)}}function SJ(n,e){if(n&1){let t=at();v(0,"div",27)(1,"label"),w(2,"Unit"),g(),v(3,"input",46),Ye("ngModelChange",function(i){le(t);let o=Z(2);return Qe(o.currentItem.unit,i)||(o.currentItem.unit=i),ue(i)}),g(),v(4,"small"),w(5,"Enter the unit of measurement (e.g., kg for kilograms)"),g()()}if(n&2){let t=Z(2);I(3),Ke("ngModel",t.currentItem.unit)}}function DJ(n,e){if(n&1&&(v(0,"option",14),w(1),g()),n&2){let t=e.$implicit;ie("value",t.id),I(),Pd(" ",t.name," (",t.currentStock," ",t.unit,") ")}}function TJ(n,e){if(n&1){let t=at();v(0,"div",49)(1,"div",50)(2,"div",51)(3,"label"),w(4,"Inventory Item"),g(),v(5,"select",5),Ye("ngModelChange",function(i){let o=le(t).$implicit;return Qe(o.inventoryItemId,i)||(o.inventoryItemId=i),ue(i)}),me("change",function(i){let o=le(t).$implicit,s=Z(3);return ue(s.onInventorySelect(o,i))}),v(6,"option",52),w(7,"Select item..."),g(),Fe(8,DJ,2,4,"option",7),g()(),v(9,"div",51)(10,"label"),w(11,"Quantity Used"),g(),v(12,"input",53),Ye("ngModelChange",function(i){let o=le(t).$implicit;return Qe(o.quantityUsed,i)||(o.quantityUsed=i),ue(i)}),g()(),v(13,"div",51)(14,"label"),w(15,"Unit"),g(),v(16,"input",54),Ye("ngModelChange",function(i){let o=le(t).$implicit;return Qe(o.unit,i)||(o.unit=i),ue(i)}),g()(),v(17,"div",55)(18,"button",56),me("click",function(){let i=le(t).index,o=Z(3);return ue(o.removeRecipeItem(i))}),w(19,"Remove"),g()()()()}if(n&2){let t=e.$implicit,r=Z(3);I(5),Ke("ngModel",t.inventoryItemId),I(3),ie("ngForOf",r.inventoryItems),I(4),Ke("ngModel",t.quantityUsed),I(4),Ke("ngModel",t.unit)}}function AJ(n,e){if(n&1&&(v(0,"div",47),Fe(1,TJ,20,4,"div",48),g()),n&2){let t=Z(2);I(),ie("ngForOf",t.currentItem.recipeMapping)}}function MJ(n,e){n&1&&(v(0,"div",57)(1,"p"),w(2,'No ingredients added yet. Click "Add Ingredient" to map inventory items.'),g()())}function PJ(n,e){if(n&1){let t=at();v(0,"div",22)(1,"div",23)(2,"div",24)(3,"h2"),w(4),g(),v(5,"button",25),me("click",function(){le(t);let i=Z();return ue(i.closeModal())}),w(6,"\xD7"),g()(),v(7,"div",26)(8,"div",27)(9,"label"),w(10,"Item Name *"),g(),v(11,"input",28),Ye("ngModelChange",function(i){le(t);let o=Z();return Qe(o.currentItem.name,i)||(o.currentItem.name=i),ue(i)}),g()(),v(12,"div",27)(13,"label"),w(14,"Category *"),g(),v(15,"select",29),Ye("ngModelChange",function(i){le(t);let o=Z();return Qe(o.currentItem.category,i)||(o.currentItem.category=i),ue(i)}),Fe(16,xJ,2,2,"option",7),g()(),v(17,"div",30)(18,"div",27)(19,"label"),w(20,"Selling Price (PKR) *"),g(),v(21,"input",31),Ye("ngModelChange",function(i){le(t);let o=Z();return Qe(o.currentItem.price,i)||(o.currentItem.price=i),ue(i)}),g()(),v(22,"div",27)(23,"label"),w(24,"Tax Rate (%) *"),g(),v(25,"input",32),Ye("ngModelChange",function(i){le(t);let o=Z();return Qe(o.currentItem.taxRate,i)||(o.currentItem.taxRate=i),ue(i)}),g()()(),v(26,"div",27)(27,"label"),w(28,"Description"),g(),v(29,"textarea",33),Ye("ngModelChange",function(i){le(t);let o=Z();return Qe(o.currentItem.description,i)||(o.currentItem.description=i),ue(i)}),g()(),v(30,"div",27)(31,"label",34)(32,"input",35),Ye("ngModelChange",function(i){le(t);let o=Z();return Qe(o.currentItem.soldByWeight,i)||(o.currentItem.soldByWeight=i),ue(i)}),g(),w(33," Sold by weight (allows decimal quantities like 0.72 kg) "),g()(),Fe(34,SJ,6,1,"div",36),v(35,"div",27)(36,"label",34)(37,"input",35),Ye("ngModelChange",function(i){le(t);let o=Z();return Qe(o.currentItem.isActive,i)||(o.currentItem.isActive=i),ue(i)}),g(),w(38," Active (visible in POS) "),g()(),v(39,"div",37)(40,"div",38)(41,"h3"),w(42,"Recipe Mapping (Inventory Deduction)"),g(),v(43,"button",39),me("click",function(){le(t);let i=Z();return ue(i.addRecipeItem())}),w(44,"+ Add Ingredient"),g()(),v(45,"p",40),w(46,"Define which inventory items are consumed when this menu item is sold"),g(),Fe(47,AJ,2,1,"div",41)(48,MJ,3,0,"div",42),g()(),v(49,"div",43)(50,"button",44),me("click",function(){le(t);let i=Z();return ue(i.closeModal())}),w(51,"Cancel"),g(),v(52,"button",45),me("click",function(){le(t);let i=Z();return ue(i.saveItem())}),w(53),g()()()()}if(n&2){let t=Z();I(4),Oe("",t.isEditMode?"Edit":"Add New"," Menu Item"),I(7),Ke("ngModel",t.currentItem.name),I(4),Ke("ngModel",t.currentItem.category),I(),ie("ngForOf",t.categories),I(5),Ke("ngModel",t.currentItem.price),I(4),Ke("ngModel",t.currentItem.taxRate),I(4),Ke("ngModel",t.currentItem.description),I(3),Ke("ngModel",t.currentItem.soldByWeight),I(2),ie("ngIf",t.currentItem.soldByWeight),I(3),Ke("ngModel",t.currentItem.isActive),I(10),ie("ngIf",t.currentItem.recipeMapping&&t.currentItem.recipeMapping.length>0),I(),ie("ngIf",!t.currentItem.recipeMapping||t.currentItem.recipeMapping.length===0),I(4),ie("disabled",t.isLoading),I(),Oe(" ",t.isLoading?"Saving...":"Save"," ")}}var Db=class n{constructor(e){this.db=e}menuItems=[];filteredItems=[];inventoryItems=[];isLoading=!1;showAddModal=!1;currentItem=this.getEmptyItem();isEditMode=!1;categories=["BBQ","Curries","Rice","Bread","Salads","Drinks","Desserts"];selectedCategory="all";searchText="";ngOnInit(){return F(this,null,function*(){yield this.loadMenuItems(),yield this.loadInventoryItems()})}getEmptyItem(){return{name:"",category:"BBQ",price:0,taxRate:0,isActive:!0,description:"",recipeMapping:[]}}loadMenuItems(){return F(this,null,function*(){this.isLoading=!0;try{this.menuItems=yield this.db.getMenuItems(),this.applyFilters()}catch(e){console.error("Error loading menu items:",e)}finally{this.isLoading=!1}})}loadInventoryItems(){return F(this,null,function*(){try{this.inventoryItems=yield this.db.getInventoryItems()}catch(e){console.error("Error loading inventory items:",e)}})}applyFilters(){this.filteredItems=this.menuItems.filter(e=>{let t=this.selectedCategory==="all"||e.category===this.selectedCategory,r=!this.searchText||e.name.toLowerCase().includes(this.searchText.toLowerCase());return t&&r})}onCategoryChange(){this.applyFilters()}onSearchChange(){this.applyFilters()}openAddModal(){this.currentItem=this.getEmptyItem(),this.isEditMode=!1,this.showAddModal=!0}openEditModal(e){this.currentItem=ft(Ie({},e),{recipeMapping:e.recipeMapping?[...e.recipeMapping]:[]}),this.isEditMode=!0,this.showAddModal=!0}closeModal(){this.showAddModal=!1,this.currentItem=this.getEmptyItem()}saveItem(){return F(this,null,function*(){if(!this.currentItem.name||this.currentItem.price<=0){alert("Please fill in all required fields");return}this.isLoading=!0;try{this.isEditMode&&this.currentItem.id?yield this.db.updateMenuItem(this.currentItem.id,this.currentItem):yield this.db.createMenuItem(this.currentItem),yield this.loadMenuItems(),this.closeModal()}catch(e){console.error("Error saving menu item:",e),alert("Error saving item. Please try again.")}finally{this.isLoading=!1}})}toggleActive(e){return F(this,null,function*(){if(e.id)try{yield this.db.updateMenuItem(e.id,{isActive:!e.isActive}),yield this.loadMenuItems()}catch(t){console.error("Error updating menu item:",t)}})}deleteItem(e){return F(this,null,function*(){if(e.id&&confirm(`Are you sure you want to delete "${e.name}"?`))try{yield this.db.deleteMenuItem(e.id),yield this.loadMenuItems()}catch(t){console.error("Error deleting menu item:",t)}})}addRecipeItem(){this.currentItem.recipeMapping||(this.currentItem.recipeMapping=[]),this.currentItem.recipeMapping.push({inventoryItemId:"",inventoryItemName:"",quantityUsed:0,unit:""})}removeRecipeItem(e){this.currentItem.recipeMapping&&this.currentItem.recipeMapping.splice(e,1)}onInventorySelect(e,t){let i=t.target.value,o=this.inventoryItems.find(s=>s.id===i);o&&(e.inventoryItemId=o.id,e.inventoryItemName=o.name,e.unit=o.unit)}static \u0275fac=function(t){return new(t||n)(Je(gr))};static \u0275cmp=Jn({type:n,selectors:[["app-menu-management"]],decls:38,vars:6,consts:[[1,"menu-container"],[1,"header"],[1,"btn","btn-primary",3,"click"],[1,"filters"],[1,"filter-group"],[3,"ngModelChange","change","ngModel"],["value","all"],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","Search menu items...",3,"ngModelChange","input","ngModel"],[1,"table-container"],[1,"items-table"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","modal",4,"ngIf"],[3,"value"],[1,"category-badge"],[1,"status-badge"],[1,"actions"],[1,"btn","btn-sm","btn-edit",3,"click"],[1,"btn","btn-sm","btn-toggle",3,"click"],[1,"btn","btn-sm","btn-delete",3,"click"],["colspan","6",1,"no-data"],[1,"modal"],[1,"modal-content"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"form-group"],["type","text","placeholder","e.g., Chicken Kebab",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],[1,"form-row"],["type","number","min","0","step","0.01",3,"ngModelChange","ngModel"],["type","number","min","0","max","100","step","0.1",3,"ngModelChange","ngModel"],["rows","3","placeholder","Optional description",3,"ngModelChange","ngModel"],[1,"checkbox-label"],["type","checkbox",3,"ngModelChange","ngModel"],["class","form-group",4,"ngIf"],[1,"recipe-section"],[1,"recipe-header"],["type","button",1,"btn","btn-sm","btn-add",3,"click"],[1,"help-text"],["class","recipe-list",4,"ngIf"],["class","no-recipe",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click","disabled"],["type","text","placeholder","e.g., kg",3,"ngModelChange","ngModel"],[1,"recipe-list"],["class","recipe-item",4,"ngFor","ngForOf"],[1,"recipe-item"],[1,"recipe-row"],[1,"recipe-field"],["value",""],["type","number","min","0","step","0.01","placeholder","e.g., 1.5",3,"ngModelChange","ngModel"],["type","text","placeholder","e.g., kg","readonly","",3,"ngModelChange","ngModel"],[1,"recipe-actions"],["type","button",1,"btn","btn-sm","btn-delete",3,"click"],[1,"no-recipe"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"div",1)(2,"h1"),w(3,"Menu Management"),g(),v(4,"button",2),me("click",function(){return r.openAddModal()}),w(5,"+ Add New Menu Item"),g()(),v(6,"div",3)(7,"div",4)(8,"label"),w(9,"Category:"),g(),v(10,"select",5),Ye("ngModelChange",function(o){return Qe(r.selectedCategory,o)||(r.selectedCategory=o),o}),me("change",function(){return r.onCategoryChange()}),v(11,"option",6),w(12,"All Categories"),g(),Fe(13,CJ,2,2,"option",7),g()(),v(14,"div",4)(15,"label"),w(16,"Search:"),g(),v(17,"input",8),Ye("ngModelChange",function(o){return Qe(r.searchText,o)||(r.searchText=o),o}),me("input",function(){return r.onSearchChange()}),g()()(),v(18,"div",9)(19,"table",10)(20,"thead")(21,"tr")(22,"th"),w(23,"Name"),g(),v(24,"th"),w(25,"Category"),g(),v(26,"th"),w(27,"Price"),g(),v(28,"th"),w(29,"Tax Rate"),g(),v(30,"th"),w(31,"Status"),g(),v(32,"th"),w(33,"Actions"),g()()(),v(34,"tbody"),Fe(35,EJ,20,10,"tr",11)(36,IJ,3,0,"tr",12),g()()(),Fe(37,PJ,54,14,"div",13),g()),t&2&&(I(10),Ke("ngModel",r.selectedCategory),I(3),ie("ngForOf",r.categories),I(4),Ke("ngModel",r.searchText),I(18),ie("ngForOf",r.filteredItems),I(),ie("ngIf",r.filteredItems.length===0),I(),ie("ngIf",r.showAddModal))},dependencies:[ir,Nr,lr,Ei,pc,mc,Ci,ys,ml,Ks,Zi,_s,lh,ji],styles:[".menu-container[_ngcontent-%COMP%]{padding:20px;max-width:1400px;margin:0 auto}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px;color:#333;margin:0}.filters[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:20px;flex-wrap:wrap}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#666}.filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .filter-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #ddd;border-radius:5px;font-size:14px;min-width:200px}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:10px;box-shadow:0 2px 8px #0000001a;overflow:hidden}.items-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.items-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#f5f5f5}.items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:15px;text-align:left;font-weight:600;color:#333;border-bottom:2px solid #ddd}.items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:15px;border-bottom:1px solid #eee}.items-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f9f9f9}.category-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;background:#e3f2fd;color:#1976d2;border-radius:12px;font-size:12px;font-weight:500}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;border-radius:12px;font-size:12px;font-weight:500}.status-badge.active[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.status-badge.inactive[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.actions[_ngcontent-%COMP%]{display:flex;gap:8px}.no-data[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#999}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:5px;font-size:14px;font-weight:500;cursor:pointer;transition:all .3s}.btn-primary[_ngcontent-%COMP%]{background:#667eea;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:#5568d3}.btn-secondary[_ngcontent-%COMP%]{background:#e0e0e0;color:#333}.btn-secondary[_ngcontent-%COMP%]:hover{background:#d0d0d0}.btn-sm[_ngcontent-%COMP%]{padding:6px 12px;font-size:12px}.btn-edit[_ngcontent-%COMP%]{background:#2196f3;color:#fff}.btn-edit[_ngcontent-%COMP%]:hover{background:#1976d2}.btn-toggle[_ngcontent-%COMP%]{background:#ff9800;color:#fff}.btn-toggle[_ngcontent-%COMP%]:hover{background:#f57c00}.btn-delete[_ngcontent-%COMP%]{background:#f44336;color:#fff}.btn-delete[_ngcontent-%COMP%]:hover{background:#d32f2f}.modal[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:10px;width:90%;max-width:600px;max-height:90vh;overflow-y:auto}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px;border-bottom:1px solid #eee}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:20px;color:#333}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:28px;color:#999;cursor:pointer;padding:0;width:30px;height:30px;line-height:1}.close-btn[_ngcontent-%COMP%]:hover{color:#333}.modal-body[_ngcontent-%COMP%]{padding:20px}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;padding:20px;border-top:1px solid #eee}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:500;color:#333;font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ddd;border-radius:5px;font-size:14px;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:15px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto;cursor:pointer}.recipe-section[_ngcontent-%COMP%]{margin-top:30px;padding:20px;background:#f9f9f9;border-radius:8px;border:1px solid #e0e0e0}.recipe-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.recipe-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px;color:#333}.btn-add[_ngcontent-%COMP%]{background:#4caf50;color:#fff;font-size:12px}.btn-add[_ngcontent-%COMP%]:hover{background:#45a049}.help-text[_ngcontent-%COMP%]{font-size:13px;color:#666;margin:0 0 15px}.recipe-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.recipe-item[_ngcontent-%COMP%]{background:#fff;padding:15px;border-radius:6px;border:1px solid #ddd}.recipe-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr 1fr auto;gap:10px;align-items:end}.recipe-field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.recipe-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:12px;font-weight:500;color:#666;margin:0}.recipe-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .recipe-field[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:8px;border:1px solid #ddd;border-radius:4px;font-size:13px;width:100%;box-sizing:border-box}.recipe-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:read-only{background:#f5f5f5;color:#666}.recipe-actions[_ngcontent-%COMP%]{display:flex;align-items:flex-end}.no-recipe[_ngcontent-%COMP%]{padding:20px;text-align:center;color:#999;font-size:14px}.no-recipe[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}"]})};function NJ(n,e){if(n&1){let t=at();v(0,"tr")(1,"td"),w(2),g(),v(3,"td"),w(4),g(),v(5,"td"),w(6),g(),v(7,"td"),w(8),g(),v(9,"td"),w(10),g(),v(11,"td")(12,"span",11),w(13),g()(),v(14,"td",12)(15,"button",13),me("click",function(){let i=le(t).$implicit,o=Z(2);return ue(o.editItem(i))}),w(16,"Edit"),g(),v(17,"button",14),me("click",function(){let i=le(t).$implicit,o=Z(2);return ue(o.deleteItem(i))}),w(18,"Delete"),g()()()}if(n&2){let t=e.$implicit;I(2),Ve(t.name),I(2),Ve(t.category),I(2),Ve(t.currentStock),I(2),Ve(t.unit),I(2),Ve(t.lowStockThreshold),I(2),kt("low",t.currentStock<t.lowStockThreshold)("ok",t.currentStock>=t.lowStockThreshold),I(),Oe(" ",t.currentStock<t.lowStockThreshold?"\u26A0\uFE0F Low":"\u2705 OK"," ")}}function kJ(n,e){n&1&&(v(0,"tr")(1,"td",15),w(2,"No inventory items"),g()())}function OJ(n,e){if(n&1&&(v(0,"div",7)(1,"table",8)(2,"thead")(3,"tr")(4,"th"),w(5,"Item Name"),g(),v(6,"th"),w(7,"Category"),g(),v(8,"th"),w(9,"Current Stock"),g(),v(10,"th"),w(11,"Unit"),g(),v(12,"th"),w(13,"Low Stock Alert"),g(),v(14,"th"),w(15,"Status"),g(),v(16,"th"),w(17,"Actions"),g()()(),v(18,"tbody"),Fe(19,NJ,19,10,"tr",9)(20,kJ,3,0,"tr",10),g()()()),n&2){let t=Z();I(19),ie("ngForOf",t.inventoryItems),I(),ie("ngIf",t.inventoryItems.length===0)}}function RJ(n,e){if(n&1&&(v(0,"tr")(1,"td"),w(2),cu(3,"date"),g(),v(4,"td"),w(5),g(),v(6,"td"),w(7),g(),v(8,"td"),w(9),g(),v(10,"td"),w(11),g(),v(12,"td"),w(13),g()()),n&2){let t=e.$implicit;I(2),Ve(lu(3,7,t.date,"short")),I(3),Ve(t.supplierName),I(2),Ve(t.inventoryItemName),I(2),Ro("",t.quantity," ",t.unit),I(2),Ve(t.costPrice.toFixed(0)),I(2),Ve(t.totalCost.toFixed(0))}}function LJ(n,e){n&1&&(v(0,"tr")(1,"td",16),w(2,"No purchase records"),g()())}function FJ(n,e){if(n&1&&(v(0,"div",7)(1,"table",8)(2,"thead")(3,"tr")(4,"th"),w(5,"Date"),g(),v(6,"th"),w(7,"Supplier"),g(),v(8,"th"),w(9,"Item"),g(),v(10,"th"),w(11,"Quantity"),g(),v(12,"th"),w(13,"Cost Price"),g(),v(14,"th"),w(15,"Total Cost"),g()()(),v(16,"tbody"),Fe(17,RJ,14,10,"tr",9)(18,LJ,3,0,"tr",10),g()()()),n&2){let t=Z();I(17),ie("ngForOf",t.purchases),I(),ie("ngIf",t.purchases.length===0)}}function VJ(n,e){if(n&1&&(v(0,"tr")(1,"td"),w(2),g(),v(3,"td"),w(4),g(),v(5,"td"),w(6),g(),v(7,"td"),w(8),g()()),n&2){let t=e.$implicit;I(2),Ve(t.name),I(2),Ve(t.contact),I(2),Ve(t.email),I(2),Ve(t.address)}}function jJ(n,e){n&1&&(v(0,"tr")(1,"td",17),w(2,"No suppliers"),g()())}function BJ(n,e){if(n&1&&(v(0,"div",7)(1,"table",8)(2,"thead")(3,"tr")(4,"th"),w(5,"Name"),g(),v(6,"th"),w(7,"Contact"),g(),v(8,"th"),w(9,"Email"),g(),v(10,"th"),w(11,"Address"),g()()(),v(12,"tbody"),Fe(13,VJ,9,4,"tr",9)(14,jJ,3,0,"tr",10),g()()()),n&2){let t=Z();I(13),ie("ngForOf",t.suppliers),I(),ie("ngIf",t.suppliers.length===0)}}function UJ(n,e){if(n&1&&(v(0,"tr")(1,"td"),w(2),cu(3,"date"),g(),v(4,"td"),w(5),g(),v(6,"td")(7,"span",18),w(8),g()(),v(9,"td"),w(10),g(),v(11,"td"),w(12),g(),v(13,"td"),w(14),g()()),n&2){let t=e.$implicit;I(2),Ve(lu(3,20,t.date,"short")),I(3),Ve(t.inventoryItemName),I(2),kt("consumption",t.adjustmentType==="consumption")("wastage",t.adjustmentType==="wastage")("correction",t.adjustmentType==="correction")("production",t.adjustmentType==="production"),I(),Oe(" ",t.adjustmentType," "),I(),kt("negative",t.quantity<0)("positive",t.quantity>0),I(),Pd(" ",t.quantity>0?"+":"","",t.quantity," ",t.unit," "),I(2),Ve(t.reason),I(2),Ve(t.adjustedBy)}}function zJ(n,e){n&1&&(v(0,"tr")(1,"td",16),w(2,"No adjustment records"),g()())}function $J(n,e){if(n&1&&(v(0,"div",7)(1,"table",8)(2,"thead")(3,"tr")(4,"th"),w(5,"Date"),g(),v(6,"th"),w(7,"Item"),g(),v(8,"th"),w(9,"Type"),g(),v(10,"th"),w(11,"Quantity"),g(),v(12,"th"),w(13,"Reason"),g(),v(14,"th"),w(15,"Adjusted By"),g()()(),v(16,"tbody"),Fe(17,UJ,15,23,"tr",9)(18,zJ,3,0,"tr",10),g()()()),n&2){let t=Z();I(17),ie("ngForOf",t.adjustments),I(),ie("ngIf",t.adjustments.length===0)}}function qJ(n,e){if(n&1){let t=at();v(0,"div",19)(1,"div",20)(2,"div",21)(3,"h2"),w(4),g(),v(5,"button",22),me("click",function(){le(t);let i=Z();return ue(i.showAddItemModal=!1)}),w(6,"\xD7"),g()(),v(7,"div",23)(8,"div",24)(9,"label"),w(10,"Item Name *"),g(),v(11,"input",25),Ye("ngModelChange",function(i){le(t);let o=Z();return Qe(o.currentItem.name,i)||(o.currentItem.name=i),ue(i)}),g()(),v(12,"div",24)(13,"label"),w(14,"Category *"),g(),v(15,"select",26),Ye("ngModelChange",function(i){le(t);let o=Z();return Qe(o.currentItem.category,i)||(o.currentItem.category=i),ue(i)}),v(16,"option"),w(17,"Vegetables"),g(),v(18,"option"),w(19,"Meat"),g(),v(20,"option"),w(21,"Spices"),g(),v(22,"option"),w(23,"Oil"),g(),v(24,"option"),w(25,"Rice"),g(),v(26,"option"),w(27,"Crockery"),g(),v(28,"option"),w(29,"Other"),g()()(),v(30,"div",27)(31,"div",24)(32,"label"),w(33,"Current Stock"),g(),v(34,"input",28),Ye("ngModelChange",function(i){le(t);let o=Z();return Qe(o.currentItem.currentStock,i)||(o.currentItem.currentStock=i),ue(i)}),g()(),v(35,"div",24)(36,"label"),w(37,"Unit"),g(),v(38,"select",26),Ye("ngModelChange",function(i){le(t);let o=Z();return Qe(o.currentItem.unit,i)||(o.currentItem.unit=i),ue(i)}),v(39,"option",29),w(40,"Items"),g(),v(41,"option",30),w(42,"Kg"),g()()()(),v(43,"div",24)(44,"label"),w(45,"Low Stock Threshold"),g(),v(46,"input",28),Ye("ngModelChange",function(i){le(t);let o=Z();return Qe(o.currentItem.lowStockThreshold,i)||(o.currentItem.lowStockThreshold=i),ue(i)}),g()()(),v(47,"div",31)(48,"button",32),me("click",function(){le(t);let i=Z();return ue(i.showAddItemModal=!1)}),w(49,"Cancel"),g(),v(50,"button",2),me("click",function(){le(t);let i=Z();return ue(i.saveItem())}),w(51,"Save"),g()()()()}if(n&2){let t=Z();I(4),Oe("",t.isEditMode?"Edit":"Add"," Inventory Item"),I(7),Ke("ngModel",t.currentItem.name),I(4),Ke("ngModel",t.currentItem.category),I(19),Ke("ngModel",t.currentItem.currentStock),I(4),Ke("ngModel",t.currentItem.unit),I(8),Ke("ngModel",t.currentItem.lowStockThreshold)}}function HJ(n,e){if(n&1&&(v(0,"option",39),w(1),g()),n&2){let t=e.$implicit;ie("value",t.id),I(),Ve(t.name)}}function WJ(n,e){if(n&1){let t=at();v(0,"div",19)(1,"div",20)(2,"div",21)(3,"h2"),w(4,"Record Purchase"),g(),v(5,"button",22),me("click",function(){le(t);let i=Z();return ue(i.showAddPurchaseModal=!1)}),w(6,"\xD7"),g()(),v(7,"div",23)(8,"div",24)(9,"label"),w(10,"Supplier Name *"),g(),v(11,"input",25),Ye("ngModelChange",function(i){le(t);let o=Z();return Qe(o.currentPurchase.supplierName,i)||(o.currentPurchase.supplierName=i),ue(i)}),g()(),v(12,"div",24)(13,"label"),w(14,"Inventory Item *"),g(),v(15,"select",33),Ye("ngModelChange",function(i){le(t);let o=Z();return Qe(o.currentPurchase.inventoryItemId,i)||(o.currentPurchase.inventoryItemId=i),ue(i)}),me("change",function(){le(t);let i=Z();return ue(i.onPurchaseItemChange())}),v(16,"option",34),w(17,"Select Item"),g(),Fe(18,HJ,2,2,"option",35),g()(),v(19,"div",27)(20,"div",24)(21,"label"),w(22,"Quantity *"),g(),v(23,"input",36),Ye("ngModelChange",function(i){le(t);let o=Z();return Qe(o.currentPurchase.quantity,i)||(o.currentPurchase.quantity=i),ue(i)}),me("input",function(){le(t);let i=Z();return ue(i.onPurchaseQuantityChange())}),g()(),v(24,"div",24)(25,"label"),w(26,"Cost Price *"),g(),v(27,"input",37),Ye("ngModelChange",function(i){le(t);let o=Z();return Qe(o.currentPurchase.costPrice,i)||(o.currentPurchase.costPrice=i),ue(i)}),me("input",function(){le(t);let i=Z();return ue(i.onPurchaseQuantityChange())}),g()()(),v(28,"div",24)(29,"label"),w(30,"Total Cost"),g(),v(31,"input",38),Ye("ngModelChange",function(i){le(t);let o=Z();return Qe(o.currentPurchase.totalCost,i)||(o.currentPurchase.totalCost=i),ue(i)}),g()()(),v(32,"div",31)(33,"button",32),me("click",function(){le(t);let i=Z();return ue(i.showAddPurchaseModal=!1)}),w(34,"Cancel"),g(),v(35,"button",2),me("click",function(){le(t);let i=Z();return ue(i.savePurchase())}),w(36,"Save Purchase"),g()()()()}if(n&2){let t=Z();I(11),Ke("ngModel",t.currentPurchase.supplierName),I(4),Ke("ngModel",t.currentPurchase.inventoryItemId),I(3),ie("ngForOf",t.inventoryItems),I(5),Ke("ngModel",t.currentPurchase.quantity),I(4),Ke("ngModel",t.currentPurchase.costPrice),I(4),Ke("ngModel",t.currentPurchase.totalCost)}}function GJ(n,e){if(n&1&&(v(0,"option",39),w(1),g()),n&2){let t=e.$implicit;ie("value",t.id),I(),Pd("",t.name," (",t.currentStock," ",t.unit,")")}}function KJ(n,e){if(n&1){let t=at();v(0,"div",19)(1,"div",20)(2,"div",21)(3,"h2"),w(4,"Record Inventory Adjustment"),g(),v(5,"button",22),me("click",function(){le(t);let i=Z();return ue(i.showAddAdjustmentModal=!1)}),w(6,"\xD7"),g()(),v(7,"div",23)(8,"div",24)(9,"label"),w(10,"Inventory Item *"),g(),v(11,"select",33),Ye("ngModelChange",function(i){le(t);let o=Z();return Qe(o.currentAdjustment.inventoryItemId,i)||(o.currentAdjustment.inventoryItemId=i),ue(i)}),me("change",function(){le(t);let i=Z();return ue(i.onAdjustmentItemChange())}),v(12,"option",34),w(13,"Select Item"),g(),Fe(14,GJ,2,4,"option",35),g()(),v(15,"div",24)(16,"label"),w(17,"Adjustment Type *"),g(),v(18,"select",26),Ye("ngModelChange",function(i){le(t);let o=Z();return Qe(o.currentAdjustment.adjustmentType,i)||(o.currentAdjustment.adjustmentType=i),ue(i)}),v(19,"option",40),w(20,"Consumption (reduce stock)"),g(),v(21,"option",41),w(22,"Wastage (reduce stock)"),g(),v(23,"option",42),w(24,"Stock Correction (add/reduce)"),g(),v(25,"option",43),w(26,"Production (add prepared items)"),g()()(),v(27,"div",24)(28,"label"),w(29,"Quantity *"),g(),v(30,"input",44),Ye("ngModelChange",function(i){le(t);let o=Z();return Qe(o.currentAdjustment.quantity,i)||(o.currentAdjustment.quantity=i),ue(i)}),g(),v(31,"small"),w(32,"For consumption/wastage, enter positive number (will be deducted). For correction, use +/- as needed."),g()(),v(33,"div",24)(34,"label"),w(35,"Reason *"),g(),v(36,"textarea",45),Ye("ngModelChange",function(i){le(t);let o=Z();return Qe(o.currentAdjustment.reason,i)||(o.currentAdjustment.reason=i),ue(i)}),g()()(),v(37,"div",31)(38,"button",32),me("click",function(){le(t);let i=Z();return ue(i.showAddAdjustmentModal=!1)}),w(39,"Cancel"),g(),v(40,"button",2),me("click",function(){le(t);let i=Z();return ue(i.saveAdjustment())}),w(41,"Save Adjustment"),g()()()()}if(n&2){let t=Z();I(11),Ke("ngModel",t.currentAdjustment.inventoryItemId),I(3),ie("ngForOf",t.inventoryItems),I(4),Ke("ngModel",t.currentAdjustment.adjustmentType),I(12),Ke("ngModel",t.currentAdjustment.quantity),I(6),Ke("ngModel",t.currentAdjustment.reason)}}var Tb=class n{constructor(e,t){this.db=e;this.authService=t}activeTab="stock";inventoryItems=[];showAddItemModal=!1;currentItem=this.getEmptyItem();isEditMode=!1;purchases=[];showAddPurchaseModal=!1;currentPurchase=this.getEmptyPurchase();suppliers=[];adjustments=[];showAddAdjustmentModal=!1;currentAdjustment;isLoading=!1;ngOnInit(){return F(this,null,function*(){yield this.loadData()})}getEmptyItem(){return{name:"",category:"Vegetables",currentStock:0,unit:"items",lowStockThreshold:5}}getEmptyPurchase(){return{supplierName:"",date:new Date,inventoryItemId:"",inventoryItemName:"",quantity:0,unit:"kg",costPrice:0,totalCost:0}}getEmptyAdjustment(){return{inventoryItemId:"",inventoryItemName:"",adjustmentType:"consumption",quantity:0,unit:"kg",reason:"",adjustedBy:this.authService.currentUser?.name||"Unknown",date:new Date}}loadData(){return F(this,null,function*(){this.isLoading=!0;try{this.inventoryItems=yield this.db.getInventoryItems(),this.purchases=yield this.db.getPurchases(),this.suppliers=yield this.db.getSuppliers(),this.adjustments=yield this.db.getInventoryAdjustments()}catch(e){console.error("Error loading data:",e)}finally{this.isLoading=!1}})}openAddItemModal(){this.currentItem=this.getEmptyItem(),this.isEditMode=!1,this.showAddItemModal=!0}editItem(e){this.currentItem=Ie({},e),this.isEditMode=!0,this.showAddItemModal=!0}deleteItem(e){return F(this,null,function*(){if(e.id&&confirm(`Are you sure you want to delete "${e.name}"? This action cannot be undone.`))try{yield this.db.deleteInventoryItem(e.id),yield this.loadData(),alert("Item deleted successfully")}catch(t){console.error("Error deleting item:",t),alert("Error deleting item. Please try again.")}})}saveItem(){return F(this,null,function*(){if(!this.currentItem.name){alert("Please enter item name");return}try{this.currentItem.id?yield this.db.updateInventoryItem(this.currentItem.id,this.currentItem):yield this.db.createInventoryItem(this.currentItem),yield this.loadData(),this.showAddItemModal=!1}catch(e){console.error("Error saving item:",e)}})}openAddPurchaseModal(){this.currentPurchase=this.getEmptyPurchase(),this.showAddPurchaseModal=!0}onPurchaseItemChange(){let e=this.inventoryItems.find(t=>t.id===this.currentPurchase.inventoryItemId);e&&(this.currentPurchase.inventoryItemName=e.name,this.currentPurchase.unit=e.unit)}onPurchaseQuantityChange(){this.currentPurchase.totalCost=this.currentPurchase.quantity*this.currentPurchase.costPrice}savePurchase(){return F(this,null,function*(){if(!this.currentPurchase.inventoryItemId||this.currentPurchase.quantity<=0){alert("Please fill in all required fields");return}try{yield this.db.createPurchase(this.currentPurchase),yield this.loadData(),this.showAddPurchaseModal=!1}catch(e){console.error("Error saving purchase:",e)}})}openAddAdjustmentModal(){this.currentAdjustment=this.getEmptyAdjustment(),this.showAddAdjustmentModal=!0}onAdjustmentItemChange(){let e=this.inventoryItems.find(t=>t.id===this.currentAdjustment.inventoryItemId);e&&(this.currentAdjustment.inventoryItemName=e.name,this.currentAdjustment.unit=e.unit)}saveAdjustment(){return F(this,null,function*(){if(!this.currentAdjustment.inventoryItemId||!this.currentAdjustment.reason){alert("Please fill in all required fields");return}this.currentAdjustment.adjustmentType==="consumption"||this.currentAdjustment.adjustmentType==="wastage"?this.currentAdjustment.quantity=-Math.abs(this.currentAdjustment.quantity):this.currentAdjustment.adjustmentType==="correction"&&this.currentAdjustment.quantity>0;try{yield this.db.createInventoryAdjustment(this.currentAdjustment),yield this.loadData(),this.showAddAdjustmentModal=!1}catch(e){console.error("Error saving adjustment:",e)}})}static \u0275fac=function(t){return new(t||n)(Je(gr),Je(Dr))};static \u0275cmp=Jn({type:n,selectors:[["app-inventory"]],decls:22,vars:16,consts:[[1,"inventory-container"],[1,"header"],[1,"btn","btn-primary",3,"click"],[1,"tabs"],[3,"click"],["class","tab-content",4,"ngIf"],["class","modal",4,"ngIf"],[1,"tab-content"],[1,"data-table"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"status-badge"],[1,"actions"],[1,"btn","btn-sm","btn-edit",3,"click"],[1,"btn","btn-sm","btn-delete",3,"click"],["colspan","7",1,"no-data"],["colspan","6",1,"no-data"],["colspan","4",1,"no-data"],[1,"badge"],[1,"modal"],[1,"modal-content"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"form-group"],["type","text",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],[1,"form-row"],["type","number","min","0",3,"ngModelChange","ngModel"],["value","items"],["value","kg"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","number","min","0",3,"ngModelChange","input","ngModel"],["type","number","min","0","step","0.01",3,"ngModelChange","input","ngModel"],["type","number","readonly","",3,"ngModelChange","ngModel"],[3,"value"],["value","consumption"],["value","wastage"],["value","correction"],["value","production"],["type","number","step","0.01","placeholder","Enter positive number",3,"ngModelChange","ngModel"],["rows","3","placeholder","e.g., Used 10 kg of meat for today's production",3,"ngModelChange","ngModel"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"div",1)(2,"h1"),w(3,"Inventory & Purchasing"),g(),v(4,"button",2),me("click",function(){return r.activeTab==="stock"?r.openAddItemModal():r.activeTab==="purchases"?r.openAddPurchaseModal():r.openAddAdjustmentModal()}),w(5),g()(),v(6,"div",3)(7,"button",4),me("click",function(){return r.activeTab="stock"}),w(8,"Current Stock"),g(),v(9,"button",4),me("click",function(){return r.activeTab="purchases"}),w(10,"Purchase History"),g(),v(11,"button",4),me("click",function(){return r.activeTab="adjustments"}),w(12,"Adjustments"),g(),v(13,"button",4),me("click",function(){return r.activeTab="suppliers"}),w(14,"Suppliers"),g()(),Fe(15,OJ,21,2,"div",5)(16,FJ,19,2,"div",5)(17,BJ,15,2,"div",5)(18,$J,19,2,"div",5)(19,qJ,52,6,"div",6)(20,WJ,37,6,"div",6)(21,KJ,42,5,"div",6),g()),t&2&&(I(5),Oe(" + ",r.activeTab==="stock"?"Add Item":r.activeTab==="purchases"?"Record Purchase":"Record Adjustment"," "),I(2),kt("active",r.activeTab==="stock"),I(2),kt("active",r.activeTab==="purchases"),I(2),kt("active",r.activeTab==="adjustments"),I(2),kt("active",r.activeTab==="suppliers"),I(2),ie("ngIf",r.activeTab==="stock"),I(),ie("ngIf",r.activeTab==="purchases"),I(),ie("ngIf",r.activeTab==="suppliers"),I(),ie("ngIf",r.activeTab==="adjustments"),I(),ie("ngIf",r.showAddItemModal),I(),ie("ngIf",r.showAddPurchaseModal),I(),ie("ngIf",r.showAddAdjustmentModal))},dependencies:[ir,Nr,lr,Ei,pc,mc,Ci,ys,Ks,Zi,_s,ji,Od],styles:[".inventory-container[_ngcontent-%COMP%]{padding:20px;max-width:1400px;margin:0 auto}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px;color:#333;margin:0}.tabs[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:20px;border-bottom:2px solid #eee}.tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 24px;border:none;background:none;cursor:pointer;font-size:15px;font-weight:500;color:#666;border-bottom:3px solid transparent;transition:all .3s}.tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#667eea}.tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{color:#667eea;border-bottom-color:#667eea}.tab-content[_ngcontent-%COMP%]{background:#fff;border-radius:10px;box-shadow:0 2px 8px #0000001a;overflow:hidden}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#f5f5f5}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:15px;text-align:left;font-weight:600;color:#333;border-bottom:2px solid #ddd}.data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:15px;border-bottom:1px solid #eee}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f9f9f9}.status-badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:12px;font-size:12px;font-weight:500}.status-badge.low[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.status-badge.ok[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.no-data[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#999}.actions[_ngcontent-%COMP%]{display:flex;gap:8px}.btn-sm[_ngcontent-%COMP%]{padding:6px 12px;font-size:13px;border-radius:4px;cursor:pointer;border:none;transition:all .2s}.btn-edit[_ngcontent-%COMP%]{background:#2196f3;color:#fff}.btn-edit[_ngcontent-%COMP%]:hover{background:#1976d2}.btn-delete[_ngcontent-%COMP%]{background:#f44336;color:#fff}.btn-delete[_ngcontent-%COMP%]:hover{background:#d32f2f}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:5px;font-size:14px;font-weight:500;cursor:pointer;transition:all .3s}.btn-primary[_ngcontent-%COMP%]{background:#667eea;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:#5568d3}.btn-secondary[_ngcontent-%COMP%]{background:#e0e0e0;color:#333}.modal[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:10px;width:90%;max-width:600px;max-height:90vh;overflow-y:auto}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px;border-bottom:1px solid #eee}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:20px}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:28px;color:#999;cursor:pointer}.modal-body[_ngcontent-%COMP%]{padding:20px}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;padding:20px;border-top:1px solid #eee}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:500;color:#333;font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ddd;border-radius:5px;font-size:14px;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{font-family:inherit;resize:vertical}.form-group[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:block;margin-top:5px;font-size:12px;color:#666}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:15px}.badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;font-size:12px;font-weight:500;text-transform:capitalize}.badge.consumption[_ngcontent-%COMP%]{background-color:#fff3cd;color:#856404}.badge.wastage[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.badge.correction[_ngcontent-%COMP%]{background-color:#d1ecf1;color:#0c5460}.badge.production[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.negative[_ngcontent-%COMP%]{color:#dc3545;font-weight:500}.positive[_ngcontent-%COMP%]{color:#28a745;font-weight:500}"]})};function YJ(n,e){if(n&1){let t=at();v(0,"button",45),me("click",function(){let i=le(t).$implicit,o=Z();return o.selectedCategory=i,ue(o.onCategoryChange())}),w(1),g()}if(n&2){let t=e.$implicit,r=Z();kt("active",r.selectedCategory===t),I(),Oe(" ",t==="all"?"All":t," ")}}function QJ(n,e){if(n&1){let t=at();v(0,"div",46),me("click",function(){let i=le(t).$implicit,o=Z();return ue(o.addToCart(i))}),v(1,"div",47),w(2),g(),v(3,"div",48),w(4),g(),v(5,"div",49),w(6),g()()}if(n&2){let t=e.$implicit;I(2),Ve(t.name),I(2),Ve(t.price.toFixed(0)),I(2),Ve(t.category)}}function ZJ(n,e){n&1&&(v(0,"div",50),w(1," No items found "),g())}function JJ(n,e){if(n&1){let t=at();v(0,"div",54),me("click",function(){let i=le(t).$implicit,o=Z(2);return ue(o.addDealToCart(i))}),v(1,"div",55),w(2),g(),v(3,"div",56)(4,"span",57),w(5),g(),v(6,"span",58),w(7),g()(),v(8,"div",59),w(9),g()()}if(n&2){let t=e.$implicit;I(2),Ve(t.name),I(3),Ve(t.dealPrice.toFixed(0)),I(2),Ve(t.originalPrice.toFixed(0)),I(2),Oe("Save ",t.savingsPercent.toFixed(0),"%")}}function XJ(n,e){if(n&1&&(v(0,"div",51)(1,"h3"),w(2,"\u{1F4A5} Special Deals"),g(),v(3,"div",52),Fe(4,JJ,10,4,"div",53),g()()),n&2){let t=Z();I(4),ie("ngForOf",t.activeDeals)}}function eX(n,e){if(n&1&&(v(0,"option",65),w(1),g()),n&2){let t=e.$implicit;ie("ngValue",t),I(),Oe("Table ",t)}}function tX(n,e){n&1&&(v(0,"span",66),w(1,"No tables available"),g())}function nX(n,e){if(n&1){let t=at();v(0,"div",12)(1,"label"),w(2,"Table Number:"),g(),v(3,"div",60)(4,"select",61),Ye("ngModelChange",function(i){le(t);let o=Z();return Qe(o.tableNumber,i)||(o.tableNumber=i),ue(i)}),v(5,"option",62),w(6,"Select table"),g(),Fe(7,eX,2,2,"option",63),g(),v(8,"button",64),me("click",function(){le(t);let i=Z();return ue(i.loadAvailableTables())}),w(9," \u21BB "),g()(),Fe(10,tX,2,0,"span",41),g()}if(n&2){let t=Z();I(4),Ke("ngModel",t.tableNumber),I(),ie("ngValue",""),I(2),ie("ngForOf",t.availableTables),I(3),ie("ngIf",t.availableTables.length===0)}}function rX(n,e){if(n&1){let t=at();v(0,"div",67)(1,"div",68)(2,"div",47),w(3),g(),v(4,"div",48),w(5),g()(),v(6,"div",69)(7,"button",70),me("click",function(){let i=le(t).$implicit,o=Z();return ue(o.decreaseQuantity(i))}),w(8,"-"),g(),v(9,"span",71),w(10),g(),v(11,"button",70),me("click",function(){let i=le(t).$implicit,o=Z();return ue(o.increaseQuantity(i))}),w(12,"+"),g(),v(13,"span",72),w(14),g(),v(15,"button",73),me("click",function(){let i=le(t).$implicit,o=Z();return ue(o.removeFromCart(i))}),w(16,"\xD7"),g()()()}if(n&2){let t=e.$implicit;I(3),Ve(t.menuItemName),I(2),Ve(t.price.toFixed(0)),I(5),Ve(t.quantity),I(4),Ve(t.totalPrice.toFixed(0))}}function iX(n,e){n&1&&(v(0,"div",74),w(1," Cart is empty. Add items from the menu. "),g())}function oX(n,e){n&1&&Fi(0,"span",75)}function sX(n,e){n&1&&(v(0,"div",66),w(1,"No bill requests"),g())}function aX(n,e){if(n&1){let t=at();v(0,"div",76)(1,"div",77)(2,"span",78),w(3),g(),v(4,"span",79),w(5),g(),v(6,"span",80),w(7),g()(),v(8,"div",81)(9,"button",82),me("click",function(){let i=le(t).$implicit,o=Z();return ue(o.openSettlement(i))}),w(10,"Open Settlement"),g()()()}if(n&2){let t=e.$implicit,r=Z();kt("blink",r.isNewRequest(t.id)),I(3),Ve(t.isTakeaway?"Takeaway":"Table "+t.tableNumber),I(2),Oe("",t.totalAmount.toFixed(0)," PKR"),I(2),Oe("(",r.timeSince(t.createdAt),")")}}function cX(n,e){if(n&1&&(v(0,"span",94),w(1),g()),n&2){let t=Z(3);I(),Oe(" (",t.selectedBillOrder.discountValue,"%) ")}}function lX(n,e){if(n&1&&(v(0,"div",86),w(1),Fe(2,cX,2,1,"span",93),g()),n&2){let t=Z(2);I(),Oe(" Discount: -",t.selectedBillOrder.discount.toFixed(0)," PKR "),I(),ie("ngIf",t.selectedBillOrder.discountType==="percentage")}}function uX(n,e){if(n&1){let t=at();v(0,"button",95),me("click",function(){le(t);let i=Z(2);return ue(i.startEditingDiscount())}),w(1," \u270F\uFE0F Edit Discount "),g()}}function dX(n,e){n&1&&(v(0,"span"),w(1,"Discount Amount (PKR):"),g())}function hX(n,e){n&1&&(v(0,"span"),w(1,"Discount Percentage (%):"),g())}function fX(n,e){if(n&1){let t=at();v(0,"div",96)(1,"h3"),w(2,"Edit Discount"),g(),v(3,"div",97)(4,"label")(5,"input",98),Ye("ngModelChange",function(i){le(t);let o=Z(2);return Qe(o.editDiscountType,i)||(o.editDiscountType=i),ue(i)}),g(),w(6," Fixed Amount "),g(),v(7,"label")(8,"input",99),Ye("ngModelChange",function(i){le(t);let o=Z(2);return Qe(o.editDiscountType,i)||(o.editDiscountType=i),ue(i)}),g(),w(9," Percentage "),g()(),v(10,"div",100)(11,"label"),Fe(12,dX,2,0,"span",101)(13,hX,2,0,"span",101),g(),v(14,"input",102),Ye("ngModelChange",function(i){le(t);let o=Z(2);return Qe(o.editDiscountValue,i)||(o.editDiscountValue=i),ue(i)}),g()(),v(15,"div",103)(16,"div",104),w(17),g(),v(18,"div",105),w(19),g(),v(20,"div",106),w(21),g()(),v(22,"div",107)(23,"button",108),me("click",function(){le(t);let i=Z(2);return ue(i.cancelEditingDiscount())}),w(24,"Cancel"),g(),v(25,"button",34),me("click",function(){le(t);let i=Z(2);return ue(i.applyDiscount())}),w(26,"Apply Discount"),g()()()}if(n&2){let t=Z(2);I(5),Ke("ngModel",t.editDiscountType),I(3),Ke("ngModel",t.editDiscountType),I(4),ie("ngIf",t.editDiscountType==="fixed"),I(),ie("ngIf",t.editDiscountType==="percentage"),I(),Ke("ngModel",t.editDiscountValue),ie("min",0)("max",t.editDiscountType==="percentage"?100:999999),I(3),Oe("Current Total: ",t.getSelectedBillTotal().toFixed(0)," PKR"),I(2),Oe("New Total: ",t.getEditedBillTotal().toFixed(0)," PKR"),I(2),Oe(" You Save: ",(t.getSelectedBillTotal()-t.getEditedBillTotal()).toFixed(0)," PKR "),I(4),ie("disabled",t.isLoading)}}function pX(n,e){if(n&1){let t=at();v(0,"div",24)(1,"label",25),w(2,"Payment Method:"),g(),v(3,"div",26)(4,"label",27)(5,"input",109),Ye("ngModelChange",function(i){le(t);let o=Z(2);return Qe(o.paymentMethod,i)||(o.paymentMethod=i),ue(i)}),g(),v(6,"span"),w(7,"\u{1F4B5} Cash"),g()(),v(8,"label",27)(9,"input",110),Ye("ngModelChange",function(i){le(t);let o=Z(2);return Qe(o.paymentMethod,i)||(o.paymentMethod=i),ue(i)}),g(),v(10,"span"),w(11,"\u{1F3E6} Bank Transfer"),g()()()()}if(n&2){let t=Z(2);I(5),Ke("ngModel",t.paymentMethod),I(4),Ke("ngModel",t.paymentMethod)}}function mX(n,e){if(n&1){let t=at();v(0,"div",111)(1,"button",112),me("click",function(){le(t);let i=Z(2);return ue(i.viewSelectedBillDetail())}),w(2,"View Order Detail"),g(),v(3,"button",113),me("click",function(){le(t);let i=Z(2);return ue(i.openCreditCustomerSelection())}),w(4," \u{1F4DD} Post to Account "),g(),v(5,"button",114),me("click",function(){le(t);let i=Z(2);return ue(i.completeSettlement())}),w(6,"Complete Payment"),g()()}if(n&2){let t=Z(2);I(3),ie("disabled",t.isLoading),I(2),ie("disabled",t.isLoading)}}function gX(n,e){if(n&1){let t=at();v(0,"div",83)(1,"button",84),me("click",function(){le(t);let i=Z();return ue(i.cancelSettlement())}),w(2,"\xD7"),g(),v(3,"h2"),w(4,"Payment & Settlement"),g(),v(5,"div",85)(6,"div")(7,"strong"),w(8),g()(),v(9,"div"),w(10),g(),v(11,"div",86),w(12),g(),v(13,"div",86),w(14),g(),Fe(15,lX,3,2,"div",87),v(16,"div",88)(17,"span"),w(18),g(),Fe(19,uX,2,0,"button",89),g()(),Fe(20,fX,27,11,"div",90)(21,pX,12,2,"div",91)(22,mX,7,2,"div",92),g()}if(n&2){let t=Z();I(8),Ve(t.selectedBillOrder.isTakeaway?"Takeaway":"Table: "+t.selectedBillOrder.tableNumber),I(2),Oe("Order #: ",t.selectedBillOrder.orderNumber),I(2),Oe("Subtotal: ",t.selectedBillOrder.subtotal.toFixed(0)," PKR"),I(2),Oe("Tax: ",t.selectedBillOrder.tax.toFixed(0)," PKR"),I(),ie("ngIf",t.selectedBillOrder.discount>0),I(3),Oe("Total Due: ",t.getSelectedBillTotal().toFixed(0)," PKR"),I(),ie("ngIf",t.authService.hasRole("admin")&&!t.isEditingDiscount),I(),ie("ngIf",t.isEditingDiscount),I(),ie("ngIf",!t.isEditingDiscount),I(),ie("ngIf",!t.isEditingDiscount)}}function vX(n,e){if(n&1&&(v(0,"div",129),w(1),g()),n&2){let t=Z().$implicit;I(),Ve(t.companyName)}}function yX(n,e){if(n&1){let t=at();v(0,"div",122),me("click",function(){let i=le(t).$implicit,o=Z(2);return ue(o.selectCreditCustomer(i))}),v(1,"div",123)(2,"div",124),w(3),g(),v(4,"div",125),w(5),g(),Fe(6,vX,2,1,"div",126),g(),v(7,"div",127)(8,"div",128),w(9),g()()()}if(n&2){let t=e.$implicit,r=Z(2);kt("selected",(r.selectedCreditCustomer==null?null:r.selectedCreditCustomer.id)===t.id),I(3),Ve(t.name),I(2),Ve(t.phone),I(),ie("ngIf",t.companyName),I(3),Oe("Balance: ",t.currentBalance.toFixed(0)," PKR")}}function _X(n,e){n&1&&(v(0,"div",66),w(1," No customers found "),g())}function bX(n,e){if(n&1){let t=at();v(0,"div",115),me("click",function(){le(t);let i=Z();return ue(i.closeCreditCustomerSelection())}),v(1,"div",116),me("click",function(i){return le(t),ue(i.stopPropagation())}),v(2,"button",84),me("click",function(){le(t);let i=Z();return ue(i.closeCreditCustomerSelection())}),w(3,"\xD7"),g(),v(4,"h3"),w(5,"Select Credit Customer"),g(),v(6,"div",117)(7,"input",118),Ye("ngModelChange",function(i){le(t);let o=Z();return Qe(o.creditCustomerSearchText,i)||(o.creditCustomerSearchText=i),ue(i)}),me("input",function(){le(t);let i=Z();return ue(i.filterCreditCustomers())}),g()(),v(8,"div",119),Fe(9,yX,10,6,"div",120)(10,_X,2,0,"div",41),g(),v(11,"div",121)(12,"button",31),me("click",function(){le(t);let i=Z();return ue(i.closeCreditCustomerSelection())}),w(13," Cancel "),g(),v(14,"button",34),me("click",function(){le(t);let i=Z();return ue(i.postToAccount())}),w(15," Post to Account "),g()()()()}if(n&2){let t=Z();I(7),Ke("ngModel",t.creditCustomerSearchText),I(2),ie("ngForOf",t.filteredCreditCustomers),I(),ie("ngIf",t.filteredCreditCustomers.length===0),I(2),ie("disabled",t.isLoading),I(2),ie("disabled",!t.selectedCreditCustomer||t.isLoading)}}var Ab=class n{constructor(e,t){this.db=e;this.authService=t}menuItems=[];filteredMenuItems=[];deals=[];activeDeals=[];cart=[];readyOrders=[];selectedBillOrder=null;paymentMethod="cash";tenderedAmount=0;refreshTimer;previousReadyIds=new Set;newRequestIds=new Set;soundEnabled=!0;audioChime;isRefreshing=!1;isEditingDiscount=!1;editDiscountType="fixed";editDiscountValue=0;creditCustomers=[];selectedCreditCustomer=null;showCreditCustomerSelection=!1;creditCustomerSearchText="";filteredCreditCustomers=[];tableNumber="";isTakeaway=!0;customerName="";discount=0;availableTables=[];selectedCategory="all";searchText="";categories=["all","BBQ","Curries","Rice","Bread","Salads","Drinks","Desserts"];isLoading=!1;ngOnInit(){return F(this,null,function*(){yield this.loadMenuItems(),yield this.loadDeals(),yield this.loadReadyOrders(),yield this.loadAvailableTables(),yield this.loadCreditCustomers(),this.initAudio();let e=localStorage.getItem("posSoundEnabled");e!==null&&(this.soundEnabled=e==="true"),this.refreshTimer=setInterval(()=>{this.loadReadyOrders()},3e4)})}loadMenuItems(){return F(this,null,function*(){this.isLoading=!0;try{this.menuItems=yield this.db.getActiveMenuItems(),this.applyFilters()}catch(e){console.error("Error loading menu items:",e)}finally{this.isLoading=!1}})}loadDeals(){return F(this,null,function*(){try{this.deals=yield this.db.getActiveDeals(),this.activeDeals=this.deals}catch(e){console.error("Error loading deals:",e)}})}loadReadyOrders(){return F(this,null,function*(){this.isRefreshing=!0;try{let e=yield this.db.getOrders("ready");this.readyOrders=e;let t=new Set(e.map(i=>i.id).filter(Boolean)),r=[];for(let i of t)this.previousReadyIds.has(i)||r.push(i);r.length>0&&(this.playNotificationSound(),r.forEach(i=>{this.newRequestIds.add(i),setTimeout(()=>this.newRequestIds.delete(i),1e4)})),this.previousReadyIds=t}catch(e){console.error("Error loading bill requests:",e)}finally{this.isRefreshing=!1}})}openSettlement(e){this.selectedBillOrder=e,this.paymentMethod="cash",this.tenderedAmount=0}cancelSettlement(){this.selectedBillOrder=null,this.tenderedAmount=0}getSelectedBillTotal(){return this.selectedBillOrder?.totalAmount||0}getChange(){if(this.paymentMethod!=="cash")return 0;let e=this.getSelectedBillTotal();return Math.max(0,this.tenderedAmount-e)}isNewRequest(e){return e?this.newRequestIds.has(e):!1}timeSince(e){if(!e)return"";let t=typeof e=="object"&&"toDate"in e?e.toDate():new Date(e),r=Date.now()-t.getTime(),i=Math.floor(r/6e4);if(i<1)return"just now";if(i<60)return`${i} min${i!==1?"s":""} ago`;let o=Math.floor(i/60);return`${o} hr${o!==1?"s":""} ago`}playNotificationSound(){if(this.soundEnabled){if(this.audioChime){this.audioChime.currentTime=0,this.audioChime.play().catch(()=>this.playBeep());return}this.playBeep()}}initAudio(){try{this.audioChime=new Audio("/sounds/notify.mp3"),this.audioChime.volume=.4,this.audioChime.load()}catch{this.audioChime=void 0}}playBeep(){try{let e=new window.AudioContext,t=e.createOscillator(),r=e.createGain();t.type="sine",t.frequency.setValueAtTime(920,e.currentTime),r.gain.setValueAtTime(1e-4,e.currentTime),r.gain.exponentialRampToValueAtTime(.2,e.currentTime+.01),r.gain.exponentialRampToValueAtTime(1e-4,e.currentTime+.25),t.connect(r),r.connect(e.destination),t.start(),t.stop(e.currentTime+.28)}catch{}}toggleSound(){this.soundEnabled=!this.soundEnabled,localStorage.setItem("posSoundEnabled",String(this.soundEnabled))}viewSelectedBillDetail(){if(!this.selectedBillOrder)return;let e=this.selectedBillOrder,t=e.createdAt&&typeof e.createdAt=="object"&&"toDate"in e.createdAt?e.createdAt.toDate():new Date(e.createdAt),r=(e.items||[]).map(s=>`<tr><td>${s.menuItemName}</td><td>${s.quantity}</td><td>${s.price.toFixed(0)} PKR</td><td>${s.totalPrice.toFixed(0)} PKR</td></tr>`).join(""),i=`<!DOCTYPE html><html><head><meta charset="utf-8"><title>Order ${e.orderNumber}</title>
      <style>body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Arial,sans-serif;padding:20px;color:#333}
      h1{font-size:20px;margin:0 0 10px} p{margin:4px 0}
      table{width:100%;border-collapse:collapse;margin-top:10px}
      th,td{padding:8px;border-bottom:1px solid #eee;text-align:left}
      .total{font-weight:700;margin-top:12px}
      </style></head><body>
      <h1>Order ${e.orderNumber}</h1>
      <p>Table: ${e.tableNumber??"-"}</p>
      <p>Status: ${e.status}</p>
      <p>Created: ${t.toLocaleString()}</p>
      <table><thead><tr><th>Item</th><th>Qty</th><th>Price</th><th>Total</th></tr></thead><tbody>${r}</tbody></table>
      <p class="total">Grand Total: ${e.totalAmount.toFixed(0)} PKR</p>
      </body></html>`,o=window.open("","_blank");o&&(o.document.open(),o.document.write(i),o.document.close(),o.focus())}startEditingDiscount(){this.selectedBillOrder&&(this.isEditingDiscount=!0,this.editDiscountType=this.selectedBillOrder.discountType||"fixed",this.editDiscountValue=this.selectedBillOrder.discountValue||0)}cancelEditingDiscount(){this.isEditingDiscount=!1,this.editDiscountValue=0}calculateDiscountAmount(e,t,r){return t==="percentage"?e*r/100:r}getEditedBillTotal(){if(!this.selectedBillOrder)return 0;let e=this.selectedBillOrder.subtotal,t=this.selectedBillOrder.tax,r=this.calculateDiscountAmount(e,this.editDiscountType,this.editDiscountValue);return e+t-r}applyDiscount(){return F(this,null,function*(){if(this.selectedBillOrder?.id){if(this.editDiscountValue<0){alert("\u274C Discount cannot be negative");return}if(this.editDiscountType==="percentage"&&this.editDiscountValue>100){alert("\u274C Percentage discount cannot exceed 100%");return}this.isLoading=!0;try{let e=this.selectedBillOrder.subtotal,t=this.calculateDiscountAmount(e,this.editDiscountType,this.editDiscountValue),r=this.getEditedBillTotal();yield this.db.updateOrder(this.selectedBillOrder.id,{discount:t,discountType:this.editDiscountType,discountValue:this.editDiscountValue,totalAmount:r}),this.selectedBillOrder.discount=t,this.selectedBillOrder.discountType=this.editDiscountType,this.selectedBillOrder.discountValue=this.editDiscountValue,this.selectedBillOrder.totalAmount=r,yield this.loadReadyOrders(),this.isEditingDiscount=!1,alert("\u2705 Discount applied successfully")}catch(e){console.error("Error applying discount:",e),alert("\u274C Failed to apply discount")}finally{this.isLoading=!1}}})}completeSettlement(){return F(this,null,function*(){if(this.selectedBillOrder?.id){this.isLoading=!0;try{yield this.deductInventoryForOrder(this.selectedBillOrder),yield this.db.updateOrder(this.selectedBillOrder.id,{status:"completed",paymentMethod:this.paymentMethod,completedAt:new Date}),yield this.loadReadyOrders(),this.selectedBillOrder=null,this.tenderedAmount=0,this.paymentMethod="cash",this.isEditingDiscount=!1,alert("\u2705 Payment completed. Table reset to free.")}catch(e){console.error("Error completing settlement:",e),alert("\u274C Failed to complete payment")}finally{this.isLoading=!1}}})}applyFilters(){this.filteredMenuItems=this.menuItems.filter(e=>{let t=this.selectedCategory==="all"||e.category===this.selectedCategory,r=!this.searchText||e.name.toLowerCase().includes(this.searchText.toLowerCase());return t&&r})}onCategoryChange(){this.applyFilters()}onSearchChange(){this.applyFilters()}loadAvailableTables(){return F(this,null,function*(){try{let e=Array.from({length:20},(i,o)=>String(o+1)),t=yield this.db.getOrders(),r=new Set((t||[]).filter(i=>!!i.tableNumber&&["pending","cooking","ready"].includes(i.status)).map(i=>i.tableNumber));this.availableTables=e.filter(i=>!r.has(i))}catch(e){console.error("Error loading available tables:",e),this.availableTables=[]}})}addToCart(e){let t=this.cart.find(r=>r.menuItemId===e.id);t?e.soldByWeight?this.promptForWeight(e,t):(t.quantity++,t.totalPrice=t.quantity*t.price):e.soldByWeight?this.promptForWeight(e):this.cart.push({menuItemId:e.id,menuItemName:e.name,quantity:1,price:e.price,totalPrice:e.price})}addDealToCart(e){let t=this.cart.find(r=>r.dealId===e.id&&r.isDeal);t?(t.quantity++,t.totalPrice=t.quantity*t.price):this.cart.push({menuItemId:e.id,menuItemName:e.name,quantity:1,price:e.dealPrice,totalPrice:e.dealPrice,isDeal:!0,dealId:e.id,dealItems:e.items})}promptForWeight(e,t){let r=prompt(`Enter weight in ${e.unit||"kg"} (e.g., 0.72):`);if(r&&!isNaN(parseFloat(r))){let i=parseFloat(r);t?(t.quantity+=i,t.totalPrice=t.quantity*t.price):this.cart.push({menuItemId:e.id,menuItemName:`${e.name} (${i} ${e.unit||"kg"})`,quantity:i,price:e.price,totalPrice:i*e.price})}}increaseQuantity(e){e.quantity++,e.totalPrice=e.quantity*e.price}decreaseQuantity(e){e.quantity>1?(e.quantity--,e.totalPrice=e.quantity*e.price):this.removeFromCart(e)}removeFromCart(e){let t=this.cart.indexOf(e);t>-1&&this.cart.splice(t,1)}getSubtotal(){return this.cart.reduce((e,t)=>e+t.totalPrice,0)}getTax(){let e=0;for(let t of this.cart){let r=this.menuItems.find(i=>i.id===t.menuItemId);r&&(e+=t.totalPrice*r.taxRate/100)}return e}getTotal(){return this.getSubtotal()+this.getTax()-this.discount}printKOT(){return F(this,null,function*(){if(this.cart.length===0){alert("Cart is empty!");return}if(!this.isTakeaway&&!this.tableNumber){alert("Please select an available table");return}this.isLoading=!0;try{let e=this.createOrder("pending");yield this.db.createOrder(e),alert("Kitchen Order Ticket sent to kitchen!")}catch(e){console.error("Error sending KOT:",e),alert("Error sending order to kitchen")}finally{this.isLoading=!1}})}payAndPrint(){return F(this,null,function*(){if(this.cart.length===0){alert("Cart is empty!");return}if(!this.isTakeaway&&!this.tableNumber){alert("Please select an available table or choose takeaway");return}this.isLoading=!0;try{let e=this.createOrder("completed");e.paymentMethod=this.paymentMethod,yield this.db.createOrder(e),yield this.deductPreparedItems(),alert(`Payment successful! Total: ${this.getTotal().toFixed(0)} PKR
Payment: ${this.paymentMethod==="cash"?"Cash":"Bank Transfer"}`),this.clearCart(),this.paymentMethod="cash"}catch(e){console.error("Error processing payment:",e),alert("Error processing payment")}finally{this.isLoading=!1}})}deductPreparedItems(){return F(this,null,function*(){for(let e of this.cart){let t=this.menuItems.find(r=>r.id===e.menuItemId);if(t){if(t.preparedItemId){let r={inventoryItemId:t.preparedItemId,inventoryItemName:t.name,adjustmentType:"consumption",quantity:-e.quantity,unit:t.unit||"pieces",reason:"Sold via POS - Order",adjustedBy:this.authService.currentUser?.name||"System",date:new Date};try{yield this.db.createInventoryAdjustment(r)}catch(i){console.error("Error deducting prepared inventory:",i)}}if(t.recipeMapping&&t.recipeMapping.length>0)for(let r of t.recipeMapping){let i=r.quantityUsed*e.quantity,o={inventoryItemId:r.inventoryItemId,inventoryItemName:r.inventoryItemName,adjustmentType:"consumption",quantity:-i,unit:r.unit,reason:`Sold ${e.quantity}x ${t.name} via POS`,adjustedBy:this.authService.currentUser?.name||"System",date:new Date};try{yield this.db.createInventoryAdjustment(o)}catch(s){console.error("Error deducting recipe inventory:",s)}}}}})}deductInventoryForOrder(e){return F(this,null,function*(){for(let t of e.items||[])if(t.isDeal&&t.dealItems)for(let r of t.dealItems){let i=this.menuItems.find(s=>s.id===r.menuItemId);if(!i)continue;let o=r.quantity*t.quantity;yield this.deductInventoryForMenuItem(i,o,e.orderNumber)}else{let r=this.menuItems.find(i=>i.id===t.menuItemId);if(!r)continue;yield this.deductInventoryForMenuItem(r,t.quantity,e.orderNumber)}})}deductInventoryForMenuItem(e,t,r){return F(this,null,function*(){if(e.preparedItemId){let i={inventoryItemId:e.preparedItemId,inventoryItemName:e.name,adjustmentType:"consumption",quantity:-t,unit:e.unit||"pieces",reason:`Sold - Order ${r}`,adjustedBy:this.authService.currentUser?.name||"System",date:new Date};try{yield this.db.createInventoryAdjustment(i)}catch(o){console.error("Error deducting prepared inventory:",o)}}if(e.recipeMapping&&e.recipeMapping.length>0)for(let i of e.recipeMapping){let o=i.quantityUsed*t,s={inventoryItemId:i.inventoryItemId,inventoryItemName:i.inventoryItemName,adjustmentType:"consumption",quantity:-o,unit:i.unit,reason:`Sold ${t}x ${e.name} - Order ${r}`,adjustedBy:this.authService.currentUser?.name||"System",date:new Date};try{yield this.db.createInventoryAdjustment(s)}catch(a){console.error("Error deducting recipe inventory:",a)}}})}createOrder(e){return{orderNumber:`ORD-${Date.now()}`,tableNumber:this.isTakeaway?void 0:this.tableNumber,isTakeaway:this.isTakeaway,customerName:this.customerName||void 0,items:[...this.cart],subtotal:this.getSubtotal(),tax:this.getTax(),discount:this.discount,discountType:this.discount>0?"fixed":void 0,discountValue:this.discount>0?this.discount:void 0,totalAmount:this.getTotal(),status:e,createdAt:new Date,cashierId:this.authService.currentUser?.id||"",cashierName:this.authService.currentUser?.name||"Unknown"}}clearCart(){this.cart=[],this.tableNumber="",this.isTakeaway=!1,this.customerName="",this.discount=0}cancelOrder(){confirm("Are you sure you want to cancel this order?")&&this.clearCart()}loadCreditCustomers(){return F(this,null,function*(){try{let e=yield this.db.getCreditCustomers();this.creditCustomers=e.filter(t=>t.isCreditEnabled),this.filteredCreditCustomers=[...this.creditCustomers]}catch(e){console.error("Error loading credit customers:",e)}})}filterCreditCustomers(){let e=this.creditCustomerSearchText.toLowerCase().trim();if(!e){this.filteredCreditCustomers=[...this.creditCustomers];return}this.filteredCreditCustomers=this.creditCustomers.filter(t=>t.name.toLowerCase().includes(e)||t.phone.toLowerCase().includes(e)||t.companyName&&t.companyName.toLowerCase().includes(e))}openCreditCustomerSelectionForNewOrder(){this.showCreditCustomerSelection=!0,this.selectedCreditCustomer=null,this.selectedBillOrder=null}openCreditCustomerSelection(){this.showCreditCustomerSelection=!0,this.selectedCreditCustomer=null}closeCreditCustomerSelection(){this.showCreditCustomerSelection=!1,this.selectedCreditCustomer=null,this.creditCustomerSearchText="",this.filteredCreditCustomers=[...this.creditCustomers]}selectCreditCustomer(e){this.selectedCreditCustomer=e}postToAccount(){return F(this,null,function*(){if(!this.selectedCreditCustomer){alert("Please select a customer");return}this.isLoading=!0;try{if(this.selectedBillOrder){let e=this.getSelectedBillTotal();yield this.db.updateOrder(this.selectedBillOrder.id,{status:"completed",paymentMethod:"credit_account",completedAt:new Date}),yield this.db.postBillToAccount(this.selectedBillOrder,this.selectedCreditCustomer.id),alert(`Bill posted to ${this.selectedCreditCustomer.name}'s account.
Amount: ${e.toFixed(0)} PKR`),this.closeCreditCustomerSelection(),this.cancelSettlement(),yield this.loadReadyOrders()}else if(this.cart.length>0){let e=this.createOrder("completed");e.customerName=this.selectedCreditCustomer.name,e.paymentMethod="credit_account";let t=yield this.db.createOrder(e);e.id=t,yield this.deductInventoryForOrder(e),yield this.db.postBillToAccount(e,this.selectedCreditCustomer.id),alert(`Order posted to ${this.selectedCreditCustomer.name}'s account.
Amount: ${e.totalAmount.toFixed(0)} PKR`),this.clearCart(),this.closeCreditCustomerSelection()}yield this.loadCreditCustomers()}catch(e){console.error("Error posting to account:",e),alert("Failed to post bill to account")}finally{this.isLoading=!1}})}static \u0275fac=function(t){return new(t||n)(Je(gr),Je(Dr))};static \u0275cmp=Jn({type:n,selectors:[["app-pos"]],decls:84,vars:27,consts:[[1,"pos-container"],[1,"left-panel"],[1,"category-tabs"],["class","category-tab",3,"active","click",4,"ngFor","ngForOf"],[1,"search-box"],["type","text","placeholder","\u{1F50D} Search menu items...",3,"ngModelChange","input","ngModel"],[1,"menu-grid"],["class","menu-item-card",3,"click",4,"ngFor","ngForOf"],["class","no-items",4,"ngIf"],["class","deals-section",4,"ngIf"],[1,"right-panel"],[1,"order-details"],[1,"detail-row"],[1,"checkbox-label"],["type","checkbox",3,"ngModelChange","ngModel"],["class","detail-row",4,"ngIf"],["type","text","placeholder","Customer name",3,"ngModelChange","ngModel"],[1,"cart-items"],["class","cart-item",4,"ngFor","ngForOf"],["class","empty-cart",4,"ngIf"],[1,"payment-section"],[1,"payment-row"],["type","number","min","0","step","0.01",1,"discount-input",3,"ngModelChange","ngModel"],[1,"payment-row","total"],[1,"payment-method-section"],[1,"payment-method-label"],[1,"payment-method-options"],[1,"payment-option"],["type","radio","name","paymentMethod","value","cash",3,"ngModelChange","ngModel"],["type","radio","name","paymentMethod","value","bank_transfer",3,"ngModelChange","ngModel"],[1,"action-buttons"],[1,"btn","btn-secondary",3,"click","disabled"],[1,"btn","btn-info",3,"click","disabled"],[1,"btn","btn-warning",3,"click","disabled"],[1,"btn","btn-primary",3,"click","disabled"],[1,"bill-requests"],[1,"bill-requests-header"],[1,"header-actions"],[1,"refresh-btn",3,"click","disabled"],["class","mini-spinner",4,"ngIf"],[1,"sound-toggle",3,"click"],["class","empty",4,"ngIf"],["class","bill-request-item",3,"blink",4,"ngFor","ngForOf"],["class","settlement-panel",4,"ngIf"],["class","credit-customer-modal",3,"click",4,"ngIf"],[1,"category-tab",3,"click"],[1,"menu-item-card",3,"click"],[1,"item-name"],[1,"item-price"],[1,"item-category"],[1,"no-items"],[1,"deals-section"],[1,"deals-grid"],["class","deal-card",3,"click",4,"ngFor","ngForOf"],[1,"deal-card",3,"click"],[1,"deal-name"],[1,"deal-price"],[1,"deal-price-current"],[1,"deal-price-original"],[1,"deal-savings"],[1,"table-selector"],[1,"table-dropdown",3,"ngModelChange","ngModel"],["disabled","",3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["title","Refresh available tables",1,"refresh-availability-btn",3,"click"],[3,"ngValue"],[1,"empty"],[1,"cart-item"],[1,"item-info"],[1,"item-controls"],[1,"qty-btn",3,"click"],[1,"quantity"],[1,"item-total"],[1,"remove-btn",3,"click"],[1,"empty-cart"],[1,"mini-spinner"],[1,"bill-request-item"],[1,"info"],[1,"table"],[1,"amount"],[1,"ago"],[1,"actions"],[3,"click"],[1,"settlement-panel"],["aria-label","Close",1,"panel-close",3,"click"],[1,"summary"],[1,"summary-line"],["class","summary-line",4,"ngIf"],[1,"summary-total"],["class","btn-edit-discount",3,"click",4,"ngIf"],["class","discount-edit-panel",4,"ngIf"],["class","payment-method-section",4,"ngIf"],["class","settlement-actions",4,"ngIf"],["class","discount-label",4,"ngIf"],[1,"discount-label"],[1,"btn-edit-discount",3,"click"],[1,"discount-edit-panel"],[1,"discount-type-toggle"],["type","radio","name","discountType","value","fixed",3,"ngModelChange","ngModel"],["type","radio","name","discountType","value","percentage",3,"ngModelChange","ngModel"],[1,"discount-value-input"],[4,"ngIf"],["type","number","step","0.01",1,"discount-input",3,"ngModelChange","ngModel","min","max"],[1,"discount-preview"],[1,"preview-line"],[1,"preview-line","highlight"],[1,"preview-line","savings"],[1,"discount-actions"],[1,"btn","btn-secondary",3,"click"],["type","radio","name","settlementPaymentMethod","value","cash",3,"ngModelChange","ngModel"],["type","radio","name","settlementPaymentMethod","value","bank_transfer",3,"ngModelChange","ngModel"],[1,"settlement-actions"],[1,"details",3,"click"],[1,"post-to-account",3,"click","disabled"],[1,"complete",3,"click","disabled"],[1,"credit-customer-modal",3,"click"],[1,"credit-customer-panel",3,"click"],[1,"customer-search"],["type","text","placeholder","\u{1F50D} Search by name or phone...",1,"customer-search-input",3,"ngModelChange","input","ngModel"],[1,"customer-list"],["class","customer-option",3,"selected","click",4,"ngFor","ngForOf"],[1,"credit-actions"],[1,"customer-option",3,"click"],[1,"customer-info"],[1,"customer-name"],[1,"customer-phone"],["class","customer-company",4,"ngIf"],[1,"customer-credit"],[1,"credit-balance"],[1,"customer-company"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"div",1)(2,"h2"),w(3,"Menu"),g(),v(4,"div",2),Fe(5,YJ,2,3,"button",3),g(),v(6,"div",4)(7,"input",5),Ye("ngModelChange",function(o){return Qe(r.searchText,o)||(r.searchText=o),o}),me("input",function(){return r.onSearchChange()}),g()(),v(8,"div",6),Fe(9,QJ,7,3,"div",7)(10,ZJ,2,0,"div",8),g(),Fe(11,XJ,5,1,"div",9),g(),v(12,"div",10)(13,"h2"),w(14,"Current Order"),g(),v(15,"div",11)(16,"div",12)(17,"label",13)(18,"input",14),Ye("ngModelChange",function(o){return Qe(r.isTakeaway,o)||(r.isTakeaway=o),o}),g(),w(19," Takeaway "),g()(),Fe(20,nX,11,4,"div",15),v(21,"div",12)(22,"label"),w(23,"Customer Name (Optional):"),g(),v(24,"input",16),Ye("ngModelChange",function(o){return Qe(r.customerName,o)||(r.customerName=o),o}),g()()(),v(25,"div",17),Fe(26,rX,17,4,"div",18)(27,iX,2,0,"div",19),g(),v(28,"div",20)(29,"div",21)(30,"span"),w(31,"Subtotal:"),g(),v(32,"span"),w(33),g()(),v(34,"div",21)(35,"span"),w(36,"Tax:"),g(),v(37,"span"),w(38),g()(),v(39,"div",21)(40,"span"),w(41,"Discount:"),g(),v(42,"input",22),Ye("ngModelChange",function(o){return Qe(r.discount,o)||(r.discount=o),o}),g()(),v(43,"div",23)(44,"span"),w(45,"Total:"),g(),v(46,"span"),w(47),g()(),v(48,"div",24)(49,"label",25),w(50,"Payment Method:"),g(),v(51,"div",26)(52,"label",27)(53,"input",28),Ye("ngModelChange",function(o){return Qe(r.paymentMethod,o)||(r.paymentMethod=o),o}),g(),v(54,"span"),w(55,"\u{1F4B5} Cash"),g()(),v(56,"label",27)(57,"input",29),Ye("ngModelChange",function(o){return Qe(r.paymentMethod,o)||(r.paymentMethod=o),o}),g(),v(58,"span"),w(59,"\u{1F3E6} Bank Transfer"),g()()()(),v(60,"div",30)(61,"button",31),me("click",function(){return r.cancelOrder()}),w(62,"Cancel"),g(),v(63,"button",32),me("click",function(){return r.printKOT()}),w(64,"Print KOT"),g(),v(65,"button",33),me("click",function(){return r.openCreditCustomerSelectionForNewOrder()}),w(66,"Post to Account"),g(),v(67,"button",34),me("click",function(){return r.payAndPrint()}),w(68,"Pay & Print Bill"),g()()(),v(69,"div",35)(70,"div",36)(71,"h2"),w(72,"Bill Requests"),g(),v(73,"div",37)(74,"button",38),me("click",function(){return r.loadReadyOrders()}),Fe(75,oX,1,0,"span",39),v(76,"span"),w(77,"\u21BB Refresh"),g()(),v(78,"button",40),me("click",function(){return r.toggleSound()}),w(79),g()()(),Fe(80,sX,2,0,"div",41)(81,aX,11,5,"div",42),g(),Fe(82,gX,23,10,"div",43)(83,bX,16,5,"div",44),g()()),t&2&&(I(5),ie("ngForOf",r.categories),I(2),Ke("ngModel",r.searchText),I(2),ie("ngForOf",r.filteredMenuItems),I(),ie("ngIf",r.filteredMenuItems.length===0),I(),ie("ngIf",r.activeDeals.length>0),I(7),Ke("ngModel",r.isTakeaway),I(2),ie("ngIf",!r.isTakeaway),I(4),Ke("ngModel",r.customerName),I(2),ie("ngForOf",r.cart),I(),ie("ngIf",r.cart.length===0),I(6),Ve(r.getSubtotal().toFixed(0)),I(5),Ve(r.getTax().toFixed(0)),I(4),Ke("ngModel",r.discount),I(5),Ve(r.getTotal().toFixed(0)),I(6),Ke("ngModel",r.paymentMethod),I(4),Ke("ngModel",r.paymentMethod),I(4),ie("disabled",r.cart.length===0),I(2),ie("disabled",r.cart.length===0||r.isLoading),I(2),ie("disabled",r.cart.length===0||r.isLoading),I(2),ie("disabled",r.cart.length===0||r.isLoading),I(7),ie("disabled",r.isRefreshing),I(),ie("ngIf",r.isRefreshing),I(4),Oe("\u{1F514} ",r.soundEnabled?"Sound On":"Sound Off"),I(),ie("ngIf",r.readyOrders.length===0),I(),ie("ngForOf",r.readyOrders),I(),ie("ngIf",r.selectedBillOrder),I(),ie("ngIf",r.showCreditCustomerSelection))},dependencies:[ir,Nr,lr,Ei,pc,mc,Ci,ys,ml,Ks,u0,Zi,_s,lh,ji],styles:[".pos-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr;gap:20px;height:calc(100vh - 60px);padding:20px;max-width:1600px;margin:0 auto}.left-panel[_ngcontent-%COMP%]{background:#fff;border-radius:10px;padding:20px;box-shadow:0 2px 8px #0000001a;display:flex;flex-direction:column;overflow:hidden}.left-panel[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 20px;font-size:24px;color:#333}.category-tabs[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:15px;flex-wrap:wrap}.category-tab[_ngcontent-%COMP%]{padding:8px 16px;border:2px solid #e0e0e0;background:#fff;border-radius:20px;cursor:pointer;font-size:14px;font-weight:500;transition:all .3s}.category-tab[_ngcontent-%COMP%]:hover{border-color:#667eea;color:#667eea}.category-tab.active[_ngcontent-%COMP%]{background:#667eea;color:#fff;border-color:#667eea}.search-box[_ngcontent-%COMP%]{margin-bottom:15px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid #ddd;border-radius:5px;font-size:14px;box-sizing:border-box}.menu-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:15px;overflow-y:auto;flex:1}.menu-item-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:20px;border-radius:10px;cursor:pointer;transition:all .3s;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;min-height:120px}.menu-item-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 6px 15px #0003}.item-name[_ngcontent-%COMP%]{font-weight:600;font-size:16px;margin-bottom:8px}.item-price[_ngcontent-%COMP%]{font-size:20px;font-weight:700;margin-bottom:5px}.item-category[_ngcontent-%COMP%]{font-size:12px;opacity:.9}.no-items[_ngcontent-%COMP%]{grid-column:1 / -1;text-align:center;padding:40px;color:#999}.deals-section[_ngcontent-%COMP%]{margin-top:20px;border-top:2px solid #f0f0f0;padding-top:20px}.deals-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 15px;font-size:18px;color:#d97706;font-weight:600}.deals-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:12px;overflow-y:auto;max-height:300px}.deal-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706);color:#fff;padding:16px;border-radius:10px;cursor:pointer;transition:all .3s;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;min-height:110px;border:2px solid #f59e0b;box-shadow:0 2px 8px #f59e0b33}.deal-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 6px 15px #d977064d;border-color:#fff}.deal-name[_ngcontent-%COMP%]{font-weight:600;font-size:15px;margin-bottom:6px}.deal-price[_ngcontent-%COMP%]{font-size:12px;margin-bottom:4px;display:flex;align-items:center;justify-content:center;gap:6px}.deal-price-current[_ngcontent-%COMP%]{font-size:18px;font-weight:700}.deal-price-original[_ngcontent-%COMP%]{font-size:12px;text-decoration:line-through;opacity:.8}.deal-savings[_ngcontent-%COMP%]{font-size:11px;background:#fff3;padding:3px 8px;border-radius:12px;font-weight:600}.right-panel[_ngcontent-%COMP%]{background:#fff;border-radius:10px;padding:20px;box-shadow:0 2px 8px #0000001a;display:flex;flex-direction:column}.right-panel[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 20px;font-size:24px;color:#333}.order-details[_ngcontent-%COMP%]{background:#f5f5f5;padding:15px;border-radius:8px;margin-bottom:15px}.detail-row[_ngcontent-%COMP%]{margin-bottom:12px}.detail-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.detail-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:13px;font-weight:500;color:#666;margin-bottom:5px}.detail-row[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .detail-row[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #ddd;border-radius:5px;font-size:14px;box-sizing:border-box}.table-selector[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.table-dropdown[_ngcontent-%COMP%]{flex:1;padding:10px 12px;border:1px solid #ddd;border-radius:5px;font-size:15px;box-sizing:border-box;min-height:42px}.refresh-availability-btn[_ngcontent-%COMP%]{padding:10px 14px;background:#667eea;color:#fff;border:none;border-radius:5px;cursor:pointer;font-size:18px;font-weight:700;transition:all .3s;min-width:42px;min-height:42px;display:flex;align-items:center;justify-content:center}.refresh-availability-btn[_ngcontent-%COMP%]:hover{background:#5568d3;transform:rotate(180deg)}.refresh-availability-btn[_ngcontent-%COMP%]:active{transform:rotate(180deg) scale(.95)}.detail-row[_ngcontent-%COMP%]   .empty[_ngcontent-%COMP%]{font-size:12px;color:#999;margin-top:5px;display:block}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;font-size:14px;color:#333}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto;cursor:pointer}.cart-items[_ngcontent-%COMP%]{flex:1;overflow-y:auto;margin-bottom:15px;border-top:1px solid #eee;border-bottom:1px solid #eee;padding:10px 0}.cart-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px;background:#f9f9f9;border-radius:8px;margin-bottom:10px}.item-info[_ngcontent-%COMP%]{flex:1}.item-info[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{font-weight:600;color:#333;font-size:14px;margin-bottom:4px}.item-info[_ngcontent-%COMP%]   .item-price[_ngcontent-%COMP%]{font-size:12px;color:#666}.item-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.qty-btn[_ngcontent-%COMP%]{width:28px;height:28px;border:none;background:#667eea;color:#fff;border-radius:4px;cursor:pointer;font-size:16px;font-weight:700;display:flex;align-items:center;justify-content:center}.qty-btn[_ngcontent-%COMP%]:hover{background:#5568d3}.quantity[_ngcontent-%COMP%]{min-width:30px;text-align:center;font-weight:600;font-size:14px}.item-total[_ngcontent-%COMP%]{min-width:60px;text-align:right;font-weight:600;color:#333}.remove-btn[_ngcontent-%COMP%]{width:28px;height:28px;border:none;background:#f44336;color:#fff;border-radius:4px;cursor:pointer;font-size:20px;line-height:1}.remove-btn[_ngcontent-%COMP%]:hover{background:#d32f2f}.empty-cart[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#999}.payment-section[_ngcontent-%COMP%]{background:#f5f5f5;padding:15px;border-radius:8px;margin-bottom:15px}.payment-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;font-size:14px}.payment-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.payment-row.total[_ngcontent-%COMP%]{font-size:18px;font-weight:700;padding-top:10px;border-top:2px solid #ddd;margin-top:10px;color:#333}.discount-input[_ngcontent-%COMP%]{width:100px;padding:6px;border:1px solid #ddd;border-radius:4px;text-align:right}.payment-method-section[_ngcontent-%COMP%]{margin:15px 0;padding:15px;background:#f8f9fa;border-radius:8px;border:1px solid #e0e0e0}.payment-method-label[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:600;color:#333;margin-bottom:10px}.payment-method-options[_ngcontent-%COMP%]{display:flex;gap:15px}.payment-option[_ngcontent-%COMP%]{display:flex;align-items:center;padding:10px 15px;background:#fff;border:2px solid #ddd;border-radius:6px;cursor:pointer;transition:all .3s;flex:1}.payment-option[_ngcontent-%COMP%]:hover{border-color:#667eea;background:#f5f7ff}.payment-option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{margin-right:8px;cursor:pointer}.payment-option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]{font-weight:600;color:#667eea}.payment-option[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;color:#333}.action-buttons[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px}.btn[_ngcontent-%COMP%]{padding:12px;border:none;border-radius:5px;font-size:14px;font-weight:500;cursor:pointer;transition:all .3s}.btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-primary[_ngcontent-%COMP%]{background:#4caf50;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#45a049}.btn-secondary[_ngcontent-%COMP%]{background:#f44336;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#d32f2f}.btn-info[_ngcontent-%COMP%]{background:#3b82f6;color:#fff}.btn-info[_ngcontent-%COMP%]:hover:not(:disabled){background:#2563eb}.btn-warning[_ngcontent-%COMP%]{background:#f59e0b;color:#fff}.btn-warning[_ngcontent-%COMP%]:hover:not(:disabled){background:#d97706}.bill-requests[_ngcontent-%COMP%]{margin-top:20px;background:#fff7e6;border:1px solid #ffe0b2;border-radius:8px;padding:12px}.bill-requests[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 10px;font-size:18px;color:#ff9800}.bill-requests-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.bill-requests-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.refresh-btn[_ngcontent-%COMP%]{background:#eee;color:#333;border:1px solid #ddd;border-radius:6px;padding:6px 10px;cursor:pointer;display:inline-flex;align-items:center;gap:6px}.refresh-btn[_ngcontent-%COMP%]:hover{background:#e0e0e0}.refresh-btn[disabled][_ngcontent-%COMP%]{opacity:.6;cursor:not-allowed}.settlement-panel[_ngcontent-%COMP%]{margin-top:16px;padding:16px;background:#fff;border:1px solid #e5e7eb;border-radius:10px;position:relative}.panel-close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;width:32px;height:32px;border:none;border-radius:8px;background:#f1f5f9;color:#0f172a;font-size:20px;line-height:1;cursor:pointer}.panel-close[_ngcontent-%COMP%]:hover{background:#e2e8f0}.panel-close[_ngcontent-%COMP%]:focus{outline:2px solid #93c5fd;outline-offset:2px}.settlement-panel[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 12px;font-size:18px;font-weight:700}.settlement-panel[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:8px 12px;margin-bottom:14px}.settlement-actions[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:flex-end;gap:12px;margin-top:6px}.settlement-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 14px;border-radius:8px;border:none;font-weight:600;cursor:pointer;min-width:160px}.settlement-actions[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]{opacity:.6;cursor:not-allowed}.settlement-actions[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{background:#f1f5f9;color:#0f172a}.settlement-actions[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]:hover:not([disabled]){background:#e2e8f0}.settlement-actions[_ngcontent-%COMP%]   .complete[_ngcontent-%COMP%]{background:#10b981;color:#fff}.settlement-actions[_ngcontent-%COMP%]   .complete[_ngcontent-%COMP%]:hover:not([disabled]){background:#059669}.settlement-actions[_ngcontent-%COMP%]   .cancel[_ngcontent-%COMP%]{background:#e5e7eb;color:#111827}.settlement-actions[_ngcontent-%COMP%]   .cancel[_ngcontent-%COMP%]:hover:not([disabled]){background:#d1d5db}@media (max-width: 768px){.settlement-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1 1 200px}}.mini-spinner[_ngcontent-%COMP%]{width:14px;height:14px;border:2px solid #bbb;border-top-color:#666;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.sound-toggle[_ngcontent-%COMP%]{background:#eee;color:#333;border:1px solid #ddd;border-radius:6px;padding:6px 10px;cursor:pointer}.sound-toggle[_ngcontent-%COMP%]:hover{background:#e0e0e0}.bill-request-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background:#fffaf0;border:1px solid #ffe0b2;border-radius:6px;padding:8px 10px;margin-bottom:8px}.bill-request-item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;font-size:14px}.bill-request-item[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{font-weight:600}.bill-request-item[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{color:#333;font-weight:600}.bill-request-item[_ngcontent-%COMP%]   .ago[_ngcontent-%COMP%]{color:#777;font-size:12px}.bill-request-item[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#ff9800;color:#fff;border:none;border-radius:4px;padding:6px 10px;cursor:pointer}.bill-request-item[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#f57c00}.blink[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_blink-bg .9s ease-in-out 8}@keyframes _ngcontent-%COMP%_blink-bg{0%{background-color:#fffaf0}50%{background-color:#ffe9c4}to{background-color:#fffaf0}}.btn-edit-discount[_ngcontent-%COMP%]{background:#3b82f6;color:#fff;border:none;border-radius:6px;padding:8px 16px;font-size:13px;font-weight:600;cursor:pointer;transition:background .2s;white-space:nowrap;margin-left:auto;flex-shrink:0}.btn-edit-discount[_ngcontent-%COMP%]:hover{background:#2563eb}.discount-edit-panel[_ngcontent-%COMP%]{background:#f8fafc;border:2px solid #e2e8f0;border-radius:8px;padding:16px;margin:15px 0}.discount-edit-panel[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 12px;font-size:16px;color:#334155}.discount-type-toggle[_ngcontent-%COMP%]{display:flex;gap:15px;margin-bottom:15px;justify-content:center}.discount-type-toggle[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:14px;cursor:pointer}.discount-type-toggle[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{cursor:pointer}.discount-value-input[_ngcontent-%COMP%]{margin-bottom:15px}.discount-value-input[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:13px;font-weight:600;margin-bottom:6px;color:#475569}.discount-value-input[_ngcontent-%COMP%]   .discount-input[_ngcontent-%COMP%]{width:100%;padding:8px 12px;border:1px solid #cbd5e1;border-radius:6px;font-size:14px}.discount-preview[_ngcontent-%COMP%]{background:#fff;border:1px solid #e2e8f0;border-radius:6px;padding:12px;margin-bottom:15px}.discount-preview[_ngcontent-%COMP%]   .preview-line[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:4px 0;font-size:14px}.discount-preview[_ngcontent-%COMP%]   .preview-line.highlight[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#1e40af;border-top:1px solid #e2e8f0;padding-top:8px;margin-top:4px}.discount-preview[_ngcontent-%COMP%]   .preview-line.savings[_ngcontent-%COMP%]{color:#059669;font-weight:600;font-size:14px}.discount-actions[_ngcontent-%COMP%]{display:flex;gap:10px;justify-content:center}.discount-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:6px;font-weight:600;cursor:pointer;min-width:120px}.summary-line[_ngcontent-%COMP%]{padding:4px 0;font-size:14px;color:#475569}.summary-total[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:18px;font-weight:700;color:#1e293b;padding-top:8px;margin-top:8px;border-top:2px solid #e2e8f0;gap:16px;grid-column:1 / -1}.summary-total[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{white-space:nowrap;flex-shrink:0}.discount-label[_ngcontent-%COMP%]{color:#059669;font-size:12px;font-weight:600}.credit-customer-panel[_ngcontent-%COMP%]{background:#f8fafc;border:2px solid #e2e8f0;border-radius:8px;padding:16px;margin-top:16px}.credit-customer-panel[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 12px;font-size:16px;color:#334155}.customer-list[_ngcontent-%COMP%]{max-height:300px;overflow-y:auto;margin-bottom:12px}.customer-option[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px;background:#fff;border:2px solid #e2e8f0;border-radius:8px;margin-bottom:8px;cursor:pointer;transition:all .2s}.customer-option[_ngcontent-%COMP%]:hover{border-color:#3b82f6;background:#eff6ff}.customer-option.selected[_ngcontent-%COMP%]{border-color:#3b82f6;background:#dbeafe}.customer-info[_ngcontent-%COMP%]{flex:1}.customer-name[_ngcontent-%COMP%]{font-weight:600;color:#1e293b;margin-bottom:2px}.customer-phone[_ngcontent-%COMP%]{font-size:12px;color:#64748b}.customer-credit[_ngcontent-%COMP%]{text-align:right}.credit-balance[_ngcontent-%COMP%]{font-size:13px;color:#dc2626;font-weight:600;margin-bottom:2px}.credit-available[_ngcontent-%COMP%]{font-size:12px;color:#10b981;font-weight:600}.credit-warning[_ngcontent-%COMP%]{font-size:11px;color:#f59e0b;font-weight:600;margin-top:2px}.credit-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:8px;padding-top:12px;border-top:2px solid #e2e8f0}.settlement-actions[_ngcontent-%COMP%]   .post-to-account[_ngcontent-%COMP%]{background:#f59e0b;color:#fff}.settlement-actions[_ngcontent-%COMP%]   .post-to-account[_ngcontent-%COMP%]:hover:not([disabled]){background:#d97706}.credit-customer-modal[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.credit-customer-modal[_ngcontent-%COMP%]   .credit-customer-panel[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:24px;max-width:500px;width:90%;max-height:80vh;overflow-y:auto;box-shadow:0 20px 25px -5px #0000001a,0 10px 10px -5px #0000000a;border:none;margin:0;position:relative}.panel-close[_ngcontent-%COMP%]{position:absolute;top:16px;right:16px;background:transparent;border:none;font-size:28px;color:#94a3b8;cursor:pointer;padding:0;width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:4px;transition:all .2s}.panel-close[_ngcontent-%COMP%]:hover{background:#f1f5f9;color:#475569}.customer-search[_ngcontent-%COMP%]{margin-bottom:16px}.customer-search-input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid #e2e8f0;border-radius:8px;font-size:14px;box-sizing:border-box;transition:all .2s}.customer-search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;background:#eff6ff}.customer-company[_ngcontent-%COMP%]{font-size:11px;color:#64748b;font-style:italic;margin-top:2px}"]})};function wX(n,e){if(n&1&&(v(0,"div",17)(1,"span",18),w(2),g(),v(3,"span",19),w(4),g()()),n&2){let t=e.$implicit;I(2),Oe("",t.quantity,"x"),I(2),Ve(t.menuItemName)}}function CX(n,e){if(n&1&&(v(0,"div",20),w(1),g()),n&2){let t=Z().$implicit;I(),Oe(" \u{1F464} ",t.customerName," ")}}function EX(n,e){if(n&1){let t=at();v(0,"button",21),me("click",function(){le(t);let i=Z().$implicit,o=Z();return ue(o.startCooking(i))}),w(1," \u{1F525} Start Cooking "),g()}}function IX(n,e){if(n&1){let t=at();v(0,"button",22),me("click",function(){le(t);let i=Z().$implicit,o=Z();return ue(o.markReady(i))}),w(1," \u2705 Mark Ready "),g()}}function xX(n,e){if(n&1&&(v(0,"div",6)(1,"div",7)(2,"div",8)(3,"h3"),w(4),g(),v(5,"div",9),w(6),g()(),v(7,"div",10),w(8),g()(),v(9,"div",11),Fe(10,wX,5,2,"div",12),g(),Fe(11,CX,2,1,"div",13),v(12,"div",14),Fe(13,EX,2,0,"button",15)(14,IX,2,0,"button",16),g()()),n&2){let t=e.$implicit,r=Z();kt("cooking",t.status==="cooking"),I(4),Ve(t.isTakeaway?"\u{1F4E6} Takeaway":"\u{1FA91} Table "+t.tableNumber),I(2),Ve(t.orderNumber),I(),kt("urgent",r.getElapsedTime(t).includes("15")),I(),Oe(" \u23F1\uFE0F ",r.getElapsedTime(t)," "),I(2),ie("ngForOf",t.items),I(),ie("ngIf",t.customerName),I(2),ie("ngIf",t.status==="pending"),I(),ie("ngIf",t.status==="cooking")}}function SX(n,e){n&1&&(v(0,"div",23)(1,"div",24),w(2,"\u2728"),g(),v(3,"p"),w(4,"No active orders"),g(),v(5,"small"),w(6,"New orders will appear here automatically"),g()())}function DX(n,e){if(n&1&&(v(0,"div",17)(1,"span",18),w(2),g(),v(3,"span",19),w(4),g()()),n&2){let t=e.$implicit;I(2),Oe("",t.quantity,"x"),I(2),Ve(t.menuItemName)}}function TX(n,e){if(n&1&&(v(0,"div",20),w(1),g()),n&2){let t=Z().$implicit;I(),Oe(" \u{1F464} ",t.customerName," ")}}function AX(n,e){if(n&1){let t=at();v(0,"div",27)(1,"div",7)(2,"div",8)(3,"h3"),w(4),g(),v(5,"div",9),w(6),g()(),v(7,"div",28),w(8," \u2705 Ready "),g()(),v(9,"div",11),Fe(10,DX,5,2,"div",12),g(),Fe(11,TX,2,1,"div",13),v(12,"div",14)(13,"button",29),me("click",function(){let i=le(t).$implicit,o=Z(2);return ue(o.markCompleted(i))}),w(14," \u{1F4CB} Mark Completed "),g()()()}if(n&2){let t=e.$implicit;I(4),Ve(t.isTakeaway?"\u{1F4E6} Takeaway":"\u{1FA91} Table "+t.tableNumber),I(2),Ve(t.orderNumber),I(4),ie("ngForOf",t.items),I(),ie("ngIf",t.customerName)}}function MX(n,e){if(n&1&&(v(0,"div",25)(1,"h2"),w(2,"\u{1F514} Ready for Pickup"),g(),v(3,"p",1),w(4,"Orders ready to be served"),g(),v(5,"div",2),Fe(6,AX,15,4,"div",26),g()()),n&2){let t=Z();I(6),ie("ngForOf",t.readyOrders)}}var Mb=class n{constructor(e,t){this.db=e;this.authService=t}orders=[];readyOrders=[];isLoading=!1;ngOnInit(){return F(this,null,function*(){yield this.loadOrders(),setInterval(()=>this.loadOrders(),1e4)})}loadOrders(){return F(this,null,function*(){try{let e=yield this.db.getTodayOrders();this.orders=e.filter(t=>t.status==="pending"||t.status==="cooking"),this.readyOrders=e.filter(t=>t.status==="ready")}catch(e){console.error("Error loading orders:",e)}})}startCooking(e){return F(this,null,function*(){if(e.id)try{yield this.db.updateOrder(e.id,{status:"cooking",startedCookingAt:new Date}),yield this.loadOrders()}catch(t){console.error("Error updating order:",t)}})}markReady(e){return F(this,null,function*(){if(e.id)try{yield this.db.updateOrder(e.id,{status:"ready",readyAt:new Date}),yield this.loadOrders()}catch(t){console.error("Error updating order:",t)}})}markCompleted(e){return F(this,null,function*(){if(e.id)try{yield this.db.updateOrder(e.id,{status:"completed",completedAt:new Date}),yield this.deductInventoryForOrder(e),yield this.loadOrders()}catch(t){console.error("Error completing order:",t)}})}deductInventoryForOrder(e){return F(this,null,function*(){for(let t of e.items){let r=yield this.db.getMenuItem(t.menuItemId);if(r){if(r.preparedItemId){let i={inventoryItemId:r.preparedItemId,inventoryItemName:r.name,adjustmentType:"consumption",quantity:-t.quantity,unit:r.unit||"pieces",reason:`Completed Order ${e.orderNumber}`,adjustedBy:this.authService.currentUser?.name||"Kitchen",date:new Date};try{yield this.db.createInventoryAdjustment(i)}catch(o){console.error("Error deducting prepared inventory:",o)}}if(r.recipeMapping&&r.recipeMapping.length>0)for(let i of r.recipeMapping){let o=i.quantityUsed*t.quantity,s={inventoryItemId:i.inventoryItemId,inventoryItemName:i.inventoryItemName,adjustmentType:"consumption",quantity:-o,unit:i.unit,reason:`Completed ${t.quantity}x ${r.name} - Order ${e.orderNumber}`,adjustedBy:this.authService.currentUser?.name||"Kitchen",date:new Date};try{yield this.db.createInventoryAdjustment(s)}catch(a){console.error("Error deducting recipe inventory:",a)}}}}})}getElapsedTime(e){let t=new Date,r=e.createdAt instanceof Date?e.createdAt:new Date(e.createdAt),i=t.getTime()-r.getTime();return`${Math.floor(i/6e4)} min`}static \u0275fac=function(t){return new(t||n)(Je(gr),Je(Dr))};static \u0275cmp=Jn({type:n,selectors:[["app-kitchen"]],decls:9,vars:3,consts:[[1,"kitchen-container"],[1,"subtitle"],[1,"orders-grid"],["class","order-card",3,"cooking",4,"ngFor","ngForOf"],["class","no-orders",4,"ngIf"],["class","ready-section",4,"ngIf"],[1,"order-card"],[1,"order-header"],[1,"order-info"],[1,"order-number"],[1,"order-time"],[1,"order-items"],["class","order-item",4,"ngFor","ngForOf"],["class","order-customer",4,"ngIf"],[1,"order-actions"],["class","btn btn-start",3,"click",4,"ngIf"],["class","btn btn-ready",3,"click",4,"ngIf"],[1,"order-item"],[1,"item-qty"],[1,"item-name"],[1,"order-customer"],[1,"btn","btn-start",3,"click"],[1,"btn","btn-ready",3,"click"],[1,"no-orders"],[1,"no-orders-icon"],[1,"ready-section"],["class","order-card ready-card",4,"ngFor","ngForOf"],[1,"order-card","ready-card"],[1,"order-time","ready-badge"],[1,"btn","btn-complete",3,"click"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"h1"),w(2,"Kitchen Display System"),g(),v(3,"p",1),w(4,"Active orders to prepare"),g(),v(5,"div",2),Fe(6,xX,15,11,"div",3)(7,SX,7,0,"div",4),g(),Fe(8,MX,7,1,"div",5),g()),t&2&&(I(6),ie("ngForOf",r.orders),I(),ie("ngIf",r.orders.length===0),I(),ie("ngIf",r.readyOrders.length>0))},dependencies:[ir,Nr,lr],styles:[".kitchen-container[_ngcontent-%COMP%]{padding:20px;max-width:1400px;margin:0 auto}h1[_ngcontent-%COMP%]{font-size:32px;color:#333;margin:0 0 5px}.subtitle[_ngcontent-%COMP%]{color:#666;margin:0 0 30px}.orders-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px}.order-card[_ngcontent-%COMP%]{background:#fff;border-radius:10px;padding:20px;box-shadow:0 2px 8px #0000001a;border-left:5px solid #ff9800;transition:all .3s}.order-card.cooking[_ngcontent-%COMP%]{border-left-color:#2196f3;background:#e3f2fd}.order-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.order-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:15px;padding-bottom:15px;border-bottom:2px solid #eee}.order-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 5px;font-size:18px;color:#333}.order-number[_ngcontent-%COMP%]{font-size:12px;color:#999;font-family:monospace}.order-time[_ngcontent-%COMP%]{background:#ff9800;color:#fff;padding:6px 12px;border-radius:20px;font-size:14px;font-weight:600}.order-time.urgent[_ngcontent-%COMP%]{background:#f44336;animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.7}}.order-items[_ngcontent-%COMP%]{margin-bottom:15px}.order-item[_ngcontent-%COMP%]{padding:8px 0;border-bottom:1px solid #f0f0f0;display:flex;align-items:center;gap:10px}.order-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.item-qty[_ngcontent-%COMP%]{background:#667eea;color:#fff;padding:4px 8px;border-radius:4px;font-weight:600;font-size:12px;min-width:35px;text-align:center}.item-name[_ngcontent-%COMP%]{font-size:15px;color:#333;font-weight:500}.order-customer[_ngcontent-%COMP%]{background:#f5f5f5;padding:8px 12px;border-radius:5px;font-size:14px;margin-bottom:15px;color:#666}.order-actions[_ngcontent-%COMP%]{display:flex;gap:10px}.btn[_ngcontent-%COMP%]{flex:1;padding:12px;border:none;border-radius:5px;font-size:14px;font-weight:600;cursor:pointer;transition:all .3s}.btn-start[_ngcontent-%COMP%]{background:#ff9800;color:#fff}.btn-start[_ngcontent-%COMP%]:hover{background:#f57c00}.btn-ready[_ngcontent-%COMP%]{background:#4caf50;color:#fff}.btn-ready[_ngcontent-%COMP%]:hover{background:#45a049}.btn-complete[_ngcontent-%COMP%]{background:#667eea;color:#fff}.btn-complete[_ngcontent-%COMP%]:hover{background:#5568d3}.ready-section[_ngcontent-%COMP%]{margin-top:40px;padding-top:30px;border-top:3px solid #e0e0e0}.ready-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:28px;color:#333;margin:0 0 5px}.ready-card[_ngcontent-%COMP%]{border-left-color:#4caf50;background:#f1f8f4}.ready-badge[_ngcontent-%COMP%]{background:#4caf50}.no-orders[_ngcontent-%COMP%]{grid-column:1 / -1;text-align:center;padding:60px 20px;background:#fff;border-radius:10px}.no-orders-icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:20px}.no-orders[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px;color:#333;margin:0 0 10px}.no-orders[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#999;font-size:14px}"]})};function PX(n,e){if(n&1){let t=at();v(0,"tr")(1,"td"),w(2),g(),v(3,"td"),w(4),g(),v(5,"td")(6,"span",7),w(7),g()(),v(8,"td")(9,"span",8),w(10),g()(),v(11,"td")(12,"button",9),me("click",function(){let i=le(t).$implicit,o=Z();return ue(o.openEditModal(i))}),w(13,"Edit"),g(),v(14,"button",10),me("click",function(){let i=le(t).$implicit,o=Z();return ue(o.toggleActive(i))}),w(15),g()()()}if(n&2){let t=e.$implicit;I(2),Ve(t.name),I(2),Ve(t.email),I(3),Ve(t.role),I(2),kt("active",t.isActive)("inactive",!t.isActive),I(),Oe(" ",t.isActive?"Active":"Inactive"," "),I(5),Oe(" ",t.isActive?"Deactivate":"Activate"," ")}}function NX(n,e){n&1&&(v(0,"tr")(1,"td",11),w(2,"No users found"),g()())}function kX(n,e){if(n&1&&(v(0,"option",26),w(1),g()),n&2){let t=e.$implicit;ie("value",t),I(),Ve(t)}}function OX(n,e){if(n&1){let t=at();v(0,"div",17)(1,"label"),w(2,"Password * (minimum 6 characters)"),g(),v(3,"input",27),Ye("ngModelChange",function(i){le(t);let o=Z(2);return Qe(o.newPassword,i)||(o.newPassword=i),ue(i)}),g()()}if(n&2){let t=Z(2);I(3),Ke("ngModel",t.newPassword)}}function RX(n,e){if(n&1){let t=at();v(0,"div",12)(1,"div",13)(2,"div",14)(3,"h2"),w(4),g(),v(5,"button",15),me("click",function(){le(t);let i=Z();return ue(i.showAddModal=!1)}),w(6,"\xD7"),g()(),v(7,"div",16)(8,"div",17)(9,"label"),w(10,"Name *"),g(),v(11,"input",18),Ye("ngModelChange",function(i){le(t);let o=Z();return Qe(o.currentUser.name,i)||(o.currentUser.name=i),ue(i)}),g()(),v(12,"div",17)(13,"label"),w(14,"Email *"),g(),v(15,"input",19),Ye("ngModelChange",function(i){le(t);let o=Z();return Qe(o.currentUser.email,i)||(o.currentUser.email=i),ue(i)}),g()(),v(16,"div",17)(17,"label"),w(18,"Role *"),g(),v(19,"select",20),Ye("ngModelChange",function(i){le(t);let o=Z();return Qe(o.currentUser.role,i)||(o.currentUser.role=i),ue(i)}),Fe(20,kX,2,2,"option",21),g()(),Fe(21,OX,4,1,"div",22),v(22,"div",17)(23,"label"),w(24,"PIN Code (optional, for quick POS access)"),g(),v(25,"input",23),Ye("ngModelChange",function(i){le(t);let o=Z();return Qe(o.currentUser.pinCode,i)||(o.currentUser.pinCode=i),ue(i)}),g()()(),v(26,"div",24)(27,"button",25),me("click",function(){le(t);let i=Z();return ue(i.showAddModal=!1)}),w(28,"Cancel"),g(),v(29,"button",2),me("click",function(){le(t);let i=Z();return ue(i.saveUser())}),w(30),g()()()()}if(n&2){let t=Z();I(4),Ve(t.isEditMode?"Edit User":"Add User"),I(7),Ke("ngModel",t.currentUser.name),I(4),Ke("ngModel",t.currentUser.email),ie("disabled",t.isEditMode),I(4),Ke("ngModel",t.currentUser.role),I(),ie("ngForOf",t.roles),I(),ie("ngIf",!t.isEditMode),I(4),Ke("ngModel",t.currentUser.pinCode),I(5),Ve(t.isEditMode?"Update User":"Save User")}}var Pb=class n{constructor(e,t){this.db=e;this.authService=t}users=[];showAddModal=!1;isEditMode=!1;currentUser=this.getEmptyUser();newPassword="";roles=["admin","cashier","chef","waiter"];ngOnInit(){return F(this,null,function*(){yield this.loadUsers()})}getEmptyUser(){return{username:"",email:"",name:"",role:"cashier",isActive:!0}}loadUsers(){return F(this,null,function*(){try{this.users=yield this.db.getUsers()}catch(e){console.error("Error loading users:",e)}})}openAddModal(){this.currentUser=this.getEmptyUser(),this.newPassword="",this.isEditMode=!1,this.showAddModal=!0}openEditModal(e){this.currentUser=Ie({},e),this.newPassword="",this.isEditMode=!0,this.showAddModal=!0}saveUser(){return F(this,null,function*(){if(!this.currentUser.name||!this.currentUser.email){alert("Please fill in all required fields");return}if(!this.isEditMode&&(!this.newPassword||this.newPassword.length<6)){alert("Password must be at least 6 characters long");return}try{if(this.isEditMode&&this.currentUser.id){let e={name:this.currentUser.name,role:this.currentUser.role};this.currentUser.pinCode&&(e.pinCode=this.currentUser.pinCode),yield this.db.updateUser(this.currentUser.id,e),yield this.db.logActivity({userId:this.authService.currentUser?.id||"",userName:this.authService.currentUser?.name||"Admin",action:"Edited User",details:`Updated ${this.currentUser.name} (${this.currentUser.role})`,timestamp:new Date}),alert("User updated successfully")}else{let e=yield this.authService.createUserAccount(this.currentUser.email,this.newPassword,this.currentUser);alert("User created successfully! They can now log in with their email and password.")}yield this.loadUsers(),this.showAddModal=!1}catch(e){console.error("Error saving user:",e),alert("Error saving user: "+(e.message||"Unknown error"))}})}toggleActive(e){return F(this,null,function*(){if(e.id)try{yield this.db.updateUser(e.id,{isActive:!e.isActive}),yield this.loadUsers()}catch(t){console.error("Error updating user:",t)}})}static \u0275fac=function(t){return new(t||n)(Je(gr),Je(Dr))};static \u0275cmp=Jn({type:n,selectors:[["app-user-management"]],decls:23,vars:3,consts:[[1,"container"],[1,"header"],[1,"btn","btn-primary",3,"click"],[1,"data-table"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","modal",4,"ngIf"],[1,"role-badge"],[1,"status-badge"],[1,"btn","btn-sm","btn-info",3,"click"],[1,"btn","btn-sm",3,"click"],["colspan","5",1,"no-data"],[1,"modal"],[1,"modal-content"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"form-group"],["type","text",3,"ngModelChange","ngModel"],["type","email",3,"ngModelChange","ngModel","disabled"],[3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","form-group",4,"ngIf"],["type","text","placeholder","4-digit PIN","maxlength","4",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[3,"value"],["type","password","placeholder","Enter password",3,"ngModelChange","ngModel"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"div",1)(2,"h1"),w(3,"User Management"),g(),v(4,"button",2),me("click",function(){return r.openAddModal()}),w(5,"+ Add User"),g()(),v(6,"table",3)(7,"thead")(8,"tr")(9,"th"),w(10,"Name"),g(),v(11,"th"),w(12,"Email"),g(),v(13,"th"),w(14,"Role"),g(),v(15,"th"),w(16,"Status"),g(),v(17,"th"),w(18,"Actions"),g()()(),v(19,"tbody"),Fe(20,PX,16,9,"tr",4)(21,NX,3,0,"tr",5),g()(),Fe(22,RX,31,9,"div",6),g()),t&2&&(I(20),ie("ngForOf",r.users),I(),ie("ngIf",r.users.length===0),I(),ie("ngIf",r.showAddModal))},dependencies:[ir,Nr,lr,Ei,pc,mc,Ci,Ks,Zi,rT,ji],styles:[".container[_ngcontent-%COMP%]{padding:20px;max-width:1400px;margin:0 auto}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px;color:#333;margin:0}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background:#fff;border-radius:10px;box-shadow:0 2px 8px #0000001a;overflow:hidden}.data-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#f5f5f5}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:15px;text-align:left;font-weight:600;color:#333;border-bottom:2px solid #ddd}.data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:15px;border-bottom:1px solid #eee}.role-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;background:#e3f2fd;color:#1976d2;border-radius:12px;font-size:12px;font-weight:500;text-transform:capitalize}.status-badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:12px;font-size:12px;font-weight:500}.status-badge.active[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.status-badge.inactive[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:5px;font-size:14px;font-weight:500;cursor:pointer}.btn-primary[_ngcontent-%COMP%]{background:#667eea;color:#fff}.btn-secondary[_ngcontent-%COMP%]{background:#e0e0e0;color:#333}.btn-sm[_ngcontent-%COMP%]{padding:6px 12px;font-size:12px;margin-right:5px}.btn-info[_ngcontent-%COMP%]{background:#667eea;color:#fff}.btn-info[_ngcontent-%COMP%]:hover{background:#5568d3}.data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:8px}.data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{margin-right:0}.no-data[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#999}.modal[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:10px;width:90%;max-width:600px}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:20px;border-bottom:1px solid #eee}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:28px;cursor:pointer}.modal-body[_ngcontent-%COMP%]{padding:20px}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;padding:20px;border-top:1px solid #eee}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:500}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ddd;border-radius:5px;box-sizing:border-box}"]})};var Sa=Uint8Array,bs=Uint16Array,cT=Int32Array,lT=new Sa([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),uT=new Sa([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),EF=new Sa([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),DF=function(n,e){for(var t=new bs(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new cT(t[30]),r=1;r<30;++r)for(var o=t[r];o<t[r+1];++o)i[o]=o-t[r]<<5|r;return{b:t,r:i}},TF=DF(lT,2),LX=TF.b,oT=TF.r;LX[28]=258,oT[258]=28;var AF=DF(uT,0),JIe=AF.b,IF=AF.r,sT=new bs(32768);for(Mn=0;Mn<32768;++Mn)gl=(Mn&43690)>>1|(Mn&21845)<<1,gl=(gl&52428)>>2|(gl&13107)<<2,gl=(gl&61680)>>4|(gl&3855)<<4,sT[Mn]=((gl&65280)>>8|(gl&255)<<8)>>1;var gl,Mn,f0=function(n,e,t){for(var r=n.length,i=0,o=new bs(e);i<r;++i)n[i]&&++o[n[i]-1];var s=new bs(e);for(i=1;i<e;++i)s[i]=s[i-1]+o[i-1]<<1;var a;if(t){a=new bs(1<<e);var c=15-e;for(i=0;i<r;++i)if(n[i])for(var l=i<<4|n[i],u=e-n[i],m=s[n[i]-1]++<<u,_=m|(1<<u)-1;m<=_;++m)a[sT[m]>>c]=l}else for(a=new bs(r),i=0;i<r;++i)n[i]&&(a[i]=sT[s[n[i]-1]++]>>15-n[i]);return a},uh=new Sa(288);for(Mn=0;Mn<144;++Mn)uh[Mn]=8;var Mn;for(Mn=144;Mn<256;++Mn)uh[Mn]=9;var Mn;for(Mn=256;Mn<280;++Mn)uh[Mn]=7;var Mn;for(Mn=280;Mn<288;++Mn)uh[Mn]=8;var Mn,Nb=new Sa(32);for(Mn=0;Mn<32;++Mn)Nb[Mn]=5;var Mn,FX=f0(uh,9,0);var VX=f0(Nb,5,0);var MF=function(n){return(n+7)/8|0},jX=function(n,e,t){return(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length),new Sa(n.subarray(e,t))};var vl=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},d0=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},iT=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,o=t.slice();if(!i)return{t:NF,l:0};if(i==1){var s=new Sa(t[0].s+1);return s[t[0].s]=1,{t:s,l:1}}t.sort(function(_e,Ce){return _e.f-Ce.f}),t.push({s:-1,f:25001});var a=t[0],c=t[1],l=0,u=1,m=2;for(t[0]={s:-1,f:a.f+c.f,l:a,r:c};u!=i-1;)a=t[t[l].f<t[m].f?l++:m++],c=t[l!=u&&t[l].f<t[m].f?l++:m++],t[u++]={s:-1,f:a.f+c.f,l:a,r:c};for(var _=o[0].s,r=1;r<i;++r)o[r].s>_&&(_=o[r].s);var p=new bs(_+1),D=aT(t[u-1],p,0);if(D>e){var r=0,k=0,L=D-e,R=1<<L;for(o.sort(function(Ce,H){return p[H.s]-p[Ce.s]||Ce.f-H.f});r<i;++r){var X=o[r].s;if(p[X]>e)k+=R-(1<<D-p[X]),p[X]=e;else break}for(k>>=L;k>0;){var ee=o[r].s;p[ee]<e?k-=1<<e-p[ee]++-1:++r}for(;r>=0&&k;--r){var J=o[r].s;p[J]==e&&(--p[J],++k)}D=e}return{t:new Sa(p),l:D}},aT=function(n,e,t){return n.s==-1?Math.max(aT(n.l,e,t+1),aT(n.r,e,t+1)):e[n.s]=t},xF=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new bs(++e),r=0,i=n[0],o=1,s=function(c){t[r++]=c},a=1;a<=e;++a)if(n[a]==i&&a!=e)++o;else{if(!i&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(i),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(i);o=1,i=n[a]}return{c:t.subarray(0,r),n:e}},h0=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},PF=function(n,e,t){var r=t.length,i=MF(e+2);n[i]=r&255,n[i+1]=r>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var o=0;o<r;++o)n[i+o+4]=t[o];return(i+4+r)*8},SF=function(n,e,t,r,i,o,s,a,c,l,u){vl(e,u++,t),++i[256];for(var m=iT(i,15),_=m.t,p=m.l,D=iT(o,15),k=D.t,L=D.l,R=xF(_),X=R.c,ee=R.n,J=xF(k),_e=J.c,Ce=J.n,H=new bs(19),N=0;N<X.length;++N)++H[X[N]&31];for(var N=0;N<_e.length;++N)++H[_e[N]&31];for(var T=iT(H,7),U=T.t,x=T.l,A=19;A>4&&!U[EF[A-1]];--A);var M=l+5<<3,ne=h0(i,uh)+h0(o,Nb)+s,be=h0(i,_)+h0(o,k)+s+14+3*A+h0(H,U)+2*H[16]+3*H[17]+7*H[18];if(c>=0&&M<=ne&&M<=be)return PF(e,u,n.subarray(c,c+l));var De,Se,ge,Te;if(vl(e,u,1+(be<ne)),u+=2,be<ne){De=f0(_,p,0),Se=_,ge=f0(k,L,0),Te=k;var We=f0(U,x,0);vl(e,u,ee-257),vl(e,u+5,Ce-1),vl(e,u+10,A-4),u+=14;for(var N=0;N<A;++N)vl(e,u+3*N,U[EF[N]]);u+=3*A;for(var Be=[X,_e],j=0;j<2;++j)for(var Q=Be[j],N=0;N<Q.length;++N){var te=Q[N]&31;vl(e,u,We[te]),u+=U[te],te>15&&(vl(e,u,Q[N]>>5&127),u+=Q[N]>>12)}}else De=FX,Se=uh,ge=VX,Te=Nb;for(var N=0;N<a;++N){var oe=r[N];if(oe>255){var te=oe>>18&31;d0(e,u,De[te+257]),u+=Se[te+257],te>7&&(vl(e,u,oe>>23&31),u+=lT[te]);var de=oe&31;d0(e,u,ge[de]),u+=Te[de],de>3&&(d0(e,u,oe>>5&8191),u+=uT[de])}else d0(e,u,De[oe]),u+=Se[oe]}return d0(e,u,De[256]),u+Se[256]},BX=new cT([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),NF=new Sa(0),UX=function(n,e,t,r,i,o){var s=o.z||n.length,a=new Sa(r+s+5*(1+Math.ceil(s/7e3))+i),c=a.subarray(r,a.length-i),l=o.l,u=(o.r||0)&7;if(e){u&&(c[0]=o.r>>3);for(var m=BX[e-1],_=m>>13,p=m&8191,D=(1<<t)-1,k=o.p||new bs(32768),L=o.h||new bs(D+1),R=Math.ceil(t/3),X=2*R,ee=function(vt){return(n[vt]^n[vt+1]<<R^n[vt+2]<<X)&D},J=new cT(25e3),_e=new bs(288),Ce=new bs(32),H=0,N=0,T=o.i||0,U=0,x=o.w||0,A=0;T+2<s;++T){var M=ee(T),ne=T&32767,be=L[M];if(k[ne]=be,L[M]=ne,x<=T){var De=s-T;if((H>7e3||U>24576)&&(De>423||!l)){u=SF(n,c,0,J,_e,Ce,N,U,A,T-A,u),U=H=N=0,A=T;for(var Se=0;Se<286;++Se)_e[Se]=0;for(var Se=0;Se<30;++Se)Ce[Se]=0}var ge=2,Te=0,We=p,Be=ne-be&32767;if(De>2&&M==ee(T-Be))for(var j=Math.min(_,De)-1,Q=Math.min(32767,T),te=Math.min(258,De);Be<=Q&&--We&&ne!=be;){if(n[T+ge]==n[T+ge-Be]){for(var oe=0;oe<te&&n[T+oe]==n[T+oe-Be];++oe);if(oe>ge){if(ge=oe,Te=Be,oe>j)break;for(var de=Math.min(Be,oe-2),pe=0,Se=0;Se<de;++Se){var Ee=T-Be+Se&32767,xe=k[Ee],Ne=Ee-xe&32767;Ne>pe&&(pe=Ne,be=Ee)}}}ne=be,be=k[ne],Be+=ne-be&32767}if(Te){J[U++]=268435456|oT[ge]<<18|IF[Te];var qe=oT[ge]&31,nt=IF[Te]&31;N+=lT[qe]+uT[nt],++_e[257+qe],++Ce[nt],x=T+ge,++H}else J[U++]=n[T],++_e[n[T]]}}for(T=Math.max(T,x);T<s;++T)J[U++]=n[T],++_e[n[T]];u=SF(n,c,l,J,_e,Ce,N,U,A,T-A,u),l||(o.r=u&7|c[u/8|0]<<3,u-=7,o.h=L,o.p=k,o.i=T,o.w=x)}else{for(var T=o.w||0;T<s+l;T+=65535){var et=T+65535;et>=s&&(c[u/8|0]=l,et=s),u=PF(c,u+1,n.subarray(T,et))}o.i=s}return jX(a,0,r+MF(u)+i)};var kF=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,o=t.length|0,s=0;s!=o;){for(var a=Math.min(s+2655,o);s<a;++s)i+=r+=t[s];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}n=r,e=i},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},zX=function(n,e,t,r,i){if(!i&&(i={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),s=new Sa(o.length+n.length);s.set(o),s.set(n,o.length),n=s,i.w=o.length}return UX(n,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,i)};var OF=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8};var $X=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var i=kF();i.p(e.dictionary),OF(n,2,i.d())}};function kb(n,e){e||(e={});var t=kF();t.p(n);var r=zX(n,e,e.dictionary?6:2,4);return $X(r,e),OF(r,r.length-4,t.d()),r}var qX=typeof TextDecoder<"u"&&new TextDecoder,HX=0;try{qX.decode(NF,{stream:!0}),HX=1}catch{}function RF(n){if(Array.isArray(n))return n}function LF(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,o,s,a=[],c=!0,l=!1;try{if(o=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=o.call(t)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(u){l=!0,i=u}finally{try{if(!c&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(l)throw i}}return a}}function dT(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function FF(n,e){if(n){if(typeof n=="string")return dT(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?dT(n,e):void 0}}function VF(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hT(n,e){return RF(n)||LF(n,e)||FF(n,e)||VF()}function fT(n,e="utf8"){return new TextDecoder(e).decode(n)}var WX=new TextEncoder;function jF(n){return WX.encode(n)}var GX=1024*8,KX=(()=>{let n=new Uint8Array(4),e=new Uint32Array(n.buffer);return!((e[0]=1)&n[0])})(),pT={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array},p0=class n{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=GX,t={}){let r=!1;typeof e=="number"?e=new ArrayBuffer(e):(r=!0,this.lastWrittenByte=e.byteLength);let i=t.offset?t.offset>>>0:0,o=e.byteLength-i,s=i;(ArrayBuffer.isView(e)||e instanceof n)&&(e.byteLength!==e.buffer.byteLength&&(s=e.byteOffset+i),e=e.buffer),r?this.lastWrittenByte=o:this.lastWrittenByte=0,this.buffer=e,this.length=o,this.byteLength=o,this.byteOffset=s,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,s,o),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){let e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){let r=(this.offset+e)*2,i=new Uint8Array(r);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){let r=pT[t].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,o=this.buffer.slice(i,i+r);if(this.littleEndian===KX&&t!=="uint8"&&t!=="int8"){let a=new Uint8Array(this.buffer.slice(i,i+r));a.reverse();let c=new pT[t](a.buffer);return this.offset+=r,c.reverse(),c}let s=new pT[t](o);return this.offset+=r,s}readInt16(){let e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){let e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){let e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){let e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){let e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){let e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){let e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){let e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let r=0;r<e;r++)t+=this.readChar();return t}readUtf8(e=1){return fT(this.readBytes(e))}decodeText(e=1,t="utf8"){return fT(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(jF(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}};function _p(n){let e=n.length;for(;--e>=0;)n[e]=0}var YX=0,I6=1,QX=2,ZX=3,JX=258,VT=29,A0=256,w0=A0+1+VT,gp=30,jT=19,x6=2*w0+1,dh=15,mT=16,XX=7,BT=256,S6=16,D6=17,T6=18,AT=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),jb=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),eee=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),A6=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),tee=512,_l=new Array((w0+2)*2);_p(_l);var y0=new Array(gp*2);_p(y0);var C0=new Array(tee);_p(C0);var E0=new Array(JX-ZX+1);_p(E0);var UT=new Array(VT);_p(UT);var Bb=new Array(gp);_p(Bb);function gT(n,e,t,r,i){this.static_tree=n,this.extra_bits=e,this.extra_base=t,this.elems=r,this.max_length=i,this.has_stree=n&&n.length}var M6,P6,N6;function vT(n,e){this.dyn_tree=n,this.max_code=0,this.stat_desc=e}var k6=n=>n<256?C0[n]:C0[256+(n>>>7)],I0=(n,e)=>{n.pending_buf[n.pending++]=e&255,n.pending_buf[n.pending++]=e>>>8&255},Bo=(n,e,t)=>{n.bi_valid>mT-t?(n.bi_buf|=e<<n.bi_valid&65535,I0(n,n.bi_buf),n.bi_buf=e>>mT-n.bi_valid,n.bi_valid+=t-mT):(n.bi_buf|=e<<n.bi_valid&65535,n.bi_valid+=t)},vc=(n,e,t)=>{Bo(n,t[e*2],t[e*2+1])},O6=(n,e)=>{let t=0;do t|=n&1,n>>>=1,t<<=1;while(--e>0);return t>>>1},nee=n=>{n.bi_valid===16?(I0(n,n.bi_buf),n.bi_buf=0,n.bi_valid=0):n.bi_valid>=8&&(n.pending_buf[n.pending++]=n.bi_buf&255,n.bi_buf>>=8,n.bi_valid-=8)},ree=(n,e)=>{let t=e.dyn_tree,r=e.max_code,i=e.stat_desc.static_tree,o=e.stat_desc.has_stree,s=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,c=e.stat_desc.max_length,l,u,m,_,p,D,k=0;for(_=0;_<=dh;_++)n.bl_count[_]=0;for(t[n.heap[n.heap_max]*2+1]=0,l=n.heap_max+1;l<x6;l++)u=n.heap[l],_=t[t[u*2+1]*2+1]+1,_>c&&(_=c,k++),t[u*2+1]=_,!(u>r)&&(n.bl_count[_]++,p=0,u>=a&&(p=s[u-a]),D=t[u*2],n.opt_len+=D*(_+p),o&&(n.static_len+=D*(i[u*2+1]+p)));if(k!==0){do{for(_=c-1;n.bl_count[_]===0;)_--;n.bl_count[_]--,n.bl_count[_+1]+=2,n.bl_count[c]--,k-=2}while(k>0);for(_=c;_!==0;_--)for(u=n.bl_count[_];u!==0;)m=n.heap[--l],!(m>r)&&(t[m*2+1]!==_&&(n.opt_len+=(_-t[m*2+1])*t[m*2],t[m*2+1]=_),u--)}},R6=(n,e,t)=>{let r=new Array(dh+1),i=0,o,s;for(o=1;o<=dh;o++)i=i+t[o-1]<<1,r[o]=i;for(s=0;s<=e;s++){let a=n[s*2+1];a!==0&&(n[s*2]=O6(r[a]++,a))}},iee=()=>{let n,e,t,r,i,o=new Array(dh+1);for(t=0,r=0;r<VT-1;r++)for(UT[r]=t,n=0;n<1<<AT[r];n++)E0[t++]=r;for(E0[t-1]=r,i=0,r=0;r<16;r++)for(Bb[r]=i,n=0;n<1<<jb[r];n++)C0[i++]=r;for(i>>=7;r<gp;r++)for(Bb[r]=i<<7,n=0;n<1<<jb[r]-7;n++)C0[256+i++]=r;for(e=0;e<=dh;e++)o[e]=0;for(n=0;n<=143;)_l[n*2+1]=8,n++,o[8]++;for(;n<=255;)_l[n*2+1]=9,n++,o[9]++;for(;n<=279;)_l[n*2+1]=7,n++,o[7]++;for(;n<=287;)_l[n*2+1]=8,n++,o[8]++;for(R6(_l,w0+1,o),n=0;n<gp;n++)y0[n*2+1]=5,y0[n*2]=O6(n,5);M6=new gT(_l,AT,A0+1,w0,dh),P6=new gT(y0,jb,0,gp,dh),N6=new gT(new Array(0),eee,0,jT,XX)},L6=n=>{let e;for(e=0;e<w0;e++)n.dyn_ltree[e*2]=0;for(e=0;e<gp;e++)n.dyn_dtree[e*2]=0;for(e=0;e<jT;e++)n.bl_tree[e*2]=0;n.dyn_ltree[BT*2]=1,n.opt_len=n.static_len=0,n.sym_next=n.matches=0},F6=n=>{n.bi_valid>8?I0(n,n.bi_buf):n.bi_valid>0&&(n.pending_buf[n.pending++]=n.bi_buf),n.bi_buf=0,n.bi_valid=0},BF=(n,e,t,r)=>{let i=e*2,o=t*2;return n[i]<n[o]||n[i]===n[o]&&r[e]<=r[t]},yT=(n,e,t)=>{let r=n.heap[t],i=t<<1;for(;i<=n.heap_len&&(i<n.heap_len&&BF(e,n.heap[i+1],n.heap[i],n.depth)&&i++,!BF(e,r,n.heap[i],n.depth));)n.heap[t]=n.heap[i],t=i,i<<=1;n.heap[t]=r},UF=(n,e,t)=>{let r,i,o=0,s,a;if(n.sym_next!==0)do r=n.pending_buf[n.sym_buf+o++]&255,r+=(n.pending_buf[n.sym_buf+o++]&255)<<8,i=n.pending_buf[n.sym_buf+o++],r===0?vc(n,i,e):(s=E0[i],vc(n,s+A0+1,e),a=AT[s],a!==0&&(i-=UT[s],Bo(n,i,a)),r--,s=k6(r),vc(n,s,t),a=jb[s],a!==0&&(r-=Bb[s],Bo(n,r,a)));while(o<n.sym_next);vc(n,BT,e)},MT=(n,e)=>{let t=e.dyn_tree,r=e.stat_desc.static_tree,i=e.stat_desc.has_stree,o=e.stat_desc.elems,s,a,c=-1,l;for(n.heap_len=0,n.heap_max=x6,s=0;s<o;s++)t[s*2]!==0?(n.heap[++n.heap_len]=c=s,n.depth[s]=0):t[s*2+1]=0;for(;n.heap_len<2;)l=n.heap[++n.heap_len]=c<2?++c:0,t[l*2]=1,n.depth[l]=0,n.opt_len--,i&&(n.static_len-=r[l*2+1]);for(e.max_code=c,s=n.heap_len>>1;s>=1;s--)yT(n,t,s);l=o;do s=n.heap[1],n.heap[1]=n.heap[n.heap_len--],yT(n,t,1),a=n.heap[1],n.heap[--n.heap_max]=s,n.heap[--n.heap_max]=a,t[l*2]=t[s*2]+t[a*2],n.depth[l]=(n.depth[s]>=n.depth[a]?n.depth[s]:n.depth[a])+1,t[s*2+1]=t[a*2+1]=l,n.heap[1]=l++,yT(n,t,1);while(n.heap_len>=2);n.heap[--n.heap_max]=n.heap[1],ree(n,e),R6(t,c,n.bl_count)},zF=(n,e,t)=>{let r,i=-1,o,s=e[1],a=0,c=7,l=4;for(s===0&&(c=138,l=3),e[(t+1)*2+1]=65535,r=0;r<=t;r++)o=s,s=e[(r+1)*2+1],!(++a<c&&o===s)&&(a<l?n.bl_tree[o*2]+=a:o!==0?(o!==i&&n.bl_tree[o*2]++,n.bl_tree[S6*2]++):a<=10?n.bl_tree[D6*2]++:n.bl_tree[T6*2]++,a=0,i=o,s===0?(c=138,l=3):o===s?(c=6,l=3):(c=7,l=4))},$F=(n,e,t)=>{let r,i=-1,o,s=e[1],a=0,c=7,l=4;for(s===0&&(c=138,l=3),r=0;r<=t;r++)if(o=s,s=e[(r+1)*2+1],!(++a<c&&o===s)){if(a<l)do vc(n,o,n.bl_tree);while(--a!==0);else o!==0?(o!==i&&(vc(n,o,n.bl_tree),a--),vc(n,S6,n.bl_tree),Bo(n,a-3,2)):a<=10?(vc(n,D6,n.bl_tree),Bo(n,a-3,3)):(vc(n,T6,n.bl_tree),Bo(n,a-11,7));a=0,i=o,s===0?(c=138,l=3):o===s?(c=6,l=3):(c=7,l=4)}},oee=n=>{let e;for(zF(n,n.dyn_ltree,n.l_desc.max_code),zF(n,n.dyn_dtree,n.d_desc.max_code),MT(n,n.bl_desc),e=jT-1;e>=3&&n.bl_tree[A6[e]*2+1]===0;e--);return n.opt_len+=3*(e+1)+5+5+4,e},see=(n,e,t,r)=>{let i;for(Bo(n,e-257,5),Bo(n,t-1,5),Bo(n,r-4,4),i=0;i<r;i++)Bo(n,n.bl_tree[A6[i]*2+1],3);$F(n,n.dyn_ltree,e-1),$F(n,n.dyn_dtree,t-1)},aee=n=>{let e=4093624447,t;for(t=0;t<=31;t++,e>>>=1)if(e&1&&n.dyn_ltree[t*2]!==0)return 0;if(n.dyn_ltree[18]!==0||n.dyn_ltree[20]!==0||n.dyn_ltree[26]!==0)return 1;for(t=32;t<A0;t++)if(n.dyn_ltree[t*2]!==0)return 1;return 0},qF=!1,cee=n=>{qF||(iee(),qF=!0),n.l_desc=new vT(n.dyn_ltree,M6),n.d_desc=new vT(n.dyn_dtree,P6),n.bl_desc=new vT(n.bl_tree,N6),n.bi_buf=0,n.bi_valid=0,L6(n)},V6=(n,e,t,r)=>{Bo(n,(YX<<1)+(r?1:0),3),F6(n),I0(n,t),I0(n,~t),t&&n.pending_buf.set(n.window.subarray(e,e+t),n.pending),n.pending+=t},lee=n=>{Bo(n,I6<<1,3),vc(n,BT,_l),nee(n)},uee=(n,e,t,r)=>{let i,o,s=0;n.level>0?(n.strm.data_type===2&&(n.strm.data_type=aee(n)),MT(n,n.l_desc),MT(n,n.d_desc),s=oee(n),i=n.opt_len+3+7>>>3,o=n.static_len+3+7>>>3,o<=i&&(i=o)):i=o=t+5,t+4<=i&&e!==-1?V6(n,e,t,r):n.strategy===4||o===i?(Bo(n,(I6<<1)+(r?1:0),3),UF(n,_l,y0)):(Bo(n,(QX<<1)+(r?1:0),3),see(n,n.l_desc.max_code+1,n.d_desc.max_code+1,s+1),UF(n,n.dyn_ltree,n.dyn_dtree)),L6(n),r&&F6(n)},dee=(n,e,t)=>(n.pending_buf[n.sym_buf+n.sym_next++]=e,n.pending_buf[n.sym_buf+n.sym_next++]=e>>8,n.pending_buf[n.sym_buf+n.sym_next++]=t,e===0?n.dyn_ltree[t*2]++:(n.matches++,e--,n.dyn_ltree[(E0[t]+A0+1)*2]++,n.dyn_dtree[k6(e)*2]++),n.sym_next===n.sym_end),hee=cee,fee=V6,pee=uee,mee=dee,gee=lee,vee={_tr_init:hee,_tr_stored_block:fee,_tr_flush_block:pee,_tr_tally:mee,_tr_align:gee},yee=(n,e,t,r)=>{let i=n&65535|0,o=n>>>16&65535|0,s=0;for(;t!==0;){s=t>2e3?2e3:t,t-=s;do i=i+e[r++]|0,o=o+i|0;while(--s);i%=65521,o%=65521}return i|o<<16|0},x0=yee,_ee=()=>{let n,e=[];for(var t=0;t<256;t++){n=t;for(var r=0;r<8;r++)n=n&1?3988292384^n>>>1:n>>>1;e[t]=n}return e},bee=new Uint32Array(_ee()),wee=(n,e,t,r)=>{let i=bee,o=r+t;n^=-1;for(let s=r;s<o;s++)n=n>>>8^i[(n^e[s])&255];return n^-1},Ii=wee,ph={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},bp={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},{_tr_init:Cee,_tr_stored_block:PT,_tr_flush_block:Eee,_tr_tally:Bu,_tr_align:Iee}=vee,{Z_NO_FLUSH:Uu,Z_PARTIAL_FLUSH:xee,Z_FULL_FLUSH:See,Z_FINISH:Ys,Z_BLOCK:HF,Z_OK:Bi,Z_STREAM_END:WF,Z_STREAM_ERROR:yc,Z_DATA_ERROR:Dee,Z_BUF_ERROR:_T,Z_DEFAULT_COMPRESSION:Tee,Z_FILTERED:Aee,Z_HUFFMAN_ONLY:Ob,Z_RLE:Mee,Z_FIXED:Pee,Z_DEFAULT_STRATEGY:Nee,Z_UNKNOWN:kee,Z_DEFLATED:$b}=bp,Oee=9,Ree=15,Lee=8,Fee=29,Vee=256,NT=Vee+1+Fee,jee=30,Bee=19,Uee=2*NT+1,zee=15,bn=3,ju=258,_c=ju+bn+1,$ee=32,vp=42,zT=57,kT=69,OT=73,RT=91,LT=103,hh=113,g0=666,_o=1,wp=2,mh=3,Cp=4,qee=3,fh=(n,e)=>(n.msg=ph[e],e),GF=n=>n*2-(n>4?9:0),Vu=n=>{let e=n.length;for(;--e>=0;)n[e]=0},Hee=n=>{let e,t,r,i=n.w_size;e=n.hash_size,r=e;do t=n.head[--r],n.head[r]=t>=i?t-i:0;while(--e);e=i,r=e;do t=n.prev[--r],n.prev[r]=t>=i?t-i:0;while(--e)},Wee=(n,e,t)=>(e<<n.hash_shift^t)&n.hash_mask,zu=Wee,ws=n=>{let e=n.state,t=e.pending;t>n.avail_out&&(t=n.avail_out),t!==0&&(n.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+t),n.next_out),n.next_out+=t,e.pending_out+=t,n.total_out+=t,n.avail_out-=t,e.pending-=t,e.pending===0&&(e.pending_out=0))},Cs=(n,e)=>{Eee(n,n.block_start>=0?n.block_start:-1,n.strstart-n.block_start,e),n.block_start=n.strstart,ws(n.strm)},Pn=(n,e)=>{n.pending_buf[n.pending++]=e},m0=(n,e)=>{n.pending_buf[n.pending++]=e>>>8&255,n.pending_buf[n.pending++]=e&255},FT=(n,e,t,r)=>{let i=n.avail_in;return i>r&&(i=r),i===0?0:(n.avail_in-=i,e.set(n.input.subarray(n.next_in,n.next_in+i),t),n.state.wrap===1?n.adler=x0(n.adler,e,i,t):n.state.wrap===2&&(n.adler=Ii(n.adler,e,i,t)),n.next_in+=i,n.total_in+=i,i)},j6=(n,e)=>{let t=n.max_chain_length,r=n.strstart,i,o,s=n.prev_length,a=n.nice_match,c=n.strstart>n.w_size-_c?n.strstart-(n.w_size-_c):0,l=n.window,u=n.w_mask,m=n.prev,_=n.strstart+ju,p=l[r+s-1],D=l[r+s];n.prev_length>=n.good_match&&(t>>=2),a>n.lookahead&&(a=n.lookahead);do if(i=e,!(l[i+s]!==D||l[i+s-1]!==p||l[i]!==l[r]||l[++i]!==l[r+1])){r+=2,i++;do;while(l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&r<_);if(o=ju-(_-r),r=_-ju,o>s){if(n.match_start=e,s=o,o>=a)break;p=l[r+s-1],D=l[r+s]}}while((e=m[e&u])>c&&--t!==0);return s<=n.lookahead?s:n.lookahead},yp=n=>{let e=n.w_size,t,r,i;do{if(r=n.window_size-n.lookahead-n.strstart,n.strstart>=e+(e-_c)&&(n.window.set(n.window.subarray(e,e+e-r),0),n.match_start-=e,n.strstart-=e,n.block_start-=e,n.insert>n.strstart&&(n.insert=n.strstart),Hee(n),r+=e),n.strm.avail_in===0)break;if(t=FT(n.strm,n.window,n.strstart+n.lookahead,r),n.lookahead+=t,n.lookahead+n.insert>=bn)for(i=n.strstart-n.insert,n.ins_h=n.window[i],n.ins_h=zu(n,n.ins_h,n.window[i+1]);n.insert&&(n.ins_h=zu(n,n.ins_h,n.window[i+bn-1]),n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++,n.insert--,!(n.lookahead+n.insert<bn)););}while(n.lookahead<_c&&n.strm.avail_in!==0)},B6=(n,e)=>{let t=n.pending_buf_size-5>n.w_size?n.w_size:n.pending_buf_size-5,r,i,o,s=0,a=n.strm.avail_in;do{if(r=65535,o=n.bi_valid+42>>3,n.strm.avail_out<o||(o=n.strm.avail_out-o,i=n.strstart-n.block_start,r>i+n.strm.avail_in&&(r=i+n.strm.avail_in),r>o&&(r=o),r<t&&(r===0&&e!==Ys||e===Uu||r!==i+n.strm.avail_in)))break;s=e===Ys&&r===i+n.strm.avail_in?1:0,PT(n,0,0,s),n.pending_buf[n.pending-4]=r,n.pending_buf[n.pending-3]=r>>8,n.pending_buf[n.pending-2]=~r,n.pending_buf[n.pending-1]=~r>>8,ws(n.strm),i&&(i>r&&(i=r),n.strm.output.set(n.window.subarray(n.block_start,n.block_start+i),n.strm.next_out),n.strm.next_out+=i,n.strm.avail_out-=i,n.strm.total_out+=i,n.block_start+=i,r-=i),r&&(FT(n.strm,n.strm.output,n.strm.next_out,r),n.strm.next_out+=r,n.strm.avail_out-=r,n.strm.total_out+=r)}while(s===0);return a-=n.strm.avail_in,a&&(a>=n.w_size?(n.matches=2,n.window.set(n.strm.input.subarray(n.strm.next_in-n.w_size,n.strm.next_in),0),n.strstart=n.w_size,n.insert=n.strstart):(n.window_size-n.strstart<=a&&(n.strstart-=n.w_size,n.window.set(n.window.subarray(n.w_size,n.w_size+n.strstart),0),n.matches<2&&n.matches++,n.insert>n.strstart&&(n.insert=n.strstart)),n.window.set(n.strm.input.subarray(n.strm.next_in-a,n.strm.next_in),n.strstart),n.strstart+=a,n.insert+=a>n.w_size-n.insert?n.w_size-n.insert:a),n.block_start=n.strstart),n.high_water<n.strstart&&(n.high_water=n.strstart),s?Cp:e!==Uu&&e!==Ys&&n.strm.avail_in===0&&n.strstart===n.block_start?wp:(o=n.window_size-n.strstart,n.strm.avail_in>o&&n.block_start>=n.w_size&&(n.block_start-=n.w_size,n.strstart-=n.w_size,n.window.set(n.window.subarray(n.w_size,n.w_size+n.strstart),0),n.matches<2&&n.matches++,o+=n.w_size,n.insert>n.strstart&&(n.insert=n.strstart)),o>n.strm.avail_in&&(o=n.strm.avail_in),o&&(FT(n.strm,n.window,n.strstart,o),n.strstart+=o,n.insert+=o>n.w_size-n.insert?n.w_size-n.insert:o),n.high_water<n.strstart&&(n.high_water=n.strstart),o=n.bi_valid+42>>3,o=n.pending_buf_size-o>65535?65535:n.pending_buf_size-o,t=o>n.w_size?n.w_size:o,i=n.strstart-n.block_start,(i>=t||(i||e===Ys)&&e!==Uu&&n.strm.avail_in===0&&i<=o)&&(r=i>o?o:i,s=e===Ys&&n.strm.avail_in===0&&r===i?1:0,PT(n,n.block_start,r,s),n.block_start+=r,ws(n.strm)),s?mh:_o)},bT=(n,e)=>{let t,r;for(;;){if(n.lookahead<_c){if(yp(n),n.lookahead<_c&&e===Uu)return _o;if(n.lookahead===0)break}if(t=0,n.lookahead>=bn&&(n.ins_h=zu(n,n.ins_h,n.window[n.strstart+bn-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),t!==0&&n.strstart-t<=n.w_size-_c&&(n.match_length=j6(n,t)),n.match_length>=bn)if(r=Bu(n,n.strstart-n.match_start,n.match_length-bn),n.lookahead-=n.match_length,n.match_length<=n.max_lazy_match&&n.lookahead>=bn){n.match_length--;do n.strstart++,n.ins_h=zu(n,n.ins_h,n.window[n.strstart+bn-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart;while(--n.match_length!==0);n.strstart++}else n.strstart+=n.match_length,n.match_length=0,n.ins_h=n.window[n.strstart],n.ins_h=zu(n,n.ins_h,n.window[n.strstart+1]);else r=Bu(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++;if(r&&(Cs(n,!1),n.strm.avail_out===0))return _o}return n.insert=n.strstart<bn-1?n.strstart:bn-1,e===Ys?(Cs(n,!0),n.strm.avail_out===0?mh:Cp):n.sym_next&&(Cs(n,!1),n.strm.avail_out===0)?_o:wp},pp=(n,e)=>{let t,r,i;for(;;){if(n.lookahead<_c){if(yp(n),n.lookahead<_c&&e===Uu)return _o;if(n.lookahead===0)break}if(t=0,n.lookahead>=bn&&(n.ins_h=zu(n,n.ins_h,n.window[n.strstart+bn-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),n.prev_length=n.match_length,n.prev_match=n.match_start,n.match_length=bn-1,t!==0&&n.prev_length<n.max_lazy_match&&n.strstart-t<=n.w_size-_c&&(n.match_length=j6(n,t),n.match_length<=5&&(n.strategy===Aee||n.match_length===bn&&n.strstart-n.match_start>4096)&&(n.match_length=bn-1)),n.prev_length>=bn&&n.match_length<=n.prev_length){i=n.strstart+n.lookahead-bn,r=Bu(n,n.strstart-1-n.prev_match,n.prev_length-bn),n.lookahead-=n.prev_length-1,n.prev_length-=2;do++n.strstart<=i&&(n.ins_h=zu(n,n.ins_h,n.window[n.strstart+bn-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart);while(--n.prev_length!==0);if(n.match_available=0,n.match_length=bn-1,n.strstart++,r&&(Cs(n,!1),n.strm.avail_out===0))return _o}else if(n.match_available){if(r=Bu(n,0,n.window[n.strstart-1]),r&&Cs(n,!1),n.strstart++,n.lookahead--,n.strm.avail_out===0)return _o}else n.match_available=1,n.strstart++,n.lookahead--}return n.match_available&&(r=Bu(n,0,n.window[n.strstart-1]),n.match_available=0),n.insert=n.strstart<bn-1?n.strstart:bn-1,e===Ys?(Cs(n,!0),n.strm.avail_out===0?mh:Cp):n.sym_next&&(Cs(n,!1),n.strm.avail_out===0)?_o:wp},Gee=(n,e)=>{let t,r,i,o,s=n.window;for(;;){if(n.lookahead<=ju){if(yp(n),n.lookahead<=ju&&e===Uu)return _o;if(n.lookahead===0)break}if(n.match_length=0,n.lookahead>=bn&&n.strstart>0&&(i=n.strstart-1,r=s[i],r===s[++i]&&r===s[++i]&&r===s[++i])){o=n.strstart+ju;do;while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<o);n.match_length=ju-(o-i),n.match_length>n.lookahead&&(n.match_length=n.lookahead)}if(n.match_length>=bn?(t=Bu(n,1,n.match_length-bn),n.lookahead-=n.match_length,n.strstart+=n.match_length,n.match_length=0):(t=Bu(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++),t&&(Cs(n,!1),n.strm.avail_out===0))return _o}return n.insert=0,e===Ys?(Cs(n,!0),n.strm.avail_out===0?mh:Cp):n.sym_next&&(Cs(n,!1),n.strm.avail_out===0)?_o:wp},Kee=(n,e)=>{let t;for(;;){if(n.lookahead===0&&(yp(n),n.lookahead===0)){if(e===Uu)return _o;break}if(n.match_length=0,t=Bu(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++,t&&(Cs(n,!1),n.strm.avail_out===0))return _o}return n.insert=0,e===Ys?(Cs(n,!0),n.strm.avail_out===0?mh:Cp):n.sym_next&&(Cs(n,!1),n.strm.avail_out===0)?_o:wp};function gc(n,e,t,r,i){this.good_length=n,this.max_lazy=e,this.nice_length=t,this.max_chain=r,this.func=i}var v0=[new gc(0,0,0,0,B6),new gc(4,4,8,4,bT),new gc(4,5,16,8,bT),new gc(4,6,32,32,bT),new gc(4,4,16,16,pp),new gc(8,16,32,32,pp),new gc(8,16,128,128,pp),new gc(8,32,128,256,pp),new gc(32,128,258,1024,pp),new gc(32,258,258,4096,pp)],Yee=n=>{n.window_size=2*n.w_size,Vu(n.head),n.max_lazy_match=v0[n.level].max_lazy,n.good_match=v0[n.level].good_length,n.nice_match=v0[n.level].nice_length,n.max_chain_length=v0[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=bn-1,n.match_available=0,n.ins_h=0};function Qee(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=$b,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Uee*2),this.dyn_dtree=new Uint16Array((2*jee+1)*2),this.bl_tree=new Uint16Array((2*Bee+1)*2),Vu(this.dyn_ltree),Vu(this.dyn_dtree),Vu(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(zee+1),this.heap=new Uint16Array(2*NT+1),Vu(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*NT+1),Vu(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var M0=n=>{if(!n)return 1;let e=n.state;return!e||e.strm!==n||e.status!==vp&&e.status!==zT&&e.status!==kT&&e.status!==OT&&e.status!==RT&&e.status!==LT&&e.status!==hh&&e.status!==g0?1:0},U6=n=>{if(M0(n))return fh(n,yc);n.total_in=n.total_out=0,n.data_type=kee;let e=n.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap===2?zT:e.wrap?vp:hh,n.adler=e.wrap===2?0:1,e.last_flush=-2,Cee(e),Bi},z6=n=>{let e=U6(n);return e===Bi&&Yee(n.state),e},Zee=(n,e)=>M0(n)||n.state.wrap!==2?yc:(n.state.gzhead=e,Bi),$6=(n,e,t,r,i,o)=>{if(!n)return yc;let s=1;if(e===Tee&&(e=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),i<1||i>Oee||t!==$b||r<8||r>15||e<0||e>9||o<0||o>Pee||r===8&&s!==1)return fh(n,yc);r===8&&(r=9);let a=new Qee;return n.state=a,a.strm=n,a.status=vp,a.wrap=s,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+bn-1)/bn),a.window=new Uint8Array(a.w_size*2),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=(a.lit_bufsize-1)*3,a.level=e,a.strategy=o,a.method=t,z6(n)},Jee=(n,e)=>$6(n,e,$b,Ree,Lee,Nee),Xee=(n,e)=>{if(M0(n)||e>HF||e<0)return n?fh(n,yc):yc;let t=n.state;if(!n.output||n.avail_in!==0&&!n.input||t.status===g0&&e!==Ys)return fh(n,n.avail_out===0?_T:yc);let r=t.last_flush;if(t.last_flush=e,t.pending!==0){if(ws(n),n.avail_out===0)return t.last_flush=-1,Bi}else if(n.avail_in===0&&GF(e)<=GF(r)&&e!==Ys)return fh(n,_T);if(t.status===g0&&n.avail_in!==0)return fh(n,_T);if(t.status===vp&&t.wrap===0&&(t.status=hh),t.status===vp){let i=$b+(t.w_bits-8<<4)<<8,o=-1;if(t.strategy>=Ob||t.level<2?o=0:t.level<6?o=1:t.level===6?o=2:o=3,i|=o<<6,t.strstart!==0&&(i|=$ee),i+=31-i%31,m0(t,i),t.strstart!==0&&(m0(t,n.adler>>>16),m0(t,n.adler&65535)),n.adler=1,t.status=hh,ws(n),t.pending!==0)return t.last_flush=-1,Bi}if(t.status===zT){if(n.adler=0,Pn(t,31),Pn(t,139),Pn(t,8),t.gzhead)Pn(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),Pn(t,t.gzhead.time&255),Pn(t,t.gzhead.time>>8&255),Pn(t,t.gzhead.time>>16&255),Pn(t,t.gzhead.time>>24&255),Pn(t,t.level===9?2:t.strategy>=Ob||t.level<2?4:0),Pn(t,t.gzhead.os&255),t.gzhead.extra&&t.gzhead.extra.length&&(Pn(t,t.gzhead.extra.length&255),Pn(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(n.adler=Ii(n.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=kT;else if(Pn(t,0),Pn(t,0),Pn(t,0),Pn(t,0),Pn(t,0),Pn(t,t.level===9?2:t.strategy>=Ob||t.level<2?4:0),Pn(t,qee),t.status=hh,ws(n),t.pending!==0)return t.last_flush=-1,Bi}if(t.status===kT){if(t.gzhead.extra){let i=t.pending,o=(t.gzhead.extra.length&65535)-t.gzindex;for(;t.pending+o>t.pending_buf_size;){let a=t.pending_buf_size-t.pending;if(t.pending_buf.set(t.gzhead.extra.subarray(t.gzindex,t.gzindex+a),t.pending),t.pending=t.pending_buf_size,t.gzhead.hcrc&&t.pending>i&&(n.adler=Ii(n.adler,t.pending_buf,t.pending-i,i)),t.gzindex+=a,ws(n),t.pending!==0)return t.last_flush=-1,Bi;i=0,o-=a}let s=new Uint8Array(t.gzhead.extra);t.pending_buf.set(s.subarray(t.gzindex,t.gzindex+o),t.pending),t.pending+=o,t.gzhead.hcrc&&t.pending>i&&(n.adler=Ii(n.adler,t.pending_buf,t.pending-i,i)),t.gzindex=0}t.status=OT}if(t.status===OT){if(t.gzhead.name){let i=t.pending,o;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>i&&(n.adler=Ii(n.adler,t.pending_buf,t.pending-i,i)),ws(n),t.pending!==0)return t.last_flush=-1,Bi;i=0}t.gzindex<t.gzhead.name.length?o=t.gzhead.name.charCodeAt(t.gzindex++)&255:o=0,Pn(t,o)}while(o!==0);t.gzhead.hcrc&&t.pending>i&&(n.adler=Ii(n.adler,t.pending_buf,t.pending-i,i)),t.gzindex=0}t.status=RT}if(t.status===RT){if(t.gzhead.comment){let i=t.pending,o;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>i&&(n.adler=Ii(n.adler,t.pending_buf,t.pending-i,i)),ws(n),t.pending!==0)return t.last_flush=-1,Bi;i=0}t.gzindex<t.gzhead.comment.length?o=t.gzhead.comment.charCodeAt(t.gzindex++)&255:o=0,Pn(t,o)}while(o!==0);t.gzhead.hcrc&&t.pending>i&&(n.adler=Ii(n.adler,t.pending_buf,t.pending-i,i))}t.status=LT}if(t.status===LT){if(t.gzhead.hcrc){if(t.pending+2>t.pending_buf_size&&(ws(n),t.pending!==0))return t.last_flush=-1,Bi;Pn(t,n.adler&255),Pn(t,n.adler>>8&255),n.adler=0}if(t.status=hh,ws(n),t.pending!==0)return t.last_flush=-1,Bi}if(n.avail_in!==0||t.lookahead!==0||e!==Uu&&t.status!==g0){let i=t.level===0?B6(t,e):t.strategy===Ob?Kee(t,e):t.strategy===Mee?Gee(t,e):v0[t.level].func(t,e);if((i===mh||i===Cp)&&(t.status=g0),i===_o||i===mh)return n.avail_out===0&&(t.last_flush=-1),Bi;if(i===wp&&(e===xee?Iee(t):e!==HF&&(PT(t,0,0,!1),e===See&&(Vu(t.head),t.lookahead===0&&(t.strstart=0,t.block_start=0,t.insert=0))),ws(n),n.avail_out===0))return t.last_flush=-1,Bi}return e!==Ys?Bi:t.wrap<=0?WF:(t.wrap===2?(Pn(t,n.adler&255),Pn(t,n.adler>>8&255),Pn(t,n.adler>>16&255),Pn(t,n.adler>>24&255),Pn(t,n.total_in&255),Pn(t,n.total_in>>8&255),Pn(t,n.total_in>>16&255),Pn(t,n.total_in>>24&255)):(m0(t,n.adler>>>16),m0(t,n.adler&65535)),ws(n),t.wrap>0&&(t.wrap=-t.wrap),t.pending!==0?Bi:WF)},ete=n=>{if(M0(n))return yc;let e=n.state.status;return n.state=null,e===hh?fh(n,Dee):Bi},tte=(n,e)=>{let t=e.length;if(M0(n))return yc;let r=n.state,i=r.wrap;if(i===2||i===1&&r.status!==vp||r.lookahead)return yc;if(i===1&&(n.adler=x0(n.adler,e,t,0)),r.wrap=0,t>=r.w_size){i===0&&(Vu(r.head),r.strstart=0,r.block_start=0,r.insert=0);let c=new Uint8Array(r.w_size);c.set(e.subarray(t-r.w_size,t),0),e=c,t=r.w_size}let o=n.avail_in,s=n.next_in,a=n.input;for(n.avail_in=t,n.next_in=0,n.input=e,yp(r);r.lookahead>=bn;){let c=r.strstart,l=r.lookahead-(bn-1);do r.ins_h=zu(r,r.ins_h,r.window[c+bn-1]),r.prev[c&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=c,c++;while(--l);r.strstart=c,r.lookahead=bn-1,yp(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=bn-1,r.match_available=0,n.next_in=s,n.input=a,n.avail_in=o,r.wrap=i,Bi},nte=Jee,rte=$6,ite=z6,ote=U6,ste=Zee,ate=Xee,cte=ete,lte=tte,ute="pako deflate (from Nodeca project)",_0={deflateInit:nte,deflateInit2:rte,deflateReset:ite,deflateResetKeep:ote,deflateSetHeader:ste,deflate:ate,deflateEnd:cte,deflateSetDictionary:lte,deflateInfo:ute},dte=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),hte=function(n){let e=Array.prototype.slice.call(arguments,1);for(;e.length;){let t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(let r in t)dte(t,r)&&(n[r]=t[r])}}return n},fte=n=>{let e=0;for(let r=0,i=n.length;r<i;r++)e+=n[r].length;let t=new Uint8Array(e);for(let r=0,i=0,o=n.length;r<o;r++){let s=n[r];t.set(s,i),i+=s.length}return t},qb={assign:hte,flattenChunks:fte},q6=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{q6=!1}var S0=new Uint8Array(256);for(let n=0;n<256;n++)S0[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;S0[254]=S0[254]=1;var pte=n=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(n);let e,t,r,i,o,s=n.length,a=0;for(i=0;i<s;i++)t=n.charCodeAt(i),(t&64512)===55296&&i+1<s&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),a+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(a),o=0,i=0;o<a;i++)t=n.charCodeAt(i),(t&64512)===55296&&i+1<s&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),t<128?e[o++]=t:t<2048?(e[o++]=192|t>>>6,e[o++]=128|t&63):t<65536?(e[o++]=224|t>>>12,e[o++]=128|t>>>6&63,e[o++]=128|t&63):(e[o++]=240|t>>>18,e[o++]=128|t>>>12&63,e[o++]=128|t>>>6&63,e[o++]=128|t&63);return e},mte=(n,e)=>{if(e<65534&&n.subarray&&q6)return String.fromCharCode.apply(null,n.length===e?n:n.subarray(0,e));let t="";for(let r=0;r<e;r++)t+=String.fromCharCode(n[r]);return t},gte=(n,e)=>{let t=e||n.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,e));let r,i,o=new Array(t*2);for(i=0,r=0;r<t;){let s=n[r++];if(s<128){o[i++]=s;continue}let a=S0[s];if(a>4){o[i++]=65533,r+=a-1;continue}for(s&=a===2?31:a===3?15:7;a>1&&r<t;)s=s<<6|n[r++]&63,a--;if(a>1){o[i++]=65533;continue}s<65536?o[i++]=s:(s-=65536,o[i++]=55296|s>>10&1023,o[i++]=56320|s&1023)}return mte(o,i)},vte=(n,e)=>{e=e||n.length,e>n.length&&(e=n.length);let t=e-1;for(;t>=0&&(n[t]&192)===128;)t--;return t<0||t===0?e:t+S0[n[t]]>e?t:e},D0={string2buf:pte,buf2string:gte,utf8border:vte};function yte(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var H6=yte,W6=Object.prototype.toString,{Z_NO_FLUSH:_te,Z_SYNC_FLUSH:bte,Z_FULL_FLUSH:wte,Z_FINISH:Cte,Z_OK:Ub,Z_STREAM_END:Ete,Z_DEFAULT_COMPRESSION:Ite,Z_DEFAULT_STRATEGY:xte,Z_DEFLATED:Ste}=bp;function P0(n){this.options=qb.assign({level:Ite,method:Ste,chunkSize:16384,windowBits:15,memLevel:8,strategy:xte},n||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new H6,this.strm.avail_out=0;let t=_0.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(t!==Ub)throw new Error(ph[t]);if(e.header&&_0.deflateSetHeader(this.strm,e.header),e.dictionary){let r;if(typeof e.dictionary=="string"?r=D0.string2buf(e.dictionary):W6.call(e.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(e.dictionary):r=e.dictionary,t=_0.deflateSetDictionary(this.strm,r),t!==Ub)throw new Error(ph[t]);this._dict_set=!0}}P0.prototype.push=function(n,e){let t=this.strm,r=this.options.chunkSize,i,o;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?Cte:_te,typeof n=="string"?t.input=D0.string2buf(n):W6.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){if(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),(o===bte||o===wte)&&t.avail_out<=6){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(i=_0.deflate(t,o),i===Ete)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),i=_0.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===Ub;if(t.avail_out===0){this.onData(t.output);continue}if(o>0&&t.next_out>0){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(t.avail_in===0)break}return!0};P0.prototype.onData=function(n){this.chunks.push(n)};P0.prototype.onEnd=function(n){n===Ub&&(this.result=qb.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function $T(n,e){let t=new P0(e);if(t.push(n,!0),t.err)throw t.msg||ph[t.err];return t.result}function Dte(n,e){return e=e||{},e.raw=!0,$T(n,e)}function Tte(n,e){return e=e||{},e.gzip=!0,$T(n,e)}var Ate=P0,Mte=$T,Pte=Dte,Nte=Tte,kte=bp,Ote={Deflate:Ate,deflate:Mte,deflateRaw:Pte,gzip:Nte,constants:kte},Rb=16209,Rte=16191,Lte=function(e,t){let r,i,o,s,a,c,l,u,m,_,p,D,k,L,R,X,ee,J,_e,Ce,H,N,T,U,x=e.state;r=e.next_in,T=e.input,i=r+(e.avail_in-5),o=e.next_out,U=e.output,s=o-(t-e.avail_out),a=o+(e.avail_out-257),c=x.dmax,l=x.wsize,u=x.whave,m=x.wnext,_=x.window,p=x.hold,D=x.bits,k=x.lencode,L=x.distcode,R=(1<<x.lenbits)-1,X=(1<<x.distbits)-1;e:do{D<15&&(p+=T[r++]<<D,D+=8,p+=T[r++]<<D,D+=8),ee=k[p&R];t:for(;;){if(J=ee>>>24,p>>>=J,D-=J,J=ee>>>16&255,J===0)U[o++]=ee&65535;else if(J&16){_e=ee&65535,J&=15,J&&(D<J&&(p+=T[r++]<<D,D+=8),_e+=p&(1<<J)-1,p>>>=J,D-=J),D<15&&(p+=T[r++]<<D,D+=8,p+=T[r++]<<D,D+=8),ee=L[p&X];n:for(;;){if(J=ee>>>24,p>>>=J,D-=J,J=ee>>>16&255,J&16){if(Ce=ee&65535,J&=15,D<J&&(p+=T[r++]<<D,D+=8,D<J&&(p+=T[r++]<<D,D+=8)),Ce+=p&(1<<J)-1,Ce>c){e.msg="invalid distance too far back",x.mode=Rb;break e}if(p>>>=J,D-=J,J=o-s,Ce>J){if(J=Ce-J,J>u&&x.sane){e.msg="invalid distance too far back",x.mode=Rb;break e}if(H=0,N=_,m===0){if(H+=l-J,J<_e){_e-=J;do U[o++]=_[H++];while(--J);H=o-Ce,N=U}}else if(m<J){if(H+=l+m-J,J-=m,J<_e){_e-=J;do U[o++]=_[H++];while(--J);if(H=0,m<_e){J=m,_e-=J;do U[o++]=_[H++];while(--J);H=o-Ce,N=U}}}else if(H+=m-J,J<_e){_e-=J;do U[o++]=_[H++];while(--J);H=o-Ce,N=U}for(;_e>2;)U[o++]=N[H++],U[o++]=N[H++],U[o++]=N[H++],_e-=3;_e&&(U[o++]=N[H++],_e>1&&(U[o++]=N[H++]))}else{H=o-Ce;do U[o++]=U[H++],U[o++]=U[H++],U[o++]=U[H++],_e-=3;while(_e>2);_e&&(U[o++]=U[H++],_e>1&&(U[o++]=U[H++]))}}else if((J&64)===0){ee=L[(ee&65535)+(p&(1<<J)-1)];continue n}else{e.msg="invalid distance code",x.mode=Rb;break e}break}}else if((J&64)===0){ee=k[(ee&65535)+(p&(1<<J)-1)];continue t}else if(J&32){x.mode=Rte;break e}else{e.msg="invalid literal/length code",x.mode=Rb;break e}break}}while(r<i&&o<a);_e=D>>3,r-=_e,D-=_e<<3,p&=(1<<D)-1,e.next_in=r,e.next_out=o,e.avail_in=r<i?5+(i-r):5-(r-i),e.avail_out=o<a?257+(a-o):257-(o-a),x.hold=p,x.bits=D},mp=15,KF=852,YF=592,QF=0,wT=1,ZF=2,Fte=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Vte=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),jte=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Bte=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Ute=(n,e,t,r,i,o,s,a)=>{let c=a.bits,l=0,u=0,m=0,_=0,p=0,D=0,k=0,L=0,R=0,X=0,ee,J,_e,Ce,H,N=null,T,U=new Uint16Array(mp+1),x=new Uint16Array(mp+1),A=null,M,ne,be;for(l=0;l<=mp;l++)U[l]=0;for(u=0;u<r;u++)U[e[t+u]]++;for(p=c,_=mp;_>=1&&U[_]===0;_--);if(p>_&&(p=_),_===0)return i[o++]=1<<24|64<<16|0,i[o++]=1<<24|64<<16|0,a.bits=1,0;for(m=1;m<_&&U[m]===0;m++);for(p<m&&(p=m),L=1,l=1;l<=mp;l++)if(L<<=1,L-=U[l],L<0)return-1;if(L>0&&(n===QF||_!==1))return-1;for(x[1]=0,l=1;l<mp;l++)x[l+1]=x[l]+U[l];for(u=0;u<r;u++)e[t+u]!==0&&(s[x[e[t+u]]++]=u);if(n===QF?(N=A=s,T=20):n===wT?(N=Fte,A=Vte,T=257):(N=jte,A=Bte,T=0),X=0,u=0,l=m,H=o,D=p,k=0,_e=-1,R=1<<p,Ce=R-1,n===wT&&R>KF||n===ZF&&R>YF)return 1;for(;;){M=l-k,s[u]+1<T?(ne=0,be=s[u]):s[u]>=T?(ne=A[s[u]-T],be=N[s[u]-T]):(ne=96,be=0),ee=1<<l-k,J=1<<D,m=J;do J-=ee,i[H+(X>>k)+J]=M<<24|ne<<16|be|0;while(J!==0);for(ee=1<<l-1;X&ee;)ee>>=1;if(ee!==0?(X&=ee-1,X+=ee):X=0,u++,--U[l]===0){if(l===_)break;l=e[t+s[u]]}if(l>p&&(X&Ce)!==_e){for(k===0&&(k=p),H+=m,D=l-k,L=1<<D;D+k<_&&(L-=U[D+k],!(L<=0));)D++,L<<=1;if(R+=1<<D,n===wT&&R>KF||n===ZF&&R>YF)return 1;_e=X&Ce,i[_e]=p<<24|D<<16|H-o|0}}return X!==0&&(i[H+X]=l-k<<24|64<<16|0),a.bits=p,0},b0=Ute,zte=0,G6=1,K6=2,{Z_FINISH:JF,Z_BLOCK:$te,Z_TREES:Lb,Z_OK:gh,Z_STREAM_END:qte,Z_NEED_DICT:Hte,Z_STREAM_ERROR:Qs,Z_DATA_ERROR:Y6,Z_MEM_ERROR:Q6,Z_BUF_ERROR:Wte,Z_DEFLATED:XF}=bp,Hb=16180,e6=16181,t6=16182,n6=16183,r6=16184,i6=16185,o6=16186,s6=16187,a6=16188,c6=16189,zb=16190,yl=16191,CT=16192,l6=16193,ET=16194,u6=16195,d6=16196,h6=16197,f6=16198,Fb=16199,Vb=16200,p6=16201,m6=16202,g6=16203,v6=16204,y6=16205,IT=16206,_6=16207,b6=16208,vr=16209,Z6=16210,J6=16211,Gte=852,Kte=592,Yte=15,Qte=Yte,w6=n=>(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24);function Zte(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var vh=n=>{if(!n)return 1;let e=n.state;return!e||e.strm!==n||e.mode<Hb||e.mode>J6?1:0},X6=n=>{if(vh(n))return Qs;let e=n.state;return n.total_in=n.total_out=e.total=0,n.msg="",e.wrap&&(n.adler=e.wrap&1),e.mode=Hb,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(Gte),e.distcode=e.distdyn=new Int32Array(Kte),e.sane=1,e.back=-1,gh},e8=n=>{if(vh(n))return Qs;let e=n.state;return e.wsize=0,e.whave=0,e.wnext=0,X6(n)},t8=(n,e)=>{let t;if(vh(n))return Qs;let r=n.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Qs:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=t,r.wbits=e,e8(n))},n8=(n,e)=>{if(!n)return Qs;let t=new Zte;n.state=t,t.strm=n,t.window=null,t.mode=Hb;let r=t8(n,e);return r!==gh&&(n.state=null),r},Jte=n=>n8(n,Qte),C6=!0,xT,ST,Xte=n=>{if(C6){xT=new Int32Array(512),ST=new Int32Array(32);let e=0;for(;e<144;)n.lens[e++]=8;for(;e<256;)n.lens[e++]=9;for(;e<280;)n.lens[e++]=7;for(;e<288;)n.lens[e++]=8;for(b0(G6,n.lens,0,288,xT,0,n.work,{bits:9}),e=0;e<32;)n.lens[e++]=5;b0(K6,n.lens,0,32,ST,0,n.work,{bits:5}),C6=!1}n.lencode=xT,n.lenbits=9,n.distcode=ST,n.distbits=5},r8=(n,e,t,r)=>{let i,o=n.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),r>=o.wsize?(o.window.set(e.subarray(t-o.wsize,t),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>r&&(i=r),o.window.set(e.subarray(t-r,t-r+i),o.wnext),r-=i,r?(o.window.set(e.subarray(t-r,t),0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0},ene=(n,e)=>{let t,r,i,o,s,a,c,l,u,m,_,p,D,k,L=0,R,X,ee,J,_e,Ce,H,N,T=new Uint8Array(4),U,x,A=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(vh(n)||!n.output||!n.input&&n.avail_in!==0)return Qs;t=n.state,t.mode===yl&&(t.mode=CT),s=n.next_out,i=n.output,c=n.avail_out,o=n.next_in,r=n.input,a=n.avail_in,l=t.hold,u=t.bits,m=a,_=c,N=gh;e:for(;;)switch(t.mode){case Hb:if(t.wrap===0){t.mode=CT;break}for(;u<16;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(t.wrap&2&&l===35615){t.wbits===0&&(t.wbits=15),t.check=0,T[0]=l&255,T[1]=l>>>8&255,t.check=Ii(t.check,T,2,0),l=0,u=0,t.mode=e6;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((l&255)<<8)+(l>>8))%31){n.msg="incorrect header check",t.mode=vr;break}if((l&15)!==XF){n.msg="unknown compression method",t.mode=vr;break}if(l>>>=4,u-=4,H=(l&15)+8,t.wbits===0&&(t.wbits=H),H>15||H>t.wbits){n.msg="invalid window size",t.mode=vr;break}t.dmax=1<<t.wbits,t.flags=0,n.adler=t.check=1,t.mode=l&512?c6:yl,l=0,u=0;break;case e6:for(;u<16;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(t.flags=l,(t.flags&255)!==XF){n.msg="unknown compression method",t.mode=vr;break}if(t.flags&57344){n.msg="unknown header flags set",t.mode=vr;break}t.head&&(t.head.text=l>>8&1),t.flags&512&&t.wrap&4&&(T[0]=l&255,T[1]=l>>>8&255,t.check=Ii(t.check,T,2,0)),l=0,u=0,t.mode=t6;case t6:for(;u<32;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.head&&(t.head.time=l),t.flags&512&&t.wrap&4&&(T[0]=l&255,T[1]=l>>>8&255,T[2]=l>>>16&255,T[3]=l>>>24&255,t.check=Ii(t.check,T,4,0)),l=0,u=0,t.mode=n6;case n6:for(;u<16;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.head&&(t.head.xflags=l&255,t.head.os=l>>8),t.flags&512&&t.wrap&4&&(T[0]=l&255,T[1]=l>>>8&255,t.check=Ii(t.check,T,2,0)),l=0,u=0,t.mode=r6;case r6:if(t.flags&1024){for(;u<16;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.length=l,t.head&&(t.head.extra_len=l),t.flags&512&&t.wrap&4&&(T[0]=l&255,T[1]=l>>>8&255,t.check=Ii(t.check,T,2,0)),l=0,u=0}else t.head&&(t.head.extra=null);t.mode=i6;case i6:if(t.flags&1024&&(p=t.length,p>a&&(p=a),p&&(t.head&&(H=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(r.subarray(o,o+p),H)),t.flags&512&&t.wrap&4&&(t.check=Ii(t.check,r,p,o)),a-=p,o+=p,t.length-=p),t.length))break e;t.length=0,t.mode=o6;case o6:if(t.flags&2048){if(a===0)break e;p=0;do H=r[o+p++],t.head&&H&&t.length<65536&&(t.head.name+=String.fromCharCode(H));while(H&&p<a);if(t.flags&512&&t.wrap&4&&(t.check=Ii(t.check,r,p,o)),a-=p,o+=p,H)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=s6;case s6:if(t.flags&4096){if(a===0)break e;p=0;do H=r[o+p++],t.head&&H&&t.length<65536&&(t.head.comment+=String.fromCharCode(H));while(H&&p<a);if(t.flags&512&&t.wrap&4&&(t.check=Ii(t.check,r,p,o)),a-=p,o+=p,H)break e}else t.head&&(t.head.comment=null);t.mode=a6;case a6:if(t.flags&512){for(;u<16;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(t.wrap&4&&l!==(t.check&65535)){n.msg="header crc mismatch",t.mode=vr;break}l=0,u=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),n.adler=t.check=0,t.mode=yl;break;case c6:for(;u<32;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}n.adler=t.check=w6(l),l=0,u=0,t.mode=zb;case zb:if(t.havedict===0)return n.next_out=s,n.avail_out=c,n.next_in=o,n.avail_in=a,t.hold=l,t.bits=u,Hte;n.adler=t.check=1,t.mode=yl;case yl:if(e===$te||e===Lb)break e;case CT:if(t.last){l>>>=u&7,u-=u&7,t.mode=IT;break}for(;u<3;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}switch(t.last=l&1,l>>>=1,u-=1,l&3){case 0:t.mode=l6;break;case 1:if(Xte(t),t.mode=Fb,e===Lb){l>>>=2,u-=2;break e}break;case 2:t.mode=d6;break;case 3:n.msg="invalid block type",t.mode=vr}l>>>=2,u-=2;break;case l6:for(l>>>=u&7,u-=u&7;u<32;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if((l&65535)!==(l>>>16^65535)){n.msg="invalid stored block lengths",t.mode=vr;break}if(t.length=l&65535,l=0,u=0,t.mode=ET,e===Lb)break e;case ET:t.mode=u6;case u6:if(p=t.length,p){if(p>a&&(p=a),p>c&&(p=c),p===0)break e;i.set(r.subarray(o,o+p),s),a-=p,o+=p,c-=p,s+=p,t.length-=p;break}t.mode=yl;break;case d6:for(;u<14;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(t.nlen=(l&31)+257,l>>>=5,u-=5,t.ndist=(l&31)+1,l>>>=5,u-=5,t.ncode=(l&15)+4,l>>>=4,u-=4,t.nlen>286||t.ndist>30){n.msg="too many length or distance symbols",t.mode=vr;break}t.have=0,t.mode=h6;case h6:for(;t.have<t.ncode;){for(;u<3;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.lens[A[t.have++]]=l&7,l>>>=3,u-=3}for(;t.have<19;)t.lens[A[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,U={bits:t.lenbits},N=b0(zte,t.lens,0,19,t.lencode,0,t.work,U),t.lenbits=U.bits,N){n.msg="invalid code lengths set",t.mode=vr;break}t.have=0,t.mode=f6;case f6:for(;t.have<t.nlen+t.ndist;){for(;L=t.lencode[l&(1<<t.lenbits)-1],R=L>>>24,X=L>>>16&255,ee=L&65535,!(R<=u);){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(ee<16)l>>>=R,u-=R,t.lens[t.have++]=ee;else{if(ee===16){for(x=R+2;u<x;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(l>>>=R,u-=R,t.have===0){n.msg="invalid bit length repeat",t.mode=vr;break}H=t.lens[t.have-1],p=3+(l&3),l>>>=2,u-=2}else if(ee===17){for(x=R+3;u<x;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}l>>>=R,u-=R,H=0,p=3+(l&7),l>>>=3,u-=3}else{for(x=R+7;u<x;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}l>>>=R,u-=R,H=0,p=11+(l&127),l>>>=7,u-=7}if(t.have+p>t.nlen+t.ndist){n.msg="invalid bit length repeat",t.mode=vr;break}for(;p--;)t.lens[t.have++]=H}}if(t.mode===vr)break;if(t.lens[256]===0){n.msg="invalid code -- missing end-of-block",t.mode=vr;break}if(t.lenbits=9,U={bits:t.lenbits},N=b0(G6,t.lens,0,t.nlen,t.lencode,0,t.work,U),t.lenbits=U.bits,N){n.msg="invalid literal/lengths set",t.mode=vr;break}if(t.distbits=6,t.distcode=t.distdyn,U={bits:t.distbits},N=b0(K6,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,U),t.distbits=U.bits,N){n.msg="invalid distances set",t.mode=vr;break}if(t.mode=Fb,e===Lb)break e;case Fb:t.mode=Vb;case Vb:if(a>=6&&c>=258){n.next_out=s,n.avail_out=c,n.next_in=o,n.avail_in=a,t.hold=l,t.bits=u,Lte(n,_),s=n.next_out,i=n.output,c=n.avail_out,o=n.next_in,r=n.input,a=n.avail_in,l=t.hold,u=t.bits,t.mode===yl&&(t.back=-1);break}for(t.back=0;L=t.lencode[l&(1<<t.lenbits)-1],R=L>>>24,X=L>>>16&255,ee=L&65535,!(R<=u);){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(X&&(X&240)===0){for(J=R,_e=X,Ce=ee;L=t.lencode[Ce+((l&(1<<J+_e)-1)>>J)],R=L>>>24,X=L>>>16&255,ee=L&65535,!(J+R<=u);){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}l>>>=J,u-=J,t.back+=J}if(l>>>=R,u-=R,t.back+=R,t.length=ee,X===0){t.mode=y6;break}if(X&32){t.back=-1,t.mode=yl;break}if(X&64){n.msg="invalid literal/length code",t.mode=vr;break}t.extra=X&15,t.mode=p6;case p6:if(t.extra){for(x=t.extra;u<x;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.length+=l&(1<<t.extra)-1,l>>>=t.extra,u-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=m6;case m6:for(;L=t.distcode[l&(1<<t.distbits)-1],R=L>>>24,X=L>>>16&255,ee=L&65535,!(R<=u);){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if((X&240)===0){for(J=R,_e=X,Ce=ee;L=t.distcode[Ce+((l&(1<<J+_e)-1)>>J)],R=L>>>24,X=L>>>16&255,ee=L&65535,!(J+R<=u);){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}l>>>=J,u-=J,t.back+=J}if(l>>>=R,u-=R,t.back+=R,X&64){n.msg="invalid distance code",t.mode=vr;break}t.offset=ee,t.extra=X&15,t.mode=g6;case g6:if(t.extra){for(x=t.extra;u<x;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.offset+=l&(1<<t.extra)-1,l>>>=t.extra,u-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){n.msg="invalid distance too far back",t.mode=vr;break}t.mode=v6;case v6:if(c===0)break e;if(p=_-c,t.offset>p){if(p=t.offset-p,p>t.whave&&t.sane){n.msg="invalid distance too far back",t.mode=vr;break}p>t.wnext?(p-=t.wnext,D=t.wsize-p):D=t.wnext-p,p>t.length&&(p=t.length),k=t.window}else k=i,D=s-t.offset,p=t.length;p>c&&(p=c),c-=p,t.length-=p;do i[s++]=k[D++];while(--p);t.length===0&&(t.mode=Vb);break;case y6:if(c===0)break e;i[s++]=t.length,c--,t.mode=Vb;break;case IT:if(t.wrap){for(;u<32;){if(a===0)break e;a--,l|=r[o++]<<u,u+=8}if(_-=c,n.total_out+=_,t.total+=_,t.wrap&4&&_&&(n.adler=t.check=t.flags?Ii(t.check,i,_,s-_):x0(t.check,i,_,s-_)),_=c,t.wrap&4&&(t.flags?l:w6(l))!==t.check){n.msg="incorrect data check",t.mode=vr;break}l=0,u=0}t.mode=_6;case _6:if(t.wrap&&t.flags){for(;u<32;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(t.wrap&4&&l!==(t.total&4294967295)){n.msg="incorrect length check",t.mode=vr;break}l=0,u=0}t.mode=b6;case b6:N=qte;break e;case vr:N=Y6;break e;case Z6:return Q6;case J6:default:return Qs}return n.next_out=s,n.avail_out=c,n.next_in=o,n.avail_in=a,t.hold=l,t.bits=u,(t.wsize||_!==n.avail_out&&t.mode<vr&&(t.mode<IT||e!==JF))&&r8(n,n.output,n.next_out,_-n.avail_out),m-=n.avail_in,_-=n.avail_out,n.total_in+=m,n.total_out+=_,t.total+=_,t.wrap&4&&_&&(n.adler=t.check=t.flags?Ii(t.check,i,_,n.next_out-_):x0(t.check,i,_,n.next_out-_)),n.data_type=t.bits+(t.last?64:0)+(t.mode===yl?128:0)+(t.mode===Fb||t.mode===ET?256:0),(m===0&&_===0||e===JF)&&N===gh&&(N=Wte),N},tne=n=>{if(vh(n))return Qs;let e=n.state;return e.window&&(e.window=null),n.state=null,gh},nne=(n,e)=>{if(vh(n))return Qs;let t=n.state;return(t.wrap&2)===0?Qs:(t.head=e,e.done=!1,gh)},rne=(n,e)=>{let t=e.length,r,i,o;return vh(n)||(r=n.state,r.wrap!==0&&r.mode!==zb)?Qs:r.mode===zb&&(i=1,i=x0(i,e,t,0),i!==r.check)?Y6:(o=r8(n,e,t,t),o?(r.mode=Z6,Q6):(r.havedict=1,gh))},ine=e8,one=t8,sne=X6,ane=Jte,cne=n8,lne=ene,une=tne,dne=nne,hne=rne,fne="pako inflate (from Nodeca project)",bl={inflateReset:ine,inflateReset2:one,inflateResetKeep:sne,inflateInit:ane,inflateInit2:cne,inflate:lne,inflateEnd:une,inflateGetHeader:dne,inflateSetDictionary:hne,inflateInfo:fne};function pne(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var mne=pne,i8=Object.prototype.toString,{Z_NO_FLUSH:gne,Z_FINISH:vne,Z_OK:T0,Z_STREAM_END:DT,Z_NEED_DICT:TT,Z_STREAM_ERROR:yne,Z_DATA_ERROR:E6,Z_MEM_ERROR:_ne}=bp;function N0(n){this.options=qb.assign({chunkSize:1024*64,windowBits:15,to:""},n||{});let e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(n&&n.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new H6,this.strm.avail_out=0;let t=bl.inflateInit2(this.strm,e.windowBits);if(t!==T0)throw new Error(ph[t]);if(this.header=new mne,bl.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=D0.string2buf(e.dictionary):i8.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=bl.inflateSetDictionary(this.strm,e.dictionary),t!==T0)))throw new Error(ph[t])}N0.prototype.push=function(n,e){let t=this.strm,r=this.options.chunkSize,i=this.options.dictionary,o,s,a;if(this.ended)return!1;for(e===~~e?s=e:s=e===!0?vne:gne,i8.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),o=bl.inflate(t,s),o===TT&&i&&(o=bl.inflateSetDictionary(t,i),o===T0?o=bl.inflate(t,s):o===E6&&(o=TT));t.avail_in>0&&o===DT&&t.state.wrap>0&&n[t.next_in]!==0;)bl.inflateReset(t),o=bl.inflate(t,s);switch(o){case yne:case E6:case TT:case _ne:return this.onEnd(o),this.ended=!0,!1}if(a=t.avail_out,t.next_out&&(t.avail_out===0||o===DT))if(this.options.to==="string"){let c=D0.utf8border(t.output,t.next_out),l=t.next_out-c,u=D0.buf2string(t.output,c);t.next_out=l,t.avail_out=r-l,l&&t.output.set(t.output.subarray(c,c+l),0),this.onData(u)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(o===T0&&a===0)){if(o===DT)return o=bl.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};N0.prototype.onData=function(n){this.chunks.push(n)};N0.prototype.onEnd=function(n){n===T0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=qb.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function qT(n,e){let t=new N0(e);if(t.push(n),t.err)throw t.msg||ph[t.err];return t.result}function bne(n,e){return e=e||{},e.raw=!0,qT(n,e)}var wne=N0,Cne=qT,Ene=bne,Ine=qT,xne=bp,Sne={Inflate:wne,inflate:Cne,inflateRaw:Ene,ungzip:Ine,constants:xne},{Deflate:pxe,deflate:mxe,deflateRaw:gxe,gzip:vxe}=Ote,{Inflate:Dne,inflate:Tne,inflateRaw:yxe,ungzip:_xe}=Sne;var HT=Dne,o8=Tne;var a8=[];for(let n=0;n<256;n++){let e=n;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;a8[n]=e}var s8=4294967295;function Ane(n,e,t){let r=n;for(let i=0;i<t;i++)r=a8[(r^e[i])&255]^r>>>8;return r}function Mne(n,e){return(Ane(s8,n,e)^s8)>>>0}function WT(n,e,t){let r=n.readUint32(),i=Mne(new Uint8Array(n.buffer,n.byteOffset+n.offset-e-4,e),e);if(i!==r)throw new Error(`CRC mismatch for chunk ${t}. Expected ${r}, found ${i}`)}function Wb(n,e,t){for(let r=0;r<t;r++)e[r]=n[r]}function Gb(n,e,t,r){let i=0;for(;i<r;i++)e[i]=n[i];for(;i<t;i++)e[i]=n[i]+e[i-r]&255}function Kb(n,e,t,r){let i=0;if(t.length===0)for(;i<r;i++)e[i]=n[i];else for(;i<r;i++)e[i]=n[i]+t[i]&255}function Yb(n,e,t,r,i){let o=0;if(t.length===0){for(;o<i;o++)e[o]=n[o];for(;o<r;o++)e[o]=n[o]+(e[o-i]>>1)&255}else{for(;o<i;o++)e[o]=n[o]+(t[o]>>1)&255;for(;o<r;o++)e[o]=n[o]+(e[o-i]+t[o]>>1)&255}}function Qb(n,e,t,r,i){let o=0;if(t.length===0){for(;o<i;o++)e[o]=n[o];for(;o<r;o++)e[o]=n[o]+e[o-i]&255}else{for(;o<i;o++)e[o]=n[o]+t[o]&255;for(;o<r;o++)e[o]=n[o]+Pne(e[o-i],t[o],t[o-i])&255}}function Pne(n,e,t){let r=n+e-t,i=Math.abs(r-n),o=Math.abs(r-e),s=Math.abs(r-t);return i<=o&&i<=s?n:o<=s?e:t}function c8(n,e,t,r,i,o){switch(n){case 0:Wb(e,t,i);break;case 1:Gb(e,t,i,o);break;case 2:Kb(e,t,r,i);break;case 3:Yb(e,t,r,i,o);break;case 4:Qb(e,t,r,i,o);break;default:throw new Error(`Unsupported filter: ${n}`)}}var Nne=new Uint16Array([255]),kne=new Uint8Array(Nne.buffer),One=kne[0]===255;function l8(n){let{data:e,width:t,height:r,channels:i,depth:o}=n,s=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],a=Math.ceil(o/8)*i,c=new Uint8Array(r*t*a),l=0;for(let u=0;u<7;u++){let m=s[u],_=Math.ceil((t-m.x)/m.xStep),p=Math.ceil((r-m.y)/m.yStep);if(_<=0||p<=0)continue;let D=_*a,k=new Uint8Array(D);for(let L=0;L<p;L++){let R=e[l++],X=e.subarray(l,l+D);l+=D;let ee=new Uint8Array(D);c8(R,X,ee,k,D,a),k.set(ee);for(let J=0;J<_;J++){let _e=m.x+J*m.xStep,Ce=m.y+L*m.yStep;if(!(_e>=t||Ce>=r))for(let H=0;H<a;H++)c[(Ce*t+_e)*a+H]=ee[J*a+H]}}}if(o===16){let u=new Uint16Array(c.buffer);if(One)for(let m=0;m<u.length;m++)u[m]=Rne(u[m]);return u}else return c}function Rne(n){return(n&255)<<8|n>>8&255}var Lne=new Uint16Array([255]),Fne=new Uint8Array(Lne.buffer),Vne=Fne[0]===255,jne=new Uint8Array(0);function GT(n){let{data:e,width:t,height:r,channels:i,depth:o}=n,s=Math.ceil(o/8)*i,a=Math.ceil(o/8*i*t),c=new Uint8Array(r*a),l=jne,u=0,m,_;for(let p=0;p<r;p++){switch(m=e.subarray(u+1,u+1+a),_=c.subarray(p*a,(p+1)*a),e[u]){case 0:Wb(m,_,a);break;case 1:Gb(m,_,a,s);break;case 2:Kb(m,_,l,a);break;case 3:Yb(m,_,l,a,s);break;case 4:Qb(m,_,l,a,s);break;default:throw new Error(`Unsupported filter: ${e[u]}`)}l=_,u+=a+1}if(o===16){let p=new Uint16Array(c.buffer);if(Vne)for(let D=0;D<p.length;D++)p[D]=Bne(p[D]);return p}else return c}function Bne(n){return(n&255)<<8|n>>8&255}var Zb=Uint8Array.of(137,80,78,71,13,10,26,10);function KT(n){if(!u8(n.readBytes(Zb.length)))throw new Error("wrong PNG signature")}function u8(n){if(n.length<Zb.length)return!1;for(let e=0;e<Zb.length;e++)if(n[e]!==Zb[e])return!1;return!0}var d8="tEXt",zne=0,h8=new TextDecoder("latin1");function $ne(n){if(Hne(n),n.length===0||n.length>79)throw new Error("keyword length must be between 1 and 79")}var qne=/^[\u0000-\u00FF]*$/;function Hne(n){if(!qne.test(n))throw new Error("invalid latin1 text")}function f8(n,e,t){let r=YT(e);n[r]=Wne(e,t-r.length-1)}function YT(n){for(n.mark();n.readByte()!==zne;);let e=n.offset;n.reset();let t=h8.decode(n.readBytes(e-n.offset-1));return n.skip(1),$ne(t),t}function Wne(n,e){return h8.decode(n.readBytes(e))}var bo={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},k0={UNKNOWN:-1,DEFLATE:0},Jb={UNKNOWN:-1,ADAPTIVE:0},O0={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},R0={NONE:0,BACKGROUND:1,PREVIOUS:2},Xb={SOURCE:0,OVER:1};var ew=class extends p0{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,t={}){super(e);let{checkCrc:r=!1}=t;this._checkCrc=r,this._inflator=new HT,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=k0.UNKNOWN,this._filterMethod=Jb.UNKNOWN,this._interlaceMethod=O0.UNKNOWN,this._colorType=bo.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(KT(this);!this._end;){let e=this.readUint32(),t=this.readChars(4);this.decodeChunk(e,t)}return this.decodeImage(),this._png}decodeApng(){for(KT(this);!this._end;){let e=this.readUint32(),t=this.readChars(4);this.decodeApngChunk(e,t)}return this.decodeApngImage(),this._apng}decodeChunk(e,t){let r=this.offset;switch(t){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case d8:f8(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?WT(this,e+4,t):this.skip(4)}decodeApngChunk(e,t){let r=this.offset;switch(t!=="fdAT"&&t!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),t){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,t),this.offset=r+e;break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?WT(this,e+4,t):this.skip(4)}decodeIHDR(){let e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=Gne(this.readUint8());let t=this.readUint8();this._colorType=t;let r;switch(t){case bo.GREYSCALE:r=1;break;case bo.TRUECOLOUR:r=3;break;case bo.INDEXED_COLOUR:r=1;break;case bo.GREYSCALE_ALPHA:r=2;break;case bo.TRUECOLOUR_ALPHA:r=4;break;case bo.UNKNOWN:default:throw new Error(`Unknown color type: ${t}`)}if(this._png.channels=r,this._compressionMethod=this.readUint8(),this._compressionMethod!==k0.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){let e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);let t=e/3;this._hasPalette=!0;let r=[];this._palette=r;for(let i=0;i<t;i++)r.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;let t=e,r=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,r,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let t=e,r=this.offset+this.byteOffset;if(r+=4,t-=4,this._inflator.push(new Uint8Array(this.buffer,r,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case bo.GREYSCALE:case bo.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let t=0;t<e/2;t++)this._transparency[t]=this.readUint16();break}case bo.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let t=0;for(;t<e;t++){let r=this.readByte();this._palette[t].push(r)}for(;t<this._palette.length;t++)this._palette[t].push(255);break}case bo.UNKNOWN:case bo.GREYSCALE_ALPHA:case bo.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){let t=YT(this),r=this.readUint8();if(r!==k0.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${r}`);let i=this.readBytes(e-t.length-2);this._png.iccEmbeddedProfile={name:t,profile:o8(i)}}decodepHYs(){let e=this.readUint32(),t=this.readUint32(),r=this.readByte();this._png.resolution={x:e,y:t,unit:r}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){let t={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},r=this._frames.at(e);if(r){if(r.data=GT({data:r.data,width:r.width,height:r.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||r.xOffset===0&&r.yOffset===0&&r.width===this._png.width&&r.height===this._png.height)t.data=r.data;else{let i=this._apng.frames.at(e-1);this.disposeFrame(r,i,t),this.addFrameDataToCanvas(t,r)}this._apng.frames.push(t)}}return this._apng}disposeFrame(e,t,r){switch(e.disposeOp){case R0.NONE:break;case R0.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let o=0;o<this._png.width;o++){let s=(i*e.width+o)*this._png.channels;for(let a=0;a<this._png.channels;a++)r.data[s+a]=0}break;case R0.PREVIOUS:r.data.set(t.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,t){let r=1<<this._png.depth,i=(o,s)=>{let a=((o+t.yOffset)*this._png.width+t.xOffset+s)*this._png.channels,c=(o*t.width+s)*this._png.channels;return{index:a,frameIndex:c}};switch(t.blendOp){case Xb.SOURCE:for(let o=0;o<t.height;o++)for(let s=0;s<t.width;s++){let{index:a,frameIndex:c}=i(o,s);for(let l=0;l<this._png.channels;l++)e.data[a+l]=t.data[c+l]}break;case Xb.OVER:for(let o=0;o<t.height;o++)for(let s=0;s<t.width;s++){let{index:a,frameIndex:c}=i(o,s);for(let l=0;l<this._png.channels;l++){let u=t.data[c+this._png.channels-1]/r,m=l%(this._png.channels-1)===0?1:t.data[c+l],_=Math.floor(u*m+(1-u)*e.data[a+l]);e.data[a+l]+=_}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);let e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==Jb.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===O0.NO_INTERLACE)this._png.data=GT({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===O0.ADAM7)this._png.data=l8({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){let e=this._inflator.result,t=this._frames.at(-1);t?t.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:R0.NONE,blendOp:Xb.SOURCE,data:e}),this._inflator=new HT,this._writingDataChunks=!1}};function Gne(n){if(n!==1&&n!==2&&n!==4&&n!==8&&n!==16)throw new Error(`invalid bit depth: ${n}`);return n}function p8(n,e){return new ew(n,e).decode()}var zt=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function QT(){zt.console&&typeof zt.console.log=="function"&&zt.console.log.apply(zt.console,arguments)}var Xn={log:QT,warn:function(n){zt.console&&(typeof zt.console.warn=="function"?zt.console.warn.apply(zt.console,arguments):QT.call(null,arguments))},error:function(n){zt.console&&(typeof zt.console.error=="function"?zt.console.error.apply(zt.console,arguments):QT(n))}};function ZT(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){yh(r.response,e,t)},r.onerror=function(){Xn.error("could not download file")},r.send()}function m8(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function tw(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var yh=zt.saveAs||((typeof window>"u"?"undefined":Gn(window))!=="object"||window!==zt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=zt.URL||zt.webkitURL,i=document.createElement("a");e=e||n.name||"download",i.download=e,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin!==location.origin?m8(i.href)?ZT(n,e,t):tw(i,i.target="_blank"):tw(i)):(i.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){tw(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(m8(n))ZT(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){tw(r)})}else navigator.msSaveOrOpenBlob((function(i,o){return o===void 0?o={autoBom:!1}:Gn(o)!=="object"&&(Xn.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i})(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return ZT(n,e,t);var i=n.type==="application/octet-stream",o=/constructor/i.test(zt.HTMLElement)||zt.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||i&&o)&&(typeof FileReader>"u"?"undefined":Gn(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var u=a.result;u=s?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=u:location=u,r=null},a.readAsDataURL(n)}else{var c=zt.URL||zt.webkitURL,l=c.createObjectURL(n);r?r.location=l:location.href=l,r=null,setTimeout(function(){c.revokeObjectURL(l)},4e4)}});function j8(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<t.length;r++){var i=t[r].re,o=t[r].process,s=i.exec(n);s&&(e=o(s),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),c=this.g.toString(16),l=this.b.toString(16);return a.length==1&&(a="0"+a),c.length==1&&(c="0"+c),l.length==1&&(l="0"+l),"#"+a+c+l}}var ow=zt.atob.bind(zt),g8=zt.btoa.bind(zt);function JT(n,e){var t=n[0],r=n[1],i=n[2],o=n[3];t=Ji(t,r,i,o,e[0],7,-680876936),o=Ji(o,t,r,i,e[1],12,-389564586),i=Ji(i,o,t,r,e[2],17,606105819),r=Ji(r,i,o,t,e[3],22,-1044525330),t=Ji(t,r,i,o,e[4],7,-176418897),o=Ji(o,t,r,i,e[5],12,1200080426),i=Ji(i,o,t,r,e[6],17,-1473231341),r=Ji(r,i,o,t,e[7],22,-45705983),t=Ji(t,r,i,o,e[8],7,1770035416),o=Ji(o,t,r,i,e[9],12,-1958414417),i=Ji(i,o,t,r,e[10],17,-42063),r=Ji(r,i,o,t,e[11],22,-1990404162),t=Ji(t,r,i,o,e[12],7,1804603682),o=Ji(o,t,r,i,e[13],12,-40341101),i=Ji(i,o,t,r,e[14],17,-1502002290),t=Xi(t,r=Ji(r,i,o,t,e[15],22,1236535329),i,o,e[1],5,-165796510),o=Xi(o,t,r,i,e[6],9,-1069501632),i=Xi(i,o,t,r,e[11],14,643717713),r=Xi(r,i,o,t,e[0],20,-373897302),t=Xi(t,r,i,o,e[5],5,-701558691),o=Xi(o,t,r,i,e[10],9,38016083),i=Xi(i,o,t,r,e[15],14,-660478335),r=Xi(r,i,o,t,e[4],20,-405537848),t=Xi(t,r,i,o,e[9],5,568446438),o=Xi(o,t,r,i,e[14],9,-1019803690),i=Xi(i,o,t,r,e[3],14,-187363961),r=Xi(r,i,o,t,e[8],20,1163531501),t=Xi(t,r,i,o,e[13],5,-1444681467),o=Xi(o,t,r,i,e[2],9,-51403784),i=Xi(i,o,t,r,e[7],14,1735328473),t=eo(t,r=Xi(r,i,o,t,e[12],20,-1926607734),i,o,e[5],4,-378558),o=eo(o,t,r,i,e[8],11,-2022574463),i=eo(i,o,t,r,e[11],16,1839030562),r=eo(r,i,o,t,e[14],23,-35309556),t=eo(t,r,i,o,e[1],4,-1530992060),o=eo(o,t,r,i,e[4],11,1272893353),i=eo(i,o,t,r,e[7],16,-155497632),r=eo(r,i,o,t,e[10],23,-1094730640),t=eo(t,r,i,o,e[13],4,681279174),o=eo(o,t,r,i,e[0],11,-358537222),i=eo(i,o,t,r,e[3],16,-722521979),r=eo(r,i,o,t,e[6],23,76029189),t=eo(t,r,i,o,e[9],4,-640364487),o=eo(o,t,r,i,e[12],11,-421815835),i=eo(i,o,t,r,e[15],16,530742520),t=to(t,r=eo(r,i,o,t,e[2],23,-995338651),i,o,e[0],6,-198630844),o=to(o,t,r,i,e[7],10,1126891415),i=to(i,o,t,r,e[14],15,-1416354905),r=to(r,i,o,t,e[5],21,-57434055),t=to(t,r,i,o,e[12],6,1700485571),o=to(o,t,r,i,e[3],10,-1894986606),i=to(i,o,t,r,e[10],15,-1051523),r=to(r,i,o,t,e[1],21,-2054922799),t=to(t,r,i,o,e[8],6,1873313359),o=to(o,t,r,i,e[15],10,-30611744),i=to(i,o,t,r,e[6],15,-1560198380),r=to(r,i,o,t,e[13],21,1309151649),t=to(t,r,i,o,e[4],6,-145523070),o=to(o,t,r,i,e[11],10,-1120210379),i=to(i,o,t,r,e[2],15,718787259),r=to(r,i,o,t,e[9],21,-343485551),n[0]=qu(t,n[0]),n[1]=qu(r,n[1]),n[2]=qu(i,n[2]),n[3]=qu(o,n[3])}function hw(n,e,t,r,i,o){return e=qu(qu(e,n),qu(r,o)),qu(e<<i|e>>>32-i,t)}function Ji(n,e,t,r,i,o,s){return hw(e&t|~e&r,n,e,i,o,s)}function Xi(n,e,t,r,i,o,s){return hw(e&r|t&~r,n,e,i,o,s)}function eo(n,e,t,r,i,o,s){return hw(e^t^r,n,e,i,o,s)}function to(n,e,t,r,i,o,s){return hw(t^(e|~r),n,e,i,o,s)}function B8(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)JT(r,Kne(n.substring(e-64,e)));n=n.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(JT(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,JT(r,i),r}function Kne(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}var v8="0123456789abcdef".split("");function Yne(n){for(var e="",t=0;t<4;t++)e+=v8[n>>8*t+4&15]+v8[n>>8*t&15];return e}function Qne(n){return String.fromCharCode(255&n,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function iA(n){return B8(n).map(Qne).join("")}var Zne=(function(n){for(var e=0;e<n.length;e++)n[e]=Yne(n[e]);return n.join("")})(B8("hello"))!="5d41402abc4b2a76b9719d911017c592";function qu(n,e){if(Zne){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}function oA(n,e){var t,r,i,o;if(n!==t){for(var s=(i=n,o=1+(256/n.length|0),new Array(o+1).join(i)),a=[],c=0;c<256;c++)a[c]=c;var l=0;for(c=0;c<256;c++){var u=a[c];l=(l+u+s.charCodeAt(c))%256,a[c]=a[l],a[l]=u}t=n,r=a}else a=r;var m=e.length,_=0,p=0,D="";for(c=0;c<m;c++)p=(p+(u=a[_=(_+1)%256]))%256,a[_]=a[p],a[p]=u,s=a[(a[_]+a[p])%256],D+=String.fromCharCode(e.charCodeAt(c)^s);return D}var y8={print:4,modify:8,copy:16,"annot-forms":32};function xp(n,e,t,r){this.v=1,this.r=2;var i=192;n.forEach(function(a){if(y8.perm!==void 0)throw new Error("Invalid permission: "+a);i+=y8[a]}),this.padding="(\xBFN^Nu\x8AAd\0NV\xFF\xFA\b..\0\xB6\xD0h>\x80/\f\xA9\xFEdSiz";var o=(e+this.padding).substr(0,32),s=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,s),this.P=-(1+(255^i)),this.encryptionKey=iA(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=oA(this.encryptionKey,this.padding)}function Sp(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var i=n.charCodeAt(r);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):n[r]}return e}function _8(n){if(Gn(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,i){if(i=i||!1,typeof t!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var o=Math.random().toString(35);return e[t][o]=[r,!!i],o},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var o in e[t]){var s=e[t][o];try{s[0].apply(n,r)}catch(a){zt.console&&Xn.error("jsPDF PubSub Error",a.message,a)}s[1]&&i.push(o)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function uw(n){if(!(this instanceof uw))return new uw(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function U8(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function _h(n,e,t,r,i){if(!(this instanceof _h))return new _h(n,e,t,r,i);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,U8.call(this,r,i)}function Dp(n,e,t,r,i){if(!(this instanceof Dp))return new Dp(n,e,t,r,i);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,U8.call(this,r,i)}function _t(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],o=arguments[3],s=[],a=1,c=16,l="S",u=null;Gn(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,i=n.format||i,o=n.compress||n.compressPdf||o,(u=n.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),a=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(c=n.floatPrecision),l=n.defaultPathOperation||"S"),s=n.filters||(o===!0?["FlateEncode"]:s),r=r||"mm",t=(""+(t||"P")).toLowerCase();var m=n.putOnlyUsedFonts||!1,_={},p={internal:{},__private__:{}};p.__private__.PubSub=_8;var D="1.3",k=p.__private__.getPdfVersion=function(){return D};p.__private__.setPdfVersion=function(y){D=y};var L={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return L};var R=p.__private__.getPageFormat=function(y){return L[y]};i=i||"a4";var X="compat",ee="advanced",J=X;function _e(){this.saveGraphicsState(),W(new Et(Ht,0,0,-Ht,0,ta()*Ht).toString()+" cm"),this.setFontSize(this.getFontSize()/Ht),l="n",J=ee}function Ce(){this.restoreGraphicsState(),l="S",J=X}var H=p.__private__.combineFontStyleAndFontWeight=function(y,P){if(y=="bold"&&P=="normal"||y=="bold"&&P==400||y=="normal"&&P=="italic"||y=="bold"&&P=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return P&&(y=P==400||P==="normal"?y==="italic"?"italic":"normal":P!=700&&P!=="bold"||y!=="normal"?(P==700?"bold":P)+""+y:"bold"),y};p.advancedAPI=function(y){var P=J===X;return P&&_e.call(this),typeof y!="function"||(y(this),P&&Ce.call(this)),this},p.compatAPI=function(y){var P=J===ee;return P&&Ce.call(this),typeof y!="function"||(y(this),P&&_e.call(this)),this},p.isAdvancedAPI=function(){return J===ee};var N,T=function(y){if(J!==ee)throw new Error(y+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},U=p.roundToPrecision=p.__private__.roundToPrecision=function(y,P){var G=e||P;if(isNaN(y)||isNaN(G))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return y.toFixed(G).replace(/0+$/,"")};N=p.hpf=p.__private__.hpf=typeof c=="number"?function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.hpf");return U(y,c)}:c==="smart"?function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.hpf");return U(y,y>-1&&y<1?16:5)}:function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.hpf");return U(y,16)};var x=p.f2=p.__private__.f2=function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.f2");return U(y,2)},A=p.__private__.f3=function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.f3");return U(y,3)},M=p.scale=p.__private__.scale=function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.scale");return J===X?y*Ht:J===ee?y:void 0},ne=function(y){return M((function(P){return J===X?ta()-P:J===ee?P:void 0})(y))};p.__private__.setPrecision=p.setPrecision=function(y){typeof parseInt(y,10)=="number"&&(e=parseInt(y,10))};var be,De="00000000000000000000000000000000",Se=p.__private__.getFileId=function(){return De},ge=p.__private__.setFileId=function(y){return De=y!==void 0&&/^[a-fA-F0-9]{32}$/.test(y)?y.toUpperCase():De.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(Lr=new xp(u.userPermissions,u.userPassword,u.ownerPassword,De)),De};p.setFileId=function(y){return ge(y),this},p.getFileId=function(){return Se()};var Te=p.__private__.convertDateToPDFDate=function(y){var P=y.getTimezoneOffset(),G=P<0?"+":"-",re=Math.floor(Math.abs(P/60)),he=Math.abs(P%60),Me=[G,te(re),"'",te(he),"'"].join("");return["D:",y.getFullYear(),te(y.getMonth()+1),te(y.getDate()),te(y.getHours()),te(y.getMinutes()),te(y.getSeconds()),Me].join("")},We=p.__private__.convertPDFDateToDate=function(y){var P=parseInt(y.substr(2,4),10),G=parseInt(y.substr(6,2),10)-1,re=parseInt(y.substr(8,2),10),he=parseInt(y.substr(10,2),10),Me=parseInt(y.substr(12,2),10),je=parseInt(y.substr(14,2),10);return new Date(P,G,re,he,Me,je,0)},Be=p.__private__.setCreationDate=function(y){var P;if(y===void 0&&(y=new Date),y instanceof Date)P=Te(y);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(y))throw new Error("Invalid argument passed to jsPDF.setCreationDate");P=y}return be=P},j=p.__private__.getCreationDate=function(y){var P=be;return y==="jsDate"&&(P=We(be)),P};p.setCreationDate=function(y){return Be(y),this},p.getCreationDate=function(y){return j(y)};var Q,te=p.__private__.padd2=function(y){return("0"+parseInt(y)).slice(-2)},oe=p.__private__.padd2Hex=function(y){return("00"+(y=y.toString())).substr(y.length)},de=0,pe=[],Ee=[],xe=0,Ne=[],qe=[],nt=!1,et=Ee;p.__private__.setCustomOutputDestination=function(y){nt=!0,et=y};var vt=function(y){nt||(et=y)};p.__private__.resetCustomOutputDestination=function(){nt=!1,et=Ee};var W=p.__private__.out=function(y){return y=y.toString(),xe+=y.length+1,et.push(y),et},Xe=p.__private__.write=function(y){return W(arguments.length===1?y.toString():Array.prototype.join.call(arguments," "))},Jt=p.__private__.getArrayBuffer=function(y){for(var P=y.length,G=new ArrayBuffer(P),re=new Uint8Array(G);P--;)re[P]=y.charCodeAt(P);return G},Tt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return Tt};var ze=n.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(y){return ze=J===ee?y/Ht:y,this};var St,ot=p.__private__.getFontSize=p.getFontSize=function(){return J===X?ze:ze*Ht},It=n.R2L||!1;p.__private__.setR2L=p.setR2L=function(y){return It=y,this},p.__private__.getR2L=p.getR2L=function(){return It};var Ct,wn=p.__private__.setZoomMode=function(y){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(y))St=y;else if(isNaN(y)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(y)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+y+'" is not recognized.');St=y}else St=parseInt(y,10)};p.__private__.getZoomMode=function(){return St};var ln,Bt=p.__private__.setPageMode=function(y){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(y)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+y+'" is not recognized.');Ct=y};p.__private__.getPageMode=function(){return Ct};var Pt=p.__private__.setLayoutMode=function(y){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(y)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+y+'" is not recognized.');ln=y};p.__private__.getLayoutMode=function(){return ln},p.__private__.setDisplayMode=p.setDisplayMode=function(y,P,G){return wn(y),Pt(P),Bt(G),this};var Nt={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(y){if(Object.keys(Nt).indexOf(y)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Nt[y]},p.__private__.getDocumentProperties=function(){return Nt},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(y){for(var P in Nt)Nt.hasOwnProperty(P)&&y[P]&&(Nt[P]=y[P]);return this},p.__private__.setDocumentProperty=function(y,P){if(Object.keys(Nt).indexOf(y)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Nt[y]=P};var lt,Ht,gt,yr,un,nn={},rn={},zn=[],xt={},$n={},At={},$t={},Yn=null,Wt=0,Dt=[],Cn=new _8(p),no=n.hotfixes||[],ri={},wo={},zo=[],Et=function y(P,G,re,he,Me,je){if(!(this instanceof y))return new y(P,G,re,he,Me,je);isNaN(P)&&(P=1),isNaN(G)&&(G=0),isNaN(re)&&(re=0),isNaN(he)&&(he=1),isNaN(Me)&&(Me=0),isNaN(je)&&(je=0),this._matrix=[P,G,re,he,Me,je]};Object.defineProperty(Et.prototype,"sx",{get:function(){return this._matrix[0]},set:function(y){this._matrix[0]=y}}),Object.defineProperty(Et.prototype,"shy",{get:function(){return this._matrix[1]},set:function(y){this._matrix[1]=y}}),Object.defineProperty(Et.prototype,"shx",{get:function(){return this._matrix[2]},set:function(y){this._matrix[2]=y}}),Object.defineProperty(Et.prototype,"sy",{get:function(){return this._matrix[3]},set:function(y){this._matrix[3]=y}}),Object.defineProperty(Et.prototype,"tx",{get:function(){return this._matrix[4]},set:function(y){this._matrix[4]=y}}),Object.defineProperty(Et.prototype,"ty",{get:function(){return this._matrix[5]},set:function(y){this._matrix[5]=y}}),Object.defineProperty(Et.prototype,"a",{get:function(){return this._matrix[0]},set:function(y){this._matrix[0]=y}}),Object.defineProperty(Et.prototype,"b",{get:function(){return this._matrix[1]},set:function(y){this._matrix[1]=y}}),Object.defineProperty(Et.prototype,"c",{get:function(){return this._matrix[2]},set:function(y){this._matrix[2]=y}}),Object.defineProperty(Et.prototype,"d",{get:function(){return this._matrix[3]},set:function(y){this._matrix[3]=y}}),Object.defineProperty(Et.prototype,"e",{get:function(){return this._matrix[4]},set:function(y){this._matrix[4]=y}}),Object.defineProperty(Et.prototype,"f",{get:function(){return this._matrix[5]},set:function(y){this._matrix[5]=y}}),Object.defineProperty(Et.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Et.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Et.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Et.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Et.prototype.join=function(y){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(N).join(y)},Et.prototype.multiply=function(y){var P=y.sx*this.sx+y.shy*this.shx,G=y.sx*this.shy+y.shy*this.sy,re=y.shx*this.sx+y.sy*this.shx,he=y.shx*this.shy+y.sy*this.sy,Me=y.tx*this.sx+y.ty*this.shx+this.tx,je=y.tx*this.shy+y.ty*this.sy+this.ty;return new Et(P,G,re,he,Me,je)},Et.prototype.decompose=function(){var y=this.sx,P=this.shy,G=this.shx,re=this.sy,he=this.tx,Me=this.ty,je=Math.sqrt(y*y+P*P),st=(y/=je)*G+(P/=je)*re;G-=y*st,re-=P*st;var dt=Math.sqrt(G*G+re*re);return st/=dt,y*(re/=dt)<P*(G/=dt)&&(y=-y,P=-P,st=-st,je=-je),{scale:new Et(je,0,0,dt,0,0),translate:new Et(1,0,0,1,he,Me),rotate:new Et(y,P,-P,y,0,0),skew:new Et(1,0,st,1,0,0)}},Et.prototype.toString=function(y){return this.join(" ")},Et.prototype.inversed=function(){var y=this.sx,P=this.shy,G=this.shx,re=this.sy,he=this.tx,Me=this.ty,je=1/(y*re-P*G),st=re*je,dt=-P*je,Lt=-G*je,Ut=y*je;return new Et(st,dt,Lt,Ut,-st*he-Lt*Me,-dt*he-Ut*Me)},Et.prototype.applyToPoint=function(y){var P=y.x*this.sx+y.y*this.shx+this.tx,G=y.x*this.shy+y.y*this.sy+this.ty;return new Xs(P,G)},Et.prototype.applyToRectangle=function(y){var P=this.applyToPoint(y),G=this.applyToPoint(new Xs(y.x+y.w,y.y+y.h));return new Dl(P.x,P.y,G.x-P.x,G.y-P.y)},Et.prototype.clone=function(){var y=this.sx,P=this.shy,G=this.shx,re=this.sy,he=this.tx,Me=this.ty;return new Et(y,P,G,re,he,Me)},p.Matrix=Et;var Es=p.matrixMult=function(y,P){return P.multiply(y)},sr=new Et(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=sr;var ro=function(y,P){if(!$n[y]){var G=(P instanceof _h?"Sh":"P")+(Object.keys(xt).length+1).toString(10);P.id=G,$n[y]=G,xt[G]=P,Cn.publish("addPattern",P)}};p.ShadingPattern=_h,p.TilingPattern=Dp,p.addShadingPattern=function(y,P){return T("addShadingPattern()"),ro(y,P),this},p.beginTilingPattern=function(y){T("beginTilingPattern()"),Tl(y.boundingBox[0],y.boundingBox[1],y.boundingBox[2]-y.boundingBox[0],y.boundingBox[3]-y.boundingBox[1],y.matrix)},p.endTilingPattern=function(y,P){T("endTilingPattern()"),P.stream=qe[Q].join(`
`),ro(y,P),Cn.publish("endTilingPattern",P),zo.pop().restore()};var ui,qn=p.__private__.newObject=function(){var y=Gr();return ii(y,!0),y},Gr=p.__private__.newObjectDeferred=function(){return de++,pe[de]=function(){return xe},de},ii=function(y,P){return P=typeof P=="boolean"&&P,pe[y]=xe,P&&W(y+" 0 obj"),y},Co=p.__private__.newAdditionalObject=function(){var y={objId:Gr(),content:""};return Ne.push(y),y},Ma=Gr(),$o=Gr(),io=p.__private__.decodeColorString=function(y){var P=y.split(" ");if(P.length!==2||P[1]!=="g"&&P[1]!=="G")P.length!==5||P[4]!=="k"&&P[4]!=="K"||(P=[(1-P[0])*(1-P[3]),(1-P[1])*(1-P[3]),(1-P[2])*(1-P[3]),"r"]);else{var G=parseFloat(P[0]);P=[G,G,G,"r"]}for(var re="#",he=0;he<3;he++)re+=("0"+Math.floor(255*parseFloat(P[he])).toString(16)).slice(-2);return re},Eo=p.__private__.encodeColorString=function(y){var P;typeof y=="string"&&(y={ch1:y});var G=y.ch1,re=y.ch2,he=y.ch3,Me=y.ch4,je=y.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof G=="string"&&G.charAt(0)!=="#"){var st=new j8(G);if(st.ok)G=st.toHex();else if(!/^\d*\.?\d*$/.test(G))throw new Error('Invalid color "'+G+'" passed to jsPDF.encodeColorString.')}if(typeof G=="string"&&/^#[0-9A-Fa-f]{3}$/.test(G)&&(G="#"+G[1]+G[1]+G[2]+G[2]+G[3]+G[3]),typeof G=="string"&&/^#[0-9A-Fa-f]{6}$/.test(G)){var dt=parseInt(G.substr(1),16);G=dt>>16&255,re=dt>>8&255,he=255&dt}if(re===void 0||Me===void 0&&G===re&&re===he)P=typeof G=="string"?G+" "+je[0]:y.precision===2?x(G/255)+" "+je[0]:A(G/255)+" "+je[0];else if(Me===void 0||Gn(Me)==="object"){if(Me&&!isNaN(Me.a)&&Me.a===0)return["1.","1.","1.",je[1]].join(" ");P=typeof G=="string"?[G,re,he,je[1]].join(" "):y.precision===2?[x(G/255),x(re/255),x(he/255),je[1]].join(" "):[A(G/255),A(re/255),A(he/255),je[1]].join(" ")}else P=typeof G=="string"?[G,re,he,Me,je[2]].join(" "):y.precision===2?[x(G),x(re),x(he),x(Me),je[2]].join(" "):[A(G),A(re),A(he),A(Me),je[2]].join(" ");return P},oo=p.__private__.getFilters=function(){return s},Si=p.__private__.putStream=function(y){var P=(y=y||{}).data||"",G=y.filters||oo(),re=y.alreadyAppliedFilters||[],he=y.addLength1||!1,Me=P.length,je=y.objectId,st=function(Tr){return Tr};if(u!==null&&je===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(st=Lr.encryptor(je,0));var dt={};G===!0&&(G=["FlateEncode"]);var Lt=y.additionalKeyValues||[],Ut=(dt=_t.API.processDataByFilters!==void 0?_t.API.processDataByFilters(P,G):{data:P,reverseChain:[]}).reverseChain+(Array.isArray(re)?re.join(" "):re.toString());if(dt.data.length!==0&&(Lt.push({key:"Length",value:dt.data.length}),he===!0&&Lt.push({key:"Length1",value:Me})),Ut.length!=0)if(Ut.split("/").length-1==1)Lt.push({key:"Filter",value:Ut});else{Lt.push({key:"Filter",value:"["+Ut+"]"});for(var mn=0;mn<Lt.length;mn+=1)if(Lt[mn].key==="DecodeParms"){for(var er=[],Wn=0;Wn<dt.reverseChain.split("/").length-1;Wn+=1)er.push("null");er.push(Lt[mn].value),Lt[mn].value="["+er.join(" ")+"]"}}W("<<");for(var Fn=0;Fn<Lt.length;Fn++)W("/"+Lt[Fn].key+" "+Lt[Fn].value);W(">>"),dt.data.length!==0&&(W("stream"),W(st(dt.data)),W("endstream"))},Ui=p.__private__.putPage=function(y){var P=y.number,G=y.data,re=y.objId,he=y.contentsObjId;ii(re,!0),W("<</Type /Page"),W("/Parent "+y.rootDictionaryObjId+" 0 R"),W("/Resources "+y.resourceDictionaryObjId+" 0 R"),W("/MediaBox ["+parseFloat(N(y.mediaBox.bottomLeftX))+" "+parseFloat(N(y.mediaBox.bottomLeftY))+" "+N(y.mediaBox.topRightX)+" "+N(y.mediaBox.topRightY)+"]"),y.cropBox!==null&&W("/CropBox ["+N(y.cropBox.bottomLeftX)+" "+N(y.cropBox.bottomLeftY)+" "+N(y.cropBox.topRightX)+" "+N(y.cropBox.topRightY)+"]"),y.bleedBox!==null&&W("/BleedBox ["+N(y.bleedBox.bottomLeftX)+" "+N(y.bleedBox.bottomLeftY)+" "+N(y.bleedBox.topRightX)+" "+N(y.bleedBox.topRightY)+"]"),y.trimBox!==null&&W("/TrimBox ["+N(y.trimBox.bottomLeftX)+" "+N(y.trimBox.bottomLeftY)+" "+N(y.trimBox.topRightX)+" "+N(y.trimBox.topRightY)+"]"),y.artBox!==null&&W("/ArtBox ["+N(y.artBox.bottomLeftX)+" "+N(y.artBox.bottomLeftY)+" "+N(y.artBox.topRightX)+" "+N(y.artBox.topRightY)+"]"),typeof y.userUnit=="number"&&y.userUnit!==1&&W("/UserUnit "+y.userUnit),Cn.publish("putPage",{objId:re,pageContext:Dt[P],pageNumber:P,page:G}),W("/Contents "+he+" 0 R"),W(">>"),W("endobj");var Me=G.join(`
`);return J===ee&&(Me+=`
Q`),ii(he,!0),Si({data:Me,filters:oo(),objectId:he}),W("endobj"),re},qo=p.__private__.putPages=function(){var y,P,G=[];for(y=1;y<=Wt;y++)Dt[y].objId=Gr(),Dt[y].contentsObjId=Gr();for(y=1;y<=Wt;y++)G.push(Ui({number:y,data:qe[y],objId:Dt[y].objId,contentsObjId:Dt[y].contentsObjId,mediaBox:Dt[y].mediaBox,cropBox:Dt[y].cropBox,bleedBox:Dt[y].bleedBox,trimBox:Dt[y].trimBox,artBox:Dt[y].artBox,userUnit:Dt[y].userUnit,rootDictionaryObjId:Ma,resourceDictionaryObjId:$o}));ii(Ma,!0),W("<</Type /Pages");var re="/Kids [";for(P=0;P<Wt;P++)re+=G[P]+" 0 R ";W(re+"]"),W("/Count "+Wt),W(">>"),W("endobj"),Cn.publish("postPutPages")},Pa=function(y){Cn.publish("putFont",{font:y,out:W,newObject:qn,putStream:Si}),y.isAlreadyPutted!==!0&&(y.objectNumber=qn(),W("<<"),W("/Type /Font"),W("/BaseFont /"+Sp(y.postScriptName)),W("/Subtype /Type1"),typeof y.encoding=="string"&&W("/Encoding /"+y.encoding),W("/FirstChar 32"),W("/LastChar 255"),W(">>"),W("endobj"))},Na=function(y){y.objectNumber=qn();var P=[];P.push({key:"Type",value:"/XObject"}),P.push({key:"Subtype",value:"/Form"}),P.push({key:"BBox",value:"["+[N(y.x),N(y.y),N(y.x+y.width),N(y.y+y.height)].join(" ")+"]"}),P.push({key:"Matrix",value:"["+y.matrix.toString()+"]"});var G=y.pages[1].join(`
`);Si({data:G,additionalKeyValues:P,objectId:y.objectNumber}),W("endobj")},ka=function(y,P){P||(P=21);var G=qn(),re=(function(je,st){var dt,Lt=[],Ut=1/(st-1);for(dt=0;dt<1;dt+=Ut)Lt.push(dt);if(Lt.push(1),je[0].offset!=0){var mn={offset:0,color:je[0].color};je.unshift(mn)}if(je[je.length-1].offset!=1){var er={offset:1,color:je[je.length-1].color};je.push(er)}for(var Wn="",Fn=0,Tr=0;Tr<Lt.length;Tr++){for(dt=Lt[Tr];dt>je[Fn+1].offset;)Fn++;var br=je[Fn].offset,Kr=(dt-br)/(je[Fn+1].offset-br),So=je[Fn].color,ar=je[Fn+1].color;Wn+=oe(Math.round((1-Kr)*So[0]+Kr*ar[0]).toString(16))+oe(Math.round((1-Kr)*So[1]+Kr*ar[1]).toString(16))+oe(Math.round((1-Kr)*So[2]+Kr*ar[2]).toString(16))}return Wn.trim()})(y.colors,P),he=[];he.push({key:"FunctionType",value:"0"}),he.push({key:"Domain",value:"[0.0 1.0]"}),he.push({key:"Size",value:"["+P+"]"}),he.push({key:"BitsPerSample",value:"8"}),he.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),he.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Si({data:re,additionalKeyValues:he,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:G}),W("endobj"),y.objectNumber=qn(),W("<< /ShadingType "+y.type),W("/ColorSpace /DeviceRGB");var Me="/Coords ["+N(parseFloat(y.coords[0]))+" "+N(parseFloat(y.coords[1]))+" ";y.type===2?Me+=N(parseFloat(y.coords[2]))+" "+N(parseFloat(y.coords[3])):Me+=N(parseFloat(y.coords[2]))+" "+N(parseFloat(y.coords[3]))+" "+N(parseFloat(y.coords[4]))+" "+N(parseFloat(y.coords[5])),W(Me+="]"),y.matrix&&W("/Matrix ["+y.matrix.toString()+"]"),W("/Function "+G+" 0 R"),W("/Extend [true true]"),W(">>"),W("endobj")},Ec=function(y,P){var G=Gr(),re=qn();P.push({resourcesOid:G,objectOid:re}),y.objectNumber=re;var he=[];he.push({key:"Type",value:"/Pattern"}),he.push({key:"PatternType",value:"1"}),he.push({key:"PaintType",value:"1"}),he.push({key:"TilingType",value:"1"}),he.push({key:"BBox",value:"["+y.boundingBox.map(N).join(" ")+"]"}),he.push({key:"XStep",value:N(y.xStep)}),he.push({key:"YStep",value:N(y.yStep)}),he.push({key:"Resources",value:G+" 0 R"}),y.matrix&&he.push({key:"Matrix",value:"["+y.matrix.toString()+"]"}),Si({data:y.stream,additionalKeyValues:he,objectId:y.objectNumber}),W("endobj")},Ch=function(y){for(var P in y.objectNumber=qn(),W("<<"),y)switch(P){case"opacity":W("/ca "+x(y[P]));break;case"stroke-opacity":W("/CA "+x(y[P]))}W(">>"),W("endobj")},Wu=function(y){ii(y.resourcesOid,!0),W("<<"),W("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var P in W("/Font <<"),nn)nn.hasOwnProperty(P)&&(m===!1||m===!0&&_.hasOwnProperty(P))&&W("/"+P+" "+nn[P].objectNumber+" 0 R");W(">>")})(),(function(){if(Object.keys(xt).length>0){for(var P in W("/Shading <<"),xt)xt.hasOwnProperty(P)&&xt[P]instanceof _h&&xt[P].objectNumber>=0&&W("/"+P+" "+xt[P].objectNumber+" 0 R");Cn.publish("putShadingPatternDict"),W(">>")}})(),(function(P){if(Object.keys(xt).length>0){for(var G in W("/Pattern <<"),xt)xt.hasOwnProperty(G)&&xt[G]instanceof p.TilingPattern&&xt[G].objectNumber>=0&&xt[G].objectNumber<P&&W("/"+G+" "+xt[G].objectNumber+" 0 R");Cn.publish("putTilingPatternDict"),W(">>")}})(y.objectOid),(function(){if(Object.keys(At).length>0){var P;for(P in W("/ExtGState <<"),At)At.hasOwnProperty(P)&&At[P].objectNumber>=0&&W("/"+P+" "+At[P].objectNumber+" 0 R");Cn.publish("putGStateDict"),W(">>")}})(),(function(){for(var P in W("/XObject <<"),ri)ri.hasOwnProperty(P)&&ri[P].objectNumber>=0&&W("/"+P+" "+ri[P].objectNumber+" 0 R");Cn.publish("putXobjectDict"),W(">>")})(),W(">>"),W("endobj")},Ic=function(y){rn[y.fontName]=rn[y.fontName]||{},rn[y.fontName][y.fontStyle]=y.id},Gu=function(y,P,G,re,he){var Me={id:"F"+(Object.keys(nn).length+1).toString(10),postScriptName:y,fontName:P,fontStyle:G,encoding:re,isStandardFont:he||!1,metadata:{}};return Cn.publish("addFont",{font:Me,instance:this}),nn[Me.id]=Me,Ic(Me),Me.id},zi=p.__private__.pdfEscape=p.pdfEscape=function(y,P){return(function(G,re){var he,Me,je,st,dt,Lt,Ut,mn,er;if(je=(re=re||{}).sourceEncoding||"Unicode",dt=re.outputEncoding,(re.autoencode||dt)&&nn[lt].metadata&&nn[lt].metadata[je]&&nn[lt].metadata[je].encoding&&(st=nn[lt].metadata[je].encoding,!dt&&nn[lt].encoding&&(dt=nn[lt].encoding),!dt&&st.codePages&&(dt=st.codePages[0]),typeof dt=="string"&&(dt=st[dt]),dt)){for(Ut=!1,Lt=[],he=0,Me=G.length;he<Me;he++)(mn=dt[G.charCodeAt(he)])?Lt.push(String.fromCharCode(mn)):Lt.push(G[he]),Lt[he].charCodeAt(0)>>8&&(Ut=!0);G=Lt.join("")}for(he=G.length;Ut===void 0&&he!==0;)G.charCodeAt(he-1)>>8&&(Ut=!0),he--;if(!Ut)return G;for(Lt=re.noBOM?[]:[254,255],he=0,Me=G.length;he<Me;he++){if((er=(mn=G.charCodeAt(he))>>8)>>8)throw new Error("Character at position "+he+" of string '"+G+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Lt.push(er),Lt.push(mn-(er<<8))}return String.fromCharCode.apply(void 0,Lt)})(y,P).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Zs=p.__private__.beginPage=function(y){qe[++Wt]=[],Dt[Wt]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(y[0]),topRightY:Number(y[1])}},Eh(Wt),vt(qe[Q])},Is=function(y,P){var G,re,he;switch(t=P||t,typeof y=="string"&&(G=R(y.toLowerCase()),Array.isArray(G)&&(re=G[0],he=G[1])),Array.isArray(y)&&(re=y[0]*Ht,he=y[1]*Ht),isNaN(re)&&(re=i[0],he=i[1]),(re>14400||he>14400)&&(Xn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),re=Math.min(14400,re),he=Math.min(14400,he)),i=[re,he],t.substr(0,1)){case"l":he>re&&(i=[he,re]);break;case"p":re>he&&(i=[he,re])}Zs(i),Ft(Sl),W(Ds),Ac!==0&&W(Ac+" J"),Hn!==0&&W(Hn+" j"),Cn.publish("addPage",{pageNumber:Wt})},xc=function(y){y>0&&y<=Wt&&(qe.splice(y,1),Dt.splice(y,1),Wt--,Q>Wt&&(Q=Wt),this.setPage(Q))},Eh=function(y){y>0&&y<=Wt&&(Q=y)},Ku=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return qe.length-1},Yu=function(y,P,G){var re,he=void 0;return G=G||{},y=y!==void 0?y:nn[lt].fontName,P=P!==void 0?P:nn[lt].fontStyle,re=y.toLowerCase(),rn[re]!==void 0&&rn[re][P]!==void 0?he=rn[re][P]:rn[y]!==void 0&&rn[y][P]!==void 0?he=rn[y][P]:G.disableWarning===!1&&Xn.warn("Unable to look up font label for font '"+y+"', '"+P+"'. Refer to getFontList() for available fonts."),he||G.noFallback||(he=rn.times[P])==null&&(he=rn.times.normal),he},Ho=p.__private__.putInfo=function(){var y=qn(),P=function(re){return re};for(var G in u!==null&&(P=Lr.encryptor(y,0)),W("<<"),W("/Producer ("+zi(P("jsPDF "+_t.version))+")"),Nt)Nt.hasOwnProperty(G)&&Nt[G]&&W("/"+G.substr(0,1).toUpperCase()+G.substr(1)+" ("+zi(P(Nt[G]))+")");W("/CreationDate ("+zi(P(be))+")"),W(">>"),W("endobj")},Oa=p.__private__.putCatalog=function(y){var P=(y=y||{}).rootDictionaryObjId||Ma;switch(qn(),W("<<"),W("/Type /Catalog"),W("/Pages "+P+" 0 R"),St||(St="fullwidth"),St){case"fullwidth":W("/OpenAction [3 0 R /FitH null]");break;case"fullheight":W("/OpenAction [3 0 R /FitV null]");break;case"fullpage":W("/OpenAction [3 0 R /Fit]");break;case"original":W("/OpenAction [3 0 R /XYZ null null 1]");break;default:var G=""+St;G.substr(G.length-1)==="%"&&(St=parseInt(St)/100),typeof St=="number"&&W("/OpenAction [3 0 R /XYZ null null "+x(St)+"]")}switch(ln||(ln="continuous"),ln){case"continuous":W("/PageLayout /OneColumn");break;case"single":W("/PageLayout /SinglePage");break;case"two":case"twoleft":W("/PageLayout /TwoColumnLeft");break;case"tworight":W("/PageLayout /TwoColumnRight")}Ct&&W("/PageMode /"+Ct),Cn.publish("putCatalog"),W(">>"),W("endobj")},Qu=p.__private__.putTrailer=function(){W("trailer"),W("<<"),W("/Size "+(de+1)),W("/Root "+de+" 0 R"),W("/Info "+(de-1)+" 0 R"),u!==null&&W("/Encrypt "+Lr.oid+" 0 R"),W("/ID [ <"+De+"> <"+De+"> ]"),W(">>")},_r=p.__private__.putHeader=function(){W("%PDF-"+D),W("%\xBA\xDF\xAC\xE0")},Zu=p.__private__.putXRef=function(){var y="0000000000";W("xref"),W("0 "+(de+1)),W("0000000000 65535 f ");for(var P=1;P<=de;P++)typeof pe[P]=="function"?W((y+pe[P]()).slice(-10)+" 00000 n "):pe[P]!==void 0?W((y+pe[P]).slice(-10)+" 00000 n "):W("0000000000 00000 n ")},xs=p.__private__.buildDocument=function(){var y;de=0,xe=0,Ee=[],pe=[],Ne=[],Ma=Gr(),$o=Gr(),vt(Ee),Cn.publish("buildDocument"),_r(),qo(),(function(){Cn.publish("putAdditionalObjects");for(var G=0;G<Ne.length;G++){var re=Ne[G];ii(re.objId,!0),W(re.content),W("endobj")}Cn.publish("postPutAdditionalObjects")})(),y=[],(function(){for(var G in nn)nn.hasOwnProperty(G)&&(m===!1||m===!0&&_.hasOwnProperty(G))&&Pa(nn[G])})(),(function(){var G;for(G in At)At.hasOwnProperty(G)&&Ch(At[G])})(),(function(){for(var G in ri)ri.hasOwnProperty(G)&&Na(ri[G])})(),(function(G){var re;for(re in xt)xt.hasOwnProperty(re)&&(xt[re]instanceof _h?ka(xt[re]):xt[re]instanceof Dp&&Ec(xt[re],G))})(y),Cn.publish("putResources"),y.forEach(Wu),Wu({resourcesOid:$o,objectOid:Number.MAX_SAFE_INTEGER}),Cn.publish("postPutResources"),u!==null&&(Lr.oid=qn(),W("<<"),W("/Filter /Standard"),W("/V "+Lr.v),W("/R "+Lr.r),W("/U <"+Lr.toHexString(Lr.U)+">"),W("/O <"+Lr.toHexString(Lr.O)+">"),W("/P "+Lr.P),W(">>"),W("endobj")),Ho(),Oa();var P=xe;return Zu(),Qu(),W("startxref"),W(""+P),W("%%EOF"),vt(qe[Q]),Ee.join(`
`)},El=p.__private__.getBlob=function(y){return new Blob([Jt(y)],{type:"application/pdf"})},Ju=p.output=p.__private__.output=(ui=function(y,P){switch(typeof(P=P||{})=="string"?P={filename:P}:P.filename=P.filename||"generated.pdf",y){case void 0:return xs();case"save":p.save(P.filename);break;case"arraybuffer":return Jt(xs());case"blob":return El(xs());case"bloburi":case"bloburl":if(zt.URL!==void 0&&typeof zt.URL.createObjectURL=="function")return zt.URL&&zt.URL.createObjectURL(El(xs()))||void 0;Xn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var G="",re=xs();try{G=g8(re)}catch{G=g8(unescape(encodeURIComponent(re)))}return"data:application/pdf;filename="+P.filename+";base64,"+G;case"pdfobjectnewwindow":if(Object.prototype.toString.call(zt)==="[object Window]"){var he="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Me=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';P.pdfObjectUrl&&(he=P.pdfObjectUrl,Me="");var je='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+he+'"'+Me+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(P)+");<\/script></body></html>",st=zt.open();return st!==null&&st.document.write(je),st}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(zt)==="[object Window]"){var dt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(P.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+P.filename+'" width="500px" height="400px" /></body></html>',Lt=zt.open();if(Lt!==null){Lt.document.write(dt);var Ut=this;Lt.document.documentElement.querySelector("#pdfViewer").onload=function(){Lt.document.title=P.filename,Lt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Ut.output("bloburl"))}}return Lt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(zt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var mn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",P)+'"></iframe></body></html>',er=zt.open();if(er!==null&&(er.document.write(mn),er.document.title=P.filename),er||typeof safari>"u")return er;break;case"datauri":case"dataurl":return zt.document.location.href=this.output("datauristring",P);default:return null}},ui.foo=function(){try{return ui.apply(this,arguments)}catch(G){var y=G.stack||"";~y.indexOf(" at ")&&(y=y.split(" at ")[1]);var P="Error in function "+y.split(`
`)[0].split("<")[0]+": "+G.message;if(!zt.console)throw new Error(P);zt.console.error(P,G),zt.alert&&alert(P)}},ui.foo.bar=ui,ui.foo),so=function(y){return Array.isArray(no)===!0&&no.indexOf(y)>-1};switch(r){case"pt":Ht=1;break;case"mm":Ht=72/25.4;break;case"cm":Ht=72/2.54;break;case"in":Ht=72;break;case"px":Ht=so("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ht=12;break;case"ex":Ht=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Ht=r}var Lr=null;Be(),ge();var Di=p.__private__.getPageInfo=p.getPageInfo=function(y){if(isNaN(y)||y%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Dt[y].objId,pageNumber:y,pageContext:Dt[y]}},Io=p.__private__.getPageInfoByObjId=function(y){if(isNaN(y)||y%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var P in Dt)if(Dt[P].objId===y)break;return Di(P)},Il=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:Dt[Q].objId,pageNumber:Q,pageContext:Dt[Q]}};p.addPage=function(){return Is.apply(this,arguments),this},p.setPage=function(){return Eh.apply(this,arguments),vt.call(this,qe[Q]),this},p.insertPage=function(y){return this.addPage(),this.movePage(Q,y),this},p.movePage=function(y,P){var G,re;if(y>P){G=qe[y],re=Dt[y];for(var he=y;he>P;he--)qe[he]=qe[he-1],Dt[he]=Dt[he-1];qe[P]=G,Dt[P]=re,this.setPage(P)}else if(y<P){G=qe[y],re=Dt[y];for(var Me=y;Me<P;Me++)qe[Me]=qe[Me+1],Dt[Me]=Dt[Me+1];qe[P]=G,Dt[P]=re,this.setPage(P)}return this},p.deletePage=function(){return xc.apply(this,arguments),this},p.__private__.text=p.text=function(y,P,G,re,he){var Me,je,st,dt,Lt,Ut,mn,er,Wn,Fn=(re=re||{}).scope||this;if(typeof y=="number"&&typeof P=="number"&&(typeof G=="string"||Array.isArray(G))){var Tr=G;G=P,P=y,y=Tr}if(arguments[3]instanceof Et==0?(st=arguments[4],dt=arguments[5],Gn(mn=arguments[3])==="object"&&mn!==null||(typeof st=="string"&&(dt=st,st=null),typeof mn=="string"&&(dt=mn,mn=null),typeof mn=="number"&&(st=mn,mn=null),re={flags:mn,angle:st,align:dt})):(T("The transform parameter of text() with a Matrix value"),Wn=he),isNaN(P)||isNaN(G)||y==null)throw new Error("Invalid arguments passed to jsPDF.text");if(y.length===0)return Fn;var br,Kr="",So=typeof re.lineHeightFactor=="number"?re.lineHeightFactor:$i,ar=Fn.internal.scaleFactor;function As(kn){return kn=kn.split("	").join(Array(re.TabLen||9).join(" ")),zi(kn,mn)}function Ml(kn){for(var Qn,Vr=kn.concat(),oi=[],Oc=Vr.length;Oc--;)typeof(Qn=Vr.shift())=="string"?oi.push(Qn):Array.isArray(kn)&&(Qn.length===1||Qn[1]===void 0&&Qn[2]===void 0)?oi.push(Qn[0]):oi.push([Qn[0],Qn[1],Qn[2]]);return oi}function Yo(kn,Qn){var Vr;if(typeof kn=="string")Vr=Qn(kn)[0];else if(Array.isArray(kn)){for(var oi,Oc,Hp=kn.concat(),Mh=[],j0=Hp.length;j0--;)typeof(oi=Hp.shift())=="string"?Mh.push(Qn(oi)[0]):Array.isArray(oi)&&typeof oi[0]=="string"&&(Oc=Qn(oi[0],oi[1],oi[2]),Mh.push([Oc[0],Oc[1],Oc[2]]));Vr=Mh}return Vr}var h=!1,C=!0;if(typeof y=="string")h=!0;else if(Array.isArray(y)){var S=y.concat();je=[];for(var z,ce=S.length;ce--;)(typeof(z=S.shift())!="string"||Array.isArray(z)&&typeof z[0]!="string")&&(C=!1);h=C}if(h===!1)throw new Error('Type of text must be string or Array. "'+y+'" is not recognized.');typeof y=="string"&&(y=y.match(/[\r?\n]/)?y.split(/\r\n|\r|\n/g):[y]);var we=ze/Fn.internal.scaleFactor,Ge=we*(So-1);switch(re.baseline){case"bottom":G-=Ge;break;case"top":G+=we-Ge;break;case"hanging":G+=we-2*Ge;break;case"middle":G+=we/2-Ge}if((Ut=re.maxWidth||0)>0&&(typeof y=="string"?y=Fn.splitTextToSize(y,Ut):Object.prototype.toString.call(y)==="[object Array]"&&(y=y.reduce(function(kn,Qn){return kn.concat(Fn.splitTextToSize(Qn,Ut))},[]))),Me={text:y,x:P,y:G,options:re,mutex:{pdfEscape:zi,activeFontKey:lt,fonts:nn,activeFontSize:ze}},Cn.publish("preProcessText",Me),y=Me.text,st=(re=Me.options).angle,Wn instanceof Et==0&&st&&typeof st=="number"){st*=Math.PI/180,re.rotationDirection===0&&(st=-st),J===ee&&(st=-st);var Sn=Math.cos(st),wr=Math.sin(st);Wn=new Et(Sn,wr,-wr,Sn,0,0)}else st&&st instanceof Et&&(Wn=st);J!==ee||Wn||(Wn=sr),(Lt=re.charSpace||ao)!==void 0&&(Kr+=N(M(Lt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(er=re.horizontalScale)!==void 0&&(Kr+=N(100*er)+` Tz
`),re.lang;var Vt=-1,tr=re.renderingMode!==void 0?re.renderingMode:re.stroke,Cr=Fn.internal.getCurrentPageInfo().pageContext;switch(tr){case 0:case!1:case"fill":Vt=0;break;case 1:case!0:case"stroke":Vt=1;break;case 2:case"fillThenStroke":Vt=2;break;case 3:case"invisible":Vt=3;break;case 4:case"fillAndAddForClipping":Vt=4;break;case 5:case"strokeAndAddPathForClipping":Vt=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Vt=6;break;case 7:case"addToPathForClipping":Vt=7}var na=Cr.usedRenderingMode!==void 0?Cr.usedRenderingMode:-1;Vt!==-1?Kr+=Vt+` Tr
`:na!==-1&&(Kr+=`0 Tr
`),Vt!==-1&&(Cr.usedRenderingMode=Vt),dt=re.align||"left";var dr,Ms=ze*So,Nc=Fn.internal.pageSize.getWidth(),jp=nn[lt];Lt=re.charSpace||ao,Ut=re.maxWidth||0,mn=Object.assign({autoencode:!0,noBOM:!0},re.flags);var Pl=[],nd=function(kn){return Fn.getStringUnitWidth(kn,{font:jp,charSpace:Lt,fontSize:ze,doKerning:!1})*ze/ar};if(Object.prototype.toString.call(y)==="[object Array]"){var Qo;je=Ml(y),dt!=="left"&&(dr=je.map(nd));var Zo,Nl=0;if(dt==="right"){P-=dr[0],y=[],ce=je.length;for(var kc=0;kc<ce;kc++)kc===0?(Zo=Js(P),Qo=di(G)):(Zo=M(Nl-dr[kc]),Qo=-Ms),y.push([je[kc],Zo,Qo]),Nl=dr[kc]}else if(dt==="center"){P-=dr[0]/2,y=[],ce=je.length;for(var kl=0;kl<ce;kl++)kl===0?(Zo=Js(P),Qo=di(G)):(Zo=M((Nl-dr[kl])/2),Qo=-Ms),y.push([je[kl],Zo,Qo]),Nl=dr[kl]}else if(dt==="left"){y=[],ce=je.length;for(var Bp=0;Bp<ce;Bp++)y.push(je[Bp])}else if(dt==="justify"&&jp.encoding==="Identity-H"){y=[],ce=je.length,Ut=Ut!==0?Ut:Nc;for(var Ah=0,Fr=0;Fr<ce;Fr++)if(Qo=Fr===0?di(G):-Ms,Zo=Fr===0?Js(P):Ah,Fr<ce-1){var V0=M((Ut-dr[Fr])/(je[Fr].split(" ").length-1)),Va=je[Fr].split(" ");y.push([Va[0]+" ",Zo,Qo]),Ah=0;for(var ja=1;ja<Va.length;ja++){var Up=(nd(Va[ja-1]+" "+Va[ja])-nd(Va[ja]))*ar+V0;ja==Va.length-1?y.push([Va[ja],Up,0]):y.push([Va[ja]+" ",Up,0]),Ah-=Up}}else y.push([je[Fr],Zo,Qo]);y.push(["",Ah,0])}else{if(dt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(y=[],ce=je.length,Ut=Ut!==0?Ut:Nc,Fr=0;Fr<ce;Fr++){Qo=Fr===0?di(G):-Ms,Zo=Fr===0?Js(P):0;var zp=je[Fr].split(" ").length-1,$p=zp>0?(Ut-dr[Fr])/zp:0;Fr<ce-1?Pl.push(N(M($p))):Pl.push(0),y.push([je[Fr],Zo,Qo])}}}(typeof re.R2L=="boolean"?re.R2L:It)===!0&&(y=Yo(y,function(kn,Qn,Vr){return[kn.split("").reverse().join(""),Qn,Vr]})),Me={text:y,x:P,y:G,options:re,mutex:{pdfEscape:zi,activeFontKey:lt,fonts:nn,activeFontSize:ze}},Cn.publish("postProcessText",Me),y=Me.text,br=Me.mutex.isHex||!1;var qp=nn[lt].encoding;qp!=="WinAnsiEncoding"&&qp!=="StandardEncoding"||(y=Yo(y,function(kn,Qn,Vr){return[As(kn),Qn,Vr]})),je=Ml(y),y=[];for(var Ol,Rl,Ll,rd=Array.isArray(je[0])?1:0,Fl="",id=function(kn,Qn,Vr){var oi="";return Vr instanceof Et?(Vr=typeof re.angle=="number"?Es(Vr,new Et(1,0,0,1,kn,Qn)):Es(new Et(1,0,0,1,kn,Qn),Vr),J===ee&&(Vr=Es(new Et(1,0,0,-1,0,0),Vr)),oi=Vr.join(" ")+` Tm
`):oi=N(kn)+" "+N(Qn)+` Td
`,oi},Ps=0;Ps<je.length;Ps++){switch(Fl="",rd){case 1:Ll=(br?"<":"(")+je[Ps][0]+(br?">":")"),Ol=parseFloat(je[Ps][1]),Rl=parseFloat(je[Ps][2]);break;case 0:Ll=(br?"<":"(")+je[Ps]+(br?">":")"),Ol=Js(P),Rl=di(G)}Pl!==void 0&&Pl[Ps]!==void 0&&(Fl=Pl[Ps]+` Tw
`),Ps===0?y.push(Fl+id(Ol,Rl,Wn)+Ll):rd===0?y.push(Fl+Ll):rd===1&&y.push(Fl+id(Ol,Rl,Wn)+Ll)}y=rd===0?y.join(` Tj
T* `):y.join(` Tj
`),y+=` Tj
`;var Ba=`BT
/`;return Ba+=lt+" "+ze+` Tf
`,Ba+=N(ze*So)+` TL
`,Ba+=Fa+`
`,Ba+=Kr,Ba+=y,W(Ba+="ET"),_[lt]=!0,Fn};var xl=p.__private__.clip=p.clip=function(y){return W(y==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return xl("evenodd")},p.__private__.discardPath=p.discardPath=function(){return W("n"),this};var Wo=p.__private__.isValidStyle=function(y){var P=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(y)!==-1&&(P=!0),P};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(y){return Wo(y)&&(l=y),this};var Nn=p.__private__.getStyle=p.getStyle=function(y){var P=l;switch(y){case"D":case"S":P="S";break;case"F":P="f";break;case"FD":case"DF":P="B";break;case"f":case"f*":case"B":case"B*":P=y}return P},Sc=p.close=function(){return W("h"),this};p.stroke=function(){return W("S"),this},p.fill=function(y){return Ss("f",y),this},p.fillEvenOdd=function(y){return Ss("f*",y),this},p.fillStroke=function(y){return Ss("B",y),this},p.fillStrokeEvenOdd=function(y){return Ss("B*",y),this};var Ss=function(y,P){Gn(P)==="object"?Ih(P,y):W(y)},Go=function(y){y===null||J===ee&&y===void 0||(y=Nn(y),W(y))};function kp(y,P,G,re,he){var Me=new Dp(P||this.boundingBox,G||this.xStep,re||this.yStep,this.gState,he||this.matrix);Me.stream=this.stream;var je=y+"$$"+this.cloneIndex+++"$$";return ro(je,Me),Me}var Ih=function(y,P){var G=$n[y.key],re=xt[G];if(re instanceof _h)W("q"),W(Op(P)),re.gState&&p.setGState(re.gState),W(y.matrix.toString()+" cm"),W("/"+G+" sh"),W("Q");else if(re instanceof Dp){var he=new Et(1,0,0,-1,0,ta());y.matrix&&(he=he.multiply(y.matrix||sr),G=kp.call(re,y.key,y.boundingBox,y.xStep,y.yStep,he).id),W("q"),W("/Pattern cs"),W("/"+G+" scn"),re.gState&&p.setGState(re.gState),W(P),W("Q")}},Op=function(y){switch(y){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Xu=p.moveTo=function(y,P){return W(N(M(y))+" "+N(ne(P))+" m"),this},xh=p.lineTo=function(y,P){return W(N(M(y))+" "+N(ne(P))+" l"),this},Ko=p.curveTo=function(y,P,G,re,he,Me){return W([N(M(y)),N(ne(P)),N(M(G)),N(ne(re)),N(M(he)),N(ne(Me)),"c"].join(" ")),this};p.__private__.line=p.line=function(y,P,G,re,he){if(isNaN(y)||isNaN(P)||isNaN(G)||isNaN(re)||!Wo(he))throw new Error("Invalid arguments passed to jsPDF.line");return J===X?this.lines([[G-y,re-P]],y,P,[1,1],he||"S"):this.lines([[G-y,re-P]],y,P,[1,1]).stroke()},p.__private__.lines=p.lines=function(y,P,G,re,he,Me){var je,st,dt,Lt,Ut,mn,er,Wn,Fn,Tr,br,Kr;if(typeof y=="number"&&(Kr=G,G=P,P=y,y=Kr),re=re||[1,1],Me=Me||!1,isNaN(P)||isNaN(G)||!Array.isArray(y)||!Array.isArray(re)||!Wo(he)||typeof Me!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Xu(P,G),je=re[0],st=re[1],Lt=y.length,Tr=P,br=G,dt=0;dt<Lt;dt++)(Ut=y[dt]).length===2?(Tr=Ut[0]*je+Tr,br=Ut[1]*st+br,xh(Tr,br)):(mn=Ut[0]*je+Tr,er=Ut[1]*st+br,Wn=Ut[2]*je+Tr,Fn=Ut[3]*st+br,Tr=Ut[4]*je+Tr,br=Ut[5]*st+br,Ko(mn,er,Wn,Fn,Tr,br));return Me&&Sc(),Go(he),this},p.path=function(y){for(var P=0;P<y.length;P++){var G=y[P],re=G.c;switch(G.op){case"m":Xu(re[0],re[1]);break;case"l":xh(re[0],re[1]);break;case"c":Ko.apply(this,re);break;case"h":Sc()}}return this},p.__private__.rect=p.rect=function(y,P,G,re,he){if(isNaN(y)||isNaN(P)||isNaN(G)||isNaN(re)||!Wo(he))throw new Error("Invalid arguments passed to jsPDF.rect");return J===X&&(re=-re),W([N(M(y)),N(ne(P)),N(M(G)),N(M(re)),"re"].join(" ")),Go(he),this},p.__private__.triangle=p.triangle=function(y,P,G,re,he,Me,je){if(isNaN(y)||isNaN(P)||isNaN(G)||isNaN(re)||isNaN(he)||isNaN(Me)||!Wo(je))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[G-y,re-P],[he-G,Me-re],[y-he,P-Me]],y,P,[1,1],je,!0),this},p.__private__.roundedRect=p.roundedRect=function(y,P,G,re,he,Me,je){if(isNaN(y)||isNaN(P)||isNaN(G)||isNaN(re)||isNaN(he)||isNaN(Me)||!Wo(je))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var st=4/3*(Math.SQRT2-1);return he=Math.min(he,.5*G),Me=Math.min(Me,.5*re),this.lines([[G-2*he,0],[he*st,0,he,Me-Me*st,he,Me],[0,re-2*Me],[0,Me*st,-he*st,Me,-he,Me],[2*he-G,0],[-he*st,0,-he,-Me*st,-he,-Me],[0,2*Me-re],[0,-Me*st,he*st,-Me,he,-Me]],y+he,P,[1,1],je,!0),this},p.__private__.ellipse=p.ellipse=function(y,P,G,re,he){if(isNaN(y)||isNaN(P)||isNaN(G)||isNaN(re)||!Wo(he))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Me=4/3*(Math.SQRT2-1)*G,je=4/3*(Math.SQRT2-1)*re;return Xu(y+G,P),Ko(y+G,P-je,y+Me,P-re,y,P-re),Ko(y-Me,P-re,y-G,P-je,y-G,P),Ko(y-G,P+je,y-Me,P+re,y,P+re),Ko(y+Me,P+re,y+G,P+je,y+G,P),Go(he),this},p.__private__.circle=p.circle=function(y,P,G,re){if(isNaN(y)||isNaN(P)||isNaN(G)||!Wo(re))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(y,P,G,G,re)},p.setFont=function(y,P,G){return G&&(P=H(P,G)),lt=Yu(y,P,{disableWarning:!1}),this};var Dc=p.__private__.getFont=p.getFont=function(){return nn[Yu.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var y,P,G={};for(y in rn)if(rn.hasOwnProperty(y))for(P in G[y]=[],rn[y])rn[y].hasOwnProperty(P)&&G[y].push(P);return G},p.addFont=function(y,P,G,re,he){var Me=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Me.indexOf(arguments[3])!==-1?he=arguments[3]:arguments[3]&&Me.indexOf(arguments[3])==-1&&(G=H(G,re)),Gu.call(this,y,P,G,he=he||"Identity-H")};var $i,Sl=n.lineWidth||.200025,Sh=p.__private__.getLineWidth=p.getLineWidth=function(){return Sl},Ft=p.__private__.setLineWidth=p.setLineWidth=function(y){return Sl=y,W(N(M(y))+" w"),this};p.__private__.setLineDash=_t.API.setLineDash=_t.API.setLineDashPattern=function(y,P){if(y=y||[],P=P||0,isNaN(P)||!Array.isArray(y))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return y=y.map(function(G){return N(M(G))}).join(" "),P=N(M(P)),W("["+y+"] "+P+" d"),this};var Ra=p.__private__.getLineHeight=p.getLineHeight=function(){return ze*$i};p.__private__.getLineHeight=p.getLineHeight=function(){return ze*$i};var Rp=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(y){return typeof(y=y||1.15)=="number"&&($i=y),this},Lp=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return $i};Rp(n.lineHeight);var Js=p.__private__.getHorizontalCoordinate=function(y){return M(y)},di=p.__private__.getVerticalCoordinate=function(y){return J===ee?y:Dt[Q].mediaBox.topRightY-Dt[Q].mediaBox.bottomLeftY-M(y)},Fp=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(y){return N(Js(y))},Vp=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(y){return N(di(y))},Ds=n.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return io(Ds)},p.__private__.setStrokeColor=p.setDrawColor=function(y,P,G,re){return Ds=Eo({ch1:y,ch2:P,ch3:G,ch4:re,pdfColorType:"draw",precision:2}),W(Ds),this};var La=n.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return io(La)},p.__private__.setFillColor=p.setFillColor=function(y,P,G,re){return La=Eo({ch1:y,ch2:P,ch3:G,ch4:re,pdfColorType:"fill",precision:2}),W(La),this};var Fa=n.textColor||"0 g",Tc=p.__private__.getTextColor=p.getTextColor=function(){return io(Fa)};p.__private__.setTextColor=p.setTextColor=function(y,P,G,re){return Fa=Eo({ch1:y,ch2:P,ch3:G,ch4:re,pdfColorType:"text",precision:3}),this};var ao=n.charSpace,Dh=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(ao||0)};p.__private__.setCharSpace=p.setCharSpace=function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ao=y,this};var Ac=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(y){var P=p.CapJoinStyles[y];if(P===void 0)throw new Error("Line cap style of '"+y+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ac=P,W(P+" J"),this};var Hn=0;p.__private__.setLineJoin=p.setLineJoin=function(y){var P=p.CapJoinStyles[y];if(P===void 0)throw new Error("Line join style of '"+y+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Hn=P,W(P+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(y){if(y=y||0,isNaN(y))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return W(N(M(y))+" M"),this},p.GState=uw,p.setGState=function(y){(y=typeof y=="string"?At[$t[y]]:Th(null,y)).equals(Yn)||(W("/"+y.id+" gs"),Yn=y)};var Th=function(y,P){if(!y||!$t[y]){var G=!1;for(var re in At)if(At.hasOwnProperty(re)&&At[re].equals(P)){G=!0;break}if(G)P=At[re];else{var he="GS"+(Object.keys(At).length+1).toString(10);At[he]=P,P.id=he}return y&&($t[y]=P.id),Cn.publish("addGState",P),P}};p.addGState=function(y,P){return Th(y,P),this},p.saveGraphicsState=function(){return W("q"),zn.push({key:lt,size:ze,color:Fa}),this},p.restoreGraphicsState=function(){W("Q");var y=zn.pop();return lt=y.key,ze=y.size,Fa=y.color,Yn=null,this},p.setCurrentTransformationMatrix=function(y){return W(y.toString()+" cm"),this},p.comment=function(y){return W("#"+y),this};var Xs=function(y,P){var G=y||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return G},set:function(Me){isNaN(Me)||(G=parseFloat(Me))}});var re=P||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return re},set:function(Me){isNaN(Me)||(re=parseFloat(Me))}});var he="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return he},set:function(Me){he=Me.toString()}}),this},Dl=function(y,P,G,re){Xs.call(this,y,P),this.type="rect";var he=G||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return he},set:function(je){isNaN(je)||(he=parseFloat(je))}});var Me=re||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Me},set:function(je){isNaN(je)||(Me=parseFloat(je))}}),this},Mc=function(){this.page=Wt,this.currentPage=Q,this.pages=qe.slice(0),this.pagesContext=Dt.slice(0),this.x=gt,this.y=yr,this.matrix=un,this.width=Al(Q),this.height=ed(Q),this.outputDestination=et,this.id="",this.objectNumber=-1};Mc.prototype.restore=function(){Wt=this.page,Q=this.currentPage,Dt=this.pagesContext,qe=this.pages,gt=this.x,yr=this.y,un=this.matrix,xo(Q,this.width),ea(Q,this.height),et=this.outputDestination};var Tl=function(y,P,G,re,he){zo.push(new Mc),Wt=Q=0,qe=[],gt=y,yr=P,un=he,Zs([G,re])};for(var Ts in p.beginFormObject=function(y,P,G,re,he){return Tl(y,P,G,re,he),this},p.endFormObject=function(y){return(function(P){if(wo[P])zo.pop().restore();else{var G=new Mc,re="Xo"+(Object.keys(ri).length+1).toString(10);G.id=re,wo[P]=re,ri[re]=G,Cn.publish("addFormObject",G),zo.pop().restore()}})(y),this},p.doFormObject=function(y,P){var G=ri[wo[y]];return W("q"),W(P.toString()+" cm"),W("/"+G.id+" Do"),W("Q"),this},p.getFormObject=function(y){var P=ri[wo[y]];return{x:P.x,y:P.y,width:P.width,height:P.height,matrix:P.matrix}},p.save=function(y,P){return y=y||"generated.pdf",(P=P||{}).returnPromise=P.returnPromise||!1,P.returnPromise===!1?(yh(El(xs()),y),typeof yh.unload=="function"&&zt.setTimeout&&setTimeout(yh.unload,911),this):new Promise(function(G,re){try{var he=yh(El(xs()),y);typeof yh.unload=="function"&&zt.setTimeout&&setTimeout(yh.unload,911),G(he)}catch(Me){re(Me.message)}})},_t.API)_t.API.hasOwnProperty(Ts)&&(Ts==="events"&&_t.API.events.length?(function(y,P){var G,re,he;for(he=P.length-1;he!==-1;he--)G=P[he][0],re=P[he][1],y.subscribe.apply(y,[G].concat(typeof re=="function"?[re]:re))})(Cn,_t.API.events):p[Ts]=_t.API[Ts]);function Al(y){return Dt[y].mediaBox.topRightX-Dt[y].mediaBox.bottomLeftX}function xo(y,P){Dt[y].mediaBox.topRightX=P+Dt[y].mediaBox.bottomLeftX}function ed(y){return Dt[y].mediaBox.topRightY-Dt[y].mediaBox.bottomLeftY}function ea(y,P){Dt[y].mediaBox.topRightY=P+Dt[y].mediaBox.bottomLeftY}var co=p.getPageWidth=function(y){return Al(y=y||Q)/Ht},td=p.setPageWidth=function(y,P){xo(y,P*Ht)},ta=p.getPageHeight=function(y){return ed(y=y||Q)/Ht},Pc=p.setPageHeight=function(y,P){ea(y,P*Ht)};return p.internal={pdfEscape:zi,getStyle:Nn,getFont:Dc,getFontSize:ot,getCharSpace:Dh,getTextColor:Tc,getLineHeight:Ra,getLineHeightFactor:Lp,getLineWidth:Sh,write:Xe,getHorizontalCoordinate:Js,getVerticalCoordinate:di,getCoordinateString:Fp,getVerticalCoordinateString:Vp,collections:{},newObject:qn,newAdditionalObject:Co,newObjectDeferred:Gr,newObjectDeferredBegin:ii,getFilters:oo,putStream:Si,events:Cn,scaleFactor:Ht,pageSize:{getWidth:function(){return co(Q)},setWidth:function(y){td(Q,y)},getHeight:function(){return ta(Q)},setHeight:function(y){Pc(Q,y)}},encryptionOptions:u,encryption:Lr,getEncryptor:function(y){return u!==null?Lr.encryptor(y,0):function(P){return P}},output:Ju,getNumberOfPages:Ku,get pages(){return qe},out:W,f2:x,f3:A,getPageInfo:Di,getPageInfoByObjId:Io,getCurrentPageInfo:Il,getPDFVersion:k,Point:Xs,Rectangle:Dl,Matrix:Et,hasHotfix:so},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return co(Q)},set:function(y){td(Q,y)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return ta(Q)},set:function(y){Pc(Q,y)},enumerable:!0,configurable:!0}),(function(y){for(var P=0,G=Tt.length;P<G;P++){var re=Gu.call(this,y[P][0],y[P][1],y[P][2],Tt[P][3],!0);m===!1&&(_[re]=!0);var he=y[P][0].split("-");Ic({id:re,fontName:he[0],fontStyle:he[1]||""})}Cn.publish("addFonts",{fonts:nn,dictionary:rn})}).call(p,Tt),lt="F1",Is(i,t),Cn.publish("initialized"),p}xp.prototype.lsbFirstWord=function(n){return String.fromCharCode(255&n,n>>8&255,n>>16&255,n>>24&255)},xp.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},xp.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},xp.prototype.processOwnerPassword=function(n,e){return oA(iA(e).substr(0,5),n)},xp.prototype.encryptor=function(n,e){var t=iA(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return oA(t,r)}},uw.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||Gn(n)!==Gn(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},_t.API={events:[]},_t.version="3.0.4";var Rr=_t.API,cA=1,wh=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ep=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Zt=function(n){return n.toFixed(2)},$u=function(n){return n.toFixed(5)};Rr.__acroform__={};var Uo=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},b8=function(n){return n*cA},bc=function(n){var e=new $8,t=ut.internal.getHeight(n)||0,r=ut.internal.getWidth(n)||0;return e.BBox=[0,0,Number(Zt(r)),Number(Zt(t))],e},Jne=Rr.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|1<<e},Xne=Rr.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&~(1<<e)},ere=Rr.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},qr=Rr.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return ere(n,e-1)},Hr=Rr.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Jne(n,e-1)},Wr=Rr.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Xne(n,e-1)},tre=Rr.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=n[0],o=n[1],s=n[2],a=n[3],c={};return c.lowerLeft_X=t(i)||0,c.lowerLeft_Y=r(o+a)||0,c.upperRight_X=t(i+s)||0,c.upperRight_Y=r(o)||0,[Number(Zt(c.lowerLeft_X)),Number(Zt(c.lowerLeft_Y)),Number(Zt(c.upperRight_X)),Number(Zt(c.upperRight_Y))]},nre=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=sA(n,t),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+i+" "+Zt(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=bc(n);return o.scope=n.scope,o.stream=e.join(`
`),o}},sA=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=n.multiline?i.map(function(x){return x.split(`
`)}):i.map(function(x){return[x]});var o=t,s=ut.internal.getHeight(n)||0;s=s<0?-s:s;var a=ut.internal.getWidth(n)||0;a=a<0?-a:a;var c=function(x,A,M){if(x+1<i.length){var ne=A+" "+i[x+1][0];return nw(ne,n,M).width<=a-4}return!1};o++;e:for(;o>0;){e="",o--;var l,u,m=nw("3",n,o).height,_=n.multiline?s-o:(s-m)/2,p=_+=2,D=0,k=0,L=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+nw(e,n,o=12).width+", FieldWidth:"+a+`
`;break}for(var R="",X=0,ee=0;ee<i.length;ee++)if(i.hasOwnProperty(ee)){var J=!1;if(i[ee].length!==1&&L!==i[ee].length-1){if((m+2)*(X+2)+2>s)continue e;R+=i[ee][L],J=!0,k=ee,ee--}else{R=(R+=i[ee][L]+" ").substr(R.length-1)==" "?R.substr(0,R.length-1):R;var _e=parseInt(ee),Ce=c(_e,R,o),H=ee>=i.length-1;if(Ce&&!H){R+=" ",L=0;continue}if(Ce||H){if(H)k=_e;else if(n.multiline&&(m+2)*(X+2)+2>s)continue e}else{if(!n.multiline||(m+2)*(X+2)+2>s)continue e;k=_e}}for(var N="",T=D;T<=k;T++){var U=i[T];if(n.multiline){if(T===k){N+=U[L]+" ",L=(L+1)%U.length;continue}if(T===D){N+=U[U.length-1]+" ";continue}}N+=U[0]+" "}switch(N=N.substr(N.length-1)==" "?N.substr(0,N.length-1):N,u=nw(N,n,o).width,n.textAlign){case"right":l=a-u-2;break;case"center":l=(a-u)/2;break;default:l=2}e+=Zt(l)+" "+Zt(p)+` Td
`,e+="("+wh(N)+`) Tj
`,e+=-Zt(l)+` 0 Td
`,p=-(o+2),u=0,D=J?k:k+1,X++,R=""}break}return r.text=e,r.fontSize=o,r},nw=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},rre={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},ire=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},ore=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(Ta.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(rre)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");cA=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new q8,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var o=r[i];o.objId=void 0,o.hasAnnotation&&ire(o,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,i){var o=!r;for(var s in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(s)){var a=r[s],c=[],l=a.Rect;if(a.Rect&&(a.Rect=tre(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=ut.createDefaultAppearanceStream(a),Gn(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(c=a.getKeyValueListForStream()),a.Rect=l,a.hasAppearanceStream&&!a.appearanceStreamContent){var u=nre(a);c.push({key:"AP",value:"<</N "+u+">>"}),i.internal.acroformPlugin.xForms.push(u)}if(a.appearanceStreamContent){var m="";for(var _ in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(_)){var p=a.appearanceStreamContent[_];if(m+="/"+_+" ",m+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var s in p)if(p.hasOwnProperty(s)){var D=p[s];typeof D=="function"&&(D=D.call(i,a)),m+="/"+s+" "+D+" ",i.internal.acroformPlugin.xForms.indexOf(D)>=0||i.internal.acroformPlugin.xForms.push(D)}}else typeof(D=p)=="function"&&(D=D.call(i,a)),m+="/"+s+" "+D,i.internal.acroformPlugin.xForms.indexOf(D)>=0||i.internal.acroformPlugin.xForms.push(D);m+=">>"}c.push({key:"AP",value:`<<
`+m+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:a.objId}),i.internal.out("endobj")}o&&(function(k,L){for(var R in k)if(k.hasOwnProperty(R)){var X=R,ee=k[R];L.internal.newObjectDeferredBegin(ee.objId,!0),Gn(ee)==="object"&&typeof ee.putStream=="function"&&ee.putStream(),delete k[X]}})(i.internal.acroformPlugin.xForms,i)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},z8=Rr.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(s){return s};if(Array.isArray(n)){for(var i="[",o=0;o<n.length;o++)switch(o!==0&&(i+=" "),Gn(n[o])){case"boolean":case"number":case"object":i+=n[o].toString();break;case"string":n[o].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),i+="("+wh(r(n[o].toString()))+")"):i+=n[o].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},XT=function(n,e,t){var r=function(i){return i};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),"("+wh(r(n))+")"},wc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};wc.prototype.toString=function(){return this.objId+" 0 R"},wc.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},wc.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],i=this[r];i&&(Array.isArray(i)?n.push({key:r,value:z8(i,this.objId,this.scope)}):i instanceof wc?(i.scope=this.scope,n.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&n.push({key:r,value:i}))}return n};var $8=function(){wc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};Uo($8,wc);var q8=function(){wc.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+wh(t(n))+")"}},set:function(t){n=t}})};Uo(q8,wc);var Ta=function n(){wc.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(R){if(isNaN(R))throw new Error('Invalid value "'+R+'" for attribute F supplied.');e=R}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!qr(e,3)},set:function(R){R?this.F=Hr(e,3):this.F=Wr(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(R){if(isNaN(R))throw new Error('Invalid value "'+R+'" for attribute Ff supplied.');t=R}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(R){r=R!==void 0?R:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(R){r[0]=R}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(R){r[1]=R}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(R){r[2]=R}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(R){r[3]=R}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(R){switch(R){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=R;break;default:throw new Error('Invalid value "'+R+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof dw)return;o="FieldObject"+n.FieldNum++}var R=function(X){return X};return this.scope&&(R=this.scope.internal.getEncryptor(this.objId)),"("+wh(R(o))+")"},set:function(R){o=R.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(R){o=R}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(R){s=R}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(R){a=R}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(R){c=R}});var l=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return l===void 0?50/cA:l},set:function(R){l=R}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(R){u=R}});var m="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!m||this instanceof dw||this instanceof bh))return XT(m,this.objId,this.scope)},set:function(R){R=R.toString(),m=R}});var _=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(_)return this instanceof xi==0?XT(_,this.objId,this.scope):_},set:function(R){R=R.toString(),_=this instanceof xi==0?R.substr(0,1)==="("?Ep(R.substr(1,R.length-2)):Ep(R):R}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof xi==1?Ep(_.substr(1,_.length-1)):_},set:function(R){R=R.toString(),_=this instanceof xi==1?"/"+R:R}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(R){this.V=R}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof xi==0?XT(p,this.objId,this.scope):p},set:function(R){R=R.toString(),p=this instanceof xi==0?R.substr(0,1)==="("?Ep(R.substr(1,R.length-2)):Ep(R):R}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof xi==1?Ep(p.substr(1,p.length-1)):p},set:function(R){R=R.toString(),p=this instanceof xi==1?"/"+R:R}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var D,k=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return k},set:function(R){R=!!R,k=R}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(D)return D},set:function(R){D=R}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!qr(this.Ff,1)},set:function(R){R?this.Ff=Hr(this.Ff,1):this.Ff=Wr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!qr(this.Ff,2)},set:function(R){R?this.Ff=Hr(this.Ff,2):this.Ff=Wr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!qr(this.Ff,3)},set:function(R){R?this.Ff=Hr(this.Ff,3):this.Ff=Wr(this.Ff,3)}});var L=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(L!==null)return L},set:function(R){if([0,1,2].indexOf(R)===-1)throw new Error('Invalid value "'+R+'" for attribute Q supplied.');L=R}}),Object.defineProperty(this,"textAlign",{get:function(){var R;switch(L){case 0:default:R="left";break;case 1:R="center";break;case 2:R="right"}return R},configurable:!0,enumerable:!0,set:function(R){switch(R){case"right":case 2:L=2;break;case"center":case 1:L=1;break;default:L=0}}})};Uo(Ta,wc);var Tp=function(){Ta.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return z8(e,this.objId,this.scope)},set:function(t){var r,i;i=[],typeof(r=t)=="string"&&(i=(function(o,s,a){a||(a=1);for(var c,l=[];c=s.exec(o);)l.push(c[a]);return l})(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!qr(this.Ff,18)},set:function(t){t?this.Ff=Hr(this.Ff,18):this.Ff=Wr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!qr(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=Hr(this.Ff,19):this.Ff=Wr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!qr(this.Ff,20)},set:function(t){t?(this.Ff=Hr(this.Ff,20),e.sort()):this.Ff=Wr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!qr(this.Ff,22)},set:function(t){t?this.Ff=Hr(this.Ff,22):this.Ff=Wr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!qr(this.Ff,23)},set:function(t){t?this.Ff=Hr(this.Ff,23):this.Ff=Wr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!qr(this.Ff,27)},set:function(t){t?this.Ff=Hr(this.Ff,27):this.Ff=Wr(this.Ff,27)}}),this.hasAppearanceStream=!1};Uo(Tp,Ta);var Ap=function(){Tp.call(this),this.fontName="helvetica",this.combo=!1};Uo(Ap,Tp);var Mp=function(){Ap.call(this),this.combo=!0};Uo(Mp,Ap);var sw=function(){Mp.call(this),this.edit=!0};Uo(sw,Mp);var xi=function(){Ta.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!qr(this.Ff,15)},set:function(t){t?this.Ff=Hr(this.Ff,15):this.Ff=Wr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!qr(this.Ff,16)},set:function(t){t?this.Ff=Hr(this.Ff,16):this.Ff=Wr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!qr(this.Ff,17)},set:function(t){t?this.Ff=Hr(this.Ff,17):this.Ff=Wr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!qr(this.Ff,26)},set:function(t){t?this.Ff=Hr(this.Ff,26):this.Ff=Wr(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(o){return o};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+wh(t(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){Gn(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};Uo(xi,Ta);var aw=function(){xi.call(this),this.pushButton=!0};Uo(aw,xi);var Pp=function(){xi.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};Uo(Pp,xi);var dw=function(){var n,e;Ta.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var o,s=[];for(o in s.push("<<"),r)s.push("/"+o+" ("+wh(i(r[o]))+")");return s.push(">>"),s.join(`
`)},set:function(i){Gn(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=ut.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Uo(dw,Ta),Pp.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},Pp.prototype.createOption=function(n){var e=new dw;return e.Parent=this,e.optionName=n,this.Kids.push(e),sre.call(this.scope,e),e};var cw=function(){xi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=ut.CheckBox.createAppearanceStream()};Uo(cw,xi);var bh=function(){Ta.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!qr(this.Ff,13)},set:function(e){e?this.Ff=Hr(this.Ff,13):this.Ff=Wr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!qr(this.Ff,21)},set:function(e){e?this.Ff=Hr(this.Ff,21):this.Ff=Wr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!qr(this.Ff,23)},set:function(e){e?this.Ff=Hr(this.Ff,23):this.Ff=Wr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!qr(this.Ff,24)},set:function(e){e?this.Ff=Hr(this.Ff,24):this.Ff=Wr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!qr(this.Ff,25)},set:function(e){e?this.Ff=Hr(this.Ff,25):this.Ff=Wr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!qr(this.Ff,26)},set:function(e){e?this.Ff=Hr(this.Ff,26):this.Ff=Wr(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Uo(bh,Ta);var lw=function(){bh.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!qr(this.Ff,14)},set:function(n){n?this.Ff=Hr(this.Ff,14):this.Ff=Wr(this.Ff,14)}}),this.password=!0};Uo(lw,bh);var ut={CheckBox:{createAppearanceStream:function(){return{N:{On:ut.CheckBox.YesNormal},D:{On:ut.CheckBox.YesPushDown,Off:ut.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=bc(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),o=sA(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+Zt(ut.internal.getWidth(n))+" "+Zt(ut.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+Zt(o.fontSize)+" Tf "+i),t.push("BT"),t.push(o.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=bc(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),i=[],o=ut.internal.getHeight(n),s=ut.internal.getWidth(n),a=sA(n,n.caption);return i.push("1 g"),i.push("0 0 "+Zt(s)+" "+Zt(o)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Zt(s-1)+" "+Zt(o-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+Zt(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=bc(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Zt(ut.internal.getWidth(n))+" "+Zt(ut.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:ut.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=ut.RadioButton.Circle.YesNormal,e.D[n]=ut.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=bc(n);e.scope=n.scope;var t=[],r=ut.internal.getWidth(n)<=ut.internal.getHeight(n)?ut.internal.getWidth(n)/4:ut.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=ut.internal.Bezier_C,o=Number((r*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+$u(ut.internal.getWidth(n)/2)+" "+$u(ut.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),t.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),t.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),t.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=bc(n);e.scope=n.scope;var t=[],r=ut.internal.getWidth(n)<=ut.internal.getHeight(n)?ut.internal.getWidth(n)/4:ut.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*ut.internal.Bezier_C).toFixed(5)),s=Number((r*ut.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+$u(ut.internal.getWidth(n)/2)+" "+$u(ut.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),t.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),t.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),t.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+$u(ut.internal.getWidth(n)/2)+" "+$u(ut.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=bc(n);e.scope=n.scope;var t=[],r=ut.internal.getWidth(n)<=ut.internal.getHeight(n)?ut.internal.getWidth(n)/4:ut.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*ut.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+$u(ut.internal.getWidth(n)/2)+" "+$u(ut.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),t.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),t.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),t.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:ut.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=ut.RadioButton.Cross.YesNormal,e.D[n]=ut.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=bc(n);e.scope=n.scope;var t=[],r=ut.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+Zt(ut.internal.getWidth(n)-2)+" "+Zt(ut.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(Zt(r.x1.x)+" "+Zt(r.x1.y)+" m"),t.push(Zt(r.x2.x)+" "+Zt(r.x2.y)+" l"),t.push(Zt(r.x4.x)+" "+Zt(r.x4.y)+" m"),t.push(Zt(r.x3.x)+" "+Zt(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=bc(n);e.scope=n.scope;var t=ut.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+Zt(ut.internal.getWidth(n))+" "+Zt(ut.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Zt(ut.internal.getWidth(n)-2)+" "+Zt(ut.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(Zt(t.x1.x)+" "+Zt(t.x1.y)+" m"),r.push(Zt(t.x2.x)+" "+Zt(t.x2.y)+" l"),r.push(Zt(t.x4.x)+" "+Zt(t.x4.y)+" m"),r.push(Zt(t.x3.x)+" "+Zt(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=bc(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Zt(ut.internal.getWidth(n))+" "+Zt(ut.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};ut.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=ut.internal.getWidth(n),t=ut.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},ut.internal.getWidth=function(n){var e=0;return Gn(n)==="object"&&(e=b8(n.Rect[2])),e},ut.internal.getHeight=function(n){var e=0;return Gn(n)==="object"&&(e=b8(n.Rect[3])),e};var sre=Rr.addField=function(n){if(ore(this,n),!(n instanceof Ta))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};Rr.AcroFormChoiceField=Tp,Rr.AcroFormListBox=Ap,Rr.AcroFormComboBox=Mp,Rr.AcroFormEditBox=sw,Rr.AcroFormButton=xi,Rr.AcroFormPushButton=aw,Rr.AcroFormRadioButton=Pp,Rr.AcroFormCheckBox=cw,Rr.AcroFormTextField=bh,Rr.AcroFormPasswordField=lw,Rr.AcroFormAppearance=ut,Rr.AcroForm={ChoiceField:Tp,ListBox:Ap,ComboBox:Mp,EditBox:sw,Button:xi,PushButton:aw,RadioButton:Pp,CheckBox:cw,TextField:bh,PasswordField:lw,Appearance:ut},_t.AcroForm={ChoiceField:Tp,ListBox:Ap,ComboBox:Mp,EditBox:sw,Button:xi,PushButton:aw,RadioButton:Pp,CheckBox:cw,TextField:bh,PasswordField:lw,Appearance:ut};var fSe=_t.AcroForm;function H8(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){var e="addImage_";n.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=n.__addimage__.getImageFileTypeByImageData=function(x,A){var M,ne,be,De,Se,ge=t;if((A=A||t)==="RGBA"||x.data!==void 0&&x.data instanceof Uint8ClampedArray&&"height"in x&&"width"in x)return"RGBA";if(Ce(x))for(Se in r)for(be=r[Se],M=0;M<be.length;M+=1){for(De=!0,ne=0;ne<be[M].length;ne+=1)if(be[M][ne]!==void 0&&be[M][ne]!==x[ne]){De=!1;break}if(De===!0){ge=Se;break}}else for(Se in r)for(be=r[Se],M=0;M<be.length;M+=1){for(De=!0,ne=0;ne<be[M].length;ne+=1)if(be[M][ne]!==void 0&&be[M][ne]!==x.charCodeAt(ne)){De=!1;break}if(De===!0){ge=Se;break}}return ge===t&&A!==t&&(ge=A),ge},o=function x(A){for(var M=this.internal.write,ne=this.internal.putStream,be=(0,this.internal.getFilters)();be.indexOf("FlateEncode")!==-1;)be.splice(be.indexOf("FlateEncode"),1);A.objectId=this.internal.newObject();var De=[];if(De.push({key:"Type",value:"/XObject"}),De.push({key:"Subtype",value:"/Image"}),De.push({key:"Width",value:A.width}),De.push({key:"Height",value:A.height}),A.colorSpace===R.INDEXED?De.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(A.palette.length/3-1)+" "+("sMask"in A&&A.sMask!==void 0?A.objectId+2:A.objectId+1)+" 0 R]"}):(De.push({key:"ColorSpace",value:"/"+A.colorSpace}),A.colorSpace===R.DEVICE_CMYK&&De.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),De.push({key:"BitsPerComponent",value:A.bitsPerComponent}),"decodeParameters"in A&&A.decodeParameters!==void 0&&De.push({key:"DecodeParms",value:"<<"+A.decodeParameters+">>"}),"transparency"in A&&Array.isArray(A.transparency)&&A.transparency.length>0){for(var Se="",ge=0,Te=A.transparency.length;ge<Te;ge++)Se+=A.transparency[ge]+" "+A.transparency[ge]+" ";De.push({key:"Mask",value:"["+Se+"]"})}A.sMask!==void 0&&De.push({key:"SMask",value:A.objectId+1+" 0 R"});var We=A.filter!==void 0?["/"+A.filter]:void 0;if(ne({data:A.data,additionalKeyValues:De,alreadyAppliedFilters:We,objectId:A.objectId}),M("endobj"),"sMask"in A&&A.sMask!==void 0){var Be,j=(Be=A.sMaskBitsPerComponent)!==null&&Be!==void 0?Be:A.bitsPerComponent,Q={width:A.width,height:A.height,colorSpace:"DeviceGray",bitsPerComponent:j,data:A.sMask};"filter"in A&&(Q.decodeParameters="/Predictor ".concat(A.predictor," /Colors 1 /BitsPerComponent ").concat(j," /Columns ").concat(A.width),Q.filter=A.filter),x.call(this,Q)}if(A.colorSpace===R.INDEXED){var te=this.internal.newObject();ne({data:N(new Uint8Array(A.palette)),objectId:te}),M("endobj")}},s=function(){var x=this.internal.collections[e+"images"];for(var A in x)o.call(this,x[A])},a=function(){var x,A=this.internal.collections[e+"images"],M=this.internal.write;for(var ne in A)M("/I"+(x=A[ne]).index,x.objectId,"0","R")},c=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",a))},l=function(){var x=this.internal.collections[e+"images"];return c.call(this),x},u=function(){return Object.keys(this.internal.collections[e+"images"]).length},m=function(x){return typeof n["process"+x.toUpperCase()]=="function"},_=function(x){return Gn(x)==="object"&&x.nodeType===1},p=function(x,A){if(x.nodeName==="IMG"&&x.hasAttribute("src")){var M=""+x.getAttribute("src");if(M.indexOf("data:image/")===0)return ow(unescape(M).split("base64,").pop());var ne=n.loadFile(M,!0);if(ne!==void 0)return ne}if(x.nodeName==="CANVAS"){if(x.width===0||x.height===0)throw new Error("Given canvas must have data. Canvas width: "+x.width+", height: "+x.height);var be;switch(A){case"PNG":be="image/png";break;case"WEBP":be="image/webp";break;default:be="image/jpeg"}return ow(x.toDataURL(be,1).split("base64,").pop())}},D=function(x){var A=this.internal.collections[e+"images"];if(A){for(var M in A)if(x===A[M].alias)return A[M]}},k=function(x,A,M){return x||A||(x=-96,A=-96),x<0&&(x=-1*M.width*72/x/this.internal.scaleFactor),A<0&&(A=-1*M.height*72/A/this.internal.scaleFactor),x===0&&(x=A*M.width/M.height),A===0&&(A=x*M.height/M.width),[x,A]},L=function(x,A,M,ne,be,De){var Se=k.call(this,M,ne,be),ge=this.internal.getCoordinateString,Te=this.internal.getVerticalCoordinateString,We=l.call(this);if(M=Se[0],ne=Se[1],We[be.index]=be,De){De*=Math.PI/180;var Be=Math.cos(De),j=Math.sin(De),Q=function(oe){return oe.toFixed(4)},te=[Q(Be),Q(j),Q(-1*j),Q(Be),0,0,"cm"]}this.internal.write("q"),De?(this.internal.write([1,"0","0",1,ge(x),Te(A+ne),"cm"].join(" ")),this.internal.write(te.join(" ")),this.internal.write([ge(M),"0","0",ge(ne),"0","0","cm"].join(" "))):this.internal.write([ge(M),"0","0",ge(ne),ge(x),Te(A+ne),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+be.index+" Do"),this.internal.write("Q")},R=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var X=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},ee=n.__addimage__.sHashCode=function(x){var A,M,ne=0;if(typeof x=="string")for(M=x.length,A=0;A<M;A++)ne=(ne<<5)-ne+x.charCodeAt(A),ne|=0;else if(Ce(x))for(M=x.byteLength/2,A=0;A<M;A++)ne=(ne<<5)-ne+x[A],ne|=0;return ne},J=n.__addimage__.validateStringAsBase64=function(x){(x=x||"").toString().trim();var A=!0;return x.length===0&&(A=!1),x.length%4!=0&&(A=!1),/^[A-Za-z0-9+/]+$/.test(x.substr(0,x.length-2))===!1&&(A=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(x.substr(-2))===!1&&(A=!1),A},_e=n.__addimage__.extractImageFromDataUrl=function(x){if(x==null||!(x=x.trim()).startsWith("data:"))return null;var A=x.indexOf(",");return A<0?null:x.substring(0,A).trim().endsWith("base64")?x.substring(A+1):null};n.__addimage__.isArrayBuffer=function(x){return x instanceof ArrayBuffer};var Ce=n.__addimage__.isArrayBufferView=function(x){return x instanceof Int8Array||x instanceof Uint8Array||x instanceof Uint8ClampedArray||x instanceof Int16Array||x instanceof Uint16Array||x instanceof Int32Array||x instanceof Uint32Array||x instanceof Float32Array||x instanceof Float64Array},H=n.__addimage__.binaryStringToUint8Array=function(x){for(var A=x.length,M=new Uint8Array(A),ne=0;ne<A;ne++)M[ne]=x.charCodeAt(ne);return M},N=n.__addimage__.arrayBufferToBinaryString=function(x){for(var A="",M=Ce(x)?x:new Uint8Array(x),ne=0;ne<M.length;ne+=8192)A+=String.fromCharCode.apply(null,M.subarray(ne,ne+8192));return A};n.addImage=function(){var x,A,M,ne,be,De,Se,ge,Te;if(typeof arguments[1]=="number"?(A=t,M=arguments[1],ne=arguments[2],be=arguments[3],De=arguments[4],Se=arguments[5],ge=arguments[6],Te=arguments[7]):(A=arguments[1],M=arguments[2],ne=arguments[3],be=arguments[4],De=arguments[5],Se=arguments[6],ge=arguments[7],Te=arguments[8]),Gn(x=arguments[0])==="object"&&!_(x)&&"imageData"in x){var We=x;x=We.imageData,A=We.format||A||t,M=We.x||M||0,ne=We.y||ne||0,be=We.w||We.width||be,De=We.h||We.height||De,Se=We.alias||Se,ge=We.compression||ge,Te=We.rotation||We.angle||Te}var Be=this.internal.getFilters();if(ge===void 0&&Be.indexOf("FlateEncode")!==-1&&(ge="SLOW"),isNaN(M)||isNaN(ne))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var j=T.call(this,x,A,Se,ge);return L.call(this,M,ne,be,De,j,Te),this};var T=function(x,A,M,ne){var be,De,Se;if(typeof x=="string"&&i(x)===t){x=unescape(x);var ge=U(x,!1);(ge!==""||(ge=n.loadFile(x,!0))!==void 0)&&(x=ge)}if(_(x)&&(x=p(x,A)),A=i(x,A),!m(A))throw new Error("addImage does not support files of type '"+A+"', please ensure that a plugin for '"+A+"' support is added.");if(((Se=M)==null||Se.length===0)&&(M=(function(Te){return typeof Te=="string"||Ce(Te)?ee(Te):Ce(Te.data)?ee(Te.data):null})(x)),(be=D.call(this,M))||(x instanceof Uint8Array||A==="RGBA"||(De=x,x=H(x)),be=this["process"+A.toUpperCase()](x,u.call(this),M,(function(Te){return Te&&typeof Te=="string"&&(Te=Te.toUpperCase()),Te in n.image_compression?Te:X.NONE})(ne),De)),!be)throw new Error("An unknown error occurred whilst processing the image.");return be},U=n.__addimage__.convertBase64ToBinaryString=function(x,A){A=typeof A!="boolean"||A;var M,ne="";if(typeof x=="string"){var be;M=(be=_e(x))!==null&&be!==void 0?be:x;try{ne=ow(M)}catch(De){if(A)throw J(M)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+De.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ne};n.getImageProperties=function(x){var A,M,ne="";if(_(x)&&(x=p(x)),typeof x=="string"&&i(x)===t&&((ne=U(x,!1))===""&&(ne=n.loadFile(x)||""),x=ne),M=i(x),!m(M))throw new Error("addImage does not support files of type '"+M+"', please ensure that a plugin for '"+M+"' support is added.");if(x instanceof Uint8Array||(x=H(x)),!(A=this["process"+M.toUpperCase()](x)))throw new Error("An unknown error occurred whilst processing the image");return A.fileType=M,A}})(_t.API),(function(n){var e=function(t){if(t!==void 0&&t!="")return!0};_t.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,i,o,s=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(t.objId),l=t.pageContext.annotations,u=!1,m=0;m<l.length&&!u;m++)switch((r=l[m]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var _=0;_<l.length;_++){r=l[_];var p=this.internal.pdfEscape,D=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var k=this.internal.newAdditionalObject(),L=this.internal.newAdditionalObject(),R=this.internal.getEncryptor(k.objId),X=r.title||"Note";o="<</Type /Annot /Subtype /Text "+(i="/Rect ["+s(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+p(R(r.contents))+")",o+=" /Popup "+L.objId+" 0 R",o+=" /P "+c.objId+" 0 R",o+=" /T ("+p(R(X))+") >>",k.content=o;var ee=k.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+s(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+ee,r.open&&(o+=" /Open true"),o+=" >>",L.content=o,this.internal.write(k.objId,"0 R",L.objId,"0 R");break;case"freetext":i="/Rect ["+s(r.bounds.x)+" "+a(r.bounds.y)+" "+s(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var J=r.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+p(D(r.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+J+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(r.options.name){var _e=this.annotations._nameMap[r.options.name];r.options.pageNumber=_e.page,r.options.top=_e.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",o="",r.options.url)o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+p(D(r.options.url))+") >>";else if(r.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,o+=" /FitV "+r.options.left+"]";break;default:var Ce=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),o+=" /XYZ "+r.options.left+" "+Ce+" "+r.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,i,o,s){var a=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:c(t),y:l(r),w:c(t+i),h:l(r+o)},options:s,type:"link"})},n.textWithLink=function(t,r,i,o){var s,a,c=this.getTextWidth(t),l=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){a=o.maxWidth;var u=this.splitTextToSize(t,a).length;s=Math.ceil(l*u)}else a=c,s=l;return this.text(t,r,i,o),i+=.2*l,o.align==="center"&&(r-=c/2),o.align==="right"&&(r-=c),this.link(r,i-l,a,s,o),c},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}})(_t.API),(function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var o=n.__arabicParser__.isInArabicSubstitutionA=function(k){return e[k.charCodeAt(0)]!==void 0},s=n.__arabicParser__.isArabicLetter=function(k){return typeof k=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(k)},a=n.__arabicParser__.isArabicEndLetter=function(k){return s(k)&&o(k)&&e[k.charCodeAt(0)].length<=2},c=n.__arabicParser__.isArabicAlfLetter=function(k){return s(k)&&i.indexOf(k.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(k){return s(k)&&o(k)&&e[k.charCodeAt(0)].length>=1};var l=n.__arabicParser__.arabicLetterHasFinalForm=function(k){return s(k)&&o(k)&&e[k.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(k){return s(k)&&o(k)&&e[k.charCodeAt(0)].length>=3};var u=n.__arabicParser__.arabicLetterHasMedialForm=function(k){return s(k)&&o(k)&&e[k.charCodeAt(0)].length==4},m=n.__arabicParser__.resolveLigatures=function(k){var L=0,R=t,X="",ee=0;for(L=0;L<k.length;L+=1)R[k.charCodeAt(L)]!==void 0?(ee++,typeof(R=R[k.charCodeAt(L)])=="number"&&(X+=String.fromCharCode(R),R=t,ee=0),L===k.length-1&&(R=t,X+=k.charAt(L-(ee-1)),L-=ee-1,ee=0)):(R=t,X+=k.charAt(L-ee),L-=ee,ee=0);return X};n.__arabicParser__.isArabicDiacritic=function(k){return k!==void 0&&r[k.charCodeAt(0)]!==void 0};var _=n.__arabicParser__.getCorrectForm=function(k,L,R){return s(k)?o(k)===!1?-1:!l(k)||!s(L)&&!s(R)||!s(R)&&a(L)||a(k)&&!s(L)||a(k)&&c(L)||a(k)&&a(L)?0:u(k)&&s(L)&&!a(L)&&s(R)&&l(R)?3:a(k)||!s(R)?1:2:-1},p=function(k){var L=0,R=0,X=0,ee="",J="",_e="",Ce=(k=k||"").split("\\s+"),H=[];for(L=0;L<Ce.length;L+=1){for(H.push(""),R=0;R<Ce[L].length;R+=1)ee=Ce[L][R],J=Ce[L][R-1],_e=Ce[L][R+1],s(ee)?(X=_(ee,J,_e),H[L]+=X!==-1?String.fromCharCode(e[ee.charCodeAt(0)][X]):ee):H[L]+=ee;H[L]=m(H[L])}return H.join(" ")},D=n.__arabicParser__.processArabic=n.processArabic=function(){var k,L=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,R=[];if(Array.isArray(L)){var X=0;for(R=[],X=0;X<L.length;X+=1)Array.isArray(L[X])?R.push([p(L[X][0]),L[X][1],L[X][2]]):R.push([p(L[X])]);k=R}else k=p(L);return typeof arguments[0]=="string"?k:(arguments[0].text=k,arguments[0])};n.events.push(["preProcessText",D])})(_t.API),_t.API.autoPrint=function(n){var e;return(n=n||{}).variant=n.variant||"non-conform",n.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(a){t=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(a){o=a}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(a){s=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var i;if((t=t||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(_t.API),(function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(k){c=k}});var l=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return l},set:function(k){l=k}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(k){u=k}});var m=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return m},set:function(k){m=k}});var _=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return _},set:function(k){_=k}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(k){p=k}});var D=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return D},set:function(k){D=k}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(c){return r.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},n.getTextDimensions=function(c,l){r.call(this);var u=(l=l||{}).fontSize||this.getFontSize(),m=l.font||this.getFont(),_=l.scaleFactor||this.internal.scaleFactor,p=0,D=0,k=0,L=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var R=l.maxWidth;R>0?typeof c=="string"?c=this.splitTextToSize(c,R):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(ee,J){return ee.concat(L.splitTextToSize(J,R))},[])):c=Array.isArray(c)?c:[c];for(var X=0;X<c.length;X++)p<(k=this.getStringUnitWidth(c[X],{font:m})*u)&&(p=k);return p!==0&&(D=c.length),{w:p/=_,h:Math.max((D*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/_,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=n.cell=function(){var c;c=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),r.call(this);var l=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,m=this.internal.__cell__.margins||e,_=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return l.lineNumber!==void 0&&(l.lineNumber===c.lineNumber?(c.x=(l.x||0)+(l.width||0),c.y=l.y||0):l.y+l.height+c.height+m.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=m.top,p&&_&&(this.printHeaderRow(c.lineNumber,!0),c.y+=_[0].height)):c.y=l.y+l.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,t===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-u,c.y+u,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+u,{align:"center",baseline:"top",maxWidth:c.width-u-u}):this.text(c.text,c.x+u,c.y+u,{align:"left",baseline:"top",maxWidth:c.width-u-u})),this.internal.__cell__.lastCell=c,this};n.table=function(c,l,u,m,_){if(r.call(this),!u)throw new Error("No data for PDF table.");var p,D,k,L,R=[],X=[],ee=[],J={},_e={},Ce=[],H=[],N=(_=_||{}).autoSize||!1,T=_.printHeaders!==!1,U=_.css&&_.css["font-size"]!==void 0?16*_.css["font-size"]:_.fontSize||12,x=_.margins||Object.assign({width:this.getPageWidth()},e),A=typeof _.padding=="number"?_.padding:3,M=_.headerBackgroundColor||"#c8c8c8",ne=_.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=T,this.internal.__cell__.margins=x,this.internal.__cell__.table_font_size=U,this.internal.__cell__.padding=A,this.internal.__cell__.headerBackgroundColor=M,this.internal.__cell__.headerTextColor=ne,this.setFontSize(U),m==null)X=R=Object.keys(u[0]),ee=R.map(function(){return"left"});else if(Array.isArray(m)&&Gn(m[0])==="object")for(R=m.map(function(We){return We.name}),X=m.map(function(We){return We.prompt||We.name||""}),ee=m.map(function(We){return We.align||"left"}),p=0;p<m.length;p+=1)_e[m[p].name]=.7499990551181103*m[p].width;else Array.isArray(m)&&typeof m[0]=="string"&&(X=R=m,ee=R.map(function(){return"left"}));if(N||Array.isArray(m)&&typeof m[0]=="string")for(p=0;p<R.length;p+=1){for(J[L=R[p]]=u.map(function(We){return We[L]}),this.setFont(void 0,"bold"),Ce.push(this.getTextDimensions(X[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),D=J[L],this.setFont(void 0,"normal"),k=0;k<D.length;k+=1)Ce.push(this.getTextDimensions(D[k],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);_e[L]=Math.max.apply(null,Ce)+A+A,Ce=[]}if(T){var be={};for(p=0;p<R.length;p+=1)be[R[p]]={},be[R[p]].text=X[p],be[R[p]].align=ee[p];var De=a.call(this,be,_e);H=R.map(function(We){return new o(c,l,_e[We],De,be[We].text,void 0,be[We].align)}),this.setTableHeaderRow(H),this.printHeaderRow(1,!1)}var Se=m.reduce(function(We,Be){return We[Be.name]=Be.align,We},{});for(p=0;p<u.length;p+=1){"rowStart"in _&&_.rowStart instanceof Function&&_.rowStart({row:p,data:u[p]},this);var ge=a.call(this,u[p],_e);for(k=0;k<R.length;k+=1){var Te=u[p][R[k]];"cellStart"in _&&_.cellStart instanceof Function&&_.cellStart({row:p,col:k,data:Te},this),s.call(this,new o(c,l,_e[R[k]],ge,Te,p+2,Se[R[k]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=l,this};var a=function(c,l){var u=this.internal.__cell__.padding,m=this.internal.__cell__.table_font_size,_=this.internal.scaleFactor;return Object.keys(c).map(function(p){var D=c[p];return this.splitTextToSize(D.hasOwnProperty("text")?D.text:D,l[p]-u-u)},this).map(function(p){return this.getLineHeightFactor()*p.length*m/_+u+u},this).reduce(function(p,D){return Math.max(p,D)},0)};n.setTableHeaderRow=function(c){r.call(this),this.internal.__cell__.tableHeaderRow=c},n.printHeaderRow=function(c,l){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var m=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(m[0],m[1],m[2],m[3],void 0,-1)}this.setFont(void 0,"bold");for(var _=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){u=this.internal.__cell__.tableHeaderRow[p].clone(),l&&(u.y=this.internal.__cell__.margins.top||0,_.push(u)),u.lineNumber=c;var D=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,u),this.setTextColor(D)}_.length>0&&this.setTableHeaderRow(_),this.setFont(void 0,"normal"),t=!1}})(_t.API);var W8={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},G8=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],aA=H8(G8),K8=[100,200,300,400,500,600,700,800,900],are=H8(K8);function eA(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=(function(o){return W8[o=o||"normal"]?o:"normal"})(n.style),r=(function(o){return o?typeof o=="number"?o>=100&&o<=900&&o%100==0?o:400:/^\d00$/.test(o)?parseInt(o):o==="bold"?700:400:400})(n.weight),i=(function(o){return typeof aA[o=o||"normal"]=="number"?o:"normal"})(n.stretch);return{family:e,style:t,weight:r,stretch:i,src:n.src||[],ref:n.ref||{name:e,style:[i,t,r].join(" ")}}}function w8(n,e,t,r){var i;for(i=t;i>=0&&i<e.length;i+=r)if(n[e[i]])return n[e[i]];for(i=t;i>=0&&i<e.length;i-=r)if(n[e[i]])return n[e[i]]}var cre={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},C8={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function E8(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function I8(n){return n.trimLeft()}function lre(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function ure(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var rw,x8,S8,Ip,iw,D8,T8,A8,tA=["times"];function M8(n,e,t,r,i){var o=4,s=N8;switch(i){case _t.API.image_compression.FAST:o=1,s=P8;break;case _t.API.image_compression.MEDIUM:o=6,s=k8;break;case _t.API.image_compression.SLOW:o=9,s=O8}n=(function(c,l,u,m){for(var _,p=c.length/l,D=new Uint8Array(c.length+p),k=[dre,P8,N8,k8,O8],L=0;L<p;L+=1){var R=L*l,X=c.subarray(R,R+l);if(m)D.set(m(X,u,_),R+L);else{for(var ee=k.length,J=[],_e=0;_e<ee;_e+=1)J[_e]=k[_e](X,u,_);var Ce=fre(J.concat());D.set(J[Ce],R+L)}_=X}return D})(n,e,Math.ceil(t*r/8),s);var a=kb(n,{level:o});return _t.API.__addimage__.arrayBufferToBinaryString(a)}function dre(n){var e=Array.apply([],n);return e.unshift(0),e}function P8(n,e){var t=n.length,r=[];r[0]=1;for(var i=0;i<t;i+=1){var o=n[i-e]||0;r[i+1]=n[i]-o+256&255}return r}function N8(n,e,t){var r=n.length,i=[];i[0]=2;for(var o=0;o<r;o+=1){var s=t&&t[o]||0;i[o+1]=n[o]-s+256&255}return i}function k8(n,e,t){var r=n.length,i=[];i[0]=3;for(var o=0;o<r;o+=1){var s=n[o-e]||0,a=t&&t[o]||0;i[o+1]=n[o]+256-(s+a>>>1)&255}return i}function O8(n,e,t){var r=n.length,i=[];i[0]=4;for(var o=0;o<r;o+=1){var s=hre(n[o-e]||0,t&&t[o]||0,t&&t[o-e]||0);i[o+1]=n[o]-s+256&255}return i}function hre(n,e,t){if(n===e&&e===t)return n;var r=Math.abs(e-t),i=Math.abs(n-t),o=Math.abs(n+e-t-t);return r<=i&&r<=o?n:i<=o?e:t}function fre(n){var e=n.map(function(t){return t.reduce(function(r,i){return r+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function nA(n,e,t){var r=e*t,i=Math.floor(r/8),o=16-(r-8*i+t),s=(1<<t)-1;return Y8(n,i)>>o&s}function R8(n,e,t,r){var i=t*r,o=Math.floor(i/8),s=16-(i-8*o+r),a=(1<<r)-1,c=(e&a)<<s;(function(l,u,m){if(u+1<l.byteLength)l.setUint16(u,m,!1);else{var _=m>>8&255;l.setUint8(u,_)}})(n,o,Y8(n,o)&~(a<<s)&65535|c)}function Y8(n,e){return e+1<n.byteLength?n.getUint16(e,!1):n.getUint8(e)<<8}function pre(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,i=n[e++],o=i>>7,s=1<<1+(7&i);n[e++],n[e++];var a=null,c=null;o&&(a=e,c=s,e+=3*s);var l=!0,u=[],m=0,_=null,p=0,D=null;for(this.width=t,this.height=r;l&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,D=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((x=n[e++])>=0))throw Error("Invalid block size");if(x===0)break;e+=x}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var k=n[e++];m=n[e++]|n[e++]<<8,_=n[e++],1&k||(_=null),p=k>>2&7,e++;break;case 254:for(;;){if(!((x=n[e++])>=0))throw Error("Invalid block size");if(x===0)break;e+=x}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var L=n[e++]|n[e++]<<8,R=n[e++]|n[e++]<<8,X=n[e++]|n[e++]<<8,ee=n[e++]|n[e++]<<8,J=n[e++],_e=J>>6&1,Ce=1<<1+(7&J),H=a,N=c,T=!1;J>>7&&(T=!0,H=e,N=Ce,e+=3*Ce);var U=e;for(e++;;){var x;if(!((x=n[e++])>=0))throw Error("Invalid block size");if(x===0)break;e+=x}u.push({x:L,y:R,width:X,height:ee,has_local_palette:T,palette_offset:H,palette_size:N,data_offset:U,data_length:e-U,transparent_index:_,interlaced:!!_e,delay:m,disposal:p});break;case 59:l=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return D},this.frameInfo=function(A){if(A<0||A>=u.length)throw new Error("Frame index out of range.");return u[A]},this.decodeAndBlitFrameBGRA=function(A,M){var ne=this.frameInfo(A),be=ne.width*ne.height,De=new Uint8Array(be);L8(n,ne.data_offset,De,be);var Se=ne.palette_offset,ge=ne.transparent_index;ge===null&&(ge=256);var Te=ne.width,We=t-Te,Be=Te,j=4*(ne.y*t+ne.x),Q=4*((ne.y+ne.height)*t+ne.x),te=j,oe=4*We;ne.interlaced===!0&&(oe+=4*t*7);for(var de=8,pe=0,Ee=De.length;pe<Ee;++pe){var xe=De[pe];if(Be===0&&(Be=Te,(te+=oe)>=Q&&(oe=4*We+4*t*(de-1),te=j+(Te+We)*(de<<1),de>>=1)),xe===ge)te+=4;else{var Ne=n[Se+3*xe],qe=n[Se+3*xe+1],nt=n[Se+3*xe+2];M[te++]=nt,M[te++]=qe,M[te++]=Ne,M[te++]=255}--Be}},this.decodeAndBlitFrameRGBA=function(A,M){var ne=this.frameInfo(A),be=ne.width*ne.height,De=new Uint8Array(be);L8(n,ne.data_offset,De,be);var Se=ne.palette_offset,ge=ne.transparent_index;ge===null&&(ge=256);var Te=ne.width,We=t-Te,Be=Te,j=4*(ne.y*t+ne.x),Q=4*((ne.y+ne.height)*t+ne.x),te=j,oe=4*We;ne.interlaced===!0&&(oe+=4*t*7);for(var de=8,pe=0,Ee=De.length;pe<Ee;++pe){var xe=De[pe];if(Be===0&&(Be=Te,(te+=oe)>=Q&&(oe=4*We+4*t*(de-1),te=j+(Te+We)*(de<<1),de>>=1)),xe===ge)te+=4;else{var Ne=n[Se+3*xe],qe=n[Se+3*xe+1],nt=n[Se+3*xe+2];M[te++]=Ne,M[te++]=qe,M[te++]=nt,M[te++]=255}--Be}}}function L8(n,e,t,r){for(var i=n[e++],o=1<<i,s=o+1,a=s+1,c=i+1,l=(1<<c)-1,u=0,m=0,_=0,p=n[e++],D=new Int32Array(4096),k=null;;){for(;u<16&&p!==0;)m|=n[e++]<<u,u+=8,p===1?p=n[e++]:--p;if(u<c)break;var L=m&l;if(m>>=c,u-=c,L!==o){if(L===s)break;for(var R=L<a?L:k,X=0,ee=R;ee>o;)ee=D[ee]>>8,++X;var J=ee;if(_+X+(R!==L?1:0)>r)return void Xn.log("Warning, gif stream longer than expected.");t[_++]=J;var _e=_+=X;for(R!==L&&(t[_++]=J),ee=R;X--;)ee=D[ee],t[--_e]=255&ee,ee>>=8;k!==null&&a<4096&&(D[a++]=k<<8|J,a>=l+1&&c<12&&(++c,l=l<<1|1)),k=L}else a=s+1,l=(1<<(c=i+1))-1,k=null}return _!==r&&Xn.log("Warning, gif stream shorter than expected."),t}function rA(n){var e,t,r,i,o,s=Math.floor,a=new Array(64),c=new Array(64),l=new Array(64),u=new Array(64),m=new Array(65535),_=new Array(65535),p=new Array(64),D=new Array(64),k=[],L=0,R=7,X=new Array(64),ee=new Array(64),J=new Array(64),_e=new Array(256),Ce=new Array(2048),H=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],N=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],T=[0,1,2,3,4,5,6,7,8,9,10,11],U=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],x=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],A=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],M=[0,1,2,3,4,5,6,7,8,9,10,11],ne=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],be=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function De(j,Q){for(var te=0,oe=0,de=new Array,pe=1;pe<=16;pe++){for(var Ee=1;Ee<=j[pe];Ee++)de[Q[oe]]=[],de[Q[oe]][0]=te,de[Q[oe]][1]=pe,oe++,te++;te*=2}return de}function Se(j){for(var Q=j[0],te=j[1]-1;te>=0;)Q&1<<te&&(L|=1<<R),te--,--R<0&&(L==255?(ge(255),ge(0)):ge(L),R=7,L=0)}function ge(j){k.push(j)}function Te(j){ge(j>>8&255),ge(255&j)}function We(j,Q,te,oe,de){for(var pe,Ee=de[0],xe=de[240],Ne=(function(ze,St){var ot,It,Ct,wn,ln,Bt,Pt,Nt,lt,Ht,gt=0;for(lt=0;lt<8;++lt){ot=ze[gt],It=ze[gt+1],Ct=ze[gt+2],wn=ze[gt+3],ln=ze[gt+4],Bt=ze[gt+5],Pt=ze[gt+6];var yr=ot+(Nt=ze[gt+7]),un=ot-Nt,nn=It+Pt,rn=It-Pt,zn=Ct+Bt,xt=Ct-Bt,$n=wn+ln,At=wn-ln,$t=yr+$n,Yn=yr-$n,Wt=nn+zn,Dt=nn-zn;ze[gt]=$t+Wt,ze[gt+4]=$t-Wt;var Cn=.707106781*(Dt+Yn);ze[gt+2]=Yn+Cn,ze[gt+6]=Yn-Cn;var no=.382683433*(($t=At+xt)-(Dt=rn+un)),ri=.5411961*$t+no,wo=1.306562965*Dt+no,zo=.707106781*(Wt=xt+rn),Et=un+zo,Es=un-zo;ze[gt+5]=Es+ri,ze[gt+3]=Es-ri,ze[gt+1]=Et+wo,ze[gt+7]=Et-wo,gt+=8}for(gt=0,lt=0;lt<8;++lt){ot=ze[gt],It=ze[gt+8],Ct=ze[gt+16],wn=ze[gt+24],ln=ze[gt+32],Bt=ze[gt+40],Pt=ze[gt+48];var sr=ot+(Nt=ze[gt+56]),ro=ot-Nt,ui=It+Pt,qn=It-Pt,Gr=Ct+Bt,ii=Ct-Bt,Co=wn+ln,Ma=wn-ln,$o=sr+Co,io=sr-Co,Eo=ui+Gr,oo=ui-Gr;ze[gt]=$o+Eo,ze[gt+32]=$o-Eo;var Si=.707106781*(oo+io);ze[gt+16]=io+Si,ze[gt+48]=io-Si;var Ui=.382683433*(($o=Ma+ii)-(oo=qn+ro)),qo=.5411961*$o+Ui,Pa=1.306562965*oo+Ui,Na=.707106781*(Eo=ii+qn),ka=ro+Na,Ec=ro-Na;ze[gt+40]=Ec+qo,ze[gt+24]=Ec-qo,ze[gt+8]=ka+Pa,ze[gt+56]=ka-Pa,gt++}for(lt=0;lt<64;++lt)Ht=ze[lt]*St[lt],p[lt]=Ht>0?Ht+.5|0:Ht-.5|0;return p})(j,Q),qe=0;qe<64;++qe)D[H[qe]]=Ne[qe];var nt=D[0]-te;te=D[0],nt==0?Se(oe[0]):(Se(oe[_[pe=32767+nt]]),Se(m[pe]));for(var et=63;et>0&&D[et]==0;)et--;if(et==0)return Se(Ee),te;for(var vt,W=1;W<=et;){for(var Xe=W;D[W]==0&&W<=et;)++W;var Jt=W-Xe;if(Jt>=16){vt=Jt>>4;for(var Tt=1;Tt<=vt;++Tt)Se(xe);Jt&=15}pe=32767+D[W],Se(de[(Jt<<4)+_[pe]]),Se(m[pe]),W++}return et!=63&&Se(Ee),te}function Be(j){j=Math.min(Math.max(j,1),100),o!=j&&((function(Q){for(var te=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],oe=0;oe<64;oe++){var de=s((te[oe]*Q+50)/100);de=Math.min(Math.max(de,1),255),a[H[oe]]=de}for(var pe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ee=0;Ee<64;Ee++){var xe=s((pe[Ee]*Q+50)/100);xe=Math.min(Math.max(xe,1),255),c[H[Ee]]=xe}for(var Ne=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],qe=0,nt=0;nt<8;nt++)for(var et=0;et<8;et++)l[qe]=1/(a[H[qe]]*Ne[nt]*Ne[et]*8),u[qe]=1/(c[H[qe]]*Ne[nt]*Ne[et]*8),qe++})(j<50?Math.floor(5e3/j):Math.floor(200-2*j)),o=j)}this.encode=function(j,Q){Q&&Be(Q),k=new Array,L=0,R=7,Te(65496),Te(65504),Te(16),ge(74),ge(70),ge(73),ge(70),ge(0),ge(1),ge(1),ge(0),Te(1),Te(1),ge(0),ge(0),(function(){Te(65499),Te(132),ge(0);for(var It=0;It<64;It++)ge(a[It]);ge(1);for(var Ct=0;Ct<64;Ct++)ge(c[Ct])})(),(function(It,Ct){Te(65472),Te(17),ge(8),Te(Ct),Te(It),ge(3),ge(1),ge(17),ge(0),ge(2),ge(17),ge(1),ge(3),ge(17),ge(1)})(j.width,j.height),(function(){Te(65476),Te(418),ge(0);for(var It=0;It<16;It++)ge(N[It+1]);for(var Ct=0;Ct<=11;Ct++)ge(T[Ct]);ge(16);for(var wn=0;wn<16;wn++)ge(U[wn+1]);for(var ln=0;ln<=161;ln++)ge(x[ln]);ge(1);for(var Bt=0;Bt<16;Bt++)ge(A[Bt+1]);for(var Pt=0;Pt<=11;Pt++)ge(M[Pt]);ge(17);for(var Nt=0;Nt<16;Nt++)ge(ne[Nt+1]);for(var lt=0;lt<=161;lt++)ge(be[lt])})(),Te(65498),Te(12),ge(3),ge(1),ge(0),ge(2),ge(17),ge(3),ge(17),ge(0),ge(63),ge(0);var te=0,oe=0,de=0;L=0,R=7,this.encode.displayName="_encode_";for(var pe,Ee,xe,Ne,qe,nt,et,vt,W,Xe=j.data,Jt=j.width,Tt=j.height,ze=4*Jt,St=0;St<Tt;){for(pe=0;pe<ze;){for(qe=ze*St+pe,et=-1,vt=0,W=0;W<64;W++)nt=qe+(vt=W>>3)*ze+(et=4*(7&W)),St+vt>=Tt&&(nt-=ze*(St+1+vt-Tt)),pe+et>=ze&&(nt-=pe+et-ze+4),Ee=Xe[nt++],xe=Xe[nt++],Ne=Xe[nt++],X[W]=(Ce[Ee]+Ce[xe+256|0]+Ce[Ne+512|0]>>16)-128,ee[W]=(Ce[Ee+768|0]+Ce[xe+1024|0]+Ce[Ne+1280|0]>>16)-128,J[W]=(Ce[Ee+1280|0]+Ce[xe+1536|0]+Ce[Ne+1792|0]>>16)-128;te=We(X,l,te,e,r),oe=We(ee,u,oe,t,i),de=We(J,u,de,t,i),pe+=32}St+=8}if(R>=0){var ot=[];ot[1]=R+1,ot[0]=(1<<R+1)-1,Se(ot)}return Te(65497),new Uint8Array(k)},n=n||50,(function(){for(var j=String.fromCharCode,Q=0;Q<256;Q++)_e[Q]=j(Q)})(),e=De(N,T),t=De(A,M),r=De(U,x),i=De(ne,be),(function(){for(var j=1,Q=2,te=1;te<=15;te++){for(var oe=j;oe<Q;oe++)_[32767+oe]=te,m[32767+oe]=[],m[32767+oe][1]=te,m[32767+oe][0]=oe;for(var de=-(Q-1);de<=-j;de++)_[32767+de]=te,m[32767+de]=[],m[32767+de][1]=te,m[32767+de][0]=Q-1+de;j<<=1,Q<<=1}})(),(function(){for(var j=0;j<256;j++)Ce[j]=19595*j,Ce[j+256|0]=38470*j,Ce[j+512|0]=7471*j+32768,Ce[j+768|0]=-11059*j,Ce[j+1024|0]=-21709*j,Ce[j+1280|0]=32768*j+8421375,Ce[j+1536|0]=-27439*j,Ce[j+1792|0]=-5329*j})(),Be(n)}function Da(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function F8(n){function e(T){if(!T)throw Error("assert :P")}function t(T,U,x){for(var A=0;4>A;A++)if(T[U+A]!=x.charCodeAt(A))return!0;return!1}function r(T,U,x,A,M){for(var ne=0;ne<M;ne++)T[U+ne]=x[A+ne]}function i(T,U,x,A){for(var M=0;M<A;M++)T[U+M]=x}function o(T){return new Int32Array(T)}function s(T,U){for(var x=[],A=0;A<T;A++)x.push(new U);return x}function a(T,U){var x=[];return(function A(M,ne,be){for(var De=be[ne],Se=0;Se<De&&(M.push(be.length>ne+1?[]:new U),!(be.length<ne+1));Se++)A(M[Se],ne+1,be)})(x,0,T),x}var c=function(){var T=this;function U(d,f){for(var b=1<<f-1>>>0;d&b;)b>>>=1;return b?(d&b-1)+b:d}function x(d,f,b,E,O){e(!(E%b));do d[f+(E-=b)]=O;while(0<E)}function A(d,f,b,E,O){if(e(2328>=O),512>=O)var V=o(512);else if((V=o(O))==null)return 0;return(function(B,$,q,K,se,ye){var Y,ae,fe=$,Ae=1<<q,ve=o(16),Pe=o(16);for(e(se!=0),e(K!=null),e(B!=null),e(0<q),ae=0;ae<se;++ae){if(15<K[ae])return 0;++ve[K[ae]]}if(ve[0]==se)return 0;for(Pe[1]=0,Y=1;15>Y;++Y){if(ve[Y]>1<<Y)return 0;Pe[Y+1]=Pe[Y]+ve[Y]}for(ae=0;ae<se;++ae)Y=K[ae],0<K[ae]&&(ye[Pe[Y]++]=ae);if(Pe[15]==1)return(K=new M).g=0,K.value=ye[0],x(B,fe,1,Ae,K),Ae;var ke,He=-1,Ue=Ae-1,bt=0,ct=1,sn=1,pt=1<<q;for(ae=0,Y=1,se=2;Y<=q;++Y,se<<=1){if(ct+=sn<<=1,0>(sn-=ve[Y]))return 0;for(;0<ve[Y];--ve[Y])(K=new M).g=Y,K.value=ye[ae++],x(B,fe+bt,se,pt,K),bt=U(bt,Y)}for(Y=q+1,se=2;15>=Y;++Y,se<<=1){if(ct+=sn<<=1,0>(sn-=ve[Y]))return 0;for(;0<ve[Y];--ve[Y]){if(K=new M,(bt&Ue)!=He){for(fe+=pt,ke=1<<(He=Y)-q;15>He&&!(0>=(ke-=ve[He]));)++He,ke<<=1;Ae+=pt=1<<(ke=He-q),B[$+(He=bt&Ue)].g=ke+q,B[$+He].value=fe-$-He}K.g=Y-q,K.value=ye[ae++],x(B,fe+(bt>>q),se,pt,K),bt=U(bt,Y)}}return ct!=2*Pe[15]-1?0:Ae})(d,f,b,E,O,V)}function M(){this.value=this.g=0}function ne(){this.value=this.g=0}function be(){this.G=s(5,M),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(nd,ne)}function De(d,f,b,E){e(d!=null),e(f!=null),e(2147483648>E),d.Ca=254,d.I=0,d.b=-8,d.Ka=0,d.oa=f,d.pa=b,d.Jd=f,d.Yc=b+E,d.Zc=4<=E?b+E-4+1:b,Ee(d)}function Se(d,f){for(var b=0;0<f--;)b|=Ne(d,128)<<f;return b}function ge(d,f){var b=Se(d,f);return xe(d)?-b:b}function Te(d,f,b,E){var O,V=0;for(e(d!=null),e(f!=null),e(4294967288>E),d.Sb=E,d.Ra=0,d.u=0,d.h=0,4<E&&(E=4),O=0;O<E;++O)V+=f[b+O]<<8*O;d.Ra=V,d.bb=E,d.oa=f,d.pa=b}function We(d){for(;8<=d.u&&d.bb<d.Sb;)d.Ra>>>=8,d.Ra+=d.oa[d.pa+d.bb]<<Nl-8>>>0,++d.bb,d.u-=8;oe(d)&&(d.h=1,d.u=0)}function Be(d,f){if(e(0<=f),!d.h&&f<=Zo){var b=te(d)&Qo[f];return d.u+=f,We(d),b}return d.h=1,d.u=0}function j(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Q(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function te(d){return d.Ra>>>(d.u&Nl-1)>>>0}function oe(d){return e(d.bb<=d.Sb),d.h||d.bb==d.Sb&&d.u>Nl}function de(d,f){d.u=f,d.h=oe(d)}function pe(d){d.u>=kc&&(e(d.u>=kc),We(d))}function Ee(d){e(d!=null&&d.oa!=null),d.pa<d.Zc?(d.I=(d.oa[d.pa++]|d.I<<8)>>>0,d.b+=8):(e(d!=null&&d.oa!=null),d.pa<d.Yc?(d.b+=8,d.I=d.oa[d.pa++]|d.I<<8):d.Ka?d.b=0:(d.I<<=8,d.b+=8,d.Ka=1))}function xe(d){return Se(d,1)}function Ne(d,f){var b=d.Ca;0>d.b&&Ee(d);var E=d.b,O=b*f>>>8,V=(d.I>>>E>O)+0;for(V?(b-=O,d.I-=O+1<<E>>>0):b=O+1,E=b,O=0;256<=E;)O+=8,E>>=8;return E=7^O+kl[E],d.b-=E,d.Ca=(b<<E)-1,V}function qe(d,f,b){d[f+0]=b>>24&255,d[f+1]=b>>16&255,d[f+2]=b>>8&255,d[f+3]=255&b}function nt(d,f){return d[f+0]|d[f+1]<<8}function et(d,f){return nt(d,f)|d[f+2]<<16}function vt(d,f){return nt(d,f)|nt(d,f+2)<<16}function W(d,f){var b=1<<f;return e(d!=null),e(0<f),d.X=o(b),d.X==null?0:(d.Mb=32-f,d.Xa=f,1)}function Xe(d,f){e(d!=null),e(f!=null),e(d.Xa==f.Xa),r(f.X,0,d.X,0,1<<f.Xa)}function Jt(){this.X=[],this.Xa=this.Mb=0}function Tt(d,f,b,E){e(b!=null),e(E!=null);var O=b[0],V=E[0];return O==0&&(O=(d*V+f/2)/f),V==0&&(V=(f*O+d/2)/d),0>=O||0>=V?0:(b[0]=O,E[0]=V,1)}function ze(d,f){return d+(1<<f)-1>>>f}function St(d,f){return((4278255360&d)+(4278255360&f)>>>0&4278255360)+((16711935&d)+(16711935&f)>>>0&16711935)>>>0}function ot(d,f){T[f]=function(b,E,O,V,B,$,q){var K;for(K=0;K<B;++K){var se=T[d]($[q+K-1],O,V+K);$[q+K]=St(b[E+K],se)}}}function It(){this.ud=this.hd=this.jd=0}function Ct(d,f){return((4278124286&(d^f))>>>1)+(d&f)>>>0}function wn(d){return 0<=d&&256>d?d:0>d?0:255<d?255:void 0}function ln(d,f){return wn(d+(d-f+.5>>1))}function Bt(d,f,b){return Math.abs(f-b)-Math.abs(d-b)}function Pt(d,f,b,E,O,V,B){for(E=V[B-1],b=0;b<O;++b)V[B+b]=E=St(d[f+b],E)}function Nt(d,f,b,E,O){var V;for(V=0;V<b;++V){var B=d[f+V],$=B>>8&255,q=16711935&(q=(q=16711935&B)+(($<<16)+$));E[O+V]=(4278255360&B)+q>>>0}}function lt(d,f){f.jd=255&d,f.hd=d>>8&255,f.ud=d>>16&255}function Ht(d,f,b,E,O,V){var B;for(B=0;B<E;++B){var $=f[b+B],q=$>>>8,K=$,se=255&(se=(se=$>>>16)+((d.jd<<24>>24)*(q<<24>>24)>>>5));K=255&(K=(K+=(d.hd<<24>>24)*(q<<24>>24)>>>5)+((d.ud<<24>>24)*(se<<24>>24)>>>5)),O[V+B]=(4278255360&$)+(se<<16)+K}}function gt(d,f,b,E,O){T[f]=function(V,B,$,q,K,se,ye,Y,ae){for(q=ye;q<Y;++q)for(ye=0;ye<ae;++ye)K[se++]=O($[E(V[B++])])},T[d]=function(V,B,$,q,K,se,ye){var Y=8>>V.b,ae=V.Ea,fe=V.K[0],Ae=V.w;if(8>Y)for(V=(1<<V.b)-1,Ae=(1<<Y)-1;B<$;++B){var ve,Pe=0;for(ve=0;ve<ae;++ve)ve&V||(Pe=E(q[K++])),se[ye++]=O(fe[Pe&Ae]),Pe>>=Y}else T["VP8LMapColor"+b](q,K,fe,Ae,se,ye,B,$,ae)}}function yr(d,f,b,E,O){for(b=f+b;f<b;){var V=d[f++];E[O++]=V>>16&255,E[O++]=V>>8&255,E[O++]=255&V}}function un(d,f,b,E,O){for(b=f+b;f<b;){var V=d[f++];E[O++]=V>>16&255,E[O++]=V>>8&255,E[O++]=255&V,E[O++]=V>>24&255}}function nn(d,f,b,E,O){for(b=f+b;f<b;){var V=(B=d[f++])>>16&240|B>>12&15,B=240&B|B>>28&15;E[O++]=V,E[O++]=B}}function rn(d,f,b,E,O){for(b=f+b;f<b;){var V=(B=d[f++])>>16&248|B>>13&7,B=B>>5&224|B>>3&31;E[O++]=V,E[O++]=B}}function zn(d,f,b,E,O){for(b=f+b;f<b;){var V=d[f++];E[O++]=255&V,E[O++]=V>>8&255,E[O++]=V>>16&255}}function xt(d,f,b,E,O,V){if(V==0)for(b=f+b;f<b;)qe(E,((V=d[f++])[0]>>24|V[1]>>8&65280|V[2]<<8&16711680|V[3]<<24)>>>0),O+=32;else r(E,O,d,f,b)}function $n(d,f){T[f][0]=T[d+"0"],T[f][1]=T[d+"1"],T[f][2]=T[d+"2"],T[f][3]=T[d+"3"],T[f][4]=T[d+"4"],T[f][5]=T[d+"5"],T[f][6]=T[d+"6"],T[f][7]=T[d+"7"],T[f][8]=T[d+"8"],T[f][9]=T[d+"9"],T[f][10]=T[d+"10"],T[f][11]=T[d+"11"],T[f][12]=T[d+"12"],T[f][13]=T[d+"13"],T[f][14]=T[d+"0"],T[f][15]=T[d+"0"]}function At(d){return d==Ew||d==Iw||d==H0||d==xw}function $t(){this.eb=[],this.size=this.A=this.fb=0}function Yn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Wt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new $t,this.f.kb=new Yn,this.sd=null}function Dt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Cn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function no(d){return alert("todo:WebPSamplerProcessPlane"),d.T}function ri(d,f){var b=d.T,E=f.ba.f.RGBA,O=E.eb,V=E.fb+d.ka*E.A,B=ks[f.ba.S],$=d.y,q=d.O,K=d.f,se=d.N,ye=d.ea,Y=d.W,ae=f.cc,fe=f.dc,Ae=f.Mc,ve=f.Nc,Pe=d.ka,ke=d.ka+d.T,He=d.U,Ue=He+1>>1;for(Pe==0?B($,q,null,null,K,se,ye,Y,K,se,ye,Y,O,V,null,null,He):(B(f.ec,f.fc,$,q,ae,fe,Ae,ve,K,se,ye,Y,O,V-E.A,O,V,He),++b);Pe+2<ke;Pe+=2)ae=K,fe=se,Ae=ye,ve=Y,se+=d.Rc,Y+=d.Rc,V+=2*E.A,B($,(q+=2*d.fa)-d.fa,$,q,ae,fe,Ae,ve,K,se,ye,Y,O,V-E.A,O,V,He);return q+=d.fa,d.j+ke<d.o?(r(f.ec,f.fc,$,q,He),r(f.cc,f.dc,K,se,Ue),r(f.Mc,f.Nc,ye,Y,Ue),b--):1&ke||B($,q,null,null,K,se,ye,Y,K,se,ye,Y,O,V+E.A,null,null,He),b}function wo(d,f,b){var E=d.F,O=[d.J];if(E!=null){var V=d.U,B=f.ba.S,$=B==q0||B==H0;f=f.ba.f.RGBA;var q=[0],K=d.ka;q[0]=d.T,d.Kb&&(K==0?--q[0]:(--K,O[0]-=d.width),d.j+d.ka+d.T==d.o&&(q[0]=d.o-d.j-K));var se=f.eb;K=f.fb+K*f.A,d=xA(E,O[0],d.width,V,q,se,K+($?0:3),f.A),e(b==q),d&&At(B)&&Wp(se,K,$,V,q,f.A)}return 0}function zo(d){var f=d.ma,b=f.ba.S,E=11>b,O=b==z0||b==$0||b==q0||b==Cw||b==12||At(b);if(f.memory=null,f.Ib=null,f.Jb=null,f.Nd=null,!Nc(f.Oa,d,O?11:12))return 0;if(O&&At(b)&&Ml(),d.da)alert("todo:use_scaling");else{if(E){if(f.Ib=no,d.Kb){if(b=d.U+1>>1,f.memory=o(d.U+2*b),f.memory==null)return 0;f.ec=f.memory,f.fc=0,f.cc=f.ec,f.dc=f.fc+d.U,f.Mc=f.cc,f.Nc=f.dc+b,f.Ib=ri,Ml()}}else alert("todo:EmitYUV");O&&(f.Jb=wo,E&&ar())}if(E&&!zA){for(d=0;256>d;++d)VV[d]=89858*(d-128)+G0>>W0,UV[d]=-22014*(d-128)+G0,BV[d]=-45773*(d-128),jV[d]=113618*(d-128)+G0>>W0;for(d=Kp;d<Tw;++d)f=76283*(d-16)+G0>>W0,zV[d-Kp]=Ho(f,255),$V[d-Kp]=Ho(f+8>>4,15);zA=1}return 1}function Et(d){var f=d.ma,b=d.U,E=d.T;return e(!(1&d.ka)),0>=b||0>=E?0:(b=f.Ib(d,f),f.Jb!=null&&f.Jb(d,f,b),f.Dc+=b,1)}function Es(d){d.ma.memory=null}function sr(d,f,b,E){return Be(d,8)!=47?0:(f[0]=Be(d,14)+1,b[0]=Be(d,14)+1,E[0]=Be(d,1),Be(d,3)!=0?0:!d.h)}function ro(d,f){if(4>d)return d+1;var b=d-2>>1;return(2+(1&d)<<b)+Be(f,b)+1}function ui(d,f){return 120<f?f-120:1<=(b=((b=IV[f-1])>>4)*d+(8-(15&b)))?b:1;var b}function qn(d,f,b){var E=te(b),O=d[f+=255&E].g-8;return 0<O&&(de(b,b.u+8),E=te(b),f+=d[f].value,f+=E&(1<<O)-1),de(b,b.u+d[f].g),d[f].value}function Gr(d,f,b){return b.g+=d.g,b.value+=d.value<<f>>>0,e(8>=b.g),d.g}function ii(d,f,b){var E=d.xc;return e((f=E==0?0:d.vc[d.md*(b>>E)+(f>>E)])<d.Wb),d.Ya[f]}function Co(d,f,b,E){var O=d.ab,V=d.c*f,B=d.C;f=B+f;var $=b,q=E;for(E=d.Ta,b=d.Ua;0<O--;){var K=d.gc[O],se=B,ye=f,Y=$,ae=q,fe=(q=E,$=b,K.Ea);switch(e(se<ye),e(ye<=K.nc),K.hc){case 2:Fr(Y,ae,(ye-se)*fe,q,$);break;case 0:var Ae=se,ve=ye,Pe=q,ke=$,He=(pt=K).Ea;Ae==0&&(Bp(Y,ae,null,null,1,Pe,ke),Pt(Y,ae+1,0,0,He-1,Pe,ke+1),ae+=He,ke+=He,++Ae);for(var Ue=1<<pt.b,bt=Ue-1,ct=ze(He,pt.b),sn=pt.K,pt=pt.w+(Ae>>pt.b)*ct;Ae<ve;){var _n=sn,si=pt,an=1;for(Ah(Y,ae,Pe,ke-He,1,Pe,ke);an<He;){var mt=(an&~bt)+Ue;mt>He&&(mt=He),(0,zp[_n[si++]>>8&15])(Y,ae+ +an,Pe,ke+an-He,mt-an,Pe,ke+an),an=mt}ae+=He,ke+=He,++Ae&bt||(pt+=ct)}ye!=K.nc&&r(q,$-fe,q,$+(ye-se-1)*fe,fe);break;case 1:for(fe=Y,ve=ae,He=(Y=K.Ea)-(ke=Y&~(Pe=(ae=1<<K.b)-1)),Ae=ze(Y,K.b),Ue=K.K,K=K.w+(se>>K.b)*Ae;se<ye;){for(bt=Ue,ct=K,sn=new It,pt=ve+ke,_n=ve+Y;ve<pt;)lt(bt[ct++],sn),$p(sn,fe,ve,ae,q,$),ve+=ae,$+=ae;ve<_n&&(lt(bt[ct++],sn),$p(sn,fe,ve,He,q,$),ve+=He,$+=He),++se&Pe||(K+=Ae)}break;case 3:if(Y==q&&ae==$&&0<K.b){for(ve=q,Y=fe=$+(ye-se)*fe-(ke=(ye-se)*ze(K.Ea,K.b)),ae=q,Pe=$,Ae=[],ke=(He=ke)-1;0<=ke;--ke)Ae[ke]=ae[Pe+ke];for(ke=He-1;0<=ke;--ke)ve[Y+ke]=Ae[ke];V0(K,se,ye,q,fe,q,$)}else V0(K,se,ye,Y,ae,q,$)}$=E,q=b}q!=b&&r(E,b,$,q,V)}function Ma(d,f){var b=d.V,E=d.Ba+d.c*d.C,O=f-d.C;if(e(f<=d.l.o),e(16>=O),0<O){var V=d.l,B=d.Ta,$=d.Ua,q=V.width;if(Co(d,O,b,E),O=$=[$],e((b=d.C)<(E=f)),e(V.v<V.va),E>V.o&&(E=V.o),b<V.j){var K=V.j-b;b=V.j,O[0]+=K*q}if(b>=E?b=0:(O[0]+=4*V.v,V.ka=b-V.j,V.U=V.va-V.v,V.T=E-b,b=1),b){if($=$[0],11>(b=d.ca).S){var se=b.f.RGBA,ye=(E=b.S,O=V.U,V=V.T,K=se.eb,se.A),Y=V;for(se=se.fb+d.Ma*se.A;0<Y--;){var ae=B,fe=$,Ae=O,ve=K,Pe=se;switch(E){case U0:qp(ae,fe,Ae,ve,Pe);break;case z0:Ol(ae,fe,Ae,ve,Pe);break;case Ew:Ol(ae,fe,Ae,ve,Pe),Wp(ve,Pe,0,Ae,1,0);break;case NA:rd(ae,fe,Ae,ve,Pe);break;case $0:xt(ae,fe,Ae,ve,Pe,1);break;case Iw:xt(ae,fe,Ae,ve,Pe,1),Wp(ve,Pe,0,Ae,1,0);break;case q0:xt(ae,fe,Ae,ve,Pe,0);break;case H0:xt(ae,fe,Ae,ve,Pe,0),Wp(ve,Pe,1,Ae,1,0);break;case Cw:Rl(ae,fe,Ae,ve,Pe);break;case xw:Rl(ae,fe,Ae,ve,Pe),IA(ve,Pe,Ae,1,0);break;case kA:Ll(ae,fe,Ae,ve,Pe);break;default:e(0)}$+=q,se+=ye}d.Ma+=V}else alert("todo:EmitRescaledRowsYUVA");e(d.Ma<=b.height)}}d.C=f,e(d.C<=d.i)}function $o(d){var f;if(0<d.ua)return 0;for(f=0;f<d.Wb;++f){var b=d.Ya[f].G,E=d.Ya[f].H;if(0<b[1][E[1]+0].g||0<b[2][E[2]+0].g||0<b[3][E[3]+0].g)return 0}return 1}function io(d,f,b,E,O,V){if(d.Z!=0){var B=d.qd,$=d.rd;for(e(jl[d.Z]!=null);f<b;++f)jl[d.Z](B,$,E,O,E,O,V),B=E,$=O,O+=V;d.qd=B,d.rd=$}}function Eo(d,f){var b=d.l.ma,E=b.Z==0||b.Z==1?d.l.j:d.C;if(E=d.C<E?E:d.C,e(f<=d.l.o),f>E){var O=d.l.width,V=b.ca,B=b.tb+O*E,$=d.V,q=d.Ba+d.c*E,K=d.gc;e(d.ab==1),e(K[0].hc==3),ja(K[0],E,f,$,q,V,B),io(b,E,f,V,B,O)}d.C=d.Ma=f}function oo(d,f,b,E,O,V,B){var $=d.$/E,q=d.$%E,K=d.m,se=d.s,ye=b+d.$,Y=ye;O=b+E*O;var ae=b+E*V,fe=280+se.ua,Ae=d.Pb?$:16777216,ve=0<se.ua?se.Wa:null,Pe=se.wc,ke=ye<ae?ii(se,q,$):null;e(d.C<V),e(ae<=O);var He=!1;e:for(;;){for(;He||ye<ae;){var Ue=0;if($>=Ae){var bt=ye-b;e((Ae=d).Pb),Ae.wd=Ae.m,Ae.xd=bt,0<Ae.s.ua&&Xe(Ae.s.Wa,Ae.s.vb),Ae=$+SV}if(q&Pe||(ke=ii(se,q,$)),e(ke!=null),ke.Qb&&(f[ye]=ke.qb,He=!0),!He)if(pe(K),ke.jc){Ue=K,bt=f;var ct=ye,sn=ke.pd[te(Ue)&nd-1];e(ke.jc),256>sn.g?(de(Ue,Ue.u+sn.g),bt[ct]=sn.value,Ue=0):(de(Ue,Ue.u+sn.g-256),e(256<=sn.value),Ue=sn.value),Ue==0&&(He=!0)}else Ue=qn(ke.G[0],ke.H[0],K);if(K.h)break;if(He||256>Ue){if(!He)if(ke.nd)f[ye]=(ke.qb|Ue<<8)>>>0;else{if(pe(K),He=qn(ke.G[1],ke.H[1],K),pe(K),bt=qn(ke.G[2],ke.H[2],K),ct=qn(ke.G[3],ke.H[3],K),K.h)break;f[ye]=(ct<<24|He<<16|Ue<<8|bt)>>>0}if(He=!1,++ye,++q>=E&&(q=0,++$,B!=null&&$<=V&&!($%16)&&B(d,$),ve!=null))for(;Y<ye;)Ue=f[Y++],ve.X[(506832829*Ue&4294967295)>>>ve.Mb]=Ue}else if(280>Ue){if(Ue=ro(Ue-256,K),bt=qn(ke.G[4],ke.H[4],K),pe(K),bt=ui(E,bt=ro(bt,K)),K.h)break;if(ye-b<bt||O-ye<Ue)break e;for(ct=0;ct<Ue;++ct)f[ye+ct]=f[ye+ct-bt];for(ye+=Ue,q+=Ue;q>=E;)q-=E,++$,B!=null&&$<=V&&!($%16)&&B(d,$);if(e(ye<=O),q&Pe&&(ke=ii(se,q,$)),ve!=null)for(;Y<ye;)Ue=f[Y++],ve.X[(506832829*Ue&4294967295)>>>ve.Mb]=Ue}else{if(!(Ue<fe))break e;for(He=Ue-280,e(ve!=null);Y<ye;)Ue=f[Y++],ve.X[(506832829*Ue&4294967295)>>>ve.Mb]=Ue;Ue=ye,e(!(He>>>(bt=ve).Xa)),f[Ue]=bt.X[He],He=!0}He||e(K.h==oe(K))}if(d.Pb&&K.h&&ye<O)e(d.m.h),d.a=5,d.m=d.wd,d.$=d.xd,0<d.s.ua&&Xe(d.s.vb,d.s.Wa);else{if(K.h)break e;B?.(d,$>V?V:$),d.a=0,d.$=ye-b}return 1}return d.a=3,0}function Si(d){e(d!=null),d.vc=null,d.yc=null,d.Ya=null;var f=d.Wa;f!=null&&(f.X=null),d.vb=null,e(d!=null)}function Ui(){var d=new Lt;return d==null?null:(d.a=0,d.xb=LA,$n("Predictor","VP8LPredictors"),$n("Predictor","VP8LPredictors_C"),$n("PredictorAdd","VP8LPredictorsAdd"),$n("PredictorAdd","VP8LPredictorsAdd_C"),Fr=Nt,$p=Ht,qp=yr,Ol=un,Rl=nn,Ll=rn,rd=zn,T.VP8LMapColor32b=Va,T.VP8LMapColor8b=Up,d)}function qo(d,f,b,E,O){var V=1,B=[d],$=[f],q=E.m,K=E.s,se=null,ye=0;e:for(;;){if(b)for(;V&&Be(q,1);){var Y=B,ae=$,fe=E,Ae=1,ve=fe.m,Pe=fe.gc[fe.ab],ke=Be(ve,2);if(fe.Oc&1<<ke)V=0;else{switch(fe.Oc|=1<<ke,Pe.hc=ke,Pe.Ea=Y[0],Pe.nc=ae[0],Pe.K=[null],++fe.ab,e(4>=fe.ab),ke){case 0:case 1:Pe.b=Be(ve,3)+2,Ae=qo(ze(Pe.Ea,Pe.b),ze(Pe.nc,Pe.b),0,fe,Pe.K),Pe.K=Pe.K[0];break;case 3:var He,Ue=Be(ve,8)+1,bt=16<Ue?0:4<Ue?1:2<Ue?2:3;if(Y[0]=ze(Pe.Ea,bt),Pe.b=bt,He=Ae=qo(Ue,1,0,fe,Pe.K)){var ct,sn=Ue,pt=Pe,_n=1<<(8>>pt.b),si=o(_n);if(si==null)He=0;else{var an=pt.K[0],mt=pt.w;for(si[0]=pt.K[0][0],ct=1;ct<1*sn;++ct)si[ct]=St(an[mt+ct],si[ct-1]);for(;ct<4*_n;++ct)si[ct]=0;pt.K[0]=null,pt.K[0]=si,He=1}}Ae=He;break;case 2:break;default:e(0)}V=Ae}}if(B=B[0],$=$[0],V&&Be(q,1)&&!(V=1<=(ye=Be(q,4))&&11>=ye)){E.a=3;break e}var Ze;if(Ze=V)t:{var jr,Xt,En,cr=E,Ti=B,lo=$,Ar=ye,qi=b,uo=cr.m,ai=cr.s,Dn=[null],Vn=1,Mr=0,jn=xV[Ar];n:for(;;){if(qi&&Be(uo,1)){var Ai=Be(uo,3)+2,ia=ze(Ti,Ai),Br=ze(lo,Ai),Do=ia*Br;if(!qo(ia,Br,0,cr,Dn))break n;for(Dn=Dn[0],ai.xc=Ai,jr=0;jr<Do;++jr){var Zn=Dn[jr]>>8&65535;Dn[jr]=Zn,Zn>=Vn&&(Vn=Zn+1)}}if(uo.h)break n;for(Xt=0;5>Xt;++Xt){var ci=OA[Xt];!Xt&&0<Ar&&(ci+=1<<Ar),Mr<ci&&(Mr=ci)}var Xo=s(Vn*jn,M),ho=Vn,es=s(ho,be);if(es==null)var ts=null;else e(65536>=ho),ts=es;var To=o(Mr);if(ts==null||To==null||Xo==null){cr.a=1;break n}var ns=Xo;for(jr=En=0;jr<Vn;++jr){var nr=ts[jr],rs=nr.G,oa=nr.H,od=0,Lc=1,Mi=0;for(Xt=0;5>Xt;++Xt){ci=OA[Xt],rs[Xt]=ns,oa[Xt]=En,!Xt&&0<Ar&&(ci+=1<<Ar);i:{var Y0,Aw=ci,Q0=cr,Yp=To,WV=ns,GV=En,Mw=0,Bl=Q0.m,KV=Be(Bl,1);if(i(Yp,0,0,Aw),KV){var YV=Be(Bl,1)+1,QV=Be(Bl,1),HA=Be(Bl,QV==0?1:8);Yp[HA]=1,YV==2&&(Yp[HA=Be(Bl,8)]=1);var Z0=1}else{var WA=o(19),GA=Be(Bl,4)+4;if(19<GA){Q0.a=3;var J0=0;break i}for(Y0=0;Y0<GA;++Y0)WA[EV[Y0]]=Be(Bl,3);var Pw=void 0,Qp=void 0,KA=Q0,ZV=WA,X0=Aw,YA=Yp,Nw=0,Ul=KA.m,QA=8,ZA=s(128,M);r:for(;A(ZA,0,7,ZV,19);){if(Be(Ul,1)){var JV=2+2*Be(Ul,3);if((Pw=2+Be(Ul,JV))>X0)break r}else Pw=X0;for(Qp=0;Qp<X0&&Pw--;){pe(Ul);var JA=ZA[0+(127&te(Ul))];de(Ul,Ul.u+JA.g);var Ph=JA.value;if(16>Ph)YA[Qp++]=Ph,Ph!=0&&(QA=Ph);else{var XV=Ph==16,XA=Ph-16,e7=wV[XA],e5=Be(Ul,bV[XA])+e7;if(Qp+e5>X0)break r;for(var t7=XV?QA:0;0<e5--;)YA[Qp++]=t7}}Nw=1;break r}Nw||(KA.a=3),Z0=Nw}(Z0=Z0&&!Bl.h)&&(Mw=A(WV,GV,8,Yp,Aw)),Z0&&Mw!=0?J0=Mw:(Q0.a=3,J0=0)}if(J0==0)break n;if(Lc&&CV[Xt]==1&&(Lc=ns[En].g==0),od+=ns[En].g,En+=J0,3>=Xt){var Zp,kw=To[0];for(Zp=1;Zp<ci;++Zp)To[Zp]>kw&&(kw=To[Zp]);Mi+=kw}}if(nr.nd=Lc,nr.Qb=0,Lc&&(nr.qb=(rs[3][oa[3]+0].value<<24|rs[1][oa[1]+0].value<<16|rs[2][oa[2]+0].value)>>>0,od==0&&256>rs[0][oa[0]+0].value&&(nr.Qb=1,nr.qb+=rs[0][oa[0]+0].value<<8)),nr.jc=!nr.Qb&&6>Mi,nr.jc){var ev,Fc=nr;for(ev=0;ev<nd;++ev){var zl=ev,$l=Fc.pd[zl],tv=Fc.G[0][Fc.H[0]+zl];256<=tv.value?($l.g=tv.g+256,$l.value=tv.value):($l.g=0,$l.value=0,zl>>=Gr(tv,8,$l),zl>>=Gr(Fc.G[1][Fc.H[1]+zl],16,$l),zl>>=Gr(Fc.G[2][Fc.H[2]+zl],0,$l),Gr(Fc.G[3][Fc.H[3]+zl],24,$l))}}}ai.vc=Dn,ai.Wb=Vn,ai.Ya=ts,ai.yc=Xo,Ze=1;break t}Ze=0}if(!(V=Ze)){E.a=3;break e}if(0<ye){if(K.ua=1<<ye,!W(K.Wa,ye)){E.a=1,V=0;break e}}else K.ua=0;var Ow=E,t5=B,n7=$,Rw=Ow.s,Lw=Rw.xc;if(Ow.c=t5,Ow.i=n7,Rw.md=ze(t5,Lw),Rw.wc=Lw==0?-1:(1<<Lw)-1,b){E.xb=kV;break e}if((se=o(B*$))==null){E.a=1,V=0;break e}V=(V=oo(E,se,0,B,$,$,null))&&!q.h;break e}return V?(O!=null?O[0]=se:(e(se==null),e(b)),E.$=0,b||Si(K)):Si(K),V}function Pa(d,f){var b=d.c*d.i,E=b+f+16*f;return e(d.c<=f),d.V=o(E),d.V==null?(d.Ta=null,d.Ua=0,d.a=1,0):(d.Ta=d.V,d.Ua=d.Ba+b+f,1)}function Na(d,f){var b=d.C,E=f-b,O=d.V,V=d.Ba+d.c*b;for(e(f<=d.l.o);0<E;){var B=16<E?16:E,$=d.l.ma,q=d.l.width,K=q*B,se=$.ca,ye=$.tb+q*b,Y=d.Ta,ae=d.Ua;Co(d,B,O,V),SA(Y,ae,se,ye,K),io($,b,b+B,se,ye,q),E-=B,O+=B*d.c,b+=B}e(b==f),d.C=d.Ma=f}function ka(){this.ub=this.yd=this.td=this.Rb=0}function Ec(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ch(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function Wu(){this.Yb=(function(){var d=[];return(function f(b,E,O){for(var V=O[E],B=0;B<V&&(b.push(O.length>E+1?[]:0),!(O.length<E+1));B++)f(b[B],E+1,O)})(d,0,[3,11]),d})()}function Ic(){this.jb=o(3),this.Wc=a([4,8],Wu),this.Xc=a([4,17],Wu)}function Gu(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function zi(){this.ld=this.La=this.dd=this.tc=0}function Zs(){this.Na=this.la=0}function Is(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function xc(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Eh(){this.uc=this.M=this.Nb=0,this.wa=Array(new zi),this.Y=0,this.ya=Array(new xc),this.aa=0,this.l=new Oa}function Ku(){this.y=o(16),this.f=o(8),this.ea=o(8)}function Yu(){this.cb=this.a=0,this.sc="",this.m=new j,this.Od=new ka,this.Kc=new Ec,this.ed=new Gu,this.Qa=new Ch,this.Ic=this.$c=this.Aa=0,this.D=new Eh,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,j),this.ia=0,this.pb=s(4,Is),this.Pa=new Ic,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ku),this.Hd=0,this.rb=Array(new Zs),this.sb=0,this.wa=Array(new zi),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new xc),this.L=this.aa=0,this.gd=a([4,2],zi),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ho(d,f){return 0>d?0:d>f?f:d}function Oa(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Qu(){var d=new Yu;return d!=null&&(d.a=0,d.sc="OK",d.cb=0,d.Xb=0,Gp||(Gp=El)),d}function _r(d,f,b){return d.a==0&&(d.a=f,d.sc=b,d.cb=0),0}function Zu(d,f,b){return 3<=b&&d[f+0]==157&&d[f+1]==1&&d[f+2]==42}function xs(d,f){if(d==null)return 0;if(d.a=0,d.sc="OK",f==null)return _r(d,2,"null VP8Io passed to VP8GetHeaders()");var b=f.data,E=f.w,O=f.ha;if(4>O)return _r(d,7,"Truncated header.");var V=b[E+0]|b[E+1]<<8|b[E+2]<<16,B=d.Od;if(B.Rb=!(1&V),B.td=V>>1&7,B.yd=V>>4&1,B.ub=V>>5,3<B.td)return _r(d,3,"Incorrect keyframe parameters.");if(!B.yd)return _r(d,4,"Frame not displayable.");E+=3,O-=3;var $=d.Kc;if(B.Rb){if(7>O)return _r(d,7,"cannot parse picture header");if(!Zu(b,E,O))return _r(d,3,"Bad code word");$.c=16383&(b[E+4]<<8|b[E+3]),$.Td=b[E+4]>>6,$.i=16383&(b[E+6]<<8|b[E+5]),$.Ud=b[E+6]>>6,E+=7,O-=7,d.za=$.c+15>>4,d.Ub=$.i+15>>4,f.width=$.c,f.height=$.i,f.Da=0,f.j=0,f.v=0,f.va=f.width,f.o=f.height,f.da=0,f.ib=f.width,f.hb=f.height,f.U=f.width,f.T=f.height,i((V=d.Pa).jb,0,255,V.jb.length),e((V=d.Qa)!=null),V.Cb=0,V.Bb=0,V.Fb=1,i(V.Zb,0,0,V.Zb.length),i(V.Lb,0,0,V.Lb)}if(B.ub>O)return _r(d,7,"bad partition length");De(V=d.m,b,E,B.ub),E+=B.ub,O-=B.ub,B.Rb&&($.Ld=xe(V),$.Kd=xe(V)),$=d.Qa;var q,K=d.Pa;if(e(V!=null),e($!=null),$.Cb=xe(V),$.Cb){if($.Bb=xe(V),xe(V)){for($.Fb=xe(V),q=0;4>q;++q)$.Zb[q]=xe(V)?ge(V,7):0;for(q=0;4>q;++q)$.Lb[q]=xe(V)?ge(V,6):0}if($.Bb)for(q=0;3>q;++q)K.jb[q]=xe(V)?Se(V,8):255}else $.Bb=0;if(V.Ka)return _r(d,3,"cannot parse segment header");if(($=d.ed).zd=xe(V),$.Tb=Se(V,6),$.wb=Se(V,3),$.Pc=xe(V),$.Pc&&xe(V)){for(K=0;4>K;++K)xe(V)&&($.vd[K]=ge(V,6));for(K=0;4>K;++K)xe(V)&&($.od[K]=ge(V,6))}if(d.L=$.Tb==0?0:$.zd?1:2,V.Ka)return _r(d,3,"cannot parse filter header");var se=O;if(O=q=E,E=q+se,$=se,d.Xb=(1<<Se(d.m,2))-1,se<3*(K=d.Xb))b=7;else{for(q+=3*K,$-=3*K,se=0;se<K;++se){var ye=b[O+0]|b[O+1]<<8|b[O+2]<<16;ye>$&&(ye=$),De(d.Jc[+se],b,q,ye),q+=ye,$-=ye,O+=3}De(d.Jc[+K],b,q,$),b=q<E?0:5}if(b!=0)return _r(d,b,"cannot parse partitions");for(b=Se(q=d.m,7),O=xe(q)?ge(q,4):0,E=xe(q)?ge(q,4):0,$=xe(q)?ge(q,4):0,K=xe(q)?ge(q,4):0,q=xe(q)?ge(q,4):0,se=d.Qa,ye=0;4>ye;++ye){if(se.Cb){var Y=se.Zb[ye];se.Fb||(Y+=b)}else{if(0<ye){d.pb[ye]=d.pb[0];continue}Y=b}var ae=d.pb[ye];ae.Sc[0]=Sw[Ho(Y+O,127)],ae.Sc[1]=Dw[Ho(Y+0,127)],ae.Eb[0]=2*Sw[Ho(Y+E,127)],ae.Eb[1]=101581*Dw[Ho(Y+$,127)]>>16,8>ae.Eb[1]&&(ae.Eb[1]=8),ae.Qc[0]=Sw[Ho(Y+K,117)],ae.Qc[1]=Dw[Ho(Y+q,127)],ae.lc=Y+q}if(!B.Rb)return _r(d,4,"Not a key frame.");for(xe(V),B=d.Pa,b=0;4>b;++b){for(O=0;8>O;++O)for(E=0;3>E;++E)for($=0;11>$;++$)K=Ne(V,PV[b][O][E][$])?Se(V,8):AV[b][O][E][$],B.Wc[b][O].Yb[E][$]=K;for(O=0;17>O;++O)B.Xc[b][O]=B.Wc[b][NV[O]]}return d.kc=xe(V),d.kc&&(d.Bd=Se(V,8)),d.cb=1}function El(d,f,b,E,O,V,B){var $=f[O].Yb[b];for(b=0;16>O;++O){if(!Ne(d,$[b+0]))return O;for(;!Ne(d,$[b+1]);)if($=f[++O].Yb[0],b=0,O==16)return 16;var q=f[O+1].Yb;if(Ne(d,$[b+2])){var K=d,se=0;if(Ne(K,(Y=$)[(ye=b)+3]))if(Ne(K,Y[ye+6])){for($=0,ye=2*(se=Ne(K,Y[ye+8]))+(Y=Ne(K,Y[ye+9+se])),se=0,Y=DV[ye];Y[$];++$)se+=se+Ne(K,Y[$]);se+=3+(8<<ye)}else Ne(K,Y[ye+7])?(se=7+2*Ne(K,165),se+=Ne(K,145)):se=5+Ne(K,159);else se=Ne(K,Y[ye+4])?3+Ne(K,Y[ye+5]):2;$=q[2]}else se=1,$=q[1];q=B+TV[O],0>(K=d).b&&Ee(K);var ye,Y=K.b,ae=(ye=K.Ca>>1)-(K.I>>Y)>>31;--K.b,K.Ca+=ae,K.Ca|=1,K.I-=(ye+1&ae)<<Y,V[q]=((se^ae)-ae)*E[(0<O)+0]}return 16}function Ju(d){var f=d.rb[d.sb-1];f.la=0,f.Na=0,i(d.zc,0,0,d.zc.length),d.ja=0}function so(d,f,b,E,O){O=d[f+b+32*E]+(O>>3),d[f+b+32*E]=-256&O?0>O?0:255:O}function Lr(d,f,b,E,O,V){so(d,f,0,b,E+O),so(d,f,1,b,E+V),so(d,f,2,b,E-V),so(d,f,3,b,E-O)}function Di(d){return(20091*d>>16)+d}function Io(d,f,b,E){var O,V=0,B=o(16);for(O=0;4>O;++O){var $=d[f+0]+d[f+8],q=d[f+0]-d[f+8],K=(35468*d[f+4]>>16)-Di(d[f+12]),se=Di(d[f+4])+(35468*d[f+12]>>16);B[V+0]=$+se,B[V+1]=q+K,B[V+2]=q-K,B[V+3]=$-se,V+=4,f++}for(O=V=0;4>O;++O)$=(d=B[V+0]+4)+B[V+8],q=d-B[V+8],K=(35468*B[V+4]>>16)-Di(B[V+12]),so(b,E,0,0,$+(se=Di(B[V+4])+(35468*B[V+12]>>16))),so(b,E,1,0,q+K),so(b,E,2,0,q-K),so(b,E,3,0,$-se),V++,E+=32}function Il(d,f,b,E){var O=d[f+0]+4,V=35468*d[f+4]>>16,B=Di(d[f+4]),$=35468*d[f+1]>>16;Lr(b,E,0,O+B,d=Di(d[f+1]),$),Lr(b,E,1,O+V,d,$),Lr(b,E,2,O-V,d,$),Lr(b,E,3,O-B,d,$)}function xl(d,f,b,E,O){Io(d,f,b,E),O&&Io(d,f+16,b,E+4)}function Wo(d,f,b,E){id(d,f+0,b,E,1),id(d,f+32,b,E+128,1)}function Nn(d,f,b,E){var O;for(d=d[f+0]+4,O=0;4>O;++O)for(f=0;4>f;++f)so(b,E,f,O,d)}function Sc(d,f,b,E){d[f+0]&&kn(d,f+0,b,E),d[f+16]&&kn(d,f+16,b,E+4),d[f+32]&&kn(d,f+32,b,E+128),d[f+48]&&kn(d,f+48,b,E+128+4)}function Ss(d,f,b,E){var O,V=o(16);for(O=0;4>O;++O){var B=d[f+0+O]+d[f+12+O],$=d[f+4+O]+d[f+8+O],q=d[f+4+O]-d[f+8+O],K=d[f+0+O]-d[f+12+O];V[0+O]=B+$,V[8+O]=B-$,V[4+O]=K+q,V[12+O]=K-q}for(O=0;4>O;++O)B=(d=V[0+4*O]+3)+V[3+4*O],$=V[1+4*O]+V[2+4*O],q=V[1+4*O]-V[2+4*O],K=d-V[3+4*O],b[E+0]=B+$>>3,b[E+16]=K+q>>3,b[E+32]=B-$>>3,b[E+48]=K-q>>3,E+=64}function Go(d,f,b){var E,O=f-32,V=Jo,B=255-d[O-1];for(E=0;E<b;++E){var $,q=V,K=B+d[f-1];for($=0;$<b;++$)d[f+$]=q[K+d[O+$]];f+=32}}function kp(d,f){Go(d,f,4)}function Ih(d,f){Go(d,f,8)}function Op(d,f){Go(d,f,16)}function Xu(d,f){var b;for(b=0;16>b;++b)r(d,f+32*b,d,f-32,16)}function xh(d,f){var b;for(b=16;0<b;--b)i(d,f,d[f-1],16),f+=32}function Ko(d,f,b){var E;for(E=0;16>E;++E)i(f,b+32*E,d,16)}function Dc(d,f){var b,E=16;for(b=0;16>b;++b)E+=d[f-1+32*b]+d[f+b-32];Ko(E>>5,d,f)}function $i(d,f){var b,E=8;for(b=0;16>b;++b)E+=d[f-1+32*b];Ko(E>>4,d,f)}function Sl(d,f){var b,E=8;for(b=0;16>b;++b)E+=d[f+b-32];Ko(E>>4,d,f)}function Sh(d,f){Ko(128,d,f)}function Ft(d,f,b){return d+2*f+b+2>>2}function Ra(d,f){var b,E=f-32;for(E=new Uint8Array([Ft(d[E-1],d[E+0],d[E+1]),Ft(d[E+0],d[E+1],d[E+2]),Ft(d[E+1],d[E+2],d[E+3]),Ft(d[E+2],d[E+3],d[E+4])]),b=0;4>b;++b)r(d,f+32*b,E,0,E.length)}function Rp(d,f){var b=d[f-1],E=d[f-1+32],O=d[f-1+64],V=d[f-1+96];qe(d,f+0,16843009*Ft(d[f-1-32],b,E)),qe(d,f+32,16843009*Ft(b,E,O)),qe(d,f+64,16843009*Ft(E,O,V)),qe(d,f+96,16843009*Ft(O,V,V))}function Lp(d,f){var b,E=4;for(b=0;4>b;++b)E+=d[f+b-32]+d[f-1+32*b];for(E>>=3,b=0;4>b;++b)i(d,f+32*b,E,4)}function Js(d,f){var b=d[f-1+0],E=d[f-1+32],O=d[f-1+64],V=d[f-1-32],B=d[f+0-32],$=d[f+1-32],q=d[f+2-32],K=d[f+3-32];d[f+0+96]=Ft(E,O,d[f-1+96]),d[f+1+96]=d[f+0+64]=Ft(b,E,O),d[f+2+96]=d[f+1+64]=d[f+0+32]=Ft(V,b,E),d[f+3+96]=d[f+2+64]=d[f+1+32]=d[f+0+0]=Ft(B,V,b),d[f+3+64]=d[f+2+32]=d[f+1+0]=Ft($,B,V),d[f+3+32]=d[f+2+0]=Ft(q,$,B),d[f+3+0]=Ft(K,q,$)}function di(d,f){var b=d[f+1-32],E=d[f+2-32],O=d[f+3-32],V=d[f+4-32],B=d[f+5-32],$=d[f+6-32],q=d[f+7-32];d[f+0+0]=Ft(d[f+0-32],b,E),d[f+1+0]=d[f+0+32]=Ft(b,E,O),d[f+2+0]=d[f+1+32]=d[f+0+64]=Ft(E,O,V),d[f+3+0]=d[f+2+32]=d[f+1+64]=d[f+0+96]=Ft(O,V,B),d[f+3+32]=d[f+2+64]=d[f+1+96]=Ft(V,B,$),d[f+3+64]=d[f+2+96]=Ft(B,$,q),d[f+3+96]=Ft($,q,q)}function Fp(d,f){var b=d[f-1+0],E=d[f-1+32],O=d[f-1+64],V=d[f-1-32],B=d[f+0-32],$=d[f+1-32],q=d[f+2-32],K=d[f+3-32];d[f+0+0]=d[f+1+64]=V+B+1>>1,d[f+1+0]=d[f+2+64]=B+$+1>>1,d[f+2+0]=d[f+3+64]=$+q+1>>1,d[f+3+0]=q+K+1>>1,d[f+0+96]=Ft(O,E,b),d[f+0+64]=Ft(E,b,V),d[f+0+32]=d[f+1+96]=Ft(b,V,B),d[f+1+32]=d[f+2+96]=Ft(V,B,$),d[f+2+32]=d[f+3+96]=Ft(B,$,q),d[f+3+32]=Ft($,q,K)}function Vp(d,f){var b=d[f+0-32],E=d[f+1-32],O=d[f+2-32],V=d[f+3-32],B=d[f+4-32],$=d[f+5-32],q=d[f+6-32],K=d[f+7-32];d[f+0+0]=b+E+1>>1,d[f+1+0]=d[f+0+64]=E+O+1>>1,d[f+2+0]=d[f+1+64]=O+V+1>>1,d[f+3+0]=d[f+2+64]=V+B+1>>1,d[f+0+32]=Ft(b,E,O),d[f+1+32]=d[f+0+96]=Ft(E,O,V),d[f+2+32]=d[f+1+96]=Ft(O,V,B),d[f+3+32]=d[f+2+96]=Ft(V,B,$),d[f+3+64]=Ft(B,$,q),d[f+3+96]=Ft($,q,K)}function Ds(d,f){var b=d[f-1+0],E=d[f-1+32],O=d[f-1+64],V=d[f-1+96];d[f+0+0]=b+E+1>>1,d[f+2+0]=d[f+0+32]=E+O+1>>1,d[f+2+32]=d[f+0+64]=O+V+1>>1,d[f+1+0]=Ft(b,E,O),d[f+3+0]=d[f+1+32]=Ft(E,O,V),d[f+3+32]=d[f+1+64]=Ft(O,V,V),d[f+3+64]=d[f+2+64]=d[f+0+96]=d[f+1+96]=d[f+2+96]=d[f+3+96]=V}function La(d,f){var b=d[f-1+0],E=d[f-1+32],O=d[f-1+64],V=d[f-1+96],B=d[f-1-32],$=d[f+0-32],q=d[f+1-32],K=d[f+2-32];d[f+0+0]=d[f+2+32]=b+B+1>>1,d[f+0+32]=d[f+2+64]=E+b+1>>1,d[f+0+64]=d[f+2+96]=O+E+1>>1,d[f+0+96]=V+O+1>>1,d[f+3+0]=Ft($,q,K),d[f+2+0]=Ft(B,$,q),d[f+1+0]=d[f+3+32]=Ft(b,B,$),d[f+1+32]=d[f+3+64]=Ft(E,b,B),d[f+1+64]=d[f+3+96]=Ft(O,E,b),d[f+1+96]=Ft(V,O,E)}function Fa(d,f){var b;for(b=0;8>b;++b)r(d,f+32*b,d,f-32,8)}function Tc(d,f){var b;for(b=0;8>b;++b)i(d,f,d[f-1],8),f+=32}function ao(d,f,b){var E;for(E=0;8>E;++E)i(f,b+32*E,d,8)}function Dh(d,f){var b,E=8;for(b=0;8>b;++b)E+=d[f+b-32]+d[f-1+32*b];ao(E>>4,d,f)}function Ac(d,f){var b,E=4;for(b=0;8>b;++b)E+=d[f+b-32];ao(E>>3,d,f)}function Hn(d,f){var b,E=4;for(b=0;8>b;++b)E+=d[f-1+32*b];ao(E>>3,d,f)}function Th(d,f){ao(128,d,f)}function Xs(d,f,b){var E=d[f-b],O=d[f+0],V=3*(O-E)+ww[1020+d[f-2*b]-d[f+b]],B=B0[112+(V+4>>3)];d[f-b]=Jo[255+E+B0[112+(V+3>>3)]],d[f+0]=Jo[255+O-B]}function Dl(d,f,b,E){var O=d[f+0],V=d[f+b];return Ns[255+d[f-2*b]-d[f-b]]>E||Ns[255+V-O]>E}function Mc(d,f,b,E){return 4*Ns[255+d[f-b]-d[f+0]]+Ns[255+d[f-2*b]-d[f+b]]<=E}function Tl(d,f,b,E,O){var V=d[f-3*b],B=d[f-2*b],$=d[f-b],q=d[f+0],K=d[f+b],se=d[f+2*b],ye=d[f+3*b];return 4*Ns[255+$-q]+Ns[255+B-K]>E?0:Ns[255+d[f-4*b]-V]<=O&&Ns[255+V-B]<=O&&Ns[255+B-$]<=O&&Ns[255+ye-se]<=O&&Ns[255+se-K]<=O&&Ns[255+K-q]<=O}function Ts(d,f,b,E){var O=2*E+1;for(E=0;16>E;++E)Mc(d,f+E,b,O)&&Xs(d,f+E,b)}function Al(d,f,b,E){var O=2*E+1;for(E=0;16>E;++E)Mc(d,f+E*b,1,O)&&Xs(d,f+E*b,1)}function xo(d,f,b,E){var O;for(O=3;0<O;--O)Ts(d,f+=4*b,b,E)}function ed(d,f,b,E){var O;for(O=3;0<O;--O)Al(d,f+=4,b,E)}function ea(d,f,b,E,O,V,B,$){for(V=2*V+1;0<O--;){if(Tl(d,f,b,V,B))if(Dl(d,f,b,$))Xs(d,f,b);else{var q=d,K=f,se=b,ye=q[K-2*se],Y=q[K-se],ae=q[K+0],fe=q[K+se],Ae=q[K+2*se],ve=27*(ke=ww[1020+3*(ae-Y)+ww[1020+ye-fe]])+63>>7,Pe=18*ke+63>>7,ke=9*ke+63>>7;q[K-3*se]=Jo[255+q[K-3*se]+ke],q[K-2*se]=Jo[255+ye+Pe],q[K-se]=Jo[255+Y+ve],q[K+0]=Jo[255+ae-ve],q[K+se]=Jo[255+fe-Pe],q[K+2*se]=Jo[255+Ae-ke]}f+=E}}function co(d,f,b,E,O,V,B,$){for(V=2*V+1;0<O--;){if(Tl(d,f,b,V,B))if(Dl(d,f,b,$))Xs(d,f,b);else{var q=d,K=f,se=b,ye=q[K-se],Y=q[K+0],ae=q[K+se],fe=B0[112+(4+(Ae=3*(Y-ye))>>3)],Ae=B0[112+(Ae+3>>3)],ve=fe+1>>1;q[K-2*se]=Jo[255+q[K-2*se]+ve],q[K-se]=Jo[255+ye+Ae],q[K+0]=Jo[255+Y-fe],q[K+se]=Jo[255+ae-ve]}f+=E}}function td(d,f,b,E,O,V){ea(d,f,b,1,16,E,O,V)}function ta(d,f,b,E,O,V){ea(d,f,1,b,16,E,O,V)}function Pc(d,f,b,E,O,V){var B;for(B=3;0<B;--B)co(d,f+=4*b,b,1,16,E,O,V)}function y(d,f,b,E,O,V){var B;for(B=3;0<B;--B)co(d,f+=4,1,b,16,E,O,V)}function P(d,f,b,E,O,V,B,$){ea(d,f,O,1,8,V,B,$),ea(b,E,O,1,8,V,B,$)}function G(d,f,b,E,O,V,B,$){ea(d,f,1,O,8,V,B,$),ea(b,E,1,O,8,V,B,$)}function re(d,f,b,E,O,V,B,$){co(d,f+4*O,O,1,8,V,B,$),co(b,E+4*O,O,1,8,V,B,$)}function he(d,f,b,E,O,V,B,$){co(d,f+4,1,O,8,V,B,$),co(b,E+4,1,O,8,V,B,$)}function Me(){this.ba=new Wt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Cn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function je(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function st(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function dt(){this.ua=0,this.Wa=new Jt,this.vb=new Jt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new be,this.yc=new M}function Lt(){this.xb=this.a=0,this.l=new Oa,this.ca=new Wt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Q,this.Pb=0,this.wd=new Q,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new dt,this.ab=0,this.gc=s(4,st),this.Oc=0}function Ut(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Oa,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function mn(d,f,b,E,O,V,B){for(d=d==null?0:d[f+0],f=0;f<B;++f)O[V+f]=d+b[E+f]&255,d=O[V+f]}function er(d,f,b,E,O,V,B){var $;if(d==null)mn(null,null,b,E,O,V,B);else for($=0;$<B;++$)O[V+$]=d[f+$]+b[E+$]&255}function Wn(d,f,b,E,O,V,B){if(d==null)mn(null,null,b,E,O,V,B);else{var $,q=d[f+0],K=q,se=q;for($=0;$<B;++$)K=se+(q=d[f+$])-K,se=b[E+$]+(-256&K?0>K?0:255:K)&255,K=q,O[V+$]=se}}function Fn(d,f,b,E){var O=f.width,V=f.o;if(e(d!=null&&f!=null),0>b||0>=E||b+E>V)return null;if(!d.Cc){if(d.ga==null){var B;if(d.ga=new Ut,(B=d.ga==null)||(B=f.width*f.o,e(d.Gb.length==0),d.Gb=o(B),d.Uc=0,d.Gb==null?B=0:(d.mb=d.Gb,d.nb=d.Uc,d.rc=null,B=1),B=!B),!B){B=d.ga;var $=d.Fa,q=d.P,K=d.qc,se=d.mb,ye=d.nb,Y=q+1,ae=K-1,fe=B.l;if(e($!=null&&se!=null&&f!=null),jl[0]=null,jl[1]=mn,jl[2]=er,jl[3]=Wn,B.ca=se,B.tb=ye,B.c=f.width,B.i=f.height,e(0<B.c&&0<B.i),1>=K)f=0;else if(B.$a=3&$[q+0],B.Z=$[q+0]>>2&3,B.Lc=$[q+0]>>4&3,q=$[q+0]>>6&3,0>B.$a||1<B.$a||4<=B.Z||1<B.Lc||q)f=0;else if(fe.put=Et,fe.ac=zo,fe.bc=Es,fe.ma=B,fe.width=f.width,fe.height=f.height,fe.Da=f.Da,fe.v=f.v,fe.va=f.va,fe.j=f.j,fe.o=f.o,B.$a)e:{e(B.$a==1),f=Ui();t:for(;;){if(f==null){f=0;break e}if(e(B!=null),B.mc=f,f.c=B.c,f.i=B.i,f.l=B.l,f.l.ma=B,f.l.width=B.c,f.l.height=B.i,f.a=0,Te(f.m,$,Y,ae),!qo(B.c,B.i,1,f,null)||(f.ab==1&&f.gc[0].hc==3&&$o(f.s)?(B.ic=1,$=f.c*f.i,f.Ta=null,f.Ua=0,f.V=o($),f.Ba=0,f.V==null?(f.a=1,f=0):f=1):(B.ic=0,f=Pa(f,B.c)),!f))break t;f=1;break e}B.mc=null,f=0}else f=ae>=B.c*B.i;B=!f}if(B)return null;d.ga.Lc!=1?d.Ga=0:E=V-b}e(d.ga!=null),e(b+E<=V);e:{if(f=($=d.ga).c,V=$.l.o,$.$a==0){if(Y=d.rc,ae=d.Vc,fe=d.Fa,q=d.P+1+b*f,K=d.mb,se=d.nb+b*f,e(q<=d.P+d.qc),$.Z!=0)for(e(jl[$.Z]!=null),B=0;B<E;++B)jl[$.Z](Y,ae,fe,q,K,se,f),Y=K,ae=se,se+=f,q+=f;else for(B=0;B<E;++B)r(K,se,fe,q,f),Y=K,ae=se,se+=f,q+=f;d.rc=Y,d.Vc=ae}else{if(e($.mc!=null),f=b+E,e((B=$.mc)!=null),e(f<=B.i),B.C>=f)f=1;else if($.ic||ar(),$.ic){$=B.V,Y=B.Ba,ae=B.c;var Ae=B.i,ve=(fe=1,q=B.$/ae,K=B.$%ae,se=B.m,ye=B.s,B.$),Pe=ae*Ae,ke=ae*f,He=ye.wc,Ue=ve<ke?ii(ye,K,q):null;e(ve<=Pe),e(f<=Ae),e($o(ye));t:for(;;){for(;!se.h&&ve<ke;){if(K&He||(Ue=ii(ye,K,q)),e(Ue!=null),pe(se),256>(Ae=qn(Ue.G[0],Ue.H[0],se)))$[Y+ve]=Ae,++ve,++K>=ae&&(K=0,++q<=f&&!(q%16)&&Eo(B,q));else{if(!(280>Ae)){fe=0;break t}Ae=ro(Ae-256,se);var bt,ct=qn(Ue.G[4],Ue.H[4],se);if(pe(se),!(ve>=(ct=ui(ae,ct=ro(ct,se)))&&Pe-ve>=Ae)){fe=0;break t}for(bt=0;bt<Ae;++bt)$[Y+ve+bt]=$[Y+ve+bt-ct];for(ve+=Ae,K+=Ae;K>=ae;)K-=ae,++q<=f&&!(q%16)&&Eo(B,q);ve<ke&&K&He&&(Ue=ii(ye,K,q))}e(se.h==oe(se))}Eo(B,q>f?f:q);break t}!fe||se.h&&ve<Pe?(fe=0,B.a=se.h?5:3):B.$=ve,f=fe}else f=oo(B,B.V,B.Ba,B.c,B.i,f,Na);if(!f){E=0;break e}}b+E>=V&&(d.Cc=1),E=1}if(!E)return null;if(d.Cc&&((E=d.ga)!=null&&(E.mc=null),d.ga=null,0<d.Ga))return alert("todo:WebPDequantizeLevels"),null}return d.nb+b*O}function Tr(d,f,b,E,O,V){for(;0<O--;){var B,$=d,q=f+(b?1:0),K=d,se=f+(b?0:3);for(B=0;B<E;++B){var ye=K[se+4*B];ye!=255&&(ye*=32897,$[q+4*B+0]=$[q+4*B+0]*ye>>23,$[q+4*B+1]=$[q+4*B+1]*ye>>23,$[q+4*B+2]=$[q+4*B+2]*ye>>23)}f+=V}}function br(d,f,b,E,O){for(;0<E--;){var V;for(V=0;V<b;++V){var B=d[f+2*V+0],$=15&(K=d[f+2*V+1]),q=4369*$,K=(240&K|K>>4)*q>>16;d[f+2*V+0]=(240&B|B>>4)*q>>16&240|(15&B|B<<4)*q>>16>>4&15,d[f+2*V+1]=240&K|$}f+=O}}function Kr(d,f,b,E,O,V,B,$){var q,K,se=255;for(K=0;K<O;++K){for(q=0;q<E;++q){var ye=d[f+q];V[B+4*q]=ye,se&=ye}f+=b,B+=$}return se!=255}function So(d,f,b,E,O){var V;for(V=0;V<O;++V)b[E+V]=d[f+V]>>8}function ar(){Wp=Tr,IA=br,xA=Kr,SA=So}function As(d,f,b){T[d]=function(E,O,V,B,$,q,K,se,ye,Y,ae,fe,Ae,ve,Pe,ke,He){var Ue,bt=He-1>>1,ct=$[q+0]|K[se+0]<<16,sn=ye[Y+0]|ae[fe+0]<<16;e(E!=null);var pt=3*ct+sn+131074>>2;for(f(E[O+0],255&pt,pt>>16,Ae,ve),V!=null&&(pt=3*sn+ct+131074>>2,f(V[B+0],255&pt,pt>>16,Pe,ke)),Ue=1;Ue<=bt;++Ue){var _n=$[q+Ue]|K[se+Ue]<<16,si=ye[Y+Ue]|ae[fe+Ue]<<16,an=ct+_n+sn+si+524296,mt=an+2*(_n+sn)>>3;pt=mt+ct>>1,ct=(an=an+2*(ct+si)>>3)+_n>>1,f(E[O+2*Ue-1],255&pt,pt>>16,Ae,ve+(2*Ue-1)*b),f(E[O+2*Ue-0],255&ct,ct>>16,Ae,ve+(2*Ue-0)*b),V!=null&&(pt=an+sn>>1,ct=mt+si>>1,f(V[B+2*Ue-1],255&pt,pt>>16,Pe,ke+(2*Ue-1)*b),f(V[B+2*Ue+0],255&ct,ct>>16,Pe,ke+(2*Ue+0)*b)),ct=_n,sn=si}1&He||(pt=3*ct+sn+131074>>2,f(E[O+He-1],255&pt,pt>>16,Ae,ve+(He-1)*b),V!=null&&(pt=3*sn+ct+131074>>2,f(V[B+He-1],255&pt,pt>>16,Pe,ke+(He-1)*b)))}}function Ml(){ks[U0]=OV,ks[z0]=FA,ks[NA]=RV,ks[$0]=VA,ks[q0]=jA,ks[Cw]=BA,ks[kA]=LV,ks[Ew]=FA,ks[Iw]=VA,ks[H0]=jA,ks[xw]=BA}function Yo(d){return d&~FV?0>d?0:255:d>>UA}function h(d,f){return Yo((19077*d>>8)+(26149*f>>8)-14234)}function C(d,f,b){return Yo((19077*d>>8)-(6419*f>>8)-(13320*b>>8)+8708)}function S(d,f){return Yo((19077*d>>8)+(33050*f>>8)-17685)}function z(d,f,b,E,O){E[O+0]=h(d,b),E[O+1]=C(d,f,b),E[O+2]=S(d,f)}function ce(d,f,b,E,O){E[O+0]=S(d,f),E[O+1]=C(d,f,b),E[O+2]=h(d,b)}function we(d,f,b,E,O){var V=C(d,f,b);f=V<<3&224|S(d,f)>>3,E[O+0]=248&h(d,b)|V>>5,E[O+1]=f}function Ge(d,f,b,E,O){var V=240&S(d,f)|15;E[O+0]=240&h(d,b)|C(d,f,b)>>4,E[O+1]=V}function Sn(d,f,b,E,O){E[O+0]=255,z(d,f,b,E,O+1)}function wr(d,f,b,E,O){ce(d,f,b,E,O),E[O+3]=255}function Vt(d,f,b,E,O){z(d,f,b,E,O),E[O+3]=255}function tr(d,f,b){T[d]=function(E,O,V,B,$,q,K,se,ye){for(var Y=se+(-2&ye)*b;se!=Y;)f(E[O+0],V[B+0],$[q+0],K,se),f(E[O+1],V[B+0],$[q+0],K,se+b),O+=2,++B,++q,se+=2*b;1&ye&&f(E[O+0],V[B+0],$[q+0],K,se)}}function Cr(d,f,b){return b==0?d==0?f==0?6:5:f==0?4:0:b}function na(d,f,b,E,O){switch(d>>>30){case 3:id(f,b,E,O,0);break;case 2:Ps(f,b,E,O);break;case 1:kn(f,b,E,O)}}function dr(d,f){var b,E,O=f.M,V=f.Nb,B=d.oc,$=d.pc+40,q=d.oc,K=d.pc+584,se=d.oc,ye=d.pc+600;for(b=0;16>b;++b)B[$+32*b-1]=129;for(b=0;8>b;++b)q[K+32*b-1]=129,se[ye+32*b-1]=129;for(0<O?B[$-1-32]=q[K-1-32]=se[ye-1-32]=129:(i(B,$-32-1,127,21),i(q,K-32-1,127,9),i(se,ye-32-1,127,9)),E=0;E<d.za;++E){var Y=f.ya[f.aa+E];if(0<E){for(b=-1;16>b;++b)r(B,$+32*b-4,B,$+32*b+12,4);for(b=-1;8>b;++b)r(q,K+32*b-4,q,K+32*b+4,4),r(se,ye+32*b-4,se,ye+32*b+4,4)}var ae=d.Gd,fe=d.Hd+E,Ae=Y.ad,ve=Y.Hc;if(0<O&&(r(B,$-32,ae[fe].y,0,16),r(q,K-32,ae[fe].f,0,8),r(se,ye-32,ae[fe].ea,0,8)),Y.Za){var Pe=B,ke=$-32+16;for(0<O&&(E>=d.za-1?i(Pe,ke,ae[fe].y[15],4):r(Pe,ke,ae[fe+1].y,0,4)),b=0;4>b;b++)Pe[ke+128+b]=Pe[ke+256+b]=Pe[ke+384+b]=Pe[ke+0+b];for(b=0;16>b;++b,ve<<=2)Pe=B,ke=$+$A[b],ra[Y.Ob[b]](Pe,ke),na(ve,Ae,16*+b,Pe,ke)}else if(Pe=Cr(E,O,Y.Ob[0]),Vl[Pe](B,$),ve!=0)for(b=0;16>b;++b,ve<<=2)na(ve,Ae,16*+b,B,$+$A[b]);for(b=Y.Gc,Pe=Cr(E,O,Y.Dd),Rc[Pe](q,K),Rc[Pe](se,ye),ve=Ae,Pe=q,ke=K,255&(Y=0|b)&&(170&Y?Ba(ve,256,Pe,ke):Qn(ve,256,Pe,ke)),Y=se,ve=ye,255&(b>>=8)&&(170&b?Ba(Ae,320,Y,ve):Qn(Ae,320,Y,ve)),O<d.Ub-1&&(r(ae[fe].y,0,B,$+480,16),r(ae[fe].f,0,q,K+224,8),r(ae[fe].ea,0,se,ye+224,8)),b=8*V*d.B,ae=d.sa,fe=d.ta+16*E+16*V*d.R,Ae=d.qa,Y=d.ra+8*E+b,ve=d.Ha,Pe=d.Ia+8*E+b,b=0;16>b;++b)r(ae,fe+b*d.R,B,$+32*b,16);for(b=0;8>b;++b)r(Ae,Y+b*d.B,q,K+32*b,8),r(ve,Pe+b*d.B,se,ye+32*b,8)}}function Ms(d,f,b,E,O,V,B,$,q){var K=[0],se=[0],ye=0,Y=q!=null?q.kd:0,ae=q??new je;if(d==null||12>b)return 7;ae.data=d,ae.w=f,ae.ha=b,f=[f],b=[b],ae.gb=[ae.gb];e:{var fe=f,Ae=b,ve=ae.gb;if(e(d!=null),e(Ae!=null),e(ve!=null),ve[0]=0,12<=Ae[0]&&!t(d,fe[0],"RIFF")){if(t(d,fe[0]+8,"WEBP")){ve=3;break e}var Pe=vt(d,fe[0]+4);if(12>Pe||4294967286<Pe){ve=3;break e}if(Y&&Pe>Ae[0]-8){ve=7;break e}ve[0]=Pe,fe[0]+=12,Ae[0]-=12}ve=0}if(ve!=0)return ve;for(Pe=0<ae.gb[0],b=b[0];;){e:{var ke=d;Ae=f,ve=b;var He=K,Ue=se,bt=fe=[0];if((pt=ye=[ye])[0]=0,8>ve[0])ve=7;else{if(!t(ke,Ae[0],"VP8X")){if(vt(ke,Ae[0]+4)!=10){ve=3;break e}if(18>ve[0]){ve=7;break e}var ct=vt(ke,Ae[0]+8),sn=1+et(ke,Ae[0]+12);if(2147483648<=sn*(ke=1+et(ke,Ae[0]+15))){ve=3;break e}bt!=null&&(bt[0]=ct),He!=null&&(He[0]=sn),Ue!=null&&(Ue[0]=ke),Ae[0]+=18,ve[0]-=18,pt[0]=1}ve=0}}if(ye=ye[0],fe=fe[0],ve!=0)return ve;if(Ae=!!(2&fe),!Pe&&ye)return 3;if(V!=null&&(V[0]=!!(16&fe)),B!=null&&(B[0]=Ae),$!=null&&($[0]=0),B=K[0],fe=se[0],ye&&Ae&&q==null){ve=0;break}if(4>b){ve=7;break}if(Pe&&ye||!Pe&&!ye&&!t(d,f[0],"ALPH")){b=[b],ae.na=[ae.na],ae.P=[ae.P],ae.Sa=[ae.Sa];e:{ct=d,ve=f,Pe=b;var pt=ae.gb;He=ae.na,Ue=ae.P,bt=ae.Sa,sn=22,e(ct!=null),e(Pe!=null),ke=ve[0];var _n=Pe[0];for(e(He!=null),e(bt!=null),He[0]=null,Ue[0]=null,bt[0]=0;;){if(ve[0]=ke,Pe[0]=_n,8>_n){ve=7;break e}var si=vt(ct,ke+4);if(4294967286<si){ve=3;break e}var an=8+si+1&-2;if(sn+=an,0<pt&&sn>pt){ve=3;break e}if(!t(ct,ke,"VP8 ")||!t(ct,ke,"VP8L")){ve=0;break e}if(_n[0]<an){ve=7;break e}t(ct,ke,"ALPH")||(He[0]=ct,Ue[0]=ke+8,bt[0]=si),ke+=an,_n-=an}}if(b=b[0],ae.na=ae.na[0],ae.P=ae.P[0],ae.Sa=ae.Sa[0],ve!=0)break}b=[b],ae.Ja=[ae.Ja],ae.xa=[ae.xa];e:if(pt=d,ve=f,Pe=b,He=ae.gb[0],Ue=ae.Ja,bt=ae.xa,ct=ve[0],ke=!t(pt,ct,"VP8 "),sn=!t(pt,ct,"VP8L"),e(pt!=null),e(Pe!=null),e(Ue!=null),e(bt!=null),8>Pe[0])ve=7;else{if(ke||sn){if(pt=vt(pt,ct+4),12<=He&&pt>He-12){ve=3;break e}if(Y&&pt>Pe[0]-8){ve=7;break e}Ue[0]=pt,ve[0]+=8,Pe[0]-=8,bt[0]=sn}else bt[0]=5<=Pe[0]&&pt[ct+0]==47&&!(pt[ct+4]>>5),Ue[0]=Pe[0];ve=0}if(b=b[0],ae.Ja=ae.Ja[0],ae.xa=ae.xa[0],f=f[0],ve!=0)break;if(4294967286<ae.Ja)return 3;if($==null||Ae||($[0]=ae.xa?2:1),B=[B],fe=[fe],ae.xa){if(5>b){ve=7;break}$=B,Y=fe,Ae=V,d==null||5>b?d=0:5<=b&&d[f+0]==47&&!(d[f+4]>>5)?(Pe=[0],pt=[0],He=[0],Te(Ue=new Q,d,f,b),sr(Ue,Pe,pt,He)?($!=null&&($[0]=Pe[0]),Y!=null&&(Y[0]=pt[0]),Ae!=null&&(Ae[0]=He[0]),d=1):d=0):d=0}else{if(10>b){ve=7;break}$=fe,d==null||10>b||!Zu(d,f+3,b-3)?d=0:(Y=d[f+0]|d[f+1]<<8|d[f+2]<<16,Ae=16383&(d[f+7]<<8|d[f+6]),d=16383&(d[f+9]<<8|d[f+8]),1&Y||3<(Y>>1&7)||!(Y>>4&1)||Y>>5>=ae.Ja||!Ae||!d?d=0:(B&&(B[0]=Ae),$&&($[0]=d),d=1))}if(!d||(B=B[0],fe=fe[0],ye&&(K[0]!=B||se[0]!=fe)))return 3;q!=null&&(q[0]=ae,q.offset=f-q.w,e(4294967286>f-q.w),e(q.offset==q.ha-b));break}return ve==0||ve==7&&ye&&q==null?(V!=null&&(V[0]|=ae.na!=null&&0<ae.na.length),E!=null&&(E[0]=B),O!=null&&(O[0]=fe),0):ve}function Nc(d,f,b){var E=f.width,O=f.height,V=0,B=0,$=E,q=O;if(f.Da=d!=null&&0<d.Da,f.Da&&($=d.cd,q=d.bd,V=d.v,B=d.j,11>b||(V&=-2,B&=-2),0>V||0>B||0>=$||0>=q||V+$>E||B+q>O))return 0;if(f.v=V,f.j=B,f.va=V+$,f.o=B+q,f.U=$,f.T=q,f.da=d!=null&&0<d.da,f.da){if(!Tt($,q,b=[d.ib],V=[d.hb]))return 0;f.ib=b[0],f.hb=V[0]}return f.ob=d!=null&&d.ob,f.Kb=d==null||!d.Sd,f.da&&(f.ob=f.ib<3*E/4&&f.hb<3*O/4,f.Kb=0),1}function jp(d){if(d==null)return 2;if(11>d.S){var f=d.f.RGBA;f.fb+=(d.height-1)*f.A,f.A=-f.A}else f=d.f.kb,d=d.height,f.O+=(d-1)*f.fa,f.fa=-f.fa,f.N+=(d-1>>1)*f.Ab,f.Ab=-f.Ab,f.W+=(d-1>>1)*f.Db,f.Db=-f.Db,f.F!=null&&(f.J+=(d-1)*f.lb,f.lb=-f.lb);return 0}function Pl(d,f,b,E){if(E==null||0>=d||0>=f)return 2;if(b!=null){if(b.Da){var O=b.cd,V=b.bd,B=-2&b.v,$=-2&b.j;if(0>B||0>$||0>=O||0>=V||B+O>d||$+V>f)return 2;d=O,f=V}if(b.da){if(!Tt(d,f,O=[b.ib],V=[b.hb]))return 2;d=O[0],f=V[0]}}E.width=d,E.height=f;e:{var q=E.width,K=E.height;if(d=E.S,0>=q||0>=K||!(d>=U0&&13>d))d=2;else{if(0>=E.Rd&&E.sd==null){B=V=O=f=0;var se=($=q*qA[d])*K;if(11>d||(V=(K+1)/2*(f=(q+1)/2),d==12&&(B=(O=q)*K)),(K=o(se+2*V+B))==null){d=1;break e}E.sd=K,11>d?((q=E.f.RGBA).eb=K,q.fb=0,q.A=$,q.size=se):((q=E.f.kb).y=K,q.O=0,q.fa=$,q.Fd=se,q.f=K,q.N=0+se,q.Ab=f,q.Cd=V,q.ea=K,q.W=0+se+V,q.Db=f,q.Ed=V,d==12&&(q.F=K,q.J=0+se+2*V),q.Tc=B,q.lb=O)}if(f=1,O=E.S,V=E.width,B=E.height,O>=U0&&13>O)if(11>O)d=E.f.RGBA,f&=($=Math.abs(d.A))*(B-1)+V<=d.size,f&=$>=V*qA[O],f&=d.eb!=null;else{d=E.f.kb,$=(V+1)/2,se=(B+1)/2,q=Math.abs(d.fa),K=Math.abs(d.Ab);var ye=Math.abs(d.Db),Y=Math.abs(d.lb),ae=Y*(B-1)+V;f&=q*(B-1)+V<=d.Fd,f&=K*(se-1)+$<=d.Cd,f=(f&=ye*(se-1)+$<=d.Ed)&q>=V&K>=$&ye>=$,f&=d.y!=null,f&=d.f!=null,f&=d.ea!=null,O==12&&(f&=Y>=V,f&=ae<=d.Tc,f&=d.F!=null)}else f=0;d=f?0:2}}return d!=0||b!=null&&b.fd&&(d=jp(E)),d}var nd=64,Qo=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Zo=24,Nl=32,kc=8,kl=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ot("Predictor0","PredictorAdd0"),T.Predictor0=function(){return 4278190080},T.Predictor1=function(d){return d},T.Predictor2=function(d,f,b){return f[b+0]},T.Predictor3=function(d,f,b){return f[b+1]},T.Predictor4=function(d,f,b){return f[b-1]},T.Predictor5=function(d,f,b){return Ct(Ct(d,f[b+1]),f[b+0])},T.Predictor6=function(d,f,b){return Ct(d,f[b-1])},T.Predictor7=function(d,f,b){return Ct(d,f[b+0])},T.Predictor8=function(d,f,b){return Ct(f[b-1],f[b+0])},T.Predictor9=function(d,f,b){return Ct(f[b+0],f[b+1])},T.Predictor10=function(d,f,b){return Ct(Ct(d,f[b-1]),Ct(f[b+0],f[b+1]))},T.Predictor11=function(d,f,b){var E=f[b+0];return 0>=Bt(E>>24&255,d>>24&255,(f=f[b-1])>>24&255)+Bt(E>>16&255,d>>16&255,f>>16&255)+Bt(E>>8&255,d>>8&255,f>>8&255)+Bt(255&E,255&d,255&f)?E:d},T.Predictor12=function(d,f,b){var E=f[b+0];return(wn((d>>24&255)+(E>>24&255)-((f=f[b-1])>>24&255))<<24|wn((d>>16&255)+(E>>16&255)-(f>>16&255))<<16|wn((d>>8&255)+(E>>8&255)-(f>>8&255))<<8|wn((255&d)+(255&E)-(255&f)))>>>0},T.Predictor13=function(d,f,b){var E=f[b-1];return(ln((d=Ct(d,f[b+0]))>>24&255,E>>24&255)<<24|ln(d>>16&255,E>>16&255)<<16|ln(d>>8&255,E>>8&255)<<8|ln(255&d,255&E))>>>0};var Bp=T.PredictorAdd0;T.PredictorAdd1=Pt,ot("Predictor2","PredictorAdd2"),ot("Predictor3","PredictorAdd3"),ot("Predictor4","PredictorAdd4"),ot("Predictor5","PredictorAdd5"),ot("Predictor6","PredictorAdd6"),ot("Predictor7","PredictorAdd7"),ot("Predictor8","PredictorAdd8"),ot("Predictor9","PredictorAdd9"),ot("Predictor10","PredictorAdd10"),ot("Predictor11","PredictorAdd11"),ot("Predictor12","PredictorAdd12"),ot("Predictor13","PredictorAdd13");var Ah=T.PredictorAdd2;gt("ColorIndexInverseTransform","MapARGB","32b",function(d){return d>>8&255},function(d){return d}),gt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(d){return d},function(d){return d>>8&255});var Fr,V0=T.ColorIndexInverseTransform,Va=T.MapARGB,ja=T.VP8LColorIndexInverseTransformAlpha,Up=T.MapAlpha,zp=T.VP8LPredictorsAdd=[];zp.length=16,(T.VP8LPredictors=[]).length=16,(T.VP8LPredictorsAdd_C=[]).length=16,(T.VP8LPredictors_C=[]).length=16;var $p,qp,Ol,Rl,Ll,rd,Fl,id,Ps,Ba,kn,Qn,Vr,oi,Oc,Hp,Mh,j0,yA,_A,bA,wA,CA,EA,Wp,IA,xA,SA,DA=o(511),TA=o(2041),AA=o(225),MA=o(767),PA=0,ww=TA,B0=AA,Jo=MA,Ns=DA,U0=0,z0=1,NA=2,$0=3,q0=4,Cw=5,kA=6,Ew=7,Iw=8,H0=9,xw=10,bV=[2,3,7],wV=[3,3,11],OA=[280,256,256,256,40],CV=[0,1,1,1,0],EV=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],IV=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],xV=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],SV=8,Sw=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Dw=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Gp=null,DV=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],TV=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],RA=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],AV=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],MV=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],PV=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],NV=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Vl=[],ra=[],Rc=[],kV=1,LA=2,jl=[],ks=[];As("UpsampleRgbLinePair",z,3),As("UpsampleBgrLinePair",ce,3),As("UpsampleRgbaLinePair",Vt,4),As("UpsampleBgraLinePair",wr,4),As("UpsampleArgbLinePair",Sn,4),As("UpsampleRgba4444LinePair",Ge,2),As("UpsampleRgb565LinePair",we,2);var OV=T.UpsampleRgbLinePair,RV=T.UpsampleBgrLinePair,FA=T.UpsampleRgbaLinePair,VA=T.UpsampleBgraLinePair,jA=T.UpsampleArgbLinePair,BA=T.UpsampleRgba4444LinePair,LV=T.UpsampleRgb565LinePair,W0=16,G0=1<<W0-1,Kp=-227,Tw=482,UA=6,FV=(256<<UA)-1,zA=0,VV=o(256),jV=o(256),BV=o(256),UV=o(256),zV=o(Tw-Kp),$V=o(Tw-Kp);tr("YuvToRgbRow",z,3),tr("YuvToBgrRow",ce,3),tr("YuvToRgbaRow",Vt,4),tr("YuvToBgraRow",wr,4),tr("YuvToArgbRow",Sn,4),tr("YuvToRgba4444Row",Ge,2),tr("YuvToRgb565Row",we,2);var $A=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],K0=[0,2,8],qV=[8,7,6,4,4,2,2,2,1,1,1,1],HV=1;this.WebPDecodeRGBA=function(d,f,b,E,O){var V=z0,B=new Me,$=new Wt;B.ba=$,$.S=V,$.width=[$.width],$.height=[$.height];var q=$.width,K=$.height,se=new Dt;if(se==null||d==null)var ye=2;else e(se!=null),ye=Ms(d,f,b,se.width,se.height,se.Pd,se.Qd,se.format,null);if(ye!=0?q=0:(q!=null&&(q[0]=se.width[0]),K!=null&&(K[0]=se.height[0]),q=1),q){$.width=$.width[0],$.height=$.height[0],E!=null&&(E[0]=$.width),O!=null&&(O[0]=$.height);e:{if(E=new Oa,(O=new je).data=d,O.w=f,O.ha=b,O.kd=1,f=[0],e(O!=null),((d=Ms(O.data,O.w,O.ha,null,null,null,f,null,O))==0||d==7)&&f[0]&&(d=4),(f=d)==0){if(e(B!=null),E.data=O.data,E.w=O.w+O.offset,E.ha=O.ha-O.offset,E.put=Et,E.ac=zo,E.bc=Es,E.ma=B,O.xa){if((d=Ui())==null){B=1;break e}if((function(Y,ae){var fe=[0],Ae=[0],ve=[0];t:for(;;){if(Y==null)return 0;if(ae==null)return Y.a=2,0;if(Y.l=ae,Y.a=0,Te(Y.m,ae.data,ae.w,ae.ha),!sr(Y.m,fe,Ae,ve)){Y.a=3;break t}if(Y.xb=LA,ae.width=fe[0],ae.height=Ae[0],!qo(fe[0],Ae[0],1,Y,null))break t;return 1}return e(Y.a!=0),0})(d,E)){if(E=(f=Pl(E.width,E.height,B.Oa,B.ba))==0){t:{E=d;n:for(;;){if(E==null){E=0;break t}if(e(E.s.yc!=null),e(E.s.Ya!=null),e(0<E.s.Wb),e((b=E.l)!=null),e((O=b.ma)!=null),E.xb!=0){if(E.ca=O.ba,E.tb=O.tb,e(E.ca!=null),!Nc(O.Oa,b,$0)){E.a=2;break n}if(!Pa(E,b.width)||b.da)break n;if((b.da||At(E.ca.S))&&ar(),11>E.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),E.ca.f.kb.F!=null&&ar()),E.Pb&&0<E.s.ua&&E.s.vb.X==null&&!W(E.s.vb,E.s.Wa.Xa)){E.a=1;break n}E.xb=0}if(!oo(E,E.V,E.Ba,E.c,E.i,b.o,Ma))break n;O.Dc=E.Ma,E=1;break t}e(E.a!=0),E=0}E=!E}E&&(f=d.a)}else f=d.a}else{if((d=new Qu)==null){B=1;break e}if(d.Fa=O.na,d.P=O.P,d.qc=O.Sa,xs(d,E)){if((f=Pl(E.width,E.height,B.Oa,B.ba))==0){if(d.Aa=0,b=B.Oa,e((O=d)!=null),b!=null){if(0<(q=0>(q=b.Md)?0:100<q?255:255*q/100)){for(K=se=0;4>K;++K)12>(ye=O.pb[K]).lc&&(ye.ia=q*qV[0>ye.lc?0:ye.lc]>>3),se|=ye.ia;se&&(alert("todo:VP8InitRandom"),O.ia=1)}O.Ga=b.Id,100<O.Ga?O.Ga=100:0>O.Ga&&(O.Ga=0)}(function(Y,ae){if(Y==null)return 0;if(ae==null)return _r(Y,2,"NULL VP8Io parameter in VP8Decode().");if(!Y.cb&&!xs(Y,ae))return 0;if(e(Y.cb),ae.ac==null||ae.ac(ae)){ae.ob&&(Y.L=0);var fe=K0[Y.L];if(Y.L==2?(Y.yb=0,Y.zb=0):(Y.yb=ae.v-fe>>4,Y.zb=ae.j-fe>>4,0>Y.yb&&(Y.yb=0),0>Y.zb&&(Y.zb=0)),Y.Va=ae.o+15+fe>>4,Y.Hb=ae.va+15+fe>>4,Y.Hb>Y.za&&(Y.Hb=Y.za),Y.Va>Y.Ub&&(Y.Va=Y.Ub),0<Y.L){var Ae=Y.ed;for(fe=0;4>fe;++fe){var ve;if(Y.Qa.Cb){var Pe=Y.Qa.Lb[fe];Y.Qa.Fb||(Pe+=Ae.Tb)}else Pe=Ae.Tb;for(ve=0;1>=ve;++ve){var ke=Y.gd[fe][ve],He=Pe;if(Ae.Pc&&(He+=Ae.vd[0],ve&&(He+=Ae.od[0])),0<(He=0>He?0:63<He?63:He)){var Ue=He;0<Ae.wb&&(Ue=4<Ae.wb?Ue>>2:Ue>>1)>9-Ae.wb&&(Ue=9-Ae.wb),1>Ue&&(Ue=1),ke.dd=Ue,ke.tc=2*He+Ue,ke.ld=40<=He?2:15<=He?1:0}else ke.tc=0;ke.La=ve}}}fe=0}else _r(Y,6,"Frame setup failed"),fe=Y.a;if(fe=fe==0){if(fe){Y.$c=0,0<Y.Aa||(Y.Ic=HV);t:{fe=Y.Ic,Ae=4*(Ue=Y.za);var bt=32*Ue,ct=Ue+1,sn=0<Y.L?Ue*(0<Y.Aa?2:1):0,pt=(Y.Aa==2?2:1)*Ue;if((ke=Ae+832+(ve=3*(16*fe+K0[Y.L])/2*bt)+(Pe=Y.Fa!=null&&0<Y.Fa.length?Y.Kc.c*Y.Kc.i:0))!=ke)fe=0;else{if(ke>Y.Vb){if(Y.Vb=0,Y.Ec=o(ke),Y.Fc=0,Y.Ec==null){fe=_r(Y,1,"no memory during frame initialization.");break t}Y.Vb=ke}ke=Y.Ec,He=Y.Fc,Y.Ac=ke,Y.Bc=He,He+=Ae,Y.Gd=s(bt,Ku),Y.Hd=0,Y.rb=s(ct+1,Zs),Y.sb=1,Y.wa=sn?s(sn,zi):null,Y.Y=0,Y.D.Nb=0,Y.D.wa=Y.wa,Y.D.Y=Y.Y,0<Y.Aa&&(Y.D.Y+=Ue),e(!0),Y.oc=ke,Y.pc=He,He+=832,Y.ya=s(pt,xc),Y.aa=0,Y.D.ya=Y.ya,Y.D.aa=Y.aa,Y.Aa==2&&(Y.D.aa+=Ue),Y.R=16*Ue,Y.B=8*Ue,Ue=(bt=K0[Y.L])*Y.R,bt=bt/2*Y.B,Y.sa=ke,Y.ta=He+Ue,Y.qa=Y.sa,Y.ra=Y.ta+16*fe*Y.R+bt,Y.Ha=Y.qa,Y.Ia=Y.ra+8*fe*Y.B+bt,Y.$c=0,He+=ve,Y.mb=Pe?ke:null,Y.nb=Pe?He:null,e(He+Pe<=Y.Fc+Y.Vb),Ju(Y),i(Y.Ac,Y.Bc,0,Ae),fe=1}}if(fe){if(ae.ka=0,ae.y=Y.sa,ae.O=Y.ta,ae.f=Y.qa,ae.N=Y.ra,ae.ea=Y.Ha,ae.Vd=Y.Ia,ae.fa=Y.R,ae.Rc=Y.B,ae.F=null,ae.J=0,!PA){for(fe=-255;255>=fe;++fe)DA[255+fe]=0>fe?-fe:fe;for(fe=-1020;1020>=fe;++fe)TA[1020+fe]=-128>fe?-128:127<fe?127:fe;for(fe=-112;112>=fe;++fe)AA[112+fe]=-16>fe?-16:15<fe?15:fe;for(fe=-255;510>=fe;++fe)MA[255+fe]=0>fe?0:255<fe?255:fe;PA=1}Fl=Ss,id=xl,Ba=Wo,kn=Nn,Qn=Sc,Ps=Il,Vr=td,oi=ta,Oc=P,Hp=G,Mh=Pc,j0=y,yA=re,_A=he,bA=Ts,wA=Al,CA=xo,EA=ed,ra[0]=Lp,ra[1]=kp,ra[2]=Ra,ra[3]=Rp,ra[4]=Js,ra[5]=Fp,ra[6]=di,ra[7]=Vp,ra[8]=La,ra[9]=Ds,Vl[0]=Dc,Vl[1]=Op,Vl[2]=Xu,Vl[3]=xh,Vl[4]=$i,Vl[5]=Sl,Vl[6]=Sh,Rc[0]=Dh,Rc[1]=Ih,Rc[2]=Fa,Rc[3]=Tc,Rc[4]=Hn,Rc[5]=Ac,Rc[6]=Th,fe=1}else fe=0}fe&&(fe=(function(_n,si){for(_n.M=0;_n.M<_n.Va;++_n.M){var an,mt=_n.Jc[_n.M&_n.Xb],Ze=_n.m,jr=_n;for(an=0;an<jr.za;++an){var Xt=Ze,En=jr,cr=En.Ac,Ti=En.Bc+4*an,lo=En.zc,Ar=En.ya[En.aa+an];if(En.Qa.Bb?Ar.$b=Ne(Xt,En.Pa.jb[0])?2+Ne(Xt,En.Pa.jb[2]):Ne(Xt,En.Pa.jb[1]):Ar.$b=0,En.kc&&(Ar.Ad=Ne(Xt,En.Bd)),Ar.Za=!Ne(Xt,145)+0,Ar.Za){var qi=Ar.Ob,uo=0;for(En=0;4>En;++En){var ai,Dn=lo[0+En];for(ai=0;4>ai;++ai){Dn=MV[cr[Ti+ai]][Dn];for(var Vn=RA[Ne(Xt,Dn[0])];0<Vn;)Vn=RA[2*Vn+Ne(Xt,Dn[Vn])];Dn=-Vn,cr[Ti+ai]=Dn}r(qi,uo,cr,Ti,4),uo+=4,lo[0+En]=Dn}}else Dn=Ne(Xt,156)?Ne(Xt,128)?1:3:Ne(Xt,163)?2:0,Ar.Ob[0]=Dn,i(cr,Ti,Dn,4),i(lo,0,Dn,4);Ar.Dd=Ne(Xt,142)?Ne(Xt,114)?Ne(Xt,183)?1:3:2:0}if(jr.m.Ka)return _r(_n,7,"Premature end-of-partition0 encountered.");for(;_n.ja<_n.za;++_n.ja){if(jr=mt,Xt=(Ze=_n).rb[Ze.sb-1],cr=Ze.rb[Ze.sb+Ze.ja],an=Ze.ya[Ze.aa+Ze.ja],Ti=Ze.kc?an.Ad:0)Xt.la=cr.la=0,an.Za||(Xt.Na=cr.Na=0),an.Hc=0,an.Gc=0,an.ia=0;else{var Mr,jn;if(Xt=cr,cr=jr,Ti=Ze.Pa.Xc,lo=Ze.ya[Ze.aa+Ze.ja],Ar=Ze.pb[lo.$b],En=lo.ad,qi=0,uo=Ze.rb[Ze.sb-1],Dn=ai=0,i(En,qi,0,384),lo.Za)var Ai=0,ia=Ti[3];else{Vn=o(16);var Br=Xt.Na+uo.Na;if(Br=Gp(cr,Ti[1],Br,Ar.Eb,0,Vn,0),Xt.Na=uo.Na=(0<Br)+0,1<Br)Fl(Vn,0,En,qi);else{var Do=Vn[0]+3>>3;for(Vn=0;256>Vn;Vn+=16)En[qi+Vn]=Do}Ai=1,ia=Ti[0]}var Zn=15&Xt.la,ci=15&uo.la;for(Vn=0;4>Vn;++Vn){var Xo=1&ci;for(Do=jn=0;4>Do;++Do)Zn=Zn>>1|(Xo=(Br=Gp(cr,ia,Br=Xo+(1&Zn),Ar.Sc,Ai,En,qi))>Ai)<<7,jn=jn<<2|(3<Br?3:1<Br?2:En[qi+0]!=0),qi+=16;Zn>>=4,ci=ci>>1|Xo<<7,ai=(ai<<8|jn)>>>0}for(ia=Zn,Ai=ci>>4,Mr=0;4>Mr;Mr+=2){for(jn=0,Zn=Xt.la>>4+Mr,ci=uo.la>>4+Mr,Vn=0;2>Vn;++Vn){for(Xo=1&ci,Do=0;2>Do;++Do)Br=Xo+(1&Zn),Zn=Zn>>1|(Xo=0<(Br=Gp(cr,Ti[2],Br,Ar.Qc,0,En,qi)))<<3,jn=jn<<2|(3<Br?3:1<Br?2:En[qi+0]!=0),qi+=16;Zn>>=2,ci=ci>>1|Xo<<5}Dn|=jn<<4*Mr,ia|=Zn<<4<<Mr,Ai|=(240&ci)<<Mr}Xt.la=ia,uo.la=Ai,lo.Hc=ai,lo.Gc=Dn,lo.ia=43690&Dn?0:Ar.ia,Ti=!(ai|Dn)}if(0<Ze.L&&(Ze.wa[Ze.Y+Ze.ja]=Ze.gd[an.$b][an.Za],Ze.wa[Ze.Y+Ze.ja].La|=!Ti),jr.Ka)return _r(_n,7,"Premature end-of-file encountered.")}if(Ju(_n),Ze=si,jr=1,an=(mt=_n).D,Xt=0<mt.L&&mt.M>=mt.zb&&mt.M<=mt.Va,mt.Aa==0)t:{if(an.M=mt.M,an.uc=Xt,dr(mt,an),jr=1,an=(jn=mt.D).Nb,Xt=(Dn=K0[mt.L])*mt.R,cr=Dn/2*mt.B,Vn=16*an*mt.R,Do=8*an*mt.B,Ti=mt.sa,lo=mt.ta-Xt+Vn,Ar=mt.qa,En=mt.ra-cr+Do,qi=mt.Ha,uo=mt.Ia-cr+Do,ci=(Zn=jn.M)==0,ai=Zn>=mt.Va-1,mt.Aa==2&&dr(mt,jn),jn.uc)for(Xo=(Br=mt).D.M,e(Br.D.uc),jn=Br.yb;jn<Br.Hb;++jn){Ai=jn,ia=Xo;var ho=(es=(Mi=Br).D).Nb;Mr=Mi.R;var es=es.wa[es.Y+Ai],ts=Mi.sa,To=Mi.ta+16*ho*Mr+16*Ai,ns=es.dd,nr=es.tc;if(nr!=0)if(e(3<=nr),Mi.L==1)0<Ai&&wA(ts,To,Mr,nr+4),es.La&&EA(ts,To,Mr,nr),0<ia&&bA(ts,To,Mr,nr+4),es.La&&CA(ts,To,Mr,nr);else{var rs=Mi.B,oa=Mi.qa,od=Mi.ra+8*ho*rs+8*Ai,Lc=Mi.Ha,Mi=Mi.Ia+8*ho*rs+8*Ai;ho=es.ld,0<Ai&&(oi(ts,To,Mr,nr+4,ns,ho),Hp(oa,od,Lc,Mi,rs,nr+4,ns,ho)),es.La&&(j0(ts,To,Mr,nr,ns,ho),_A(oa,od,Lc,Mi,rs,nr,ns,ho)),0<ia&&(Vr(ts,To,Mr,nr+4,ns,ho),Oc(oa,od,Lc,Mi,rs,nr+4,ns,ho)),es.La&&(Mh(ts,To,Mr,nr,ns,ho),yA(oa,od,Lc,Mi,rs,nr,ns,ho))}}if(mt.ia&&alert("todo:DitherRow"),Ze.put!=null){if(jn=16*Zn,Zn=16*(Zn+1),ci?(Ze.y=mt.sa,Ze.O=mt.ta+Vn,Ze.f=mt.qa,Ze.N=mt.ra+Do,Ze.ea=mt.Ha,Ze.W=mt.Ia+Do):(jn-=Dn,Ze.y=Ti,Ze.O=lo,Ze.f=Ar,Ze.N=En,Ze.ea=qi,Ze.W=uo),ai||(Zn-=Dn),Zn>Ze.o&&(Zn=Ze.o),Ze.F=null,Ze.J=null,mt.Fa!=null&&0<mt.Fa.length&&jn<Zn&&(Ze.J=Fn(mt,Ze,jn,Zn-jn),Ze.F=mt.mb,Ze.F==null&&Ze.F.length==0)){jr=_r(mt,3,"Could not decode alpha data.");break t}jn<Ze.j&&(Dn=Ze.j-jn,jn=Ze.j,e(!(1&Dn)),Ze.O+=mt.R*Dn,Ze.N+=mt.B*(Dn>>1),Ze.W+=mt.B*(Dn>>1),Ze.F!=null&&(Ze.J+=Ze.width*Dn)),jn<Zn&&(Ze.O+=Ze.v,Ze.N+=Ze.v>>1,Ze.W+=Ze.v>>1,Ze.F!=null&&(Ze.J+=Ze.v),Ze.ka=jn-Ze.j,Ze.U=Ze.va-Ze.v,Ze.T=Zn-jn,jr=Ze.put(Ze))}an+1!=mt.Ic||ai||(r(mt.sa,mt.ta-Xt,Ti,lo+16*mt.R,Xt),r(mt.qa,mt.ra-cr,Ar,En+8*mt.B,cr),r(mt.Ha,mt.Ia-cr,qi,uo+8*mt.B,cr))}if(!jr)return _r(_n,6,"Output aborted.")}return 1})(Y,ae)),ae.bc!=null&&ae.bc(ae),fe&=1}return fe?(Y.cb=0,fe):0})(d,E)||(f=d.a)}}else f=d.a}f==0&&B.Oa!=null&&B.Oa.fd&&(f=jp(B.ba))}B=f}V=B!=0?null:11>V?$.f.RGBA.eb:$.f.kb.y}else V=null;return V};var qA=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function l(T,U){for(var x="",A=0;A<4;A++)x+=String.fromCharCode(T[U++]);return x}function u(T,U){return T[U+0]|T[U+1]<<8}function m(T,U){return(T[U+0]|T[U+1]<<8|T[U+2]<<16)>>>0}function _(T,U){return(T[U+0]|T[U+1]<<8|T[U+2]<<16|T[U+3]<<24)>>>0}new c;var p=[0],D=[0],k=[],L=new c,R=n,X=(function(T,U){var x={},A=0,M=!1,ne=0,be=0;if(x.frames=[],!(function(j,Q){for(var te=0;te<4;te++)if(j[Q+te]!="RIFF".charCodeAt(te))return!0;return!1})(T,U)){for(_(T,U+=4),U+=8;U<T.length;){var De=l(T,U),Se=_(T,U+=4);U+=4;var ge=Se+(1&Se);switch(De){case"VP8 ":case"VP8L":x.frames[A]===void 0&&(x.frames[A]={}),(Be=x.frames[A]).src_off=M?be:U-8,Be.src_size=ne+Se+8,A++,M&&(M=!1,ne=0,be=0);break;case"VP8X":(Be=x.header={}).feature_flags=T[U];var Te=U+4;Be.canvas_width=1+m(T,Te),Te+=3,Be.canvas_height=1+m(T,Te),Te+=3;break;case"ALPH":M=!0,ne=ge+8,be=U-8;break;case"ANIM":(Be=x.header).bgcolor=_(T,U),Te=U+4,Be.loop_count=u(T,Te),Te+=2;break;case"ANMF":var We,Be;(Be=x.frames[A]={}).offset_x=2*m(T,U),U+=3,Be.offset_y=2*m(T,U),U+=3,Be.width=1+m(T,U),U+=3,Be.height=1+m(T,U),U+=3,Be.duration=m(T,U),U+=3,We=T[U++],Be.dispose=1&We,Be.blend=We>>1&1}De!="ANMF"&&(U+=ge)}return x}})(R,0);X.response=R,X.rgbaoutput=!0,X.dataurl=!1;var ee=X.header?X.header:null,J=X.frames?X.frames:null;if(ee){ee.loop_counter=ee.loop_count,p=[ee.canvas_height],D=[ee.canvas_width];for(var _e=0;_e<J.length&&J[_e].blend!=0;_e++);}var Ce=J[0],H=L.WebPDecodeRGBA(R,Ce.src_off,Ce.src_size,D,p);Ce.rgba=H,Ce.imgwidth=D[0],Ce.imgheight=p[0];for(var N=0;N<D[0]*p[0]*4;N++)k[N]=H[N];return this.width=D,this.height=p,this.data=k,this}(function(n){var e,t,r,i,o,s,a,c,l,u=function(j){return j=j||{},this.isStrokeTransparent=j.isStrokeTransparent||!1,this.strokeOpacity=j.strokeOpacity||1,this.strokeStyle=j.strokeStyle||"#000000",this.fillStyle=j.fillStyle||"#000000",this.isFillTransparent=j.isFillTransparent||!1,this.fillOpacity=j.fillOpacity||1,this.font=j.font||"10px sans-serif",this.textBaseline=j.textBaseline||"alphabetic",this.textAlign=j.textAlign||"left",this.lineWidth=j.lineWidth||1,this.lineJoin=j.lineJoin||"miter",this.lineCap=j.lineCap||"butt",this.path=j.path||[],this.transform=j.transform!==void 0?j.transform.clone():new c,this.globalCompositeOperation=j.globalCompositeOperation||"normal",this.globalAlpha=j.globalAlpha||1,this.clip_path=j.clip_path||[],this.currentPoint=j.currentPoint||new s,this.miterLimit=j.miterLimit||10,this.lastPoint=j.lastPoint||new s,this.lineDashOffset=j.lineDashOffset||0,this.lineDash=j.lineDash||[],this.margin=j.margin||[0,0,0,0],this.prevPageLastElemOffset=j.prevPageLastElemOffset||0,this.ignoreClearRect=typeof j.ignoreClearRect!="boolean"||j.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new m(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,s=this.internal.Point,a=this.internal.Rectangle,c=this.internal.Matrix,l=new u}]);var m=function(j){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Q=j;Object.defineProperty(this,"pdf",{get:function(){return Q}});var te=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return te},set:function(W){te=!!W}});var oe=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return oe},set:function(W){oe=!!W}});var de=0;Object.defineProperty(this,"posX",{get:function(){return de},set:function(W){isNaN(W)||(de=W)}});var pe=0;Object.defineProperty(this,"posY",{get:function(){return pe},set:function(W){isNaN(W)||(pe=W)}}),Object.defineProperty(this,"margin",{get:function(){return l.margin},set:function(W){var Xe;typeof W=="number"?Xe=[W,W,W,W]:((Xe=new Array(4))[0]=W[0],Xe[1]=W.length>=2?W[1]:Xe[0],Xe[2]=W.length>=3?W[2]:Xe[0],Xe[3]=W.length>=4?W[3]:Xe[1]),l.margin=Xe}});var Ee=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ee},set:function(W){Ee=W}});var xe=0;Object.defineProperty(this,"lastBreak",{get:function(){return xe},set:function(W){xe=W}});var Ne=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ne},set:function(W){Ne=W}}),Object.defineProperty(this,"ctx",{get:function(){return l},set:function(W){W instanceof u&&(l=W)}}),Object.defineProperty(this,"path",{get:function(){return l.path},set:function(W){l.path=W}});var qe=[];Object.defineProperty(this,"ctxStack",{get:function(){return qe},set:function(W){qe=W}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(W){var Xe;Xe=_(W),this.ctx.fillStyle=Xe.style,this.ctx.isFillTransparent=Xe.a===0,this.ctx.fillOpacity=Xe.a,this.pdf.setFillColor(Xe.r,Xe.g,Xe.b,{a:Xe.a}),this.pdf.setTextColor(Xe.r,Xe.g,Xe.b,{a:Xe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(W){var Xe=_(W);this.ctx.strokeStyle=Xe.style,this.ctx.isStrokeTransparent=Xe.a===0,this.ctx.strokeOpacity=Xe.a,Xe.a===0?this.pdf.setDrawColor(255,255,255):(Xe.a,this.pdf.setDrawColor(Xe.r,Xe.g,Xe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(W){["butt","round","square"].indexOf(W)!==-1&&(this.ctx.lineCap=W,this.pdf.setLineCap(W))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(W){isNaN(W)||(this.ctx.lineWidth=W,this.pdf.setLineWidth(W))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(W){["bevel","round","miter"].indexOf(W)!==-1&&(this.ctx.lineJoin=W,this.pdf.setLineJoin(W))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(W){isNaN(W)||(this.ctx.miterLimit=W,this.pdf.setMiterLimit(W))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(W){this.ctx.textBaseline=W}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(W){["right","end","center","left","start"].indexOf(W)!==-1&&(this.ctx.textAlign=W)}});var nt=null,et=null,vt=null;Object.defineProperty(this,"fontFaces",{get:function(){return vt},set:function(W){nt=null,et=null,vt=W}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(W){var Xe;if(this.ctx.font=W,(Xe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(W))!==null){var Jt=Xe[1];Xe[2];var Tt=Xe[3],ze=Xe[4];Xe[5];var St=Xe[6],ot=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ze)[2];ze=Math.floor(ot==="px"?parseFloat(ze)*this.pdf.internal.scaleFactor:ot==="em"?parseFloat(ze)*this.pdf.getFontSize():parseFloat(ze)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ze);var It=(function(gt){var yr,un,nn=[],rn=gt.trim();if(rn==="")return tA;if(rn in C8)return[C8[rn]];for(;rn!=="";){switch(un=null,yr=(rn=I8(rn)).charAt(0)){case'"':case"'":un=lre(rn.substring(1),yr);break;default:un=ure(rn)}if(un===null||(nn.push(un[0]),(rn=I8(un[1]))!==""&&rn.charAt(0)!==","))return tA;rn=rn.replace(/^,/,"")}return nn})(St);if(this.fontFaces){var Ct=(function(gt,yr){var un=gt.getFontList(),nn=JSON.stringify(un);if(nt===null||et!==nn){var rn=(function(zn){var xt=[];return Object.keys(zn).forEach(function($n){zn[$n].forEach(function(At){var $t=null;switch(At){case"bold":$t={family:$n,weight:"bold"};break;case"italic":$t={family:$n,style:"italic"};break;case"bolditalic":$t={family:$n,weight:"bold",style:"italic"};break;case"":case"normal":$t={family:$n}}$t!==null&&($t.ref={name:$n,style:At},xt.push($t))})}),xt})(un);nt=(function(zn){for(var xt={},$n=0;$n<zn.length;++$n){var At=eA(zn[$n]),$t=At.family,Yn=At.stretch,Wt=At.style,Dt=At.weight;xt[$t]=xt[$t]||{},xt[$t][Yn]=xt[$t][Yn]||{},xt[$t][Yn][Wt]=xt[$t][Yn][Wt]||{},xt[$t][Yn][Wt][Dt]=At}return xt})(rn.concat(yr)),et=nn}return nt})(this.pdf,this.fontFaces),wn=It.map(function(gt){return{family:gt,stretch:"normal",weight:Tt,style:Jt}}),ln=(function(gt,yr,un){for(var nn=(un=un||{}).defaultFontFamily||"times",rn=Object.assign({},cre,un.genericFontFamilies||{}),zn=null,xt=null,$n=0;$n<yr.length;++$n)if(rn[(zn=eA(yr[$n])).family]&&(zn.family=rn[zn.family]),gt.hasOwnProperty(zn.family)){xt=gt[zn.family];break}if(!(xt=xt||gt[nn]))throw new Error("Could not find a font-family for the rule '"+E8(zn)+"' and default family '"+nn+"'.");if(xt=(function(At,$t){if($t[At])return $t[At];var Yn=aA[At],Wt=Yn<=aA.normal?-1:1,Dt=w8($t,G8,Yn,Wt);if(!Dt)throw new Error("Could not find a matching font-stretch value for "+At);return Dt})(zn.stretch,xt),xt=(function(At,$t){if($t[At])return $t[At];for(var Yn=W8[At],Wt=0;Wt<Yn.length;++Wt)if($t[Yn[Wt]])return $t[Yn[Wt]];throw new Error("Could not find a matching font-style for "+At)})(zn.style,xt),!(xt=(function(At,$t){if($t[At])return $t[At];if(At===400&&$t[500])return $t[500];if(At===500&&$t[400])return $t[400];var Yn=are[At],Wt=w8($t,K8,Yn,At<400?-1:1);if(!Wt)throw new Error("Could not find a matching font-weight for value "+At);return Wt})(zn.weight,xt)))throw new Error("Failed to resolve a font for the rule '"+E8(zn)+"'.");return xt})(Ct,wn);this.pdf.setFont(ln.ref.name,ln.ref.style)}else{var Bt="";(Tt==="bold"||parseInt(Tt,10)>=700||Jt==="bold")&&(Bt="bold"),Jt==="italic"&&(Bt+="italic"),Bt.length===0&&(Bt="normal");for(var Pt="",Nt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},lt=0;lt<It.length;lt++){if(this.pdf.internal.getFont(It[lt],Bt,{noFallback:!0,disableWarning:!0})!==void 0){Pt=It[lt];break}if(Bt==="bolditalic"&&this.pdf.internal.getFont(It[lt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Pt=It[lt],Bt="bold";else if(this.pdf.internal.getFont(It[lt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Pt=It[lt],Bt="normal";break}}if(Pt===""){for(var Ht=0;Ht<It.length;Ht++)if(Nt[It[Ht]]){Pt=Nt[It[Ht]];break}}Pt=Pt===""?"Times":Pt,this.pdf.setFont(Pt,Bt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(W){this.ctx.globalCompositeOperation=W}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(W){this.ctx.globalAlpha=W}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(W){this.ctx.lineDashOffset=W,Be.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(W){this.ctx.lineDash=W,Be.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(W){this.ctx.ignoreClearRect=!!W}})};m.prototype.setLineDash=function(j){this.lineDash=j},m.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},m.prototype.fill=function(){J.call(this,"fill",!1)},m.prototype.stroke=function(){J.call(this,"stroke",!1)},m.prototype.beginPath=function(){this.path=[{type:"begin"}]},m.prototype.moveTo=function(j,Q){if(isNaN(j)||isNaN(Q))throw Xn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var te=this.ctx.transform.applyToPoint(new s(j,Q));this.path.push({type:"mt",x:te.x,y:te.y}),this.ctx.lastPoint=new s(j,Q)},m.prototype.closePath=function(){var j=new s(0,0),Q=0;for(Q=this.path.length-1;Q!==-1;Q--)if(this.path[Q].type==="begin"&&Gn(this.path[Q+1])==="object"&&typeof this.path[Q+1].x=="number"){j=new s(this.path[Q+1].x,this.path[Q+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(j.x,j.y)},m.prototype.lineTo=function(j,Q){if(isNaN(j)||isNaN(Q))throw Xn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var te=this.ctx.transform.applyToPoint(new s(j,Q));this.path.push({type:"lt",x:te.x,y:te.y}),this.ctx.lastPoint=new s(te.x,te.y)},m.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),J.call(this,null,!0)},m.prototype.quadraticCurveTo=function(j,Q,te,oe){if(isNaN(te)||isNaN(oe)||isNaN(j)||isNaN(Q))throw Xn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var de=this.ctx.transform.applyToPoint(new s(te,oe)),pe=this.ctx.transform.applyToPoint(new s(j,Q));this.path.push({type:"qct",x1:pe.x,y1:pe.y,x:de.x,y:de.y}),this.ctx.lastPoint=new s(de.x,de.y)},m.prototype.bezierCurveTo=function(j,Q,te,oe,de,pe){if(isNaN(de)||isNaN(pe)||isNaN(j)||isNaN(Q)||isNaN(te)||isNaN(oe))throw Xn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ee=this.ctx.transform.applyToPoint(new s(de,pe)),xe=this.ctx.transform.applyToPoint(new s(j,Q)),Ne=this.ctx.transform.applyToPoint(new s(te,oe));this.path.push({type:"bct",x1:xe.x,y1:xe.y,x2:Ne.x,y2:Ne.y,x:Ee.x,y:Ee.y}),this.ctx.lastPoint=new s(Ee.x,Ee.y)},m.prototype.arc=function(j,Q,te,oe,de,pe){if(isNaN(j)||isNaN(Q)||isNaN(te)||isNaN(oe)||isNaN(de))throw Xn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(pe=!!pe,!this.ctx.transform.isIdentity){var Ee=this.ctx.transform.applyToPoint(new s(j,Q));j=Ee.x,Q=Ee.y;var xe=this.ctx.transform.applyToPoint(new s(0,te)),Ne=this.ctx.transform.applyToPoint(new s(0,0));te=Math.sqrt(Math.pow(xe.x-Ne.x,2)+Math.pow(xe.y-Ne.y,2))}Math.abs(de-oe)>=2*Math.PI&&(oe=0,de=2*Math.PI),this.path.push({type:"arc",x:j,y:Q,radius:te,startAngle:oe,endAngle:de,counterclockwise:pe})},m.prototype.arcTo=function(j,Q,te,oe,de){throw new Error("arcTo not implemented.")},m.prototype.rect=function(j,Q,te,oe){if(isNaN(j)||isNaN(Q)||isNaN(te)||isNaN(oe))throw Xn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(j,Q),this.lineTo(j+te,Q),this.lineTo(j+te,Q+oe),this.lineTo(j,Q+oe),this.lineTo(j,Q),this.lineTo(j+te,Q),this.lineTo(j,Q)},m.prototype.fillRect=function(j,Q,te,oe){if(isNaN(j)||isNaN(Q)||isNaN(te)||isNaN(oe))throw Xn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var de={};this.lineCap!=="butt"&&(de.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(de.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(j,Q,te,oe),this.fill(),de.hasOwnProperty("lineCap")&&(this.lineCap=de.lineCap),de.hasOwnProperty("lineJoin")&&(this.lineJoin=de.lineJoin)}},m.prototype.strokeRect=function(j,Q,te,oe){if(isNaN(j)||isNaN(Q)||isNaN(te)||isNaN(oe))throw Xn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");D.call(this)||(this.beginPath(),this.rect(j,Q,te,oe),this.stroke())},m.prototype.clearRect=function(j,Q,te,oe){if(isNaN(j)||isNaN(Q)||isNaN(te)||isNaN(oe))throw Xn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(j,Q,te,oe))},m.prototype.save=function(j){j=typeof j!="boolean"||j;for(var Q=this.pdf.internal.getCurrentPageInfo().pageNumber,te=0;te<this.pdf.internal.getNumberOfPages();te++)this.pdf.setPage(te+1),this.pdf.internal.out("q");if(this.pdf.setPage(Q),j){this.ctx.fontSize=this.pdf.internal.getFontSize();var oe=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=oe}},m.prototype.restore=function(j){j=typeof j!="boolean"||j;for(var Q=this.pdf.internal.getCurrentPageInfo().pageNumber,te=0;te<this.pdf.internal.getNumberOfPages();te++)this.pdf.setPage(te+1),this.pdf.internal.out("Q");this.pdf.setPage(Q),j&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},m.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var _=function(j){var Q,te,oe,de;if(j.isCanvasGradient===!0&&(j=j.getColor()),!j)return{r:0,g:0,b:0,a:0,style:j};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(j))Q=0,te=0,oe=0,de=0;else{var pe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(j);if(pe!==null)Q=parseInt(pe[1]),te=parseInt(pe[2]),oe=parseInt(pe[3]),de=1;else if((pe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(j))!==null)Q=parseInt(pe[1]),te=parseInt(pe[2]),oe=parseInt(pe[3]),de=parseFloat(pe[4]);else{if(de=1,typeof j=="string"&&j.charAt(0)!=="#"){var Ee=new j8(j);j=Ee.ok?Ee.toHex():"#000000"}j.length===4?(Q=j.substring(1,2),Q+=Q,te=j.substring(2,3),te+=te,oe=j.substring(3,4),oe+=oe):(Q=j.substring(1,3),te=j.substring(3,5),oe=j.substring(5,7)),Q=parseInt(Q,16),te=parseInt(te,16),oe=parseInt(oe,16)}}return{r:Q,g:te,b:oe,a:de,style:j}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},D=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};m.prototype.fillText=function(j,Q,te,oe){if(isNaN(Q)||isNaN(te)||typeof j!="string")throw Xn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(oe=isNaN(oe)?void 0:oe,!p.call(this)){var de=ge(this.ctx.transform.rotation),pe=this.ctx.transform.scaleX;A.call(this,{text:j,x:Q,y:te,scale:pe,angle:de,align:this.textAlign,maxWidth:oe})}},m.prototype.strokeText=function(j,Q,te,oe){if(isNaN(Q)||isNaN(te)||typeof j!="string")throw Xn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!D.call(this)){oe=isNaN(oe)?void 0:oe;var de=ge(this.ctx.transform.rotation),pe=this.ctx.transform.scaleX;A.call(this,{text:j,x:Q,y:te,scale:pe,renderingMode:"stroke",angle:de,align:this.textAlign,maxWidth:oe})}},m.prototype.measureText=function(j){if(typeof j!="string")throw Xn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Q=this.pdf,te=this.pdf.internal.scaleFactor,oe=Q.internal.getFontSize(),de=Q.getStringUnitWidth(j)*oe/Q.internal.scaleFactor;return new function(pe){var Ee=(pe=pe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ee}}),this}({width:de*=Math.round(96*te/72*1e4)/1e4})},m.prototype.scale=function(j,Q){if(isNaN(j)||isNaN(Q))throw Xn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var te=new c(j,0,0,Q,0,0);this.ctx.transform=this.ctx.transform.multiply(te)},m.prototype.rotate=function(j){if(isNaN(j))throw Xn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Q=new c(Math.cos(j),Math.sin(j),-Math.sin(j),Math.cos(j),0,0);this.ctx.transform=this.ctx.transform.multiply(Q)},m.prototype.translate=function(j,Q){if(isNaN(j)||isNaN(Q))throw Xn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var te=new c(1,0,0,1,j,Q);this.ctx.transform=this.ctx.transform.multiply(te)},m.prototype.transform=function(j,Q,te,oe,de,pe){if(isNaN(j)||isNaN(Q)||isNaN(te)||isNaN(oe)||isNaN(de)||isNaN(pe))throw Xn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ee=new c(j,Q,te,oe,de,pe);this.ctx.transform=this.ctx.transform.multiply(Ee)},m.prototype.setTransform=function(j,Q,te,oe,de,pe){j=isNaN(j)?1:j,Q=isNaN(Q)?0:Q,te=isNaN(te)?0:te,oe=isNaN(oe)?1:oe,de=isNaN(de)?0:de,pe=isNaN(pe)?0:pe,this.ctx.transform=new c(j,Q,te,oe,de,pe)};var k=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};m.prototype.drawImage=function(j,Q,te,oe,de,pe,Ee,xe,Ne){var qe=this.pdf.getImageProperties(j),nt=1,et=1,vt=1,W=1;oe!==void 0&&xe!==void 0&&(vt=xe/oe,W=Ne/de,nt=qe.width/oe*xe/oe,et=qe.height/de*Ne/de),pe===void 0&&(pe=Q,Ee=te,Q=0,te=0),oe!==void 0&&xe===void 0&&(xe=oe,Ne=de),oe===void 0&&xe===void 0&&(xe=qe.width,Ne=qe.height);var Xe=this.ctx.transform.decompose(),Jt=ge(Xe.rotate.shx),Tt=new c,ze=(Tt=(Tt=(Tt=Tt.multiply(Xe.translate)).multiply(Xe.skew)).multiply(Xe.scale)).applyToRectangle(new a(pe-Q*vt,Ee-te*W,oe*nt,de*et));if(this.autoPaging){for(var St,ot=L.call(this,ze),It=[],Ct=0;Ct<ot.length;Ct+=1)It.indexOf(ot[Ct])===-1&&It.push(ot[Ct]);ee(It);for(var wn=It[0],ln=It[It.length-1],Bt=wn;Bt<ln+1;Bt++){this.pdf.setPage(Bt);var Pt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Nt=Bt===1?this.posY+this.margin[0]:this.margin[0],lt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ht=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],gt=Bt===1?0:lt+(Bt-2)*Ht;if(this.ctx.clip_path.length!==0){var yr=this.path;St=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=X(St,this.posX+this.margin[3],-gt+Nt+this.ctx.prevPageLastElemOffset),_e.call(this,"fill",!0),this.path=yr}var un=JSON.parse(JSON.stringify(ze));un=X([un],this.posX+this.margin[3],-gt+Nt+this.ctx.prevPageLastElemOffset)[0];var nn=(Bt>wn||Bt<ln)&&k.call(this);nn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Pt,Ht,null).clip().discardPath()),this.pdf.addImage(j,"JPEG",un.x,un.y,un.w,un.h,null,null,Jt),nn&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(j,"JPEG",ze.x,ze.y,ze.w,ze.h,null,null,Jt)};var L=function(j,Q,te){var oe=[];Q=Q||this.pdf.internal.pageSize.width,te=te||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var de=this.posY+this.ctx.prevPageLastElemOffset;switch(j.type){default:case"mt":case"lt":oe.push(Math.floor((j.y+de)/te)+1);break;case"arc":oe.push(Math.floor((j.y+de-j.radius)/te)+1),oe.push(Math.floor((j.y+de+j.radius)/te)+1);break;case"qct":var pe=Te(this.ctx.lastPoint.x,this.ctx.lastPoint.y,j.x1,j.y1,j.x,j.y);oe.push(Math.floor((pe.y+de)/te)+1),oe.push(Math.floor((pe.y+pe.h+de)/te)+1);break;case"bct":var Ee=We(this.ctx.lastPoint.x,this.ctx.lastPoint.y,j.x1,j.y1,j.x2,j.y2,j.x,j.y);oe.push(Math.floor((Ee.y+de)/te)+1),oe.push(Math.floor((Ee.y+Ee.h+de)/te)+1);break;case"rect":oe.push(Math.floor((j.y+de)/te)+1),oe.push(Math.floor((j.y+j.h+de)/te)+1)}for(var xe=0;xe<oe.length;xe+=1)for(;this.pdf.internal.getNumberOfPages()<oe[xe];)R.call(this);return oe},R=function(){var j=this.fillStyle,Q=this.strokeStyle,te=this.font,oe=this.lineCap,de=this.lineWidth,pe=this.lineJoin;this.pdf.addPage(),this.fillStyle=j,this.strokeStyle=Q,this.font=te,this.lineCap=oe,this.lineWidth=de,this.lineJoin=pe},X=function(j,Q,te){for(var oe=0;oe<j.length;oe++)switch(j[oe].type){case"bct":j[oe].x2+=Q,j[oe].y2+=te;case"qct":j[oe].x1+=Q,j[oe].y1+=te;default:j[oe].x+=Q,j[oe].y+=te}return j},ee=function(j){return j.sort(function(Q,te){return Q-te})},J=function(j,Q){var te=this.fillStyle,oe=this.strokeStyle,de=this.lineCap,pe=this.lineWidth,Ee=Math.abs(pe*this.ctx.transform.scaleX),xe=this.lineJoin;if(this.autoPaging){for(var Ne,qe,nt=JSON.parse(JSON.stringify(this.path)),et=JSON.parse(JSON.stringify(this.path)),vt=[],W=0;W<et.length;W++)if(et[W].x!==void 0)for(var Xe=L.call(this,et[W]),Jt=0;Jt<Xe.length;Jt+=1)vt.indexOf(Xe[Jt])===-1&&vt.push(Xe[Jt]);for(var Tt=0;Tt<vt.length;Tt++)for(;this.pdf.internal.getNumberOfPages()<vt[Tt];)R.call(this);ee(vt);for(var ze=vt[0],St=vt[vt.length-1],ot=ze;ot<St+1;ot++){this.pdf.setPage(ot),this.fillStyle=te,this.strokeStyle=oe,this.lineCap=de,this.lineWidth=Ee,this.lineJoin=xe;var It=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ct=ot===1?this.posY+this.margin[0]:this.margin[0],wn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ln=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Bt=ot===1?0:wn+(ot-2)*ln;if(this.ctx.clip_path.length!==0){var Pt=this.path;Ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=X(Ne,this.posX+this.margin[3],-Bt+Ct+this.ctx.prevPageLastElemOffset),_e.call(this,j,!0),this.path=Pt}if(qe=JSON.parse(JSON.stringify(nt)),this.path=X(qe,this.posX+this.margin[3],-Bt+Ct+this.ctx.prevPageLastElemOffset),Q===!1||ot===0){var Nt=(ot>ze||ot<St)&&k.call(this);Nt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],It,ln,null).clip().discardPath()),_e.call(this,j,Q),Nt&&this.pdf.restoreGraphicsState()}this.lineWidth=pe}this.path=nt}else this.lineWidth=Ee,_e.call(this,j,Q),this.lineWidth=pe},_e=function(j,Q){if((j!=="stroke"||Q||!D.call(this))&&(j==="stroke"||Q||!p.call(this))){for(var te,oe,de=[],pe=this.path,Ee=0;Ee<pe.length;Ee++){var xe=pe[Ee];switch(xe.type){case"begin":de.push({begin:!0});break;case"close":de.push({close:!0});break;case"mt":de.push({start:xe,deltas:[],abs:[]});break;case"lt":var Ne=de.length;if(pe[Ee-1]&&!isNaN(pe[Ee-1].x)&&(te=[xe.x-pe[Ee-1].x,xe.y-pe[Ee-1].y],Ne>0)){for(;Ne>=0;Ne--)if(de[Ne-1].close!==!0&&de[Ne-1].begin!==!0){de[Ne-1].deltas.push(te),de[Ne-1].abs.push(xe);break}}break;case"bct":te=[xe.x1-pe[Ee-1].x,xe.y1-pe[Ee-1].y,xe.x2-pe[Ee-1].x,xe.y2-pe[Ee-1].y,xe.x-pe[Ee-1].x,xe.y-pe[Ee-1].y],de[de.length-1].deltas.push(te);break;case"qct":var qe=pe[Ee-1].x+2/3*(xe.x1-pe[Ee-1].x),nt=pe[Ee-1].y+2/3*(xe.y1-pe[Ee-1].y),et=xe.x+2/3*(xe.x1-xe.x),vt=xe.y+2/3*(xe.y1-xe.y),W=xe.x,Xe=xe.y;te=[qe-pe[Ee-1].x,nt-pe[Ee-1].y,et-pe[Ee-1].x,vt-pe[Ee-1].y,W-pe[Ee-1].x,Xe-pe[Ee-1].y],de[de.length-1].deltas.push(te);break;case"arc":de.push({deltas:[],abs:[],arc:!0}),Array.isArray(de[de.length-1].abs)&&de[de.length-1].abs.push(xe)}}oe=Q?null:j==="stroke"?"stroke":"fill";for(var Jt=!1,Tt=0;Tt<de.length;Tt++)if(de[Tt].arc)for(var ze=de[Tt].abs,St=0;St<ze.length;St++){var ot=ze[St];ot.type==="arc"?N.call(this,ot.x,ot.y,ot.radius,ot.startAngle,ot.endAngle,ot.counterclockwise,void 0,Q,!Jt):M.call(this,ot.x,ot.y),Jt=!0}else if(de[Tt].close===!0)this.pdf.internal.out("h"),Jt=!1;else if(de[Tt].begin!==!0){var It=de[Tt].start.x,Ct=de[Tt].start.y;ne.call(this,de[Tt].deltas,It,Ct),Jt=!0}oe&&T.call(this,oe),Q&&U.call(this)}},Ce=function(j){var Q=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,te=Q*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return j-te;case"top":return j+Q-te;case"hanging":return j+Q-2*te;case"middle":return j+Q/2-te;default:return j}},H=function(j){return j+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};m.prototype.createLinearGradient=function(){var j=function(){};return j.colorStops=[],j.addColorStop=function(Q,te){this.colorStops.push([Q,te])},j.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},j.isCanvasGradient=!0,j},m.prototype.createPattern=function(){return this.createLinearGradient()},m.prototype.createRadialGradient=function(){return this.createLinearGradient()};var N=function(j,Q,te,oe,de,pe,Ee,xe,Ne){for(var qe=De.call(this,te,oe,de,pe),nt=0;nt<qe.length;nt++){var et=qe[nt];nt===0&&(Ne?x.call(this,et.x1+j,et.y1+Q):M.call(this,et.x1+j,et.y1+Q)),be.call(this,j,Q,et.x2,et.y2,et.x3,et.y3,et.x4,et.y4)}xe?U.call(this):T.call(this,Ee)},T=function(j){switch(j){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},U=function(){this.pdf.clip(),this.pdf.discardPath()},x=function(j,Q){this.pdf.internal.out(t(j)+" "+r(Q)+" m")},A=function(j){var Q;switch(j.align){case"right":case"end":Q="right";break;case"center":Q="center";break;default:Q="left"}var te,oe,de,pe=this.pdf.getTextDimensions(j.text),Ee=Ce.call(this,j.y),xe=H.call(this,Ee)-pe.h,Ne=this.ctx.transform.applyToPoint(new s(j.x,Ee));if(this.autoPaging){var qe=this.ctx.transform.decompose(),nt=new c;nt=(nt=(nt=nt.multiply(qe.translate)).multiply(qe.skew)).multiply(qe.scale);for(var et=this.ctx.transform.applyToRectangle(new a(j.x,Ee,pe.w,pe.h)),vt=nt.applyToRectangle(new a(j.x,xe,pe.w,pe.h)),W=L.call(this,vt),Xe=[],Jt=0;Jt<W.length;Jt+=1)Xe.indexOf(W[Jt])===-1&&Xe.push(W[Jt]);ee(Xe);for(var Tt=Xe[0],ze=Xe[Xe.length-1],St=Tt;St<ze+1;St++){this.pdf.setPage(St);var ot=St===1?this.posY+this.margin[0]:this.margin[0],It=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ct=this.pdf.internal.pageSize.height-this.margin[2],wn=Ct-this.margin[0],ln=this.pdf.internal.pageSize.width-this.margin[1],Bt=ln-this.margin[3],Pt=St===1?0:It+(St-2)*wn;if(this.ctx.clip_path.length!==0){var Nt=this.path;te=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=X(te,this.posX+this.margin[3],-1*Pt+ot),_e.call(this,"fill",!0),this.path=Nt}var lt=X([JSON.parse(JSON.stringify(vt))],this.posX+this.margin[3],-Pt+ot+this.ctx.prevPageLastElemOffset)[0];j.scale>=.01&&(oe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(oe*j.scale),de=this.lineWidth,this.lineWidth=de*j.scale);var Ht=this.autoPaging!=="text";if(Ht||lt.y+lt.h<=Ct){if(Ht||lt.y>=ot&&lt.x<=ln){var gt=Ht?j.text:this.pdf.splitTextToSize(j.text,j.maxWidth||ln-lt.x)[0],yr=X([JSON.parse(JSON.stringify(et))],this.posX+this.margin[3],-Pt+ot+this.ctx.prevPageLastElemOffset)[0],un=Ht&&(St>Tt||St<ze)&&k.call(this);un&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Bt,wn,null).clip().discardPath()),this.pdf.text(gt,yr.x,yr.y,{angle:j.angle,align:Q,renderingMode:j.renderingMode}),un&&this.pdf.restoreGraphicsState()}}else lt.y<Ct&&(this.ctx.prevPageLastElemOffset+=Ct-lt.y);j.scale>=.01&&(this.pdf.setFontSize(oe),this.lineWidth=de)}}else j.scale>=.01&&(oe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(oe*j.scale),de=this.lineWidth,this.lineWidth=de*j.scale),this.pdf.text(j.text,Ne.x+this.posX,Ne.y+this.posY,{angle:j.angle,align:Q,renderingMode:j.renderingMode,maxWidth:j.maxWidth}),j.scale>=.01&&(this.pdf.setFontSize(oe),this.lineWidth=de)},M=function(j,Q,te,oe){te=te||0,oe=oe||0,this.pdf.internal.out(t(j+te)+" "+r(Q+oe)+" l")},ne=function(j,Q,te){return this.pdf.lines(j,Q,te,null,null)},be=function(j,Q,te,oe,de,pe,Ee,xe){this.pdf.internal.out([e(i(te+j)),e(o(oe+Q)),e(i(de+j)),e(o(pe+Q)),e(i(Ee+j)),e(o(xe+Q)),"c"].join(" "))},De=function(j,Q,te,oe){for(var de=2*Math.PI,pe=Math.PI/2;Q>te;)Q-=de;var Ee=Math.abs(te-Q);Ee<de&&oe&&(Ee=de-Ee);for(var xe=[],Ne=oe?-1:1,qe=Q;Ee>1e-5;){var nt=qe+Ne*Math.min(Ee,pe);xe.push(Se.call(this,j,qe,nt)),Ee-=Math.abs(nt-qe),qe=nt}return xe},Se=function(j,Q,te){var oe=(te-Q)/2,de=j*Math.cos(oe),pe=j*Math.sin(oe),Ee=de,xe=-pe,Ne=Ee*Ee+xe*xe,qe=Ne+Ee*de+xe*pe,nt=4/3*(Math.sqrt(2*Ne*qe)-qe)/(Ee*pe-xe*de),et=Ee-nt*xe,vt=xe+nt*Ee,W=et,Xe=-vt,Jt=oe+Q,Tt=Math.cos(Jt),ze=Math.sin(Jt);return{x1:j*Math.cos(Q),y1:j*Math.sin(Q),x2:et*Tt-vt*ze,y2:et*ze+vt*Tt,x3:W*Tt-Xe*ze,y3:W*ze+Xe*Tt,x4:j*Math.cos(te),y4:j*Math.sin(te)}},ge=function(j){return 180*j/Math.PI},Te=function(j,Q,te,oe,de,pe){var Ee=j+.5*(te-j),xe=Q+.5*(oe-Q),Ne=de+.5*(te-de),qe=pe+.5*(oe-pe),nt=Math.min(j,de,Ee,Ne),et=Math.max(j,de,Ee,Ne),vt=Math.min(Q,pe,xe,qe),W=Math.max(Q,pe,xe,qe);return new a(nt,vt,et-nt,W-vt)},We=function(j,Q,te,oe,de,pe,Ee,xe){var Ne,qe,nt,et,vt,W,Xe,Jt,Tt,ze,St,ot,It,Ct,wn=te-j,ln=oe-Q,Bt=de-te,Pt=pe-oe,Nt=Ee-de,lt=xe-pe;for(qe=0;qe<41;qe++)Tt=(Xe=(nt=j+(Ne=qe/40)*wn)+Ne*((vt=te+Ne*Bt)-nt))+Ne*(vt+Ne*(de+Ne*Nt-vt)-Xe),ze=(Jt=(et=Q+Ne*ln)+Ne*((W=oe+Ne*Pt)-et))+Ne*(W+Ne*(pe+Ne*lt-W)-Jt),qe==0?(St=Tt,ot=ze,It=Tt,Ct=ze):(St=Math.min(St,Tt),ot=Math.min(ot,ze),It=Math.max(It,Tt),Ct=Math.max(Ct,ze));return new a(Math.round(St),Math.round(ot),Math.round(It-St),Math.round(Ct-ot))},Be=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var j,Q,te=(j=this.ctx.lineDash,Q=this.ctx.lineDashOffset,JSON.stringify({lineDash:j,lineDashOffset:Q}));this.prevLineDash!==te&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=te)}}})(_t.API),(function(n){var e=function(s){var a,c,l,u,m,_,p,D,k,L;for(/[^\x00-\xFF]/.test(s),c=[],l=0,u=(s+=a="\0\0\0\0".slice(s.length%4||4)).length;u>l;l+=4)(m=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(_=(m=((m=((m=((m=(m-(L=m%85))/85)-(k=m%85))/85)-(D=m%85))/85)-(p=m%85))/85)%85,c.push(_+33,p+33,D+33,k+33,L+33)):c.push(122);return(function(R,X){for(var ee=X;ee>0;ee--)R.pop()})(c,a.length),String.fromCharCode.apply(String,c)+"~>"},t=function(s){var a,c,l,u,m,_=String,p="length",D=255,k="charCodeAt",L="slice",R="replace";for(s[L](-2),s=s[L](0,-2)[R](/\s/g,"")[R]("z","!!!!!"),l=[],u=0,m=(s+=a="uuuuu"[L](s[p]%5||5))[p];m>u;u+=5)c=52200625*(s[k](u)-33)+614125*(s[k](u+1)-33)+7225*(s[k](u+2)-33)+85*(s[k](u+3)-33)+(s[k](u+4)-33),l.push(D&c>>24,D&c>>16,D&c>>8,D&c);return(function(X,ee){for(var J=ee;J>0;J--)X.pop()})(l,a[p]),_.fromCharCode.apply(_,l)},r=function(s){return s.split("").map(function(a){return("0"+a.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(s){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),a.test(s)===!1)return"";for(var c="",l=0;l<s.length;l+=2)c+=String.fromCharCode("0x"+(s[l]+s[l+1]));return c},o=function(s){for(var a=new Uint8Array(s.length),c=s.length;c--;)a[c]=s.charCodeAt(c);return(a=kb(a)).reduce(function(l,u){return l+String.fromCharCode(u)},"")};n.processDataByFilters=function(s,a){var c=0,l=s||"",u=[];for(typeof(a=a||[])=="string"&&(a=[a]),c=0;c<a.length;c+=1)switch(a[c]){case"ASCII85Decode":case"/ASCII85Decode":l=t(l),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=i(l),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=r(l),u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=o(l),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[c]+'" is not implemented')}return{data:l,reverseChain:u.reverse().join(" ")}}})(_t.API),(function(n){n.loadFile=function(e,t,r){return(function(i,o,s){o=o!==!1,s=typeof s=="function"?s:function(){};var a=void 0;try{a=(function(c,l,u){var m=new XMLHttpRequest,_=0,p=function(D){var k=D.length,L=[],R=String.fromCharCode;for(_=0;_<k;_+=1)L.push(R(255&D.charCodeAt(_)));return L.join("")};if(m.open("GET",c,!l),m.overrideMimeType("text/plain; charset=x-user-defined"),l===!1&&(m.onload=function(){m.status===200?u(p(this.responseText)):u(void 0)}),m.send(null),l&&m.status===200)return p(m.responseText)})(i,o,s)}catch{}return a})(e,t,r)},n.loadImageFile=n.loadFile})(_t.API),(function(n){function e(){return(zt.html2canvas?Promise.resolve(zt.html2canvas):import("./chunk-SFOPF7YH.js")).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function t(){return(zt.DOMPurify?Promise.resolve(zt.DOMPurify):import("./chunk-LPMOHE6U.js")).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var r=function(a){var c=Gn(a);return c==="undefined"?"undefined":c==="string"||a instanceof String?"string":c==="number"||a instanceof Number?"number":c==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":c==="object"?"object":"unknown"},i=function(a,c){var l=document.createElement(a);for(var u in c.className&&(l.className=c.className),c.innerHTML&&c.dompurify&&(l.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)l.style[u]=c.style[u];return l},o=function a(c,l){for(var u=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),m=c.firstChild;m;m=m.nextSibling)l!==!0&&m.nodeType===1&&m.nodeName==="SCRIPT"||u.appendChild(a(m,l));return c.nodeType===1&&(c.nodeName==="CANVAS"?(u.width=c.width,u.height=c.height,u.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(u.value=c.value),u.addEventListener("load",function(){u.scrollTop=c.scrollTop,u.scrollLeft=c.scrollLeft},!0)),u},s=function a(c){var l=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),u=a.convert(Promise.resolve(),l);return(u=u.setProgress(1,a,1,[a])).set(c)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(a,c){return a.__proto__=c||s.prototype,a},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(a,c){return this.then(function(){switch(c=c||(function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(a),c){case"string":return this.then(t).then(function(l){return this.set({src:i("div",{innerHTML:a,dompurify:l})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},s.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=o(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(c){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,c(this.prop.container,l)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(c){var l=this.opt.jsPDF,u=this.opt.fontFaces,m=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,_=Object.assign({async:!0,allowTaint:!0,scale:m,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete _.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=u,u)for(var p=0;p<u.length;++p){var D=u[p],k=D.src.find(function(L){return L.format==="truetype"});k&&l.addFont(k.url,D.ref.name,D.ref.style)}return _.windowHeight=_.windowHeight||0,_.windowHeight=_.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):_.windowHeight,l.context2d.save(!0),c(this.prop.container,_)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(a,c,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(a,c):this.outputPdf(a,c)},s.prototype.outputPdf=function(a,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,c)})},s.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},s.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(a){if(r(a)!=="object")return this;var c=Object.keys(a||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=a[l]};switch(l){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[l]=a[l]}}},this);return this.then(function(){return this.thenList(c)})},s.prototype.get=function(a,c){return this.then(function(){var l=a in s.template.prop?this.prop[a]:this.opt[a];return c?c(l):l})},s.prototype.setMargin=function(a){return this.then(function(){switch(r(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},s.prototype.setPageSize=function(a){function c(l,u){return Math.floor(l*u/72*96)}return this.then(function(){(a=a||_t.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:c(a.inner.width,a.k),height:c(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},s.prototype.setProgress=function(a,c,l,u){return a!=null&&(this.progress.val=a),c!=null&&(this.progress.state=c),l!=null&&(this.progress.n=l),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(a,c,l,u){return this.setProgress(a?this.progress.val+a:null,c||null,l?this.progress.n+l:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(a,c){var l=this;return this.thenCore(a,c,function(u,m){return l.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(_){return l.updateProgress(null,u),_}).then(u,m).then(function(_){return l.updateProgress(1),_})})},s.prototype.thenCore=function(a,c,l){l=l||Promise.prototype.then;var u=this;a&&(a=a.bind(u)),c&&(c=c.bind(u));var m=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?u:s.convert(Object.assign({},u),Promise.prototype),_=l.call(m,a,c);return s.convert(_,u.__proto__)},s.prototype.thenExternal=function(a,c){return Promise.prototype.then.call(this,a,c)},s.prototype.thenList=function(a){var c=this;return a.forEach(function(l){c=c.thenCore(l)}),c},s.prototype.catch=function(a){a&&(a=a.bind(this));var c=Promise.prototype.catch.call(this,a);return s.convert(c,this)},s.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},s.prototype.error=function(a){return this.then(function(){throw new Error(a)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,_t.getPageSize=function(a,c,l){if(Gn(a)==="object"){var u=a;a=u.orientation,c=u.unit||c,l=u.format||l}c=c||"mm",l=l||"a4",a=(""+(a||"P")).toLowerCase();var m,_=(""+l).toLowerCase(),p={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":m=1;break;case"mm":m=72/25.4;break;case"cm":m=72/2.54;break;case"in":m=72;break;case"px":m=.75;break;case"pc":case"em":m=12;break;case"ex":m=6;break;default:throw"Invalid unit: "+c}var D,k=0,L=0;if(p.hasOwnProperty(_))k=p[_][1]/m,L=p[_][0]/m;else try{k=l[1],L=l[0]}catch{throw new Error("Invalid format: "+l)}if(a==="p"||a==="portrait")a="p",L>k&&(D=L,L=k,k=D);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",k>L&&(D=L,L=k,k=D)}return{width:L,height:k,unit:c,k:m,orientation:a}},n.html=function(a,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(eA):null;var l=new s(c);return c.worker?l:l.from(a).doCallback()}})(_t.API),_t.API.addJS=function(n){return S8=n,this.internal.events.subscribe("postPutResources",function(){rw=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(rw+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),x8=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+S8+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){rw!==void 0&&x8!==void 0&&this.internal.out("/Names <</JavaScript "+rw+" 0 R>>")}),this},(function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),o=0;o<i.length;o++){var s=i[o],a=r.exec(s);if(a!=null){var c=a[1];t.internal.newObjectDeferredBegin(c,!1)}t.internal.write(s)}if(this.outline.createNamedDestinations){var l=this.internal.pages.length,u=[];for(o=0;o<l;o++){var m=t.internal.newObject();u.push(m);var _=t.internal.getPageInfo(o+1);t.internal.write("<< /D["+_.objId+" 0 R /XYZ null null null]>> endobj")}var p=t.internal.newObject();for(t.internal.write("<< /Names [ "),o=0;o<u.length;o++)t.internal.write("(page_"+(o+1)+")"+u[o]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+p+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,o){var s={title:i,options:o,children:[]};return r==null&&(r=this.root),r.children.push(s),s},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<r.children.length;o++){var s=r.children[o];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(r)),o>0&&this.line("/Prev "+this.makeRef(r.children[o-1])),o<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[o+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var a=this.count=this.count_r({count:0},s);if(a>0&&this.line("/Count "+a),s.options&&s.options.pageNumber){var c=t.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var l=0;l<r.children.length;l++)this.renderItems(r.children[l])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,i){for(var o=0;o<i.children.length;o++)r.count++,this.count_r(r,i.children[o]);return r.count}}])})(_t.API),(function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,i,o,s,a){var c,l=this.decode.DCT_DECODE,u=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=s||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,c=(function(m){for(var _,p=256*m.charCodeAt(4)+m.charCodeAt(5),D=m.length,k={width:0,height:0,numcomponents:1},L=4;L<D;L+=2){if(L+=p,e.indexOf(m.charCodeAt(L+1))!==-1){_=256*m.charCodeAt(L+5)+m.charCodeAt(L+6),k={width:256*m.charCodeAt(L+7)+m.charCodeAt(L+8),height:_,numcomponents:m.charCodeAt(L+9)};break}p=256*m.charCodeAt(L+2)+m.charCodeAt(L+3)}return k})(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),c.numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}u={data:t,width:c.width,height:c.height,colorSpace:a,bitsPerComponent:8,filter:l,index:r,alias:i}}return u}})(_t.API),_t.API.processPNG=function(n,e,t,r){if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){var i,o=p8(n,{checkCrc:!0}),s=o.width,a=o.height,c=o.channels,l=o.palette,u=o.depth;i=l&&c===1?(function(N){for(var T=N.width,U=N.height,x=N.data,A=N.palette,M=N.depth,ne=!1,be=[],De=[],Se=void 0,ge=!1,Te=0,We=0;We<A.length;We++){var Be=hT(A[We],4),j=Be[0],Q=Be[1],te=Be[2],oe=Be[3];be.push(j,Q,te),oe!=null&&(oe===0?(Te++,De.length<1&&De.push(We)):oe<255&&(ge=!0))}if(ge||Te>1){ne=!0,De=void 0;var de=T*U;Se=new Uint8Array(de);for(var pe=new DataView(x.buffer),Ee=0;Ee<de;Ee++){var xe=nA(pe,Ee,M),Ne=hT(A[xe],4)[3];Se[Ee]=Ne}}else Te===0&&(De=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:ne?8:void 0,colorBytes:x,alphaBytes:Se,needSMask:ne,palette:be,mask:De}})(o):c===2||c===4?(function(N){for(var T=N.data,U=N.width,x=N.height,A=N.channels,M=N.depth,ne=A===2?"DeviceGray":"DeviceRGB",be=A-1,De=U*x,Se=be,ge=De*Se,Te=1*De,We=Math.ceil(ge*M/8),Be=Math.ceil(Te*M/8),j=new Uint8Array(We),Q=new Uint8Array(Be),te=new DataView(T.buffer),oe=new DataView(j.buffer),de=new DataView(Q.buffer),pe=!1,Ee=0;Ee<De;Ee++){for(var xe=Ee*A,Ne=0;Ne<Se;Ne++)R8(oe,nA(te,xe+Ne,M),Ee*Se+Ne,M);var qe=nA(te,xe+Se,M);qe<(1<<M)-1&&(pe=!0),R8(de,qe,1*Ee,M)}return{colorSpace:ne,colorsPerPixel:be,sMaskBitsPerComponent:pe?M:void 0,colorBytes:j,alphaBytes:Q,needSMask:pe}})(o):(function(N){var T=N.data,U=N.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:U,colorsPerPixel:U==="DeviceGray"?1:3,colorBytes:T instanceof Uint16Array?(function(x){for(var A=x.length,M=new Uint8Array(2*A),ne=new DataView(M.buffer,M.byteOffset,M.byteLength),be=0;be<A;be++)ne.setUint16(2*be,x[be],!1);return M})(T):T,needSMask:!1}})(o);var m,_,p,D=i,k=D.colorSpace,L=D.colorsPerPixel,R=D.sMaskBitsPerComponent,X=D.colorBytes,ee=D.alphaBytes,J=D.needSMask,_e=D.palette,Ce=D.mask,H=null;return r!==_t.API.image_compression.NONE&&typeof kb=="function"?(H=(function(N){var T;switch(N){case _t.API.image_compression.FAST:T=11;break;case _t.API.image_compression.MEDIUM:T=13;break;case _t.API.image_compression.SLOW:T=14;break;default:T=12}return T})(r),m=this.decode.FLATE_DECODE,_="/Predictor ".concat(H," /Colors ").concat(L," /BitsPerComponent ").concat(u," /Columns ").concat(s),n=M8(X,Math.ceil(s*L*u/8),L,u,r),J&&(p=M8(ee,Math.ceil(s*R/8),1,R,r))):(m=void 0,_=void 0,n=X,J&&(p=ee)),(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(p&&this.__addimage__.isArrayBuffer(p)||this.__addimage__.isArrayBufferView(p))&&(p=this.__addimage__.arrayBufferToBinaryString(p)),{alias:t,data:n,index:e,filter:m,decodeParameters:_,transparency:Ce,palette:_e,sMask:p,predictor:H,width:s,height:a,bitsPerComponent:u,sMaskBitsPerComponent:R,colorSpace:k}}},(function(n){n.processGIF89A=function(e,t,r,i){var o=new pre(e),s=o.width,a=o.height,c=[];o.decodeAndBlitFrameRGBA(0,c);var l={data:c,width:s,height:a},u=new rA(100).encode(l,100);return n.processJPEG.call(this,u,t,r,i)},n.processGIF87A=n.processGIF89A})(_t.API),Da.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:t,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Da.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){Xn.log("bit decode error:"+t)}},Da.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++)for(var o=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var c=this.palette[o>>7-a&1];this.data[s+4*a]=c.blue,this.data[s+4*a+1]=c.green,this.data[s+4*a+2]=c.red,this.data[s+4*a+3]=255}t!==0&&(this.pos+=4-t)}},Da.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<n;i++){var o=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+2*i*4,a=o>>4,c=15&o,l=this.palette[a];if(this.data[s]=l.blue,this.data[s+1]=l.green,this.data[s+2]=l.red,this.data[s+3]=255,2*i+1>=this.width)break;l=this.palette[c],this.data[s+4]=l.blue,this.data[s+4+1]=l.green,this.data[s+4+2]=l.red,this.data[s+4+3]=255}e!==0&&(this.pos+=4-e)}},Da.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;if(i<this.palette.length){var s=this.palette[i];this.data[o]=s.red,this.data[o+1]=s.green,this.data[o+2]=s.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}n!==0&&(this.pos+=4-n)}},Da.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(o&e)/e*255|0,a=(o>>5&e)/e*255|0,c=(o>>10&e)/e*255|0,l=o>>15?255:0,u=r*this.width*4+4*i;this.data[u]=c,this.data[u+1]=a,this.data[u+2]=s,this.data[u+3]=l}this.pos+=n}},Da.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,o=0;o<this.width;o++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&e)/e*255|0,c=(s>>5&t)/t*255|0,l=(s>>11)/e*255|0,u=i*this.width*4+4*o;this.data[u]=l,this.data[u+1]=c,this.data[u+2]=a,this.data[u+3]=255}this.pos+=n}},Da.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*t;this.data[s]=o,this.data[s+1]=i,this.data[s+2]=r,this.data[s+3]=255}this.pos+=this.width%4}},Da.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=o,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=s}},Da.prototype.getData=function(){return this.data},(function(n){n.processBMP=function(e,t,r,i){var o=new Da(e,!1),s=o.width,a=o.height,c={data:o.getData(),width:s,height:a},l=new rA(100).encode(c,100);return n.processJPEG.call(this,l,t,r,i)}})(_t.API),F8.prototype.getData=function(){return this.data},(function(n){n.processWEBP=function(e,t,r,i){var o=new F8(e),s=o.width,a=o.height,c={data:o.getData(),width:s,height:a},l=new rA(100).encode(c,100);return n.processJPEG.call(this,l,t,r,i)}})(_t.API),_t.API.processRGBA=function(n,e,t){for(var r=n.data,i=r.length,o=new Uint8Array(i/4*3),s=new Uint8Array(i/4),a=0,c=0,l=0;l<i;l+=4){var u=r[l],m=r[l+1],_=r[l+2],p=r[l+3];o[a++]=u,o[a++]=m,o[a++]=_,s[c++]=p}var D=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:D,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},_t.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Ip=_t.API,iw=Ip.getCharWidthsArray=function(n,e){var t,r,i=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),s=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,c=a.fof?a.fof:1,l=e.kerning?e.kerning:i.metadata.Unicode.kerning,u=l.fof?l.fof:1,m=e.doKerning!==!1,_=0,p=n.length,D=0,k=a[0]||c,L=[];for(t=0;t<p;t++)r=n.charCodeAt(t),typeof i.metadata.widthOfString=="function"?L.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+s*(1e3/o)||0)/1e3):(_=m&&Gn(l[r])==="object"&&!isNaN(parseInt(l[r][D],10))?l[r][D]/u:0,L.push((a[r]||k)/c+_)),D=r;return L},D8=Ip.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Ip.processArabic&&(n=Ip.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,i)/t:iw.apply(this,arguments).reduce(function(o,s){return o+s},0)},T8=function(n,e,t,r){for(var i=[],o=0,s=n.length,a=0;o!==s&&a+e[o]<t;)a+=e[o],o++;i.push(n.slice(0,o));var c=o;for(a=0;o!==s;)a+e[o]>r&&(i.push(n.slice(c,o)),a=0,c=o),a+=e[o],o++;return c!==o&&i.push(n.slice(c,o)),i},A8=function(n,e,t){t||(t={});var r,i,o,s,a,c,l,u=[],m=[u],_=t.textIndent||0,p=0,D=0,k=n.split(" "),L=iw.apply(this,[" ",t])[0];if(c=t.lineIndent===-1?k[0].length+2:t.lineIndent||0){var R=Array(c).join(" "),X=[];k.map(function(J){(J=J.split(/\s*\n/)).length>1?X=X.concat(J.map(function(_e,Ce){return(Ce&&_e.length?`
`:"")+_e})):X.push(J[0])}),k=X,c=D8.apply(this,[R,t])}for(o=0,s=k.length;o<s;o++){var ee=0;if(r=k[o],c&&r[0]==`
`&&(r=r.substr(1),ee=1),_+p+(D=(i=iw.apply(this,[r,t])).reduce(function(J,_e){return J+_e},0))>e||ee){if(D>e){for(a=T8.apply(this,[r,i,e-(_+p),e]),u.push(a.shift()),u=[a.pop()];a.length;)m.push([a.shift()]);D=i.slice(r.length-(u[0]?u[0].length:0)).reduce(function(J,_e){return J+_e},0)}else u=[r];m.push(u),_=D+c,p=L}else u.push(r),_+=p+D,p=L}return l=c?function(J,_e){return(_e?R:"")+J.join(" ")}:function(J){return J.join(" ")},m.map(l)},Ip.splitTextToSize=function(n,e,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),o=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var m=this.internal.getFont(u.fontName,u.fontStyle),_="Unicode";return m.metadata[_]?{widths:m.metadata[_].widths||{0:1},kerning:m.metadata[_].kerning||{}}:{font:m.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var s=1*this.internal.scaleFactor*e/i;o.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,o.lineIndent=t.lineIndent;var a,c,l=[];for(a=0,c=r.length;a<c;a++)l=l.concat(A8.apply(this,[r[a],s,o]));return l},(function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",r={},i={},o=0;o<16;o++)r[t[o]]=e[o],i[e[o]]=t[o];var s=function(_){return"0x"+parseInt(_,10).toString(16)},a=n.__fontmetrics__.compress=function(_){var p,D,k,L,R=["{"];for(var X in _){if(p=_[X],isNaN(parseInt(X,10))?D="'"+X+"'":(X=parseInt(X,10),D=(D=s(X).slice(2)).slice(0,-1)+i[D.slice(-1)]),typeof p=="number")p<0?(k=s(p).slice(3),L="-"):(k=s(p).slice(2),L=""),k=L+k.slice(0,-1)+i[k.slice(-1)];else{if(Gn(p)!=="object")throw new Error("Don't know what to do with value type "+Gn(p)+".");k=a(p)}R.push(D+k)}return R.push("}"),R.join("")},c=n.__fontmetrics__.uncompress=function(_){if(typeof _!="string")throw new Error("Invalid argument passed to uncompress.");for(var p,D,k,L,R={},X=1,ee=R,J=[],_e="",Ce="",H=_.length-1,N=1;N<H;N+=1)(L=_[N])=="'"?p?(k=p.join(""),p=void 0):p=[]:p?p.push(L):L=="{"?(J.push([ee,k]),ee={},k=void 0):L=="}"?((D=J.pop())[0][D[1]]=ee,k=void 0,ee=D[0]):L=="-"?X=-1:k===void 0?r.hasOwnProperty(L)?(_e+=r[L],k=parseInt(_e,16)*X,X=1,_e=""):_e+=L:r.hasOwnProperty(L)?(Ce+=r[L],ee[k]=parseInt(Ce,16)*X,X=1,k=void 0,Ce=""):Ce+=L;return R},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},m={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(_){var p=_.font,D=m.Unicode[p.postScriptName];D&&(p.metadata.Unicode={},p.metadata.Unicode.widths=D.widths,p.metadata.Unicode.kerning=D.kerning);var k=u.Unicode[p.postScriptName];k&&(p.metadata.Unicode.encoding=k,p.encoding=k.codePages[0])}])})(_t.API),(function(n){var e=function(t){for(var r=t.length,i=new Uint8Array(r),o=0;o<r;o++)i[o]=t.charCodeAt(o);return i};n.API.events.push(["addFont",function(t){var r=void 0,i=t.font,o=t.instance;if(!i.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=o.existsFileInVFS(i.postScriptName)===!1?o.loadFile(i.postScriptName):o.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(s,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(ow(a)),s.metadata=n.API.TTFFont.open(a),s.metadata.Unicode=s.metadata.Unicode||{encoding:{},kerning:{},widths:[]},s.metadata.glyIdsUsed=[0]})(i,r)}}])})(_t),_t.API.addSvgAsImage=function(n,e,t,r,i,o,s,a){if(isNaN(e)||isNaN(t))throw Xn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(i))throw Xn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=r,c.height=i;var l=c.getContext("2d");l.fillStyle="#fff",l.fillRect(0,0,c.width,c.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return(zt.canvg?Promise.resolve(zt.canvg):import("./chunk-RCZSNMKX.js")).catch(function(_){return Promise.reject(new Error("Could not load canvg: "+_))}).then(function(_){return _.default?_.default:_}).then(function(_){return _.fromString(l,n,u)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(_){return _.render(u)}).then(function(){m.addImage(c.toDataURL("image/jpeg",1),e,t,r,i,s,a)})},_t.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,t);return this},_t.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,i,o,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(s),c=[],l=0,u=0,m=0;function _(D,k){var L,R=!1;for(L=0;L<D.length;L+=1)D[L]===k&&(R=!0);return R}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var p=a.length;for(m=0;m<p;m+=1)t[a[m]].value=t[a[m]].defaultValue,t[a[m]].explicitSet=!1}if(Gn(n)==="object"){for(i in n)if(o=n[i],_(a,i)&&o!==void 0){if(t[i].type==="boolean"&&typeof o=="boolean")t[i].value=o;else if(t[i].type==="name"&&_(t[i].valueSet,o))t[i].value=o;else if(t[i].type==="integer"&&Number.isInteger(o))t[i].value=o;else if(t[i].type==="array"){for(l=0;l<o.length;l+=1)if(r=!0,o[l].length===1&&typeof o[l][0]=="number")c.push(String(o[l]-1));else if(o[l].length>1){for(u=0;u<o[l].length;u+=1)typeof o[l][u]!="number"&&(r=!1);r===!0&&c.push([o[l][0]-1,o[l][1]-1].join(" "))}t[i].value="["+c.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var D,k=[];for(D in t)t[D].explicitSet===!0&&(t[D].type==="name"?k.push("/"+D+" /"+t[D].value):k.push("/"+D+" "+t[D].value));k.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+k.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},(function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(r)),s=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),l=o.length+s.length+a.length+i.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+l+" >>"),this.internal.write("stream"),this.internal.write(i+o+s+a+c),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}})(_t.API),(function(n){var e=n.API,t=e.pdfEscape16=function(o,s){for(var a,c=s.metadata.Unicode.widths,l=["","0","00","000","0000"],u=[""],m=0,_=o.length;m<_;++m){if(a=s.metadata.characterToGlyph(o.charCodeAt(m)),s.metadata.glyIdsUsed.push(a),s.metadata.toUnicode[a]=o.charCodeAt(m),c.indexOf(a)==-1&&(c.push(a),c.push([parseInt(s.metadata.widthOfGlyph(a),10)])),a=="0")return u.join("");a=a.toString(16),u.push(l[4-a.length],a)}return u.join("")},r=function(o){var s,a,c,l,u,m,_;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],m=0,_=(a=Object.keys(o).sort(function(p,D){return p-D})).length;m<_;m++)s=a[m],c.length>=100&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),o[s]!==void 0&&o[s]!==null&&typeof o[s].toString=="function"&&(l=("0000"+o[s].toString(16)).slice(-4),s=("0000"+(+s).toString(16)).slice(-4),c.push("<"+s+"><"+l+">"));return c.length&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),u+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(s){var a=s.font,c=s.out,l=s.newObject,u=s.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="Identity-H"){for(var m=a.metadata.Unicode.widths,_=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),p="",D=0;D<_.length;D++)p+=String.fromCharCode(_[D]);var k=l();u({data:p,addLength1:!0,objectId:k}),c("endobj");var L=l();u({data:r(a.metadata.toUnicode),addLength1:!0,objectId:L}),c("endobj");var R=l();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Sp(a.fontName)),c("/FontFile2 "+k+" 0 R"),c("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),c("/Flags "+a.metadata.flags),c("/StemV "+a.metadata.stemV),c("/ItalicAngle "+a.metadata.italicAngle),c("/Ascent "+a.metadata.ascender),c("/Descent "+a.metadata.decender),c("/CapHeight "+a.metadata.capHeight),c(">>"),c("endobj");var X=l();c("<<"),c("/Type /Font"),c("/BaseFont /"+Sp(a.fontName)),c("/FontDescriptor "+R+" 0 R"),c("/W "+n.API.PDFObject.convert(m)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+a.encoding+")"),c(">>"),c(">>"),c("endobj"),a.objectNumber=l(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+L+" 0 R"),c("/BaseFont /"+Sp(a.fontName)),c("/Encoding /"+a.encoding),c("/DescendantFonts ["+X+" 0 R]"),c(">>"),c("endobj"),a.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(s){var a=s.font,c=s.out,l=s.newObject,u=s.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var m=a.metadata.rawData,_="",p=0;p<m.length;p++)_+=String.fromCharCode(m[p]);var D=l();u({data:_,addLength1:!0,objectId:D}),c("endobj");var k=l();u({data:r(a.metadata.toUnicode),addLength1:!0,objectId:k}),c("endobj");var L=l();c("<<"),c("/Descent "+a.metadata.decender),c("/CapHeight "+a.metadata.capHeight),c("/StemV "+a.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+D+" 0 R"),c("/Flags 96"),c("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),c("/FontName /"+Sp(a.fontName)),c("/ItalicAngle "+a.metadata.italicAngle),c("/Ascent "+a.metadata.ascender),c(">>"),c("endobj"),a.objectNumber=l();for(var R=0;R<a.metadata.hmtx.widths.length;R++)a.metadata.hmtx.widths[R]=parseInt(a.metadata.hmtx.widths[R]*(1e3/a.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+k+" 0 R/BaseFont/"+Sp(a.fontName)+"/FontDescriptor "+L+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),c("endobj"),a.isAlreadyPutted=!0}})(o)}]);var i=function(o){var s,a=o.text||"",c=o.x,l=o.y,u=o.options||{},m=o.mutex||{},_=m.pdfEscape,p=m.activeFontKey,D=m.fonts,k=p,L="",R=0,X="",ee=D[k].encoding;if(D[k].encoding!=="Identity-H")return{text:a,x:c,y:l,options:u,mutex:m};for(X=a,k=p,Array.isArray(a)&&(X=a[0]),R=0;R<X.length;R+=1)D[k].metadata.hasOwnProperty("cmap")&&(s=D[k].metadata.cmap.unicode.codeMap[X[R].charCodeAt(0)]),s||X[R].charCodeAt(0)<256&&D[k].metadata.hasOwnProperty("Unicode")?L+=X[R]:L+="";var J="";return parseInt(k.slice(1))<14||ee==="WinAnsiEncoding"?J=_(L,k).split("").map(function(_e){return _e.charCodeAt(0).toString(16)}).join(""):ee==="Identity-H"&&(J=t(L,D[k])),m.isHex=!0,{text:J,x:c,y:l,options:u,mutex:m}};e.events.push(["postProcessText",function(o){var s=o.text||"",a=[],c={text:s,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(s)){var l=0;for(l=0;l<s.length;l+=1)Array.isArray(s[l])&&s[l].length===3?a.push([i(Object.assign({},c,{text:s[l][0]})).text,s[l][1],s[l][2]]):a.push(i(Object.assign({},c,{text:s[l]})).text);o.text=a}else o.text=i(Object.assign({},c,{text:s})).text}])})(_t),(function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}})(_t.API),(function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var i,o,s,a,c,l,u,m=e,_=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],D={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},k={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},L=["(",")","(","<",">","<","[","]","[","{","}","{","\xAB","\xBB","\xAB","\u2039","\u203A","\u2039","\u2045","\u2046","\u2045","\u207D","\u207E","\u207D","\u208D","\u208E","\u208D","\u2264","\u2265","\u2264","\u2329","\u232A","\u2329","\uFE59","\uFE5A","\uFE59","\uFE5B","\uFE5C","\uFE5B","\uFE5D","\uFE5E","\uFE5D","\uFE64","\uFE65","\uFE64"],R=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),X=!1,ee=0;this.__bidiEngine__={};var J=function(x){var A=x.charCodeAt(),M=A>>8,ne=k[M];return ne!==void 0?m[256*ne+(255&A)]:M===252||M===253?"AL":R.test(M)?"L":M===8?"R":"N"},_e=function(x){for(var A,M=0;M<x.length;M++){if((A=J(x.charAt(M)))==="L")return!1;if(A==="R")return!0}return!1},Ce=function(x,A,M,ne){var be,De,Se,ge,Te=A[ne];switch(Te){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":X=!1;break;case"N":case"AN":break;case"EN":X&&(Te="AN");break;case"AL":X=!0,Te="R";break;case"WS":case"BN":Te="N";break;case"CS":ne<1||ne+1>=A.length||(be=M[ne-1])!=="EN"&&be!=="AN"||(De=A[ne+1])!=="EN"&&De!=="AN"?Te="N":X&&(De="AN"),Te=De===be?De:"N";break;case"ES":Te=(be=ne>0?M[ne-1]:"B")==="EN"&&ne+1<A.length&&A[ne+1]==="EN"?"EN":"N";break;case"ET":if(ne>0&&M[ne-1]==="EN"){Te="EN";break}if(X){Te="N";break}for(Se=ne+1,ge=A.length;Se<ge&&A[Se]==="ET";)Se++;Te=Se<ge&&A[Se]==="EN"?"EN":"N";break;case"NSM":if(s&&!a){for(ge=A.length,Se=ne+1;Se<ge&&A[Se]==="NSM";)Se++;if(Se<ge){var We=x[ne],Be=We>=1425&&We<=2303||We===64286;if(be=A[Se],Be&&(be==="R"||be==="AL")){Te="R";break}}}Te=ne<1||(be=A[ne-1])==="B"?"N":M[ne-1];break;case"B":X=!1,i=!0,Te=ee;break;case"S":o=!0,Te="N"}return Te},H=function(x,A,M){var ne=x.split("");return M&&N(ne,M,{hiLevel:ee}),ne.reverse(),A&&A.reverse(),ne.join("")},N=function(x,A,M){var ne,be,De,Se,ge,Te=-1,We=x.length,Be=0,j=[],Q=ee?p:_,te=[];for(X=!1,i=!1,o=!1,be=0;be<We;be++)te[be]=J(x[be]);for(De=0;De<We;De++){if(ge=Be,j[De]=Ce(x,te,j,De),ne=240&(Be=Q[ge][D[j[De]]]),Be&=15,A[De]=Se=Q[Be][5],ne>0)if(ne===16){for(be=Te;be<De;be++)A[be]=1;Te=-1}else Te=-1;if(Q[Be][6])Te===-1&&(Te=De);else if(Te>-1){for(be=Te;be<De;be++)A[be]=Se;Te=-1}te[De]==="B"&&(A[De]=0),M.hiLevel|=Se}o&&(function(oe,de,pe){for(var Ee=0;Ee<pe;Ee++)if(oe[Ee]==="S"){de[Ee]=ee;for(var xe=Ee-1;xe>=0&&oe[xe]==="WS";xe--)de[xe]=ee}})(te,A,We)},T=function(x,A,M,ne,be){if(!(be.hiLevel<x)){if(x===1&&ee===1&&!i)return A.reverse(),void(M&&M.reverse());for(var De,Se,ge,Te,We=A.length,Be=0;Be<We;){if(ne[Be]>=x){for(ge=Be+1;ge<We&&ne[ge]>=x;)ge++;for(Te=Be,Se=ge-1;Te<Se;Te++,Se--)De=A[Te],A[Te]=A[Se],A[Se]=De,M&&(De=M[Te],M[Te]=M[Se],M[Se]=De);Be=ge}Be++}}},U=function(x,A,M){var ne=x.split(""),be={hiLevel:ee};return M||(M=[]),N(ne,M,be),(function(De,Se,ge){if(ge.hiLevel!==0&&u)for(var Te,We=0;We<De.length;We++)Se[We]===1&&(Te=L.indexOf(De[We]))>=0&&(De[We]=L[Te+1])})(ne,M,be),T(2,ne,A,M,be),T(1,ne,A,M,be),ne.join("")};return this.__bidiEngine__.doBidiReorder=function(x,A,M){if((function(be,De){if(De)for(var Se=0;Se<be.length;Se++)De[Se]=Se;a===void 0&&(a=_e(be)),l===void 0&&(l=_e(be))})(x,A),s||!c||l)if(s&&c&&a^l)ee=a?1:0,x=H(x,A,M);else if(!s&&c&&l)ee=a?1:0,x=U(x,A,M),x=H(x,A);else if(!s||a||c||l){if(s&&!c&&a^l)x=H(x,A),a?(ee=0,x=U(x,A,M)):(ee=1,x=U(x,A,M),x=H(x,A));else if(s&&a&&!c&&l)ee=1,x=U(x,A,M),x=H(x,A);else if(!s&&!c&&a^l){var ne=u;a?(ee=1,x=U(x,A,M),ee=0,u=!1,x=U(x,A,M),u=ne):(ee=0,x=U(x,A,M),x=H(x,A),ee=1,u=!1,x=U(x,A,M),u=ne,x=H(x,A))}}else ee=0,x=U(x,A,M);else ee=a?1:0,x=U(x,A,M);return x},this.__bidiEngine__.setOptions=function(x){x&&(s=x.isInputVisual,c=x.isOutputVisual,a=x.isInputRtl,l=x.isOutputRtl,u=x.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var o=r.options||{};r.mutex,o.lang;var s=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,t.setOptions(o),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(s=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?s.push([t.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):s.push([t.doBidiReorder(i[a])]);r.text=s}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])})(_t),_t.API.TTFFont=(function(){function n(e){var t;if(this.rawData=e,t=this.contents=new Hu(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new Are(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new mre(this.contents),this.head=new vre(this),this.name=new Cre(this),this.cmap=new Q8(this),this.toUnicode={},this.hhea=new yre(this),this.maxp=new Ere(this),this.hmtx=new Ire(this),this.post=new bre(this),this.os2=new _re(this),this.loca=new Tre(this),this.glyf=new xre(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,i,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var s,a,c,l;for(l=[],s=0,a=(c=this.bbox).length;s<a;s++)e=c[s],l.push(Math.round(e*this.scaleFactor));return l}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var i,o,s,a;for(s=0,o=0,a=(e=""+e).length;0<=a?o<a:o>a;o=0<=a?++o:--o)i=e.charCodeAt(o),s+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return s*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n})();var Aa,Hu=(function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,i;for(i=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,i,o,s,a,c;return e=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),o=this.readByte(),s=this.readByte(),a=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^o)+65536*(255^s)+256*(255^a)+(255^c)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*i+16777216*o+65536*s+256*a+c},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,i,o;for(o=[],r=0,i=e.length;r<i;r++)t=e[r],o.push(this.writeByte(t));return o},n})(),mre=(function(){var n;function e(t){var r,i,o;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,o=this.tableCount;0<=o?i<o:i>o;i=0<=o?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,i,o,s,a,c,l,u,m,_,p,D,k;for(k in p=Object.keys(t).length,c=Math.log(2),m=16*Math.floor(Math.log(p)/c),s=Math.floor(m/c),u=16*p-m,(i=new Hu).writeInt(this.scalarType),i.writeShort(p),i.writeShort(m),i.writeShort(s),i.writeShort(u),o=16*p,l=i.pos+o,a=null,D=[],t)for(_=t[k],i.writeString(k),i.writeInt(n(_)),i.writeInt(l),i.writeInt(_.length),D=D.concat(_),k==="head"&&(a=l),l+=_.length;l%4;)D.push(0),l++;return i.write(D),r=2981146554-n(i.data),i.pos=a+8,i.writeUInt32(r),i.data},n=function(t){var r,i,o,s;for(t=Z8.call(t);t.length%4;)t.push(0);for(o=new Hu(t),i=0,r=0,s=t.length;r<s;r=r+=4)i+=o.readUInt32();return 4294967295&i},e})(),gre={}.hasOwnProperty,Cc=function(n,e){for(var t in e)gre.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};Aa=(function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n})();var vre=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Cc(n,Aa),n.prototype.tag="head",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},n.prototype.encode=function(e){var t;return(t=new Hu).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},n})(),V8=(function(){function n(e,t){var r,i,o,s,a,c,l,u,m,_,p,D,k,L,R,X,ee;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),m=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(p=e.readUInt16(),_=p/2,e.pos+=6,o=(function(){var J,_e;for(_e=[],c=J=0;0<=_?J<_:J>_;c=0<=_?++J:--J)_e.push(e.readUInt16());return _e})(),e.pos+=2,k=(function(){var J,_e;for(_e=[],c=J=0;0<=_?J<_:J>_;c=0<=_?++J:--J)_e.push(e.readUInt16());return _e})(),l=(function(){var J,_e;for(_e=[],c=J=0;0<=_?J<_:J>_;c=0<=_?++J:--J)_e.push(e.readUInt16());return _e})(),u=(function(){var J,_e;for(_e=[],c=J=0;0<=_?J<_:J>_;c=0<=_?++J:--J)_e.push(e.readUInt16());return _e})(),i=(this.length-e.pos+this.offset)/2,a=(function(){var J,_e;for(_e=[],c=J=0;0<=i?J<i:J>i;c=0<=i?++J:--J)_e.push(e.readUInt16());return _e})(),c=R=0,ee=o.length;R<ee;c=++R)for(L=o[c],r=X=D=k[c];D<=L?X<=L:X>=L;r=D<=L?++X:--X)u[c]===0?s=r+l[c]:(s=a[u[c]/2+(r-D)-(_-c)]||0)!==0&&(s+=l[c]),this.codeMap[r]=65535&s}e.pos=m}return n.encode=function(e,t){var r,i,o,s,a,c,l,u,m,_,p,D,k,L,R,X,ee,J,_e,Ce,H,N,T,U,x,A,M,ne,be,De,Se,ge,Te,We,Be,j,Q,te,oe,de,pe,Ee,xe,Ne,qe,nt;switch(ne=new Hu,s=Object.keys(e).sort(function(et,vt){return et-vt}),t){case"macroman":for(k=0,L=(function(){var et=[];for(D=0;D<256;++D)et.push(0);return et})(),X={0:0},o={},be=0,Te=s.length;be<Te;be++)X[xe=e[i=s[be]]]==null&&(X[xe]=++k),o[i]={old:e[i],new:X[e[i]]},L[i]=X[e[i]];return ne.writeUInt16(1),ne.writeUInt16(0),ne.writeUInt32(12),ne.writeUInt16(0),ne.writeUInt16(262),ne.writeUInt16(0),ne.write(L),{charMap:o,subtable:ne.data,maxGlyphID:k+1};case"unicode":for(A=[],m=[],ee=0,X={},r={},R=l=null,De=0,We=s.length;De<We;De++)X[_e=e[i=s[De]]]==null&&(X[_e]=++ee),r[i]={old:_e,new:X[_e]},a=X[_e]-i,R!=null&&a===l||(R&&m.push(R),A.push(i),l=a),R=i;for(R&&m.push(R),m.push(65535),A.push(65535),U=2*(T=A.length),N=2*Math.pow(Math.log(T)/Math.LN2,2),_=Math.log(N/2)/Math.LN2,H=2*T-N,c=[],Ce=[],p=[],D=Se=0,Be=A.length;Se<Be;D=++Se){if(x=A[D],u=m[D],x===65535){c.push(0),Ce.push(0);break}if(x-(M=r[x].new)>=32768)for(c.push(0),Ce.push(2*(p.length+T-D)),i=ge=x;x<=u?ge<=u:ge>=u;i=x<=u?++ge:--ge)p.push(r[i].new);else c.push(M-x),Ce.push(0)}for(ne.writeUInt16(3),ne.writeUInt16(1),ne.writeUInt32(12),ne.writeUInt16(4),ne.writeUInt16(16+8*T+2*p.length),ne.writeUInt16(0),ne.writeUInt16(U),ne.writeUInt16(N),ne.writeUInt16(_),ne.writeUInt16(H),pe=0,j=m.length;pe<j;pe++)i=m[pe],ne.writeUInt16(i);for(ne.writeUInt16(0),Ee=0,Q=A.length;Ee<Q;Ee++)i=A[Ee],ne.writeUInt16(i);for(Ne=0,te=c.length;Ne<te;Ne++)a=c[Ne],ne.writeUInt16(a);for(qe=0,oe=Ce.length;qe<oe;qe++)J=Ce[qe],ne.writeUInt16(J);for(nt=0,de=p.length;nt<de;nt++)k=p[nt],ne.writeUInt16(k);return{charMap:r,subtable:ne.data,maxGlyphID:ee+1}}},n})(),Q8=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Cc(n,Aa),n.prototype.tag="cmap",n.prototype.parse=function(e){var t,r,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=i?r<i:r>i;r=0<=i?++r:--r)t=new V8(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},n.encode=function(e,t){var r,i;return t==null&&(t="macroman"),r=V8.encode(e,t),(i=new Hu).writeUInt16(0),i.writeUInt16(1),r.table=i.data.concat(r.subtable),r},n})(),yre=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Cc(n,Aa),n.prototype.tag="hhea",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},n})(),_re=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Cc(n,Aa),n.prototype.tag="OS/2",n.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var t,r;for(r=[],t=0;t<10;++t)r.push(e.readByte());return r})(),this.charRange=(function(){var t,r;for(r=[],t=0;t<4;++t)r.push(e.readInt());return r})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var t,r;for(r=[],t=0;t<2;t=++t)r.push(e.readInt());return r})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},n})(),bre=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Cc(n,Aa),n.prototype.tag="post",n.prototype.parse=function(e){var t,r,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var o;for(r=e.readUInt16(),this.glyphNameIndex=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)t=e.readByte(),i.push(this.names.push(e.readString(t)));return i;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 262144:return this.map=(function(){var s,a,c;for(c=[],o=s=0,a=this.file.maxp.numGlyphs;0<=a?s<a:s>a;o=0<=a?++s:--s)c.push(e.readUInt32());return c}).call(this)}},n})(),wre=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Cre=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Cc(n,Aa),n.prototype.tag="name",n.prototype.parse=function(e){var t,r,i,o,s,a,c,l,u,m,_;for(e.pos=this.offset,e.readShort(),t=e.readShort(),a=e.readShort(),r=[],o=0;0<=t?o<t:o>t;o=0<=t?++o:--o)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+a+e.readShort()});for(c={},o=u=0,m=r.length;u<m;o=++u)i=r[o],e.pos=i.offset,l=e.readString(i.length),s=new wre(l,i),c[_=i.nameID]==null&&(c[_]=[]),c[i.nameID].push(s);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},n})(),Ere=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Cc(n,Aa),n.prototype.tag="maxp",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},n})(),Ire=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Cc(n,Aa),n.prototype.tag="hmtx",n.prototype.parse=function(e){var t,r,i,o,s,a,c;for(e.pos=this.offset,this.metrics=[],t=0,a=this.file.hhea.numberOfMetrics;0<=a?t<a:t>a;t=0<=a?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var l,u;for(u=[],t=l=0;0<=i?l<i:l>i;t=0<=i?++l:--l)u.push(e.readInt16());return u})(),this.widths=(function(){var l,u,m,_;for(_=[],l=0,u=(m=this.metrics).length;l<u;l++)o=m[l],_.push(o.advance);return _}).call(this),r=this.widths[this.widths.length-1],c=[],t=s=0;0<=i?s<i:s>i;t=0<=i?++s:--s)c.push(this.widths.push(r));return c},n.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},n})(),Z8=[].slice,xre=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Cc(n,Aa),n.prototype.tag="glyf",n.prototype.parse=function(){return this.cache={}},n.prototype.glyphFor=function(e){var t,r,i,o,s,a,c,l,u,m;return e in this.cache?this.cache[e]:(o=this.file.loca,t=this.file.contents,r=o.indexOf(e),(i=o.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+r,s=(a=new Hu(t.read(i))).readShort(),l=a.readShort(),m=a.readShort(),c=a.readShort(),u=a.readShort(),this.cache[e]=s===-1?new Dre(a,l,m,c,u):new Sre(a,s,l,m,c,u),this.cache[e]))},n.prototype.encode=function(e,t,r){var i,o,s,a,c;for(s=[],o=[],a=0,c=t.length;a<c;a++)i=e[t[a]],o.push(s.length),i&&(s=s.concat(i.encode(r)));return o.push(s.length),{table:s,offsets:o}},n})(),Sre=(function(){function n(e,t,r,i,o,s){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=o,this.yMax=s,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n})(),Dre=(function(){function n(e,t,r,i,o){var s,a;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;a=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&a;)s.pos+=1&a?4:2,128&a?s.pos+=8:64&a?s.pos+=4:8&a&&(s.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new Hu(Z8.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n})(),Tre=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Cc(n,Aa),n.prototype.tag="loca",n.prototype.parse=function(e){var t,r;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var i,o;for(o=[],r=0,i=this.length;r<i;r+=2)o.push(2*e.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],r=0,i=this.length;r<i;r+=4)o.push(e.readUInt32());return o}).call(this)},n.prototype.indexOf=function(e){return this.offsets[e]},n.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},n.prototype.encode=function(e,t){for(var r=new Uint32Array(this.offsets.length),i=0,o=0,s=0;s<r.length;++s)if(r[s]=i,o<t.length&&t[o]==s){++o,r[s]=i;var a=this.offsets[s],c=this.offsets[s+1]-a;c>0&&(i+=c)}for(var l=new Array(4*r.length),u=0;u<r.length;++u)l[4*u+3]=255&r[u],l[4*u+2]=(65280&r[u])>>8,l[4*u+1]=(16711680&r[u])>>16,l[4*u]=(4278190080&r[u])>>24;return l},n})(),Are=(function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,i,o;for(t in i=this.font.cmap.tables[0].codeMap,e={},o=this.subset)r=o[t],e[t]=i[r];return e},n.prototype.glyphsFor=function(e){var t,r,i,o,s,a,c;for(i={},s=0,a=e.length;s<a;s++)i[o=e[s]]=this.font.glyf.glyphFor(o);for(o in t=[],i)(r=i[o])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(o in c=this.glyphsFor(t))r=c[o],i[o]=r;return i},n.prototype.encode=function(e,t){var r,i,o,s,a,c,l,u,m,_,p,D,k,L,R;for(i in r=Q8.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(e),p={0:0},R=r.charMap)p[(c=R[i]).old]=c.new;for(D in _=r.maxGlyphID,s)D in p||(p[D]=_++);return u=(function(X){var ee,J;for(ee in J={},X)J[X[ee]]=ee;return J})(p),m=Object.keys(u).sort(function(X,ee){return X-ee}),k=(function(){var X,ee,J;for(J=[],X=0,ee=m.length;X<ee;X++)a=m[X],J.push(u[a]);return J})(),o=this.font.glyf.encode(s,k,p),l=this.font.loca.encode(o.offsets,k),L={cmap:this.font.cmap.raw(),glyf:o.table,loca:l,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(L["OS/2"]=this.font.os2.raw()),this.font.directory.encode(L)},n})();_t.API.PDFObject=(function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,i,o,s;if(Array.isArray(t))return"["+(function(){var a,c,l;for(l=[],a=0,c=t.length;a<c;a++)r=t[a],l.push(e.convert(r));return l})().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t?.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in o=["<<"],t)s=t[i],o.push("/"+i+" "+e.convert(s));return o.push(">>"),o.join(`
`)}return""+t},e})();function rV(n,e,t,r,i){r=r||{};var o=1.15,s=i.internal.scaleFactor,a=i.internal.getFontSize()/s,c=i.getLineHeightFactor?i.getLineHeightFactor():o,l=a*c,u=/\r\n|\r|\n/g,m="",_=1;if((r.valign==="middle"||r.valign==="bottom"||r.halign==="center"||r.halign==="right")&&(m=typeof n=="string"?n.split(u):n,_=m.length||1),t+=a*(2-o),r.valign==="middle"?t-=_/2*l:r.valign==="bottom"&&(t-=_*l),r.halign==="center"||r.halign==="right"){var p=a;if(r.halign==="center"&&(p*=.5),m&&_>=1){for(var D=0;D<m.length;D++)i.text(m[D],e-i.getStringUnitWidth(m[D])*p,t),t+=l;return i}e-=i.getStringUnitWidth(n)*p}return r.halign==="justify"?i.text(n,e,t,{maxWidth:r.maxWidth||100,align:"justify"}):i.text(n,e,t),i}var J8={},Np=(function(){function n(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return n.setDefaults=function(e,t){t===void 0&&(t=null),t?t.__autoTableDocumentDefaults=e:J8=e},n.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},n.prototype.applyStyles=function(e,t){var r,i,o;t===void 0&&(t=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var s=this.jsPDFDocument.internal.getFont(),a=s.fontStyle,c=s.fontName;if(e.font&&(c=e.font),e.fontStyle){a=e.fontStyle;var l=this.getFontList()[c];l&&l.indexOf(a)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(l[0]),a=l[0])}if(this.jsPDFDocument.setFont(c,a),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!t){var u=n.unifyColor(e.fillColor);u&&(r=this.jsPDFDocument).setFillColor.apply(r,u),u=n.unifyColor(e.textColor),u&&(i=this.jsPDFDocument).setTextColor.apply(i,u),u=n.unifyColor(e.lineColor),u&&(o=this.jsPDFDocument).setDrawColor.apply(o,u),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},n.prototype.splitTextToSize=function(e,t,r){return this.jsPDFDocument.splitTextToSize(e,t,r)},n.prototype.rect=function(e,t,r,i,o){return this.jsPDFDocument.rect(e,t,r,i,o)},n.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},n.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},n.prototype.getDocument=function(){return this.jsPDFDocument},n.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},n.prototype.addPage=function(){return this.jsPDFDocument.addPage()},n.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},n.prototype.getGlobalOptions=function(){return J8||{}},n.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},n.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},n.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},n.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},n.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},n.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},n})(),mA=function(n,e){return mA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},mA(n,e)};function iV(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");mA(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var oV=(function(n){iV(e,n);function e(t){var r=n.call(this)||this;return r._element=t,r}return e})(Array);function Mre(n){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/n,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function Pre(n){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[n]}function fw(n,e,t){t.applyStyles(e,!0);var r=Array.isArray(n)?n:[n],i=r.map(function(o){return t.getTextWidth(o)}).reduce(function(o,s){return Math.max(o,s)},0);return i}function sV(n,e,t,r){var i=e.settings.tableLineWidth,o=e.settings.tableLineColor;n.applyStyles({lineWidth:i,lineColor:o});var s=aV(i,!1);s&&n.rect(t.x,t.y,e.getWidth(n.pageSize().width),r.y-t.y,s)}function aV(n,e){var t=n>0,r=e||e===0;return t&&r?"DF":t?"S":r?"F":null}function mw(n,e){var t,r,i,o;if(n=n||e,Array.isArray(n)){if(n.length>=4)return{top:n[0],right:n[1],bottom:n[2],left:n[3]};if(n.length===3)return{top:n[0],right:n[1],bottom:n[2],left:n[1]};if(n.length===2)return{top:n[0],right:n[1],bottom:n[0],left:n[1]};n.length===1?n=n[0]:n=e}return typeof n=="object"?(typeof n.vertical=="number"&&(n.top=n.vertical,n.bottom=n.vertical),typeof n.horizontal=="number"&&(n.right=n.horizontal,n.left=n.horizontal),{left:(t=n.left)!==null&&t!==void 0?t:e,top:(r=n.top)!==null&&r!==void 0?r:e,right:(i=n.right)!==null&&i!==void 0?i:e,bottom:(o=n.bottom)!==null&&o!==void 0?o:e}):(typeof n!="number"&&(n=e),{top:n,right:n,bottom:n,left:n})}function cV(n,e){var t=mw(e.settings.margin,0);return n.pageSize().width-(t.left+t.right)}function Nre(n,e,t,r,i){var o={},s=1.3333333333333333,a=lA(e,function(ee){return i.getComputedStyle(ee).backgroundColor});a!=null&&(o.fillColor=a);var c=lA(e,function(ee){return i.getComputedStyle(ee).color});c!=null&&(o.textColor=c);var l=Ore(r,t);l&&(o.cellPadding=l);var u="borderTopColor",m=s*t,_=r.borderTopWidth;if(r.borderBottomWidth===_&&r.borderRightWidth===_&&r.borderLeftWidth===_){var p=(parseFloat(_)||0)/m;p&&(o.lineWidth=p)}else o.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/m,right:(parseFloat(r.borderRightWidth)||0)/m,bottom:(parseFloat(r.borderBottomWidth)||0)/m,left:(parseFloat(r.borderLeftWidth)||0)/m},o.lineWidth.top||(o.lineWidth.right?u="borderRightColor":o.lineWidth.bottom?u="borderBottomColor":o.lineWidth.left&&(u="borderLeftColor"));var D=lA(e,function(ee){return i.getComputedStyle(ee)[u]});D!=null&&(o.lineColor=D);var k=["left","right","center","justify"];k.indexOf(r.textAlign)!==-1&&(o.halign=r.textAlign),k=["middle","bottom","top"],k.indexOf(r.verticalAlign)!==-1&&(o.valign=r.verticalAlign);var L=parseInt(r.fontSize||"");isNaN(L)||(o.fontSize=L/s);var R=kre(r);R&&(o.fontStyle=R);var X=(r.fontFamily||"").toLowerCase();return n.indexOf(X)!==-1&&(o.font=X),o}function kre(n){var e="";return(n.fontWeight==="bold"||n.fontWeight==="bolder"||parseInt(n.fontWeight)>=700)&&(e="bold"),(n.fontStyle==="italic"||n.fontStyle==="oblique")&&(e+="italic"),e}function lA(n,e){var t=lV(n,e);if(!t)return null;var r=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var i=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],o=parseInt(r[4]);return o===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function lV(n,e){var t=e(n);return t==="rgba(0, 0, 0, 0)"||t==="transparent"||t==="initial"||t==="inherit"?n.parentElement==null?null:lV(n.parentElement,e):t}function Ore(n,e){var t=[n.paddingTop,n.paddingRight,n.paddingBottom,n.paddingLeft],r=96/(72/e),i=(parseInt(n.lineHeight)-parseInt(n.fontSize))/e/2,o=t.map(function(a){return parseInt(a||"0")/r}),s=mw(o,0);return i>s.top&&(s.top=i),i>s.bottom&&(s.bottom=i),s}function uV(n,e,t,r,i){var o,s;r===void 0&&(r=!1),i===void 0&&(i=!1);var a;typeof e=="string"?a=t.document.querySelector(e):a=e;var c=Object.keys(n.getFontList()),l=n.scaleFactor(),u=[],m=[],_=[];if(!a)return console.error("Html table could not be found with input: ",e),{head:u,body:m,foot:_};for(var p=0;p<a.rows.length;p++){var D=a.rows[p],k=(s=(o=D?.parentElement)===null||o===void 0?void 0:o.tagName)===null||s===void 0?void 0:s.toLowerCase(),L=Rre(c,l,t,D,r,i);L&&(k==="thead"?u.push(L):k==="tfoot"?_.push(L):m.push(L))}return{head:u,body:m,foot:_}}function Rre(n,e,t,r,i,o){for(var s=new oV(r),a=0;a<r.cells.length;a++){var c=r.cells[a],l=t.getComputedStyle(c);if(i||l.display!=="none"){var u=void 0;o&&(u=Nre(n,c,e,l,t)),s.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:u,_element:c,content:Lre(c)})}}var m=t.getComputedStyle(r);if(s.length>0&&(i||m.display!=="none"))return s}function Lre(n){var e=n.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(t){return t.trim()}).join(`
`),e.innerText||e.textContent||""}function Fre(n,e,t){for(var r=0,i=[n,e,t];r<i.length;r++){var o=i[r];o&&typeof o!="object"&&console.error("The options parameter should be of type object, is: "+typeof o),o.startY&&typeof o.startY!="number"&&(console.error("Invalid value for startY option",o.startY),delete o.startY)}}function wl(n,e,t,r,i){if(n==null)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(n),s=1;s<arguments.length;s++){var a=arguments[s];if(a!=null)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(o[c]=a[c])}return o}function dV(n,e){var t=new Np(n),r=t.getDocumentOptions(),i=t.getGlobalOptions();Fre(i,r,e);var o=wl({},i,r,e),s;typeof window<"u"&&(s=window);var a=Vre(i,r,e),c=jre(i,r,e),l=Bre(t,o),u=zre(t,o,s);return{id:e.tableId,content:u,hooks:c,styles:a,settings:l}}function Vre(n,e,t){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(c){if(c==="columnStyles"){var l=n[c],u=e[c],m=t[c];r.columnStyles=wl({},l,u,m)}else{var _=[n,e,t],p=_.map(function(D){return D[c]||{}});r[c]=wl({},p[0],p[1],p[2])}},o=0,s=Object.keys(r);o<s.length;o++){var a=s[o];i(a)}return r}function jre(n,e,t){for(var r=[n,e,t],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},o=0,s=r;o<s.length;o++){var a=s[o];a.didParseCell&&i.didParseCell.push(a.didParseCell),a.willDrawCell&&i.willDrawCell.push(a.willDrawCell),a.didDrawCell&&i.didDrawCell.push(a.didDrawCell),a.willDrawPage&&i.willDrawPage.push(a.willDrawPage),a.didDrawPage&&i.didDrawPage.push(a.didDrawPage)}return i}function Bre(n,e){var t,r,i,o,s,a,c,l,u,m,_,p,D=mw(e.margin,40/n.scaleFactor()),k=(t=Ure(n,e.startY))!==null&&t!==void 0?t:D.top,L;e.showFoot===!0?L="everyPage":e.showFoot===!1?L="never":L=(r=e.showFoot)!==null&&r!==void 0?r:"everyPage";var R;e.showHead===!0?R="everyPage":e.showHead===!1?R="never":R=(i=e.showHead)!==null&&i!==void 0?i:"everyPage";var X=(o=e.useCss)!==null&&o!==void 0?o:!1,ee=e.theme||(X?"plain":"striped"),J=!!e.horizontalPageBreak,_e=(s=e.horizontalPageBreakRepeat)!==null&&s!==void 0?s:null;return{includeHiddenHtml:(a=e.includeHiddenHtml)!==null&&a!==void 0?a:!1,useCss:X,theme:ee,startY:k,margin:D,pageBreak:(c=e.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(l=e.rowPageBreak)!==null&&l!==void 0?l:"auto",tableWidth:(u=e.tableWidth)!==null&&u!==void 0?u:"auto",showHead:R,showFoot:L,tableLineWidth:(m=e.tableLineWidth)!==null&&m!==void 0?m:0,tableLineColor:(_=e.tableLineColor)!==null&&_!==void 0?_:200,horizontalPageBreak:J,horizontalPageBreakRepeat:_e,horizontalPageBreakBehaviour:(p=e.horizontalPageBreakBehaviour)!==null&&p!==void 0?p:"afterAllRows"}}function Ure(n,e){var t=n.getLastAutoTable(),r=n.scaleFactor(),i=n.pageNumber(),o=!1;if(t&&t.startPageNumber){var s=t.startPageNumber+t.pageNumber-1;o=s===i}return typeof e=="number"?e:(e==null||e===!1)&&o&&t?.finalY!=null?t.finalY+20/r:null}function zre(n,e,t){var r=e.head||[],i=e.body||[],o=e.foot||[];if(e.html){var s=e.includeHiddenHtml;if(t){var a=uV(n,e.html,t,s,e.useCss)||{};r=a.head||r,i=a.body||r,o=a.foot||r}else console.error("Cannot parse html in non browser environment")}var c=e.columns||$re(r,i,o);return{columns:c,head:r,body:i,foot:o}}function $re(n,e,t){var r=n[0]||e[0]||t[0]||[],i=[];return Object.keys(r).filter(function(o){return o!=="_element"}).forEach(function(o){var s=1,a;Array.isArray(r)?a=r[parseInt(o)]:a=r[o],typeof a=="object"&&!Array.isArray(a)&&(s=a?.colSpan||1);for(var c=0;c<s;c++){var l=void 0;Array.isArray(r)?l=i.length:l=o+(c>0?"_".concat(c):"");var u={dataKey:l};i.push(u)}}),i}var gA=(function(){function n(e,t,r){this.table=t,this.pageNumber=t.pageNumber,this.settings=t.settings,this.cursor=r,this.doc=e.getDocument()}return n})(),qre=(function(n){iV(e,n);function e(t,r,i,o,s,a){var c=n.call(this,t,r,a)||this;return c.cell=i,c.row=o,c.column=s,c.section=o.section,c}return e})(gA),Hre=(function(){function n(e,t){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=t.columns,this.head=t.head,this.body=t.body,this.foot=t.foot}return n.prototype.getHeadHeight=function(e){return this.head.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},n.prototype.getFootHeight=function(e){return this.foot.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},n.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},n.prototype.callCellHooks=function(e,t,r,i,o,s){for(var a=0,c=t;a<c.length;a++){var l=c[a],u=new qre(e,this,r,i,o,s),m=l(u)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],m)return!1}return!0},n.prototype.callEndPageHooks=function(e,t){e.applyStyles(e.userStyles);for(var r=0,i=this.hooks.didDrawPage;r<i.length;r++){var o=i[r];o(new gA(e,this,t))}},n.prototype.callWillDrawPageHooks=function(e,t){for(var r=0,i=this.hooks.willDrawPage;r<i.length;r++){var o=i[r];o(new gA(e,this,t))}},n.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var t=this.columns.reduce(function(i,o){return i+o.wrappedWidth},0);return t}else{var r=this.settings.margin;return e-r.left-r.right}},n})(),hV=(function(){function n(e,t,r,i,o){o===void 0&&(o=!1),this.height=0,this.raw=e,e instanceof oV&&(this.raw=e._element,this.element=e._element),this.index=t,this.section=r,this.cells=i,this.spansMultiplePages=o}return n.prototype.getMaxCellHeight=function(e){var t=this;return e.reduce(function(r,i){var o;return Math.max(r,((o=t.cells[i.index])===null||o===void 0?void 0:o.height)||0)},0)},n.prototype.hasRowSpan=function(e){var t=this;return e.filter(function(r){var i=t.cells[r.index];return i?i.rowSpan>1:!1}).length>0},n.prototype.canEntireRowFit=function(e,t){return this.getMaxCellHeight(t)<=e},n.prototype.getMinimumRowHeight=function(e,t){var r=this;return e.reduce(function(i,o){var s=r.cells[o.index];if(!s)return 0;var a=t.getLineHeight(s.styles.fontSize),c=s.padding("vertical"),l=c+a;return l>i?l:i},0)},n})(),fV=(function(){function n(e,t,r){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=t,this.section=r,this.raw=e;var o=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,o=(i=e.content)!==null&&i!==void 0?i:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var s=o!=null?""+o:"",a=/\r\n|\r|\n/g;this.text=s.split(a)}return n.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var t=this.height-this.padding("vertical");e=this.y+t/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");r=this.x+i/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:e}},n.prototype.getContentHeight=function(e,t){t===void 0&&(t=1.15);var r=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/e*t,o=r*i+this.padding("vertical");return Math.max(o,this.styles.minCellHeight)},n.prototype.padding=function(e){var t=mw(this.styles.cellPadding,0);return e==="vertical"?t.top+t.bottom:e==="horizontal"?t.left+t.right:t[e]},n})(),Wre=(function(){function n(e,t,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=t,this.index=r}return n.prototype.getMaxCustomCellWidth=function(e){for(var t=0,r=0,i=e.allRows();r<i.length;r++){var o=i[r],s=o.cells[this.index];s&&typeof s.styles.cellWidth=="number"&&(t=Math.max(t,s.styles.cellWidth))}return t},n})();function Gre(n,e){Kre(n,e);var t=[],r=0;e.columns.forEach(function(o){var s=o.getMaxCustomCellWidth(e);s?o.width=s:(o.width=o.wrappedWidth,t.push(o)),r+=o.width});var i=e.getWidth(n.pageSize().width)-r;i&&(i=vA(t,i,function(o){return Math.max(o.minReadableWidth,o.minWidth)})),i&&(i=vA(t,i,function(o){return o.minWidth})),i=Math.abs(i),!e.settings.horizontalPageBreak&&i>.1/n.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),Qre(e),Zre(e,n),Yre(e)}function Kre(n,e){var t=n.scaleFactor(),r=e.settings.horizontalPageBreak,i=cV(n,e);e.allRows().forEach(function(o){for(var s=0,a=e.columns;s<a.length;s++){var c=a[s],l=o.cells[c.index];if(l){var u=e.hooks.didParseCell;e.callCellHooks(n,u,l,o,c,null);var m=l.padding("horizontal");l.contentWidth=fw(l.text,l.styles,n)+m;var _=fw(l.text.join(" ").split(/[^\S\u00A0]+/),l.styles,n);if(l.minReadableWidth=_+l.padding("horizontal"),typeof l.styles.cellWidth=="number")l.minWidth=l.styles.cellWidth,l.wrappedWidth=l.styles.cellWidth;else if(l.styles.cellWidth==="wrap"||r===!0)l.contentWidth>i?(l.minWidth=i,l.wrappedWidth=i):(l.minWidth=l.contentWidth,l.wrappedWidth=l.contentWidth);else{var p=10/t;l.minWidth=l.styles.minCellWidth||p,l.wrappedWidth=l.contentWidth,l.minWidth>l.wrappedWidth&&(l.wrappedWidth=l.minWidth)}}}}),e.allRows().forEach(function(o){for(var s=0,a=e.columns;s<a.length;s++){var c=a[s],l=o.cells[c.index];if(l&&l.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,l.wrappedWidth),c.minWidth=Math.max(c.minWidth,l.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,l.minReadableWidth);else{var u=e.styles.columnStyles[c.dataKey]||e.styles.columnStyles[c.index]||{},m=u.cellWidth||u.minCellWidth;m&&typeof m=="number"&&(c.minWidth=m,c.wrappedWidth=m)}l&&(l.colSpan>1&&!c.minWidth&&(c.minWidth=l.minWidth),l.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=l.minWidth))}})}function vA(n,e,t){for(var r=e,i=n.reduce(function(p,D){return p+D.wrappedWidth},0),o=0;o<n.length;o++){var s=n[o],a=s.wrappedWidth/i,c=r*a,l=s.width+c,u=t(s),m=l<u?u:l;e-=m-s.width,s.width=m}if(e=Math.round(e*1e10)/1e10,e){var _=n.filter(function(p){return e<0?p.width>t(p):!0});_.length&&(e=vA(_,e,t))}return e}function Yre(n){for(var e={},t=1,r=n.allRows(),i=0;i<r.length;i++)for(var o=r[i],s=0,a=n.columns;s<a.length;s++){var c=a[s],l=e[c.index];if(t>1)t--,delete o.cells[c.index];else if(l)l.cell.height+=o.height,t=l.cell.colSpan,delete o.cells[c.index],l.left--,l.left<=1&&delete e[c.index];else{var u=o.cells[c.index];if(!u)continue;if(u.height=o.height,u.rowSpan>1){var m=r.length-i,_=u.rowSpan>m?m:u.rowSpan;e[c.index]={cell:u,left:_,row:o}}}}}function Qre(n){for(var e=n.allRows(),t=0;t<e.length;t++)for(var r=e[t],i=null,o=0,s=0,a=0;a<n.columns.length;a++){var c=n.columns[a];if(s-=1,s>1&&n.columns[a+1])o+=c.width,delete r.cells[c.index];else if(i){var l=i;delete r.cells[c.index],i=null,l.width=c.width+o}else{var l=r.cells[c.index];if(!l)continue;if(s=l.colSpan,o=0,l.colSpan>1){i=l,o+=c.width;continue}l.width=c.width+o}}}function Zre(n,e){for(var t={count:0,height:0},r=0,i=n.allRows();r<i.length;r++){for(var o=i[r],s=0,a=n.columns;s<a.length;s++){var c=a[s],l=o.cells[c.index];if(l){e.applyStyles(l.styles,!0);var u=l.width-l.padding("horizontal");if(l.styles.overflow==="linebreak")l.text=e.splitTextToSize(l.text,u+1/e.scaleFactor(),{fontSize:l.styles.fontSize});else if(l.styles.overflow==="ellipsize")l.text=X8(l.text,u,l.styles,e,"...");else if(l.styles.overflow==="hidden")l.text=X8(l.text,u,l.styles,e,"");else if(typeof l.styles.overflow=="function"){var m=l.styles.overflow(l.text,u);typeof m=="string"?l.text=[m]:l.text=m}l.contentHeight=l.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var _=l.contentHeight/l.rowSpan;l.rowSpan>1&&t.count*t.height<_*l.rowSpan?t={height:_,count:l.rowSpan}:t&&t.count>0&&t.height>_&&(_=t.height),_>o.height&&(o.height=_)}}t.count--}}function X8(n,e,t,r,i){return n.map(function(o){return Jre(o,e,t,r,i)})}function Jre(n,e,t,r,i){var o=1e4*r.scaleFactor();if(e=Math.ceil(e*o)/o,e>=fw(n,t,r))return n;for(;e<fw(n+i,t,r)&&!(n.length<=1);)n=n.substring(0,n.length-1);return n.trim()+i}function pV(n,e){var t=new Np(n),r=Xre(e,t.scaleFactor()),i=new Hre(e,r);return Gre(t,i),t.applyStyles(t.userStyles),i}function Xre(n,e){var t=n.content,r=tie(t.columns);if(t.head.length===0){var i=eV(r,"head");i&&t.head.push(i)}if(t.foot.length===0){var i=eV(r,"foot");i&&t.foot.push(i)}var o=n.settings.theme,s=n.styles;return{columns:r,head:uA("head",t.head,r,s,o,e),body:uA("body",t.body,r,s,o,e),foot:uA("foot",t.foot,r,s,o,e)}}function uA(n,e,t,r,i,o){var s={},a=e.map(function(c,l){for(var u=0,m={},_=0,p=0,D=0,k=t;D<k.length;D++){var L=k[D];if(s[L.index]==null||s[L.index].left===0)if(p===0){var R=void 0;Array.isArray(c)?R=c[L.index-_-u]:R=c[L.dataKey];var X={};typeof R=="object"&&!Array.isArray(R)&&(X=R?.styles||{});var ee=nie(n,L,l,i,r,o,X),J=new fV(R,ee,n);m[L.dataKey]=J,m[L.index]=J,p=J.colSpan-1,s[L.index]={left:J.rowSpan-1,times:p}}else p--,_++;else s[L.index].left--,p=s[L.index].times,u++}return new hV(c,l,n,m)});return a}function eV(n,e){var t={};return n.forEach(function(r){if(r.raw!=null){var i=eie(e,r.raw);i!=null&&(t[r.dataKey]=i)}}),Object.keys(t).length>0?t:null}function eie(n,e){if(n==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(n==="foot"&&typeof e=="object")return e.footer;return null}function tie(n){return n.map(function(e,t){var r,i;return typeof e=="object"?i=(r=e.dataKey)!==null&&r!==void 0?r:t:i=t,new Wre(i,e,t)})}function nie(n,e,t,r,i,o,s){var a=Pre(r),c;n==="head"?c=i.headStyles:n==="body"?c=i.bodyStyles:n==="foot"&&(c=i.footStyles);var l=wl({},a.table,a[n],i.styles,c),u=i.columnStyles[e.dataKey]||i.columnStyles[e.index]||{},m=n==="body"?u:{},_=n==="body"&&t%2===0?wl({},a.alternateRow,i.alternateRowStyles):{},p=Mre(o),D=wl({},p,l,_,m);return wl(D,s)}function rie(n,e,t){var r;t===void 0&&(t={});var i=cV(n,e),o=new Map,s=[],a=[],c=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?c=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(c=[e.settings.horizontalPageBreakRepeat]),c.forEach(function(_){var p=e.columns.find(function(D){return D.dataKey===_||D.index===_});p&&!o.has(p.index)&&(o.set(p.index,!0),s.push(p.index),a.push(e.columns[p.index]),i-=p.wrappedWidth)});for(var l=!0,u=(r=t?.start)!==null&&r!==void 0?r:0;u<e.columns.length;){if(o.has(u)){u++;continue}var m=e.columns[u].wrappedWidth;if(l||i>=m)l=!1,s.push(u),a.push(e.columns[u]),i-=m;else break;u++}return{colIndexes:s,columns:a,lastIndex:u-1}}function iie(n,e){for(var t=[],r=0;r<e.columns.length;r++){var i=rie(n,e,{start:r});i.columns.length&&(t.push(i),r=i.lastIndex)}return t}function mV(n,e){var t=e.settings,r=t.startY,i=t.margin,o={x:i.left,y:r},s=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),a=r+i.bottom+s;if(t.pageBreak==="avoid"){var c=e.body,l=c.reduce(function(_,p){return _+p.height},0);a+=l}var u=new Np(n);(t.pageBreak==="always"||t.startY!=null&&a>u.pageSize().height)&&(vV(u),o.y=i.top),e.callWillDrawPageHooks(u,o);var m=wl({},o);e.startPageNumber=u.pageNumber(),t.horizontalPageBreak?oie(u,e,m,o):(u.applyStyles(u.userStyles),(t.showHead==="firstPage"||t.showHead==="everyPage")&&e.head.forEach(function(_){return Cl(u,e,_,o,e.columns)}),u.applyStyles(u.userStyles),e.body.forEach(function(_,p){var D=p===e.body.length-1;pw(u,e,_,D,m,o,e.columns)}),u.applyStyles(u.userStyles),(t.showFoot==="lastPage"||t.showFoot==="everyPage")&&e.foot.forEach(function(_){return Cl(u,e,_,o,e.columns)})),sV(u,e,m,o),e.callEndPageHooks(u,o),e.finalY=o.y,n.lastAutoTable=e,u.applyStyles(u.userStyles)}function oie(n,e,t,r){var i=iie(n,e),o=e.settings;if(o.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(l,u){n.applyStyles(n.userStyles),u>0?L0(n,e,t,r,l.columns,!0):tV(n,e,r,l.columns),sie(n,e,t,r,l.columns),dA(n,e,r,l.columns)});else for(var s=-1,a=i[0],c=function(){var l=s;if(a){n.applyStyles(n.userStyles);var u=a.columns;s>=0?L0(n,e,t,r,u,!0):tV(n,e,r,u),l=nV(n,e,s+1,r,u),dA(n,e,r,u)}var m=l-s;i.slice(1).forEach(function(_){n.applyStyles(n.userStyles),L0(n,e,t,r,_.columns,!0),nV(n,e,s+1,r,_.columns,m),dA(n,e,r,_.columns)}),s=l};s<e.body.length-1;)c()}function tV(n,e,t,r){var i=e.settings;n.applyStyles(n.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&e.head.forEach(function(o){return Cl(n,e,o,t,r)})}function sie(n,e,t,r,i){n.applyStyles(n.userStyles),e.body.forEach(function(o,s){var a=s===e.body.length-1;pw(n,e,o,a,t,r,i)})}function nV(n,e,t,r,i,o){n.applyStyles(n.userStyles),o=o??e.body.length;var s=Math.min(t+o,e.body.length),a=-1;return e.body.slice(t,s).forEach(function(c,l){var u=t+l===e.body.length-1,m=gV(n,e,u,r);c.canEntireRowFit(m,i)&&(Cl(n,e,c,r,i),a=t+l)}),a}function dA(n,e,t,r){var i=e.settings;n.applyStyles(n.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&e.foot.forEach(function(o){return Cl(n,e,o,t,r)})}function aie(n,e,t){var r=t.getLineHeight(n.styles.fontSize),i=n.padding("vertical"),o=Math.floor((e-i)/r);return Math.max(0,o)}function cie(n,e,t,r){var i={};n.spansMultiplePages=!0,n.height=0;for(var o=0,s=0,a=t.columns;s<a.length;s++){var c=a[s],l=n.cells[c.index];if(l){Array.isArray(l.text)||(l.text=[l.text]);var u=new fV(l.raw,l.styles,l.section);u=wl(u,l),u.text=[];var m=aie(l,e,r);l.text.length>m&&(u.text=l.text.splice(m,l.text.length));var _=r.scaleFactor(),p=r.getLineHeightFactor();l.contentHeight=l.getContentHeight(_,p),l.contentHeight>=e&&(l.contentHeight=e,u.styles.minCellHeight-=e),l.contentHeight>n.height&&(n.height=l.contentHeight),u.contentHeight=u.getContentHeight(_,p),u.contentHeight>o&&(o=u.contentHeight),i[c.index]=u}}var D=new hV(n.raw,-1,n.section,i,!0);D.height=o;for(var k=0,L=t.columns;k<L.length;k++){var c=L[k],u=D.cells[c.index];u&&(u.height=D.height);var l=n.cells[c.index];l&&(l.height=n.height)}return D}function lie(n,e,t,r){var i=n.pageSize().height,o=r.settings.margin,s=o.top+o.bottom,a=i-s;e.section==="body"&&(a-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var c=e.getMinimumRowHeight(r.columns,n),l=c<t;if(c>a)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!l)return!1;var u=e.hasRowSpan(r.columns),m=e.getMaxCellHeight(r.columns)>a;return m?(u&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(u||r.settings.rowPageBreak==="avoid")}function pw(n,e,t,r,i,o,s){var a=gV(n,e,r,o);if(t.canEntireRowFit(a,s))Cl(n,e,t,o,s);else if(lie(n,t,a,e)){var c=cie(t,a,e,n);Cl(n,e,t,o,s),L0(n,e,i,o,s),pw(n,e,c,r,i,o,s)}else L0(n,e,i,o,s),pw(n,e,t,r,i,o,s)}function Cl(n,e,t,r,i){r.x=e.settings.margin.left;for(var o=0,s=i;o<s.length;o++){var a=s[o],c=t.cells[a.index];if(!c){r.x+=a.width;continue}n.applyStyles(c.styles),c.x=r.x,c.y=r.y;var l=e.callCellHooks(n,e.hooks.willDrawCell,c,t,a,r);if(l===!1){r.x+=a.width;continue}uie(n,c,r);var u=c.getTextPos();rV(c.text,u.x,u.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},n.getDocument()),e.callCellHooks(n,e.hooks.didDrawCell,c,t,a,r),r.x+=a.width}r.y+=t.height}function uie(n,e,t){var r=e.styles;if(n.getDocument().setFillColor(n.getDocument().getFillColor()),typeof r.lineWidth=="number"){var i=aV(r.lineWidth,r.fillColor);i&&n.rect(e.x,t.y,e.width,e.height,i)}else typeof r.lineWidth=="object"&&(r.fillColor&&n.rect(e.x,t.y,e.width,e.height,"F"),die(n,e,t,r.lineWidth))}function die(n,e,t,r){var i,o,s,a;r.top&&(i=t.x,o=t.y,s=t.x+e.width,a=t.y,r.right&&(s+=.5*r.right),r.left&&(i-=.5*r.left),c(r.top,i,o,s,a)),r.bottom&&(i=t.x,o=t.y+e.height,s=t.x+e.width,a=t.y+e.height,r.right&&(s+=.5*r.right),r.left&&(i-=.5*r.left),c(r.bottom,i,o,s,a)),r.left&&(i=t.x,o=t.y,s=t.x,a=t.y+e.height,r.top&&(o-=.5*r.top),r.bottom&&(a+=.5*r.bottom),c(r.left,i,o,s,a)),r.right&&(i=t.x+e.width,o=t.y,s=t.x+e.width,a=t.y+e.height,r.top&&(o-=.5*r.top),r.bottom&&(a+=.5*r.bottom),c(r.right,i,o,s,a));function c(l,u,m,_,p){n.getDocument().setLineWidth(l),n.getDocument().line(u,m,_,p,"S")}}function gV(n,e,t,r){var i=e.settings.margin.bottom,o=e.settings.showFoot;return(o==="everyPage"||o==="lastPage"&&t)&&(i+=e.getFootHeight(e.columns)),n.pageSize().height-r.y-i}function L0(n,e,t,r,i,o){i===void 0&&(i=[]),o===void 0&&(o=!1),n.applyStyles(n.userStyles),e.settings.showFoot==="everyPage"&&!o&&e.foot.forEach(function(a){return Cl(n,e,a,r,i)}),e.callEndPageHooks(n,r);var s=e.settings.margin;sV(n,e,t,r),vV(n),e.pageNumber++,r.x=s.left,r.y=s.top,t.y=s.top,e.callWillDrawPageHooks(n,r),e.settings.showHead==="everyPage"&&(e.head.forEach(function(a){return Cl(n,e,a,r,i)}),n.applyStyles(n.userStyles))}function vV(n){var e=n.pageNumber();n.setPage(e+1);var t=n.pageNumber();return t===e?(n.addPage(),!0):!1}function hie(n){n.API.autoTable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[0],i=dV(this,r),o=pV(this,i);return mV(this,o),this},n.API.lastAutoTable=!1,n.API.autoTableText=function(e,t,r,i){rV(e,t,r,i,this)},n.API.autoTableSetDefaults=function(e){return Np.setDefaults(e,this),this},n.autoTableSetDefaults=function(e,t){Np.setDefaults(e,t)},n.API.autoTableHtmlToJson=function(e,t){var r;if(t===void 0&&(t=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new Np(this),o=uV(i,e,window,t,!1),s=o.head,a=o.body,c=((r=s[0])===null||r===void 0?void 0:r.map(function(l){return l.content}))||[];return{columns:c,rows:a,data:a}}}var hA;function F0(n,e){var t=dV(n,e),r=pV(n,t);mV(n,r)}try{typeof window<"u"&&window&&(fA=window,pA=fA.jsPDF||((hA=fA.jspdf)===null||hA===void 0?void 0:hA.jsPDF),pA&&hie(pA))}catch(n){console.error("Could not apply autoTable plugin",n)}var fA,pA;function fie(n,e){if(n&1){let t=at();v(0,"tr")(1,"td"),w(2),g(),v(3,"td"),w(4),g(),v(5,"td"),w(6),g(),v(7,"td"),w(8),g(),v(9,"td")(10,"span",26),w(11),g()(),v(12,"td"),w(13),g(),v(14,"td",23)(15,"button",27),me("click",function(){let i=le(t).$implicit,o=Z(2);return ue(o.viewOrderDetail(i))}),w(16," View Details "),g()()()}if(n&2){let t=e.$implicit,r=Z(2);I(2),Ve(t.orderNumber),I(2),Ve(r.formatDate(t.createdAt)),I(2),Ve(t.isTakeaway?"Takeaway":"Table "+t.tableNumber),I(2),Oe("",t.items.length," items"),I(2),kt("cash",t.paymentMethod==="cash"||!t.paymentMethod)("bank",t.paymentMethod==="bank_transfer")("credit",t.paymentMethod==="credit_account"),I(),Oe(" ",t.paymentMethod==="bank_transfer"?"\u{1F3E6} Bank":t.paymentMethod==="credit_account"?"\u{1F4DD} Credit":"\u{1F4B5} Cash"," "),I(2),Oe("",t.totalAmount.toFixed(0)," PKR")}}function pie(n,e){n&1&&(v(0,"tr")(1,"td",28),w(2,"No sales in this period"),g()())}function mie(n,e){if(n&1&&(v(0,"div",21)(1,"h2"),w(2,"Sales Details"),g(),v(3,"table",22)(4,"thead")(5,"tr")(6,"th"),w(7,"Order #"),g(),v(8,"th"),w(9,"Date"),g(),v(10,"th"),w(11,"Table/Type"),g(),v(12,"th"),w(13,"Items"),g(),v(14,"th"),w(15,"Payment"),g(),v(16,"th"),w(17,"Amount"),g(),v(18,"th",23),w(19,"Actions"),g()()(),v(20,"tbody"),Fe(21,fie,17,12,"tr",24)(22,pie,3,0,"tr",25),g()()()),n&2){let t=Z();I(21),ie("ngForOf",t.salesOrders),I(),ie("ngIf",t.salesOrders.length===0)}}function gie(n,e){if(n&1&&(v(0,"tr")(1,"td"),w(2),cu(3,"date"),g(),v(4,"td"),w(5),g(),v(6,"td"),w(7),g(),v(8,"td"),w(9),g(),v(10,"td"),w(11),g()()),n&2){let t=e.$implicit;I(2),Ve(lu(3,6,t.date,"short")),I(3),Ve(t.supplierName),I(2),Ve(t.inventoryItemName),I(2),Ro("",t.quantity," ",t.unit),I(2),Ve(t.totalCost.toFixed(0))}}function vie(n,e){n&1&&(v(0,"tr")(1,"td",29),w(2,"No expenses in this period"),g()())}function yie(n,e){if(n&1&&(v(0,"div",21)(1,"h2"),w(2,"Expense Details"),g(),v(3,"table",22)(4,"thead")(5,"tr")(6,"th"),w(7,"Date"),g(),v(8,"th"),w(9,"Supplier"),g(),v(10,"th"),w(11,"Item"),g(),v(12,"th"),w(13,"Quantity"),g(),v(14,"th"),w(15,"Cost"),g()()(),v(16,"tbody"),Fe(17,gie,12,9,"tr",24)(18,vie,3,0,"tr",25),g()()()),n&2){let t=Z();I(17),ie("ngForOf",t.expenses),I(),ie("ngIf",t.expenses.length===0)}}function _ie(n,e){if(n&1&&(v(0,"tr")(1,"td"),w(2),g(),v(3,"td"),w(4),g(),v(5,"td"),w(6),g(),v(7,"td"),w(8),g()()),n&2){let t=e.$implicit,r=e.index;I(2),Ve(r+1),I(2),Ve(t.name),I(2),Ve(t.sold),I(2),Ve(t.revenue.toFixed(0))}}function bie(n,e){n&1&&(v(0,"tr")(1,"td",30),w(2,"No sales data available"),g()())}function wie(n,e){if(n&1&&(v(0,"div",21)(1,"h2"),w(2,"Best Selling Items"),g(),v(3,"table",22)(4,"thead")(5,"tr")(6,"th"),w(7,"Rank"),g(),v(8,"th"),w(9,"Item Name"),g(),v(10,"th"),w(11,"Quantity Sold"),g(),v(12,"th"),w(13,"Total Revenue"),g()()(),v(14,"tbody"),Fe(15,_ie,9,4,"tr",24)(16,bie,3,0,"tr",25),g()()()),n&2){let t=Z();I(15),ie("ngForOf",t.itemPerformance),I(),ie("ngIf",t.itemPerformance.length===0)}}var gw=class n{constructor(e){this.db=e}activeTab="sales";startDate="";endDate="";salesOrders=[];totalRevenue=0;totalOrdersCount=0;cashRevenue=0;bankTransferRevenue=0;creditAccountRevenue=0;paymentsTotal=0;paymentsCashTotal=0;paymentsBankTotal=0;paymentsCheckTotal=0;expenses=[];totalExpenses=0;profit=0;itemPerformance=[];ngOnInit(){return F(this,null,function*(){let e=new Date;this.endDate=e.toISOString().split("T")[0];let t=new Date(e);t.setDate(t.getDate()-7),this.startDate=t.toISOString().split("T")[0],yield this.loadReports()})}loadReports(){return F(this,null,function*(){let e=new Date(this.startDate),t=new Date(this.endDate);t.setHours(23,59,59);try{this.salesOrders=yield this.db.getOrdersByDateRange(e,t),this.salesOrders=this.salesOrders.filter(i=>i.status==="completed"),this.totalRevenue=this.salesOrders.reduce((i,o)=>i+o.totalAmount,0),this.totalOrdersCount=this.salesOrders.length,this.cashRevenue=this.salesOrders.filter(i=>i.paymentMethod==="cash").reduce((i,o)=>i+o.totalAmount,0),this.bankTransferRevenue=this.salesOrders.filter(i=>i.paymentMethod==="bank_transfer").reduce((i,o)=>i+o.totalAmount,0),this.creditAccountRevenue=this.salesOrders.filter(i=>i.paymentMethod==="credit_account").reduce((i,o)=>i+o.totalAmount,0);let r=yield this.db.getCustomerPaymentsByDateRange(e,t);this.paymentsTotal=r.reduce((i,o)=>i+(o.amount||0),0),this.paymentsCashTotal=r.filter(i=>i.paymentMode==="cash").reduce((i,o)=>i+(o.amount||0),0),this.paymentsBankTotal=r.filter(i=>i.paymentMode==="bank_transfer").reduce((i,o)=>i+(o.amount||0),0),this.paymentsCheckTotal=r.filter(i=>i.paymentMode==="check").reduce((i,o)=>i+(o.amount||0),0),this.expenses=yield this.db.getPurchasesByDateRange(e,t),this.totalExpenses=this.expenses.reduce((i,o)=>i+o.totalCost,0),this.profit=this.totalRevenue-this.totalExpenses,this.calculateItemPerformance()}catch(r){console.error("Error loading reports:",r)}})}calculateItemPerformance(){let e=new Map;for(let t of this.salesOrders)for(let r of t.items){let i=e.get(r.menuItemName)||{sold:0,revenue:0};i.sold+=r.quantity,i.revenue+=r.totalPrice,e.set(r.menuItemName,i)}this.itemPerformance=Array.from(e.entries()).map(([t,r])=>({name:t,sold:r.sold,revenue:r.revenue})).sort((t,r)=>r.revenue-t.revenue)}switchTab(e){this.activeTab=e}formatDate(e){if(!e)return"N/A";let t;return e.toDate&&typeof e.toDate=="function"?t=e.toDate():e instanceof Date?t=e:t=new Date(e),isNaN(t.getTime())?"Invalid Date":t.toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})}exportToPDF(){let e=new _t,t=`${this.startDate} to ${this.endDate}`,r=20;e.setFontSize(18),e.setFont("helvetica","bold"),e.text("VISAKH",105,r,{align:"center"}),r+=10,e.setFontSize(14),e.text("Reports & Accounts",105,r,{align:"center"}),r+=8,e.setFontSize(10),e.setFont("helvetica","normal"),e.text(`Period: ${t}`,105,r,{align:"center"}),r+=5,e.text(`Generated: ${new Date().toLocaleString()}`,105,r,{align:"center"}),r+=15,e.setFontSize(12),e.setFont("helvetica","bold"),e.text("SUMMARY",14,r),r+=8,F0(e,{startY:r,head:[["Metric","Value"]],body:[["Total Revenue",`${this.totalRevenue.toFixed(0)} PKR (${this.totalOrdersCount} orders)`],["Cash Revenue",`${this.cashRevenue.toFixed(0)} PKR`],["Bank Transfer",`${this.bankTransferRevenue.toFixed(0)} PKR`],["Credit Account",`${this.creditAccountRevenue.toFixed(0)} PKR`],["Collections - Cash",`${this.paymentsCashTotal.toFixed(0)} PKR`],["Collections - Bank",`${this.paymentsBankTotal.toFixed(0)} PKR`],["Collections - Check",`${this.paymentsCheckTotal.toFixed(0)} PKR`],["Total Expenses",`${this.totalExpenses.toFixed(0)} PKR (${this.expenses.length} purchases)`],["Net Profit/Loss",`${this.profit.toFixed(0)} PKR`]],theme:"grid",headStyles:{fillColor:[102,126,234]},margin:{left:14,right:14}}),r=e.lastAutoTable.finalY+15,e.setFontSize(12),e.setFont("helvetica","bold"),e.text("SALES REPORT",14,r),r+=8;let i=this.salesOrders.map(c=>[c.orderNumber,this.formatDate(c.createdAt),c.isTakeaway?"Takeaway":`Table ${c.tableNumber}`,c.items.map(l=>`${l.quantity}x ${l.menuItemName}`).join(", "),c.paymentMethod==="bank_transfer"?"Bank":c.paymentMethod==="credit_account"?"Credit":"Cash",c.cashierName,`${c.totalAmount.toFixed(0)} PKR`]);F0(e,{startY:r,head:[["Order #","Date","Type","Items","Payment","Cashier","Amount"]],body:i.length>0?i:[["No sales in this period","","","","","",""]],theme:"striped",headStyles:{fillColor:[76,175,80]},margin:{left:14,right:14},styles:{fontSize:8,cellPadding:3},columnStyles:{3:{cellWidth:50}}}),r=e.lastAutoTable.finalY+15,r>250&&(e.addPage(),r=20),e.setFontSize(12),e.setFont("helvetica","bold"),e.text("EXPENSE REPORT",14,r),r+=8;let o=this.expenses.map(c=>[this.formatDate(c.date),c.supplierName,c.inventoryItemName,`${c.quantity} ${c.unit}`,`$${c.totalCost.toFixed(2)}`]);F0(e,{startY:r,head:[["Date","Supplier","Item","Quantity","Cost"]],body:o.length>0?o:[["No expenses in this period","","","",""]],theme:"striped",headStyles:{fillColor:[255,152,0]},margin:{left:14,right:14},styles:{fontSize:9,cellPadding:3}}),r=e.lastAutoTable.finalY+15,r>250&&(e.addPage(),r=20),e.setFontSize(12),e.setFont("helvetica","bold"),e.text("ITEM PERFORMANCE",14,r),r+=8;let s=this.itemPerformance.map((c,l)=>[(l+1).toString(),c.name,c.sold.toString(),`${c.revenue.toFixed(2)} PKR`]);F0(e,{startY:r,head:[["Rank","Item Name","Quantity Sold","Total Revenue"]],body:s.length>0?s:[["No sales data available","","",""]],theme:"striped",headStyles:{fillColor:[33,150,243]},margin:{left:14,right:14},styles:{fontSize:9,cellPadding:3}});let a=`HMS_Report_${this.startDate}_to_${this.endDate}.pdf`;e.save(a),alert("PDF report exported successfully!")}clearRecords(){return F(this,null,function*(){let e=`${this.startDate} to ${this.endDate}`,t=new Date(this.startDate),r=new Date(this.endDate);r.setHours(23,59,59);let i=yield this.db.getCustomerPaymentsByDateRange(t,r),o=i.filter(l=>l.paymentMode==="cash").length,s=i.filter(l=>l.paymentMode==="bank_transfer").length,a=i.filter(l=>l.paymentMode==="check").length,c=`Are you sure you want to delete ALL records for ${e}?

This action cannot be undone!

Records to be deleted:
- ${this.salesOrders.length} sales orders
- ${this.expenses.length} expense records
- ${i.length} customer payments (Cash: ${o}, Bank: ${s}, Check: ${a})`;if(confirm(c)&&confirm("Final confirmation: This will permanently delete all selected records. Continue?"))try{let l=0,u=0,m=0;for(let _ of this.salesOrders)_.id&&(yield this.db.deleteOrder(_.id),l++);for(let _ of this.expenses)_.id&&(yield this.db.deletePurchase(_.id),u++);for(let _ of i)_.id&&(yield this.db.deleteCustomerPayment(_.id),m++);alert(`Records cleared successfully!

Deleted:
- ${l} sales orders
- ${u} expense records
- ${m} customer payments`),yield this.loadReports()}catch(l){console.error("Error clearing records:",l),alert("Error clearing records. Please try again.")}})}viewOrderDetail(e){let t=e.createdAt&&typeof e.createdAt=="object"&&"toDate"in e.createdAt?e.createdAt.toDate():new Date(e.createdAt),r=(e.items||[]).map(a=>`<tr><td>${a.menuItemName}</td><td>${a.quantity}</td><td>${a.price.toFixed(0)} PKR</td><td>${a.totalPrice.toFixed(0)} PKR</td></tr>`).join(""),i=e.discount>0?`<p>Discount: -${e.discount.toFixed(0)} PKR${e.discountType==="percentage"?` (${e.discountValue}%)`:""}</p>`:"",o=`<!DOCTYPE html><html><head><meta charset="utf-8"><title>Order ${e.orderNumber}</title>
      <style>body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Arial,sans-serif;padding:20px;color:#333}
      h1{font-size:20px;margin:0 0 10px} p{margin:4px 0}
      table{width:100%;border-collapse:collapse;margin-top:10px}
      th,td{padding:8px;border-bottom:1px solid #eee;text-align:left}
      .total{font-weight:700;margin-top:12px}
      </style></head><body>
      <h1>Order ${e.orderNumber}</h1>
      <p><strong>${e.isTakeaway?"Takeaway":"Table: "+e.tableNumber}</strong></p>
      <p>Customer: ${e.customerName||"-"}</p>
      <p>Status: ${e.status}</p>
      <p>Created: ${t.toLocaleString()}</p>
      <table><thead><tr><th>Item</th><th>Qty</th><th>Price</th><th>Total</th></tr></thead><tbody>${r}</tbody></table>
      <p>Subtotal: ${e.subtotal.toFixed(0)} PKR</p>
      <p>Tax: ${e.tax.toFixed(0)} PKR</p>
      ${i}
      <p class="total">Grand Total: ${e.totalAmount.toFixed(0)} PKR</p>
      </body></html>`,s=window.open("","_blank");s&&(s.document.open(),s.document.write(o),s.document.close(),s.focus())}static \u0275fac=function(t){return new(t||n)(Je(gr))};static \u0275cmp=Jn({type:n,selectors:[["app-reports"]],decls:110,vars:24,consts:[[1,"reports-container"],[1,"filter-section"],[1,"date-filters"],[1,"form-group"],["type","date",3,"input","value"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-export",3,"click"],[1,"btn","btn-danger",3,"click"],[1,"summary-cards"],[1,"summary-card","revenue"],[1,"card-icon"],[1,"card-content"],[1,"card-value"],[1,"summary-card","cash"],[1,"summary-card","bank"],[1,"summary-card","credit"],[1,"summary-card","expenses"],[1,"summary-card","profit"],[1,"tabs"],[3,"click"],["class","tab-content",4,"ngIf"],[1,"tab-content"],[1,"data-table"],[1,"actions-col"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"payment-badge"],[1,"btn-view-detail-text",3,"click"],["colspan","6",1,"no-data"],["colspan","5",1,"no-data"],["colspan","4",1,"no-data"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"h1"),w(2,"Reports & Accounts"),g(),v(3,"div",1)(4,"div",2)(5,"div",3)(6,"label"),w(7,"Start Date:"),g(),v(8,"input",4),me("input",function(o){return r.startDate=o.target.value}),g()(),v(9,"div",3)(10,"label"),w(11,"End Date:"),g(),v(12,"input",4),me("input",function(o){return r.endDate=o.target.value}),g()(),v(13,"button",5),me("click",function(){return r.loadReports()}),w(14,"Apply Filter"),g(),v(15,"button",6),me("click",function(){return r.exportToPDF()}),w(16,"\u{1F4C4} Export to PDF"),g(),v(17,"button",7),me("click",function(){return r.clearRecords()}),w(18,"\u{1F5D1}\uFE0F Clear Records"),g()()(),v(19,"div",8)(20,"div",9)(21,"div",10),w(22,"\u{1F4B0}"),g(),v(23,"div",11)(24,"h3"),w(25,"Total Revenue"),g(),v(26,"p",12),w(27),g(),v(28,"small"),w(29),g()()(),v(30,"div",13)(31,"div",10),w(32,"\u{1F4B5}"),g(),v(33,"div",11)(34,"h3"),w(35,"Cash Revenue"),g(),v(36,"p",12),w(37),g(),v(38,"small"),w(39,"Cash payments"),g()()(),v(40,"div",14)(41,"div",10),w(42,"\u{1F3E6}"),g(),v(43,"div",11)(44,"h3"),w(45,"Bank Transfer"),g(),v(46,"p",12),w(47),g(),v(48,"small"),w(49,"Bank transfers"),g()()(),v(50,"div",15)(51,"div",10),w(52,"\u{1F4DD}"),g(),v(53,"div",11)(54,"h3"),w(55,"Credit Account"),g(),v(56,"p",12),w(57),g(),v(58,"small"),w(59,"Posted to accounts"),g()()(),v(60,"div",13)(61,"div",10),w(62,"\u{1F4E5}"),g(),v(63,"div",11)(64,"h3"),w(65,"Collections (Cash)"),g(),v(66,"p",12),w(67),g(),v(68,"small"),w(69,"Customer payments"),g()()(),v(70,"div",14)(71,"div",10),w(72,"\u{1F4E5}"),g(),v(73,"div",11)(74,"h3"),w(75,"Collections (Bank)"),g(),v(76,"p",12),w(77),g(),v(78,"small"),w(79,"Customer payments"),g()()(),v(80,"div",16)(81,"div",10),w(82,"\u{1F4CA}"),g(),v(83,"div",11)(84,"h3"),w(85,"Total Expenses"),g(),v(86,"p",12),w(87),g(),v(88,"small"),w(89),g()()(),v(90,"div",17)(91,"div",10),w(92),g(),v(93,"div",11)(94,"h3"),w(95,"Profit/Loss"),g(),v(96,"p",12),w(97),g(),v(98,"small"),w(99,"Revenue - Expenses"),g()()()(),v(100,"div",18)(101,"button",19),me("click",function(){return r.switchTab("sales")}),w(102,"Sales Report"),g(),v(103,"button",19),me("click",function(){return r.switchTab("expenses")}),w(104,"Expense Report"),g(),v(105,"button",19),me("click",function(){return r.switchTab("items")}),w(106,"Item Performance"),g()(),Fe(107,mie,23,2,"div",20)(108,yie,19,2,"div",20)(109,wie,17,2,"div",20),g()),t&2&&(I(8),ie("value",r.startDate),I(4),ie("value",r.endDate),I(15),Oe("",r.totalRevenue.toFixed(0)," PKR"),I(2),Oe("",r.totalOrdersCount," orders"),I(8),Oe("",r.cashRevenue.toFixed(0)," PKR"),I(10),Oe("",r.bankTransferRevenue.toFixed(0)," PKR"),I(10),Oe("",r.creditAccountRevenue.toFixed(0)," PKR"),I(10),Oe("",r.paymentsCashTotal.toFixed(0)," PKR"),I(10),Oe("",r.paymentsBankTotal.toFixed(0)," PKR"),I(10),Oe("",r.totalExpenses.toFixed(0)," PKR"),I(2),Oe("",r.expenses.length," purchases"),I(),kt("negative",r.profit<0),I(2),Ve(r.profit>=0?"\u{1F4C8}":"\u{1F4C9}"),I(5),Oe("",r.profit.toFixed(0)," PKR"),I(4),kt("active",r.activeTab==="sales"),I(2),kt("active",r.activeTab==="expenses"),I(2),kt("active",r.activeTab==="items"),I(2),ie("ngIf",r.activeTab==="sales"),I(),ie("ngIf",r.activeTab==="expenses"),I(),ie("ngIf",r.activeTab==="items"))},dependencies:[ir,Nr,lr,Ei,Od],styles:[".reports-container[_ngcontent-%COMP%]{padding:20px;max-width:1400px;margin:0 auto}h1[_ngcontent-%COMP%]{font-size:28px;color:#333;margin-bottom:30px}.filter-section[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:10px;box-shadow:0 2px 8px #0000001a;margin-bottom:20px}.date-filters[_ngcontent-%COMP%]{display:flex;gap:20px;align-items:flex-end}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#666}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #ddd;border-radius:5px;font-size:14px}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:5px;font-size:14px;font-weight:500;cursor:pointer;transition:all .3s}.btn-primary[_ngcontent-%COMP%]{background:#667eea;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:#5568d3}.btn-export[_ngcontent-%COMP%]{background:#4caf50;color:#fff}.btn-export[_ngcontent-%COMP%]:hover{background:#45a049}.btn-danger[_ngcontent-%COMP%]{background:#f44336;color:#fff}.btn-danger[_ngcontent-%COMP%]:hover{background:#da190b}.summary-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(230px,1fr));gap:20px;margin-bottom:30px}.summary-card[_ngcontent-%COMP%]{background:#fff;border-radius:10px;padding:20px;display:flex;align-items:center;gap:15px;box-shadow:0 2px 8px #0000001a}.summary-card.revenue[_ngcontent-%COMP%]{border-left:4px solid #4caf50}.summary-card.cash[_ngcontent-%COMP%]{border-left:4px solid #8bc34a}.summary-card.bank[_ngcontent-%COMP%]{border-left:4px solid #2196f3}.summary-card.credit[_ngcontent-%COMP%]{border-left:4px solid #9c27b0}.summary-card.expenses[_ngcontent-%COMP%]{border-left:4px solid #ff9800}.summary-card.profit[_ngcontent-%COMP%]{border-left:4px solid #2196f3}.summary-card.profit.negative[_ngcontent-%COMP%]{border-left:4px solid #f44336}.card-icon[_ngcontent-%COMP%]{font-size:48px}.card-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:14px;color:#666;margin:0 0 8px}.card-value[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:#333;margin:0 0 5px}.card-content[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#999;font-size:12px}.payment-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;border-radius:12px;font-size:12px;font-weight:600}.payment-badge.cash[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.payment-badge.bank[_ngcontent-%COMP%]{background:#e3f2fd;color:#1565c0}.payment-badge.credit[_ngcontent-%COMP%]{background:#f3e5f5;color:#7b1fa2}.tabs[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:20px;border-bottom:2px solid #eee}.tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 24px;border:none;background:none;cursor:pointer;font-size:15px;font-weight:500;color:#666;border-bottom:3px solid transparent}.tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{color:#667eea;border-bottom-color:#667eea}.tab-content[_ngcontent-%COMP%]{background:#fff;border-radius:10px;padding:20px;box-shadow:0 2px 8px #0000001a}.tab-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 20px;font-size:20px;color:#333}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#f5f5f5}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:15px;text-align:left;font-weight:600;color:#333;border-bottom:2px solid #ddd}.data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:15px;border-bottom:1px solid #eee}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f9f9f9}.no-data[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#999}.actions-col[_ngcontent-%COMP%]{text-align:center;width:120px}.btn-view-detail-text[_ngcontent-%COMP%]{background:#3b82f6;color:#fff;border:none;font-size:13px;cursor:pointer;padding:6px 12px;border-radius:6px;transition:all .2s;font-weight:500}.btn-view-detail-text[_ngcontent-%COMP%]:hover{background:#2563eb;transform:translateY(-1px);box-shadow:0 2px 4px #3b82f64d}"]})};function Cie(n,e){if(n&1&&(v(0,"div",20),w(1),g()),n&2){let t=Z(2).$implicit;I(),Oe("",t.activeOrder.totalAmount.toFixed(0)," PKR")}}function Eie(n,e){if(n&1&&(v(0,"div",17)(1,"div",18),w(2),g(),Fe(3,Cie,2,1,"div",19),g()),n&2){let t=Z().$implicit,r=Z(2);I(2),Oe("\u23F1 ",r.getTimeSinceSeated(t)),I(),ie("ngIf",t.activeOrder)}}function Iie(n,e){n&1&&(v(0,"div",17)(1,"div",21),w(2,"\u{1F4B5} Bill Requested"),g()())}function xie(n,e){if(n&1){let t=at();v(0,"div",14),me("click",function(){let i=le(t).$implicit,o=Z(2);return ue(o.selectTable(i))}),v(1,"div",15),w(2),g(),Fe(3,Eie,4,2,"div",16)(4,Iie,3,0,"div",16),g()}if(n&2){let t=e.$implicit;kt("free",t.status==="free")("occupied",t.status==="occupied")("bill-requested",t.status==="billRequested"),I(2),Oe("Table ",t.number),I(),ie("ngIf",t.status==="occupied"),I(),ie("ngIf",t.status==="billRequested")}}function Sie(n,e){if(n&1){let t=at();v(0,"div",8)(1,"div",9)(2,"button",10),me("click",function(){le(t);let i=Z();return ue(i.setFilter("all"))}),w(3," All "),g(),v(4,"button",10),me("click",function(){le(t);let i=Z();return ue(i.setFilter("free"))}),w(5," Free "),g(),v(6,"button",10),me("click",function(){le(t);let i=Z();return ue(i.setFilter("occupied"))}),w(7," Occupied "),g(),v(8,"button",10),me("click",function(){le(t);let i=Z();return ue(i.setFilter("billRequested"))}),w(9," Bill Requested "),g()(),v(10,"div",11),Fe(11,xie,5,9,"div",12),g(),v(12,"button",13),me("click",function(){le(t);let i=Z();return ue(i.startTakeaway())}),v(13,"span"),w(14,"+ New Takeaway"),g()()()}if(n&2){let t=Z();I(2),kt("active",t.selectedFilter==="all"),I(2),kt("active",t.selectedFilter==="free"),I(2),kt("active",t.selectedFilter==="occupied"),I(2),kt("active",t.selectedFilter==="billRequested"),I(3),ie("ngForOf",t.filteredTables)}}function Die(n,e){if(n&1&&(v(0,"div",47),w(1),g()),n&2){let t=Z().$implicit;I(),Oe("\u{1F4DD} ",t.notes)}}function Tie(n,e){if(n&1&&(v(0,"div",39)(1,"div",40)(2,"div",41),w(3),g(),Fe(4,Die,2,1,"div",42),g(),v(5,"div",43),w(6),g(),v(7,"div",44),w(8),g(),v(9,"div",45)(10,"span",46),w(11),g()()()),n&2){let t=e.$implicit,r=Z(3);I(3),Ve(t.menuItemName),I(),ie("ngIf",t.notes),I(2),Oe("",t.quantity,"x"),I(2),Oe("",t.totalPrice.toFixed(0)," PKR"),I(2),Md("background-color",r.getStatusColor((r.selectedTable==null||r.selectedTable.activeOrder==null?null:r.selectedTable.activeOrder.status)||"pending")),I(),Oe(" ",r.getStatusText((r.selectedTable==null||r.selectedTable.activeOrder==null?null:r.selectedTable.activeOrder.status)||"pending")," ")}}function Aie(n,e){if(n&1&&(v(0,"div",37),Fe(1,Tie,12,7,"div",38),g()),n&2){let t=Z(2);I(),ie("ngForOf",t.selectedTable==null||t.selectedTable.activeOrder==null?null:t.selectedTable.activeOrder.items)}}function Mie(n,e){n&1&&(v(0,"div",48),w(1,"No items ordered yet"),g())}function Pie(n,e){if(n&1&&(v(0,"div",47),w(1),g()),n&2){let t=Z().$implicit;I(),Oe("\u{1F4DD} ",t.notes)}}function Nie(n,e){if(n&1){let t=at();v(0,"div",57)(1,"div",40)(2,"div",41),w(3),g(),Fe(4,Pie,2,1,"div",42),g(),v(5,"div",58)(6,"input",59),Ye("ngModelChange",function(i){let o=le(t).$implicit;return Qe(o.quantity,i)||(o.quantity=i),ue(i)}),me("ngModelChange",function(){let i=le(t).$implicit,o=Z(3);return ue(o.updateEditableQuantity(i,i.quantity))}),g()(),v(7,"div",44),w(8),g(),v(9,"button",60),me("click",function(){let i=le(t).$implicit,o=Z(3);return ue(o.removeEditableItem(i))}),w(10,"\u2715"),g()()}if(n&2){let t=e.$implicit;I(3),Ve(t.menuItemName),I(),ie("ngIf",t.notes),I(2),Ke("ngModel",t.quantity),I(2),Oe("",t.totalPrice.toFixed(0)," PKR")}}function kie(n,e){if(n&1){let t=at();v(0,"div",49)(1,"h3"),w(2,"Edit Order"),g(),v(3,"div",50),Fe(4,Nie,11,4,"div",51),g(),v(5,"div",52)(6,"div",53)(7,"span"),w(8,"Edited Subtotal:"),g(),v(9,"span"),w(10),g()()(),v(11,"div",54)(12,"button",55),me("click",function(){le(t);let i=Z(2);return ue(i.cancelEditOrder())}),w(13,"Close"),g(),v(14,"button",56),me("click",function(){le(t);let i=Z(2);return ue(i.saveOrderEdits())}),w(15,"Save Changes"),g()()()}if(n&2){let t=Z(2);I(4),ie("ngForOf",t.editableItems),I(6),Oe("",t.getEditableSubtotal().toFixed(0)," PKR"),I(4),ie("disabled",t.isLoading||t.editableItems.length===0)}}function Oie(n,e){if(n&1){let t=at();v(0,"button",61),me("click",function(){le(t);let i=Z(2);return ue(i.startEditOrder())}),v(1,"span"),w(2,"\u270F\uFE0F Edit Order"),g()()}}function Rie(n,e){if(n&1){let t=at();v(0,"button",62),me("click",function(){le(t);let i=Z(2);return ue(i.cancelOrderWithReason())}),v(1,"span"),w(2,"\u{1F6D1} Cancel Order"),g()()}}function Lie(n,e){if(n&1){let t=at();v(0,"div",22)(1,"div",23)(2,"button",24),me("click",function(){le(t);let i=Z();return ue(i.backToFloorMap())}),w(3,"\u2190 Back"),g(),v(4,"div",25)(5,"h2"),w(6),g(),v(7,"span",26),w(8),g()()(),v(9,"div",27)(10,"h3"),w(11,"Current Order (Sent to Kitchen)"),g(),Fe(12,Aie,2,1,"div",28)(13,Mie,2,0,"ng-template",null,0,yE),g(),Fe(15,kie,16,3,"div",29),v(16,"div",30)(17,"span"),w(18,"Running Total:"),g(),v(19,"span",31),w(20),g()(),v(21,"div",32)(22,"button",33),me("click",function(){le(t);let i=Z();return ue(i.goToAddItems())}),v(23,"span"),w(24,"+ Add Items"),g()(),v(25,"button",34),me("click",function(){le(t);let i=Z();return ue(i.requestBill())}),v(26,"span"),w(27,"\u{1F4B5} Request Bill"),g()(),Fe(28,Oie,3,0,"button",35)(29,Rie,3,0,"button",36),g()()}if(n&2){let t=vE(14),r=Z();I(6),Oe("Table ",r.selectedTable==null?null:r.selectedTable.number),I(2),Oe("",(r.selectedTable==null?null:r.selectedTable.guestCount)||2," Guests"),I(4),ie("ngIf",r.selectedTable==null||r.selectedTable.activeOrder==null||r.selectedTable.activeOrder.items==null?null:r.selectedTable.activeOrder.items.length)("ngIfElse",t),I(3),ie("ngIf",r.editMode),I(5),Oe("",(r.selectedTable==null||r.selectedTable.activeOrder==null||r.selectedTable.activeOrder.totalAmount==null?null:r.selectedTable.activeOrder.totalAmount.toFixed(0))||0," PKR"),I(8),ie("ngIf",r.canEditOrder()&&!r.editMode),I(),ie("ngIf",r.canEditOrder())}}function Fie(n,e){if(n&1){let t=at();v(0,"button",10),me("click",function(){let i=le(t).$implicit,o=Z(2);return ue(o.selectedCategory=i)}),w(1),g()}if(n&2){let t=e.$implicit,r=Z(2);kt("active",r.selectedCategory===t),I(),Oe(" ",t," ")}}function Vie(n,e){if(n&1&&(v(0,"span",76),w(1),g()),n&2){let t=Z().$implicit;I(),Oe("/ ",t.unit||"kg")}}function jie(n,e){if(n&1){let t=at();v(0,"div",73),me("click",function(){let i=le(t).$implicit,o=Z(2);return ue(o.openItemModifier(i))}),v(1,"div",41),w(2),g(),v(3,"div",74),w(4),g(),v(5,"div",44),w(6),Fe(7,Vie,2,1,"span",75),g()()}if(n&2){let t=e.$implicit,r=Z(2);kt("selected",r.isItemSelected(t)),I(2),Ve(t.name),I(2),Ve(t.category),I(2),Oe(" ",t.price.toFixed(0)," PKR "),I(),ie("ngIf",t.soldByWeight)}}function Bie(n,e){if(n&1&&(v(0,"div",85),w(1),g()),n&2){let t=e.$implicit;I(),Ro(" ",t.quantity,"x ",t.menuItemName," ")}}function Uie(n,e){if(n&1){let t=at();v(0,"div",77),me("click",function(){let i=le(t).$implicit,o=Z(2);return ue(o.addDealToCart(i))}),v(1,"div",78),w(2,"\u2B50 DEAL"),g(),v(3,"div",41),w(4),g(),v(5,"div",79),Fe(6,Bie,2,2,"div",80),g(),v(7,"div",81)(8,"span",82),w(9),g(),v(10,"span",83),w(11),g()(),v(12,"div",84),w(13),g()()}if(n&2){let t=e.$implicit;I(4),Ve(t.name),I(2),ie("ngForOf",t.items),I(3),Oe("",t.originalPrice.toFixed(0)," PKR"),I(2),Oe("",t.dealPrice.toFixed(0)," PKR"),I(2),Oe("Save ",t.savingsPercent.toFixed(0),"%")}}function zie(n,e){if(n&1){let t=at();v(0,"div",86),me("click",function(){le(t);let i=Z(2);return ue(i.viewCart())}),v(1,"span"),w(2),g(),v(3,"span"),w(4),g()()}if(n&2){let t=Z(2);I(2),Oe("",t.draftCart.length," Items selected"),I(2),Oe("",t.getDraftSubtotal().toFixed(0)," PKR \u2192")}}function $ie(n,e){if(n&1){let t=at();v(0,"div",63)(1,"div",64)(2,"button",24),me("click",function(){le(t);let i=Z();return ue(i.backToFloorMap())}),w(3,"\u2190 Back"),g(),v(4,"div",25)(5,"h2"),w(6),g()()(),v(7,"div",65)(8,"input",66),Ye("ngModelChange",function(i){le(t);let o=Z();return Qe(o.searchText,i)||(o.searchText=i),ue(i)}),g()(),v(9,"div",67),Fe(10,Fie,2,3,"button",68),g(),v(11,"div",69),Fe(12,jie,8,6,"div",70)(13,Uie,14,5,"div",71),g(),Fe(14,zie,5,2,"div",72),g()}if(n&2){let t=Z();I(6),Oe("Table ",t.selectedTable==null?null:t.selectedTable.number),I(2),Ke("ngModel",t.searchText),I(2),ie("ngForOf",t.categories),I(2),ie("ngForOf",t.filteredMenu),I(),ie("ngForOf",t.filteredDeals),I(),ie("ngIf",t.draftCart.length>0)}}function qie(n,e){if(n&1&&(v(0,"div",89)(1,"span"),w(2,"Current Order:"),g(),v(3,"span"),w(4),g()()),n&2){let t=Z(2);I(4),Oe("",t.selectedTable==null||t.selectedTable.activeOrder==null||t.selectedTable.activeOrder.totalAmount==null?null:t.selectedTable.activeOrder.totalAmount.toFixed(0)," PKR")}}function Hie(n,e){n&1&&(v(0,"span",98),w(1,"\u2B50 DEAL"),g())}function Wie(n,e){if(n&1&&(v(0,"div",47),w(1),g()),n&2){let t=Z().$implicit;I(),Oe("\u{1F4DD} ",t.notes)}}function Gie(n,e){if(n&1&&(v(0,"div",101),w(1),g()),n&2){let t=e.$implicit;I(),Ro(" \u2022 ",t.quantity,"x ",t.menuItemName," ")}}function Kie(n,e){if(n&1&&(v(0,"div",99),Fe(1,Gie,2,2,"div",100),g()),n&2){let t=Z().$implicit;I(),ie("ngForOf",t.dealItems)}}function Yie(n,e){if(n&1){let t=at();v(0,"div",58)(1,"input",59),Ye("ngModelChange",function(i){le(t);let o=Z().$implicit;return Qe(o.quantity,i)||(o.quantity=i),ue(i)}),me("ngModelChange",function(){le(t);let i=Z().$implicit,o=Z(2);return ue(o.updateDraftQuantity(i,i.quantity))}),g()()}if(n&2){let t=Z().$implicit;I(),Ke("ngModel",t.quantity)}}function Qie(n,e){if(n&1&&(v(0,"div",58)(1,"span",102),w(2),g()()),n&2){let t=Z().$implicit;I(2),Ve(t.quantity)}}function Zie(n,e){if(n&1){let t=at();v(0,"div",57)(1,"div",40)(2,"div",41),w(3),Fe(4,Hie,2,0,"span",95),g(),Fe(5,Wie,2,1,"div",42)(6,Kie,2,1,"div",96),g(),Fe(7,Yie,2,1,"div",97)(8,Qie,3,1,"div",97),v(9,"div",44),w(10),g(),v(11,"button",60),me("click",function(){let i=le(t).$implicit,o=Z(2);return ue(o.removeDraftItem(i))}),w(12,"\u2715"),g()()}if(n&2){let t=e.$implicit;I(3),Oe(" ",t.menuItemName," "),I(),ie("ngIf",t.isDeal),I(),ie("ngIf",t.notes),I(),ie("ngIf",t.isDeal&&t.dealItems),I(),ie("ngIf",!t.isDeal),I(),ie("ngIf",t.isDeal),I(2),Oe("",t.totalPrice.toFixed(0)," PKR")}}function Jie(n,e){if(n&1&&(v(0,"div",53)(1,"span"),w(2,"Current Order:"),g(),v(3,"span"),w(4),g()()),n&2){let t=Z(2);I(4),Oe("",t.selectedTable==null||t.selectedTable.activeOrder==null||t.selectedTable.activeOrder.totalAmount==null?null:t.selectedTable.activeOrder.totalAmount.toFixed(0)," PKR")}}function Xie(n,e){if(n&1){let t=at();v(0,"div",87)(1,"div",23)(2,"button",24),me("click",function(){le(t);let i=Z();return ue(i.backToMenu())}),w(3,"\u2190 Back"),g(),v(4,"h2"),w(5,"Review Order"),g()(),v(6,"div",88)(7,"div",89)(8,"span"),w(9,"Table:"),g(),v(10,"span"),w(11),g()(),Fe(12,qie,5,1,"div",90),g(),v(13,"div",91)(14,"h3"),w(15,"New Items (To be sent to kitchen)"),g(),v(16,"div",50),Fe(17,Zie,13,7,"div",51),g()(),v(18,"div",52),Fe(19,Jie,5,1,"div",92),v(20,"div",53)(21,"span"),w(22,"New Items:"),g(),v(23,"span"),w(24),g()(),v(25,"div",93)(26,"span"),w(27,"Grand Total:"),g(),v(28,"span"),w(29),g()()(),v(30,"div",94)(31,"button",56),me("click",function(){le(t);let i=Z();return ue(i.confirmAndSendToKitchen())}),w(32),g()()()}if(n&2){let t=Z();I(11),Ve(t.selectedTable==null?null:t.selectedTable.number),I(),ie("ngIf",t.selectedTable==null?null:t.selectedTable.activeOrder),I(5),ie("ngForOf",t.draftCart),I(2),ie("ngIf",t.selectedTable==null?null:t.selectedTable.activeOrder),I(5),Oe("",t.getDraftSubtotal().toFixed(0)," PKR"),I(5),Oe("",t.getTotalOrderAmount().toFixed(0)," PKR"),I(2),ie("disabled",t.isLoading),I(),Oe(" ",t.isLoading?"Sending...":"\u{1F373} Confirm & Send to Kitchen"," ")}}function eoe(n,e){if(n&1&&(v(0,"span"),w(1),g()),n&2){let t=Z(2);I(),Oe("/ ",(t.selectedMenuItem==null?null:t.selectedMenuItem.unit)||"kg")}}function toe(n,e){if(n&1){let t=at();v(0,"div",103),me("click",function(){le(t);let i=Z();return ue(i.closeItemModifier())}),v(1,"div",104),me("click",function(i){return le(t),ue(i.stopPropagation())}),v(2,"div",105)(3,"h3"),w(4),g(),v(5,"button",106),me("click",function(){le(t);let i=Z();return ue(i.closeItemModifier())}),w(6,"\u2715"),g()(),v(7,"div",107)(8,"div",108),w(9),Fe(10,eoe,2,1,"span",109),g(),v(11,"div",110)(12,"label"),w(13,"Quantity:"),g(),v(14,"div",111)(15,"button",10),me("click",function(){le(t);let i=Z();return i.modifierQuantity=i.Math.max(.1,i.modifierQuantity-(i.selectedMenuItem!=null&&i.selectedMenuItem.soldByWeight?.1:1)),ue(i.formatQuantity(i.modifierQuantity))}),w(16,"\u2212"),g(),v(17,"input",112),Ye("ngModelChange",function(i){le(t);let o=Z();return Qe(o.modifierQuantity,i)||(o.modifierQuantity=i),ue(i)}),me("ngModelChange",function(i){le(t);let o=Z();return ue(o.formatQuantity(i))}),g(),v(18,"button",10),me("click",function(){le(t);let i=Z();return i.modifierQuantity=i.modifierQuantity+(i.selectedMenuItem!=null&&i.selectedMenuItem.soldByWeight?.1:1),ue(i.formatQuantity(i.modifierQuantity))}),w(19,"+"),g()()(),v(20,"div",113)(21,"label"),w(22,"Special Instructions (Optional):"),g(),v(23,"textarea",114),Ye("ngModelChange",function(i){le(t);let o=Z();return Qe(o.modifierNotes,i)||(o.modifierNotes=i),ue(i)}),g()(),v(24,"div",115)(25,"span"),w(26,"Total:"),g(),v(27,"span"),w(28),g()()(),v(29,"div",116)(30,"button",55),me("click",function(){le(t);let i=Z();return ue(i.closeItemModifier())}),w(31,"Cancel"),g(),v(32,"button",117),me("click",function(){le(t);let i=Z();return ue(i.addItemToCart())}),w(33,"Add to Cart"),g()()()()}if(n&2){let t=Z();I(4),Ve(t.selectedMenuItem==null?null:t.selectedMenuItem.name),I(5),Oe(" ",t.selectedMenuItem==null||t.selectedMenuItem.price==null?null:t.selectedMenuItem.price.toFixed(0)," PKR "),I(),ie("ngIf",t.selectedMenuItem==null?null:t.selectedMenuItem.soldByWeight),I(7),Ke("ngModel",t.modifierQuantity),ie("step",t.selectedMenuItem!=null&&t.selectedMenuItem.soldByWeight?.1:1),I(6),Ke("ngModel",t.modifierNotes),I(5),Oe("",(t.modifierQuantity*((t.selectedMenuItem==null?null:t.selectedMenuItem.price)||0)).toFixed(0)," PKR")}}function noe(n,e){n&1&&(v(0,"div",118),Fi(1,"div",119),v(2,"div"),w(3,"Processing..."),g()())}var vw=class n{constructor(e,t){this.db=e;this.authService=t}isLoading=!1;currentScreen="floorMap";tables=[];selectedFilter="all";selectedTable=null;guestCount=2;menuItems=[];deals=[];searchText="";selectedCategory="All";categories=["All","Deals","BBQ","Curries","Rice","Bread","Salads","Drinks","Desserts"];draftCart=[];editMode=!1;editableItems=[];showItemModifier=!1;selectedMenuItem=null;modifierQuantity=1;modifierNotes="";Math=Math;ngOnInit(){return F(this,null,function*(){yield this.loadMenuItems(),yield this.loadDeals(),yield this.loadAllTables(),setInterval(()=>this.loadAllTables(),3e4)})}loadAllTables(){return F(this,null,function*(){try{let e=Array.from({length:20},(r,i)=>String(i+1)),t=yield this.db.getOrders();this.tables=e.map(r=>{let i=t.find(s=>s.tableNumber===r&&["pending","cooking","ready"].includes(s.status)),o="free";return i&&(o=i.status==="ready"?"billRequested":"occupied"),{number:r,status:o,activeOrder:i||null,seatedTime:i?.createdAt||null,guestCount:0}})}catch(e){console.error("Failed to load tables:",e)}})}get filteredTables(){return this.selectedFilter==="all"?this.tables:this.tables.filter(e=>e.status===this.selectedFilter)}setFilter(e){this.selectedFilter=e}getTimeSinceSeated(e){if(!e.seatedTime)return"";let t=new Date,r;e.seatedTime instanceof Date?r=e.seatedTime:typeof e.seatedTime=="object"&&"toDate"in e.seatedTime?r=e.seatedTime.toDate():r=new Date(e.seatedTime);let i=t.getTime()-r.getTime(),o=Math.floor(i/6e4);if(o<60)return`${o}m ago`;let s=Math.floor(o/60),a=o%60;return`${s}h ${a}m ago`}selectTable(e){this.selectedTable=e,this.draftCart=[],this.editMode=!1,this.editableItems=[],e.status==="free"?(this.guestCount=2,this.currentScreen="menuSelection"):this.currentScreen="tableDetail"}backToFloorMap(){this.currentScreen="floorMap",this.selectedTable=null,this.draftCart=[],this.editMode=!1,this.editableItems=[],this.loadAllTables()}loadMenuItems(){return F(this,null,function*(){this.isLoading=!0;try{this.menuItems=yield this.db.getActiveMenuItems()}catch(e){console.error("Failed to load menu items",e)}finally{this.isLoading=!1}})}loadDeals(){return F(this,null,function*(){try{this.deals=yield this.db.getActiveDeals()}catch(e){console.error("Failed to load deals",e)}})}get filteredMenu(){if(this.selectedCategory==="Deals")return[];let e=this.searchText.toLowerCase(),t=this.menuItems;return this.selectedCategory!=="All"&&(t=t.filter(r=>r.category===this.selectedCategory)),e&&(t=t.filter(r=>r.name.toLowerCase().includes(e))),t}get filteredDeals(){if(this.selectedCategory!=="Deals")return[];let e=this.searchText.toLowerCase();return e?this.deals.filter(t=>t.name.toLowerCase().includes(e)):this.deals}isItemSelected(e){return e.id?this.draftCart.some(t=>t.menuItemId===e.id):!1}getSelectedQuantityForItem(e){return e.id?this.draftCart.filter(t=>t.menuItemId===e.id).reduce((t,r)=>t+r.quantity,0):0}openItemModifier(e){this.selectedMenuItem=e;let t=this.getSelectedQuantityForItem(e);this.modifierQuantity=t>0?t:e.soldByWeight?.5:1,this.modifierNotes="",this.showItemModifier=!0}formatQuantity(e){this.modifierQuantity=Math.round(e*100)/100}addDealToCart(e){if(!e.id)return;let t={menuItemId:e.id,menuItemName:e.name,quantity:1,price:e.dealPrice,totalPrice:e.dealPrice,isDeal:!0,dealId:e.id,dealItems:e.items};this.draftCart.push(t),alert(`\u2705 ${e.name} added to cart`)}closeItemModifier(){this.showItemModifier=!1,this.selectedMenuItem=null,this.modifierNotes=""}addItemToCart(){if(!this.selectedMenuItem)return;let e=this.selectedMenuItem,t={menuItemId:e.id,menuItemName:e.name,quantity:this.modifierQuantity,price:e.price,totalPrice:this.modifierQuantity*e.price};this.modifierNotes&&this.modifierNotes.trim()!==""&&(t.notes=this.modifierNotes.trim());let r=this.draftCart.find(i=>i.menuItemId===e.id&&i.notes===t.notes);r?(r.quantity=this.modifierQuantity,r.totalPrice=r.quantity*r.price):this.draftCart.push(t),this.closeItemModifier()}goToAddItems(){this.currentScreen="menuSelection"}viewCart(){this.draftCart.length>0&&(this.currentScreen="cartReview")}removeDraftItem(e){this.draftCart=this.draftCart.filter(t=>t!==e)}updateDraftQuantity(e,t){e.quantity=Math.max(.1,t),e.totalPrice=e.quantity*e.price}getDraftSubtotal(){return this.draftCart.reduce((e,t)=>e+t.totalPrice,0)}getTotalOrderAmount(){return(this.selectedTable?.activeOrder?.totalAmount||0)+this.getDraftSubtotal()}backToMenu(){this.currentScreen="menuSelection"}startTakeaway(){this.selectedTable={number:"TAKEAWAY",status:"free",activeOrder:null,seatedTime:null,guestCount:0},this.draftCart=[],this.currentScreen="menuSelection"}confirmAndSendToKitchen(){return F(this,null,function*(){if(!(!this.selectedTable||this.draftCart.length===0)){this.isLoading=!0;try{if(this.selectedTable.activeOrder?.id){let t=[...this.selectedTable.activeOrder.items||[],...this.draftCart],r=t.reduce((i,o)=>i+o.totalPrice,0);yield this.db.updateOrder(this.selectedTable.activeOrder.id,{items:t,subtotal:r,totalAmount:r}),alert("\u2705 Add-on items sent to kitchen!")}else{let e=this.selectedTable.number==="TAKEAWAY",t={orderNumber:`ORD-${Date.now()}`,tableNumber:e?void 0:this.selectedTable.number,isTakeaway:e,items:[...this.draftCart],subtotal:this.getDraftSubtotal(),tax:0,discount:0,totalAmount:this.getDraftSubtotal(),status:e?"ready":"pending",createdAt:new Date,cashierId:this.authService.currentUser?.id||"",cashierName:this.authService.currentUser?.name||"Waiter"};yield this.db.createOrder(t),alert("\u2705 Order sent to kitchen!")}this.draftCart=[],yield this.loadAllTables(),this.backToFloorMap()}catch(e){console.error("Failed to send order:",e),alert("\u274C Failed to send order to kitchen")}finally{this.isLoading=!1}}})}requestBill(){return F(this,null,function*(){if(this.selectedTable?.activeOrder?.id&&confirm("Mark this table as ready for bill?"))try{yield this.db.updateOrder(this.selectedTable.activeOrder.id,{status:"ready"}),alert("\u2705 Bill request sent to cashier"),this.backToFloorMap()}catch(e){console.error("Failed to request bill:",e),alert("\u274C Failed to request bill")}})}canEditOrder(){return!!(this.selectedTable?.activeOrder&&this.selectedTable.activeOrder.status==="pending")}startEditOrder(){if(!this.canEditOrder())return;let e=this.selectedTable.activeOrder.items||[];this.editableItems=e.map(t=>Ie({},t)),this.editMode=!0}cancelEditOrder(){this.editMode=!1,this.editableItems=[]}updateEditableQuantity(e,t){e.quantity=Math.max(.1,t),e.totalPrice=e.quantity*e.price}removeEditableItem(e){this.editableItems=this.editableItems.filter(t=>t!==e)}getEditableSubtotal(){return this.editableItems.reduce((e,t)=>e+t.totalPrice,0)}saveOrderEdits(){return F(this,null,function*(){if(this.selectedTable?.activeOrder?.id){this.isLoading=!0;try{let e=this.getEditableSubtotal();yield this.db.updateOrder(this.selectedTable.activeOrder.id,{items:this.editableItems,subtotal:e,totalAmount:e}),yield this.db.logActivity({userId:this.authService.currentUser?.id||"",userName:this.authService.currentUser?.name||"Waiter",action:"Edited Order",details:`Table ${this.selectedTable.number} | Items: ${this.editableItems.length} | Total: ${e.toFixed(0)} PKR`,timestamp:new Date}),alert("\u2705 Order updated successfully"),this.editMode=!1,this.editableItems=[],yield this.loadAllTables();let t=this.tables.find(r=>r.number===this.selectedTable.number);t&&(this.selectedTable=t)}catch(e){console.error("Failed to update order:",e),alert("\u274C Failed to update order")}finally{this.isLoading=!1}}})}cancelOrderWithReason(){return F(this,null,function*(){if(!this.selectedTable?.activeOrder?.id)return;if(this.selectedTable.activeOrder.status!=="pending"){alert("Only pending orders can be cancelled by the waiter.");return}let t=window.prompt("Reason for cancellation (optional):","Customer changed mind");if(confirm("Cancel this order and free the table?")){this.isLoading=!0;try{yield this.db.updateOrder(this.selectedTable.activeOrder.id,{status:"cancelled"}),yield this.db.logActivity({userId:this.authService.currentUser?.id||"",userName:this.authService.currentUser?.name||"Waiter",action:"Cancelled Order",details:`Table ${this.selectedTable.number} | Reason: ${t||"N/A"}`,timestamp:new Date}),alert("\u2705 Order cancelled and table cleared"),this.backToFloorMap()}catch(r){console.error("Failed to cancel order:",r),alert("\u274C Failed to cancel order")}finally{this.isLoading=!1}}})}formatDate(e){return e?(e.toDate?e.toDate():new Date(e)).toLocaleString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}):""}getStatusColor(e){switch(e){case"pending":return"#ff9800";case"cooking":return"#2196f3";case"ready":return"#4caf50";case"completed":return"#9e9e9e";case"cancelled":return"#f44336";default:return"#9e9e9e"}}getStatusText(e){switch(e){case"pending":return"Pending";case"cooking":return"Cooking";case"ready":return"Ready";case"completed":return"Completed";case"cancelled":return"Cancelled";default:return e}}static \u0275fac=function(t){return new(t||n)(Je(gr),Je(Dr))};static \u0275cmp=Jn({type:n,selectors:[["app-waiter"]],decls:7,vars:6,consts:[["noItems",""],[1,"waiter-app"],["class","floor-map-screen",4,"ngIf"],["class","table-detail-screen",4,"ngIf"],["class","menu-selection-screen",4,"ngIf"],["class","cart-review-screen",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],["class","loading-overlay",4,"ngIf"],[1,"floor-map-screen"],[1,"filter-tabs"],[3,"click"],[1,"table-grid"],["class","table-card",3,"free","occupied","bill-requested","click",4,"ngFor","ngForOf"],[1,"fab-button",3,"click"],[1,"table-card",3,"click"],[1,"table-number"],["class","table-status",4,"ngIf"],[1,"table-status"],[1,"timer"],["class","amount",4,"ngIf"],[1,"amount"],[1,"bill-icon"],[1,"table-detail-screen"],[1,"header"],[1,"back-btn",3,"click"],[1,"table-info"],[1,"guest-count"],[1,"sent-items-section"],["class","sent-items",4,"ngIf","ngIfElse"],["class","edit-order-section",4,"ngIf"],[1,"running-total"],[1,"total-amount"],[1,"table-actions"],[1,"btn-primary",3,"click"],[1,"btn-success",3,"click"],["class","btn-secondary",3,"click",4,"ngIf"],["class","btn-danger",3,"click",4,"ngIf"],[1,"sent-items"],["class","order-item sent",4,"ngFor","ngForOf"],[1,"order-item","sent"],[1,"item-info"],[1,"item-name"],["class","item-notes",4,"ngIf"],[1,"item-qty"],[1,"item-price"],[1,"item-status"],[1,"status-badge"],[1,"item-notes"],[1,"empty-state"],[1,"edit-order-section"],[1,"draft-items"],["class","order-item draft",4,"ngFor","ngForOf"],[1,"totals-section"],[1,"total-row"],[1,"edit-actions"],[1,"btn-cancel",3,"click"],[1,"btn-confirm",3,"click","disabled"],[1,"order-item","draft"],[1,"item-controls"],["type","number","step","0.1","min","0.1",1,"qty-input",3,"ngModelChange","ngModel"],[1,"btn-remove",3,"click"],[1,"btn-secondary",3,"click"],[1,"btn-danger",3,"click"],[1,"menu-selection-screen"],[1,"header","sticky"],[1,"search-bar"],["type","text","placeholder","\u{1F50D} Search menu items...",3,"ngModelChange","ngModel"],[1,"category-slider"],[3,"active","click",4,"ngFor","ngForOf"],[1,"item-grid"],["class","menu-item-card",3,"selected","click",4,"ngFor","ngForOf"],["class","menu-item-card deal-card",3,"click",4,"ngFor","ngForOf"],["class","view-cart-bar",3,"click",4,"ngIf"],[1,"menu-item-card",3,"click"],[1,"item-category"],["class","item-unit",4,"ngIf"],[1,"item-unit"],[1,"menu-item-card","deal-card",3,"click"],[1,"deal-badge"],[1,"deal-items-preview"],["class","deal-item-mini",4,"ngFor","ngForOf"],[1,"deal-pricing"],[1,"original-price"],[1,"deal-price"],[1,"savings-label"],[1,"deal-item-mini"],[1,"view-cart-bar",3,"click"],[1,"cart-review-screen"],[1,"order-info-card"],[1,"info-row"],["class","info-row",4,"ngIf"],[1,"new-items-section"],["class","total-row",4,"ngIf"],[1,"total-row","grand-total"],[1,"confirm-section"],["class","deal-badge-small",4,"ngIf"],["class","deal-contents",4,"ngIf"],["class","item-controls",4,"ngIf"],[1,"deal-badge-small"],[1,"deal-contents"],["class","deal-item-line",4,"ngFor","ngForOf"],[1,"deal-item-line"],[1,"qty-display"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"item-price-display"],[4,"ngIf"],[1,"quantity-section"],[1,"quantity-stepper"],["type","number","min","0.1",3,"ngModelChange","ngModel","step"],[1,"notes-section"],["placeholder","e.g., Extra spicy, No onions...","rows","3",3,"ngModelChange","ngModel"],[1,"modal-total"],[1,"modal-footer"],[1,"btn-add",3,"click"],[1,"loading-overlay"],[1,"spinner"]],template:function(t,r){t&1&&(v(0,"div",1),Fe(1,Sie,15,9,"div",2)(2,Lie,30,8,"div",3)(3,$ie,15,6,"div",4)(4,Xie,33,8,"div",5)(5,toe,34,7,"div",6)(6,noe,4,0,"div",7),g()),t&2&&(I(),ie("ngIf",r.currentScreen==="floorMap"),I(),ie("ngIf",r.currentScreen==="tableDetail"),I(),ie("ngIf",r.currentScreen==="menuSelection"),I(),ie("ngIf",r.currentScreen==="cartReview"),I(),ie("ngIf",r.showItemModifier),I(),ie("ngIf",r.isLoading))},dependencies:[ir,Nr,lr,Ei,Ci,ys,Zi,_s,ji],styles:[".waiter-app[_ngcontent-%COMP%]{min-height:100vh;background:#f5f5f5;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,sans-serif}.header[_ngcontent-%COMP%]{background:#fff;padding:16px;box-shadow:0 2px 8px #0000001a;display:flex;align-items:center;gap:16px;position:sticky;top:var(--app-header-height, 56px);z-index:500}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;margin:0;flex:1}.header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;margin:0;flex:1}.back-btn[_ngcontent-%COMP%]{background:#f0f0f0;border:none;border-radius:8px;padding:10px 16px;font-size:16px;font-weight:600;cursor:pointer}.waiter-info[_ngcontent-%COMP%]{font-size:14px;color:#666;font-weight:500}.table-info[_ngcontent-%COMP%]{flex:1}.guest-count[_ngcontent-%COMP%]{font-size:14px;color:#666}.filter-tabs[_ngcontent-%COMP%]{display:flex;gap:8px;padding:16px;overflow-x:auto;background:#fff}.filter-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;border:2px solid #e0e0e0;border-radius:20px;background:#fff;color:#666;font-size:15px;font-weight:600;white-space:nowrap;cursor:pointer;transition:all .2s}.filter-tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#2196f3;color:#fff;border-color:#2196f3}.table-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:16px;padding:16px}.table-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;cursor:pointer;transition:all .2s;box-shadow:0 2px 8px #0000001a;min-height:120px;display:flex;flex-direction:column;justify-content:space-between}.table-card[_ngcontent-%COMP%]:active{transform:scale(.97)}.table-card.free[_ngcontent-%COMP%]{border:3px solid #4caf50;background:#f1f8f4}.table-card.occupied[_ngcontent-%COMP%]{border:3px solid #f44336;background:#fff5f5}.table-card.bill-requested[_ngcontent-%COMP%]{border:3px solid #ff9800;background:#fff8f0;animation:_ngcontent-%COMP%_bill-blink 1.2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_bill-blink{0%{background-color:#fff8f0}50%{background-color:#ffe9c4}to{background-color:#fff8f0}}.table-number[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#333}.table-status[_ngcontent-%COMP%]{margin-top:12px}.timer[_ngcontent-%COMP%]{font-size:14px;color:#666;margin-bottom:4px}.amount[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#2196f3}.bill-icon[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#ff9800}.fab-button[_ngcontent-%COMP%]{position:fixed;bottom:24px;right:24px;background:#2196f3;color:#fff;border:none;border-radius:56px;padding:18px 28px;font-size:16px;font-weight:600;box-shadow:0 4px 12px #2196f366;cursor:pointer;z-index:50}.sent-items-section[_ngcontent-%COMP%]{background:#fff;margin:16px;border-radius:12px;padding:16px}.sent-items-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;margin:0 0 16px;color:#333}.order-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:16px;border-radius:8px;margin-bottom:12px}.order-item.sent[_ngcontent-%COMP%]{background:#f9f9f9;border:2px solid #e0e0e0}.order-item.draft[_ngcontent-%COMP%]{background:#fff;border:2px solid #2196f3}.item-info[_ngcontent-%COMP%]{flex:1}.item-name[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#333}.item-notes[_ngcontent-%COMP%]{font-size:13px;color:#666;margin-top:4px;font-style:italic}.item-qty[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#2196f3;min-width:50px;text-align:center}.item-price[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#4caf50;min-width:80px;text-align:right}.item-status[_ngcontent-%COMP%]{min-width:90px}.status-badge[_ngcontent-%COMP%]{padding:6px 12px;border-radius:12px;font-size:12px;font-weight:600;color:#fff}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#999;font-size:16px}.running-total[_ngcontent-%COMP%]{background:#fff3e0;margin:0 16px 16px;padding:16px;border-radius:12px;display:flex;justify-content:space-between;align-items:center;font-size:18px;font-weight:700}.total-amount[_ngcontent-%COMP%]{color:#ff9800}.table-actions[_ngcontent-%COMP%]{display:flex;gap:12px;padding:0 16px 24px}.table-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;padding:18px;border:none;border-radius:12px;font-size:16px;font-weight:600;cursor:pointer}.btn-primary[_ngcontent-%COMP%]{background:#2196f3;color:#fff}.btn-success[_ngcontent-%COMP%]{background:#4caf50;color:#fff}.btn-secondary[_ngcontent-%COMP%]{background:#f0f0f0;color:#333}.btn-danger[_ngcontent-%COMP%]{background:#f44336;color:#fff}.search-bar[_ngcontent-%COMP%]{padding:16px;background:#fff}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:14px;border:2px solid #e0e0e0;border-radius:12px;font-size:16px}.category-slider[_ngcontent-%COMP%]{display:flex;gap:8px;padding:16px;overflow-x:auto;background:#fff;border-bottom:1px solid #f0f0f0}.category-slider[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;border:2px solid #e0e0e0;border-radius:20px;background:#fff;color:#666;font-size:15px;font-weight:600;white-space:nowrap;cursor:pointer}.category-slider[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#2196f3;color:#fff;border-color:#2196f3}.item-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:12px;padding:16px 16px 100px}.menu-item-card[_ngcontent-%COMP%]{background:#fff;border:2px solid #e0e0e0;border-radius:12px;padding:16px;cursor:pointer;transition:all .2s;min-height:110px}.menu-item-card[_ngcontent-%COMP%]:active{transform:scale(.97);border-color:#2196f3}.menu-item-card.selected[_ngcontent-%COMP%]{background:#e8f5e9;border-color:#4caf50;box-shadow:inset 0 0 0 2px #4caf5033}.menu-item-card[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#333;margin-bottom:6px}.menu-item-card[_ngcontent-%COMP%]   .item-category[_ngcontent-%COMP%]{font-size:12px;color:#999;margin-bottom:8px}.menu-item-card[_ngcontent-%COMP%]   .item-price[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:#4caf50}.item-unit[_ngcontent-%COMP%]{font-size:12px;color:#999;font-weight:400}.menu-item-card.deal-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff3e0,#ffe0b2);border-color:#ff9800;position:relative}.deal-badge[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;background:#ff9800;color:#fff;padding:4px 10px;border-radius:12px;font-size:11px;font-weight:700}.deal-badge-small[_ngcontent-%COMP%]{background:#ff9800;color:#fff;padding:2px 8px;border-radius:8px;font-size:10px;font-weight:700;margin-left:6px}.deal-items-preview[_ngcontent-%COMP%]{margin:8px 0;font-size:11px;color:#666;max-height:50px;overflow:hidden}.deal-item-mini[_ngcontent-%COMP%]{padding:2px 0}.deal-pricing[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-top:8px}.original-price[_ngcontent-%COMP%]{font-size:14px;color:#999;text-decoration:line-through}.deal-price[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#ff9800}.savings-label[_ngcontent-%COMP%]{background:#4caf50;color:#fff;padding:3px 8px;border-radius:8px;font-size:11px;font-weight:700;margin-top:6px;display:inline-block}.deal-contents[_ngcontent-%COMP%]{margin-top:8px;padding:8px;background:#f9f9f9;border-radius:6px;font-size:12px;color:#666}.deal-item-line[_ngcontent-%COMP%]{padding:2px 0}.qty-display[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#666;padding:8px 16px}.view-cart-bar[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;right:0;background:#2196f3;color:#fff;padding:20px 24px;display:flex;justify-content:space-between;align-items:center;font-size:18px;font-weight:700;cursor:pointer;box-shadow:0 -4px 12px #0000001a;z-index:50}.order-info-card[_ngcontent-%COMP%]{background:#fff;margin:16px;padding:16px;border-radius:12px}.info-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:8px 0;font-size:16px}.info-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{color:#666}.info-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{font-weight:600;color:#333}.new-items-section[_ngcontent-%COMP%]{background:#fff;margin:16px;padding:16px;border-radius:12px}.new-items-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;margin:0 0 16px;color:#333}.edit-order-section[_ngcontent-%COMP%]{background:#fff;margin:16px;padding:16px;border-radius:12px;border:2px dashed #2196f3}.edit-order-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;margin:0 0 16px;color:#333}.item-controls[_ngcontent-%COMP%]{display:flex;align-items:center}.qty-input[_ngcontent-%COMP%]{width:70px;padding:8px;border:2px solid #e0e0e0;border-radius:8px;text-align:center;font-size:16px;font-weight:600}.btn-remove[_ngcontent-%COMP%]{background:#f44336;color:#fff;border:none;border-radius:50%;width:32px;height:32px;font-size:18px;cursor:pointer;display:flex;align-items:center;justify-content:center}.totals-section[_ngcontent-%COMP%]{background:#fff;margin:16px;padding:16px;border-radius:12px}.total-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:12px 0;font-size:16px;border-bottom:1px solid #f0f0f0}.total-row.grand-total[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#2196f3;border-bottom:none;border-top:2px solid #e0e0e0;margin-top:8px;padding-top:16px}.confirm-section[_ngcontent-%COMP%]{padding:16px}.btn-confirm[_ngcontent-%COMP%]{width:100%;padding:20px;background:#4caf50;color:#fff;border:none;border-radius:12px;font-size:18px;font-weight:700;cursor:pointer}.btn-confirm[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.edit-actions[_ngcontent-%COMP%]{display:flex;gap:12px;padding:16px}.edit-actions[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]{background:#f0f0f0;color:#666}.edit-actions[_ngcontent-%COMP%]   .btn-confirm[_ngcontent-%COMP%]{background:#2196f3;color:#fff}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000b3;display:flex;align-items:center;justify-content:center;z-index:1000;padding:16px}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:20px;width:100%;max-width:500px;max-height:90vh;overflow-y:auto}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:24px;border-bottom:2px solid #f0f0f0}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:22px;margin:0;color:#333}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:28px;color:#999;cursor:pointer;width:36px;height:36px;display:flex;align-items:center;justify-content:center}.modal-body[_ngcontent-%COMP%]{padding:24px}.item-price-display[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#4caf50;margin-bottom:24px}.quantity-section[_ngcontent-%COMP%], .notes-section[_ngcontent-%COMP%]{margin-bottom:24px}.quantity-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .notes-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:600;color:#666;margin-bottom:8px}.quantity-stepper[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.quantity-stepper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:48px;height:48px;min-width:48px;min-height:48px;border:2px solid #2196f3;background:#fff;color:#2196f3;font-size:24px;font-weight:700;border-radius:12px;cursor:pointer;flex-shrink:0;display:flex;align-items:center;justify-content:center}.quantity-stepper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;min-width:60px;max-width:120px;text-align:center;padding:12px;border:2px solid #e0e0e0;border-radius:12px;font-size:20px;font-weight:600}.notes-section[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:12px;border:2px solid #e0e0e0;border-radius:12px;font-size:15px;font-family:inherit;resize:vertical}.modal-total[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:20px;font-weight:700;padding:16px 0;border-top:2px solid #e0e0e0;color:#2196f3}.modal-footer[_ngcontent-%COMP%]{display:flex;gap:12px;padding:24px;border-top:2px solid #f0f0f0}.modal-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;padding:16px;border:none;border-radius:12px;font-size:16px;font-weight:600;cursor:pointer}.btn-cancel[_ngcontent-%COMP%]{background:#f0f0f0;color:#666}.btn-add[_ngcontent-%COMP%]{background:#2196f3;color:#fff}.loading-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000b3;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:300;color:#fff;font-size:18px}.spinner[_ngcontent-%COMP%]{width:48px;height:48px;border:4px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:16px}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}@media (min-width: 768px){.table-grid[_ngcontent-%COMP%], .item-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(180px,1fr))}}@media (min-width: 1024px){.waiter-app[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}}"]})};function roe(n,e){if(n&1&&(v(0,"div",16),w(1),g()),n&2){let t=Z().$implicit;I(),Ve(t.description)}}function ioe(n,e){if(n&1&&(v(0,"div",17),w(1),g()),n&2){let t=e.$implicit;I(),Ro(" ",t.quantity,"x ",t.menuItemName," ")}}function ooe(n,e){if(n&1){let t=at();v(0,"tr")(1,"td")(2,"strong"),w(3),g(),Fe(4,roe,2,1,"div",7),g(),v(5,"td")(6,"div",8),Fe(7,ioe,2,2,"div",9),g()(),v(8,"td"),w(9),g(),v(10,"td")(11,"strong",10),w(12),g()(),v(13,"td")(14,"span",11),w(15),g()(),v(16,"td")(17,"span",12),w(18),g()(),v(19,"td")(20,"button",13),me("click",function(){let i=le(t).$implicit,o=Z();return ue(o.openEditModal(i))}),w(21,"Edit"),g(),v(22,"button",14),me("click",function(){let i=le(t).$implicit,o=Z();return ue(o.toggleActive(i))}),w(23),g(),v(24,"button",15),me("click",function(){let i=le(t).$implicit,o=Z();return ue(o.deleteDeal(i))}),w(25,"Delete"),g()()()}if(n&2){let t=e.$implicit;I(3),Ve(t.name),I(),ie("ngIf",t.description),I(3),ie("ngForOf",t.items),I(2),Oe("",t.originalPrice.toFixed(0)," PKR"),I(3),Oe("",t.dealPrice.toFixed(0)," PKR"),I(3),Ro(" Save ",t.savings.toFixed(0)," PKR (",t.savingsPercent.toFixed(0),"%) "),I(2),kt("active",t.isActive)("inactive",!t.isActive),I(),Oe(" ",t.isActive?"Active":"Inactive"," "),I(5),Oe(" ",t.isActive?"Deactivate":"Activate"," ")}}function soe(n,e){n&1&&(v(0,"tr")(1,"td",18),w(2,"No deals found. Create your first deal!"),g()())}function aoe(n,e){if(n&1&&(v(0,"option",33),w(1),g()),n&2){let t=e.$implicit;ie("ngValue",t),I(),Ve(t)}}function coe(n,e){if(n&1&&(v(0,"option",33),w(1),g()),n&2){let t=e.$implicit;ie("ngValue",t.id),I(),Ro(" ",t.name," (",t.price.toFixed(0)," PKR) ")}}function loe(n,e){if(n&1){let t=at();v(0,"tr")(1,"td"),w(2),g(),v(3,"td")(4,"input",49),Ye("ngModelChange",function(i){let o=le(t).$implicit;return Qe(o.quantity,i)||(o.quantity=i),ue(i)}),me("ngModelChange",function(){let i=le(t).$implicit,o=Z(3);return ue(o.updateItemQuantity(i,i.quantity))}),g()(),v(5,"td"),w(6),g(),v(7,"td"),w(8),g(),v(9,"td")(10,"button",15),me("click",function(){let i=le(t).$implicit,o=Z(3);return ue(o.removeItemFromDeal(i))}),w(11,"Remove"),g()()()}if(n&2){let t=e.$implicit;I(2),Ve(t.menuItemName),I(2),Ke("ngModel",t.quantity),I(2),Oe("",t.standardPrice.toFixed(0)," PKR"),I(2),Oe("",(t.quantity*t.standardPrice).toFixed(0)," PKR")}}function uoe(n,e){if(n&1&&(v(0,"div",47)(1,"h4"),w(2,"Items in Deal:"),g(),v(3,"table",48)(4,"thead")(5,"tr")(6,"th"),w(7,"Item"),g(),v(8,"th"),w(9,"Quantity"),g(),v(10,"th"),w(11,"Unit Price"),g(),v(12,"th"),w(13,"Subtotal"),g(),v(14,"th"),w(15,"Action"),g()()(),v(16,"tbody"),Fe(17,loe,12,4,"tr",4),g()()()),n&2){let t=Z(2);I(17),ie("ngForOf",t.currentDeal.items)}}function doe(n,e){if(n&1&&(v(0,"div",50)(1,"span",40),w(2,"Customer Saves:"),g(),v(3,"span",51),w(4),g()()),n&2){let t=Z(2);I(4),Ro(" ",t.currentDeal.savings.toFixed(0)," PKR (",t.currentDeal.savingsPercent.toFixed(1),"%) ")}}function hoe(n,e){if(n&1){let t=at();v(0,"div",19)(1,"div",20)(2,"div",21)(3,"h2"),w(4),g(),v(5,"button",22),me("click",function(){le(t);let i=Z();return ue(i.showDealModal=!1)}),w(6,"\xD7"),g()(),v(7,"div",23)(8,"div",24)(9,"div",25)(10,"h3"),w(11,"Deal Information"),g(),v(12,"div",26)(13,"label"),w(14,"Deal Name *"),g(),v(15,"input",27),Ye("ngModelChange",function(i){le(t);let o=Z();return Qe(o.currentDeal.name,i)||(o.currentDeal.name=i),ue(i)}),g()(),v(16,"div",26)(17,"label"),w(18,"Description (Optional)"),g(),v(19,"textarea",28),Ye("ngModelChange",function(i){le(t);let o=Z();return Qe(o.currentDeal.description,i)||(o.currentDeal.description=i),ue(i)}),g()()(),v(20,"div",25)(21,"h3"),w(22,"Add Items to Deal"),g(),v(23,"div",29)(24,"div",26)(25,"label"),w(26,"Filter by Category"),g(),v(27,"select",30),Ye("ngModelChange",function(i){le(t);let o=Z();return Qe(o.selectedItemCategory,i)||(o.selectedItemCategory=i),ue(i)}),Fe(28,aoe,2,2,"option",31),g()(),v(29,"div",32)(30,"div",26)(31,"label"),w(32,"Select Item"),g(),v(33,"select",30),Ye("ngModelChange",function(i){le(t);let o=Z();return Qe(o.selectedMenuItemId,i)||(o.selectedMenuItemId=i),ue(i)}),v(34,"option",33),w(35,"Choose an item"),g(),Fe(36,coe,2,3,"option",31),g()(),v(37,"div",26)(38,"label"),w(39,"Quantity"),g(),v(40,"input",34),Ye("ngModelChange",function(i){le(t);let o=Z();return Qe(o.itemQuantity,i)||(o.itemQuantity=i),ue(i)}),g()(),v(41,"div",26)(42,"label"),w(43,"\xA0"),g(),v(44,"button",35),me("click",function(){le(t);let i=Z();return ue(i.addItemToDeal())}),w(45,"+ Add Item"),g()()()(),Fe(46,uoe,18,1,"div",36),g(),v(47,"div",37)(48,"h3"),w(49,"Pricing"),g(),v(50,"div",38)(51,"div",39)(52,"span",40),w(53,"Total Original Price:"),g(),v(54,"span",41),w(55),g()(),v(56,"div",26)(57,"label"),w(58,"Set Deal Price * (Promotional Price)"),g(),v(59,"input",42),Ye("ngModelChange",function(i){le(t);let o=Z();return Qe(o.currentDeal.dealPrice,i)||(o.currentDeal.dealPrice=i),ue(i)}),me("ngModelChange",function(){le(t);let i=Z();return ue(i.onDealPriceChange())}),g()(),Fe(60,doe,5,2,"div",43),g(),v(61,"div",26)(62,"label",44)(63,"input",45),Ye("ngModelChange",function(i){le(t);let o=Z();return Qe(o.currentDeal.isActive,i)||(o.currentDeal.isActive=i),ue(i)}),g(),w(64," Active (visible to waiters and cashiers) "),g()()()()(),v(65,"div",46)(66,"button",35),me("click",function(){le(t);let i=Z();return ue(i.showDealModal=!1)}),w(67,"Cancel"),g(),v(68,"button",2),me("click",function(){le(t);let i=Z();return ue(i.saveDeal())}),w(69),g()()()()}if(n&2){let t=Z();I(4),Ve(t.isEditMode?"Edit Deal":"Create New Deal"),I(11),Ke("ngModel",t.currentDeal.name),I(4),Ke("ngModel",t.currentDeal.description),I(8),Ke("ngModel",t.selectedItemCategory),I(),ie("ngForOf",t.itemCategories),I(5),Ke("ngModel",t.selectedMenuItemId),I(),ie("ngValue",""),I(2),ie("ngForOf",t.filteredMenuItems),I(4),Ke("ngModel",t.itemQuantity),I(6),ie("ngIf",t.currentDeal.items.length>0),I(9),Oe("",t.currentDeal.originalPrice.toFixed(0)," PKR"),I(4),Ke("ngModel",t.currentDeal.dealPrice),I(),ie("ngIf",t.currentDeal.dealPrice>0),I(3),Ke("ngModel",t.currentDeal.isActive),I(6),Oe(" ",t.isEditMode?"Update Deal":"Create Deal"," ")}}var yw=class n{constructor(e,t){this.db=e;this.authService=t}deals=[];menuItems=[];showDealModal=!1;isEditMode=!1;currentDeal=this.getEmptyDeal();selectedMenuItemId="";itemQuantity=1;selectedItemCategory="All";itemCategories=["All","BBQ","Curries","Rice","Bread","Salads","Drinks","Desserts"];ngOnInit(){return F(this,null,function*(){yield this.loadDeals(),yield this.loadMenuItems()})}getEmptyDeal(){return{name:"",description:"",items:[],originalPrice:0,dealPrice:0,savings:0,savingsPercent:0,isActive:!0}}loadDeals(){return F(this,null,function*(){try{this.deals=yield this.db.getDeals()}catch(e){console.error("Error loading deals:",e)}})}loadMenuItems(){return F(this,null,function*(){try{this.menuItems=yield this.db.getActiveMenuItems()}catch(e){console.error("Error loading menu items:",e)}})}get filteredMenuItems(){return this.selectedItemCategory==="All"?this.menuItems:this.menuItems.filter(e=>e.category===this.selectedItemCategory)}openAddModal(){this.currentDeal=this.getEmptyDeal(),this.isEditMode=!1,this.showDealModal=!0}openEditModal(e){this.currentDeal=ft(Ie({},e),{items:[...e.items]}),this.isEditMode=!0,this.showDealModal=!0}addItemToDeal(){if(!this.selectedMenuItemId){alert("Please select a menu item");return}let e=this.menuItems.find(r=>r.id===this.selectedMenuItemId);if(!e)return;let t=this.currentDeal.items.find(r=>r.menuItemId===this.selectedMenuItemId);t?t.quantity+=this.itemQuantity:this.currentDeal.items.push({menuItemId:e.id,menuItemName:e.name,quantity:this.itemQuantity,standardPrice:e.price}),this.calculateDealPrices(),this.selectedMenuItemId="",this.itemQuantity=1}removeItemFromDeal(e){this.currentDeal.items=this.currentDeal.items.filter(t=>t!==e),this.calculateDealPrices()}updateItemQuantity(e,t){e.quantity=Math.max(1,t),this.calculateDealPrices()}calculateDealPrices(){this.currentDeal.originalPrice=this.currentDeal.items.reduce((e,t)=>e+t.standardPrice*t.quantity,0),this.currentDeal.dealPrice>0?(this.currentDeal.savings=this.currentDeal.originalPrice-this.currentDeal.dealPrice,this.currentDeal.savingsPercent=this.currentDeal.originalPrice>0?this.currentDeal.savings/this.currentDeal.originalPrice*100:0):(this.currentDeal.savings=0,this.currentDeal.savingsPercent=0)}onDealPriceChange(){this.calculateDealPrices()}saveDeal(){return F(this,null,function*(){if(!this.currentDeal.name||this.currentDeal.items.length===0){alert("Please enter deal name and add at least one item");return}if(this.currentDeal.dealPrice<=0){alert("Please set a valid deal price");return}try{if(this.isEditMode&&this.currentDeal.id){let e={name:this.currentDeal.name,description:this.currentDeal.description,items:this.currentDeal.items,originalPrice:this.currentDeal.originalPrice,dealPrice:this.currentDeal.dealPrice,savings:this.currentDeal.savings,savingsPercent:this.currentDeal.savingsPercent,isActive:this.currentDeal.isActive,choiceGroups:this.currentDeal.choiceGroups||[]};this.currentDeal.startDate&&(e.startDate=this.currentDeal.startDate),this.currentDeal.endDate&&(e.endDate=this.currentDeal.endDate),yield this.db.updateDeal(this.currentDeal.id,e),yield this.db.logActivity({userId:this.authService.currentUser?.id||"",userName:this.authService.currentUser?.name||"Admin",action:"Edited Deal",details:`${this.currentDeal.name} - ${this.currentDeal.dealPrice} PKR`,timestamp:new Date}),alert("Deal updated successfully")}else yield this.db.createDeal(this.currentDeal),yield this.db.logActivity({userId:this.authService.currentUser?.id||"",userName:this.authService.currentUser?.name||"Admin",action:"Created Deal",details:`${this.currentDeal.name} - ${this.currentDeal.dealPrice} PKR`,timestamp:new Date}),alert("Deal created successfully");yield this.loadDeals(),this.showDealModal=!1}catch(e){console.error("Error saving deal:",e),alert("Error saving deal: "+(e.message||"Unknown error"))}})}toggleActive(e){return F(this,null,function*(){if(e.id)try{yield this.db.updateDeal(e.id,{isActive:!e.isActive}),yield this.loadDeals()}catch(t){console.error("Error updating deal:",t)}})}deleteDeal(e){return F(this,null,function*(){if(e.id&&confirm(`Delete deal "${e.name}"?`))try{yield this.db.deleteDeal(e.id),alert("Deal deleted successfully"),yield this.loadDeals()}catch(t){console.error("Error deleting deal:",t),alert("Error deleting deal")}})}static \u0275fac=function(t){return new(t||n)(Je(gr),Je(Dr))};static \u0275cmp=Jn({type:n,selectors:[["app-deal-management"]],decls:27,vars:3,consts:[[1,"container"],[1,"header"],[1,"btn","btn-primary",3,"click"],[1,"data-table"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","modal",4,"ngIf"],["class","deal-desc",4,"ngIf"],[1,"deal-items"],["class","deal-item-line",4,"ngFor","ngForOf"],[1,"deal-price"],[1,"savings-badge"],[1,"status-badge"],[1,"btn","btn-sm","btn-info",3,"click"],[1,"btn","btn-sm",3,"click"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"deal-desc"],[1,"deal-item-line"],["colspan","7",1,"no-data"],[1,"modal"],[1,"modal-content","modal-large"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"deal-form"],[1,"form-section"],[1,"form-group"],["type","text","placeholder","e.g., Family Feast",3,"ngModelChange","ngModel"],["placeholder","Brief description of the deal","rows","2",3,"ngModelChange","ngModel"],[1,"item-picker"],[3,"ngModelChange","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"form-row"],[3,"ngValue"],["type","number","min","1","step","1",3,"ngModelChange","ngModel"],[1,"btn","btn-secondary",3,"click"],["class","deal-items-list",4,"ngIf"],[1,"form-section","pricing-section"],[1,"pricing-display"],[1,"price-row"],[1,"price-label"],[1,"price-value","original"],["type","number","min","0","step","10","placeholder","Enter deal price",3,"ngModelChange","ngModel"],["class","price-row savings",4,"ngIf"],[1,"checkbox-label"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"deal-items-list"],[1,"items-table"],["type","number","min","1",1,"qty-input",3,"ngModelChange","ngModel"],[1,"price-row","savings"],[1,"price-value","savings-amt"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"div",1)(2,"h1"),w(3,"Deals & Combos Management"),g(),v(4,"button",2),me("click",function(){return r.openAddModal()}),w(5,"+ Create Deal"),g()(),v(6,"table",3)(7,"thead")(8,"tr")(9,"th"),w(10,"Deal Name"),g(),v(11,"th"),w(12,"Items"),g(),v(13,"th"),w(14,"Original Price"),g(),v(15,"th"),w(16,"Deal Price"),g(),v(17,"th"),w(18,"Savings"),g(),v(19,"th"),w(20,"Status"),g(),v(21,"th"),w(22,"Actions"),g()()(),v(23,"tbody"),Fe(24,ooe,26,13,"tr",4)(25,soe,3,0,"tr",5),g()(),Fe(26,hoe,70,15,"div",6),g()),t&2&&(I(24),ie("ngForOf",r.deals),I(),ie("ngIf",r.deals.length===0),I(),ie("ngIf",r.showDealModal))},dependencies:[ir,Nr,lr,Ei,pc,mc,Ci,ys,ml,Ks,Zi,_s,ji],styles:[".container[_ngcontent-%COMP%]{padding:20px;max-width:1600px;margin:0 auto}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px;color:#333;margin:0}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background:#fff;border-radius:10px;box-shadow:0 2px 8px #0000001a;overflow:hidden}.data-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#f5f5f5}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:15px;text-align:left;font-weight:600;color:#333;border-bottom:2px solid #ddd}.data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:15px;border-bottom:1px solid #eee}.deal-desc[_ngcontent-%COMP%]{font-size:12px;color:#666;margin-top:4px}.deal-items[_ngcontent-%COMP%]{font-size:13px}.deal-item-line[_ngcontent-%COMP%]{padding:2px 0;color:#555}.deal-price[_ngcontent-%COMP%]{color:#4caf50;font-size:16px}.savings-badge[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32;padding:4px 10px;border-radius:12px;font-size:12px;font-weight:500;white-space:nowrap}.status-badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:12px;font-size:12px;font-weight:500}.status-badge.active[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.status-badge.inactive[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:5px;font-size:14px;font-weight:500;cursor:pointer;transition:all .3s}.btn-primary[_ngcontent-%COMP%]{background:#667eea;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:#5568d3}.btn-secondary[_ngcontent-%COMP%]{background:#e0e0e0;color:#333}.btn-secondary[_ngcontent-%COMP%]:hover{background:#d0d0d0}.btn-sm[_ngcontent-%COMP%]{padding:6px 12px;font-size:12px;margin-right:5px}.btn-info[_ngcontent-%COMP%]{background:#667eea;color:#fff}.btn-info[_ngcontent-%COMP%]:hover{background:#5568d3}.btn-danger[_ngcontent-%COMP%]{background:#f44336;color:#fff}.btn-danger[_ngcontent-%COMP%]:hover{background:#d32f2f}.no-data[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#999}.modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:10px;width:90%;max-width:600px;max-height:90vh;display:flex;flex-direction:column;box-shadow:0 4px 20px #0003}.modal-large[_ngcontent-%COMP%]{max-width:900px}.modal-header[_ngcontent-%COMP%]{padding:20px;border-bottom:1px solid #eee;display:flex;justify-content:space-between;align-items:center}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:22px;color:#333}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:28px;color:#999;cursor:pointer;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center}.close-btn[_ngcontent-%COMP%]:hover{color:#333}.modal-body[_ngcontent-%COMP%]{padding:20px;overflow-y:auto;flex:1}.modal-footer[_ngcontent-%COMP%]{padding:20px;border-top:1px solid #eee;display:flex;justify-content:flex-end;gap:10px}.deal-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:25px}.form-section[_ngcontent-%COMP%]{background:#f9f9f9;padding:20px;border-radius:8px}.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 15px;font-size:18px;color:#333}.form-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:15px 0 10px;font-size:15px;color:#555}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]:last-child{margin-bottom:0}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:13px;font-weight:500;color:#666;margin-bottom:5px}.form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ddd;border-radius:5px;font-size:14px;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr auto;gap:10px;align-items:end}.form-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:0}.form-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:last-child   button[_ngcontent-%COMP%]{margin-top:0;height:42px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;font-size:14px;color:#333}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto;cursor:pointer}.items-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background:#fff;border-radius:5px;overflow:hidden;margin-top:10px}.items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f5f5f5;padding:10px;text-align:left;font-size:12px;font-weight:600;color:#666}.items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;border-bottom:1px solid #eee;font-size:13px}.qty-input[_ngcontent-%COMP%]{width:70px;padding:5px;border:1px solid #ddd;border-radius:3px;text-align:center}.pricing-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e3f2fd,#f3e5f5)}.pricing-display[_ngcontent-%COMP%]{background:#fff;padding:15px;border-radius:5px;margin-bottom:15px}.price-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 0}.price-row.savings[_ngcontent-%COMP%]{border-top:2px solid #4caf50;margin-top:10px;padding-top:15px}.price-label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#555}.price-value[_ngcontent-%COMP%]{font-size:20px;font-weight:700}.price-value.original[_ngcontent-%COMP%]{color:#999;text-decoration:line-through}.price-value.savings-amt[_ngcontent-%COMP%]{color:#4caf50}.deal-items-list[_ngcontent-%COMP%]{margin-top:15px}"]})};function foe(n,e){if(n&1){let t=at();v(0,"tr")(1,"td",12),w(2),g(),v(3,"td"),w(4),g(),v(5,"td"),w(6),g(),v(7,"td",13),w(8),g(),v(9,"td")(10,"span",14),w(11),g()(),v(12,"td",15)(13,"button",16),me("click",function(){let i=le(t).$implicit,o=Z();return ue(o.viewLedger(i))}),w(14,"\u{1F4CB}"),g(),v(15,"button",17),me("click",function(){let i=le(t).$implicit,o=Z();return ue(o.collectPayment(i))}),w(16,"\u{1F4B0}"),g(),v(17,"button",18),me("click",function(){let i=le(t).$implicit,o=Z();return ue(o.openEditForm(i))}),w(18,"\u270F\uFE0F"),g(),v(19,"button",19),me("click",function(){let i=le(t).$implicit,o=Z();return ue(o.toggleCreditStatus(i))}),w(20),g(),v(21,"button",20),me("click",function(){let i=le(t).$implicit,o=Z();return ue(o.deleteCustomer(i))}),w(22," \u{1F5D1}\uFE0F "),g()()()}if(n&2){let t=e.$implicit;I(2),Ve(t.name),I(2),Ve(t.phone),I(2),Ve(t.companyName||"-"),I(),kt("debt",t.currentBalance>0),I(),Oe(" ",t.currentBalance.toFixed(0)," PKR "),I(2),kt("active",t.isCreditEnabled)("inactive",!t.isCreditEnabled),I(),Oe(" ",t.isCreditEnabled?"Active":"Disabled"," "),I(4),ie("disabled",t.currentBalance<=0),I(4),ie("title",t.isCreditEnabled?"Disable Credit":"Enable Credit"),I(),Oe(" ",t.isCreditEnabled?"\u{1F512}":"\u{1F513}"," "),I(),ie("disabled",t.currentBalance>0)}}function poe(n,e){n&1&&(v(0,"tr")(1,"td",21),w(2,"No customers found"),g()())}function moe(n,e){if(n&1&&(v(0,"tfoot")(1,"tr",22)(2,"td",23)(3,"strong"),w(4,"Total Amount Due:"),g()(),v(5,"td",24)(6,"strong"),w(7),g()(),Fi(8,"td",25),g()()),n&2){let t=Z();I(7),Oe("",t.getTotalAmountDue().toFixed(0)," PKR")}}function goe(n,e){if(n&1){let t=at();v(0,"div",26)(1,"div",27)(2,"div",28)(3,"h2"),w(4),g(),v(5,"button",29),me("click",function(){le(t);let i=Z();return ue(i.closeForm())}),w(6,"\xD7"),g()(),v(7,"div",30)(8,"div",31)(9,"label"),w(10,"Customer Name *"),g(),v(11,"input",32),Ye("ngModelChange",function(i){le(t);let o=Z();return Qe(o.currentCustomer.name,i)||(o.currentCustomer.name=i),ue(i)}),g()(),v(12,"div",31)(13,"label"),w(14,"Phone Number *"),g(),v(15,"input",33),Ye("ngModelChange",function(i){le(t);let o=Z();return Qe(o.currentCustomer.phone,i)||(o.currentCustomer.phone=i),ue(i)}),g()(),v(16,"div",31)(17,"label"),w(18,"Company Name"),g(),v(19,"input",34),Ye("ngModelChange",function(i){le(t);let o=Z();return Qe(o.currentCustomer.companyName,i)||(o.currentCustomer.companyName=i),ue(i)}),g()(),v(20,"div",31)(21,"label"),w(22,"Address"),g(),v(23,"textarea",35),Ye("ngModelChange",function(i){le(t);let o=Z();return Qe(o.currentCustomer.address,i)||(o.currentCustomer.address=i),ue(i)}),g()(),v(24,"div",31)(25,"label",36)(26,"input",37),Ye("ngModelChange",function(i){le(t);let o=Z();return Qe(o.currentCustomer.isCreditEnabled,i)||(o.currentCustomer.isCreditEnabled=i),ue(i)}),g(),w(27," Enable Credit for this customer "),g()()(),v(28,"div",38)(29,"button",39),me("click",function(){le(t);let i=Z();return ue(i.closeForm())}),w(30,"Cancel"),g(),v(31,"button",2),me("click",function(){le(t);let i=Z();return ue(i.saveCustomer())}),w(32),g()()()()}if(n&2){let t=Z();I(4),Ve(t.isEditMode?"Edit Customer":"Add New Customer"),I(7),Ke("ngModel",t.currentCustomer.name),I(4),Ke("ngModel",t.currentCustomer.phone),I(4),Ke("ngModel",t.currentCustomer.companyName),I(4),Ke("ngModel",t.currentCustomer.address),I(3),Ke("ngModel",t.currentCustomer.isCreditEnabled),I(3),ie("disabled",t.isLoading),I(2),ie("disabled",t.isLoading),I(),Oe(" ",t.isEditMode?"Update":"Add"," Customer ")}}function voe(n,e){n&1&&(v(0,"div",40),Fi(1,"div",41),g())}function yoe(n,e){if(n&1&&(v(0,"div",44)(1,"span",45),w(2,"Company:"),g(),v(3,"span",46),w(4),g()()),n&2){let t=Z(2);I(4),Ve(t.selectedCustomer==null?null:t.selectedCustomer.companyName)}}function _oe(n,e){n&1&&(v(0,"div",53),w(1,"Loading ledger entries..."),g())}function boe(n,e){n&1&&(v(0,"div",54),w(1," No transaction history found "),g())}function woe(n,e){if(n&1&&(v(0,"span"),w(1),g()),n&2){let t=Z().$implicit;I(),Oe("+",t.debit.toFixed(0))}}function Coe(n,e){if(n&1&&(v(0,"span"),w(1),g()),n&2){let t=Z().$implicit;I(),Oe("-",t.credit.toFixed(0))}}function Eoe(n,e){if(n&1){let t=at();v(0,"button",64),me("click",function(){le(t);let i=Z().$implicit,o=Z(3);return ue(o.viewOrderDetail(i.referenceNumber))}),w(1," View Details "),g()}}function Ioe(n,e){if(n&1&&(v(0,"tr")(1,"td",59),w(2),g(),v(3,"td")(4,"span",60),w(5),g()(),v(6,"td",61),w(7),g(),v(8,"td",62),w(9),g(),v(10,"td",57),Fe(11,woe,2,1,"span",9)(12,Coe,2,1,"span",9),g(),v(13,"td",58),Fe(14,Eoe,2,0,"button",63),g()()),n&2){let t=e.$implicit,r=Z(3);I(2),Ve(r.formatDate(t.date)),I(2),kt("sale",t.referenceType==="sale")("payment",t.referenceType==="payment"),I(),Oe(" ",t.referenceType==="sale"?"\u{1F6D2} Sale":"\u{1F4B0} Payment"," "),I(2),Oe(" ",t.referenceNumber," "),I(2),Ve(t.notes||"-"),I(),kt("debit",t.referenceType==="sale")("credit",t.referenceType==="payment"),I(),ie("ngIf",t.referenceType==="sale"),I(),ie("ngIf",t.referenceType==="payment"),I(2),ie("ngIf",t.referenceType==="sale")}}function xoe(n,e){if(n&1&&(v(0,"div",55)(1,"table",56)(2,"thead")(3,"tr")(4,"th"),w(5,"Date"),g(),v(6,"th"),w(7,"Type"),g(),v(8,"th"),w(9,"Reference"),g(),v(10,"th"),w(11,"Notes"),g(),v(12,"th",57),w(13,"Amount"),g(),v(14,"th",58),w(15,"Actions"),g()()(),v(16,"tbody"),Fe(17,Ioe,15,15,"tr",8),g()()()),n&2){let t=Z(2);I(17),ie("ngForOf",t.ledgerEntries)}}function Soe(n,e){if(n&1){let t=at();v(0,"div",26)(1,"div",42)(2,"div",28)(3,"h2"),w(4),g(),v(5,"button",29),me("click",function(){le(t);let i=Z();return ue(i.closeLedger())}),w(6,"\xD7"),g()(),v(7,"div",43)(8,"div",44)(9,"span",45),w(10,"Phone:"),g(),v(11,"span",46),w(12),g()(),Fe(13,yoe,5,1,"div",47),v(14,"div",44)(15,"span",45),w(16,"Amount Due:"),g(),v(17,"span",48),w(18),g()()(),v(19,"div",30),Fe(20,_oe,2,0,"div",49)(21,boe,2,0,"div",50)(22,xoe,18,1,"div",51),g(),v(23,"div",38)(24,"button",2),me("click",function(){le(t);let i=Z();return ue(i.collectPaymentFromLedger())}),w(25," \u{1F4B0} Collect Payment "),g(),v(26,"button",52),me("click",function(){le(t);let i=Z();return ue(i.closeLedger())}),w(27,"Close"),g()()()()}if(n&2){let t=Z();I(4),Oe("",t.selectedCustomer==null?null:t.selectedCustomer.name," - Ledger"),I(8),Ve(t.selectedCustomer==null?null:t.selectedCustomer.phone),I(),ie("ngIf",t.selectedCustomer==null?null:t.selectedCustomer.companyName),I(4),kt("debt",t.selectedCustomer&&t.selectedCustomer.currentBalance>0),I(),Oe(" ",t.selectedCustomer?t.selectedCustomer.currentBalance.toFixed(0):"0"," PKR "),I(2),ie("ngIf",t.isLoadingLedger),I(),ie("ngIf",!t.isLoadingLedger&&t.ledgerEntries.length===0),I(),ie("ngIf",!t.isLoadingLedger&&t.ledgerEntries.length>0),I(2),ie("disabled",!t.selectedCustomer||t.selectedCustomer.currentBalance<=0)}}function Doe(n,e){if(n&1){let t=at();v(0,"div",31)(1,"label"),w(2,"Check Number *"),g(),v(3,"input",76),Ye("ngModelChange",function(i){le(t);let o=Z(2);return Qe(o.checkNumber,i)||(o.checkNumber=i),ue(i)}),g()()}if(n&2){let t=Z(2);I(3),Ke("ngModel",t.checkNumber)}}function Toe(n,e){if(n&1){let t=at();v(0,"div",31)(1,"label"),w(2,"Transaction ID *"),g(),v(3,"input",77),Ye("ngModelChange",function(i){le(t);let o=Z(2);return Qe(o.transactionId,i)||(o.transactionId=i),ue(i)}),g()()}if(n&2){let t=Z(2);I(3),Ke("ngModel",t.transactionId)}}function Aoe(n,e){if(n&1&&(v(0,"div",78)(1,"div",79)(2,"span"),w(3,"Payment Amount:"),g(),v(4,"span",80),w(5),g()(),v(6,"div",79)(7,"span"),w(8,"Remaining Balance:"),g(),v(9,"span"),w(10),g()()()),n&2){let t=Z(2);I(5),Oe("-",t.paymentAmount.toFixed(0)," PKR"),I(4),kt("debt",((t.selectedCustomer==null?null:t.selectedCustomer.currentBalance)||0)-t.paymentAmount>0)("cleared",((t.selectedCustomer==null?null:t.selectedCustomer.currentBalance)||0)-t.paymentAmount<=0),I(),Oe(" ",(((t.selectedCustomer==null?null:t.selectedCustomer.currentBalance)||0)-t.paymentAmount).toFixed(0)," PKR ")}}function Moe(n,e){if(n&1){let t=at();v(0,"div",26)(1,"div",27)(2,"div",28)(3,"h2"),w(4),g(),v(5,"button",29),me("click",function(){le(t);let i=Z();return ue(i.closePaymentModal())}),w(6,"\xD7"),g()(),v(7,"div",65)(8,"div",66)(9,"span",45),w(10,"Amount Due:"),g(),v(11,"span",67),w(12),g()()(),v(13,"div",30)(14,"div",31)(15,"label"),w(16,"Payment Amount (PKR) *"),g(),v(17,"input",68),Ye("ngModelChange",function(i){le(t);let o=Z();return Qe(o.paymentAmount,i)||(o.paymentAmount=i),ue(i)}),g()(),v(18,"div",31)(19,"label"),w(20,"Payment Mode *"),g(),v(21,"div",69)(22,"label",70)(23,"input",71),Ye("ngModelChange",function(i){le(t);let o=Z();return Qe(o.paymentMode,i)||(o.paymentMode=i),ue(i)}),g(),w(24," \u{1F4B5} Cash "),g(),v(25,"label",70)(26,"input",72),Ye("ngModelChange",function(i){le(t);let o=Z();return Qe(o.paymentMode,i)||(o.paymentMode=i),ue(i)}),g(),w(27," \u{1F3E6} Bank Transfer "),g(),v(28,"label",70)(29,"input",73),Ye("ngModelChange",function(i){le(t);let o=Z();return Qe(o.paymentMode,i)||(o.paymentMode=i),ue(i)}),g(),w(30," \u{1F4DD} Check "),g()()(),Fe(31,Doe,4,1,"div",74)(32,Toe,4,1,"div",74)(33,Aoe,11,6,"div",75),g(),v(34,"div",38)(35,"button",39),me("click",function(){le(t);let i=Z();return ue(i.closePaymentModal())}),w(36,"Cancel"),g(),v(37,"button",2),me("click",function(){le(t);let i=Z();return ue(i.recordPayment())}),w(38," Record Payment "),g()()()()}if(n&2){let t=Z();I(4),Oe("Collect Payment - ",t.selectedCustomer==null?null:t.selectedCustomer.name),I(8),Oe("",t.selectedCustomer?t.selectedCustomer.currentBalance.toFixed(0):"0"," PKR"),I(5),Ke("ngModel",t.paymentAmount),ie("max",(t.selectedCustomer==null?null:t.selectedCustomer.currentBalance)||0),I(6),Ke("ngModel",t.paymentMode),I(3),Ke("ngModel",t.paymentMode),I(3),Ke("ngModel",t.paymentMode),I(2),ie("ngIf",t.paymentMode==="check"),I(),ie("ngIf",t.paymentMode==="bank_transfer"),I(),ie("ngIf",t.paymentAmount>0),I(2),ie("disabled",t.isLoading),I(2),ie("disabled",t.isLoading||t.paymentAmount<=0)}}var _w=class n{constructor(e,t){this.db=e;this.authService=t}customers=[];filteredCustomers=[];searchText="";isLoading=!1;showForm=!1;isEditMode=!1;currentCustomer=this.getEmptyCustomer();showLedger=!1;isLoadingLedger=!1;selectedCustomer=null;ledgerEntries=[];showPaymentModal=!1;paymentAmount=0;paymentMode="cash";checkNumber="";transactionId="";ngOnInit(){this.loadCustomers()}loadCustomers(){return F(this,null,function*(){this.isLoading=!0;try{this.customers=yield this.db.getCreditCustomers(),this.filteredCustomers=[...this.customers]}catch(e){console.error("Error loading customers:",e),alert("Failed to load customers")}finally{this.isLoading=!1}})}onSearchChange(){let e=this.searchText.toLowerCase().trim();if(!e){this.filteredCustomers=[...this.customers];return}this.filteredCustomers=this.customers.filter(t=>t.name.toLowerCase().includes(e)||t.phone.includes(e)||t.companyName&&t.companyName.toLowerCase().includes(e))}getTotalAmountDue(){return this.filteredCustomers.reduce((e,t)=>e+t.currentBalance,0)}openAddForm(){this.isEditMode=!1,this.currentCustomer=this.getEmptyCustomer(),this.showForm=!0}openEditForm(e){this.isEditMode=!0,this.currentCustomer=Ie({},e),this.showForm=!0}closeForm(){this.showForm=!1,this.currentCustomer=this.getEmptyCustomer()}saveCustomer(){return F(this,null,function*(){if(this.validateForm()){this.isLoading=!0;try{this.isEditMode?(yield this.db.updateCreditCustomer(this.currentCustomer),alert("Customer updated successfully")):(yield this.db.addCreditCustomer(this.currentCustomer),alert("Customer added successfully")),this.closeForm(),yield this.loadCustomers()}catch(e){console.error("Error saving customer:",e),alert("Failed to save customer")}finally{this.isLoading=!1}}})}toggleCreditStatus(e){return F(this,null,function*(){let t=ft(Ie({},e),{isCreditEnabled:!e.isCreditEnabled});this.isLoading=!0;try{yield this.db.updateCreditCustomer(t),yield this.loadCustomers()}catch(r){console.error("Error toggling credit status:",r),alert("Failed to update credit status")}finally{this.isLoading=!1}})}deleteCustomer(e){return F(this,null,function*(){if(e.currentBalance>0){alert("Cannot delete customer with outstanding balance. Please clear balance first.");return}if(confirm(`Are you sure you want to delete ${e.name}?`)){this.isLoading=!0;try{yield this.db.deleteCreditCustomer(e.id),alert("Customer deleted successfully"),yield this.loadCustomers()}catch(t){console.error("Error deleting customer:",t),alert("Failed to delete customer")}finally{this.isLoading=!1}}})}validateForm(){return this.currentCustomer.name.trim()?this.currentCustomer.phone.trim()?!0:(alert("Please enter phone number"),!1):(alert("Please enter customer name"),!1)}getEmptyCustomer(){return{name:"",phone:"",address:"",companyName:"",currentBalance:0,isCreditEnabled:!0,createdAt:new Date}}viewLedger(e){return F(this,null,function*(){this.selectedCustomer=e,this.showLedger=!0,this.isLoadingLedger=!0;try{this.ledgerEntries=yield this.db.getCustomerLedger(e.id),this.ledgerEntries.sort((t,r)=>{let i=t.date instanceof Date?t.date:t.date.toDate();return(r.date instanceof Date?r.date:r.date.toDate()).getTime()-i.getTime()})}catch(t){console.error("Error loading ledger:",t),alert("Failed to load ledger entries")}finally{this.isLoadingLedger=!1}})}closeLedger(){this.showLedger=!1,this.selectedCustomer=null,this.ledgerEntries=[]}formatDate(e){let t=e instanceof Date?e:e.toDate(),r={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};return t.toLocaleString("en-US",r)}viewOrderDetail(e){return F(this,null,function*(){try{let t=yield this.db.getOrderByOrderNumber(e);if(!t){alert("Order not found");return}let r=t.createdAt&&typeof t.createdAt=="object"&&"toDate"in t.createdAt?t.createdAt.toDate():new Date(t.createdAt),i=(t.items||[]).map(c=>`<tr><td>${c.menuItemName}</td><td>${c.quantity}</td><td>${c.price.toFixed(0)} PKR</td><td>${c.totalPrice.toFixed(0)} PKR</td></tr>`).join(""),o=t.discount>0?`<p>Discount: -${t.discount.toFixed(0)} PKR${t.discountType==="percentage"?` (${t.discountValue}%)`:""}</p>`:"",s=`<!DOCTYPE html><html><head><meta charset="utf-8"><title>Order ${t.orderNumber}</title>
        <style>body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Arial,sans-serif;padding:20px;color:#333}
        h1{font-size:20px;margin:0 0 10px} p{margin:4px 0}
        table{width:100%;border-collapse:collapse;margin-top:10px}
        th,td{padding:8px;border-bottom:1px solid #eee;text-align:left}
        .total{font-weight:700;margin-top:12px}
        </style></head><body>
        <h1>Order ${t.orderNumber}</h1>
        <p><strong>${t.isTakeaway?"Takeaway":"Table: "+t.tableNumber}</strong></p>
        <p>Customer: ${t.customerName||"-"}</p>
        <p>Status: ${t.status}</p>
        <p>Created: ${r.toLocaleString()}</p>
        <table><thead><tr><th>Item</th><th>Qty</th><th>Price</th><th>Total</th></tr></thead><tbody>${i}</tbody></table>
        <p>Subtotal: ${t.subtotal.toFixed(0)} PKR</p>
        <p>Tax: ${t.tax.toFixed(0)} PKR</p>
        ${o}
        <p class="total">Grand Total: ${t.totalAmount.toFixed(0)} PKR</p>
        </body></html>`,a=window.open("","_blank");a&&(a.document.open(),a.document.write(s),a.document.close(),a.focus())}catch(t){console.error("Error viewing order detail:",t),alert("Failed to load order details")}})}collectPayment(e){this.selectedCustomer=e,this.paymentAmount=e.currentBalance,this.showPaymentModal=!0}collectPaymentFromLedger(){this.selectedCustomer&&(this.paymentAmount=this.selectedCustomer.currentBalance,this.showPaymentModal=!0)}closePaymentModal(){this.showPaymentModal=!1,this.paymentAmount=0,this.paymentMode="cash",this.checkNumber="",this.transactionId=""}recordPayment(){return F(this,null,function*(){if(!this.selectedCustomer||this.paymentAmount<=0){alert("Please enter a valid payment amount");return}if(this.paymentMode==="check"&&!this.checkNumber.trim()){alert("Please enter check number");return}if(this.paymentMode==="bank_transfer"&&!this.transactionId.trim()){alert("Please enter transaction ID");return}this.isLoading=!0;try{let e=this.authService.currentUser,t={customerId:this.selectedCustomer.id,customerName:this.selectedCustomer.name,amount:this.paymentAmount,paymentMode:this.paymentMode,date:new Date,receivedBy:e?.name||"Admin",notes:`Payment via ${this.paymentMode}${this.checkNumber?` (Check: ${this.checkNumber})`:""}${this.transactionId?` (TxID: ${this.transactionId})`:""}`};if(this.checkNumber&&(t.checkNumber=this.checkNumber),this.transactionId&&(t.transactionId=this.transactionId),yield this.db.recordCustomerPayment(t),alert("Payment recorded successfully"),this.closePaymentModal(),yield this.loadCustomers(),this.showLedger&&this.selectedCustomer){let r=this.customers.find(i=>i.id===this.selectedCustomer.id);r&&(this.selectedCustomer=r,yield this.viewLedger(r))}}catch(e){console.error("Error recording payment:",e),alert("Failed to record payment")}finally{this.isLoading=!1}})}static \u0275fac=function(t){return new(t||n)(Je(gr),Je(Dr))};static \u0275cmp=Jn({type:n,selectors:[["app-customer-management"]],decls:32,vars:9,consts:[[1,"customer-management-container"],[1,"header"],[1,"btn","btn-primary",3,"click","disabled"],[1,"search-box"],["type","text","placeholder","\u{1F50D} Search by name, phone, or company...",3,"ngModelChange","input","ngModel"],[1,"table-container"],[1,"customer-table"],[1,"balance-header"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","modal",4,"ngIf"],["class","loading-overlay",4,"ngIf"],[1,"customer-name"],[1,"amount"],[1,"status-badge"],[1,"actions"],["title","View Ledger",1,"btn-icon",3,"click"],["title","Collect Payment",1,"btn-icon","btn-collect",3,"click","disabled"],["title","Edit",1,"btn-icon",3,"click"],[1,"btn-icon",3,"click","title"],["title","Delete",1,"btn-icon","btn-delete",3,"click","disabled"],["colspan","6",1,"empty"],[1,"totals-row"],["colspan","3",1,"totals-label"],[1,"amount","debt"],["colspan","2"],[1,"modal"],[1,"modal-content"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"form-group"],["type","text","placeholder","Enter customer name",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter phone number",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter company name (optional)",3,"ngModelChange","ngModel"],["placeholder","Enter address (optional)","rows","3",3,"ngModelChange","ngModel"],[1,"checkbox-label"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click","disabled"],[1,"loading-overlay"],[1,"spinner"],[1,"modal-content","ledger-modal"],[1,"ledger-info"],[1,"info-item"],[1,"label"],[1,"value"],["class","info-item",4,"ngIf"],[1,"value","balance"],["class","loading",4,"ngIf"],["class","empty",4,"ngIf"],["class","ledger-table-container",4,"ngIf"],[1,"btn","btn-secondary",3,"click"],[1,"loading"],[1,"empty"],[1,"ledger-table-container"],[1,"ledger-table"],[1,"amount-col"],[1,"actions-col"],[1,"date-col"],[1,"type-badge"],[1,"ref-col"],[1,"notes-col"],["class","btn-view-detail-text",3,"click",4,"ngIf"],[1,"btn-view-detail-text",3,"click"],[1,"payment-info"],[1,"info-row"],[1,"value","debt"],["type","number","min","0","step","0.01","placeholder","Enter payment amount",1,"form-input",3,"ngModelChange","ngModel","max"],[1,"payment-mode-selector"],[1,"radio-label"],["type","radio","name","paymentMode","value","cash",3,"ngModelChange","ngModel"],["type","radio","name","paymentMode","value","bank_transfer",3,"ngModelChange","ngModel"],["type","radio","name","paymentMode","value","check",3,"ngModelChange","ngModel"],["class","form-group",4,"ngIf"],["class","payment-summary",4,"ngIf"],["type","text","placeholder","Enter check number",1,"form-input",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter transaction ID",1,"form-input",3,"ngModelChange","ngModel"],[1,"payment-summary"],[1,"summary-row"],[1,"credit"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"div",1)(2,"h1"),w(3,"Credit Customer Management"),g(),v(4,"button",2),me("click",function(){return r.openAddForm()}),w(5," + Add New Customer "),g()(),v(6,"div",3)(7,"input",4),Ye("ngModelChange",function(o){return Qe(r.searchText,o)||(r.searchText=o),o}),me("input",function(){return r.onSearchChange()}),g()(),v(8,"div",5)(9,"table",6)(10,"thead")(11,"tr")(12,"th"),w(13,"Customer Name"),g(),v(14,"th"),w(15,"Phone"),g(),v(16,"th"),w(17,"Company"),g(),v(18,"th",7),w(19,"Amount Due"),g(),v(20,"th"),w(21,"Status"),g(),v(22,"th"),w(23,"Actions"),g()()(),v(24,"tbody"),Fe(25,foe,23,15,"tr",8)(26,poe,3,0,"tr",9),g(),Fe(27,moe,9,1,"tfoot",9),g()(),Fe(28,goe,33,9,"div",10)(29,voe,2,0,"div",11)(30,Soe,28,10,"div",10)(31,Moe,39,12,"div",10),g()),t&2&&(I(4),ie("disabled",r.isLoading),I(3),Ke("ngModel",r.searchText),I(18),ie("ngForOf",r.filteredCustomers),I(),ie("ngIf",r.filteredCustomers.length===0),I(),ie("ngIf",r.filteredCustomers.length>0),I(),ie("ngIf",r.showForm),I(),ie("ngIf",r.isLoading),I(),ie("ngIf",r.showLedger),I(),ie("ngIf",r.showPaymentModal))},dependencies:[ir,Nr,lr,Ei,Ci,ys,ml,u0,Zi,_s,lh,ji],styles:[".customer-management-container[_ngcontent-%COMP%]{padding:20px;max-width:1400px;margin:0 auto}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:24px;color:#1e293b}.search-box[_ngcontent-%COMP%]{margin-bottom:20px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid #e2e8f0;border-radius:8px;font-size:15px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 1px 3px #0000001a;overflow-x:auto}.customer-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.customer-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#f8fafc;border-bottom:2px solid #e2e8f0}.customer-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:12px 16px;text-align:left;font-weight:600;color:#475569;font-size:14px;white-space:nowrap}.customer-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;border-bottom:1px solid #f1f5f9;font-size:14px}.customer-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8fafc}.customer-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.status-critical[_ngcontent-%COMP%]{background:#fef2f2}.customer-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.status-warning[_ngcontent-%COMP%]{background:#fffbeb}.customer-name[_ngcontent-%COMP%]{font-weight:600;color:#1e293b}.balance-header[_ngcontent-%COMP%]{text-align:right}.amount[_ngcontent-%COMP%]{text-align:left;font-family:Courier New,monospace;font-weight:600}.amount.debt[_ngcontent-%COMP%]{color:#dc2626}.customer-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]{background:#f1f5f9;border-top:3px solid #3b82f6}.totals-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px;font-size:15px}.totals-label[_ngcontent-%COMP%]{text-align:right;color:#1e293b}.totals-row[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-size:16px}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;border-radius:12px;font-size:12px;font-weight:600;margin-bottom:6px}.status-badge.active[_ngcontent-%COMP%]{background:#dcfce7;color:#166534}.status-badge.inactive[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b}.utilization-bar[_ngcontent-%COMP%]{width:100px;height:6px;background:#e2e8f0;border-radius:3px;overflow:hidden}.utilization-fill[_ngcontent-%COMP%]{height:100%;background:#10b981;transition:width .3s ease,background .3s ease}tr.status-warning[_ngcontent-%COMP%]   .utilization-fill[_ngcontent-%COMP%]{background:#f59e0b}tr.status-critical[_ngcontent-%COMP%]   .utilization-fill[_ngcontent-%COMP%]{background:#ef4444}.actions[_ngcontent-%COMP%]{display:flex;gap:8px}.btn-icon[_ngcontent-%COMP%]{background:none;border:none;font-size:18px;cursor:pointer;padding:4px 8px;border-radius:4px;transition:background .2s}.btn-icon[_ngcontent-%COMP%]:hover{background:#f1f5f9}.btn-icon[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.btn-icon.btn-delete[_ngcontent-%COMP%]:hover{background:#fee2e2}.empty[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#94a3b8;font-style:italic}.modal[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;padding:20px}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:100%;max-width:600px;max-height:90vh;overflow-y:auto;box-shadow:0 20px 25px -5px #0000001a}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px;border-bottom:2px solid #f1f5f9}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:20px;color:#1e293b}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:28px;color:#94a3b8;cursor:pointer;padding:0;width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:4px}.close-btn[_ngcontent-%COMP%]:hover{background:#f1f5f9;color:#1e293b}.modal-body[_ngcontent-%COMP%]{padding:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:16px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-weight:600;color:#475569;font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:2px solid #e2e8f0;border-radius:6px;font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6}.form-group[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:block;margin-top:4px;color:#64748b;font-size:12px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;font-weight:400!important}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto;cursor:pointer}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;padding:16px 20px;border-top:2px solid #f1f5f9}.btn[_ngcontent-%COMP%]{padding:10px 20px;border-radius:8px;border:none;font-weight:600;cursor:pointer;font-size:14px;transition:all .2s}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-primary[_ngcontent-%COMP%]{background:#3b82f6;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#2563eb}.btn-secondary[_ngcontent-%COMP%]{background:#f1f5f9;color:#334155}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#e2e8f0}.loading-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#fffc;display:flex;align-items:center;justify-content:center;z-index:2000}.spinner[_ngcontent-%COMP%]{border:4px solid #f1f5f9;border-top:4px solid #3b82f6;border-radius:50%;width:50px;height:50px;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.customer-management-container[_ngcontent-%COMP%]{padding:12px}.header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:12px}.table-container[_ngcontent-%COMP%]{overflow-x:scroll}.customer-table[_ngcontent-%COMP%]{min-width:800px}.modal[_ngcontent-%COMP%]{padding:10px}}.ledger-modal[_ngcontent-%COMP%]{max-width:900px;width:95%}.ledger-info[_ngcontent-%COMP%]{display:flex;gap:24px;padding:16px;background:#f8fafc;border-radius:8px;margin-bottom:20px}.ledger-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.ledger-info[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:12px;color:#64748b;font-weight:500}.ledger-info[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:15px;color:#1e293b;font-weight:600}.ledger-info[_ngcontent-%COMP%]   .value.balance[_ngcontent-%COMP%]{font-family:Courier New,monospace;font-size:16px}.ledger-info[_ngcontent-%COMP%]   .value.balance.debt[_ngcontent-%COMP%]{color:#dc2626}.ledger-table-container[_ngcontent-%COMP%]{overflow-x:auto;max-height:500px;overflow-y:auto}.ledger-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:14px}.ledger-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#f1f5f9;position:sticky;top:0;z-index:1}.ledger-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:12px 10px;text-align:left;font-weight:600;color:#475569;border-bottom:2px solid #e2e8f0;white-space:nowrap}.ledger-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;border-bottom:1px solid #f1f5f9}.ledger-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8fafc}.date-col[_ngcontent-%COMP%]{white-space:nowrap;color:#64748b;font-size:13px}.type-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;border-radius:12px;font-size:12px;font-weight:600;white-space:nowrap}.type-badge.sale[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b}.type-badge.payment[_ngcontent-%COMP%]{background:#dcfce7;color:#166534}.ref-col[_ngcontent-%COMP%]{font-family:Courier New,monospace;font-size:13px;color:#475569}.notes-col[_ngcontent-%COMP%]{color:#64748b;font-size:13px;max-width:200px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.amount-col[_ngcontent-%COMP%]{text-align:right;font-family:Courier New,monospace;font-weight:600;white-space:nowrap}.amount-col.debit[_ngcontent-%COMP%]{color:#dc2626}.amount-col.credit[_ngcontent-%COMP%]{color:#16a34a}.amount-col.balance[_ngcontent-%COMP%]{color:#1e293b}.amount-col.balance.debt[_ngcontent-%COMP%]{color:#dc2626}.amount-col.zero[_ngcontent-%COMP%]{color:#cbd5e1}.loading[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#64748b}.btn-view-detail[_ngcontent-%COMP%]{background:none;border:none;font-size:16px;cursor:pointer;padding:2px 6px;margin-left:8px;border-radius:4px;transition:background .2s;vertical-align:middle}.btn-view-detail[_ngcontent-%COMP%]:hover{background:#f1f5f9}.btn-view-detail-text[_ngcontent-%COMP%]{background:#3b82f6;color:#fff;border:none;font-size:13px;cursor:pointer;padding:6px 12px;border-radius:6px;transition:all .2s;font-weight:500}.btn-view-detail-text[_ngcontent-%COMP%]:hover{background:#2563eb;transform:translateY(-1px);box-shadow:0 2px 4px #3b82f64d}.actions-col[_ngcontent-%COMP%]{text-align:center;width:120px}.ref-col[_ngcontent-%COMP%]{white-space:nowrap}.btn-icon.btn-collect[_ngcontent-%COMP%]{color:#16a34a}.btn-icon.btn-collect[_ngcontent-%COMP%]:hover:not(:disabled){background:#dcfce7}.payment-info[_ngcontent-%COMP%]{background:#f8fafc;padding:16px;border-radius:8px;margin-bottom:20px}.payment-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.payment-info[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:14px;color:#64748b;font-weight:500}.payment-info[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:18px;font-weight:700;font-family:Courier New,monospace}.payment-info[_ngcontent-%COMP%]   .value.debt[_ngcontent-%COMP%]{color:#dc2626}.payment-mode-selector[_ngcontent-%COMP%]{display:flex;gap:16px;flex-wrap:wrap}.radio-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:8px 16px;border:2px solid #e2e8f0;border-radius:8px;cursor:pointer;transition:all .2s;font-size:14px}.radio-label[_ngcontent-%COMP%]:hover{border-color:#3b82f6;background:#eff6ff}.radio-label[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{cursor:pointer}.radio-label[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:checked + *[_ngcontent-%COMP%]{font-weight:600}.payment-summary[_ngcontent-%COMP%]{background:#f8fafc;padding:16px;border-radius:8px;margin-top:20px}.summary-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:8px 0;font-size:15px}.summary-row[_ngcontent-%COMP%]:last-child{border-top:2px solid #e2e8f0;margin-top:8px;padding-top:12px;font-weight:700}.summary-row[_ngcontent-%COMP%]   .credit[_ngcontent-%COMP%]{color:#16a34a;font-family:Courier New,monospace;font-weight:600}.summary-row[_ngcontent-%COMP%]   .debt[_ngcontent-%COMP%]{color:#dc2626;font-family:Courier New,monospace}.summary-row[_ngcontent-%COMP%]   .cleared[_ngcontent-%COMP%]{color:#16a34a;font-family:Courier New,monospace}"]})};var yV=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"login",component:xb},{path:"dashboard",component:Sb,canActivate:[xa,Ru]},{path:"menu",component:Db,canActivate:[xa,Ru]},{path:"deals",component:yw,canActivate:[xa,Ru]},{path:"inventory",component:Tb,canActivate:[xa,Ru]},{path:"customers",component:_w,canActivate:[xa,Ru]},{path:"pos",component:Ab,canActivate:[xa]},{path:"kitchen",component:Mb,canActivate:[xa]},{path:"waiter",component:vw,canActivate:[xa]},{path:"users",component:Pb,canActivate:[xa,Ru]},{path:"reports",component:gw,canActivate:[xa,Ru]},{path:"**",redirectTo:"/login"}];var _V={providers:[rC(),wE({eventCoalescing:!0}),pI(yV),KO(()=>YO(YL.firebase)),n3(()=>o3()),HL(()=>WL())]};function Poe(n,e){n&1&&($y(0),v(1,"a",13),w(2,"Dashboard"),g(),v(3,"a",14),w(4,"Menu"),g(),v(5,"a",15),w(6,"Deals"),g(),v(7,"a",16),w(8,"Inventory"),g(),v(9,"a",17),w(10,"Customers"),g(),v(11,"a",18),w(12,"Users"),g(),v(13,"a",19),w(14,"Reports"),g(),v(15,"a",20),w(16,"Waiter"),g(),qy())}function Noe(n,e){n&1&&(v(0,"a",21),w(1,"POS"),g())}function koe(n,e){n&1&&(v(0,"a",22),w(1,"Kitchen"),g())}function Ooe(n,e){n&1&&(v(0,"a",20),w(1,"Waiter"),g())}function Roe(n,e){if(n&1){let t=at();v(0,"nav",3)(1,"div",4)(2,"h2"),w(3,"\u{1F37D}\uFE0F Visakh"),g()(),v(4,"div",5),Fe(5,Poe,17,0,"ng-container",6)(6,Noe,2,0,"a",7)(7,koe,2,0,"a",8)(8,Ooe,2,0,"a",9),g(),v(9,"div",10)(10,"span",11),w(11),g(),v(12,"button",12),me("click",function(){le(t);let i=Z();return ue(i.logout())}),w(13,"Logout"),g()()()}if(n&2){let t=Z();I(5),ie("ngIf",t.authService.hasRole("admin")),I(),ie("ngIf",t.authService.hasRole("cashier")||t.authService.hasRole("admin")),I(),ie("ngIf",t.authService.hasRole("chef")||t.authService.hasRole("admin")),I(),ie("ngIf",t.authService.hasRole("waiter")),I(3),Ve(t.authService.currentUser==null?null:t.authService.currentUser.name)}}var bw=class n{constructor(e,t){this.authService=e;this.router=t;let r=sessionStorage.getItem("redirectPath");r&&r!=="/"&&this.router.url==="/"&&(sessionStorage.removeItem("redirectPath"),this.router.navigateByUrl(r).catch(()=>{})),this.router.events.subscribe(()=>{this.showNav=!this.router.url.includes("login")})}title="Restaurant Management System";showNav=!1;logout(){return F(this,null,function*(){yield this.authService.logout()})}static \u0275fac=function(t){return new(t||n)(Je(Dr),Je(Hs))};static \u0275cmp=Jn({type:n,selectors:[["app-root"]],decls:4,vars:3,consts:[[1,"app-container"],["class","navbar",4,"ngIf"],[1,"main-content"],[1,"navbar"],[1,"nav-brand"],[1,"nav-links"],[4,"ngIf"],["routerLink","/pos","routerLinkActive","active",4,"ngIf"],["routerLink","/kitchen","routerLinkActive","active",4,"ngIf"],["routerLink","/waiter","routerLinkActive","active",4,"ngIf"],[1,"nav-user"],[1,"user-name"],[1,"btn-logout",3,"click"],["routerLink","/dashboard","routerLinkActive","active"],["routerLink","/menu","routerLinkActive","active"],["routerLink","/deals","routerLinkActive","active"],["routerLink","/inventory","routerLinkActive","active"],["routerLink","/customers","routerLinkActive","active"],["routerLink","/users","routerLinkActive","active"],["routerLink","/reports","routerLinkActive","active"],["routerLink","/waiter","routerLinkActive","active"],["routerLink","/pos","routerLinkActive","active"],["routerLink","/kitchen","routerLinkActive","active"]],template:function(t,r){t&1&&(v(0,"div",0),Fe(1,Roe,14,5,"nav",1),v(2,"main",2),Fi(3,"router-outlet"),g()()),t&2&&(I(),ie("ngIf",r.showNav&&r.authService.isLoggedIn()),I(),kt("with-nav",r.showNav&&r.authService.isLoggedIn()))},dependencies:[ir,lr,fg,O_],styles:[".app-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column}.navbar[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:0 20px;display:flex;align-items:center;justify-content:space-between;height:60px;box-shadow:0 2px 8px #0000001a;position:sticky;top:0;z-index:100}.nav-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:600}.nav-links[_ngcontent-%COMP%]{display:flex;gap:5px;flex:1;justify-content:center}.nav-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;padding:8px 16px;border-radius:5px;transition:background .3s;font-weight:500}.nav-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#fff3}.nav-links[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background:#ffffff4d}.nav-user[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.user-name[_ngcontent-%COMP%]{font-weight:500}.btn-logout[_ngcontent-%COMP%]{background:#fff3;color:#fff;border:1px solid rgba(255,255,255,.3);padding:8px 16px;border-radius:5px;cursor:pointer;font-weight:500;transition:all .3s}.btn-logout[_ngcontent-%COMP%]:hover{background:#ffffff4d}.main-content[_ngcontent-%COMP%]{flex:1;background:#f5f5f5}.main-content.with-nav[_ngcontent-%COMP%]{min-height:calc(100vh - 60px)}"]})};qE(bw,_V).catch(n=>console.error(n));
